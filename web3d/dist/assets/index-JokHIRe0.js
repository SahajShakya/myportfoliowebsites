var yJ=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var MIe=yJ((aa,la)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function HP(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var IT={exports:{}},Hy={},PT={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD;function _J(){if(zD)return Dn;zD=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function f(V){return V===null||typeof V!="object"?null:(V=h&&V[h]||V["@@iterator"],typeof V=="function"?V:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function _(V,X,re){this.props=V,this.context=X,this.refs=x,this.updater=re||p}_.prototype.isReactComponent={},_.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},_.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function v(){}v.prototype=_.prototype;function b(V,X,re){this.props=V,this.context=X,this.refs=x,this.updater=re||p}var E=b.prototype=new v;E.constructor=b,g(E,_.prototype),E.isPureReactComponent=!0;var S=Array.isArray,C=Object.prototype.hasOwnProperty,D={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(V,X,re){var se,he={},te=null,ce=null;if(X!=null)for(se in X.ref!==void 0&&(ce=X.ref),X.key!==void 0&&(te=""+X.key),X)C.call(X,se)&&!M.hasOwnProperty(se)&&(he[se]=X[se]);var ve=arguments.length-2;if(ve===1)he.children=re;else if(1<ve){for(var xe=Array(ve),Te=0;Te<ve;Te++)xe[Te]=arguments[Te+2];he.children=xe}if(V&&V.defaultProps)for(se in ve=V.defaultProps,ve)he[se]===void 0&&(he[se]=ve[se]);return{$$typeof:n,type:V,key:te,ref:ce,props:he,_owner:D.current}}function O(V,X){return{$$typeof:n,type:V.type,key:X,ref:V.ref,props:V.props,_owner:V._owner}}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function N(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return X[re]})}var U=/\/+/g;function F(V,X){return typeof V=="object"&&V!==null&&V.key!=null?N(""+V.key):X.toString(36)}function J(V,X,re,se,he){var te=typeof V;(te==="undefined"||te==="boolean")&&(V=null);var ce=!1;if(V===null)ce=!0;else switch(te){case"string":case"number":ce=!0;break;case"object":switch(V.$$typeof){case n:case e:ce=!0}}if(ce)return ce=V,he=he(ce),V=se===""?"."+F(ce,0):se,S(he)?(re="",V!=null&&(re=V.replace(U,"$&/")+"/"),J(he,X,re,"",function(Te){return Te})):he!=null&&(R(he)&&(he=O(he,re+(!he.key||ce&&ce.key===he.key?"":(""+he.key).replace(U,"$&/")+"/")+V)),X.push(he)),1;if(ce=0,se=se===""?".":se+":",S(V))for(var ve=0;ve<V.length;ve++){te=V[ve];var xe=se+F(te,ve);ce+=J(te,X,re,xe,he)}else if(xe=f(V),typeof xe=="function")for(V=xe.call(V),ve=0;!(te=V.next()).done;)te=te.value,xe=se+F(te,ve++),ce+=J(te,X,re,xe,he);else if(te==="object")throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ce}function Z(V,X,re){if(V==null)return V;var se=[],he=0;return J(V,se,"","",function(te){return X.call(re,te,he++)}),se}function oe(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var ae={current:null},Q={transition:null},ee={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:Q,ReactCurrentOwner:D};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Dn.Children={map:Z,forEach:function(V,X,re){Z(V,function(){X.apply(this,arguments)},re)},count:function(V){var X=0;return Z(V,function(){X++}),X},toArray:function(V){return Z(V,function(X){return X})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Dn.Component=_,Dn.Fragment=t,Dn.Profiler=i,Dn.PureComponent=b,Dn.StrictMode=r,Dn.Suspense=l,Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Dn.act=Y,Dn.cloneElement=function(V,X,re){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var se=g({},V.props),he=V.key,te=V.ref,ce=V._owner;if(X!=null){if(X.ref!==void 0&&(te=X.ref,ce=D.current),X.key!==void 0&&(he=""+X.key),V.type&&V.type.defaultProps)var ve=V.type.defaultProps;for(xe in X)C.call(X,xe)&&!M.hasOwnProperty(xe)&&(se[xe]=X[xe]===void 0&&ve!==void 0?ve[xe]:X[xe])}var xe=arguments.length-2;if(xe===1)se.children=re;else if(1<xe){ve=Array(xe);for(var Te=0;Te<xe;Te++)ve[Te]=arguments[Te+2];se.children=ve}return{$$typeof:n,type:V.type,key:he,ref:te,props:se,_owner:ce}},Dn.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:s,_context:V},V.Consumer=V},Dn.createElement=P,Dn.createFactory=function(V){var X=P.bind(null,V);return X.type=V,X},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(V){return{$$typeof:a,render:V}},Dn.isValidElement=R,Dn.lazy=function(V){return{$$typeof:c,_payload:{_status:-1,_result:V},_init:oe}},Dn.memo=function(V,X){return{$$typeof:u,type:V,compare:X===void 0?null:X}},Dn.startTransition=function(V){var X=Q.transition;Q.transition={};try{V()}finally{Q.transition=X}},Dn.unstable_act=Y,Dn.useCallback=function(V,X){return ae.current.useCallback(V,X)},Dn.useContext=function(V){return ae.current.useContext(V)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(V){return ae.current.useDeferredValue(V)},Dn.useEffect=function(V,X){return ae.current.useEffect(V,X)},Dn.useId=function(){return ae.current.useId()},Dn.useImperativeHandle=function(V,X,re){return ae.current.useImperativeHandle(V,X,re)},Dn.useInsertionEffect=function(V,X){return ae.current.useInsertionEffect(V,X)},Dn.useLayoutEffect=function(V,X){return ae.current.useLayoutEffect(V,X)},Dn.useMemo=function(V,X){return ae.current.useMemo(V,X)},Dn.useReducer=function(V,X,re){return ae.current.useReducer(V,X,re)},Dn.useRef=function(V){return ae.current.useRef(V)},Dn.useState=function(V){return ae.current.useState(V)},Dn.useSyncExternalStore=function(V,X,re){return ae.current.useSyncExternalStore(V,X,re)},Dn.useTransition=function(){return ae.current.useTransition()},Dn.version="18.3.1",Dn}var HD;function kf(){return HD||(HD=1,PT.exports=_J()),PT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GD;function xJ(){if(GD)return Hy;GD=1;var n=kf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,h={},f=null,p=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(h[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:a,key:f,ref:p,props:h,_owner:i.current}}return Hy.Fragment=t,Hy.jsx=o,Hy.jsxs=o,Hy}var qD;function wJ(){return qD||(qD=1,IT.exports=xJ()),IT.exports}var L=wJ(),W=kf();const Qt=Ll(W);var Aw={},kT={exports:{}},Co={},OT={exports:{}},DT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function bJ(){return WD||(WD=1,(function(n){function e(Q,ee){var Y=Q.length;Q.push(ee);e:for(;0<Y;){var V=Y-1>>>1,X=Q[V];if(0<i(X,ee))Q[V]=ee,Q[Y]=X,Y=V;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],Y=Q.pop();if(Y!==ee){Q[0]=Y;e:for(var V=0,X=Q.length,re=X>>>1;V<re;){var se=2*(V+1)-1,he=Q[se],te=se+1,ce=Q[te];if(0>i(he,Y))te<X&&0>i(ce,he)?(Q[V]=ce,Q[te]=Y,V=te):(Q[V]=he,Q[se]=Y,V=se);else if(te<X&&0>i(ce,Y))Q[V]=ce,Q[te]=Y,V=te;else break e}}return ee}function i(Q,ee){var Y=Q.sortIndex-ee.sortIndex;return Y!==0?Y:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,p=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Q){for(var ee=t(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=Q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function S(Q){if(x=!1,E(Q),!g)if(t(l)!==null)g=!0,oe(C);else{var ee=t(u);ee!==null&&ae(S,ee.startTime-Q)}}function C(Q,ee){g=!1,x&&(x=!1,v(P),P=-1),p=!0;var Y=f;try{for(E(ee),h=t(l);h!==null&&(!(h.expirationTime>ee)||Q&&!N());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var X=V(h.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&r(l),E(ee)}else r(l);h=t(l)}if(h!==null)var re=!0;else{var se=t(u);se!==null&&ae(S,se.startTime-ee),re=!1}return re}finally{h=null,f=Y,p=!1}}var D=!1,M=null,P=-1,O=5,R=-1;function N(){return!(n.unstable_now()-R<O)}function U(){if(M!==null){var Q=n.unstable_now();R=Q;var ee=!0;try{ee=M(!0,Q)}finally{ee?F():(D=!1,M=null)}}else D=!1}var F;if(typeof b=="function")F=function(){b(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Z=J.port2;J.port1.onmessage=U,F=function(){Z.postMessage(null)}}else F=function(){_(U,0)};function oe(Q){M=Q,D||(D=!0,F())}function ae(Q,ee){P=_(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,oe(C))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var ee=3;break;default:ee=f}var Y=f;f=ee;try{return Q()}finally{f=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=f;f=Q;try{return ee()}finally{f=Y}},n.unstable_scheduleCallback=function(Q,ee,Y){var V=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?V+Y:V):Y=V,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Y+X,Q={id:c++,callback:ee,priorityLevel:Q,startTime:Y,expirationTime:X,sortIndex:-1},Y>V?(Q.sortIndex=Y,e(u,Q),t(l)===null&&Q===t(u)&&(x?(v(P),P=-1):x=!0,ae(S,Y-V))):(Q.sortIndex=X,e(l,Q),g||p||(g=!0,oe(C))),Q},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Q){var ee=f;return function(){var Y=f;f=ee;try{return Q.apply(this,arguments)}finally{f=Y}}}})(DT)),DT}var $D;function EJ(){return $D||($D=1,OT.exports=bJ()),OT.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD;function AJ(){if(KD)return Co;KD=1;var n=kf(),e=EJ();function t(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,A=1;A<arguments.length;A++)m+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function f(d){return l.call(h,d)?!0:l.call(c,d)?!1:u.test(d)?h[d]=!0:(c[d]=!0,!1)}function p(d,m,A,k){if(A!==null&&A.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return k?!1:A!==null?!A.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function g(d,m,A,k){if(m===null||typeof m>"u"||p(d,m,A,k))return!0;if(k)return!1;if(A!==null)switch(A.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function x(d,m,A,k,j,G,ne){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=k,this.attributeNamespace=j,this.mustUseProperty=A,this.propertyName=d,this.type=m,this.sanitizeURL=G,this.removeEmptyString=ne}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new x(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];_[m]=new x(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new x(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new x(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new x(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new x(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new x(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new x(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new x(d,5,!1,d.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(v,b);_[m]=new x(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(v,b);_[m]=new x(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(v,b);_[m]=new x(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new x(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new x(d,1,!1,d.toLowerCase(),null,!0,!0)});function E(d,m,A,k){var j=_.hasOwnProperty(m)?_[m]:null;(j!==null?j.type!==0:k||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,A,j,k)&&(A=null),k||j===null?f(m)&&(A===null?d.removeAttribute(m):d.setAttribute(m,""+A)):j.mustUseProperty?d[j.propertyName]=A===null?j.type===3?!1:"":A:(m=j.attributeName,k=j.attributeNamespace,A===null?d.removeAttribute(m):(j=j.type,A=j===3||j===4&&A===!0?"":""+A,k?d.setAttributeNS(k,m,A):d.setAttribute(m,A))))}var S=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),D=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),N=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ee(d){return d===null||typeof d!="object"?null:(d=Q&&d[Q]||d["@@iterator"],typeof d=="function"?d:null)}var Y=Object.assign,V;function X(d){if(V===void 0)try{throw Error()}catch(A){var m=A.stack.trim().match(/\n( *(at )?)/);V=m&&m[1]||""}return`
`+V+d}var re=!1;function se(d,m){if(!d||re)return"";re=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ze){var k=ze}Reflect.construct(d,[],m)}else{try{m.call()}catch(ze){k=ze}d.call(m.prototype)}else{try{throw Error()}catch(ze){k=ze}d()}}catch(ze){if(ze&&k&&typeof ze.stack=="string"){for(var j=ze.stack.split(`
`),G=k.stack.split(`
`),ne=j.length-1,_e=G.length-1;1<=ne&&0<=_e&&j[ne]!==G[_e];)_e--;for(;1<=ne&&0<=_e;ne--,_e--)if(j[ne]!==G[_e]){if(ne!==1||_e!==1)do if(ne--,_e--,0>_e||j[ne]!==G[_e]){var Ee=`
`+j[ne].replace(" at new "," at ");return d.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",d.displayName)),Ee}while(1<=ne&&0<=_e);break}}}finally{re=!1,Error.prepareStackTrace=A}return(d=d?d.displayName||d.name:"")?X(d):""}function he(d){switch(d.tag){case 5:return X(d.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return d=se(d.type,!1),d;case 11:return d=se(d.type.render,!1),d;case 1:return d=se(d.type,!0),d;default:return""}}function te(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case M:return"Fragment";case D:return"Portal";case O:return"Profiler";case P:return"StrictMode";case F:return"Suspense";case J:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case N:return(d.displayName||"Context")+".Consumer";case R:return(d._context.displayName||"Context")+".Provider";case U:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Z:return m=d.displayName||null,m!==null?m:te(d.type)||"Memo";case oe:m=d._payload,d=d._init;try{return te(d(m))}catch{}}return null}function ce(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(m);case 8:return m===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ve(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function xe(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Te(d){var m=xe(d)?"checked":"value",A=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),k=""+d[m];if(!d.hasOwnProperty(m)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var j=A.get,G=A.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return j.call(this)},set:function(ne){k=""+ne,G.call(this,ne)}}),Object.defineProperty(d,m,{enumerable:A.enumerable}),{getValue:function(){return k},setValue:function(ne){k=""+ne},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function $e(d){d._valueTracker||(d._valueTracker=Te(d))}function De(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var A=m.getValue(),k="";return d&&(k=xe(d)?d.checked?"true":"false":d.value),d=k,d!==A?(m.setValue(d),!0):!1}function Be(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function fe(d,m){var A=m.checked;return Y({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??d._wrapperState.initialChecked})}function it(d,m){var A=m.defaultValue==null?"":m.defaultValue,k=m.checked!=null?m.checked:m.defaultChecked;A=ve(m.value!=null?m.value:A),d._wrapperState={initialChecked:k,initialValue:A,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Je(d,m){m=m.checked,m!=null&&E(d,"checked",m,!1)}function rt(d,m){Je(d,m);var A=ve(m.value),k=m.type;if(A!=null)k==="number"?(A===0&&d.value===""||d.value!=A)&&(d.value=""+A):d.value!==""+A&&(d.value=""+A);else if(k==="submit"||k==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?Ie(d,m.type,A):m.hasOwnProperty("defaultValue")&&Ie(d,m.type,ve(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function we(d,m,A){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var k=m.type;if(!(k!=="submit"&&k!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,A||m===d.value||(d.value=m),d.defaultValue=m}A=d.name,A!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,A!==""&&(d.name=A)}function Ie(d,m,A){(m!=="number"||Be(d.ownerDocument)!==d)&&(A==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+A&&(d.defaultValue=""+A))}var Ne=Array.isArray;function ie(d,m,A,k){if(d=d.options,m){m={};for(var j=0;j<A.length;j++)m["$"+A[j]]=!0;for(A=0;A<d.length;A++)j=m.hasOwnProperty("$"+d[A].value),d[A].selected!==j&&(d[A].selected=j),j&&k&&(d[A].defaultSelected=!0)}else{for(A=""+ve(A),m=null,j=0;j<d.length;j++){if(d[j].value===A){d[j].selected=!0,k&&(d[j].defaultSelected=!0);return}m!==null||d[j].disabled||(m=d[j])}m!==null&&(m.selected=!0)}}function q(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function me(d,m){var A=m.value;if(A==null){if(A=m.children,m=m.defaultValue,A!=null){if(m!=null)throw Error(t(92));if(Ne(A)){if(1<A.length)throw Error(t(93));A=A[0]}m=A}m==null&&(m=""),A=m}d._wrapperState={initialValue:ve(A)}}function de(d,m){var A=ve(m.value),k=ve(m.defaultValue);A!=null&&(A=""+A,A!==d.value&&(d.value=A),m.defaultValue==null&&d.defaultValue!==A&&(d.defaultValue=A)),k!=null&&(d.defaultValue=""+k)}function ye(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function be(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?be(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var qe,lt=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,A,k,j){MSApp.execUnsafeLocalFunction(function(){return d(m,A,k,j)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=qe.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function vt(d,m){if(m){var A=d.firstChild;if(A&&A===d.lastChild&&A.nodeType===3){A.nodeValue=m;return}}d.textContent=m}var Ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yt=["Webkit","ms","Moz","O"];Object.keys(Ye).forEach(function(d){yt.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),Ye[m]=Ye[d]})});function Ot(d,m,A){return m==null||typeof m=="boolean"||m===""?"":A||typeof m!="number"||m===0||Ye.hasOwnProperty(d)&&Ye[d]?(""+m).trim():m+"px"}function jt(d,m){d=d.style;for(var A in m)if(m.hasOwnProperty(A)){var k=A.indexOf("--")===0,j=Ot(A,m[A],k);A==="float"&&(A="cssFloat"),k?d.setProperty(A,j):d[A]=j}}var Et=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(d,m){if(m){if(Et[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function qt(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rn=null;function Ae(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var mt=null,Ge=null,Xe=null;function _t(d){if(d=Za(d)){if(typeof mt!="function")throw Error(t(280));var m=d.stateNode;m&&(m=km(m),mt(d.stateNode,d.type,m))}}function dt(d){Ge?Xe?Xe.push(d):Xe=[d]:Ge=d}function Zt(){if(Ge){var d=Ge,m=Xe;if(Xe=Ge=null,_t(d),m)for(d=0;d<m.length;d++)_t(m[d])}}function Qn(d,m){return d(m)}function Tr(){}var An=!1;function _i(d,m,A){if(An)return d(m,A);An=!0;try{return Qn(d,m,A)}finally{An=!1,(Ge!==null||Xe!==null)&&(Tr(),Zt())}}function Kn(d,m){var A=d.stateNode;if(A===null)return null;var k=km(A);if(k===null)return null;A=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(A&&typeof A!="function")throw Error(t(231,m,typeof A));return A}var Va=!1;if(a)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Va=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Va=!1}function Qi(d,m,A,k,j,G,ne,_e,Ee){var ze=Array.prototype.slice.call(arguments,3);try{m.apply(A,ze)}catch(st){this.onError(st)}}var Qs=!1,za=null,xi=!1,da=null,th={onError:function(d){Qs=!0,za=d}};function Bo(d,m,A,k,j,G,ne,_e,Ee){Qs=!1,za=null,Qi.apply(th,arguments)}function Iu(d,m,A,k,j,G,ne,_e,Ee){if(Bo.apply(this,arguments),Qs){if(Qs){var ze=za;Qs=!1,za=null}else throw Error(t(198));xi||(xi=!0,da=ze)}}function Rs(d){var m=d,A=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(A=m.return),d=m.return;while(d)}return m.tag===3?A:null}function Ha(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Zs(d){if(Rs(d)!==d)throw Error(t(188))}function Pu(d){var m=d.alternate;if(!m){if(m=Rs(d),m===null)throw Error(t(188));return m!==d?null:d}for(var A=d,k=m;;){var j=A.return;if(j===null)break;var G=j.alternate;if(G===null){if(k=j.return,k!==null){A=k;continue}break}if(j.child===G.child){for(G=j.child;G;){if(G===A)return Zs(j),d;if(G===k)return Zs(j),m;G=G.sibling}throw Error(t(188))}if(A.return!==k.return)A=j,k=G;else{for(var ne=!1,_e=j.child;_e;){if(_e===A){ne=!0,A=j,k=G;break}if(_e===k){ne=!0,k=j,A=G;break}_e=_e.sibling}if(!ne){for(_e=G.child;_e;){if(_e===A){ne=!0,A=G,k=j;break}if(_e===k){ne=!0,k=G,A=j;break}_e=_e.sibling}if(!ne)throw Error(t(189))}}if(A.alternate!==k)throw Error(t(190))}if(A.tag!==3)throw Error(t(188));return A.stateNode.current===A?d:m}function ku(d){return d=Pu(d),d!==null?zl(d):null}function zl(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=zl(d);if(m!==null)return m;d=d.sibling}return null}var Hl=e.unstable_scheduleCallback,le=e.unstable_cancelCallback,Me=e.unstable_shouldYield,je=e.unstable_requestPaint,Oe=e.unstable_now,Re=e.unstable_getCurrentPriorityLevel,tt=e.unstable_ImmediatePriority,ft=e.unstable_UserBlockingPriority,gt=e.unstable_NormalPriority,At=e.unstable_LowPriority,zt=e.unstable_IdlePriority,Bt=null,ut=null;function Pt(d){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Bt,d,void 0,(d.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:un,xn=Math.log,Sn=Math.LN2;function un(d){return d>>>=0,d===0?32:31-(xn(d)/Sn|0)|0}var kt=64,In=4194304;function fn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Xr(d,m){var A=d.pendingLanes;if(A===0)return 0;var k=0,j=d.suspendedLanes,G=d.pingedLanes,ne=A&268435455;if(ne!==0){var _e=ne&~j;_e!==0?k=fn(_e):(G&=ne,G!==0&&(k=fn(G)))}else ne=A&~j,ne!==0?k=fn(ne):G!==0&&(k=fn(G));if(k===0)return 0;if(m!==0&&m!==k&&(m&j)===0&&(j=k&-k,G=m&-m,j>=G||j===16&&(G&4194240)!==0))return m;if((k&4)!==0&&(k|=A&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=k;0<m;)A=31-Ht(m),j=1<<A,k|=d[A],m&=~j;return k}function Fo(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cr(d,m){for(var A=d.suspendedLanes,k=d.pingedLanes,j=d.expirationTimes,G=d.pendingLanes;0<G;){var ne=31-Ht(G),_e=1<<ne,Ee=j[ne];Ee===-1?((_e&A)===0||(_e&k)!==0)&&(j[ne]=Fo(_e,m)):Ee<=m&&(d.expiredLanes|=_e),G&=~_e}}function Yr(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function dn(){var d=kt;return kt<<=1,(kt&4194240)===0&&(kt=64),d}function Fr(d){for(var m=[],A=0;31>A;A++)m.push(d);return m}function Ur(d,m,A){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-Ht(m),d[m]=A}function cn(d,m){var A=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var k=d.eventTimes;for(d=d.expirationTimes;0<A;){var j=31-Ht(A),G=1<<j;m[j]=0,k[j]=-1,d[j]=-1,A&=~G}}function hr(d,m){var A=d.entangledLanes|=m;for(d=d.entanglements;A;){var k=31-Ht(A),j=1<<k;j&m|d[k]&m&&(d[k]|=m),A&=~j}}var pn=0;function Qr(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Ou,nh,pm,rh,ih,Ga=!1,pa=[],ci=null,mn=null,_o=null,ma=new Map,eo=new Map,ga=[],ny="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jr(d,m){switch(d){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":mn=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":ma.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(m.pointerId)}}function Zi(d,m,A,k,j,G){return d===null||d.nativeEvent!==G?(d={blockedOn:m,domEventName:A,eventSystemFlags:k,nativeEvent:G,targetContainers:[j]},m!==null&&(m=Za(m),m!==null&&nh(m)),d):(d.eventSystemFlags|=k,m=d.targetContainers,j!==null&&m.indexOf(j)===-1&&m.push(j),d)}function ry(d,m,A,k,j){switch(m){case"focusin":return ci=Zi(ci,d,m,A,k,j),!0;case"dragenter":return mn=Zi(mn,d,m,A,k,j),!0;case"mouseover":return _o=Zi(_o,d,m,A,k,j),!0;case"pointerover":var G=j.pointerId;return ma.set(G,Zi(ma.get(G)||null,d,m,A,k,j)),!0;case"gotpointercapture":return G=j.pointerId,eo.set(G,Zi(eo.get(G)||null,d,m,A,k,j)),!0}return!1}function sh(d){var m=Yl(d.target);if(m!==null){var A=Rs(m);if(A!==null){if(m=A.tag,m===13){if(m=Ha(A),m!==null){d.blockedOn=m,ih(d.priority,function(){pm(A)});return}}else if(m===3&&A.stateNode.current.memoizedState.isDehydrated){d.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}d.blockedOn=null}function qa(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var A=fs(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(A===null){A=d.nativeEvent;var k=new A.constructor(A.type,A);Rn=k,A.target.dispatchEvent(k),Rn=null}else return m=Za(A),m!==null&&nh(m),d.blockedOn=A,!1;m.shift()}return!0}function va(d,m,A){qa(d)&&A.delete(m)}function to(){Ga=!1,ci!==null&&qa(ci)&&(ci=null),mn!==null&&qa(mn)&&(mn=null),_o!==null&&qa(_o)&&(_o=null),ma.forEach(va),eo.forEach(va)}function Uo(d,m){d.blockedOn===m&&(d.blockedOn=null,Ga||(Ga=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,to)))}function jo(d){function m(j){return Uo(j,d)}if(0<pa.length){Uo(pa[0],d);for(var A=1;A<pa.length;A++){var k=pa[A];k.blockedOn===d&&(k.blockedOn=null)}}for(ci!==null&&Uo(ci,d),mn!==null&&Uo(mn,d),_o!==null&&Uo(_o,d),ma.forEach(m),eo.forEach(m),A=0;A<ga.length;A++)k=ga[A],k.blockedOn===d&&(k.blockedOn=null);for(;0<ga.length&&(A=ga[0],A.blockedOn===null);)sh(A),A.blockedOn===null&&ga.shift()}var wi=S.ReactCurrentBatchConfig,es=!0;function ar(d,m,A,k){var j=pn,G=wi.transition;wi.transition=null;try{pn=1,oh(d,m,A,k)}finally{pn=j,wi.transition=G}}function qf(d,m,A,k){var j=pn,G=wi.transition;wi.transition=null;try{pn=4,oh(d,m,A,k)}finally{pn=j,wi.transition=G}}function oh(d,m,A,k){if(es){var j=fs(d,m,A,k);if(j===null)Tm(d,m,k,Du,A),jr(d,k);else if(ry(j,d,m,A,k))k.stopPropagation();else if(jr(d,k),m&4&&-1<ny.indexOf(d)){for(;j!==null;){var G=Za(j);if(G!==null&&Ou(G),G=fs(d,m,A,k),G===null&&Tm(d,m,k,Du,A),G===j)break;j=G}j!==null&&k.stopPropagation()}else Tm(d,m,k,null,A)}}var Du=null;function fs(d,m,A,k){if(Du=null,d=Ae(k),d=Yl(d),d!==null)if(m=Rs(d),m===null)d=null;else if(A=m.tag,A===13){if(d=Ha(m),d!==null)return d;d=null}else if(A===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Du=d,null}function Wf(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Re()){case tt:return 1;case ft:return 4;case gt:case At:return 16;case zt:return 536870912;default:return 16}default:return 16}}var ts=null,ah=null,_r=null;function Gl(){if(_r)return _r;var d,m=ah,A=m.length,k,j="value"in ts?ts.value:ts.textContent,G=j.length;for(d=0;d<A&&m[d]===j[d];d++);var ne=A-d;for(k=1;k<=ne&&m[A-k]===j[G-k];k++);return _r=j.slice(d,1<k?1-k:void 0)}function Wa(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function ds(){return!0}function Nu(){return!1}function hi(d){function m(A,k,j,G,ne){this._reactName=A,this._targetInst=j,this.type=k,this.nativeEvent=G,this.target=ne,this.currentTarget=null;for(var _e in d)d.hasOwnProperty(_e)&&(A=d[_e],this[_e]=A?A(G):G[_e]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?ds:Nu,this.isPropagationStopped=Nu,this}return Y(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),m}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ql=hi(xo),wo=Y({},xo,{view:0,detail:0}),Wl=hi(wo),Fi,bi,ps,$a=Y({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ms,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ps&&(ps&&d.type==="mousemove"?(Fi=d.screenX-ps.screenX,bi=d.screenY-ps.screenY):bi=Fi=0,ps=d),Fi)},movementY:function(d){return"movementY"in d?d.movementY:bi}}),Lu=hi($a),no=Y({},$a,{dataTransfer:0}),Vo=hi(no),Ka=Y({},wo,{relatedTarget:0}),Bu=hi(Ka),Fu=Y({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),ya=hi(Fu),$f=Y({},xo,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),lh=hi($f),Uu=Y({},xo,{data:0}),uh=hi(Uu),ju={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ja(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=ch[d])?!!m[d]:!1}function ms(){return Ja}var T=Y({},wo,{key:function(d){if(d.key){var m=ju[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=Wa(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?ns[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ms,charCode:function(d){return d.type==="keypress"?Wa(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Wa(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),H=hi(T),K=Y({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ue=hi(K),ke=Y({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ms}),Ve=hi(ke),at=Y({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nn=hi(at),Zr=Y({},$a,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=hi(Zr),ei=[9,13,27,32],zn=a&&"CompositionEvent"in window,xr=null;a&&"documentMode"in document&&(xr=document.documentMode);var On=a&&"TextEvent"in window&&!xr,zo=a&&(!zn||xr&&8<xr&&11>=xr),rs=" ",iy=!1;function sy(d,m){switch(d){case"keyup":return ei.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var $l=!1;function Ux(d,m){switch(d){case"compositionend":return mm(m);case"keypress":return m.which!==32?null:(iy=!0,rs);case"textInput":return d=m.data,d===rs&&iy?null:d;default:return null}}function Kf(d,m){if($l)return d==="compositionend"||!zn&&sy(d,m)?(d=Gl(),_r=ah=ts=null,$l=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return zo&&m.locale!=="ko"?null:m.data;default:return null}}var hh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!hh[d.type]:m==="textarea"}function fh(d,m,A,k){dt(k),m=Cm(m,"onChange"),0<m.length&&(A=new ql("onChange","change",null,A,k),d.push({event:A,listeners:m}))}var Kl=null,dh=null;function jx(d){vh(d,0)}function Xa(d){var m=Vr(d);if(De(m))return d}function Vx(d,m){if(d==="change")return m}var ph=!1;if(a){var Is;if(a){var Vu="oninput"in document;if(!Vu){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),Vu=typeof zu.oninput=="function"}Is=Vu}else Is=!1;ph=Is&&(!document.documentMode||9<document.documentMode)}function Ho(){Kl&&(Kl.detachEvent("onpropertychange",vm),dh=Kl=null)}function vm(d){if(d.propertyName==="value"&&Xa(dh)){var m=[];fh(m,dh,d,Ae(d)),_i(jx,m)}}function mh(d,m,A){d==="focusin"?(Ho(),Kl=m,dh=A,Kl.attachEvent("onpropertychange",vm)):d==="focusout"&&Ho()}function zx(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Xa(dh)}function oy(d,m){if(d==="click")return Xa(m)}function Cr(d,m){if(d==="input"||d==="change")return Xa(m)}function ym(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var ro=typeof Object.is=="function"?Object.is:ym;function Hu(d,m){if(ro(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var A=Object.keys(d),k=Object.keys(m);if(A.length!==k.length)return!1;for(k=0;k<A.length;k++){var j=A[k];if(!l.call(m,j)||!ro(d[j],m[j]))return!1}return!0}function Jf(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function io(d,m){var A=Jf(d);d=0;for(var k;A;){if(A.nodeType===3){if(k=d+A.textContent.length,d<=m&&k>=m)return{node:A,offset:m-d};d=k}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=Jf(A)}}function Gu(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?Gu(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function Mr(){for(var d=window,m=Be();m instanceof d.HTMLIFrameElement;){try{var A=typeof m.contentWindow.location.href=="string"}catch{A=!1}if(A)d=m.contentWindow;else break;m=Be(d.document)}return m}function Ei(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function Ai(d){var m=Mr(),A=d.focusedElem,k=d.selectionRange;if(m!==A&&A&&A.ownerDocument&&Gu(A.ownerDocument.documentElement,A)){if(k!==null&&Ei(A)){if(m=k.start,d=k.end,d===void 0&&(d=m),"selectionStart"in A)A.selectionStart=m,A.selectionEnd=Math.min(d,A.value.length);else if(d=(m=A.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var j=A.textContent.length,G=Math.min(k.start,j);k=k.end===void 0?G:Math.min(k.end,j),!d.extend&&G>k&&(j=k,k=G,G=j),j=io(A,G);var ne=io(A,k);j&&ne&&(d.rangeCount!==1||d.anchorNode!==j.node||d.anchorOffset!==j.offset||d.focusNode!==ne.node||d.focusOffset!==ne.offset)&&(m=m.createRange(),m.setStart(j.node,j.offset),d.removeAllRanges(),G>k?(d.addRange(m),d.extend(ne.node,ne.offset)):(m.setEnd(ne.node,ne.offset),d.addRange(m)))}}for(m=[],d=A;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<m.length;A++)d=m[A],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var _m=a&&"documentMode"in document&&11>=document.documentMode,_a=null,qu=null,Xf=null,Si=!1;function xm(d,m,A){var k=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Si||_a==null||_a!==Be(k)||(k=_a,"selectionStart"in k&&Ei(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Xf&&Hu(Xf,k)||(Xf=k,k=Cm(qu,"onSelect"),0<k.length&&(m=new ql("onSelect","select",null,m,A),d.push({event:m,listeners:k}),m.target=_a)))}function gh(d,m){var A={};return A[d.toLowerCase()]=m.toLowerCase(),A["Webkit"+d]="webkit"+m,A["Moz"+d]="moz"+m,A}var Jl={animationend:gh("Animation","AnimationEnd"),animationiteration:gh("Animation","AnimationIteration"),animationstart:gh("Animation","AnimationStart"),transitionend:gh("Transition","TransitionEnd")},Go={},qo={};a&&(qo=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function xa(d){if(Go[d])return Go[d];if(!Jl[d])return d;var m=Jl[d],A;for(A in m)if(m.hasOwnProperty(A)&&A in qo)return Go[d]=m[A];return d}var Yf=xa("animationend"),Qf=xa("animationiteration"),ay=xa("animationstart"),ly=xa("transitionend"),uy=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(d,m){uy.set(d,m),s(m,[d])}for(var wm=0;wm<cy.length;wm++){var Zf=cy[wm],ed=Zf.toLowerCase(),Hx=Zf[0].toUpperCase()+Zf.slice(1);Ya(ed,"on"+Hx)}Ya(Yf,"onAnimationEnd"),Ya(Qf,"onAnimationIteration"),Ya(ay,"onAnimationStart"),Ya("dblclick","onDoubleClick"),Ya("focusin","onFocus"),Ya("focusout","onBlur"),Ya(ly,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function Em(d,m,A){var k=d.type||"unknown-event";d.currentTarget=A,Iu(k,m,void 0,d),d.currentTarget=null}function vh(d,m){m=(m&4)!==0;for(var A=0;A<d.length;A++){var k=d[A],j=k.event;k=k.listeners;e:{var G=void 0;if(m)for(var ne=k.length-1;0<=ne;ne--){var _e=k[ne],Ee=_e.instance,ze=_e.currentTarget;if(_e=_e.listener,Ee!==G&&j.isPropagationStopped())break e;Em(j,_e,ze),G=Ee}else for(ne=0;ne<k.length;ne++){if(_e=k[ne],Ee=_e.instance,ze=_e.currentTarget,_e=_e.listener,Ee!==G&&j.isPropagationStopped())break e;Em(j,_e,ze),G=Ee}}}if(xi)throw d=da,xi=!1,da=null,d}function fr(d,m){var A=m[Ku];A===void 0&&(A=m[Ku]=new Set);var k=d+"__bubble";A.has(k)||(Sm(m,d,2,!1),A.add(k))}function Am(d,m,A){var k=0;m&&(k|=4),Sm(A,d,k,m)}var td="_reactListening"+Math.random().toString(36).slice(2);function yh(d){if(!d[td]){d[td]=!0,r.forEach(function(A){A!=="selectionchange"&&(bm.has(A)||Am(A,!1,d),Am(A,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[td]||(m[td]=!0,Am("selectionchange",!1,m))}}function Sm(d,m,A,k){switch(Wf(m)){case 1:var j=ar;break;case 4:j=qf;break;default:j=oh}A=j.bind(null,m,A,d),j=void 0,!Va||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(j=!0),k?j!==void 0?d.addEventListener(m,A,{capture:!0,passive:j}):d.addEventListener(m,A,!0):j!==void 0?d.addEventListener(m,A,{passive:j}):d.addEventListener(m,A,!1)}function Tm(d,m,A,k,j){var G=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var ne=k.tag;if(ne===3||ne===4){var _e=k.stateNode.containerInfo;if(_e===j||_e.nodeType===8&&_e.parentNode===j)break;if(ne===4)for(ne=k.return;ne!==null;){var Ee=ne.tag;if((Ee===3||Ee===4)&&(Ee=ne.stateNode.containerInfo,Ee===j||Ee.nodeType===8&&Ee.parentNode===j))return;ne=ne.return}for(;_e!==null;){if(ne=Yl(_e),ne===null)return;if(Ee=ne.tag,Ee===5||Ee===6){k=G=ne;continue e}_e=_e.parentNode}}k=k.return}_i(function(){var ze=G,st=Ae(A),ot=[];e:{var nt=uy.get(d);if(nt!==void 0){var Tt=ql,Dt=d;switch(d){case"keypress":if(Wa(A)===0)break e;case"keydown":case"keyup":Tt=H;break;case"focusin":Dt="focus",Tt=Bu;break;case"focusout":Dt="blur",Tt=Bu;break;case"beforeblur":case"afterblur":Tt=Bu;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Vo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Ve;break;case Yf:case Qf:case ay:Tt=ya;break;case ly:Tt=Nn;break;case"scroll":Tt=Wl;break;case"wheel":Tt=kn;break;case"copy":case"cut":case"paste":Tt=lh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=ue}var Nt=(m&4)!==0,di=!Nt&&d==="scroll",Le=Nt?nt!==null?nt+"Capture":null:nt;Nt=[];for(var Se=ze,Fe;Se!==null;){Fe=Se;var ht=Fe.stateNode;if(Fe.tag===5&&ht!==null&&(Fe=ht,Le!==null&&(ht=Kn(Se,Le),ht!=null&&Nt.push(_h(Se,ht,Fe)))),di)break;Se=Se.return}0<Nt.length&&(nt=new Tt(nt,Dt,null,A,st),ot.push({event:nt,listeners:Nt}))}}if((m&7)===0){e:{if(nt=d==="mouseover"||d==="pointerover",Tt=d==="mouseout"||d==="pointerout",nt&&A!==Rn&&(Dt=A.relatedTarget||A.fromElement)&&(Yl(Dt)||Dt[so]))break e;if((Tt||nt)&&(nt=st.window===st?st:(nt=st.ownerDocument)?nt.defaultView||nt.parentWindow:window,Tt?(Dt=A.relatedTarget||A.toElement,Tt=ze,Dt=Dt?Yl(Dt):null,Dt!==null&&(di=Rs(Dt),Dt!==di||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):(Tt=null,Dt=ze),Tt!==Dt)){if(Nt=Lu,ht="onMouseLeave",Le="onMouseEnter",Se="mouse",(d==="pointerout"||d==="pointerover")&&(Nt=ue,ht="onPointerLeave",Le="onPointerEnter",Se="pointer"),di=Tt==null?nt:Vr(Tt),Fe=Dt==null?nt:Vr(Dt),nt=new Nt(ht,Se+"leave",Tt,A,st),nt.target=di,nt.relatedTarget=Fe,ht=null,Yl(st)===ze&&(Nt=new Nt(Le,Se+"enter",Dt,A,st),Nt.target=Fe,Nt.relatedTarget=di,ht=Nt),di=ht,Tt&&Dt)t:{for(Nt=Tt,Le=Dt,Se=0,Fe=Nt;Fe;Fe=Wu(Fe))Se++;for(Fe=0,ht=Le;ht;ht=Wu(ht))Fe++;for(;0<Se-Fe;)Nt=Wu(Nt),Se--;for(;0<Fe-Se;)Le=Wu(Le),Fe--;for(;Se--;){if(Nt===Le||Le!==null&&Nt===Le.alternate)break t;Nt=Wu(Nt),Le=Wu(Le)}Nt=null}else Nt=null;Tt!==null&&Gx(ot,nt,Tt,Nt,!1),Dt!==null&&di!==null&&Gx(ot,di,Dt,Nt,!0)}}e:{if(nt=ze?Vr(ze):window,Tt=nt.nodeName&&nt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&nt.type==="file")var Vt=Vx;else if(gm(nt))if(ph)Vt=Cr;else{Vt=zx;var $t=mh}else(Tt=nt.nodeName)&&Tt.toLowerCase()==="input"&&(nt.type==="checkbox"||nt.type==="radio")&&(Vt=oy);if(Vt&&(Vt=Vt(d,ze))){fh(ot,Vt,A,st);break e}$t&&$t(d,nt,ze),d==="focusout"&&($t=nt._wrapperState)&&$t.controlled&&nt.type==="number"&&Ie(nt,"number",nt.value)}switch($t=ze?Vr(ze):window,d){case"focusin":(gm($t)||$t.contentEditable==="true")&&(_a=$t,qu=ze,Xf=null);break;case"focusout":Xf=qu=_a=null;break;case"mousedown":Si=!0;break;case"contextmenu":case"mouseup":case"dragend":Si=!1,xm(ot,A,st);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":xm(ot,A,st)}var Kt;if(zn)e:{switch(d){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else $l?sy(d,A)&&(rn="onCompositionEnd"):d==="keydown"&&A.keyCode===229&&(rn="onCompositionStart");rn&&(zo&&A.locale!=="ko"&&($l||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&$l&&(Kt=Gl()):(ts=st,ah="value"in ts?ts.value:ts.textContent,$l=!0)),$t=Cm(ze,rn),0<$t.length&&(rn=new uh(rn,d,null,A,st),ot.push({event:rn,listeners:$t}),Kt?rn.data=Kt:(Kt=mm(A),Kt!==null&&(rn.data=Kt)))),(Kt=On?Ux(d,A):Kf(d,A))&&(ze=Cm(ze,"onBeforeInput"),0<ze.length&&(st=new uh("onBeforeInput","beforeinput",null,A,st),ot.push({event:st,listeners:ze}),st.data=Kt))}vh(ot,m)})}function _h(d,m,A){return{instance:d,listener:m,currentTarget:A}}function Cm(d,m){for(var A=m+"Capture",k=[];d!==null;){var j=d,G=j.stateNode;j.tag===5&&G!==null&&(j=G,G=Kn(d,A),G!=null&&k.unshift(_h(d,G,j)),G=Kn(d,m),G!=null&&k.push(_h(d,G,j))),d=d.return}return k}function Wu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Gx(d,m,A,k,j){for(var G=m._reactName,ne=[];A!==null&&A!==k;){var _e=A,Ee=_e.alternate,ze=_e.stateNode;if(Ee!==null&&Ee===k)break;_e.tag===5&&ze!==null&&(_e=ze,j?(Ee=Kn(A,G),Ee!=null&&ne.unshift(_h(A,Ee,_e))):j||(Ee=Kn(A,G),Ee!=null&&ne.push(_h(A,Ee,_e)))),A=A.return}ne.length!==0&&d.push({event:m,listeners:ne})}var rT=/\r\n?/g,qx=/\u0000|\uFFFD/g;function hy(d){return(typeof d=="string"?d:""+d).replace(rT,`
`).replace(qx,"")}function nd(d,m,A){if(m=hy(m),hy(d)!==m&&A)throw Error(t(425))}function rd(){}var xh=null,fy=null;function dy(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var py=typeof setTimeout=="function"?setTimeout:void 0,my=typeof clearTimeout=="function"?clearTimeout:void 0,Mm=typeof Promise=="function"?Promise:void 0,iT=typeof queueMicrotask=="function"?queueMicrotask:typeof Mm<"u"?function(d){return Mm.resolve(null).then(d).catch(Wx)}:py;function Wx(d){setTimeout(function(){throw d})}function Rm(d,m){var A=m,k=0;do{var j=A.nextSibling;if(d.removeChild(A),j&&j.nodeType===8)if(A=j.data,A==="/$"){if(k===0){d.removeChild(j),jo(m);return}k--}else A!=="$"&&A!=="$?"&&A!=="$!"||k++;A=j}while(A);jo(m)}function Qa(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function gy(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var A=d.data;if(A==="$"||A==="$!"||A==="$?"){if(m===0)return d;m--}else A==="/$"&&m++}d=d.previousSibling}return null}var $u=Math.random().toString(36).slice(2),fi="__reactFiber$"+$u,wh="__reactProps$"+$u,so="__reactContainer$"+$u,Ku="__reactEvents$"+$u,Im="__reactListeners$"+$u,Pm="__reactHandles$"+$u;function Yl(d){var m=d[fi];if(m)return m;for(var A=d.parentNode;A;){if(m=A[so]||A[fi]){if(A=m.alternate,m.child!==null||A!==null&&A.child!==null)for(d=gy(d);d!==null;){if(A=d[fi])return A;d=gy(d)}return m}d=A,A=d.parentNode}return null}function Za(d){return d=d[fi]||d[so],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Vr(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function km(d){return d[wh]||null}var vy=[],Ti=-1;function kr(d){return{current:d}}function dr(d){0>Ti||(d.current=vy[Ti],vy[Ti]=null,Ti--)}function lr(d,m){Ti++,vy[Ti]=d.current,d.current=m}var el={},Ui=kr(el),gs=kr(!1),tl=el;function Ju(d,m){var A=d.type.contextTypes;if(!A)return el;var k=d.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===m)return k.__reactInternalMemoizedMaskedChildContext;var j={},G;for(G in A)j[G]=m[G];return k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=j),j}function is(d){return d=d.childContextTypes,d!=null}function id(){dr(gs),dr(Ui)}function yy(d,m,A){if(Ui.current!==el)throw Error(t(168));lr(Ui,m),lr(gs,A)}function sd(d,m,A){var k=d.stateNode;if(m=m.childContextTypes,typeof k.getChildContext!="function")return A;k=k.getChildContext();for(var j in k)if(!(j in m))throw Error(t(108,ce(d)||"Unknown",j));return Y({},A,k)}function Xu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||el,tl=Ui.current,lr(Ui,d),lr(gs,gs.current),!0}function _y(d,m,A){var k=d.stateNode;if(!k)throw Error(t(169));A?(d=sd(d,m,tl),k.__reactInternalMemoizedMergedChildContext=d,dr(gs),dr(Ui),lr(Ui,d)):dr(gs),lr(gs,A)}var Wo=null,od=!1,Om=!1;function ad(d){Wo===null?Wo=[d]:Wo.push(d)}function $x(d){od=!0,ad(d)}function wa(){if(!Om&&Wo!==null){Om=!0;var d=0,m=pn;try{var A=Wo;for(pn=1;d<A.length;d++){var k=A[d];do k=k(!0);while(k!==null)}Wo=null,od=!1}catch(j){throw Wo!==null&&(Wo=Wo.slice(d+1)),Hl(tt,wa),j}finally{pn=m,Om=!1}}return null}var Yu=[],Ps=0,Dm=null,Nm=0,vs=[],Ci=0,Qu=null,pt=1,bo="";function nl(d,m){Yu[Ps++]=Nm,Yu[Ps++]=Dm,Dm=d,Nm=m}function xy(d,m,A){vs[Ci++]=pt,vs[Ci++]=bo,vs[Ci++]=Qu,Qu=d;var k=pt;d=bo;var j=32-Ht(k)-1;k&=~(1<<j),A+=1;var G=32-Ht(m)+j;if(30<G){var ne=j-j%5;G=(k&(1<<ne)-1).toString(32),k>>=ne,j-=ne,pt=1<<32-Ht(m)+j|A<<j|k,bo=G+d}else pt=1<<G|A<<j|k,bo=d}function wy(d){d.return!==null&&(nl(d,1),xy(d,1,0))}function rl(d){for(;d===Dm;)Dm=Yu[--Ps],Yu[Ps]=null,Nm=Yu[--Ps],Yu[Ps]=null;for(;d===Qu;)Qu=vs[--Ci],vs[Ci]=null,bo=vs[--Ci],vs[Ci]=null,pt=vs[--Ci],vs[Ci]=null}var ji=null,ys=null,gr=!1,Eo=null;function by(d,m){var A=Ta(5,null,null,0);A.elementType="DELETED",A.stateNode=m,A.return=d,m=d.deletions,m===null?(d.deletions=[A],d.flags|=16):m.push(A)}function Ey(d,m){switch(d.tag){case 5:var A=d.type;return m=m.nodeType!==1||A.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,ji=d,ys=Qa(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,ji=d,ys=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(A=Qu!==null?{id:pt,overflow:bo}:null,d.memoizedState={dehydrated:m,treeContext:A,retryLane:1073741824},A=Ta(18,null,null,0),A.stateNode=m,A.return=d,d.child=A,ji=d,ys=null,!0):!1;default:return!1}}function Lm(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Bm(d){if(gr){var m=ys;if(m){var A=m;if(!Ey(d,m)){if(Lm(d))throw Error(t(418));m=Qa(A.nextSibling);var k=ji;m&&Ey(d,m)?by(k,A):(d.flags=d.flags&-4097|2,gr=!1,ji=d)}}else{if(Lm(d))throw Error(t(418));d.flags=d.flags&-4097|2,gr=!1,ji=d}}}function Fm(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;ji=d}function bh(d){if(d!==ji)return!1;if(!gr)return Fm(d),gr=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!dy(d.type,d.memoizedProps)),m&&(m=ys)){if(Lm(d))throw Ay(),Error(t(418));for(;m;)by(d,m),m=Qa(m.nextSibling)}if(Fm(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var A=d.data;if(A==="/$"){if(m===0){ys=Qa(d.nextSibling);break e}m--}else A!=="$"&&A!=="$!"&&A!=="$?"||m++}d=d.nextSibling}ys=null}}else ys=ji?Qa(d.stateNode.nextSibling):null;return!0}function Ay(){for(var d=ys;d;)d=Qa(d.nextSibling)}function Ql(){ys=ji=null,gr=!1}function Eh(d){Eo===null?Eo=[d]:Eo.push(d)}var sT=S.ReactCurrentBatchConfig;function ld(d,m,A){if(d=A.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(t(309));var k=A.stateNode}if(!k)throw Error(t(147,d));var j=k,G=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===G?m.ref:(m=function(ne){var _e=j.refs;ne===null?delete _e[G]:_e[G]=ne},m._stringRef=G,m)}if(typeof d!="string")throw Error(t(284));if(!A._owner)throw Error(t(290,d))}return d}function ud(d,m){throw d=Object.prototype.toString.call(m),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function Sy(d){var m=d._init;return m(d._payload)}function Ty(d){function m(Le,Se){if(d){var Fe=Le.deletions;Fe===null?(Le.deletions=[Se],Le.flags|=16):Fe.push(Se)}}function A(Le,Se){if(!d)return null;for(;Se!==null;)m(Le,Se),Se=Se.sibling;return null}function k(Le,Se){for(Le=new Map;Se!==null;)Se.key!==null?Le.set(Se.key,Se):Le.set(Se.index,Se),Se=Se.sibling;return Le}function j(Le,Se){return Le=Dh(Le,Se),Le.index=0,Le.sibling=null,Le}function G(Le,Se,Fe){return Le.index=Fe,d?(Fe=Le.alternate,Fe!==null?(Fe=Fe.index,Fe<Se?(Le.flags|=2,Se):Fe):(Le.flags|=2,Se)):(Le.flags|=1048576,Se)}function ne(Le){return d&&Le.alternate===null&&(Le.flags|=2),Le}function _e(Le,Se,Fe,ht){return Se===null||Se.tag!==6?(Se=AT(Fe,Le.mode,ht),Se.return=Le,Se):(Se=j(Se,Fe),Se.return=Le,Se)}function Ee(Le,Se,Fe,ht){var Vt=Fe.type;return Vt===M?st(Le,Se,Fe.props.children,ht,Fe.key):Se!==null&&(Se.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===oe&&Sy(Vt)===Se.type)?(ht=j(Se,Fe.props),ht.ref=ld(Le,Se,Fe),ht.return=Le,ht):(ht=gw(Fe.type,Fe.key,Fe.props,null,Le.mode,ht),ht.ref=ld(Le,Se,Fe),ht.return=Le,ht)}function ze(Le,Se,Fe,ht){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Fe.containerInfo||Se.stateNode.implementation!==Fe.implementation?(Se=ST(Fe,Le.mode,ht),Se.return=Le,Se):(Se=j(Se,Fe.children||[]),Se.return=Le,Se)}function st(Le,Se,Fe,ht,Vt){return Se===null||Se.tag!==7?(Se=Td(Fe,Le.mode,ht,Vt),Se.return=Le,Se):(Se=j(Se,Fe),Se.return=Le,Se)}function ot(Le,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=AT(""+Se,Le.mode,Fe),Se.return=Le,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:return Fe=gw(Se.type,Se.key,Se.props,null,Le.mode,Fe),Fe.ref=ld(Le,null,Se),Fe.return=Le,Fe;case D:return Se=ST(Se,Le.mode,Fe),Se.return=Le,Se;case oe:var ht=Se._init;return ot(Le,ht(Se._payload),Fe)}if(Ne(Se)||ee(Se))return Se=Td(Se,Le.mode,Fe,null),Se.return=Le,Se;ud(Le,Se)}return null}function nt(Le,Se,Fe,ht){var Vt=Se!==null?Se.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Vt!==null?null:_e(Le,Se,""+Fe,ht);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case C:return Fe.key===Vt?Ee(Le,Se,Fe,ht):null;case D:return Fe.key===Vt?ze(Le,Se,Fe,ht):null;case oe:return Vt=Fe._init,nt(Le,Se,Vt(Fe._payload),ht)}if(Ne(Fe)||ee(Fe))return Vt!==null?null:st(Le,Se,Fe,ht,null);ud(Le,Fe)}return null}function Tt(Le,Se,Fe,ht,Vt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return Le=Le.get(Fe)||null,_e(Se,Le,""+ht,Vt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case C:return Le=Le.get(ht.key===null?Fe:ht.key)||null,Ee(Se,Le,ht,Vt);case D:return Le=Le.get(ht.key===null?Fe:ht.key)||null,ze(Se,Le,ht,Vt);case oe:var $t=ht._init;return Tt(Le,Se,Fe,$t(ht._payload),Vt)}if(Ne(ht)||ee(ht))return Le=Le.get(Fe)||null,st(Se,Le,ht,Vt,null);ud(Se,ht)}return null}function Dt(Le,Se,Fe,ht){for(var Vt=null,$t=null,Kt=Se,rn=Se=0,ls=null;Kt!==null&&rn<Fe.length;rn++){Kt.index>rn?(ls=Kt,Kt=null):ls=Kt.sibling;var Zn=nt(Le,Kt,Fe[rn],ht);if(Zn===null){Kt===null&&(Kt=ls);break}d&&Kt&&Zn.alternate===null&&m(Le,Kt),Se=G(Zn,Se,rn),$t===null?Vt=Zn:$t.sibling=Zn,$t=Zn,Kt=ls}if(rn===Fe.length)return A(Le,Kt),gr&&nl(Le,rn),Vt;if(Kt===null){for(;rn<Fe.length;rn++)Kt=ot(Le,Fe[rn],ht),Kt!==null&&(Se=G(Kt,Se,rn),$t===null?Vt=Kt:$t.sibling=Kt,$t=Kt);return gr&&nl(Le,rn),Vt}for(Kt=k(Le,Kt);rn<Fe.length;rn++)ls=Tt(Kt,Le,rn,Fe[rn],ht),ls!==null&&(d&&ls.alternate!==null&&Kt.delete(ls.key===null?rn:ls.key),Se=G(ls,Se,rn),$t===null?Vt=ls:$t.sibling=ls,$t=ls);return d&&Kt.forEach(function(Nh){return m(Le,Nh)}),gr&&nl(Le,rn),Vt}function Nt(Le,Se,Fe,ht){var Vt=ee(Fe);if(typeof Vt!="function")throw Error(t(150));if(Fe=Vt.call(Fe),Fe==null)throw Error(t(151));for(var $t=Vt=null,Kt=Se,rn=Se=0,ls=null,Zn=Fe.next();Kt!==null&&!Zn.done;rn++,Zn=Fe.next()){Kt.index>rn?(ls=Kt,Kt=null):ls=Kt.sibling;var Nh=nt(Le,Kt,Zn.value,ht);if(Nh===null){Kt===null&&(Kt=ls);break}d&&Kt&&Nh.alternate===null&&m(Le,Kt),Se=G(Nh,Se,rn),$t===null?Vt=Nh:$t.sibling=Nh,$t=Nh,Kt=ls}if(Zn.done)return A(Le,Kt),gr&&nl(Le,rn),Vt;if(Kt===null){for(;!Zn.done;rn++,Zn=Fe.next())Zn=ot(Le,Zn.value,ht),Zn!==null&&(Se=G(Zn,Se,rn),$t===null?Vt=Zn:$t.sibling=Zn,$t=Zn);return gr&&nl(Le,rn),Vt}for(Kt=k(Le,Kt);!Zn.done;rn++,Zn=Fe.next())Zn=Tt(Kt,Le,rn,Zn.value,ht),Zn!==null&&(d&&Zn.alternate!==null&&Kt.delete(Zn.key===null?rn:Zn.key),Se=G(Zn,Se,rn),$t===null?Vt=Zn:$t.sibling=Zn,$t=Zn);return d&&Kt.forEach(function(vJ){return m(Le,vJ)}),gr&&nl(Le,rn),Vt}function di(Le,Se,Fe,ht){if(typeof Fe=="object"&&Fe!==null&&Fe.type===M&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case C:e:{for(var Vt=Fe.key,$t=Se;$t!==null;){if($t.key===Vt){if(Vt=Fe.type,Vt===M){if($t.tag===7){A(Le,$t.sibling),Se=j($t,Fe.props.children),Se.return=Le,Le=Se;break e}}else if($t.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===oe&&Sy(Vt)===$t.type){A(Le,$t.sibling),Se=j($t,Fe.props),Se.ref=ld(Le,$t,Fe),Se.return=Le,Le=Se;break e}A(Le,$t);break}else m(Le,$t);$t=$t.sibling}Fe.type===M?(Se=Td(Fe.props.children,Le.mode,ht,Fe.key),Se.return=Le,Le=Se):(ht=gw(Fe.type,Fe.key,Fe.props,null,Le.mode,ht),ht.ref=ld(Le,Se,Fe),ht.return=Le,Le=ht)}return ne(Le);case D:e:{for($t=Fe.key;Se!==null;){if(Se.key===$t)if(Se.tag===4&&Se.stateNode.containerInfo===Fe.containerInfo&&Se.stateNode.implementation===Fe.implementation){A(Le,Se.sibling),Se=j(Se,Fe.children||[]),Se.return=Le,Le=Se;break e}else{A(Le,Se);break}else m(Le,Se);Se=Se.sibling}Se=ST(Fe,Le.mode,ht),Se.return=Le,Le=Se}return ne(Le);case oe:return $t=Fe._init,di(Le,Se,$t(Fe._payload),ht)}if(Ne(Fe))return Dt(Le,Se,Fe,ht);if(ee(Fe))return Nt(Le,Se,Fe,ht);ud(Le,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Se!==null&&Se.tag===6?(A(Le,Se.sibling),Se=j(Se,Fe),Se.return=Le,Le=Se):(A(Le,Se),Se=AT(Fe,Le.mode,ht),Se.return=Le,Le=Se),ne(Le)):A(Le,Se)}return di}var Zu=Ty(!0),cd=Ty(!1),ec=kr(null),tc=null,il=null,Ah=null;function nc(){Ah=il=tc=null}function hd(d){var m=ec.current;dr(ec),d._currentValue=m}function fd(d,m,A){for(;d!==null;){var k=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),d===A)break;d=d.return}}function Zl(d,m){tc=d,Ah=il=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(Tn=!0),d.firstContext=null)}function oo(d){var m=d._currentValue;if(Ah!==d)if(d={context:d,memoizedValue:m,next:null},il===null){if(tc===null)throw Error(t(308));il=d,tc.dependencies={lanes:0,firstContext:d}}else il=il.next=d;return m}var sl=null;function Cy(d){sl===null?sl=[d]:sl.push(d)}function dd(d,m,A,k){var j=m.interleaved;return j===null?(A.next=A,Cy(m)):(A.next=j.next,j.next=A),m.interleaved=A,$o(d,k)}function $o(d,m){d.lanes|=m;var A=d.alternate;for(A!==null&&(A.lanes|=m),A=d,d=d.return;d!==null;)d.childLanes|=m,A=d.alternate,A!==null&&(A.childLanes|=m),A=d,d=d.return;return A.tag===3?A.stateNode:null}var nr=!1;function wn(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zr(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function rr(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function wr(d,m,A){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(Jn&2)!==0){var j=k.pending;return j===null?m.next=m:(m.next=j.next,j.next=m),k.pending=m,$o(d,A)}return j=k.interleaved,j===null?(m.next=m,Cy(k)):(m.next=j.next,j.next=m),k.interleaved=m,$o(d,A)}function ss(d,m,A){if(m=m.updateQueue,m!==null&&(m=m.shared,(A&4194240)!==0)){var k=m.lanes;k&=d.pendingLanes,A|=k,m.lanes=A,hr(d,A)}}function rc(d,m){var A=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,A===k)){var j=null,G=null;if(A=A.firstBaseUpdate,A!==null){do{var ne={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};G===null?j=G=ne:G=G.next=ne,A=A.next}while(A!==null);G===null?j=G=m:G=G.next=m}else j=G=m;A={baseState:k.baseState,firstBaseUpdate:j,lastBaseUpdate:G,shared:k.shared,effects:k.effects},d.updateQueue=A;return}d=A.lastBaseUpdate,d===null?A.firstBaseUpdate=m:d.next=m,A.lastBaseUpdate=m}function Or(d,m,A,k){var j=d.updateQueue;nr=!1;var G=j.firstBaseUpdate,ne=j.lastBaseUpdate,_e=j.shared.pending;if(_e!==null){j.shared.pending=null;var Ee=_e,ze=Ee.next;Ee.next=null,ne===null?G=ze:ne.next=ze,ne=Ee;var st=d.alternate;st!==null&&(st=st.updateQueue,_e=st.lastBaseUpdate,_e!==ne&&(_e===null?st.firstBaseUpdate=ze:_e.next=ze,st.lastBaseUpdate=Ee))}if(G!==null){var ot=j.baseState;ne=0,st=ze=Ee=null,_e=G;do{var nt=_e.lane,Tt=_e.eventTime;if((k&nt)===nt){st!==null&&(st=st.next={eventTime:Tt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var Dt=d,Nt=_e;switch(nt=m,Tt=A,Nt.tag){case 1:if(Dt=Nt.payload,typeof Dt=="function"){ot=Dt.call(Tt,ot,nt);break e}ot=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Nt.payload,nt=typeof Dt=="function"?Dt.call(Tt,ot,nt):Dt,nt==null)break e;ot=Y({},ot,nt);break e;case 2:nr=!0}}_e.callback!==null&&_e.lane!==0&&(d.flags|=64,nt=j.effects,nt===null?j.effects=[_e]:nt.push(_e))}else Tt={eventTime:Tt,lane:nt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},st===null?(ze=st=Tt,Ee=ot):st=st.next=Tt,ne|=nt;if(_e=_e.next,_e===null){if(_e=j.shared.pending,_e===null)break;nt=_e,_e=nt.next,nt.next=null,j.lastBaseUpdate=nt,j.shared.pending=null}}while(!0);if(st===null&&(Ee=ot),j.baseState=Ee,j.firstBaseUpdate=ze,j.lastBaseUpdate=st,m=j.shared.interleaved,m!==null){j=m;do ne|=j.lane,j=j.next;while(j!==m)}else G===null&&(j.shared.lanes=0);bd|=ne,d.lanes=ne,d.memoizedState=ot}}function Sh(d,m,A){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var k=d[m],j=k.callback;if(j!==null){if(k.callback=null,k=A,typeof j!="function")throw Error(t(191,j));j.call(k)}}}var ba={},ao=kr(ba),ic=kr(ba),ol=kr(ba);function ti(d){if(d===ba)throw Error(t(174));return d}function pd(d,m){switch(lr(ol,m),lr(ic,d),lr(ao,ba),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:He(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=He(m,d)}dr(ao),lr(ao,m)}function eu(){dr(ao),dr(ic),dr(ol)}function sc(d){ti(ol.current);var m=ti(ao.current),A=He(m,d.type);m!==A&&(lr(ic,d),lr(ao,A))}function Th(d){ic.current===d&&(dr(ao),dr(ic))}var vr=kr(0);function Ko(d){for(var m=d;m!==null;){if(m.tag===13){var A=m.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Ch=[];function Ea(){for(var d=0;d<Ch.length;d++)Ch[d]._workInProgressVersionPrimary=null;Ch.length=0}var oc=S.ReactCurrentDispatcher,ac=S.ReactCurrentBatchConfig,al=0,pr=null,Dr=null,Hn=null,Jo=!1,os=!1,tu=0,ks=0;function Vi(){throw Error(t(321))}function md(d,m){if(m===null)return!1;for(var A=0;A<m.length&&A<d.length;A++)if(!ro(d[A],m[A]))return!1;return!0}function gd(d,m,A,k,j,G){if(al=G,pr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,oc.current=d===null||d.memoizedState===null?ew:tw,d=A(k,j),os){G=0;do{if(os=!1,tu=0,25<=G)throw Error(t(301));G+=1,Hn=Dr=null,m.updateQueue=null,oc.current=nw,d=A(k,j)}while(os)}if(oc.current=qm,m=Dr!==null&&Dr.next!==null,al=0,Hn=Dr=pr=null,Jo=!1,m)throw Error(t(300));return d}function My(){var d=tu!==0;return tu=0,d}function zi(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?pr.memoizedState=Hn=d:Hn=Hn.next=d,Hn}function lo(){if(Dr===null){var d=pr.alternate;d=d!==null?d.memoizedState:null}else d=Dr.next;var m=Hn===null?pr.memoizedState:Hn.next;if(m!==null)Hn=m,Dr=d;else{if(d===null)throw Error(t(310));Dr=d,d={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Hn===null?pr.memoizedState=Hn=d:Hn=Hn.next=d}return Hn}function Mh(d,m){return typeof m=="function"?m(d):m}function vd(d){var m=lo(),A=m.queue;if(A===null)throw Error(t(311));A.lastRenderedReducer=d;var k=Dr,j=k.baseQueue,G=A.pending;if(G!==null){if(j!==null){var ne=j.next;j.next=G.next,G.next=ne}k.baseQueue=j=G,A.pending=null}if(j!==null){G=j.next,k=k.baseState;var _e=ne=null,Ee=null,ze=G;do{var st=ze.lane;if((al&st)===st)Ee!==null&&(Ee=Ee.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),k=ze.hasEagerState?ze.eagerState:d(k,ze.action);else{var ot={lane:st,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};Ee===null?(_e=Ee=ot,ne=k):Ee=Ee.next=ot,pr.lanes|=st,bd|=st}ze=ze.next}while(ze!==null&&ze!==G);Ee===null?ne=k:Ee.next=_e,ro(k,m.memoizedState)||(Tn=!0),m.memoizedState=k,m.baseState=ne,m.baseQueue=Ee,A.lastRenderedState=k}if(d=A.interleaved,d!==null){j=d;do G=j.lane,pr.lanes|=G,bd|=G,j=j.next;while(j!==d)}else j===null&&(A.lanes=0);return[m.memoizedState,A.dispatch]}function ll(d){var m=lo(),A=m.queue;if(A===null)throw Error(t(311));A.lastRenderedReducer=d;var k=A.dispatch,j=A.pending,G=m.memoizedState;if(j!==null){A.pending=null;var ne=j=j.next;do G=d(G,ne.action),ne=ne.next;while(ne!==j);ro(G,m.memoizedState)||(Tn=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),A.lastRenderedState=G}return[G,k]}function Ry(){}function Iy(d,m){var A=pr,k=lo(),j=m(),G=!ro(k.memoizedState,j);if(G&&(k.memoizedState=j,Tn=!0),k=k.queue,Oy(Kx.bind(null,A,k,d),[d]),k.getSnapshot!==m||G||Hn!==null&&Hn.memoizedState.tag&1){if(A.flags|=2048,Xo(9,yd.bind(null,A,k,j,m),void 0,null),as===null)throw Error(t(349));(al&30)!==0||Um(A,m,j)}return j}function Um(d,m,A){d.flags|=16384,d={getSnapshot:m,value:A},m=pr.updateQueue,m===null?(m={lastEffect:null,stores:null},pr.updateQueue=m,m.stores=[d]):(A=m.stores,A===null?m.stores=[d]:A.push(d))}function yd(d,m,A,k){m.value=A,m.getSnapshot=k,Jx(m)&&Py(d)}function Kx(d,m,A){return A(function(){Jx(m)&&Py(d)})}function Jx(d){var m=d.getSnapshot;d=d.value;try{var A=m();return!ro(d,A)}catch{return!0}}function Py(d){var m=$o(d,1);m!==null&&dl(m,d,1,-1)}function ky(d){var m=zi();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mh,lastRenderedState:d},m.queue=d,d=d.dispatch=lc.bind(null,pr,d),[m.memoizedState,d]}function Xo(d,m,A,k){return d={tag:d,create:m,destroy:A,deps:k,next:null},m=pr.updateQueue,m===null?(m={lastEffect:null,stores:null},pr.updateQueue=m,m.lastEffect=d.next=d):(A=m.lastEffect,A===null?m.lastEffect=d.next=d:(k=A.next,A.next=d,d.next=k,m.lastEffect=d)),d}function Xx(){return lo().memoizedState}function Aa(d,m,A,k){var j=zi();pr.flags|=d,j.memoizedState=Xo(1|m,A,void 0,k===void 0?null:k)}function _d(d,m,A,k){var j=lo();k=k===void 0?null:k;var G=void 0;if(Dr!==null){var ne=Dr.memoizedState;if(G=ne.destroy,k!==null&&md(k,ne.deps)){j.memoizedState=Xo(m,A,G,k);return}}pr.flags|=d,j.memoizedState=Xo(1|m,A,G,k)}function _s(d,m){return Aa(8390656,8,d,m)}function Oy(d,m){return _d(2048,8,d,m)}function Dy(d,m){return _d(4,2,d,m)}function Yx(d,m){return _d(4,4,d,m)}function Qx(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function Ny(d,m,A){return A=A!=null?A.concat([d]):null,_d(4,4,Qx.bind(null,m,d),A)}function jm(){}function Zx(d,m){var A=lo();m=m===void 0?null:m;var k=A.memoizedState;return k!==null&&m!==null&&md(m,k[1])?k[0]:(A.memoizedState=[d,m],d)}function uo(d,m){var A=lo();m=m===void 0?null:m;var k=A.memoizedState;return k!==null&&m!==null&&md(m,k[1])?k[0]:(d=d(),A.memoizedState=[d,m],d)}function Vm(d,m,A){return(al&21)===0?(d.baseState&&(d.baseState=!1,Tn=!0),d.memoizedState=A):(ro(A,m)||(A=dn(),pr.lanes|=A,bd|=A,d.baseState=!0),m)}function oT(d,m){var A=pn;pn=A!==0&&4>A?A:4,d(!0);var k=ac.transition;ac.transition={};try{d(!1),m()}finally{pn=A,ac.transition=k}}function ul(){return lo().memoizedState}function zm(d,m,A){var k=kh(d);if(A={lane:k,action:A,hasEagerState:!1,eagerState:null,next:null},xd(d))Hm(m,A);else if(A=dd(d,m,A,k),A!==null){var j=ho();dl(A,d,k,j),Gm(A,m,k)}}function lc(d,m,A){var k=kh(d),j={lane:k,action:A,hasEagerState:!1,eagerState:null,next:null};if(xd(d))Hm(m,j);else{var G=d.alternate;if(d.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var ne=m.lastRenderedState,_e=G(ne,A);if(j.hasEagerState=!0,j.eagerState=_e,ro(_e,ne)){var Ee=m.interleaved;Ee===null?(j.next=j,Cy(m)):(j.next=Ee.next,Ee.next=j),m.interleaved=j;return}}catch{}finally{}A=dd(d,m,j,k),A!==null&&(j=ho(),dl(A,d,k,j),Gm(A,m,k))}}function xd(d){var m=d.alternate;return d===pr||m!==null&&m===pr}function Hm(d,m){os=Jo=!0;var A=d.pending;A===null?m.next=m:(m.next=A.next,A.next=m),d.pending=m}function Gm(d,m,A){if((A&4194240)!==0){var k=m.lanes;k&=d.pendingLanes,A|=k,m.lanes=A,hr(d,A)}}var qm={readContext:oo,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},ew={readContext:oo,useCallback:function(d,m){return zi().memoizedState=[d,m===void 0?null:m],d},useContext:oo,useEffect:_s,useImperativeHandle:function(d,m,A){return A=A!=null?A.concat([d]):null,Aa(4194308,4,Qx.bind(null,m,d),A)},useLayoutEffect:function(d,m){return Aa(4194308,4,d,m)},useInsertionEffect:function(d,m){return Aa(4,2,d,m)},useMemo:function(d,m){var A=zi();return m=m===void 0?null:m,d=d(),A.memoizedState=[d,m],d},useReducer:function(d,m,A){var k=zi();return m=A!==void 0?A(m):m,k.memoizedState=k.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},k.queue=d,d=d.dispatch=zm.bind(null,pr,d),[k.memoizedState,d]},useRef:function(d){var m=zi();return d={current:d},m.memoizedState=d},useState:ky,useDebugValue:jm,useDeferredValue:function(d){return zi().memoizedState=d},useTransition:function(){var d=ky(!1),m=d[0];return d=oT.bind(null,d[1]),zi().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,A){var k=pr,j=zi();if(gr){if(A===void 0)throw Error(t(407));A=A()}else{if(A=m(),as===null)throw Error(t(349));(al&30)!==0||Um(k,m,A)}j.memoizedState=A;var G={value:A,getSnapshot:m};return j.queue=G,_s(Kx.bind(null,k,G,d),[d]),k.flags|=2048,Xo(9,yd.bind(null,k,G,A,m),void 0,null),A},useId:function(){var d=zi(),m=as.identifierPrefix;if(gr){var A=bo,k=pt;A=(k&~(1<<32-Ht(k)-1)).toString(32)+A,m=":"+m+"R"+A,A=tu++,0<A&&(m+="H"+A.toString(32)),m+=":"}else A=ks++,m=":"+m+"r"+A.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},tw={readContext:oo,useCallback:Zx,useContext:oo,useEffect:Oy,useImperativeHandle:Ny,useInsertionEffect:Dy,useLayoutEffect:Yx,useMemo:uo,useReducer:vd,useRef:Xx,useState:function(){return vd(Mh)},useDebugValue:jm,useDeferredValue:function(d){var m=lo();return Vm(m,Dr.memoizedState,d)},useTransition:function(){var d=vd(Mh)[0],m=lo().memoizedState;return[d,m]},useMutableSource:Ry,useSyncExternalStore:Iy,useId:ul,unstable_isNewReconciler:!1},nw={readContext:oo,useCallback:Zx,useContext:oo,useEffect:Oy,useImperativeHandle:Ny,useInsertionEffect:Dy,useLayoutEffect:Yx,useMemo:uo,useReducer:ll,useRef:Xx,useState:function(){return ll(Mh)},useDebugValue:jm,useDeferredValue:function(d){var m=lo();return Dr===null?m.memoizedState=d:Vm(m,Dr.memoizedState,d)},useTransition:function(){var d=ll(Mh)[0],m=lo().memoizedState;return[d,m]},useMutableSource:Ry,useSyncExternalStore:Iy,useId:ul,unstable_isNewReconciler:!1};function Ao(d,m){if(d&&d.defaultProps){m=Y({},m),d=d.defaultProps;for(var A in d)m[A]===void 0&&(m[A]=d[A]);return m}return m}function wd(d,m,A,k){m=d.memoizedState,A=A(k,m),A=A==null?m:Y({},m,A),d.memoizedState=A,d.lanes===0&&(d.updateQueue.baseState=A)}var Wm={isMounted:function(d){return(d=d._reactInternals)?Rs(d)===d:!1},enqueueSetState:function(d,m,A){d=d._reactInternals;var k=ho(),j=kh(d),G=rr(k,j);G.payload=m,A!=null&&(G.callback=A),m=wr(d,G,j),m!==null&&(dl(m,d,j,k),ss(m,d,j))},enqueueReplaceState:function(d,m,A){d=d._reactInternals;var k=ho(),j=kh(d),G=rr(k,j);G.tag=1,G.payload=m,A!=null&&(G.callback=A),m=wr(d,G,j),m!==null&&(dl(m,d,j,k),ss(m,d,j))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var A=ho(),k=kh(d),j=rr(A,k);j.tag=2,m!=null&&(j.callback=m),m=wr(d,j,k),m!==null&&(dl(m,d,k,A),ss(m,d,k))}};function rw(d,m,A,k,j,G,ne){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,G,ne):m.prototype&&m.prototype.isPureReactComponent?!Hu(A,k)||!Hu(j,G):!0}function y(d,m,A){var k=!1,j=el,G=m.contextType;return typeof G=="object"&&G!==null?G=oo(G):(j=is(m)?tl:Ui.current,k=m.contextTypes,G=(k=k!=null)?Ju(d,j):el),m=new m(A,G),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wm,d.stateNode=m,m._reactInternals=d,k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=j,d.__reactInternalMemoizedMaskedChildContext=G),m}function w(d,m,A,k){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(A,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(A,k),m.state!==d&&Wm.enqueueReplaceState(m,m.state,null)}function I(d,m,A,k){var j=d.stateNode;j.props=A,j.state=d.memoizedState,j.refs={},wn(d);var G=m.contextType;typeof G=="object"&&G!==null?j.context=oo(G):(G=is(m)?tl:Ui.current,j.context=Ju(d,G)),j.state=d.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(wd(d,m,G,A),j.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(m=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),m!==j.state&&Wm.enqueueReplaceState(j,j.state,null),Or(d,A,j,k),j.state=d.memoizedState),typeof j.componentDidMount=="function"&&(d.flags|=4194308)}function B(d,m){try{var A="",k=m;do A+=he(k),k=k.return;while(k);var j=A}catch(G){j=`
Error generating stack: `+G.message+`
`+G.stack}return{value:d,source:m,stack:j,digest:null}}function z(d,m,A){return{value:d,source:null,stack:A??null,digest:m??null}}function $(d,m){try{console.error(m.value)}catch(A){setTimeout(function(){throw A})}}var ge=typeof WeakMap=="function"?WeakMap:Map;function Ce(d,m,A){A=rr(-1,A),A.tag=3,A.payload={element:null};var k=m.value;return A.callback=function(){cw||(cw=!0,gT=k),$(d,m)},A}function Ke(d,m,A){A=rr(-1,A),A.tag=3;var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var j=m.value;A.payload=function(){return k(j)},A.callback=function(){$(d,m)}}var G=d.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(A.callback=function(){$(d,m),typeof k!="function"&&(Ih===null?Ih=new Set([this]):Ih.add(this));var ne=m.stack;this.componentDidCatch(m.value,{componentStack:ne!==null?ne:""})}),A}function ct(d,m,A){var k=d.pingCache;if(k===null){k=d.pingCache=new ge;var j=new Set;k.set(m,j)}else j=k.get(m),j===void 0&&(j=new Set,k.set(m,j));j.has(A)||(j.add(A),d=oJ.bind(null,d,m,A),m.then(d,d))}function Mt(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function an(d,m,A,k,j){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(m=rr(-1,1),m.tag=2,wr(A,m,1))),A.lanes|=1),d):(d.flags|=65536,d.lanes=j,d)}var Gt=S.ReactCurrentOwner,Tn=!1;function St(d,m,A,k){m.child=d===null?cd(m,null,A,k):Zu(m,d.child,A,k)}function Hi(d,m,A,k,j){A=A.render;var G=m.ref;return Zl(m,j),k=gd(d,m,A,k,G,j),A=My(),d!==null&&!Tn?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,uc(d,m,j)):(gr&&A&&wy(m),m.flags|=1,St(d,m,k,j),m.child)}function co(d,m,A,k,j){if(d===null){var G=A.type;return typeof G=="function"&&!ET(G)&&G.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(m.tag=15,m.type=G,Ue(d,m,G,k,j)):(d=gw(A.type,null,k,m,m.mode,j),d.ref=m.ref,d.return=m,m.child=d)}if(G=d.child,(d.lanes&j)===0){var ne=G.memoizedProps;if(A=A.compare,A=A!==null?A:Hu,A(ne,k)&&d.ref===m.ref)return uc(d,m,j)}return m.flags|=1,d=Dh(G,k),d.ref=m.ref,d.return=m,m.child=d}function Ue(d,m,A,k,j){if(d!==null){var G=d.memoizedProps;if(Hu(G,k)&&d.ref===m.ref)if(Tn=!1,m.pendingProps=k=G,(d.lanes&j)!==0)(d.flags&131072)!==0&&(Tn=!0);else return m.lanes=d.lanes,uc(d,m,j)}return xt(d,m,A,k,j)}function Pe(d,m,A){var k=m.pendingProps,j=k.children,G=d!==null?d.memoizedState:null;if(k.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(Km,Yo),Yo|=A;else{if((A&1073741824)===0)return d=G!==null?G.baseLanes|A:A,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,lr(Km,Yo),Yo|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=G!==null?G.baseLanes:A,lr(Km,Yo),Yo|=k}else G!==null?(k=G.baseLanes|A,m.memoizedState=null):k=A,lr(Km,Yo),Yo|=k;return St(d,m,j,A),m.child}function We(d,m){var A=m.ref;(d===null&&A!==null||d!==null&&d.ref!==A)&&(m.flags|=512,m.flags|=2097152)}function xt(d,m,A,k,j){var G=is(A)?tl:Ui.current;return G=Ju(m,G),Zl(m,j),A=gd(d,m,A,k,G,j),k=My(),d!==null&&!Tn?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,uc(d,m,j)):(gr&&k&&wy(m),m.flags|=1,St(d,m,A,j),m.child)}function Ft(d,m,A,k,j){if(is(A)){var G=!0;Xu(m)}else G=!1;if(Zl(m,j),m.stateNode===null)sw(d,m),y(m,A,k),I(m,A,k,j),k=!0;else if(d===null){var ne=m.stateNode,_e=m.memoizedProps;ne.props=_e;var Ee=ne.context,ze=A.contextType;typeof ze=="object"&&ze!==null?ze=oo(ze):(ze=is(A)?tl:Ui.current,ze=Ju(m,ze));var st=A.getDerivedStateFromProps,ot=typeof st=="function"||typeof ne.getSnapshotBeforeUpdate=="function";ot||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(_e!==k||Ee!==ze)&&w(m,ne,k,ze),nr=!1;var nt=m.memoizedState;ne.state=nt,Or(m,k,ne,j),Ee=m.memoizedState,_e!==k||nt!==Ee||gs.current||nr?(typeof st=="function"&&(wd(m,A,st,k),Ee=m.memoizedState),(_e=nr||rw(m,A,_e,k,nt,Ee,ze))?(ot||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=Ee),ne.props=k,ne.state=Ee,ne.context=ze,k=_e):(typeof ne.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{ne=m.stateNode,zr(d,m),_e=m.memoizedProps,ze=m.type===m.elementType?_e:Ao(m.type,_e),ne.props=ze,ot=m.pendingProps,nt=ne.context,Ee=A.contextType,typeof Ee=="object"&&Ee!==null?Ee=oo(Ee):(Ee=is(A)?tl:Ui.current,Ee=Ju(m,Ee));var Tt=A.getDerivedStateFromProps;(st=typeof Tt=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(_e!==ot||nt!==Ee)&&w(m,ne,k,Ee),nr=!1,nt=m.memoizedState,ne.state=nt,Or(m,k,ne,j);var Dt=m.memoizedState;_e!==ot||nt!==Dt||gs.current||nr?(typeof Tt=="function"&&(wd(m,A,Tt,k),Dt=m.memoizedState),(ze=nr||rw(m,A,ze,k,nt,Dt,Ee)||!1)?(st||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(k,Dt,Ee),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(k,Dt,Ee)),typeof ne.componentDidUpdate=="function"&&(m.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ne.componentDidUpdate!="function"||_e===d.memoizedProps&&nt===d.memoizedState||(m.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||_e===d.memoizedProps&&nt===d.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=Dt),ne.props=k,ne.state=Dt,ne.context=Ee,k=ze):(typeof ne.componentDidUpdate!="function"||_e===d.memoizedProps&&nt===d.memoizedState||(m.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||_e===d.memoizedProps&&nt===d.memoizedState||(m.flags|=1024),k=!1)}return gn(d,m,A,k,G,j)}function gn(d,m,A,k,j,G){We(d,m);var ne=(m.flags&128)!==0;if(!k&&!ne)return j&&_y(m,A,!1),uc(d,m,G);k=m.stateNode,Gt.current=m;var _e=ne&&typeof A.getDerivedStateFromError!="function"?null:k.render();return m.flags|=1,d!==null&&ne?(m.child=Zu(m,d.child,null,G),m.child=Zu(m,null,_e,G)):St(d,m,_e,G),m.memoizedState=k.state,j&&_y(m,A,!0),m.child}function ln(d){var m=d.stateNode;m.pendingContext?yy(d,m.pendingContext,m.pendingContext!==m.context):m.context&&yy(d,m.context,!1),pd(d,m.containerInfo)}function Vn(d,m,A,k,j){return Ql(),Eh(j),m.flags|=256,St(d,m,A,k),m.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function Fn(d){return{baseLanes:d,cachePool:null,transitions:null}}function cl(d,m,A){var k=m.pendingProps,j=vr.current,G=!1,ne=(m.flags&128)!==0,_e;if((_e=ne)||(_e=d!==null&&d.memoizedState===null?!1:(j&2)!==0),_e?(G=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(j|=1),lr(vr,j&1),d===null)return Bm(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(ne=k.children,d=k.fallback,G?(k=m.mode,G=m.child,ne={mode:"hidden",children:ne},(k&1)===0&&G!==null?(G.childLanes=0,G.pendingProps=ne):G=vw(ne,k,0,null),d=Td(d,k,A,null),G.return=m,d.return=m,G.sibling=d,m.child=G,m.child.memoizedState=Fn(A),m.memoizedState=ni,d):Ly(m,ne));if(j=d.memoizedState,j!==null&&(_e=j.dehydrated,_e!==null))return KK(d,m,ne,k,_e,j,A);if(G){G=k.fallback,ne=m.mode,j=d.child,_e=j.sibling;var Ee={mode:"hidden",children:k.children};return(ne&1)===0&&m.child!==j?(k=m.child,k.childLanes=0,k.pendingProps=Ee,m.deletions=null):(k=Dh(j,Ee),k.subtreeFlags=j.subtreeFlags&14680064),_e!==null?G=Dh(_e,G):(G=Td(G,ne,A,null),G.flags|=2),G.return=m,k.return=m,k.sibling=G,m.child=k,k=G,G=m.child,ne=d.child.memoizedState,ne=ne===null?Fn(A):{baseLanes:ne.baseLanes|A,cachePool:null,transitions:ne.transitions},G.memoizedState=ne,G.childLanes=d.childLanes&~A,m.memoizedState=ni,k}return G=d.child,d=G.sibling,k=Dh(G,{mode:"visible",children:k.children}),(m.mode&1)===0&&(k.lanes=A),k.return=m,k.sibling=null,d!==null&&(A=m.deletions,A===null?(m.deletions=[d],m.flags|=16):A.push(d)),m.child=k,m.memoizedState=null,k}function Ly(d,m){return m=vw({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function iw(d,m,A,k){return k!==null&&Eh(k),Zu(m,d.child,null,A),d=Ly(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function KK(d,m,A,k,j,G,ne){if(A)return m.flags&256?(m.flags&=-257,k=z(Error(t(422))),iw(d,m,ne,k)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(G=k.fallback,j=m.mode,k=vw({mode:"visible",children:k.children},j,0,null),G=Td(G,j,ne,null),G.flags|=2,k.return=m,G.return=m,k.sibling=G,m.child=k,(m.mode&1)!==0&&Zu(m,d.child,null,ne),m.child.memoizedState=Fn(ne),m.memoizedState=ni,G);if((m.mode&1)===0)return iw(d,m,ne,null);if(j.data==="$!"){if(k=j.nextSibling&&j.nextSibling.dataset,k)var _e=k.dgst;return k=_e,G=Error(t(419)),k=z(G,k,void 0),iw(d,m,ne,k)}if(_e=(ne&d.childLanes)!==0,Tn||_e){if(k=as,k!==null){switch(ne&-ne){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(k.suspendedLanes|ne))!==0?0:j,j!==0&&j!==G.retryLane&&(G.retryLane=j,$o(d,j),dl(k,d,j,-1))}return bT(),k=z(Error(t(421))),iw(d,m,ne,k)}return j.data==="$?"?(m.flags|=128,m.child=d.child,m=aJ.bind(null,d),j._reactRetry=m,null):(d=G.treeContext,ys=Qa(j.nextSibling),ji=m,gr=!0,Eo=null,d!==null&&(vs[Ci++]=pt,vs[Ci++]=bo,vs[Ci++]=Qu,pt=d.id,bo=d.overflow,Qu=m),m=Ly(m,k.children),m.flags|=4096,m)}function hD(d,m,A){d.lanes|=m;var k=d.alternate;k!==null&&(k.lanes|=m),fd(d.return,m,A)}function aT(d,m,A,k,j){var G=d.memoizedState;G===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:A,tailMode:j}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=k,G.tail=A,G.tailMode=j)}function fD(d,m,A){var k=m.pendingProps,j=k.revealOrder,G=k.tail;if(St(d,m,k.children,A),k=vr.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&hD(d,A,m);else if(d.tag===19)hD(d,A,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}if(lr(vr,k),(m.mode&1)===0)m.memoizedState=null;else switch(j){case"forwards":for(A=m.child,j=null;A!==null;)d=A.alternate,d!==null&&Ko(d)===null&&(j=A),A=A.sibling;A=j,A===null?(j=m.child,m.child=null):(j=A.sibling,A.sibling=null),aT(m,!1,j,A,G);break;case"backwards":for(A=null,j=m.child,m.child=null;j!==null;){if(d=j.alternate,d!==null&&Ko(d)===null){m.child=j;break}d=j.sibling,j.sibling=A,A=j,j=d}aT(m,!0,A,null,G);break;case"together":aT(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function sw(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function uc(d,m,A){if(d!==null&&(m.dependencies=d.dependencies),bd|=m.lanes,(A&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(t(153));if(m.child!==null){for(d=m.child,A=Dh(d,d.pendingProps),m.child=A,A.return=m;d.sibling!==null;)d=d.sibling,A=A.sibling=Dh(d,d.pendingProps),A.return=m;A.sibling=null}return m.child}function JK(d,m,A){switch(m.tag){case 3:ln(m),Ql();break;case 5:sc(m);break;case 1:is(m.type)&&Xu(m);break;case 4:pd(m,m.stateNode.containerInfo);break;case 10:var k=m.type._context,j=m.memoizedProps.value;lr(ec,k._currentValue),k._currentValue=j;break;case 13:if(k=m.memoizedState,k!==null)return k.dehydrated!==null?(lr(vr,vr.current&1),m.flags|=128,null):(A&m.child.childLanes)!==0?cl(d,m,A):(lr(vr,vr.current&1),d=uc(d,m,A),d!==null?d.sibling:null);lr(vr,vr.current&1);break;case 19:if(k=(A&m.childLanes)!==0,(d.flags&128)!==0){if(k)return fD(d,m,A);m.flags|=128}if(j=m.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),lr(vr,vr.current),k)break;return null;case 22:case 23:return m.lanes=0,Pe(d,m,A)}return uc(d,m,A)}var dD,lT,pD,mD;dD=function(d,m){for(var A=m.child;A!==null;){if(A.tag===5||A.tag===6)d.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break;for(;A.sibling===null;){if(A.return===null||A.return===m)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},lT=function(){},pD=function(d,m,A,k){var j=d.memoizedProps;if(j!==k){d=m.stateNode,ti(ao.current);var G=null;switch(A){case"input":j=fe(d,j),k=fe(d,k),G=[];break;case"select":j=Y({},j,{value:void 0}),k=Y({},k,{value:void 0}),G=[];break;case"textarea":j=q(d,j),k=q(d,k),G=[];break;default:typeof j.onClick!="function"&&typeof k.onClick=="function"&&(d.onclick=rd)}on(A,k);var ne;A=null;for(ze in j)if(!k.hasOwnProperty(ze)&&j.hasOwnProperty(ze)&&j[ze]!=null)if(ze==="style"){var _e=j[ze];for(ne in _e)_e.hasOwnProperty(ne)&&(A||(A={}),A[ne]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(i.hasOwnProperty(ze)?G||(G=[]):(G=G||[]).push(ze,null));for(ze in k){var Ee=k[ze];if(_e=j!=null?j[ze]:void 0,k.hasOwnProperty(ze)&&Ee!==_e&&(Ee!=null||_e!=null))if(ze==="style")if(_e){for(ne in _e)!_e.hasOwnProperty(ne)||Ee&&Ee.hasOwnProperty(ne)||(A||(A={}),A[ne]="");for(ne in Ee)Ee.hasOwnProperty(ne)&&_e[ne]!==Ee[ne]&&(A||(A={}),A[ne]=Ee[ne])}else A||(G||(G=[]),G.push(ze,A)),A=Ee;else ze==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,_e=_e?_e.__html:void 0,Ee!=null&&_e!==Ee&&(G=G||[]).push(ze,Ee)):ze==="children"?typeof Ee!="string"&&typeof Ee!="number"||(G=G||[]).push(ze,""+Ee):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(i.hasOwnProperty(ze)?(Ee!=null&&ze==="onScroll"&&fr("scroll",d),G||_e===Ee||(G=[])):(G=G||[]).push(ze,Ee))}A&&(G=G||[]).push("style",A);var ze=G;(m.updateQueue=ze)&&(m.flags|=4)}},mD=function(d,m,A,k){A!==k&&(m.flags|=4)};function By(d,m){if(!gr)switch(d.tailMode){case"hidden":m=d.tail;for(var A=null;m!==null;)m.alternate!==null&&(A=m),m=m.sibling;A===null?d.tail=null:A.sibling=null;break;case"collapsed":A=d.tail;for(var k=null;A!==null;)A.alternate!==null&&(k=A),A=A.sibling;k===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Os(d){var m=d.alternate!==null&&d.alternate.child===d.child,A=0,k=0;if(m)for(var j=d.child;j!==null;)A|=j.lanes|j.childLanes,k|=j.subtreeFlags&14680064,k|=j.flags&14680064,j.return=d,j=j.sibling;else for(j=d.child;j!==null;)A|=j.lanes|j.childLanes,k|=j.subtreeFlags,k|=j.flags,j.return=d,j=j.sibling;return d.subtreeFlags|=k,d.childLanes=A,m}function XK(d,m,A){var k=m.pendingProps;switch(rl(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Os(m),null;case 1:return is(m.type)&&id(),Os(m),null;case 3:return k=m.stateNode,eu(),dr(gs),dr(Ui),Ea(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(d===null||d.child===null)&&(bh(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Eo!==null&&(_T(Eo),Eo=null))),lT(d,m),Os(m),null;case 5:Th(m);var j=ti(ol.current);if(A=m.type,d!==null&&m.stateNode!=null)pD(d,m,A,k,j),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!k){if(m.stateNode===null)throw Error(t(166));return Os(m),null}if(d=ti(ao.current),bh(m)){k=m.stateNode,A=m.type;var G=m.memoizedProps;switch(k[fi]=m,k[wh]=G,d=(m.mode&1)!==0,A){case"dialog":fr("cancel",k),fr("close",k);break;case"iframe":case"object":case"embed":fr("load",k);break;case"video":case"audio":for(j=0;j<Xl.length;j++)fr(Xl[j],k);break;case"source":fr("error",k);break;case"img":case"image":case"link":fr("error",k),fr("load",k);break;case"details":fr("toggle",k);break;case"input":it(k,G),fr("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!G.multiple},fr("invalid",k);break;case"textarea":me(k,G),fr("invalid",k)}on(A,G),j=null;for(var ne in G)if(G.hasOwnProperty(ne)){var _e=G[ne];ne==="children"?typeof _e=="string"?k.textContent!==_e&&(G.suppressHydrationWarning!==!0&&nd(k.textContent,_e,d),j=["children",_e]):typeof _e=="number"&&k.textContent!==""+_e&&(G.suppressHydrationWarning!==!0&&nd(k.textContent,_e,d),j=["children",""+_e]):i.hasOwnProperty(ne)&&_e!=null&&ne==="onScroll"&&fr("scroll",k)}switch(A){case"input":$e(k),we(k,G,!0);break;case"textarea":$e(k),ye(k);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(k.onclick=rd)}k=j,m.updateQueue=k,k!==null&&(m.flags|=4)}else{ne=j.nodeType===9?j:j.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=be(A)),d==="http://www.w3.org/1999/xhtml"?A==="script"?(d=ne.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof k.is=="string"?d=ne.createElement(A,{is:k.is}):(d=ne.createElement(A),A==="select"&&(ne=d,k.multiple?ne.multiple=!0:k.size&&(ne.size=k.size))):d=ne.createElementNS(d,A),d[fi]=m,d[wh]=k,dD(d,m,!1,!1),m.stateNode=d;e:{switch(ne=qt(A,k),A){case"dialog":fr("cancel",d),fr("close",d),j=k;break;case"iframe":case"object":case"embed":fr("load",d),j=k;break;case"video":case"audio":for(j=0;j<Xl.length;j++)fr(Xl[j],d);j=k;break;case"source":fr("error",d),j=k;break;case"img":case"image":case"link":fr("error",d),fr("load",d),j=k;break;case"details":fr("toggle",d),j=k;break;case"input":it(d,k),j=fe(d,k),fr("invalid",d);break;case"option":j=k;break;case"select":d._wrapperState={wasMultiple:!!k.multiple},j=Y({},k,{value:void 0}),fr("invalid",d);break;case"textarea":me(d,k),j=q(d,k),fr("invalid",d);break;default:j=k}on(A,j),_e=j;for(G in _e)if(_e.hasOwnProperty(G)){var Ee=_e[G];G==="style"?jt(d,Ee):G==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,Ee!=null&&lt(d,Ee)):G==="children"?typeof Ee=="string"?(A!=="textarea"||Ee!=="")&&vt(d,Ee):typeof Ee=="number"&&vt(d,""+Ee):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?Ee!=null&&G==="onScroll"&&fr("scroll",d):Ee!=null&&E(d,G,Ee,ne))}switch(A){case"input":$e(d),we(d,k,!1);break;case"textarea":$e(d),ye(d);break;case"option":k.value!=null&&d.setAttribute("value",""+ve(k.value));break;case"select":d.multiple=!!k.multiple,G=k.value,G!=null?ie(d,!!k.multiple,G,!1):k.defaultValue!=null&&ie(d,!!k.multiple,k.defaultValue,!0);break;default:typeof j.onClick=="function"&&(d.onclick=rd)}switch(A){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Os(m),null;case 6:if(d&&m.stateNode!=null)mD(d,m,d.memoizedProps,k);else{if(typeof k!="string"&&m.stateNode===null)throw Error(t(166));if(A=ti(ol.current),ti(ao.current),bh(m)){if(k=m.stateNode,A=m.memoizedProps,k[fi]=m,(G=k.nodeValue!==A)&&(d=ji,d!==null))switch(d.tag){case 3:nd(k.nodeValue,A,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&nd(k.nodeValue,A,(d.mode&1)!==0)}G&&(m.flags|=4)}else k=(A.nodeType===9?A:A.ownerDocument).createTextNode(k),k[fi]=m,m.stateNode=k}return Os(m),null;case 13:if(dr(vr),k=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(gr&&ys!==null&&(m.mode&1)!==0&&(m.flags&128)===0)Ay(),Ql(),m.flags|=98560,G=!1;else if(G=bh(m),k!==null&&k.dehydrated!==null){if(d===null){if(!G)throw Error(t(318));if(G=m.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(t(317));G[fi]=m}else Ql(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Os(m),G=!1}else Eo!==null&&(_T(Eo),Eo=null),G=!0;if(!G)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=A,m):(k=k!==null,k!==(d!==null&&d.memoizedState!==null)&&k&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(vr.current&1)!==0?Gi===0&&(Gi=3):bT())),m.updateQueue!==null&&(m.flags|=4),Os(m),null);case 4:return eu(),lT(d,m),d===null&&yh(m.stateNode.containerInfo),Os(m),null;case 10:return hd(m.type._context),Os(m),null;case 17:return is(m.type)&&id(),Os(m),null;case 19:if(dr(vr),G=m.memoizedState,G===null)return Os(m),null;if(k=(m.flags&128)!==0,ne=G.rendering,ne===null)if(k)By(G,!1);else{if(Gi!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(ne=Ko(d),ne!==null){for(m.flags|=128,By(G,!1),k=ne.updateQueue,k!==null&&(m.updateQueue=k,m.flags|=4),m.subtreeFlags=0,k=A,A=m.child;A!==null;)G=A,d=k,G.flags&=14680066,ne=G.alternate,ne===null?(G.childLanes=0,G.lanes=d,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=ne.childLanes,G.lanes=ne.lanes,G.child=ne.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=ne.memoizedProps,G.memoizedState=ne.memoizedState,G.updateQueue=ne.updateQueue,G.type=ne.type,d=ne.dependencies,G.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),A=A.sibling;return lr(vr,vr.current&1|2),m.child}d=d.sibling}G.tail!==null&&Oe()>Jm&&(m.flags|=128,k=!0,By(G,!1),m.lanes=4194304)}else{if(!k)if(d=Ko(ne),d!==null){if(m.flags|=128,k=!0,A=d.updateQueue,A!==null&&(m.updateQueue=A,m.flags|=4),By(G,!0),G.tail===null&&G.tailMode==="hidden"&&!ne.alternate&&!gr)return Os(m),null}else 2*Oe()-G.renderingStartTime>Jm&&A!==1073741824&&(m.flags|=128,k=!0,By(G,!1),m.lanes=4194304);G.isBackwards?(ne.sibling=m.child,m.child=ne):(A=G.last,A!==null?A.sibling=ne:m.child=ne,G.last=ne)}return G.tail!==null?(m=G.tail,G.rendering=m,G.tail=m.sibling,G.renderingStartTime=Oe(),m.sibling=null,A=vr.current,lr(vr,k?A&1|2:A&1),m):(Os(m),null);case 22:case 23:return wT(),k=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==k&&(m.flags|=8192),k&&(m.mode&1)!==0?(Yo&1073741824)!==0&&(Os(m),m.subtreeFlags&6&&(m.flags|=8192)):Os(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function YK(d,m){switch(rl(m),m.tag){case 1:return is(m.type)&&id(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return eu(),dr(gs),dr(Ui),Ea(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return Th(m),null;case 13:if(dr(vr),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(t(340));Ql()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return dr(vr),null;case 4:return eu(),null;case 10:return hd(m.type._context),null;case 22:case 23:return wT(),null;case 24:return null;default:return null}}var ow=!1,Ds=!1,QK=typeof WeakSet=="function"?WeakSet:Set,It=null;function $m(d,m){var A=d.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(k){ri(d,m,k)}else A.current=null}function uT(d,m,A){try{A()}catch(k){ri(d,m,k)}}var gD=!1;function ZK(d,m){if(xh=es,d=Mr(),Ei(d)){if("selectionStart"in d)var A={start:d.selectionStart,end:d.selectionEnd};else e:{A=(A=d.ownerDocument)&&A.defaultView||window;var k=A.getSelection&&A.getSelection();if(k&&k.rangeCount!==0){A=k.anchorNode;var j=k.anchorOffset,G=k.focusNode;k=k.focusOffset;try{A.nodeType,G.nodeType}catch{A=null;break e}var ne=0,_e=-1,Ee=-1,ze=0,st=0,ot=d,nt=null;t:for(;;){for(var Tt;ot!==A||j!==0&&ot.nodeType!==3||(_e=ne+j),ot!==G||k!==0&&ot.nodeType!==3||(Ee=ne+k),ot.nodeType===3&&(ne+=ot.nodeValue.length),(Tt=ot.firstChild)!==null;)nt=ot,ot=Tt;for(;;){if(ot===d)break t;if(nt===A&&++ze===j&&(_e=ne),nt===G&&++st===k&&(Ee=ne),(Tt=ot.nextSibling)!==null)break;ot=nt,nt=ot.parentNode}ot=Tt}A=_e===-1||Ee===-1?null:{start:_e,end:Ee}}else A=null}A=A||{start:0,end:0}}else A=null;for(fy={focusedElem:d,selectionRange:A},es=!1,It=m;It!==null;)if(m=It,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,It=d;else for(;It!==null;){m=It;try{var Dt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var Nt=Dt.memoizedProps,di=Dt.memoizedState,Le=m.stateNode,Se=Le.getSnapshotBeforeUpdate(m.elementType===m.type?Nt:Ao(m.type,Nt),di);Le.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Fe=m.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ht){ri(m,m.return,ht)}if(d=m.sibling,d!==null){d.return=m.return,It=d;break}It=m.return}return Dt=gD,gD=!1,Dt}function Fy(d,m,A){var k=m.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var j=k=k.next;do{if((j.tag&d)===d){var G=j.destroy;j.destroy=void 0,G!==void 0&&uT(m,A,G)}j=j.next}while(j!==k)}}function aw(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var A=m=m.next;do{if((A.tag&d)===d){var k=A.create;A.destroy=k()}A=A.next}while(A!==m)}}function cT(d){var m=d.ref;if(m!==null){var A=d.stateNode;switch(d.tag){case 5:d=A;break;default:d=A}typeof m=="function"?m(d):m.current=d}}function vD(d){var m=d.alternate;m!==null&&(d.alternate=null,vD(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[fi],delete m[wh],delete m[Ku],delete m[Im],delete m[Pm])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function yD(d){return d.tag===5||d.tag===3||d.tag===4}function _D(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||yD(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function hT(d,m,A){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?A.nodeType===8?A.parentNode.insertBefore(d,m):A.insertBefore(d,m):(A.nodeType===8?(m=A.parentNode,m.insertBefore(d,A)):(m=A,m.appendChild(d)),A=A._reactRootContainer,A!=null||m.onclick!==null||(m.onclick=rd));else if(k!==4&&(d=d.child,d!==null))for(hT(d,m,A),d=d.sibling;d!==null;)hT(d,m,A),d=d.sibling}function fT(d,m,A){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?A.insertBefore(d,m):A.appendChild(d);else if(k!==4&&(d=d.child,d!==null))for(fT(d,m,A),d=d.sibling;d!==null;)fT(d,m,A),d=d.sibling}var xs=null,hl=!1;function Rh(d,m,A){for(A=A.child;A!==null;)xD(d,m,A),A=A.sibling}function xD(d,m,A){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Bt,A)}catch{}switch(A.tag){case 5:Ds||$m(A,m);case 6:var k=xs,j=hl;xs=null,Rh(d,m,A),xs=k,hl=j,xs!==null&&(hl?(d=xs,A=A.stateNode,d.nodeType===8?d.parentNode.removeChild(A):d.removeChild(A)):xs.removeChild(A.stateNode));break;case 18:xs!==null&&(hl?(d=xs,A=A.stateNode,d.nodeType===8?Rm(d.parentNode,A):d.nodeType===1&&Rm(d,A),jo(d)):Rm(xs,A.stateNode));break;case 4:k=xs,j=hl,xs=A.stateNode.containerInfo,hl=!0,Rh(d,m,A),xs=k,hl=j;break;case 0:case 11:case 14:case 15:if(!Ds&&(k=A.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){j=k=k.next;do{var G=j,ne=G.destroy;G=G.tag,ne!==void 0&&((G&2)!==0||(G&4)!==0)&&uT(A,m,ne),j=j.next}while(j!==k)}Rh(d,m,A);break;case 1:if(!Ds&&($m(A,m),k=A.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=A.memoizedProps,k.state=A.memoizedState,k.componentWillUnmount()}catch(_e){ri(A,m,_e)}Rh(d,m,A);break;case 21:Rh(d,m,A);break;case 22:A.mode&1?(Ds=(k=Ds)||A.memoizedState!==null,Rh(d,m,A),Ds=k):Rh(d,m,A);break;default:Rh(d,m,A)}}function wD(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var A=d.stateNode;A===null&&(A=d.stateNode=new QK),m.forEach(function(k){var j=lJ.bind(null,d,k);A.has(k)||(A.add(k),k.then(j,j))})}}function fl(d,m){var A=m.deletions;if(A!==null)for(var k=0;k<A.length;k++){var j=A[k];try{var G=d,ne=m,_e=ne;e:for(;_e!==null;){switch(_e.tag){case 5:xs=_e.stateNode,hl=!1;break e;case 3:xs=_e.stateNode.containerInfo,hl=!0;break e;case 4:xs=_e.stateNode.containerInfo,hl=!0;break e}_e=_e.return}if(xs===null)throw Error(t(160));xD(G,ne,j),xs=null,hl=!1;var Ee=j.alternate;Ee!==null&&(Ee.return=null),j.return=null}catch(ze){ri(j,m,ze)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)bD(m,d),m=m.sibling}function bD(d,m){var A=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(fl(m,d),nu(d),k&4){try{Fy(3,d,d.return),aw(3,d)}catch(Nt){ri(d,d.return,Nt)}try{Fy(5,d,d.return)}catch(Nt){ri(d,d.return,Nt)}}break;case 1:fl(m,d),nu(d),k&512&&A!==null&&$m(A,A.return);break;case 5:if(fl(m,d),nu(d),k&512&&A!==null&&$m(A,A.return),d.flags&32){var j=d.stateNode;try{vt(j,"")}catch(Nt){ri(d,d.return,Nt)}}if(k&4&&(j=d.stateNode,j!=null)){var G=d.memoizedProps,ne=A!==null?A.memoizedProps:G,_e=d.type,Ee=d.updateQueue;if(d.updateQueue=null,Ee!==null)try{_e==="input"&&G.type==="radio"&&G.name!=null&&Je(j,G),qt(_e,ne);var ze=qt(_e,G);for(ne=0;ne<Ee.length;ne+=2){var st=Ee[ne],ot=Ee[ne+1];st==="style"?jt(j,ot):st==="dangerouslySetInnerHTML"?lt(j,ot):st==="children"?vt(j,ot):E(j,st,ot,ze)}switch(_e){case"input":rt(j,G);break;case"textarea":de(j,G);break;case"select":var nt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!G.multiple;var Tt=G.value;Tt!=null?ie(j,!!G.multiple,Tt,!1):nt!==!!G.multiple&&(G.defaultValue!=null?ie(j,!!G.multiple,G.defaultValue,!0):ie(j,!!G.multiple,G.multiple?[]:"",!1))}j[wh]=G}catch(Nt){ri(d,d.return,Nt)}}break;case 6:if(fl(m,d),nu(d),k&4){if(d.stateNode===null)throw Error(t(162));j=d.stateNode,G=d.memoizedProps;try{j.nodeValue=G}catch(Nt){ri(d,d.return,Nt)}}break;case 3:if(fl(m,d),nu(d),k&4&&A!==null&&A.memoizedState.isDehydrated)try{jo(m.containerInfo)}catch(Nt){ri(d,d.return,Nt)}break;case 4:fl(m,d),nu(d);break;case 13:fl(m,d),nu(d),j=d.child,j.flags&8192&&(G=j.memoizedState!==null,j.stateNode.isHidden=G,!G||j.alternate!==null&&j.alternate.memoizedState!==null||(mT=Oe())),k&4&&wD(d);break;case 22:if(st=A!==null&&A.memoizedState!==null,d.mode&1?(Ds=(ze=Ds)||st,fl(m,d),Ds=ze):fl(m,d),nu(d),k&8192){if(ze=d.memoizedState!==null,(d.stateNode.isHidden=ze)&&!st&&(d.mode&1)!==0)for(It=d,st=d.child;st!==null;){for(ot=It=st;It!==null;){switch(nt=It,Tt=nt.child,nt.tag){case 0:case 11:case 14:case 15:Fy(4,nt,nt.return);break;case 1:$m(nt,nt.return);var Dt=nt.stateNode;if(typeof Dt.componentWillUnmount=="function"){k=nt,A=nt.return;try{m=k,Dt.props=m.memoizedProps,Dt.state=m.memoizedState,Dt.componentWillUnmount()}catch(Nt){ri(k,A,Nt)}}break;case 5:$m(nt,nt.return);break;case 22:if(nt.memoizedState!==null){SD(ot);continue}}Tt!==null?(Tt.return=nt,It=Tt):SD(ot)}st=st.sibling}e:for(st=null,ot=d;;){if(ot.tag===5){if(st===null){st=ot;try{j=ot.stateNode,ze?(G=j.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(_e=ot.stateNode,Ee=ot.memoizedProps.style,ne=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null,_e.style.display=Ot("display",ne))}catch(Nt){ri(d,d.return,Nt)}}}else if(ot.tag===6){if(st===null)try{ot.stateNode.nodeValue=ze?"":ot.memoizedProps}catch(Nt){ri(d,d.return,Nt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===d)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===d)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===d)break e;st===ot&&(st=null),ot=ot.return}st===ot&&(st=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:fl(m,d),nu(d),k&4&&wD(d);break;case 21:break;default:fl(m,d),nu(d)}}function nu(d){var m=d.flags;if(m&2){try{e:{for(var A=d.return;A!==null;){if(yD(A)){var k=A;break e}A=A.return}throw Error(t(160))}switch(k.tag){case 5:var j=k.stateNode;k.flags&32&&(vt(j,""),k.flags&=-33);var G=_D(d);fT(d,G,j);break;case 3:case 4:var ne=k.stateNode.containerInfo,_e=_D(d);hT(d,_e,ne);break;default:throw Error(t(161))}}catch(Ee){ri(d,d.return,Ee)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function eJ(d,m,A){It=d,ED(d)}function ED(d,m,A){for(var k=(d.mode&1)!==0;It!==null;){var j=It,G=j.child;if(j.tag===22&&k){var ne=j.memoizedState!==null||ow;if(!ne){var _e=j.alternate,Ee=_e!==null&&_e.memoizedState!==null||Ds;_e=ow;var ze=Ds;if(ow=ne,(Ds=Ee)&&!ze)for(It=j;It!==null;)ne=It,Ee=ne.child,ne.tag===22&&ne.memoizedState!==null?TD(j):Ee!==null?(Ee.return=ne,It=Ee):TD(j);for(;G!==null;)It=G,ED(G),G=G.sibling;It=j,ow=_e,Ds=ze}AD(d)}else(j.subtreeFlags&8772)!==0&&G!==null?(G.return=j,It=G):AD(d)}}function AD(d){for(;It!==null;){var m=It;if((m.flags&8772)!==0){var A=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Ds||aw(5,m);break;case 1:var k=m.stateNode;if(m.flags&4&&!Ds)if(A===null)k.componentDidMount();else{var j=m.elementType===m.type?A.memoizedProps:Ao(m.type,A.memoizedProps);k.componentDidUpdate(j,A.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var G=m.updateQueue;G!==null&&Sh(m,G,k);break;case 3:var ne=m.updateQueue;if(ne!==null){if(A=null,m.child!==null)switch(m.child.tag){case 5:A=m.child.stateNode;break;case 1:A=m.child.stateNode}Sh(m,ne,A)}break;case 5:var _e=m.stateNode;if(A===null&&m.flags&4){A=_e;var Ee=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ee.autoFocus&&A.focus();break;case"img":Ee.src&&(A.src=Ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var ze=m.alternate;if(ze!==null){var st=ze.memoizedState;if(st!==null){var ot=st.dehydrated;ot!==null&&jo(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ds||m.flags&512&&cT(m)}catch(nt){ri(m,m.return,nt)}}if(m===d){It=null;break}if(A=m.sibling,A!==null){A.return=m.return,It=A;break}It=m.return}}function SD(d){for(;It!==null;){var m=It;if(m===d){It=null;break}var A=m.sibling;if(A!==null){A.return=m.return,It=A;break}It=m.return}}function TD(d){for(;It!==null;){var m=It;try{switch(m.tag){case 0:case 11:case 15:var A=m.return;try{aw(4,m)}catch(Ee){ri(m,A,Ee)}break;case 1:var k=m.stateNode;if(typeof k.componentDidMount=="function"){var j=m.return;try{k.componentDidMount()}catch(Ee){ri(m,j,Ee)}}var G=m.return;try{cT(m)}catch(Ee){ri(m,G,Ee)}break;case 5:var ne=m.return;try{cT(m)}catch(Ee){ri(m,ne,Ee)}}}catch(Ee){ri(m,m.return,Ee)}if(m===d){It=null;break}var _e=m.sibling;if(_e!==null){_e.return=m.return,It=_e;break}It=m.return}}var tJ=Math.ceil,lw=S.ReactCurrentDispatcher,dT=S.ReactCurrentOwner,Sa=S.ReactCurrentBatchConfig,Jn=0,as=null,Mi=null,ws=0,Yo=0,Km=kr(0),Gi=0,Uy=null,bd=0,uw=0,pT=0,jy=null,So=null,mT=0,Jm=1/0,cc=null,cw=!1,gT=null,Ih=null,hw=!1,Ph=null,fw=0,Vy=0,vT=null,dw=-1,pw=0;function ho(){return(Jn&6)!==0?Oe():dw!==-1?dw:dw=Oe()}function kh(d){return(d.mode&1)===0?1:(Jn&2)!==0&&ws!==0?ws&-ws:sT.transition!==null?(pw===0&&(pw=dn()),pw):(d=pn,d!==0||(d=window.event,d=d===void 0?16:Wf(d.type)),d)}function dl(d,m,A,k){if(50<Vy)throw Vy=0,vT=null,Error(t(185));Ur(d,A,k),((Jn&2)===0||d!==as)&&(d===as&&((Jn&2)===0&&(uw|=A),Gi===4&&Oh(d,ws)),To(d,k),A===1&&Jn===0&&(m.mode&1)===0&&(Jm=Oe()+500,od&&wa()))}function To(d,m){var A=d.callbackNode;cr(d,m);var k=Xr(d,d===as?ws:0);if(k===0)A!==null&&le(A),d.callbackNode=null,d.callbackPriority=0;else if(m=k&-k,d.callbackPriority!==m){if(A!=null&&le(A),m===1)d.tag===0?$x(MD.bind(null,d)):ad(MD.bind(null,d)),iT(function(){(Jn&6)===0&&wa()}),A=null;else{switch(Qr(k)){case 1:A=tt;break;case 4:A=ft;break;case 16:A=gt;break;case 536870912:A=zt;break;default:A=gt}A=LD(A,CD.bind(null,d))}d.callbackPriority=m,d.callbackNode=A}}function CD(d,m){if(dw=-1,pw=0,(Jn&6)!==0)throw Error(t(327));var A=d.callbackNode;if(Xm()&&d.callbackNode!==A)return null;var k=Xr(d,d===as?ws:0);if(k===0)return null;if((k&30)!==0||(k&d.expiredLanes)!==0||m)m=mw(d,k);else{m=k;var j=Jn;Jn|=2;var G=ID();(as!==d||ws!==m)&&(cc=null,Jm=Oe()+500,Ad(d,m));do try{iJ();break}catch(_e){RD(d,_e)}while(!0);nc(),lw.current=G,Jn=j,Mi!==null?m=0:(as=null,ws=0,m=Gi)}if(m!==0){if(m===2&&(j=Yr(d),j!==0&&(k=j,m=yT(d,j))),m===1)throw A=Uy,Ad(d,0),Oh(d,k),To(d,Oe()),A;if(m===6)Oh(d,k);else{if(j=d.current.alternate,(k&30)===0&&!nJ(j)&&(m=mw(d,k),m===2&&(G=Yr(d),G!==0&&(k=G,m=yT(d,G))),m===1))throw A=Uy,Ad(d,0),Oh(d,k),To(d,Oe()),A;switch(d.finishedWork=j,d.finishedLanes=k,m){case 0:case 1:throw Error(t(345));case 2:Sd(d,So,cc);break;case 3:if(Oh(d,k),(k&130023424)===k&&(m=mT+500-Oe(),10<m)){if(Xr(d,0)!==0)break;if(j=d.suspendedLanes,(j&k)!==k){ho(),d.pingedLanes|=d.suspendedLanes&j;break}d.timeoutHandle=py(Sd.bind(null,d,So,cc),m);break}Sd(d,So,cc);break;case 4:if(Oh(d,k),(k&4194240)===k)break;for(m=d.eventTimes,j=-1;0<k;){var ne=31-Ht(k);G=1<<ne,ne=m[ne],ne>j&&(j=ne),k&=~G}if(k=j,k=Oe()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*tJ(k/1960))-k,10<k){d.timeoutHandle=py(Sd.bind(null,d,So,cc),k);break}Sd(d,So,cc);break;case 5:Sd(d,So,cc);break;default:throw Error(t(329))}}}return To(d,Oe()),d.callbackNode===A?CD.bind(null,d):null}function yT(d,m){var A=jy;return d.current.memoizedState.isDehydrated&&(Ad(d,m).flags|=256),d=mw(d,m),d!==2&&(m=So,So=A,m!==null&&_T(m)),d}function _T(d){So===null?So=d:So.push.apply(So,d)}function nJ(d){for(var m=d;;){if(m.flags&16384){var A=m.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var k=0;k<A.length;k++){var j=A[k],G=j.getSnapshot;j=j.value;try{if(!ro(G(),j))return!1}catch{return!1}}}if(A=m.child,m.subtreeFlags&16384&&A!==null)A.return=m,m=A;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Oh(d,m){for(m&=~pT,m&=~uw,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var A=31-Ht(m),k=1<<A;d[A]=-1,m&=~k}}function MD(d){if((Jn&6)!==0)throw Error(t(327));Xm();var m=Xr(d,0);if((m&1)===0)return To(d,Oe()),null;var A=mw(d,m);if(d.tag!==0&&A===2){var k=Yr(d);k!==0&&(m=k,A=yT(d,k))}if(A===1)throw A=Uy,Ad(d,0),Oh(d,m),To(d,Oe()),A;if(A===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,Sd(d,So,cc),To(d,Oe()),null}function xT(d,m){var A=Jn;Jn|=1;try{return d(m)}finally{Jn=A,Jn===0&&(Jm=Oe()+500,od&&wa())}}function Ed(d){Ph!==null&&Ph.tag===0&&(Jn&6)===0&&Xm();var m=Jn;Jn|=1;var A=Sa.transition,k=pn;try{if(Sa.transition=null,pn=1,d)return d()}finally{pn=k,Sa.transition=A,Jn=m,(Jn&6)===0&&wa()}}function wT(){Yo=Km.current,dr(Km)}function Ad(d,m){d.finishedWork=null,d.finishedLanes=0;var A=d.timeoutHandle;if(A!==-1&&(d.timeoutHandle=-1,my(A)),Mi!==null)for(A=Mi.return;A!==null;){var k=A;switch(rl(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&id();break;case 3:eu(),dr(gs),dr(Ui),Ea();break;case 5:Th(k);break;case 4:eu();break;case 13:dr(vr);break;case 19:dr(vr);break;case 10:hd(k.type._context);break;case 22:case 23:wT()}A=A.return}if(as=d,Mi=d=Dh(d.current,null),ws=Yo=m,Gi=0,Uy=null,pT=uw=bd=0,So=jy=null,sl!==null){for(m=0;m<sl.length;m++)if(A=sl[m],k=A.interleaved,k!==null){A.interleaved=null;var j=k.next,G=A.pending;if(G!==null){var ne=G.next;G.next=j,k.next=ne}A.pending=k}sl=null}return d}function RD(d,m){do{var A=Mi;try{if(nc(),oc.current=qm,Jo){for(var k=pr.memoizedState;k!==null;){var j=k.queue;j!==null&&(j.pending=null),k=k.next}Jo=!1}if(al=0,Hn=Dr=pr=null,os=!1,tu=0,dT.current=null,A===null||A.return===null){Gi=1,Uy=m,Mi=null;break}e:{var G=d,ne=A.return,_e=A,Ee=m;if(m=ws,_e.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var ze=Ee,st=_e,ot=st.tag;if((st.mode&1)===0&&(ot===0||ot===11||ot===15)){var nt=st.alternate;nt?(st.updateQueue=nt.updateQueue,st.memoizedState=nt.memoizedState,st.lanes=nt.lanes):(st.updateQueue=null,st.memoizedState=null)}var Tt=Mt(ne);if(Tt!==null){Tt.flags&=-257,an(Tt,ne,_e,G,m),Tt.mode&1&&ct(G,ze,m),m=Tt,Ee=ze;var Dt=m.updateQueue;if(Dt===null){var Nt=new Set;Nt.add(Ee),m.updateQueue=Nt}else Dt.add(Ee);break e}else{if((m&1)===0){ct(G,ze,m),bT();break e}Ee=Error(t(426))}}else if(gr&&_e.mode&1){var di=Mt(ne);if(di!==null){(di.flags&65536)===0&&(di.flags|=256),an(di,ne,_e,G,m),Eh(B(Ee,_e));break e}}G=Ee=B(Ee,_e),Gi!==4&&(Gi=2),jy===null?jy=[G]:jy.push(G),G=ne;do{switch(G.tag){case 3:G.flags|=65536,m&=-m,G.lanes|=m;var Le=Ce(G,Ee,m);rc(G,Le);break e;case 1:_e=Ee;var Se=G.type,Fe=G.stateNode;if((G.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Ih===null||!Ih.has(Fe)))){G.flags|=65536,m&=-m,G.lanes|=m;var ht=Ke(G,_e,m);rc(G,ht);break e}}G=G.return}while(G!==null)}kD(A)}catch(Vt){m=Vt,Mi===A&&A!==null&&(Mi=A=A.return);continue}break}while(!0)}function ID(){var d=lw.current;return lw.current=qm,d===null?qm:d}function bT(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),as===null||(bd&268435455)===0&&(uw&268435455)===0||Oh(as,ws)}function mw(d,m){var A=Jn;Jn|=2;var k=ID();(as!==d||ws!==m)&&(cc=null,Ad(d,m));do try{rJ();break}catch(j){RD(d,j)}while(!0);if(nc(),Jn=A,lw.current=k,Mi!==null)throw Error(t(261));return as=null,ws=0,Gi}function rJ(){for(;Mi!==null;)PD(Mi)}function iJ(){for(;Mi!==null&&!Me();)PD(Mi)}function PD(d){var m=ND(d.alternate,d,Yo);d.memoizedProps=d.pendingProps,m===null?kD(d):Mi=m,dT.current=null}function kD(d){var m=d;do{var A=m.alternate;if(d=m.return,(m.flags&32768)===0){if(A=XK(A,m,Yo),A!==null){Mi=A;return}}else{if(A=YK(A,m),A!==null){A.flags&=32767,Mi=A;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Gi=6,Mi=null;return}}if(m=m.sibling,m!==null){Mi=m;return}Mi=m=d}while(m!==null);Gi===0&&(Gi=5)}function Sd(d,m,A){var k=pn,j=Sa.transition;try{Sa.transition=null,pn=1,sJ(d,m,A,k)}finally{Sa.transition=j,pn=k}return null}function sJ(d,m,A,k){do Xm();while(Ph!==null);if((Jn&6)!==0)throw Error(t(327));A=d.finishedWork;var j=d.finishedLanes;if(A===null)return null;if(d.finishedWork=null,d.finishedLanes=0,A===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var G=A.lanes|A.childLanes;if(cn(d,G),d===as&&(Mi=as=null,ws=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||hw||(hw=!0,LD(gt,function(){return Xm(),null})),G=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||G){G=Sa.transition,Sa.transition=null;var ne=pn;pn=1;var _e=Jn;Jn|=4,dT.current=null,ZK(d,A),bD(A,d),Ai(fy),es=!!xh,fy=xh=null,d.current=A,eJ(A),je(),Jn=_e,pn=ne,Sa.transition=G}else d.current=A;if(hw&&(hw=!1,Ph=d,fw=j),G=d.pendingLanes,G===0&&(Ih=null),Pt(A.stateNode),To(d,Oe()),m!==null)for(k=d.onRecoverableError,A=0;A<m.length;A++)j=m[A],k(j.value,{componentStack:j.stack,digest:j.digest});if(cw)throw cw=!1,d=gT,gT=null,d;return(fw&1)!==0&&d.tag!==0&&Xm(),G=d.pendingLanes,(G&1)!==0?d===vT?Vy++:(Vy=0,vT=d):Vy=0,wa(),null}function Xm(){if(Ph!==null){var d=Qr(fw),m=Sa.transition,A=pn;try{if(Sa.transition=null,pn=16>d?16:d,Ph===null)var k=!1;else{if(d=Ph,Ph=null,fw=0,(Jn&6)!==0)throw Error(t(331));var j=Jn;for(Jn|=4,It=d.current;It!==null;){var G=It,ne=G.child;if((It.flags&16)!==0){var _e=G.deletions;if(_e!==null){for(var Ee=0;Ee<_e.length;Ee++){var ze=_e[Ee];for(It=ze;It!==null;){var st=It;switch(st.tag){case 0:case 11:case 15:Fy(8,st,G)}var ot=st.child;if(ot!==null)ot.return=st,It=ot;else for(;It!==null;){st=It;var nt=st.sibling,Tt=st.return;if(vD(st),st===ze){It=null;break}if(nt!==null){nt.return=Tt,It=nt;break}It=Tt}}}var Dt=G.alternate;if(Dt!==null){var Nt=Dt.child;if(Nt!==null){Dt.child=null;do{var di=Nt.sibling;Nt.sibling=null,Nt=di}while(Nt!==null)}}It=G}}if((G.subtreeFlags&2064)!==0&&ne!==null)ne.return=G,It=ne;else e:for(;It!==null;){if(G=It,(G.flags&2048)!==0)switch(G.tag){case 0:case 11:case 15:Fy(9,G,G.return)}var Le=G.sibling;if(Le!==null){Le.return=G.return,It=Le;break e}It=G.return}}var Se=d.current;for(It=Se;It!==null;){ne=It;var Fe=ne.child;if((ne.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=ne,It=Fe;else e:for(ne=Se;It!==null;){if(_e=It,(_e.flags&2048)!==0)try{switch(_e.tag){case 0:case 11:case 15:aw(9,_e)}}catch(Vt){ri(_e,_e.return,Vt)}if(_e===ne){It=null;break e}var ht=_e.sibling;if(ht!==null){ht.return=_e.return,It=ht;break e}It=_e.return}}if(Jn=j,wa(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Bt,d)}catch{}k=!0}return k}finally{pn=A,Sa.transition=m}}return!1}function OD(d,m,A){m=B(A,m),m=Ce(d,m,1),d=wr(d,m,1),m=ho(),d!==null&&(Ur(d,1,m),To(d,m))}function ri(d,m,A){if(d.tag===3)OD(d,d,A);else for(;m!==null;){if(m.tag===3){OD(m,d,A);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Ih===null||!Ih.has(k))){d=B(A,d),d=Ke(m,d,1),m=wr(m,d,1),d=ho(),m!==null&&(Ur(m,1,d),To(m,d));break}}m=m.return}}function oJ(d,m,A){var k=d.pingCache;k!==null&&k.delete(m),m=ho(),d.pingedLanes|=d.suspendedLanes&A,as===d&&(ws&A)===A&&(Gi===4||Gi===3&&(ws&130023424)===ws&&500>Oe()-mT?Ad(d,0):pT|=A),To(d,m)}function DD(d,m){m===0&&((d.mode&1)===0?m=1:(m=In,In<<=1,(In&130023424)===0&&(In=4194304)));var A=ho();d=$o(d,m),d!==null&&(Ur(d,m,A),To(d,A))}function aJ(d){var m=d.memoizedState,A=0;m!==null&&(A=m.retryLane),DD(d,A)}function lJ(d,m){var A=0;switch(d.tag){case 13:var k=d.stateNode,j=d.memoizedState;j!==null&&(A=j.retryLane);break;case 19:k=d.stateNode;break;default:throw Error(t(314))}k!==null&&k.delete(m),DD(d,A)}var ND;ND=function(d,m,A){if(d!==null)if(d.memoizedProps!==m.pendingProps||gs.current)Tn=!0;else{if((d.lanes&A)===0&&(m.flags&128)===0)return Tn=!1,JK(d,m,A);Tn=(d.flags&131072)!==0}else Tn=!1,gr&&(m.flags&1048576)!==0&&xy(m,Nm,m.index);switch(m.lanes=0,m.tag){case 2:var k=m.type;sw(d,m),d=m.pendingProps;var j=Ju(m,Ui.current);Zl(m,A),j=gd(null,m,k,d,j,A);var G=My();return m.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,is(k)?(G=!0,Xu(m)):G=!1,m.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,wn(m),j.updater=Wm,m.stateNode=j,j._reactInternals=m,I(m,k,d,A),m=gn(null,m,k,!0,G,A)):(m.tag=0,gr&&G&&wy(m),St(null,m,j,A),m=m.child),m;case 16:k=m.elementType;e:{switch(sw(d,m),d=m.pendingProps,j=k._init,k=j(k._payload),m.type=k,j=m.tag=cJ(k),d=Ao(k,d),j){case 0:m=xt(null,m,k,d,A);break e;case 1:m=Ft(null,m,k,d,A);break e;case 11:m=Hi(null,m,k,d,A);break e;case 14:m=co(null,m,k,Ao(k.type,d),A);break e}throw Error(t(306,k,""))}return m;case 0:return k=m.type,j=m.pendingProps,j=m.elementType===k?j:Ao(k,j),xt(d,m,k,j,A);case 1:return k=m.type,j=m.pendingProps,j=m.elementType===k?j:Ao(k,j),Ft(d,m,k,j,A);case 3:e:{if(ln(m),d===null)throw Error(t(387));k=m.pendingProps,G=m.memoizedState,j=G.element,zr(d,m),Or(m,k,null,A);var ne=m.memoizedState;if(k=ne.element,G.isDehydrated)if(G={element:k,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){j=B(Error(t(423)),m),m=Vn(d,m,k,A,j);break e}else if(k!==j){j=B(Error(t(424)),m),m=Vn(d,m,k,A,j);break e}else for(ys=Qa(m.stateNode.containerInfo.firstChild),ji=m,gr=!0,Eo=null,A=cd(m,null,k,A),m.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Ql(),k===j){m=uc(d,m,A);break e}St(d,m,k,A)}m=m.child}return m;case 5:return sc(m),d===null&&Bm(m),k=m.type,j=m.pendingProps,G=d!==null?d.memoizedProps:null,ne=j.children,dy(k,j)?ne=null:G!==null&&dy(k,G)&&(m.flags|=32),We(d,m),St(d,m,ne,A),m.child;case 6:return d===null&&Bm(m),null;case 13:return cl(d,m,A);case 4:return pd(m,m.stateNode.containerInfo),k=m.pendingProps,d===null?m.child=Zu(m,null,k,A):St(d,m,k,A),m.child;case 11:return k=m.type,j=m.pendingProps,j=m.elementType===k?j:Ao(k,j),Hi(d,m,k,j,A);case 7:return St(d,m,m.pendingProps,A),m.child;case 8:return St(d,m,m.pendingProps.children,A),m.child;case 12:return St(d,m,m.pendingProps.children,A),m.child;case 10:e:{if(k=m.type._context,j=m.pendingProps,G=m.memoizedProps,ne=j.value,lr(ec,k._currentValue),k._currentValue=ne,G!==null)if(ro(G.value,ne)){if(G.children===j.children&&!gs.current){m=uc(d,m,A);break e}}else for(G=m.child,G!==null&&(G.return=m);G!==null;){var _e=G.dependencies;if(_e!==null){ne=G.child;for(var Ee=_e.firstContext;Ee!==null;){if(Ee.context===k){if(G.tag===1){Ee=rr(-1,A&-A),Ee.tag=2;var ze=G.updateQueue;if(ze!==null){ze=ze.shared;var st=ze.pending;st===null?Ee.next=Ee:(Ee.next=st.next,st.next=Ee),ze.pending=Ee}}G.lanes|=A,Ee=G.alternate,Ee!==null&&(Ee.lanes|=A),fd(G.return,A,m),_e.lanes|=A;break}Ee=Ee.next}}else if(G.tag===10)ne=G.type===m.type?null:G.child;else if(G.tag===18){if(ne=G.return,ne===null)throw Error(t(341));ne.lanes|=A,_e=ne.alternate,_e!==null&&(_e.lanes|=A),fd(ne,A,m),ne=G.sibling}else ne=G.child;if(ne!==null)ne.return=G;else for(ne=G;ne!==null;){if(ne===m){ne=null;break}if(G=ne.sibling,G!==null){G.return=ne.return,ne=G;break}ne=ne.return}G=ne}St(d,m,j.children,A),m=m.child}return m;case 9:return j=m.type,k=m.pendingProps.children,Zl(m,A),j=oo(j),k=k(j),m.flags|=1,St(d,m,k,A),m.child;case 14:return k=m.type,j=Ao(k,m.pendingProps),j=Ao(k.type,j),co(d,m,k,j,A);case 15:return Ue(d,m,m.type,m.pendingProps,A);case 17:return k=m.type,j=m.pendingProps,j=m.elementType===k?j:Ao(k,j),sw(d,m),m.tag=1,is(k)?(d=!0,Xu(m)):d=!1,Zl(m,A),y(m,k,j),I(m,k,j,A),gn(null,m,k,!0,d,A);case 19:return fD(d,m,A);case 22:return Pe(d,m,A)}throw Error(t(156,m.tag))};function LD(d,m){return Hl(d,m)}function uJ(d,m,A,k){this.tag=d,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(d,m,A,k){return new uJ(d,m,A,k)}function ET(d){return d=d.prototype,!(!d||!d.isReactComponent)}function cJ(d){if(typeof d=="function")return ET(d)?1:0;if(d!=null){if(d=d.$$typeof,d===U)return 11;if(d===Z)return 14}return 2}function Dh(d,m){var A=d.alternate;return A===null?(A=Ta(d.tag,m,d.key,d.mode),A.elementType=d.elementType,A.type=d.type,A.stateNode=d.stateNode,A.alternate=d,d.alternate=A):(A.pendingProps=m,A.type=d.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=d.flags&14680064,A.childLanes=d.childLanes,A.lanes=d.lanes,A.child=d.child,A.memoizedProps=d.memoizedProps,A.memoizedState=d.memoizedState,A.updateQueue=d.updateQueue,m=d.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},A.sibling=d.sibling,A.index=d.index,A.ref=d.ref,A}function gw(d,m,A,k,j,G){var ne=2;if(k=d,typeof d=="function")ET(d)&&(ne=1);else if(typeof d=="string")ne=5;else e:switch(d){case M:return Td(A.children,j,G,m);case P:ne=8,j|=8;break;case O:return d=Ta(12,A,m,j|2),d.elementType=O,d.lanes=G,d;case F:return d=Ta(13,A,m,j),d.elementType=F,d.lanes=G,d;case J:return d=Ta(19,A,m,j),d.elementType=J,d.lanes=G,d;case ae:return vw(A,j,G,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case R:ne=10;break e;case N:ne=9;break e;case U:ne=11;break e;case Z:ne=14;break e;case oe:ne=16,k=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return m=Ta(ne,A,m,j),m.elementType=d,m.type=k,m.lanes=G,m}function Td(d,m,A,k){return d=Ta(7,d,k,m),d.lanes=A,d}function vw(d,m,A,k){return d=Ta(22,d,k,m),d.elementType=ae,d.lanes=A,d.stateNode={isHidden:!1},d}function AT(d,m,A){return d=Ta(6,d,null,m),d.lanes=A,d}function ST(d,m,A){return m=Ta(4,d.children!==null?d.children:[],d.key,m),m.lanes=A,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function hJ(d,m,A,k,j){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fr(0),this.expirationTimes=Fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fr(0),this.identifierPrefix=k,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function TT(d,m,A,k,j,G,ne,_e,Ee){return d=new hJ(d,m,A,_e,Ee),m===1?(m=1,G===!0&&(m|=8)):m=0,G=Ta(3,null,null,m),d.current=G,G.stateNode=d,G.memoizedState={element:k,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},wn(G),d}function fJ(d,m,A){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:k==null?null:""+k,children:d,containerInfo:m,implementation:A}}function BD(d){if(!d)return el;d=d._reactInternals;e:{if(Rs(d)!==d||d.tag!==1)throw Error(t(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(is(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(d.tag===1){var A=d.type;if(is(A))return sd(d,A,m)}return m}function FD(d,m,A,k,j,G,ne,_e,Ee){return d=TT(A,k,!0,d,j,G,ne,_e,Ee),d.context=BD(null),A=d.current,k=ho(),j=kh(A),G=rr(k,j),G.callback=m??null,wr(A,G,j),d.current.lanes=j,Ur(d,j,k),To(d,k),d}function yw(d,m,A,k){var j=m.current,G=ho(),ne=kh(j);return A=BD(A),m.context===null?m.context=A:m.pendingContext=A,m=rr(G,ne),m.payload={element:d},k=k===void 0?null:k,k!==null&&(m.callback=k),d=wr(j,m,ne),d!==null&&(dl(d,j,ne,G),ss(d,j,ne)),ne}function _w(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function UD(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var A=d.retryLane;d.retryLane=A!==0&&A<m?A:m}}function CT(d,m){UD(d,m),(d=d.alternate)&&UD(d,m)}function dJ(){return null}var jD=typeof reportError=="function"?reportError:function(d){console.error(d)};function MT(d){this._internalRoot=d}xw.prototype.render=MT.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(t(409));yw(d,m,null,null)},xw.prototype.unmount=MT.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;Ed(function(){yw(null,d,null,null)}),m[so]=null}};function xw(d){this._internalRoot=d}xw.prototype.unstable_scheduleHydration=function(d){if(d){var m=rh();d={blockedOn:null,target:d,priority:m};for(var A=0;A<ga.length&&m!==0&&m<ga[A].priority;A++);ga.splice(A,0,d),A===0&&sh(d)}};function RT(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function ww(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function VD(){}function pJ(d,m,A,k,j){if(j){if(typeof k=="function"){var G=k;k=function(){var ze=_w(ne);G.call(ze)}}var ne=FD(m,k,d,0,null,!1,!1,"",VD);return d._reactRootContainer=ne,d[so]=ne.current,yh(d.nodeType===8?d.parentNode:d),Ed(),ne}for(;j=d.lastChild;)d.removeChild(j);if(typeof k=="function"){var _e=k;k=function(){var ze=_w(Ee);_e.call(ze)}}var Ee=TT(d,0,!1,null,null,!1,!1,"",VD);return d._reactRootContainer=Ee,d[so]=Ee.current,yh(d.nodeType===8?d.parentNode:d),Ed(function(){yw(m,Ee,A,k)}),Ee}function bw(d,m,A,k,j){var G=A._reactRootContainer;if(G){var ne=G;if(typeof j=="function"){var _e=j;j=function(){var Ee=_w(ne);_e.call(Ee)}}yw(m,ne,d,j)}else ne=pJ(A,m,d,j,k);return _w(ne)}Ou=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var A=fn(m.pendingLanes);A!==0&&(hr(m,A|1),To(m,Oe()),(Jn&6)===0&&(Jm=Oe()+500,wa()))}break;case 13:Ed(function(){var k=$o(d,1);if(k!==null){var j=ho();dl(k,d,1,j)}}),CT(d,1)}},nh=function(d){if(d.tag===13){var m=$o(d,134217728);if(m!==null){var A=ho();dl(m,d,134217728,A)}CT(d,134217728)}},pm=function(d){if(d.tag===13){var m=kh(d),A=$o(d,m);if(A!==null){var k=ho();dl(A,d,m,k)}CT(d,m)}},rh=function(){return pn},ih=function(d,m){var A=pn;try{return pn=d,m()}finally{pn=A}},mt=function(d,m,A){switch(m){case"input":if(rt(d,A),m=A.name,A.type==="radio"&&m!=null){for(A=d;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<A.length;m++){var k=A[m];if(k!==d&&k.form===d.form){var j=km(k);if(!j)throw Error(t(90));De(k),rt(k,j)}}}break;case"textarea":de(d,A);break;case"select":m=A.value,m!=null&&ie(d,!!A.multiple,m,!1)}},Qn=xT,Tr=Ed;var mJ={usingClientEntryPoint:!1,Events:[Za,Vr,km,dt,Zt,xT]},zy={findFiberByHostInstance:Yl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gJ={bundleType:zy.bundleType,version:zy.version,rendererPackageName:zy.rendererPackageName,rendererConfig:zy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=ku(d),d===null?null:d.stateNode},findFiberByHostInstance:zy.findFiberByHostInstance||dJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ew=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ew.isDisabled&&Ew.supportsFiber)try{Bt=Ew.inject(gJ),ut=Ew}catch{}}return Co.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mJ,Co.createPortal=function(d,m){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RT(m))throw Error(t(200));return fJ(d,m,null,A)},Co.createRoot=function(d,m){if(!RT(d))throw Error(t(299));var A=!1,k="",j=jD;return m!=null&&(m.unstable_strictMode===!0&&(A=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(j=m.onRecoverableError)),m=TT(d,1,!1,null,null,A,!1,k,j),d[so]=m.current,yh(d.nodeType===8?d.parentNode:d),new MT(m)},Co.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=ku(m),d=d===null?null:d.stateNode,d},Co.flushSync=function(d){return Ed(d)},Co.hydrate=function(d,m,A){if(!ww(m))throw Error(t(200));return bw(null,d,m,!0,A)},Co.hydrateRoot=function(d,m,A){if(!RT(d))throw Error(t(405));var k=A!=null&&A.hydratedSources||null,j=!1,G="",ne=jD;if(A!=null&&(A.unstable_strictMode===!0&&(j=!0),A.identifierPrefix!==void 0&&(G=A.identifierPrefix),A.onRecoverableError!==void 0&&(ne=A.onRecoverableError)),m=FD(m,null,d,1,A??null,j,!1,G,ne),d[so]=m.current,yh(d),k)for(d=0;d<k.length;d++)A=k[d],j=A._getVersion,j=j(A._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[A,j]:m.mutableSourceEagerHydrationData.push(A,j);return new xw(m)},Co.render=function(d,m,A){if(!ww(m))throw Error(t(200));return bw(null,d,m,!1,A)},Co.unmountComponentAtNode=function(d){if(!ww(d))throw Error(t(40));return d._reactRootContainer?(Ed(function(){bw(null,null,d,!1,function(){d._reactRootContainer=null,d[so]=null})}),!0):!1},Co.unstable_batchedUpdates=xT,Co.unstable_renderSubtreeIntoContainer=function(d,m,A,k){if(!ww(A))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return bw(d,m,A,!1,k)},Co.version="18.3.1-next-f1338f8080-20240426",Co}var JD;function GP(){if(JD)return kT.exports;JD=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kT.exports=AJ(),kT.exports}var XD;function SJ(){if(XD)return Aw;XD=1;var n=GP();return Aw.createRoot=n.createRoot,Aw.hydrateRoot=n.hydrateRoot,Aw}var TJ=SJ();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var YD="popstate";function CJ(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return F2("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:a_(i)}return RJ(e,t,null,n)}function Lr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Il(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MJ(){return Math.random().toString(36).substring(2,10)}function QD(n,e){return{usr:n.state,key:n.key,idx:e}}function F2(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ov(e):e,state:t,key:e&&e.key||r||MJ()}}function a_({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ov(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function RJ(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function h(){a="POP";let _=c(),v=_==null?null:_-u;u=_,l&&l({action:a,location:x.location,delta:v})}function f(_,v){a="PUSH";let b=F2(x.location,_,v);u=c()+1;let E=QD(b,u),S=x.createHref(b);try{o.pushState(E,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(S)}s&&l&&l({action:a,location:x.location,delta:1})}function p(_,v){a="REPLACE";let b=F2(x.location,_,v);u=c();let E=QD(b,u),S=x.createHref(b);o.replaceState(E,"",S),s&&l&&l({action:a,location:x.location,delta:0})}function g(_){return IJ(_)}let x={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(YD,h),l=_,()=>{i.removeEventListener(YD,h),l=null}},createHref(_){return e(i,_)},createURL:g,encodeLocation(_){let v=g(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(_){return o.go(_)}};return x}function IJ(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Lr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:a_(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function f9(n,e,t="/"){return PJ(n,e,t,!1)}function PJ(n,e,t,r){let i=typeof e=="string"?Ov(e):e,s=Uc(i.pathname||"/",t);if(s==null)return null;let o=d9(n);kJ(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=HJ(s);a=VJ(o[l],u,r)}return a}function d9(n,e=[],t=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;Lr(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let h=Pc([r,c.relativePath]),f=t.concat(c);o.children&&o.children.length>0&&(Lr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),d9(o.children,e,f,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:UJ(h,o.index),routesMeta:f})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of p9(o.path))s(o,a,!0,u)}),e}function p9(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=p9(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function kJ(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jJ(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var OJ=/^:[\w-]+$/,DJ=3,NJ=2,LJ=1,BJ=10,FJ=-2,ZD=n=>n==="*";function UJ(n,e){let t=n.split("/"),r=t.length;return t.some(ZD)&&(r+=FJ),e&&(r+=NJ),t.filter(i=>!ZD(i)).reduce((i,s)=>i+(OJ.test(s)?DJ:s===""?LJ:BJ),r)}function jJ(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function VJ(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=kb({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=kb({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Pc([s,h.pathname]),pathnameBase:$J(Pc([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Pc([s,h.pathnameBase]))}return o}function kb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=zJ(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function zJ(n,e=!1,t=!0){Il(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HJ(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Il(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Uc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function GJ(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ov(n):n;return{pathname:t?t.startsWith("/")?t:qJ(t,e):e,search:KJ(r),hash:JJ(i)}}function qJ(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function NT(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WJ(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function qP(n){let e=WJ(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function WP(n,e,t,r=!1){let i;typeof n=="string"?i=Ov(n):(i={...n},Lr(!i.pathname||!i.pathname.includes("?"),NT("?","pathname","search",i)),Lr(!i.pathname||!i.pathname.includes("#"),NT("#","pathname","hash",i)),Lr(!i.search||!i.search.includes("#"),NT("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=GJ(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Pc=n=>n.join("/").replace(/\/\/+/g,"/"),$J=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),KJ=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JJ=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function XJ(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var m9=["POST","PUT","PATCH","DELETE"];new Set(m9);var YJ=["GET",...m9];new Set(YJ);var Dv=W.createContext(null);Dv.displayName="DataRouter";var AA=W.createContext(null);AA.displayName="DataRouterState";W.createContext(!1);var g9=W.createContext({isTransitioning:!1});g9.displayName="ViewTransition";var QJ=W.createContext(new Map);QJ.displayName="Fetchers";var ZJ=W.createContext(null);ZJ.displayName="Await";var Bl=W.createContext(null);Bl.displayName="Navigation";var W_=W.createContext(null);W_.displayName="Location";var Ua=W.createContext({outlet:null,matches:[],isDataRoute:!1});Ua.displayName="Route";var $P=W.createContext(null);$P.displayName="RouteError";function eX(n,{relative:e}={}){Lr(Nv(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=W.useContext(Bl),{hash:i,pathname:s,search:o}=$_(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:Pc([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Nv(){return W.useContext(W_)!=null}function Au(){return Lr(Nv(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(W_).location}var v9="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function y9(n){W.useContext(Bl).static||W.useLayoutEffect(n)}function Of(){let{isDataRoute:n}=W.useContext(Ua);return n?mX():tX()}function tX(){Lr(Nv(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(Dv),{basename:e,navigator:t}=W.useContext(Bl),{matches:r}=W.useContext(Ua),{pathname:i}=Au(),s=JSON.stringify(qP(r)),o=W.useRef(!1);return y9(()=>{o.current=!0}),W.useCallback((l,u={})=>{if(Il(o.current,v9),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=WP(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Pc([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,n])}var nX=W.createContext(null);function rX(n){let e=W.useContext(Ua).outlet;return W.useMemo(()=>e&&W.createElement(nX.Provider,{value:n},e),[e,n])}function _9(){let{matches:n}=W.useContext(Ua),e=n[n.length-1];return e?e.params:{}}function $_(n,{relative:e}={}){let{matches:t}=W.useContext(Ua),{pathname:r}=Au(),i=JSON.stringify(qP(t));return W.useMemo(()=>WP(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function iX(n,e){return x9(n,e)}function x9(n,e,t,r,i){var b;Lr(Nv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=W.useContext(Bl),{matches:o}=W.useContext(Ua),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let E=h&&h.path||"";w9(u,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=Au(),p;if(e){let E=typeof e=="string"?Ov(e):e;Lr(c==="/"||((b=E.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${E.pathname}" was given in the \`location\` prop.`),p=E}else p=f;let g=p.pathname||"/",x=g;if(c!=="/"){let E=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=f9(n,{pathname:x});Il(h||_!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Il(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=uX(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Pc([c,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:Pc([c,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),o,t,r,i);return e&&v?W.createElement(W_.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function sX(){let n=pX(),e=XJ(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:s},"ErrorBoundary")," or"," ",W.createElement("code",{style:s},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,o)}var oX=W.createElement(sX,null),aX=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?W.createElement(Ua.Provider,{value:this.props.routeContext},W.createElement($P.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lX({routeContext:n,match:e,children:t}){let r=W.useContext(Dv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Ua.Provider,{value:n},t)}function uX(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Lr(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(t)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=t,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,g=null,x=null;t&&(f=o&&c.route.id?o[c.route.id]:void 0,g=c.route.errorElement||oX,a&&(l<0&&h===0?(w9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):l===h&&(p=!0,x=c.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=x:c.route.Component?b=W.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=u,W.createElement(lX,{match:c,routeContext:{outlet:u,matches:_,isDataRoute:t!=null},children:b})};return t&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?W.createElement(aX,{location:t.location,revalidation:t.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:r}):v()},null)}function KP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cX(n){let e=W.useContext(Dv);return Lr(e,KP(n)),e}function hX(n){let e=W.useContext(AA);return Lr(e,KP(n)),e}function fX(n){let e=W.useContext(Ua);return Lr(e,KP(n)),e}function JP(n){let e=fX(n),t=e.matches[e.matches.length-1];return Lr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function dX(){return JP("useRouteId")}function pX(){var r;let n=W.useContext($P),e=hX("useRouteError"),t=JP("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function mX(){let{router:n}=cX("useNavigate"),e=JP("useNavigate"),t=W.useRef(!1);return y9(()=>{t.current=!0}),W.useCallback(async(i,s={})=>{Il(t.current,v9),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var eN={};function w9(n,e,t){!e&&!eN[n]&&(eN[n]=!0,Il(!1,t))}W.memo(gX);function gX({routes:n,future:e,state:t,unstable_onError:r}){return x9(n,void 0,t,r,e)}function Sw({to:n,replace:e,state:t,relative:r}){Lr(Nv(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext(Bl);Il(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=W.useContext(Ua),{pathname:o}=Au(),a=Of(),l=WP(n,qP(s),o,r==="path"),u=JSON.stringify(l);return W.useEffect(()=>{a(JSON.parse(u),{replace:e,state:t,relative:r})},[a,u,r,e,t]),null}function b9(n){return rX(n.context)}function br(n){Lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vX({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Lr(!Nv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=W.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Ov(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=t,p=W.useMemo(()=>{let g=Uc(l,o);return g==null?null:{location:{pathname:g,search:u,hash:c,state:h,key:f},navigationType:r}},[o,l,u,c,h,f,r]);return Il(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:W.createElement(Bl.Provider,{value:a},W.createElement(W_.Provider,{children:e,value:p}))}function yX({children:n,location:e}){return iX(U2(n),e)}function U2(n,e=[]){let t=[];return W.Children.forEach(n,(r,i)=>{if(!W.isValidElement(r))return;let s=[...e,i];if(r.type===W.Fragment){t.push.apply(t,U2(r.props.children,s));return}Lr(r.type===br,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=U2(r.props.children,s)),t.push(o)}),t}var sb="get",ob="application/x-www-form-urlencoded";function SA(n){return n!=null&&typeof n.tagName=="string"}function _X(n){return SA(n)&&n.tagName.toLowerCase()==="button"}function xX(n){return SA(n)&&n.tagName.toLowerCase()==="form"}function wX(n){return SA(n)&&n.tagName.toLowerCase()==="input"}function bX(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function EX(n,e){return n.button===0&&(!e||e==="_self")&&!bX(n)}var Tw=null;function AX(){if(Tw===null)try{new FormData(document.createElement("form"),0),Tw=!1}catch{Tw=!0}return Tw}var SX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function LT(n){return n!=null&&!SX.has(n)?(Il(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ob}"`),null):n}function TX(n,e){let t,r,i,s,o;if(xX(n)){let a=n.getAttribute("action");r=a?Uc(a,e):null,t=n.getAttribute("method")||sb,i=LT(n.getAttribute("enctype"))||ob,s=new FormData(n)}else if(_X(n)||wX(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Uc(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||sb,i=LT(n.getAttribute("formenctype"))||LT(a.getAttribute("enctype"))||ob,s=new FormData(a,n),!AX()){let{name:u,type:c,value:h}=n;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,h)}}else{if(SA(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sb,r=null,i=ob,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function XP(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function CX(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Uc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function MX(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RX(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IX(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await MX(s,t);return o.links?o.links():[]}return[]}));return DX(r.flat(1).filter(RX).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function tN(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function PX(n,e,{includeHydrateFallback:t}={}){return kX(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function kX(n){return[...new Set(n)]}function OX(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function DX(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(OX(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function E9(){let n=W.useContext(Dv);return XP(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function NX(){let n=W.useContext(AA);return XP(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var YP=W.createContext(void 0);YP.displayName="FrameworkContext";function A9(){let n=W.useContext(YP);return XP(n,"You must render this element inside a <HydratedRouter> element"),n}function LX(n,e){let t=W.useContext(YP),[r,i]=W.useState(!1),[s,o]=W.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,f=W.useRef(null);W.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=v=>{v.forEach(b=>{o(b.isIntersecting)})},_=new IntersectionObserver(x,{threshold:.5});return f.current&&_.observe(f.current),()=>{_.disconnect()}}},[n]),W.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,f,{}]:[s,f,{onFocus:Gy(a,p),onBlur:Gy(l,g),onMouseEnter:Gy(u,p),onMouseLeave:Gy(c,g),onTouchStart:Gy(h,p)}]:[!1,f,{}]}function Gy(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function BX({page:n,...e}){let{router:t}=E9(),r=W.useMemo(()=>f9(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?W.createElement(UX,{page:n,matches:r,...e}):null}function FX(n){let{manifest:e,routeModules:t}=A9(),[r,i]=W.useState([]);return W.useEffect(()=>{let s=!1;return IX(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function UX({page:n,matches:e,...t}){let r=Au(),{manifest:i,routeModules:s}=A9(),{basename:o}=E9(),{loaderData:a,matches:l}=NX(),u=W.useMemo(()=>tN(n,e,l,i,r,"data"),[n,e,l,i,r]),c=W.useMemo(()=>tN(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=W.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let g=new Set,x=!1;if(e.forEach(v=>{var E;let b=i.routes[v.route.id];!b||!b.hasLoader||(!u.some(S=>S.route.id===v.route.id)&&v.route.id in a&&((E=s[v.route.id])!=null&&E.shouldRevalidate)||b.hasClientLoader?x=!0:g.add(v.route.id))}),g.size===0)return[];let _=CX(n,o,"data");return x&&g.size>0&&_.searchParams.set("_routes",e.filter(v=>g.has(v.route.id)).map(v=>v.route.id).join(",")),[_.pathname+_.search]},[o,a,r,i,u,e,n,s]),f=W.useMemo(()=>PX(c,i),[c,i]),p=FX(c);return W.createElement(W.Fragment,null,h.map(g=>W.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...t})),f.map(g=>W.createElement("link",{key:g,rel:"modulepreload",href:g,...t})),p.map(({key:g,link:x})=>W.createElement("link",{key:g,nonce:t.nonce,...x})))}function jX(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var S9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{S9&&(window.__reactRouterVersion="7.9.4")}catch{}function VX({basename:n,children:e,window:t}){let r=W.useRef();r.current==null&&(r.current=CJ({window:t,v5Compat:!0}));let i=r.current,[s,o]=W.useState({action:i.action,location:i.location}),a=W.useCallback(l=>{W.startTransition(()=>o(l))},[o]);return W.useLayoutEffect(()=>i.listen(a),[i,a]),W.createElement(vX,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var T9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ua=W.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},p){let{basename:g}=W.useContext(Bl),x=typeof u=="string"&&T9.test(u),_,v=!1;if(typeof u=="string"&&x&&(_=u,S9))try{let O=new URL(window.location.href),R=u.startsWith("//")?new URL(O.protocol+u):new URL(u),N=Uc(R.pathname,g);R.origin===O.origin&&N!=null?u=N+R.search+R.hash:v=!0}catch{Il(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=eX(u,{relative:i}),[E,S,C]=LX(r,f),D=qX(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function M(O){e&&e(O),O.defaultPrevented||D(O)}let P=W.createElement("a",{...f,...C,href:_||b,onClick:v||s?e:M,ref:jX(p,S),target:l,"data-discover":!x&&t==="render"?"true":void 0});return E&&!x?W.createElement(W.Fragment,null,P,W.createElement(BX,{page:b})):P});ua.displayName="Link";var zX=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let h=$_(o,{relative:u.relative}),f=Au(),p=W.useContext(AA),{navigator:g,basename:x}=W.useContext(Bl),_=p!=null&&XX(h)&&a===!0,v=g.encodeLocation?g.encodeLocation(h).pathname:h.pathname,b=f.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&x&&(E=Uc(E,x)||E);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=b===v||!i&&b.startsWith(v)&&b.charAt(S)==="/",D=E!=null&&(E===v||!i&&E.startsWith(v)&&E.charAt(v.length)==="/"),M={isActive:C,isPending:D,isTransitioning:_},P=C?e:void 0,O;typeof r=="function"?O=r(M):O=[r,C?"active":null,D?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof s=="function"?s(M):s;return W.createElement(ua,{...u,"aria-current":P,className:O,ref:c,style:R,to:o,viewTransition:a},typeof l=="function"?l(M):l)});zX.displayName="NavLink";var HX=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=sb,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},p)=>{let g=KX(),x=JX(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&T9.test(a),b=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let S=E.nativeEvent.submitter,C=(S==null?void 0:S.getAttribute("formmethod"))||o;g(S||E.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:h})};return W.createElement("form",{ref:p,method:_,action:x,onSubmit:r?l:b,...f,"data-discover":!v&&n==="render"?"true":void 0})});HX.displayName="Form";function GX(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C9(n){let e=W.useContext(Dv);return Lr(e,GX(n)),e}function qX(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=Of(),l=Au(),u=$_(n,{relative:s});return W.useCallback(c=>{if(EX(c,e)){c.preventDefault();let h=t!==void 0?t:a_(l)===a_(u);a(n,{replace:h,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}var WX=0,$X=()=>`__${String(++WX)}__`;function KX(){let{router:n}=C9("useSubmit"),{basename:e}=W.useContext(Bl),t=dX();return W.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=TX(r,e);if(i.navigate===!1){let c=i.fetcherKey||$X();await n.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function JX(n,{relative:e}={}){let{basename:t}=W.useContext(Bl),r=W.useContext(Ua);Lr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...$_(n||".",{relative:e})},o=Au();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let c=a.toString();s.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Pc([t,s.pathname])),a_(s)}function XX(n,{relative:e}={}){let t=W.useContext(g9);Lr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=C9("useViewTransitionState"),i=$_(n,{relative:e});if(!t.isTransitioning)return!1;let s=Uc(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Uc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return kb(i.pathname,o)!=null||kb(i.pathname,s)!=null}var M9=GP();const YX=Ll(M9),QX=()=>{};var nN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZX=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},I9={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(t[c],t[h],t[f],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(R9(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZX(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const h=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new eY;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tY=function(n){const e=R9(n);return I9.encodeByteArray(e,!0)},Ob=function(n){return tY(n).replace(/\./g,"")},P9=function(n){try{return I9.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rY=()=>nY().__FIREBASE_DEFAULTS__,iY=()=>{if(typeof process>"u"||typeof nN>"u")return;const n=nN.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sY=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&P9(n[1]);return e&&JSON.parse(e)},TA=()=>{try{return QX()||rY()||iY()||sY()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},k9=n=>{var e,t;return(t=(e=TA())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},O9=n=>{const e=k9(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},D9=()=>{var n;return(n=TA())===null||n===void 0?void 0:n.config},N9=n=>{var e;return(e=TA())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oY=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QP(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ob(JSON.stringify(t)),Ob(JSON.stringify(o)),""].join(".")}const k0={};function aY(){const n={prod:[],emulator:[]};for(const e of Object.keys(k0))k0[e]?n.emulator.push(e):n.prod.push(e);return n}function lY(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let rN=!1;function ZP(n,e){if(typeof window>"u"||typeof document>"u"||!Yp(window.location.host)||k0[n]===e||k0[n]||rN)return;k0[n]=e;function t(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=aY().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{rN=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=lY(r),p=t("text"),g=document.getElementById(p)||document.createElement("span"),x=t("learnmore"),_=document.getElementById(x)||document.createElement("a"),v=t("preprendIcon"),b=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),c(_,x);const S=u();l(b,v),E.append(b,g,_,S),document.body.appendChild(E)}s?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uY(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ks())}function cY(){var n;const e=(n=TA())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hY(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fY(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dY(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pY(){const n=Ks();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mY(){return!cY()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gY(){try{return typeof indexedDB=="object"}catch{return!1}}function vY(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY="FirebaseError";class Su extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yY,Object.setPrototypeOf(this,Su.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K_.prototype.create)}}class K_{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_Y(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Su(i,a,r)}}function _Y(n,e){return n.replace(xY,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xY=/\{\$([^}]+)}/g;function wY(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ip(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(iN(s)&&iN(o)){if(!Ip(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function iN(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function y0(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _0(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bY(n,e){const t=new EY(n,e);return t.subscribe.bind(t)}class EY{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AY(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=BT),i.error===void 0&&(i.error=BT),i.complete===void 0&&(i.complete=BT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AY(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function BT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n){return n&&n._delegate?n._delegate:n}class yf{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SY=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new oY;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CY(e))try{this.getOrInitializeService({instanceIdentifier:Jd})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Jd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jd){return this.instances.has(e)}getOptions(e=Jd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TY(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jd){return this.component?this.component.multipleInstances?e:Jd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function TY(n){return n===Jd?void 0:n}function CY(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SY(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Un;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Un||(Un={}));const RY={debug:Un.DEBUG,verbose:Un.VERBOSE,info:Un.INFO,warn:Un.WARN,error:Un.ERROR,silent:Un.SILENT},IY=Un.INFO,PY={[Un.DEBUG]:"log",[Un.VERBOSE]:"log",[Un.INFO]:"info",[Un.WARN]:"warn",[Un.ERROR]:"error"},kY=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=PY[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ek{constructor(e){this.name=e,this._logLevel=IY,this._logHandler=kY,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Un))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RY[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Un.DEBUG,...e),this._logHandler(this,Un.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Un.VERBOSE,...e),this._logHandler(this,Un.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Un.INFO,...e),this._logHandler(this,Un.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Un.WARN,...e),this._logHandler(this,Un.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Un.ERROR,...e),this._logHandler(this,Un.ERROR,...e)}}const OY=(n,e)=>e.some(t=>n instanceof t);let sN,oN;function DY(){return sN||(sN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NY(){return oN||(oN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B9=new WeakMap,j2=new WeakMap,F9=new WeakMap,FT=new WeakMap,tk=new WeakMap;function LY(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(cf(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&B9.set(t,n)}).catch(()=>{}),tk.set(e,n),e}function BY(n){if(j2.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});j2.set(n,e)}let V2={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return j2.get(n);if(e==="objectStoreNames")return n.objectStoreNames||F9.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cf(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FY(n){V2=n(V2)}function UY(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(UT(this),e,...t);return F9.set(r,e.sort?e.sort():[e]),cf(r)}:NY().includes(n)?function(...e){return n.apply(UT(this),e),cf(B9.get(this))}:function(...e){return cf(n.apply(UT(this),e))}}function jY(n){return typeof n=="function"?UY(n):(n instanceof IDBTransaction&&BY(n),OY(n,DY())?new Proxy(n,V2):n)}function cf(n){if(n instanceof IDBRequest)return LY(n);if(FT.has(n))return FT.get(n);const e=jY(n);return e!==n&&(FT.set(n,e),tk.set(e,n)),e}const UT=n=>tk.get(n);function VY(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=cf(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cf(o.result),l.oldVersion,l.newVersion,cf(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const zY=["get","getKey","getAll","getAllKeys","count"],HY=["put","add","delete","clear"],jT=new Map;function aN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(jT.get(e))return jT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=HY.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zY.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return jT.set(e,s),s}FY(n=>({...n,get:(e,t,r)=>aN(e,t)||n.get(e,t,r),has:(e,t)=>!!aN(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qY(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qY(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const z2="@firebase/app",lN="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new ek("@firebase/app"),WY="@firebase/app-compat",$Y="@firebase/analytics-compat",KY="@firebase/analytics",JY="@firebase/app-check-compat",XY="@firebase/app-check",YY="@firebase/auth",QY="@firebase/auth-compat",ZY="@firebase/database",eQ="@firebase/data-connect",tQ="@firebase/database-compat",nQ="@firebase/functions",rQ="@firebase/functions-compat",iQ="@firebase/installations",sQ="@firebase/installations-compat",oQ="@firebase/messaging",aQ="@firebase/messaging-compat",lQ="@firebase/performance",uQ="@firebase/performance-compat",cQ="@firebase/remote-config",hQ="@firebase/remote-config-compat",fQ="@firebase/storage",dQ="@firebase/storage-compat",pQ="@firebase/firestore",mQ="@firebase/ai",gQ="@firebase/firestore-compat",vQ="firebase",yQ="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="[DEFAULT]",_Q={[z2]:"fire-core",[WY]:"fire-core-compat",[KY]:"fire-analytics",[$Y]:"fire-analytics-compat",[XY]:"fire-app-check",[JY]:"fire-app-check-compat",[YY]:"fire-auth",[QY]:"fire-auth-compat",[ZY]:"fire-rtdb",[eQ]:"fire-data-connect",[tQ]:"fire-rtdb-compat",[nQ]:"fire-fn",[rQ]:"fire-fn-compat",[iQ]:"fire-iid",[sQ]:"fire-iid-compat",[oQ]:"fire-fcm",[aQ]:"fire-fcm-compat",[lQ]:"fire-perf",[uQ]:"fire-perf-compat",[cQ]:"fire-rc",[hQ]:"fire-rc-compat",[fQ]:"fire-gcs",[dQ]:"fire-gcs-compat",[pQ]:"fire-fst",[gQ]:"fire-fst-compat",[mQ]:"fire-vertex","fire-js":"fire-js",[vQ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=new Map,xQ=new Map,G2=new Map;function uN(n,e){try{n.container.addComponent(e)}catch(t){jc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Pp(n){const e=n.name;if(G2.has(e))return jc.debug(`There were multiple attempts to register component ${e}.`),!1;G2.set(e,n);for(const t of Db.values())uN(t,n);for(const t of xQ.values())uN(t,n);return!0}function CA(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ta(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hf=new K_("app","Firebase",wQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=yQ;function U9(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:H2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw hf.create("bad-app-name",{appName:String(i)});if(t||(t=D9()),!t)throw hf.create("no-options");const s=Db.get(i);if(s){if(Ip(t,s.options)&&Ip(r,s.config))return s;throw hf.create("duplicate-app",{appName:i})}const o=new MY(i);for(const l of G2.values())o.addComponent(l);const a=new bQ(t,r,o);return Db.set(i,a),a}function nk(n=H2){const e=Db.get(n);if(!e&&n===H2&&D9())return U9();if(!e)throw hf.create("no-app",{appName:n});return e}function ou(n,e,t){var r;let i=(r=_Q[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jc.warn(a.join(" "));return}Pp(new yf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ="firebase-heartbeat-database",AQ=1,l_="firebase-heartbeat-store";let VT=null;function j9(){return VT||(VT=VY(EQ,AQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(l_)}catch(t){console.warn(t)}}}}).catch(n=>{throw hf.create("idb-open",{originalErrorMessage:n.message})})),VT}async function SQ(n){try{const t=(await j9()).transaction(l_),r=await t.objectStore(l_).get(V9(n));return await t.done,r}catch(e){if(e instanceof Su)jc.warn(e.message);else{const t=hf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jc.warn(t.message)}}}async function cN(n,e){try{const r=(await j9()).transaction(l_,"readwrite");await r.objectStore(l_).put(e,V9(n)),await r.done}catch(t){if(t instanceof Su)jc.warn(t.message);else{const r=hf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});jc.warn(r.message)}}}function V9(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQ=1024,CQ=30;class MQ{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IQ(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>CQ){const o=PQ(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hN(),{heartbeatsToSend:r,unsentEntries:i}=RQ(this._heartbeatsCache.heartbeats),s=Ob(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return jc.warn(t),""}}}function hN(){return new Date().toISOString().substring(0,10)}function RQ(n,e=TQ){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fN(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IQ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gY()?vY().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SQ(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return cN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return cN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fN(n){return Ob(JSON.stringify({version:2,heartbeats:n})).length}function PQ(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kQ(n){Pp(new yf("platform-logger",e=>new GY(e),"PRIVATE")),Pp(new yf("heartbeat",e=>new MQ(e),"PRIVATE")),ou(z2,lN,n),ou(z2,lN,"esm2017"),ou("fire-js","")}kQ("");var q2=function(n,e){return q2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},q2(n,e)};function z9(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");q2(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Nb=function(){return Nb=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Nb.apply(this,arguments)};function Xc(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function H9(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function G9(n,e){return function(t,r){e(t,r,n)}}function q9(n,e,t,r,i,s){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&n?r.static?n:n.prototype:null,c=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,f=!1,p=t.length-1;p>=0;p--){var g={};for(var x in r)g[x]=x==="access"?{}:r[x];for(var x in r.access)g.access[x]=r.access[x];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(v||null))};var _=(0,t[p])(a==="accessor"?{get:c.get,set:c.set}:c[l],g);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(c.get=h),(h=o(_.set))&&(c.set=h),(h=o(_.init))&&i.unshift(h)}else(h=o(_))&&(a==="field"?i.unshift(h):c[l]=h)}u&&Object.defineProperty(u,r.name,c),f=!0}function W9(n,e,t){for(var r=arguments.length>2,i=0;i<e.length;i++)t=r?e[i].call(n,t):e[i].call(n);return r?t:void 0}function $9(n){return typeof n=="symbol"?n:"".concat(n)}function K9(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function J9(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Rt(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function X9(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var MA=Object.create?(function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}):(function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]});function Y9(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&MA(e,n,t)}function Lb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rk(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Q9(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(rk(arguments[e]));return n}function Z9(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function e6(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}function ov(n){return this instanceof ov?(this.v=n,this):new ov(n)}function t6(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){r[p]&&(i[p]=function(x){return new Promise(function(_,v){s.push([p,x,_,v])>1||l(p,x)})},g&&(i[p]=g(i[p])))}function l(p,g){try{u(r[p](g))}catch(x){f(s[0][3],x)}}function u(p){p.value instanceof ov?Promise.resolve(p.value.v).then(c,h):f(s[0][2],p)}function c(p){l("next",p)}function h(p){l("throw",p)}function f(p,g){p(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function n6(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:ov(n[i](o)),done:!1}:s?s(o):o}:s}}function r6(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Lb=="function"?Lb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function i6(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var OQ=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},W2=function(n){return W2=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},W2(n)};function s6(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=W2(n),r=0;r<t.length;r++)t[r]!=="default"&&MA(e,n,t[r]);return OQ(e,n),e}function o6(n){return n&&n.__esModule?n:{default:n}}function a6(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}function l6(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function u6(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function c6(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),n.stack.push({value:e,dispose:r,async:t})}else t&&n.stack.push({async:!0});return e}var DQ=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=n,r.suppressed=e,r};function h6(n){function e(s){n.error=n.hasError?new DQ(s,n.error,"An error was suppressed during disposal."):s,n.hasError=!0}var t,r=0;function i(){for(;t=n.stack.pop();)try{if(!t.async&&r===1)return r=0,n.stack.push(t),Promise.resolve().then(i);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return i()}function f6(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?t:i+s+"."+o.toLowerCase()+"js"}):n}const NQ={__extends:z9,__assign:Nb,__rest:Xc,__decorate:H9,__param:G9,__esDecorate:q9,__runInitializers:W9,__propKey:$9,__setFunctionName:K9,__metadata:J9,__awaiter:Rt,__generator:X9,__createBinding:MA,__exportStar:Y9,__values:Lb,__read:rk,__spread:Q9,__spreadArrays:Z9,__spreadArray:e6,__await:ov,__asyncGenerator:t6,__asyncDelegator:n6,__asyncValues:r6,__makeTemplateObject:i6,__importStar:s6,__importDefault:o6,__classPrivateFieldGet:a6,__classPrivateFieldSet:l6,__classPrivateFieldIn:u6,__addDisposableResource:c6,__disposeResources:h6,__rewriteRelativeImportExtension:f6},LQ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:c6,get __assign(){return Nb},__asyncDelegator:n6,__asyncGenerator:t6,__asyncValues:r6,__await:ov,__awaiter:Rt,__classPrivateFieldGet:a6,__classPrivateFieldIn:u6,__classPrivateFieldSet:l6,__createBinding:MA,__decorate:H9,__disposeResources:h6,__esDecorate:q9,__exportStar:Y9,__extends:z9,__generator:X9,__importDefault:o6,__importStar:s6,__makeTemplateObject:i6,__metadata:J9,__param:G9,__propKey:$9,__read:rk,__rest:Xc,__rewriteRelativeImportExtension:f6,__runInitializers:W9,__setFunctionName:K9,__spread:Q9,__spreadArray:e6,__spreadArrays:Z9,__values:Lb,default:NQ},Symbol.toStringTag,{value:"Module"}));function d6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BQ=d6,p6=new K_("auth","Firebase",d6());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new ek("@firebase/auth");function FQ(n,...e){Bb.logLevel<=Un.WARN&&Bb.warn(`Auth (${Qp}): ${n}`,...e)}function ab(n,...e){Bb.logLevel<=Un.ERROR&&Bb.error(`Auth (${Qp}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(n,...e){throw ik(n,...e)}function au(n,...e){return ik(n,...e)}function m6(n,e,t){const r=Object.assign(Object.assign({},BQ()),{[e]:t});return new K_("auth","Firebase",r).create(e,{appName:n.name})}function kc(n){return m6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ik(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return p6.create(n,...e)}function en(n,e,...t){if(!n)throw ik(e,...t)}function Cc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ab(e),new Error(e)}function Vc(n,e){n||Cc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UQ(){return dN()==="http:"||dN()==="https:"}function dN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UQ()||fY()||"connection"in navigator)?navigator.onLine:!0}function VQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vc(t>e,"Short delay should be less than long delay!"),this.isMobile=uY()||dY()}get(){return jQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n,e){Vc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GQ=new X_(3e4,6e4);function Yc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fl(n,e,t,r,i={}){return v6(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=J_(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return hY()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Yp(n.emulatorConfig.host)&&(u.credentials="include"),g6.fetch()(await y6(n,n.config.apiHost,t,a),u)})}async function v6(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},zQ),e);try{const i=new WQ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Cw(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cw(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Cw(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Cw(n,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw m6(n,c,u);Pl(n,c)}}catch(i){if(i instanceof Su)throw i;Pl(n,"network-request-failed",{message:String(i)})}}async function Y_(n,e,t,r,i={}){const s=await Fl(n,e,t,r,i);return"mfaPendingCredential"in s&&Pl(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function y6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,o=s.config.emulator?sk(n.config,i):`${n.config.apiScheme}://${i}`;return HQ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function qQ(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(au(this.auth,"network-request-failed")),GQ.get())})}}function Cw(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=au(n,e,r);return i.customData._tokenResponse=t,i}function pN(n){return n!==void 0&&n.enterprise!==void 0}class $Q{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qQ(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KQ(n,e){return Fl(n,"GET","/v2/recaptchaConfig",Yc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JQ(n,e){return Fl(n,"POST","/v1/accounts:delete",e)}async function Fb(n,e){return Fl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _6(n,e=!1){const t=Li(n),r=await t.getIdToken(e),i=ok(r);en(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:O0(zT(i.auth_time)),issuedAtTime:O0(zT(i.iat)),expirationTime:O0(zT(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zT(n){return Number(n)*1e3}function ok(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ab("JWT malformed, contained fewer than 3 sections"),null;try{const i=P9(t);return i?JSON.parse(i):(ab("Failed to decode base64 JWT payload"),null)}catch(i){return ab("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function mN(n){const e=ok(n);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Su&&XQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=O0(this.lastLoginAt),this.creationTime=O0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ub(n){var e;const t=n.auth,r=await n.getIdToken(),i=await kp(n,Fb(t,{idToken:r}));en(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?x6(s.providerUserInfo):[],a=ZQ(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new K2(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,h)}async function QQ(n){const e=Li(n);await Ub(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function x6(n){return n.map(e=>{var{providerId:t}=e,r=Xc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eZ(n,e){const t=await v6(n,{},async()=>{const r=J_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await y6(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Yp(n.emulatorConfig.host)&&(l.credentials="include"),g6.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tZ(n,e){return Fl(n,"POST","/v2/accounts:revokeToken",Yc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){en(e.length!==0,"internal-error");const t=mN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await eZ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Jg;return r&&(en(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(en(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(en(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jg,this.toJSON())}_performRefresh(){return Cc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n,e){en(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Tl{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Xc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new K2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await kp(this,this.stsTokenManager.getToken(this.auth,e));return en(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _6(this,e)}reload(){return QQ(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ub(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ta(this.auth.app))return Promise.reject(kc(this.auth));const e=await this.getIdToken();return await kp(this,JQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,c;const h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=t.createdAt)!==null&&u!==void 0?u:void 0,b=(c=t.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:S,isAnonymous:C,providerData:D,stsTokenManager:M}=t;en(E&&M,e,"internal-error");const P=Jg.fromJSON(this.name,M);en(typeof E=="string",e,"internal-error"),Lh(h,e.name),Lh(f,e.name),en(typeof S=="boolean",e,"internal-error"),en(typeof C=="boolean",e,"internal-error"),Lh(p,e.name),Lh(g,e.name),Lh(x,e.name),Lh(_,e.name),Lh(v,e.name),Lh(b,e.name);const O=new Tl({uid:E,auth:e,email:f,emailVerified:S,displayName:h,isAnonymous:C,photoURL:g,phoneNumber:p,tenantId:x,stsTokenManager:P,createdAt:v,lastLoginAt:b});return D&&Array.isArray(D)&&(O.providerData=D.map(R=>Object.assign({},R))),_&&(O._redirectEventId=_),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new Jg;i.updateFromServerResponse(t);const s=new Tl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ub(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];en(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?x6(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Jg;a.updateFromIdToken(r);const l=new Tl({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new K2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new Map;function Mc(n){Vc(n instanceof Function,"Expected a class definition");let e=gN.get(n);return e?(Vc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gN.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}w6.type="NONE";const vN=w6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(n,e,t){return`firebase:${n}:${e}:${t}`}class Xg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=lb(this.userKey,i.apiKey,s),this.fullPersistenceKey=lb("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fb(this.auth,{idToken:e}).catch(()=>{});return t?Tl._fromGetAccountInfoResponse(this.auth,t,e):null}return Tl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Xg(Mc(vN),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Mc(vN);const o=lb(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const c=await u._get(o);if(c){let h;if(typeof c=="string"){const f=await Fb(e,{idToken:c}).catch(()=>{});if(!f)break;h=await Tl._fromGetAccountInfoResponse(e,f,c)}else h=Tl._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Xg(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Xg(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C6(e))return"Blackberry";if(M6(e))return"Webos";if(E6(e))return"Safari";if((e.includes("chrome/")||A6(e))&&!e.includes("edge/"))return"Chrome";if(T6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function b6(n=Ks()){return/firefox\//i.test(n)}function E6(n=Ks()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A6(n=Ks()){return/crios\//i.test(n)}function S6(n=Ks()){return/iemobile/i.test(n)}function T6(n=Ks()){return/android/i.test(n)}function C6(n=Ks()){return/blackberry/i.test(n)}function M6(n=Ks()){return/webos/i.test(n)}function ak(n=Ks()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nZ(n=Ks()){var e;return ak(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rZ(){return pY()&&document.documentMode===10}function R6(n=Ks()){return ak(n)||T6(n)||M6(n)||C6(n)||/windows phone/i.test(n)||S6(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e=[]){let t;switch(n){case"Browser":t=yN(Ks());break;case"Worker":t=`${yN(Ks())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sZ(n,e={}){return Fl(n,"GET","/v2/passwordPolicy",Yc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ=6;class aZ{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:oZ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _N(this),this.idTokenSubscription=new _N(this),this.beforeStateQueue=new iZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mc(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Xg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fb(this,{idToken:e}),r=await Tl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ta(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ub(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ta(this.app))return Promise.reject(kc(this));const t=e?Li(e):null;return t&&en(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ta(this.app)?Promise.reject(kc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ta(this.app)?Promise.reject(kc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sZ(this),t=new aZ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new K_("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await tZ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mc(e)||this._popupRedirectResolver;en(t,this,"argument-error"),this.redirectPersistenceManager=await Xg.create(this,[Mc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(ta(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FQ(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Zp(n){return Li(n)}class _N{constructor(e){this.auth=e,this.observer=null,this.addObserver=bY(t=>this.observer=t)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RA={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uZ(n){RA=n}function P6(n){return RA.loadJS(n)}function cZ(){return RA.recaptchaEnterpriseScript}function hZ(){return RA.gapiScript}function fZ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class dZ{constructor(){this.enterprise=new pZ}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pZ{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const mZ="recaptcha-enterprise",k6="NO_RECAPTCHA";class gZ{constructor(e){this.type=mZ,this.auth=Zp(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{KQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new $Q(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;pN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(k6)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dZ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&pN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=cZ();l.length!==0&&(l+=a),P6(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function xN(n,e,t,r=!1,i=!1){const s=new gZ(n);let o;if(i)o=k6;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function J2(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await xN(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await xN(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(n,e){const t=CA(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Ip(s,e??{}))return i;Pl(i,"already-initialized")}return t.initialize({options:e})}function yZ(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Mc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _Z(n,e,t){const r=Zp(n);en(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=O6(e),{host:o,port:a}=xZ(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){en(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),en(Ip(u,r.config.emulator)&&Ip(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Yp(o)?(QP(`${s}//${o}${l}`),ZP("Auth",!0)):wZ()}function O6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function xZ(n){const e=O6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wN(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wN(o)}}}function wN(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wZ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Cc("not implemented")}_getIdTokenResponse(e){return Cc("not implemented")}_linkToIdToken(e,t){return Cc("not implemented")}_getReauthenticationResolver(e){return Cc("not implemented")}}async function bZ(n,e){return Fl(n,"POST","/v1/accounts:update",e)}async function EZ(n,e){return Fl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AZ(n,e){return Y_(n,"POST","/v1/accounts:signInWithPassword",Yc(n,e))}async function SZ(n,e){return Fl(n,"POST","/v1/accounts:sendOobCode",Yc(n,e))}async function TZ(n,e){return SZ(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CZ(n,e){return Y_(n,"POST","/v1/accounts:signInWithEmailLink",Yc(n,e))}async function MZ(n,e){return Y_(n,"POST","/v1/accounts:signInWithEmailLink",Yc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends lk{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new u_(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new u_(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J2(e,t,"signInWithPassword",AZ);case"emailLink":return CZ(e,{email:this._email,oobCode:this._password});default:Pl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J2(e,r,"signUpPassword",EZ);case"emailLink":return MZ(e,{idToken:t,email:this._email,oobCode:this._password});default:Pl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(n,e){return Y_(n,"POST","/v1/accounts:signInWithIdp",Yc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RZ="http://localhost";class Op extends lk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Op(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Xc(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Op(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Yg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Yg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yg(e,t)}buildRequest(){const e={requestUri:RZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=J_(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IZ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PZ(n){const e=y0(_0(n)).link,t=e?y0(_0(e)).deep_link_id:null,r=y0(_0(n)).deep_link_id;return(r?y0(_0(r)).link:null)||r||t||e||n}class uk{constructor(e){var t,r,i,s,o,a;const l=y0(_0(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=IZ((i=l.mode)!==null&&i!==void 0?i:null);en(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=PZ(e);try{return new uk(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.providerId=em.PROVIDER_ID}static credential(e,t){return u_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=uk.parseLink(t);return en(r,"argument-error"),u_._fromEmailAndCode(e,r.code,r.tenantId)}}em.PROVIDER_ID="password";em.EMAIL_PASSWORD_SIGN_IN_METHOD="password";em.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_ extends D6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends Q_{constructor(){super("facebook.com")}static credential(e){return Op._fromParams({providerId:Zh.PROVIDER_ID,signInMethod:Zh.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zh.credentialFromTaggedObject(e)}static credentialFromError(e){return Zh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zh.credential(e.oauthAccessToken)}catch{return null}}}Zh.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Q_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Op._fromParams({providerId:ef.PROVIDER_ID,signInMethod:ef.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ef.credentialFromTaggedObject(e)}static credentialFromError(e){return ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ef.credential(t,r)}catch{return null}}}ef.GOOGLE_SIGN_IN_METHOD="google.com";ef.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Q_{constructor(){super("github.com")}static credential(e){return Op._fromParams({providerId:tf.PROVIDER_ID,signInMethod:tf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tf.credentialFromTaggedObject(e)}static credentialFromError(e){return tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tf.credential(e.oauthAccessToken)}catch{return null}}}tf.GITHUB_SIGN_IN_METHOD="github.com";tf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Q_{constructor(){super("twitter.com")}static credential(e,t){return Op._fromParams({providerId:nf.PROVIDER_ID,signInMethod:nf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nf.credentialFromTaggedObject(e)}static credentialFromError(e){return nf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return nf.credential(t,r)}catch{return null}}}nf.TWITTER_SIGN_IN_METHOD="twitter.com";nf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kZ(n,e){return Y_(n,"POST","/v1/accounts:signUp",Yc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Tl._fromIdTokenResponse(e,r,i),o=bN(r);return new Dp({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=bN(r);return new Dp({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function bN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Su{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jb.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new jb(e,t,r,i)}}function N6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?jb._fromErrorAndOperation(n,s,e,r):s})}async function OZ(n,e,t=!1){const r=await kp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dp._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(n,e,t=!1){const{auth:r}=n;if(ta(r.app))return Promise.reject(kc(r));const i="reauthenticate";try{const s=await kp(n,N6(r,i,e,n),t);en(s.idToken,r,"internal-error");const o=ok(s.idToken);en(o,r,"internal-error");const{sub:a}=o;return en(n.uid===a,r,"user-mismatch"),Dp._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pl(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B6(n,e,t=!1){if(ta(n.app))return Promise.reject(kc(n));const r="signIn",i=await N6(n,r,e),s=await Dp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function DZ(n,e){return B6(Zp(n),e)}async function NZ(n,e){return L6(Li(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(n){const e=Zp(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LZ(n,e,t){if(ta(n.app))return Promise.reject(kc(n));const r=Zp(n),o=await J2(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kZ).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&F6(n),l}),a=await Dp._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function BZ(n,e,t){return ta(n.app)?Promise.reject(kc(n)):DZ(Li(n),em.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&F6(n),r})}async function FZ(n,e){const t=Li(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:s}=await TZ(t.auth,i);s!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UZ(n,e){return Fl(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Li(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await kp(r,UZ(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function jZ(n,e){return VZ(Li(n),null,e)}async function VZ(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.password=t);const o=await kp(n,bZ(r,s));await n._updateTokensIfNecessary(o,!0)}function zZ(n,e,t,r){return Li(n).onIdTokenChanged(e,t,r)}function HZ(n,e,t){return Li(n).beforeAuthStateChanged(e,t)}const Vb="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vb,"1"),this.storage.removeItem(Vb),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ=1e3,qZ=10;class V6 extends j6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rZ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qZ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},GZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}V6.type="LOCAL";const WZ=V6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6 extends j6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}z6.type="SESSION";const H6=z6;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Z(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new IA(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await $Z(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}IA.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=ck("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){return window}function JZ(n){lu().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(){return typeof lu().WorkerGlobalScope<"u"&&typeof lu().importScripts=="function"}async function XZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YZ(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function QZ(){return G6()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6="firebaseLocalStorageDb",ZZ=1,zb="firebaseLocalStorage",W6="fbase_key";class Z_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function PA(n,e){return n.transaction([zb],e?"readwrite":"readonly").objectStore(zb)}function eee(){const n=indexedDB.deleteDatabase(q6);return new Z_(n).toPromise()}function X2(){const n=indexedDB.open(q6,ZZ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zb,{keyPath:W6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zb)?e(r):(r.close(),await eee(),e(await X2()))})})}async function EN(n,e,t){const r=PA(n,!0).put({[W6]:e,value:t});return new Z_(r).toPromise()}async function tee(n,e){const t=PA(n,!1).get(e),r=await new Z_(t).toPromise();return r===void 0?null:r.value}function AN(n,e){const t=PA(n,!0).delete(e);return new Z_(t).toPromise()}const nee=800,ree=3;class $6{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X2(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>ree)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IA._getInstance(QZ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XZ(),!this.activeServiceWorker)return;this.sender=new KZ(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await X2();return await EN(e,Vb,"1"),await AN(e,Vb),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>EN(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>tee(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>AN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=PA(i,!1).getAll();return new Z_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$6.type="LOCAL";const iee=$6;new X_(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function see(n,e){return e?Mc(e):(en(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk extends lk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oee(n){return B6(n.auth,new hk(n),n.bypassAuthState)}function aee(n){const{auth:e,user:t}=n;return en(t,e,"internal-error"),L6(t,new hk(n),n.bypassAuthState)}async function lee(n){const{auth:e,user:t}=n;return en(t,e,"internal-error"),OZ(t,new hk(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oee;case"linkViaPopup":case"linkViaRedirect":return lee;case"reauthViaPopup":case"reauthViaRedirect":return aee;default:Pl(this.auth,"internal-error")}}resolve(e){Vc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uee=new X_(2e3,1e4);class Bg extends K6{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bg.currentPopupAction&&Bg.currentPopupAction.cancel(),Bg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return en(e,this.auth,"internal-error"),e}async onExecution(){Vc(this.filter.length===1,"Popup operations only handle one event");const e=ck();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(au(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(au(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(au(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uee.get())};e()}}Bg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cee="pendingRedirect",ub=new Map;class hee extends K6{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ub.get(this.auth._key());if(!e){try{const r=await fee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ub.set(this.auth._key(),e)}return this.bypassAuthState||ub.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fee(n,e){const t=mee(e),r=pee(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function dee(n,e){ub.set(n._key(),e)}function pee(n){return Mc(n._redirectPersistence)}function mee(n){return lb(cee,n.config.apiKey,n.name)}async function gee(n,e,t=!1){if(ta(n.app))return Promise.reject(kc(n));const r=Zp(n),i=see(r,e),o=await new hee(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vee=600*1e3;class yee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_ee(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!J6(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(au(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vee&&this.cachedEventUids.clear(),this.cachedEventUids.has(SN(e))}saveEventToCache(e){this.cachedEventUids.add(SN(e)),this.lastProcessedEventTime=Date.now()}}function SN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function J6({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _ee(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J6(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xee(n,e={}){return Fl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bee=/^https?/;async function Eee(n){if(n.config.emulator)return;const{authorizedDomains:e}=await xee(n);for(const t of e)try{if(Aee(t))return}catch{}Pl(n,"unauthorized-domain")}function Aee(n){const e=$2(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!bee.test(t))return!1;if(wee.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const See=new X_(3e4,6e4);function TN(){const n=lu().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Tee(n){return new Promise((e,t)=>{var r,i,s;function o(){TN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TN(),t(au(n,"network-request-failed"))},timeout:See.get()})}if(!((i=(r=lu().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lu().gapi)===null||s===void 0)&&s.load)o();else{const a=fZ("iframefcb");return lu()[a]=()=>{gapi.load?o():t(au(n,"network-request-failed"))},P6(`${hZ()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw cb=null,e})}let cb=null;function Cee(n){return cb=cb||Tee(n),cb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=new X_(5e3,15e3),Ree="__/auth/iframe",Iee="emulator/auth/iframe",Pee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oee(n){const e=n.config;en(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sk(e,Iee):`https://${n.config.authDomain}/${Ree}`,r={apiKey:e.apiKey,appName:n.name,v:Qp},i=kee.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${J_(r).slice(1)}`}async function Dee(n){const e=await Cee(n),t=lu().gapi;return en(t,n,"internal-error"),e.open({where:document.body,url:Oee(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pee,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=au(n,"network-request-failed"),a=lu().setTimeout(()=>{s(o)},Mee.get());function l(){lu().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nee={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Lee=500,Bee=600,Fee="_blank",Uee="http://localhost";class CN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jee(n,e,t,r=Lee,i=Bee){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Nee),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ks().toLowerCase();t&&(a=A6(u)?Fee:t),b6(u)&&(e=e||Uee,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(nZ(u)&&a!=="_self")return Vee(e||"",a),new CN(null);const h=window.open(e||"",a,c);en(h,n,"popup-blocked");try{h.focus()}catch{}return new CN(h)}function Vee(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zee="__/auth/handler",Hee="emulator/auth/handler",Gee=encodeURIComponent("fac");async function MN(n,e,t,r,i,s){en(n.config.authDomain,n,"auth-domain-config-required"),en(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qp,eventId:i};if(e instanceof D6){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wY(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Q_){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await n._getAppCheckToken(),u=l?`#${Gee}=${encodeURIComponent(l)}`:"";return`${qee(n)}?${J_(a).slice(1)}${u}`}function qee({config:n}){return n.emulator?sk(n,Hee):`https://${n.authDomain}/${zee}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="webStorageSupport";class Wee{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H6,this._completeRedirectFn=gee,this._overrideRedirectResult=dee}async _openPopup(e,t,r,i){var s;Vc((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await MN(e,t,r,$2(),i);return jee(e,o,ck())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await MN(e,t,r,$2(),i);return JZ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Vc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Dee(e),r=new yee(e);return t.register("authEvent",i=>(en(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HT,{type:HT},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[HT];o!==void 0&&t(!!o),Pl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Eee(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return R6()||E6()||ak()}}const $ee=Wee;var RN="@firebase/auth",IN="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kee{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jee(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xee(n){Pp(new yf("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;en(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I6(n)},u=new lZ(r,i,s,l);return yZ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Pp(new yf("auth-internal",e=>{const t=Zp(e.getProvider("auth").getImmediate());return(r=>new Kee(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ou(RN,IN,Jee(n)),ou(RN,IN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yee=300,Qee=N9("authIdTokenMaxAge")||Yee;let PN=null;const Zee=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Qee)return;const i=t==null?void 0:t.token;PN!==i&&(PN=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ex(n=nk()){const e=CA(n,"auth");if(e.isInitialized())return e.getImmediate();const t=vZ(n,{popupRedirectResolver:$ee,persistence:[iee,WZ,H6]}),r=N9("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Zee(s.toString());HZ(t,o,()=>o(t.currentUser)),zZ(t,a=>o(a))}}const i=k9("auth");return i&&_Z(t,`http://${i}`),t}function ete(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}uZ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=au("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",ete().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xee("Browser");var tte="firebase",nte="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ou(tte,nte,"app");var kN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ff,X6;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,P){function O(){}O.prototype=P.prototype,M.D=P.prototype,M.prototype=new O,M.prototype.constructor=M,M.C=function(R,N,U){for(var F=Array(arguments.length-2),J=2;J<arguments.length;J++)F[J-2]=arguments[J];return P.prototype[N].apply(R,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,P,O){O||(O=0);var R=Array(16);if(typeof P=="string")for(var N=0;16>N;++N)R[N]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for(N=0;16>N;++N)R[N]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;P=M.g[0],O=M.g[1],N=M.g[2];var U=M.g[3],F=P+(U^O&(N^U))+R[0]+3614090360&4294967295;P=O+(F<<7&4294967295|F>>>25),F=U+(N^P&(O^N))+R[1]+3905402710&4294967295,U=P+(F<<12&4294967295|F>>>20),F=N+(O^U&(P^O))+R[2]+606105819&4294967295,N=U+(F<<17&4294967295|F>>>15),F=O+(P^N&(U^P))+R[3]+3250441966&4294967295,O=N+(F<<22&4294967295|F>>>10),F=P+(U^O&(N^U))+R[4]+4118548399&4294967295,P=O+(F<<7&4294967295|F>>>25),F=U+(N^P&(O^N))+R[5]+1200080426&4294967295,U=P+(F<<12&4294967295|F>>>20),F=N+(O^U&(P^O))+R[6]+2821735955&4294967295,N=U+(F<<17&4294967295|F>>>15),F=O+(P^N&(U^P))+R[7]+4249261313&4294967295,O=N+(F<<22&4294967295|F>>>10),F=P+(U^O&(N^U))+R[8]+1770035416&4294967295,P=O+(F<<7&4294967295|F>>>25),F=U+(N^P&(O^N))+R[9]+2336552879&4294967295,U=P+(F<<12&4294967295|F>>>20),F=N+(O^U&(P^O))+R[10]+4294925233&4294967295,N=U+(F<<17&4294967295|F>>>15),F=O+(P^N&(U^P))+R[11]+2304563134&4294967295,O=N+(F<<22&4294967295|F>>>10),F=P+(U^O&(N^U))+R[12]+1804603682&4294967295,P=O+(F<<7&4294967295|F>>>25),F=U+(N^P&(O^N))+R[13]+4254626195&4294967295,U=P+(F<<12&4294967295|F>>>20),F=N+(O^U&(P^O))+R[14]+2792965006&4294967295,N=U+(F<<17&4294967295|F>>>15),F=O+(P^N&(U^P))+R[15]+1236535329&4294967295,O=N+(F<<22&4294967295|F>>>10),F=P+(N^U&(O^N))+R[1]+4129170786&4294967295,P=O+(F<<5&4294967295|F>>>27),F=U+(O^N&(P^O))+R[6]+3225465664&4294967295,U=P+(F<<9&4294967295|F>>>23),F=N+(P^O&(U^P))+R[11]+643717713&4294967295,N=U+(F<<14&4294967295|F>>>18),F=O+(U^P&(N^U))+R[0]+3921069994&4294967295,O=N+(F<<20&4294967295|F>>>12),F=P+(N^U&(O^N))+R[5]+3593408605&4294967295,P=O+(F<<5&4294967295|F>>>27),F=U+(O^N&(P^O))+R[10]+38016083&4294967295,U=P+(F<<9&4294967295|F>>>23),F=N+(P^O&(U^P))+R[15]+3634488961&4294967295,N=U+(F<<14&4294967295|F>>>18),F=O+(U^P&(N^U))+R[4]+3889429448&4294967295,O=N+(F<<20&4294967295|F>>>12),F=P+(N^U&(O^N))+R[9]+568446438&4294967295,P=O+(F<<5&4294967295|F>>>27),F=U+(O^N&(P^O))+R[14]+3275163606&4294967295,U=P+(F<<9&4294967295|F>>>23),F=N+(P^O&(U^P))+R[3]+4107603335&4294967295,N=U+(F<<14&4294967295|F>>>18),F=O+(U^P&(N^U))+R[8]+1163531501&4294967295,O=N+(F<<20&4294967295|F>>>12),F=P+(N^U&(O^N))+R[13]+2850285829&4294967295,P=O+(F<<5&4294967295|F>>>27),F=U+(O^N&(P^O))+R[2]+4243563512&4294967295,U=P+(F<<9&4294967295|F>>>23),F=N+(P^O&(U^P))+R[7]+1735328473&4294967295,N=U+(F<<14&4294967295|F>>>18),F=O+(U^P&(N^U))+R[12]+2368359562&4294967295,O=N+(F<<20&4294967295|F>>>12),F=P+(O^N^U)+R[5]+4294588738&4294967295,P=O+(F<<4&4294967295|F>>>28),F=U+(P^O^N)+R[8]+2272392833&4294967295,U=P+(F<<11&4294967295|F>>>21),F=N+(U^P^O)+R[11]+1839030562&4294967295,N=U+(F<<16&4294967295|F>>>16),F=O+(N^U^P)+R[14]+4259657740&4294967295,O=N+(F<<23&4294967295|F>>>9),F=P+(O^N^U)+R[1]+2763975236&4294967295,P=O+(F<<4&4294967295|F>>>28),F=U+(P^O^N)+R[4]+1272893353&4294967295,U=P+(F<<11&4294967295|F>>>21),F=N+(U^P^O)+R[7]+4139469664&4294967295,N=U+(F<<16&4294967295|F>>>16),F=O+(N^U^P)+R[10]+3200236656&4294967295,O=N+(F<<23&4294967295|F>>>9),F=P+(O^N^U)+R[13]+681279174&4294967295,P=O+(F<<4&4294967295|F>>>28),F=U+(P^O^N)+R[0]+3936430074&4294967295,U=P+(F<<11&4294967295|F>>>21),F=N+(U^P^O)+R[3]+3572445317&4294967295,N=U+(F<<16&4294967295|F>>>16),F=O+(N^U^P)+R[6]+76029189&4294967295,O=N+(F<<23&4294967295|F>>>9),F=P+(O^N^U)+R[9]+3654602809&4294967295,P=O+(F<<4&4294967295|F>>>28),F=U+(P^O^N)+R[12]+3873151461&4294967295,U=P+(F<<11&4294967295|F>>>21),F=N+(U^P^O)+R[15]+530742520&4294967295,N=U+(F<<16&4294967295|F>>>16),F=O+(N^U^P)+R[2]+3299628645&4294967295,O=N+(F<<23&4294967295|F>>>9),F=P+(N^(O|~U))+R[0]+4096336452&4294967295,P=O+(F<<6&4294967295|F>>>26),F=U+(O^(P|~N))+R[7]+1126891415&4294967295,U=P+(F<<10&4294967295|F>>>22),F=N+(P^(U|~O))+R[14]+2878612391&4294967295,N=U+(F<<15&4294967295|F>>>17),F=O+(U^(N|~P))+R[5]+4237533241&4294967295,O=N+(F<<21&4294967295|F>>>11),F=P+(N^(O|~U))+R[12]+1700485571&4294967295,P=O+(F<<6&4294967295|F>>>26),F=U+(O^(P|~N))+R[3]+2399980690&4294967295,U=P+(F<<10&4294967295|F>>>22),F=N+(P^(U|~O))+R[10]+4293915773&4294967295,N=U+(F<<15&4294967295|F>>>17),F=O+(U^(N|~P))+R[1]+2240044497&4294967295,O=N+(F<<21&4294967295|F>>>11),F=P+(N^(O|~U))+R[8]+1873313359&4294967295,P=O+(F<<6&4294967295|F>>>26),F=U+(O^(P|~N))+R[15]+4264355552&4294967295,U=P+(F<<10&4294967295|F>>>22),F=N+(P^(U|~O))+R[6]+2734768916&4294967295,N=U+(F<<15&4294967295|F>>>17),F=O+(U^(N|~P))+R[13]+1309151649&4294967295,O=N+(F<<21&4294967295|F>>>11),F=P+(N^(O|~U))+R[4]+4149444226&4294967295,P=O+(F<<6&4294967295|F>>>26),F=U+(O^(P|~N))+R[11]+3174756917&4294967295,U=P+(F<<10&4294967295|F>>>22),F=N+(P^(U|~O))+R[2]+718787259&4294967295,N=U+(F<<15&4294967295|F>>>17),F=O+(U^(N|~P))+R[9]+3951481745&4294967295,M.g[0]=M.g[0]+P&4294967295,M.g[1]=M.g[1]+(N+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+U&4294967295}r.prototype.u=function(M,P){P===void 0&&(P=M.length);for(var O=P-this.blockSize,R=this.B,N=this.h,U=0;U<P;){if(N==0)for(;U<=O;)i(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<P;)if(R[N++]=M.charCodeAt(U++),N==this.blockSize){i(this,R),N=0;break}}else for(;U<P;)if(R[N++]=M[U++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=P},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var P=1;P<M.length-8;++P)M[P]=0;var O=8*this.o;for(P=M.length-8;P<M.length;++P)M[P]=O&255,O/=256;for(this.u(M),M=Array(16),P=O=0;4>P;++P)for(var R=0;32>R;R+=8)M[O++]=this.g[P]>>>R&255;return M};function s(M,P){var O=a;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=P(M)}function o(M,P){this.h=P;for(var O=[],R=!0,N=M.length-1;0<=N;N--){var U=M[N]|0;R&&U==P||(O[N]=U,R=!1)}this.g=O}var a={};function l(M){return-128<=M&&128>M?s(M,function(P){return new o([P|0],0>P?-1:0)}):new o([M|0],0>M?-1:0)}function u(M){if(isNaN(M)||!isFinite(M))return h;if(0>M)return _(u(-M));for(var P=[],O=1,R=0;M>=O;R++)P[R]=M/O|0,O*=4294967296;return new o(P,0)}function c(M,P){if(M.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(M.charAt(0)=="-")return _(c(M.substring(1),P));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(P,8)),R=h,N=0;N<M.length;N+=8){var U=Math.min(8,M.length-N),F=parseInt(M.substring(N,N+U),P);8>U?(U=u(Math.pow(P,U)),R=R.j(U).add(u(F))):(R=R.j(O),R=R.add(u(F)))}return R}var h=l(0),f=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(x(this))return-_(this).m();for(var M=0,P=1,O=0;O<this.g.length;O++){var R=this.i(O);M+=(0<=R?R:4294967296+R)*P,P*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(g(this))return"0";if(x(this))return"-"+_(this).toString(M);for(var P=u(Math.pow(M,6)),O=this,R="";;){var N=S(O,P).g;O=v(O,N.j(P));var U=((0<O.g.length?O.g[0]:O.h)>>>0).toString(M);if(O=N,g(O))return U+R;for(;6>U.length;)U="0"+U;R=U+R}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function g(M){if(M.h!=0)return!1;for(var P=0;P<M.g.length;P++)if(M.g[P]!=0)return!1;return!0}function x(M){return M.h==-1}n.l=function(M){return M=v(this,M),x(M)?-1:g(M)?0:1};function _(M){for(var P=M.g.length,O=[],R=0;R<P;R++)O[R]=~M.g[R];return new o(O,~M.h).add(f)}n.abs=function(){return x(this)?_(this):this},n.add=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],R=0,N=0;N<=P;N++){var U=R+(this.i(N)&65535)+(M.i(N)&65535),F=(U>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);R=F>>>16,U&=65535,F&=65535,O[N]=F<<16|U}return new o(O,O[O.length-1]&-2147483648?-1:0)};function v(M,P){return M.add(_(P))}n.j=function(M){if(g(this)||g(M))return h;if(x(this))return x(M)?_(this).j(_(M)):_(_(this).j(M));if(x(M))return _(this.j(_(M)));if(0>this.l(p)&&0>M.l(p))return u(this.m()*M.m());for(var P=this.g.length+M.g.length,O=[],R=0;R<2*P;R++)O[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<M.g.length;N++){var U=this.i(R)>>>16,F=this.i(R)&65535,J=M.i(N)>>>16,Z=M.i(N)&65535;O[2*R+2*N]+=F*Z,b(O,2*R+2*N),O[2*R+2*N+1]+=U*Z,b(O,2*R+2*N+1),O[2*R+2*N+1]+=F*J,b(O,2*R+2*N+1),O[2*R+2*N+2]+=U*J,b(O,2*R+2*N+2)}for(R=0;R<P;R++)O[R]=O[2*R+1]<<16|O[2*R];for(R=P;R<2*P;R++)O[R]=0;return new o(O,0)};function b(M,P){for(;(M[P]&65535)!=M[P];)M[P+1]+=M[P]>>>16,M[P]&=65535,P++}function E(M,P){this.g=M,this.h=P}function S(M,P){if(g(P))throw Error("division by zero");if(g(M))return new E(h,h);if(x(M))return P=S(_(M),P),new E(_(P.g),_(P.h));if(x(P))return P=S(M,_(P)),new E(_(P.g),P.h);if(30<M.g.length){if(x(M)||x(P))throw Error("slowDivide_ only works with positive integers.");for(var O=f,R=P;0>=R.l(M);)O=C(O),R=C(R);var N=D(O,1),U=D(R,1);for(R=D(R,2),O=D(O,2);!g(R);){var F=U.add(R);0>=F.l(M)&&(N=N.add(O),U=F),R=D(R,1),O=D(O,1)}return P=v(M,N.j(P)),new E(N,P)}for(N=h;0<=M.l(P);){for(O=Math.max(1,Math.floor(M.m()/P.m())),R=Math.ceil(Math.log(O)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),U=u(O),F=U.j(P);x(F)||0<F.l(M);)O-=R,U=u(O),F=U.j(P);g(U)&&(U=f),N=N.add(U),M=v(M,F)}return new E(N,M)}n.A=function(M){return S(this,M).h},n.and=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],R=0;R<P;R++)O[R]=this.i(R)&M.i(R);return new o(O,this.h&M.h)},n.or=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],R=0;R<P;R++)O[R]=this.i(R)|M.i(R);return new o(O,this.h|M.h)},n.xor=function(M){for(var P=Math.max(this.g.length,M.g.length),O=[],R=0;R<P;R++)O[R]=this.i(R)^M.i(R);return new o(O,this.h^M.h)};function C(M){for(var P=M.g.length+1,O=[],R=0;R<P;R++)O[R]=M.i(R)<<1|M.i(R-1)>>>31;return new o(O,M.h)}function D(M,P){var O=P>>5;P%=32;for(var R=M.g.length-O,N=[],U=0;U<R;U++)N[U]=0<P?M.i(U+O)>>>P|M.i(U+O+1)<<32-P:M.i(U+O);return new o(N,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,X6=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,ff=o}).apply(typeof kN<"u"?kN:typeof self<"u"?self:typeof window<"u"?window:{});var Mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y6,x0,Q6,hb,Y2,Z6,e8,t8;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,H,K){return T==Array.prototype||T==Object.prototype||(T[H]=K.value),T};function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mw=="object"&&Mw];for(var H=0;H<T.length;++H){var K=T[H];if(K&&K.Math==Math)return K}throw Error("Cannot find global object")}var r=t(this);function i(T,H){if(H)e:{var K=r;T=T.split(".");for(var ue=0;ue<T.length-1;ue++){var ke=T[ue];if(!(ke in K))break e;K=K[ke]}T=T[T.length-1],ue=K[T],H=H(ue),H!=ue&&H!=null&&e(K,T,{configurable:!0,writable:!0,value:H})}}function s(T,H){T instanceof String&&(T+="");var K=0,ue=!1,ke={next:function(){if(!ue&&K<T.length){var Ve=K++;return{value:H(Ve,T[Ve]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}i("Array.prototype.values",function(T){return T||function(){return s(this,function(H,K){return K})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(T){var H=typeof T;return H=H!="object"?H:T?Array.isArray(T)?"array":H:"null",H=="array"||H=="object"&&typeof T.length=="number"}function u(T){var H=typeof T;return H=="object"&&T!=null||H=="function"}function c(T,H,K){return T.call.apply(T.bind,arguments)}function h(T,H,K){if(!T)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,ue),T.apply(H,ke)}}return function(){return T.apply(H,arguments)}}function f(T,H,K){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,f.apply(null,arguments)}function p(T,H){var K=Array.prototype.slice.call(arguments,1);return function(){var ue=K.slice();return ue.push.apply(ue,arguments),T.apply(this,ue)}}function g(T,H){function K(){}K.prototype=H.prototype,T.aa=H.prototype,T.prototype=new K,T.prototype.constructor=T,T.Qb=function(ue,ke,Ve){for(var at=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)at[Nn-2]=arguments[Nn];return H.prototype[ke].apply(ue,at)}}function x(T){const H=T.length;if(0<H){const K=Array(H);for(let ue=0;ue<H;ue++)K[ue]=T[ue];return K}return[]}function _(T,H){for(let K=1;K<arguments.length;K++){const ue=arguments[K];if(l(ue)){const ke=T.length||0,Ve=ue.length||0;T.length=ke+Ve;for(let at=0;at<Ve;at++)T[ke+at]=ue[at]}else T.push(ue)}}class v{constructor(H,K){this.i=H,this.j=K,this.h=0,this.g=null}get(){let H;return 0<this.h?(this.h--,H=this.g,this.g=H.next,H.next=null):H=this.i(),H}}function b(T){return/^[\s\xa0]*$/.test(T)}function E(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function S(T){return S[" "](T),T}S[" "]=function(){};var C=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function D(T,H,K){for(const ue in T)H.call(K,T[ue],ue,T)}function M(T,H){for(const K in T)H.call(void 0,T[K],K,T)}function P(T){const H={};for(const K in T)H[K]=T[K];return H}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(T,H){let K,ue;for(let ke=1;ke<arguments.length;ke++){ue=arguments[ke];for(K in ue)T[K]=ue[K];for(let Ve=0;Ve<O.length;Ve++)K=O[Ve],Object.prototype.hasOwnProperty.call(ue,K)&&(T[K]=ue[K])}}function N(T){var H=1;T=T.split(":");const K=[];for(;0<H&&T.length;)K.push(T.shift()),H--;return T.length&&K.push(T.join(":")),K}function U(T){a.setTimeout(()=>{throw T},0)}function F(){var T=ee;let H=null;return T.g&&(H=T.g,T.g=T.g.next,T.g||(T.h=null),H.next=null),H}class J{constructor(){this.h=this.g=null}add(H,K){const ue=Z.get();ue.set(H,K),this.h?this.h.next=ue:this.g=ue,this.h=ue}}var Z=new v(()=>new oe,T=>T.reset());class oe{constructor(){this.next=this.g=this.h=null}set(H,K){this.h=H,this.g=K,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Q=!1,ee=new J,Y=()=>{const T=a.Promise.resolve(void 0);ae=()=>{T.then(V)}};var V=()=>{for(var T;T=F();){try{T.h.call(T.g)}catch(K){U(K)}var H=Z;H.j(T),100>H.h&&(H.h++,T.next=H.g,H.g=T)}Q=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(T,H){this.type=T,this.g=this.target=H,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var se=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,H=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const K=()=>{};a.addEventListener("test",K,H),a.removeEventListener("test",K,H)}catch{}return T})();function he(T,H){if(re.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var K=this.type=T.type,ue=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=H,H=T.relatedTarget){if(C){e:{try{S(H.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(H=null)}}else K=="mouseover"?H=T.fromElement:K=="mouseout"&&(H=T.toElement);this.relatedTarget=H,ue?(this.clientX=ue.clientX!==void 0?ue.clientX:ue.pageX,this.clientY=ue.clientY!==void 0?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:te[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&he.aa.h.call(this)}}g(he,re);var te={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),ve=0;function xe(T,H,K,ue,ke){this.listener=T,this.proxy=null,this.src=H,this.type=K,this.capture=!!ue,this.ha=ke,this.key=++ve,this.da=this.fa=!1}function Te(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function $e(T){this.src=T,this.g={},this.h=0}$e.prototype.add=function(T,H,K,ue,ke){var Ve=T.toString();T=this.g[Ve],T||(T=this.g[Ve]=[],this.h++);var at=Be(T,H,ue,ke);return-1<at?(H=T[at],K||(H.fa=!1)):(H=new xe(H,this.src,Ve,!!ue,ke),H.fa=K,T.push(H)),H};function De(T,H){var K=H.type;if(K in T.g){var ue=T.g[K],ke=Array.prototype.indexOf.call(ue,H,void 0),Ve;(Ve=0<=ke)&&Array.prototype.splice.call(ue,ke,1),Ve&&(Te(H),T.g[K].length==0&&(delete T.g[K],T.h--))}}function Be(T,H,K,ue){for(var ke=0;ke<T.length;++ke){var Ve=T[ke];if(!Ve.da&&Ve.listener==H&&Ve.capture==!!K&&Ve.ha==ue)return ke}return-1}var fe="closure_lm_"+(1e6*Math.random()|0),it={};function Je(T,H,K,ue,ke){if(Array.isArray(H)){for(var Ve=0;Ve<H.length;Ve++)Je(T,H[Ve],K,ue,ke);return null}return K=ye(K),T&&T[ce]?T.K(H,K,u(ue)?!!ue.capture:!1,ke):rt(T,H,K,!1,ue,ke)}function rt(T,H,K,ue,ke,Ve){if(!H)throw Error("Invalid event type");var at=u(ke)?!!ke.capture:!!ke,Nn=me(T);if(Nn||(T[fe]=Nn=new $e(T)),K=Nn.add(H,K,ue,at,Ve),K.proxy)return K;if(ue=we(),K.proxy=ue,ue.src=T,ue.listener=K,T.addEventListener)se||(ke=at),ke===void 0&&(ke=!1),T.addEventListener(H.toString(),ue,ke);else if(T.attachEvent)T.attachEvent(ie(H.toString()),ue);else if(T.addListener&&T.removeListener)T.addListener(ue);else throw Error("addEventListener and attachEvent are unavailable.");return K}function we(){function T(K){return H.call(T.src,T.listener,K)}const H=q;return T}function Ie(T,H,K,ue,ke){if(Array.isArray(H))for(var Ve=0;Ve<H.length;Ve++)Ie(T,H[Ve],K,ue,ke);else ue=u(ue)?!!ue.capture:!!ue,K=ye(K),T&&T[ce]?(T=T.i,H=String(H).toString(),H in T.g&&(Ve=T.g[H],K=Be(Ve,K,ue,ke),-1<K&&(Te(Ve[K]),Array.prototype.splice.call(Ve,K,1),Ve.length==0&&(delete T.g[H],T.h--)))):T&&(T=me(T))&&(H=T.g[H.toString()],T=-1,H&&(T=Be(H,K,ue,ke)),(K=-1<T?H[T]:null)&&Ne(K))}function Ne(T){if(typeof T!="number"&&T&&!T.da){var H=T.src;if(H&&H[ce])De(H.i,T);else{var K=T.type,ue=T.proxy;H.removeEventListener?H.removeEventListener(K,ue,T.capture):H.detachEvent?H.detachEvent(ie(K),ue):H.addListener&&H.removeListener&&H.removeListener(ue),(K=me(H))?(De(K,T),K.h==0&&(K.src=null,H[fe]=null)):Te(T)}}}function ie(T){return T in it?it[T]:it[T]="on"+T}function q(T,H){if(T.da)T=!0;else{H=new he(H,this);var K=T.listener,ue=T.ha||T.src;T.fa&&Ne(T),T=K.call(ue,H)}return T}function me(T){return T=T[fe],T instanceof $e?T:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(T){return typeof T=="function"?T:(T[de]||(T[de]=function(H){return T.handleEvent(H)}),T[de])}function be(){X.call(this),this.i=new $e(this),this.M=this,this.F=null}g(be,X),be.prototype[ce]=!0,be.prototype.removeEventListener=function(T,H,K,ue){Ie(this,T,H,K,ue)};function He(T,H){var K,ue=T.F;if(ue)for(K=[];ue;ue=ue.F)K.push(ue);if(T=T.M,ue=H.type||H,typeof H=="string")H=new re(H,T);else if(H instanceof re)H.target=H.target||T;else{var ke=H;H=new re(ue,T),R(H,ke)}if(ke=!0,K)for(var Ve=K.length-1;0<=Ve;Ve--){var at=H.g=K[Ve];ke=qe(at,ue,!0,H)&&ke}if(at=H.g=T,ke=qe(at,ue,!0,H)&&ke,ke=qe(at,ue,!1,H)&&ke,K)for(Ve=0;Ve<K.length;Ve++)at=H.g=K[Ve],ke=qe(at,ue,!1,H)&&ke}be.prototype.N=function(){if(be.aa.N.call(this),this.i){var T=this.i,H;for(H in T.g){for(var K=T.g[H],ue=0;ue<K.length;ue++)Te(K[ue]);delete T.g[H],T.h--}}this.F=null},be.prototype.K=function(T,H,K,ue){return this.i.add(String(T),H,!1,K,ue)},be.prototype.L=function(T,H,K,ue){return this.i.add(String(T),H,!0,K,ue)};function qe(T,H,K,ue){if(H=T.i.g[String(H)],!H)return!0;H=H.concat();for(var ke=!0,Ve=0;Ve<H.length;++Ve){var at=H[Ve];if(at&&!at.da&&at.capture==K){var Nn=at.listener,Zr=at.ha||at.src;at.fa&&De(T.i,at),ke=Nn.call(Zr,ue)!==!1&&ke}}return ke&&!ue.defaultPrevented}function lt(T,H,K){if(typeof T=="function")K&&(T=f(T,K));else if(T&&typeof T.handleEvent=="function")T=f(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(H)?-1:a.setTimeout(T,H||0)}function vt(T){T.g=lt(()=>{T.g=null,T.i&&(T.i=!1,vt(T))},T.l);const H=T.h;T.h=null,T.m.apply(null,H)}class Ye extends X{constructor(H,K){super(),this.m=H,this.l=K,this.h=null,this.i=!1,this.g=null}j(H){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yt(T){X.call(this),this.h=T,this.g={}}g(yt,X);var Ot=[];function jt(T){D(T.g,function(H,K){this.g.hasOwnProperty(K)&&Ne(H)},T),T.g={}}yt.prototype.N=function(){yt.aa.N.call(this),jt(this)},yt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=a.JSON.stringify,on=a.JSON.parse,qt=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function Rn(){}Rn.prototype.h=null;function Ae(T){return T.h||(T.h=T.i())}function mt(){}var Ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){re.call(this,"d")}g(Xe,re);function _t(){re.call(this,"c")}g(_t,re);var dt={},Zt=null;function Qn(){return Zt=Zt||new be}dt.La="serverreachability";function Tr(T){re.call(this,dt.La,T)}g(Tr,re);function An(T){const H=Qn();He(H,new Tr(H))}dt.STAT_EVENT="statevent";function _i(T,H){re.call(this,dt.STAT_EVENT,T),this.stat=H}g(_i,re);function Kn(T){const H=Qn();He(H,new _i(H,T))}dt.Ma="timingevent";function Va(T,H){re.call(this,dt.Ma,T),this.size=H}g(Va,re);function Ms(T,H){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},H)}function Qi(){this.g=!0}Qi.prototype.xa=function(){this.g=!1};function Qs(T,H,K,ue,ke,Ve){T.info(function(){if(T.g)if(Ve)for(var at="",Nn=Ve.split("&"),Zr=0;Zr<Nn.length;Zr++){var kn=Nn[Zr].split("=");if(1<kn.length){var ei=kn[0];kn=kn[1];var zn=ei.split("_");at=2<=zn.length&&zn[1]=="type"?at+(ei+"="+kn+"&"):at+(ei+"=redacted&")}}else at=null;else at=Ve;return"XMLHTTP REQ ("+ue+") [attempt "+ke+"]: "+H+`
`+K+`
`+at})}function za(T,H,K,ue,ke,Ve,at){T.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+ke+"]: "+H+`
`+K+`
`+Ve+" "+at})}function xi(T,H,K,ue){T.info(function(){return"XMLHTTP TEXT ("+H+"): "+th(T,K)+(ue?" "+ue:"")})}function da(T,H){T.info(function(){return"TIMEOUT: "+H})}Qi.prototype.info=function(){};function th(T,H){if(!T.g)return H;if(!H)return null;try{var K=JSON.parse(H);if(K){for(T=0;T<K.length;T++)if(Array.isArray(K[T])){var ue=K[T];if(!(2>ue.length)){var ke=ue[1];if(Array.isArray(ke)&&!(1>ke.length)){var Ve=ke[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var at=1;at<ke.length;at++)ke[at]=""}}}}return Et(K)}catch{return H}}var Bo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Iu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rs;function Ha(){}g(Ha,Rn),Ha.prototype.g=function(){return new XMLHttpRequest},Ha.prototype.i=function(){return{}},Rs=new Ha;function Zs(T,H,K,ue){this.j=T,this.i=H,this.l=K,this.R=ue||1,this.U=new yt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}var ku={},zl={};function Hl(T,H,K){T.L=1,T.v=hr(Yr(H)),T.m=K,T.P=!0,le(T,null)}function le(T,H){T.F=Date.now(),Oe(T),T.A=Yr(T.v);var K=T.A,ue=T.R;Array.isArray(ue)||(ue=[String(ue)]),ma(K.i,"t",ue),T.C=0,K=T.j.J,T.h=new Pu,T.g=Uu(T.j,K?H:null,!T.m),0<T.O&&(T.M=new Ye(f(T.Y,T,T.g),T.O)),H=T.U,K=T.g,ue=T.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(Ot[0]=ke.toString()),ke=Ot);for(var Ve=0;Ve<ke.length;Ve++){var at=Je(K,ke[Ve],ue||H.handleEvent,!1,H.h||H);if(!at)break;H.g[at.key]=at}H=T.H?P(T.H):{},T.m?(T.u||(T.u="POST"),H["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,H)):(T.u="GET",T.g.ea(T.A,T.u,null,H)),An(),Qs(T.i,T.u,T.A,T.l,T.R,T.m)}Zs.prototype.ca=function(T){T=T.target;const H=this.M;H&&_r(T)==3?H.j():this.Y(T)},Zs.prototype.Y=function(T){try{if(T==this.g)e:{const zn=_r(this.g);var H=this.g.Ba();const xr=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||Gl(this.g)))){this.J||zn!=4||H==7||(H==8||0>=xr?An(3):An(2)),tt(this);var K=this.g.Z();this.X=K;t:if(Me(this)){var ue=Gl(this.g);T="";var ke=ue.length,Ve=_r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),ft(this);var at="";break t}this.h.i=new a.TextDecoder}for(H=0;H<ke;H++)this.h.h=!0,T+=this.h.i.decode(ue[H],{stream:!(Ve&&H==ke-1)});ue.length=0,this.h.g+=T,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=K==200,za(this.i,this.u,this.A,this.l,this.R,zn,K),this.o){if(this.T&&!this.K){t:{if(this.g){var Nn,Zr=this.g;if((Nn=Zr.g?Zr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Nn)){var kn=Nn;break t}}kn=null}if(K=kn)xi(this.i,this.l,K,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,At(this,K);else{this.o=!1,this.s=3,Kn(12),gt(this),ft(this);break e}}if(this.P){K=!0;let On;for(;!this.J&&this.C<at.length;)if(On=je(this,at),On==zl){zn==4&&(this.s=4,Kn(14),K=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(On==ku){this.s=4,Kn(15),xi(this.i,this.l,at,"[Invalid Chunk]"),K=!1;break}else xi(this.i,this.l,On,null),At(this,On);if(Me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||at.length!=0||this.h.h||(this.s=1,Kn(16),K=!1),this.o=this.o&&K,!K)xi(this.i,this.l,at,"[Invalid Chunked Response]"),gt(this),ft(this);else if(0<at.length&&!this.W){this.W=!0;var ei=this.j;ei.g==this&&ei.ba&&!ei.M&&(ei.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),no(ei),ei.M=!0,Kn(11))}}else xi(this.i,this.l,at,null),At(this,at);zn==4&&gt(this),this.o&&!this.J&&(zn==4?Bu(this.j,this):(this.o=!1,Oe(this)))}else Wa(this.g),K==400&&0<at.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),gt(this),ft(this)}}}catch{}finally{}};function Me(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function je(T,H){var K=T.C,ue=H.indexOf(`
`,K);return ue==-1?zl:(K=Number(H.substring(K,ue)),isNaN(K)?ku:(ue+=1,ue+K>H.length?zl:(H=H.slice(ue,ue+K),T.C=ue+K,H)))}Zs.prototype.cancel=function(){this.J=!0,gt(this)};function Oe(T){T.S=Date.now()+T.I,Re(T,T.I)}function Re(T,H){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Ms(f(T.ba,T),H)}function tt(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Zs.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(da(this.i,this.A),this.L!=2&&(An(),Kn(17)),gt(this),this.s=2,ft(this)):Re(this,this.S-T)};function ft(T){T.j.G==0||T.J||Bu(T.j,T)}function gt(T){tt(T);var H=T.M;H&&typeof H.ma=="function"&&H.ma(),T.M=null,jt(T.U),T.g&&(H=T.g,T.g=null,H.abort(),H.ma())}function At(T,H){try{var K=T.j;if(K.G!=0&&(K.g==T||Ht(K.h,T))){if(!T.K&&Ht(K.h,T)&&K.G==3){try{var ue=K.Da.g.parse(H)}catch{ue=null}if(Array.isArray(ue)&&ue.length==3){var ke=ue;if(ke[0]==0){e:if(!K.u){if(K.g)if(K.g.F+3e3<T.F)Ka(K),xo(K);else break e;Lu(K),Kn(18)}}else K.za=ke[1],0<K.za-K.T&&37500>ke[2]&&K.F&&K.v==0&&!K.C&&(K.C=Ms(f(K.Za,K),6e3));if(1>=Pt(K.h)&&K.ca){try{K.ca()}catch{}K.ca=void 0}}else ya(K,11)}else if((T.K||K.g==T)&&Ka(K),!b(H))for(ke=K.Da.g.parse(H),H=0;H<ke.length;H++){let kn=ke[H];if(K.T=kn[0],kn=kn[1],K.G==2)if(kn[0]=="c"){K.K=kn[1],K.ia=kn[2];const ei=kn[3];ei!=null&&(K.la=ei,K.j.info("VER="+K.la));const zn=kn[4];zn!=null&&(K.Aa=zn,K.j.info("SVER="+K.Aa));const xr=kn[5];xr!=null&&typeof xr=="number"&&0<xr&&(ue=1.5*xr,K.L=ue,K.j.info("backChannelRequestTimeoutMs_="+ue)),ue=K;const On=T.g;if(On){const zo=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var Ve=ue.h;Ve.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(xn(Ve,Ve.h),Ve.h=null))}if(ue.D){const rs=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;rs&&(ue.ya=rs,cn(ue.I,ue.D,rs))}}K.G=3,K.l&&K.l.ua(),K.ba&&(K.R=Date.now()-T.F,K.j.info("Handshake RTT: "+K.R+"ms")),ue=K;var at=T;if(ue.qa=lh(ue,ue.J?ue.ia:null,ue.W),at.K){Sn(ue.h,at);var Nn=at,Zr=ue.L;Zr&&(Nn.I=Zr),Nn.B&&(tt(Nn),Oe(Nn)),ue.g=at}else $a(ue);0<K.i.length&&wo(K)}else kn[0]!="stop"&&kn[0]!="close"||ya(K,7);else K.G==3&&(kn[0]=="stop"||kn[0]=="close"?kn[0]=="stop"?ya(K,7):hi(K):kn[0]!="noop"&&K.l&&K.l.ta(kn),K.v=0)}}An(4)}catch{}}var zt=class{constructor(T,H){this.g=T,this.map=H}};function Bt(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Pt(T){return T.h?1:T.g?T.g.size:0}function Ht(T,H){return T.h?T.h==H:T.g?T.g.has(H):!1}function xn(T,H){T.g?T.g.add(H):T.h=H}function Sn(T,H){T.h&&T.h==H?T.h=null:T.g&&T.g.has(H)&&T.g.delete(H)}Bt.prototype.cancel=function(){if(this.i=un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function un(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let H=T.i;for(const K of T.g.values())H=H.concat(K.D);return H}return x(T.i)}function kt(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var H=[],K=T.length,ue=0;ue<K;ue++)H.push(T[ue]);return H}H=[],K=0;for(ue in T)H[K++]=T[ue];return H}function In(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var H=[];T=T.length;for(var K=0;K<T;K++)H.push(K);return H}H=[],K=0;for(const ue in T)H[K++]=ue;return H}}}function fn(T,H){if(T.forEach&&typeof T.forEach=="function")T.forEach(H,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,H,void 0);else for(var K=In(T),ue=kt(T),ke=ue.length,Ve=0;Ve<ke;Ve++)H.call(void 0,ue[Ve],K&&K[Ve],T)}var Xr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(T,H){if(T){T=T.split("&");for(var K=0;K<T.length;K++){var ue=T[K].indexOf("="),ke=null;if(0<=ue){var Ve=T[K].substring(0,ue);ke=T[K].substring(ue+1)}else Ve=T[K];H(Ve,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function cr(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof cr){this.h=T.h,dn(this,T.j),this.o=T.o,this.g=T.g,Fr(this,T.s),this.l=T.l;var H=T.i,K=new pa;K.i=H.i,H.g&&(K.g=new Map(H.g),K.h=H.h),Ur(this,K),this.m=T.m}else T&&(H=String(T).match(Xr))?(this.h=!1,dn(this,H[1]||"",!0),this.o=pn(H[2]||""),this.g=pn(H[3]||"",!0),Fr(this,H[4]),this.l=pn(H[5]||"",!0),Ur(this,H[6]||"",!0),this.m=pn(H[7]||"")):(this.h=!1,this.i=new pa(null,this.h))}cr.prototype.toString=function(){var T=[],H=this.j;H&&T.push(Qr(H,nh,!0),":");var K=this.g;return(K||H=="file")&&(T.push("//"),(H=this.o)&&T.push(Qr(H,nh,!0),"@"),T.push(encodeURIComponent(String(K)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),K=this.s,K!=null&&T.push(":",String(K))),(K=this.l)&&(this.g&&K.charAt(0)!="/"&&T.push("/"),T.push(Qr(K,K.charAt(0)=="/"?rh:pm,!0))),(K=this.i.toString())&&T.push("?",K),(K=this.m)&&T.push("#",Qr(K,Ga)),T.join("")};function Yr(T){return new cr(T)}function dn(T,H,K){T.j=K?pn(H,!0):H,T.j&&(T.j=T.j.replace(/:$/,""))}function Fr(T,H){if(H){if(H=Number(H),isNaN(H)||0>H)throw Error("Bad port number "+H);T.s=H}else T.s=null}function Ur(T,H,K){H instanceof pa?(T.i=H,ga(T.i,T.h)):(K||(H=Qr(H,ih)),T.i=new pa(H,T.h))}function cn(T,H,K){T.i.set(H,K)}function hr(T){return cn(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function pn(T,H){return T?H?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Qr(T,H,K){return typeof T=="string"?(T=encodeURI(T).replace(H,Ou),K&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Ou(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var nh=/[#\/\?@]/g,pm=/[#\?:]/g,rh=/[#\?]/g,ih=/[#\?@]/g,Ga=/#/g;function pa(T,H){this.h=this.g=null,this.i=T||null,this.j=!!H}function ci(T){T.g||(T.g=new Map,T.h=0,T.i&&Fo(T.i,function(H,K){T.add(decodeURIComponent(H.replace(/\+/g," ")),K)}))}n=pa.prototype,n.add=function(T,H){ci(this),this.i=null,T=eo(this,T);var K=this.g.get(T);return K||this.g.set(T,K=[]),K.push(H),this.h+=1,this};function mn(T,H){ci(T),H=eo(T,H),T.g.has(H)&&(T.i=null,T.h-=T.g.get(H).length,T.g.delete(H))}function _o(T,H){return ci(T),H=eo(T,H),T.g.has(H)}n.forEach=function(T,H){ci(this),this.g.forEach(function(K,ue){K.forEach(function(ke){T.call(H,ke,ue,this)},this)},this)},n.na=function(){ci(this);const T=Array.from(this.g.values()),H=Array.from(this.g.keys()),K=[];for(let ue=0;ue<H.length;ue++){const ke=T[ue];for(let Ve=0;Ve<ke.length;Ve++)K.push(H[ue])}return K},n.V=function(T){ci(this);let H=[];if(typeof T=="string")_o(this,T)&&(H=H.concat(this.g.get(eo(this,T))));else{T=Array.from(this.g.values());for(let K=0;K<T.length;K++)H=H.concat(T[K])}return H},n.set=function(T,H){return ci(this),this.i=null,T=eo(this,T),_o(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[H]),this.h+=1,this},n.get=function(T,H){return T?(T=this.V(T),0<T.length?String(T[0]):H):H};function ma(T,H,K){mn(T,H),0<K.length&&(T.i=null,T.g.set(eo(T,H),x(K)),T.h+=K.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],H=Array.from(this.g.keys());for(var K=0;K<H.length;K++){var ue=H[K];const Ve=encodeURIComponent(String(ue)),at=this.V(ue);for(ue=0;ue<at.length;ue++){var ke=Ve;at[ue]!==""&&(ke+="="+encodeURIComponent(String(at[ue]))),T.push(ke)}}return this.i=T.join("&")};function eo(T,H){return H=String(H),T.j&&(H=H.toLowerCase()),H}function ga(T,H){H&&!T.j&&(ci(T),T.i=null,T.g.forEach(function(K,ue){var ke=ue.toLowerCase();ue!=ke&&(mn(this,ue),ma(this,ke,K))},T)),T.j=H}function ny(T,H){const K=new Qi;if(a.Image){const ue=new Image;ue.onload=p(Zi,K,"TestLoadImage: loaded",!0,H,ue),ue.onerror=p(Zi,K,"TestLoadImage: error",!1,H,ue),ue.onabort=p(Zi,K,"TestLoadImage: abort",!1,H,ue),ue.ontimeout=p(Zi,K,"TestLoadImage: timeout",!1,H,ue),a.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=T}else H(!1)}function jr(T,H){const K=new Qi,ue=new AbortController,ke=setTimeout(()=>{ue.abort(),Zi(K,"TestPingServer: timeout",!1,H)},1e4);fetch(T,{signal:ue.signal}).then(Ve=>{clearTimeout(ke),Ve.ok?Zi(K,"TestPingServer: ok",!0,H):Zi(K,"TestPingServer: server error",!1,H)}).catch(()=>{clearTimeout(ke),Zi(K,"TestPingServer: error",!1,H)})}function Zi(T,H,K,ue,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),ue(K)}catch{}}function ry(){this.g=new qt}function sh(T,H,K){const ue=K||"";try{fn(T,function(ke,Ve){let at=ke;u(ke)&&(at=Et(ke)),H.push(ue+Ve+"="+encodeURIComponent(at))})}catch(ke){throw H.push(ue+"type="+encodeURIComponent("_badmap")),ke}}function qa(T){this.l=T.Ub||null,this.j=T.eb||!1}g(qa,Rn),qa.prototype.g=function(){return new va(this.l,this.j)},qa.prototype.i=(function(T){return function(){return T}})({});function va(T,H){be.call(this),this.D=T,this.o=H,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(va,be),n=va.prototype,n.open=function(T,H){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=H,this.readyState=1,jo(this)},n.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const H={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(H.body=T),(this.D||a).fetch(new Request(this.A,H)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uo(this)),this.readyState=0},n.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,jo(this)),this.g&&(this.readyState=3,jo(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;to(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function to(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}n.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var H=T.value?T.value:new Uint8Array(0);(H=this.v.decode(H,{stream:!T.done}))&&(this.response=this.responseText+=H)}T.done?Uo(this):jo(this),this.readyState==3&&to(this)}},n.Ra=function(T){this.g&&(this.response=this.responseText=T,Uo(this))},n.Qa=function(T){this.g&&(this.response=T,Uo(this))},n.ga=function(){this.g&&Uo(this)};function Uo(T){T.readyState=4,T.l=null,T.j=null,T.v=null,jo(T)}n.setRequestHeader=function(T,H){this.u.append(T,H)},n.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],H=this.h.entries();for(var K=H.next();!K.done;)K=K.value,T.push(K[0]+": "+K[1]),K=H.next();return T.join(`\r
`)};function jo(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function wi(T){let H="";return D(T,function(K,ue){H+=ue,H+=":",H+=K,H+=`\r
`}),H}function es(T,H,K){e:{for(ue in K){var ue=!1;break e}ue=!0}ue||(K=wi(K),typeof T=="string"?K!=null&&encodeURIComponent(String(K)):cn(T,H,K))}function ar(T){be.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(ar,be);var qf=/^https?$/i,oh=["POST","PUT"];n=ar.prototype,n.Ha=function(T){this.J=T},n.ea=function(T,H,K,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);H=H?H.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rs.g(),this.v=this.o?Ae(this.o):Ae(Rs),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(H,String(T),!0),this.B=!1}catch(Ve){Du(this,Ve);return}if(T=K||"",K=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var ke in ue)K.set(ke,ue[ke]);else if(typeof ue.keys=="function"&&typeof ue.get=="function")for(const Ve of ue.keys())K.set(Ve,ue.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(ue));ue=Array.from(K.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),ke=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oh,H,void 0))||ue||ke||K.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,at]of K)this.g.setRequestHeader(Ve,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ah(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ve){Du(this,Ve)}};function Du(T,H){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=H,T.m=5,fs(T),ts(T)}function fs(T){T.A||(T.A=!0,He(T,"complete"),He(T,"error"))}n.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,He(this,"complete"),He(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),ar.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Wf(this):this.bb())},n.bb=function(){Wf(this)};function Wf(T){if(T.h&&typeof o<"u"&&(!T.v[1]||_r(T)!=4||T.Z()!=2)){if(T.u&&_r(T)==4)lt(T.Ea,0,T);else if(He(T,"readystatechange"),_r(T)==4){T.h=!1;try{const at=T.Z();e:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var H=!0;break e;default:H=!1}var K;if(!(K=H)){var ue;if(ue=at===0){var ke=String(T.D).match(Xr)[1]||null;!ke&&a.self&&a.self.location&&(ke=a.self.location.protocol.slice(0,-1)),ue=!qf.test(ke?ke.toLowerCase():"")}K=ue}if(K)He(T,"complete"),He(T,"success");else{T.m=6;try{var Ve=2<_r(T)?T.g.statusText:""}catch{Ve=""}T.l=Ve+" ["+T.Z()+"]",fs(T)}}finally{ts(T)}}}}function ts(T,H){if(T.g){ah(T);const K=T.g,ue=T.v[0]?()=>{}:null;T.g=null,T.v=null,H||He(T,"ready");try{K.onreadystatechange=ue}catch{}}}function ah(T){T.I&&(a.clearTimeout(T.I),T.I=null)}n.isActive=function(){return!!this.g};function _r(T){return T.g?T.g.readyState:0}n.Z=function(){try{return 2<_r(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(T){if(this.g){var H=this.g.responseText;return T&&H.indexOf(T)==0&&(H=H.substring(T.length)),on(H)}};function Gl(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function Wa(T){const H={};T=(T.g&&2<=_r(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let ue=0;ue<T.length;ue++){if(b(T[ue]))continue;var K=N(T[ue]);const ke=K[0];if(K=K[1],typeof K!="string")continue;K=K.trim();const Ve=H[ke]||[];H[ke]=Ve,Ve.push(K)}M(H,function(ue){return ue.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ds(T,H,K){return K&&K.internalChannelParams&&K.internalChannelParams[T]||H}function Nu(T){this.Aa=0,this.i=[],this.j=new Qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ds("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ds("baseRetryDelayMs",5e3,T),this.cb=ds("retryDelaySeedMs",1e4,T),this.Wa=ds("forwardChannelMaxRetries",2,T),this.wa=ds("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Bt(T&&T.concurrentRequestLimit),this.Da=new ry,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nu.prototype,n.la=8,n.G=1,n.connect=function(T,H,K,ue){Kn(0),this.W=T,this.H=H||{},K&&ue!==void 0&&(this.H.OSID=K,this.H.OAID=ue),this.F=this.X,this.I=lh(this,null,this.W),wo(this)};function hi(T){if(ql(T),T.G==3){var H=T.U++,K=Yr(T.I);if(cn(K,"SID",T.K),cn(K,"RID",H),cn(K,"TYPE","terminate"),bi(T,K),H=new Zs(T,T.j,H),H.L=2,H.v=hr(Yr(K)),K=!1,a.navigator&&a.navigator.sendBeacon)try{K=a.navigator.sendBeacon(H.v.toString(),"")}catch{}!K&&a.Image&&(new Image().src=H.v,K=!0),K||(H.g=Uu(H.j,null),H.g.ea(H.v)),H.F=Date.now(),Oe(H)}$f(T)}function xo(T){T.g&&(no(T),T.g.cancel(),T.g=null)}function ql(T){xo(T),T.u&&(a.clearTimeout(T.u),T.u=null),Ka(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function wo(T){if(!ut(T.h)&&!T.s){T.s=!0;var H=T.Ga;ae||Y(),Q||(ae(),Q=!0),ee.add(H,T),T.B=0}}function Wl(T,H){return Pt(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=H.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Ms(f(T.Ga,T,H),Fu(T,T.B)),T.B++,!0)}n.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const ke=new Zs(this,this.j,T);let Ve=this.o;if(this.S&&(Ve?(Ve=P(Ve),R(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(ke.H=Ve,Ve=null),this.P)e:{for(var H=0,K=0;K<this.i.length;K++){t:{var ue=this.i[K];if("__data__"in ue.map&&(ue=ue.map.__data__,typeof ue=="string")){ue=ue.length;break t}ue=void 0}if(ue===void 0)break;if(H+=ue,4096<H){H=K;break e}if(H===4096||K===this.i.length-1){H=K+1;break e}}H=1e3}else H=1e3;H=ps(this,ke,H),K=Yr(this.I),cn(K,"RID",T),cn(K,"CVER",22),this.D&&cn(K,"X-HTTP-Session-Id",this.D),bi(this,K),Ve&&(this.O?H="headers="+encodeURIComponent(String(wi(Ve)))+"&"+H:this.m&&es(K,this.m,Ve)),xn(this.h,ke),this.Ua&&cn(K,"TYPE","init"),this.P?(cn(K,"$req",H),cn(K,"SID","null"),ke.T=!0,Hl(ke,K,null)):Hl(ke,K,H),this.G=2}}else this.G==3&&(T?Fi(this,T):this.i.length==0||ut(this.h)||Fi(this))};function Fi(T,H){var K;H?K=H.l:K=T.U++;const ue=Yr(T.I);cn(ue,"SID",T.K),cn(ue,"RID",K),cn(ue,"AID",T.T),bi(T,ue),T.m&&T.o&&es(ue,T.m,T.o),K=new Zs(T,T.j,K,T.B+1),T.m===null&&(K.H=T.o),H&&(T.i=H.D.concat(T.i)),H=ps(T,K,1e3),K.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),xn(T.h,K),Hl(K,ue,H)}function bi(T,H){T.H&&D(T.H,function(K,ue){cn(H,ue,K)}),T.l&&fn({},function(K,ue){cn(H,ue,K)})}function ps(T,H,K){K=Math.min(T.i.length,K);var ue=T.l?f(T.l.Na,T.l,T):null;e:{var ke=T.i;let Ve=-1;for(;;){const at=["count="+K];Ve==-1?0<K?(Ve=ke[0].g,at.push("ofs="+Ve)):Ve=0:at.push("ofs="+Ve);let Nn=!0;for(let Zr=0;Zr<K;Zr++){let kn=ke[Zr].g;const ei=ke[Zr].map;if(kn-=Ve,0>kn)Ve=Math.max(0,ke[Zr].g-100),Nn=!1;else try{sh(ei,at,"req"+kn+"_")}catch{ue&&ue(ei)}}if(Nn){ue=at.join("&");break e}}}return T=T.i.splice(0,K),H.D=T,ue}function $a(T){if(!T.g&&!T.u){T.Y=1;var H=T.Fa;ae||Y(),Q||(ae(),Q=!0),ee.add(H,T),T.v=0}}function Lu(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Ms(f(T.Fa,T),Fu(T,T.v)),T.v++,!0)}n.Fa=function(){if(this.u=null,Vo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Ms(f(this.ab,this),T)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kn(10),xo(this),Vo(this))};function no(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function Vo(T){T.g=new Zs(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var H=Yr(T.qa);cn(H,"RID","rpc"),cn(H,"SID",T.K),cn(H,"AID",T.T),cn(H,"CI",T.F?"0":"1"),!T.F&&T.ja&&cn(H,"TO",T.ja),cn(H,"TYPE","xmlhttp"),bi(T,H),T.m&&T.o&&es(H,T.m,T.o),T.L&&(T.g.I=T.L);var K=T.g;T=T.ia,K.L=1,K.v=hr(Yr(H)),K.m=null,K.P=!0,le(K,T)}n.Za=function(){this.C!=null&&(this.C=null,xo(this),Lu(this),Kn(19))};function Ka(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function Bu(T,H){var K=null;if(T.g==H){Ka(T),no(T),T.g=null;var ue=2}else if(Ht(T.h,H))K=H.D,Sn(T.h,H),ue=1;else return;if(T.G!=0){if(H.o)if(ue==1){K=H.m?H.m.length:0,H=Date.now()-H.F;var ke=T.B;ue=Qn(),He(ue,new Va(ue,K)),wo(T)}else $a(T);else if(ke=H.s,ke==3||ke==0&&0<H.X||!(ue==1&&Wl(T,H)||ue==2&&Lu(T)))switch(K&&0<K.length&&(H=T.h,H.i=H.i.concat(K)),ke){case 1:ya(T,5);break;case 4:ya(T,10);break;case 3:ya(T,6);break;default:ya(T,2)}}}function Fu(T,H){let K=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(K*=2),K*H}function ya(T,H){if(T.j.info("Error code "+H),H==2){var K=f(T.fb,T),ue=T.Xa;const ke=!ue;ue=new cr(ue||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||dn(ue,"https"),hr(ue),ke?ny(ue.toString(),K):jr(ue.toString(),K)}else Kn(2);T.G=0,T.l&&T.l.sa(H),$f(T),ql(T)}n.fb=function(T){T?(this.j.info("Successfully pinged google.com"),Kn(2)):(this.j.info("Failed to ping google.com"),Kn(1))};function $f(T){if(T.G=0,T.ka=[],T.l){const H=un(T.h);(H.length!=0||T.i.length!=0)&&(_(T.ka,H),_(T.ka,T.i),T.h.i.length=0,x(T.i),T.i.length=0),T.l.ra()}}function lh(T,H,K){var ue=K instanceof cr?Yr(K):new cr(K);if(ue.g!="")H&&(ue.g=H+"."+ue.g),Fr(ue,ue.s);else{var ke=a.location;ue=ke.protocol,H=H?H+"."+ke.hostname:ke.hostname,ke=+ke.port;var Ve=new cr(null);ue&&dn(Ve,ue),H&&(Ve.g=H),ke&&Fr(Ve,ke),K&&(Ve.l=K),ue=Ve}return K=T.D,H=T.ya,K&&H&&cn(ue,K,H),cn(ue,"VER",T.la),bi(T,ue),ue}function Uu(T,H,K){if(H&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return H=T.Ca&&!T.pa?new ar(new qa({eb:K})):new ar(T.pa),H.Ha(T.J),H}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uh(){}n=uh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ju(){}ju.prototype.g=function(T,H){return new ns(T,H)};function ns(T,H){be.call(this),this.g=new Nu(H),this.l=T,this.h=H&&H.messageUrlParams||null,T=H&&H.messageHeaders||null,H&&H.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=H&&H.initMessageHeaders||null,H&&H.messageContentType&&(T?T["X-WebChannel-Content-Type"]=H.messageContentType:T={"X-WebChannel-Content-Type":H.messageContentType}),H&&H.va&&(T?T["X-WebChannel-Client-Profile"]=H.va:T={"X-WebChannel-Client-Profile":H.va}),this.g.S=T,(T=H&&H.Sb)&&!b(T)&&(this.g.m=T),this.v=H&&H.supportsCrossDomainXhr||!1,this.u=H&&H.sendRawJson||!1,(H=H&&H.httpSessionIdParam)&&!b(H)&&(this.g.D=H,T=this.h,T!==null&&H in T&&(T=this.h,H in T&&delete T[H])),this.j=new ms(this)}g(ns,be),ns.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ns.prototype.close=function(){hi(this.g)},ns.prototype.o=function(T){var H=this.g;if(typeof T=="string"){var K={};K.__data__=T,T=K}else this.u&&(K={},K.__data__=Et(T),T=K);H.i.push(new zt(H.Ya++,T)),H.G==3&&wo(H)},ns.prototype.N=function(){this.g.l=null,delete this.j,hi(this.g),delete this.g,ns.aa.N.call(this)};function ch(T){Xe.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var H=T.__sm__;if(H){e:{for(const K in H){T=K;break e}T=void 0}(this.i=T)&&(T=this.i,H=H!==null&&T in H?H[T]:void 0),this.data=H}else this.data=T}g(ch,Xe);function Ja(){_t.call(this),this.status=1}g(Ja,_t);function ms(T){this.g=T}g(ms,uh),ms.prototype.ua=function(){He(this.g,"a")},ms.prototype.ta=function(T){He(this.g,new ch(T))},ms.prototype.sa=function(T){He(this.g,new Ja)},ms.prototype.ra=function(){He(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,ns.prototype.send=ns.prototype.o,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,t8=function(){return new ju},e8=function(){return Qn()},Z6=dt,Y2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bo.NO_ERROR=0,Bo.TIMEOUT=8,Bo.HTTP_ERROR=6,hb=Bo,Iu.COMPLETE="complete",Q6=Iu,mt.EventType=Ge,Ge.OPEN="a",Ge.CLOSE="b",Ge.ERROR="c",Ge.MESSAGE="d",be.prototype.listen=be.prototype.K,x0=mt,ar.prototype.listenOnce=ar.prototype.L,ar.prototype.getLastError=ar.prototype.Ka,ar.prototype.getLastErrorCode=ar.prototype.Ba,ar.prototype.getStatus=ar.prototype.Z,ar.prototype.getResponseJson=ar.prototype.Oa,ar.prototype.getResponseText=ar.prototype.oa,ar.prototype.send=ar.prototype.ea,ar.prototype.setWithCredentials=ar.prototype.Ha,Y6=ar}).apply(typeof Mw<"u"?Mw:typeof self<"u"?self:typeof window<"u"?window:{});const ON="@firebase/firestore",DN="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zs.UNAUTHENTICATED=new zs(null),zs.GOOGLE_CREDENTIALS=new zs("google-credentials-uid"),zs.FIRST_PARTY=new zs("first-party-uid"),zs.MOCK_USER=new zs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lv="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=new ek("@firebase/firestore");function Mg(){return Np.logLevel}function Ct(n,...e){if(Np.logLevel<=Un.DEBUG){const t=e.map(fk);Np.debug(`Firestore (${Lv}): ${n}`,...t)}}function zc(n,...e){if(Np.logLevel<=Un.ERROR){const t=e.map(fk);Np.error(`Firestore (${Lv}): ${n}`,...t)}}function _f(n,...e){if(Np.logLevel<=Un.WARN){const t=e.map(fk);Np.warn(`Firestore (${Lv}): ${n}`,...t)}}function fk(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,n8(n,r,t)}function n8(n,e,t){let r=`FIRESTORE (${Lv}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zc(r),new Error(r)}function or(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||n8(e,i,r)}function _n(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends Su{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zs.UNAUTHENTICATED)))}shutdown(){}}class ite{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ste{constructor(e){this.t=e,this.currentUser=zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){or(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Oc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oc,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oc)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(or(typeof r.accessToken=="string",31837,{l:r}),new r8(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return or(e===null||typeof e=="string",2055,{h:e}),new zs(e)}}class ote{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=zs.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ate{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ote(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class NN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lte{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ta(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){or(this.o===void 0,3512);const r=s=>{s.error!=null&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Ct("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new NN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(or(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new NN(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ute(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ute(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function Pn(n,e){return n<e?-1:n>e?1:0}function Q2(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Pn(r,i);{const s=i8(),o=cte(s.encode(LN(n,t)),s.encode(LN(e,t)));return o!==0?o:Pn(r,i)}}t+=r>65535?2:1}return Pn(n.length,e.length)}function LN(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function cte(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pn(n[t],e[t]);return Pn(n.length,e.length)}function av(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="__name__";class iu{constructor(e,t,r){t===void 0?t=0:t>e.length&&tn(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&tn(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return iu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=iu.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Pn(e.length,t.length)}static compareSegments(e,t){const r=iu.isNumericId(e),i=iu.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?iu.extractNumericId(e).compare(iu.extractNumericId(t)):Q2(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ff.fromString(e.substring(4,e.length-2))}}class Ir extends iu{construct(e,t,r){return new Ir(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Lt(et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ir(t)}static emptyPath(){return new Ir([])}}const hte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ss extends iu{construct(e,t,r){return new Ss(e,t,r)}static isValidIdentifier(e){return hte.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ss.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===BN}static keyField(){return new Ss([BN])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Lt(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Lt(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Lt(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Lt(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ss(t)}static emptyPath(){return new Ss([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(Ir.fromString(e))}static fromName(e){return new Wt(Ir.fromString(e).popFirst(5))}static empty(){return new Wt(Ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ir.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ir.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new Ir(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(n,e,t){if(!t)throw new Lt(et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fte(n,e,t,r){if(e===!0&&r===!0)throw new Lt(et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FN(n){if(!Wt.isDocumentKey(n))throw new Lt(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UN(n){if(Wt.isDocumentKey(n))throw new Lt(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function o8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pk(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tn(12329,{type:typeof n})}function kl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Lt(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pk(n);throw new Lt(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(n,e){const t={typeString:n};return e&&(t.value=e),t}function tx(n,e){if(!o8(n))throw new Lt(et.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Lt(et.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=-62135596800,VN=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*VN);return new sr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lt(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jN)throw new Lt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lt(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VN}_compareTo(e){return this.seconds===e.seconds?Pn(this.nanoseconds,e.nanoseconds):Pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tx(e,sr._jsonSchema))return new sr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:Di("string",sr._jsonSchemaVersion),seconds:Di("number"),nanoseconds:Di("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{static fromTimestamp(e){return new hn(e)}static min(){return new hn(new sr(0,0))}static max(){return new hn(new sr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=-1;function dte(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=hn.fromTimestamp(r===1e9?new sr(t+1,0):new sr(t,r));return new xf(i,Wt.empty(),e)}function pte(n){return new xf(n.readTime,n.key,c_)}class xf{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xf(hn.min(),Wt.empty(),c_)}static max(){return new xf(hn.max(),Wt.empty(),c_)}}function mte(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Wt.comparator(n.documentKey,e.documentKey),t!==0?t:Pn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gte="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vte{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv(n){if(n.code!==et.FAILED_PRECONDITION||n.message!==gte)throw n;Ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Qe?t:Qe.resolve(t)}catch(t){return Qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Qe.reject(t)}static resolve(e){return new Qe(((t,r)=>{t(e)}))}static reject(e){return new Qe(((t,r)=>{r(e)}))}static waitFor(e){return new Qe(((t,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&t()}),(l=>r(l)))})),o=!0,s===i&&t()}))}static or(e){let t=Qe.resolve(!1);for(const r of e)t=t.next((i=>i?Qe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new Qe(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((c=>{o[u]=c,++a,a===s&&r(o)}),(c=>i(c)))}}))}static doWhile(e,t){return new Qe(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}function yte(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fv(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}kA.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=-1;function OA(n){return n==null}function Hb(n){return n===0&&1/n==-1/0}function _te(n){return typeof n=="number"&&Number.isInteger(n)&&!Hb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8="";function xte(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zN(e)),e=wte(n.get(t),e);return zN(e)}function wte(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case a8:t+="";break;default:t+=s}}return t}function zN(n){return n+a8+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Df(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function l8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.comparator=e,this.root=t||Es.EMPTY}insert(e,t){return new Kr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Es.BLACK,null,null))}remove(e){return new Kr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rw(this.root,e,this.comparator,!0)}}class Rw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Es{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Es.RED,this.left=i??Es.EMPTY,this.right=s??Es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Es(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Es.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tn(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tn(27949);return e+(this.isRed()?0:1)}}Es.EMPTY=null,Es.RED=!0,Es.BLACK=!1;Es.EMPTY=new class{constructor(){this.size=0}get key(){throw tn(57766)}get value(){throw tn(16141)}get color(){throw tn(16727)}get left(){throw tn(29726)}get right(){throw tn(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new Es(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e,this.data=new Kr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GN(this.data.getIterator())}getIteratorFrom(e){return new GN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class GN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.fields=e,e.sort(Ss.comparator)}static empty(){return new ia([])}unionWith(e){let t=new Ki(Ss.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return av(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u8("Invalid base64 string: "+s):s}})(e);return new Cs(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new Cs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cs.EMPTY_BYTE_STRING=new Cs("");const bte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wf(n){if(or(!!n,39018),typeof n=="string"){let e=0;const t=bte.exec(n);if(or(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gi(n.seconds),nanos:gi(n.nanos)}}function gi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bf(n){return typeof n=="string"?Cs.fromBase64String(n):Cs.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8="server_timestamp",h8="__type__",f8="__previous_value__",d8="__local_write_time__";function gk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[h8])===null||t===void 0?void 0:t.stringValue)===c8}function DA(n){const e=n.mapValue.fields[f8];return gk(e)?DA(e):e}function h_(n){const e=wf(n.mapValue.fields[d8].timestampValue);return new sr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(e,t,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Gb="(default)";class f_{constructor(e,t){this.projectId=e,this.database=t||Gb}static empty(){return new f_("","")}get isDefaultDatabase(){return this.database===Gb}isEqual(e){return e instanceof f_&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="__type__",Ate="__max__",Iw={mapValue:{}},m8="__vector__",qb="value";function Ef(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gk(n)?4:Tte(n)?9007199254740991:Ste(n)?10:11:tn(28295,{value:n})}function _u(n,e){if(n===e)return!0;const t=Ef(n);if(t!==Ef(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return h_(n).isEqual(h_(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=wf(i.timestampValue),a=wf(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return bf(i.bytesValue).isEqual(bf(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return gi(i.geoPointValue.latitude)===gi(s.geoPointValue.latitude)&&gi(i.geoPointValue.longitude)===gi(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return gi(i.integerValue)===gi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gi(i.doubleValue),a=gi(s.doubleValue);return o===a?Hb(o)===Hb(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return av(n.arrayValue.values||[],e.arrayValue.values||[],_u);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HN(o)!==HN(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!_u(o[l],a[l])))return!1;return!0})(n,e);default:return tn(52216,{left:n})}}function d_(n,e){return(n.values||[]).find((t=>_u(t,e)))!==void 0}function lv(n,e){if(n===e)return 0;const t=Ef(n),r=Ef(e);if(t!==r)return Pn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pn(n.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=gi(s.integerValue||s.doubleValue),l=gi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return qN(n.timestampValue,e.timestampValue);case 4:return qN(h_(n),h_(e));case 5:return Q2(n.stringValue,e.stringValue);case 6:return(function(s,o){const a=bf(s),l=bf(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Pn(a[u],l[u]);if(c!==0)return c}return Pn(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Pn(gi(s.latitude),gi(o.latitude));return a!==0?a:Pn(gi(s.longitude),gi(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WN(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,l,u,c;const h=s.fields||{},f=o.fields||{},p=(a=h[qb])===null||a===void 0?void 0:a.arrayValue,g=(l=f[qb])===null||l===void 0?void 0:l.arrayValue,x=Pn(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return x!==0?x:WN(p,g)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Iw.mapValue&&o===Iw.mapValue)return 0;if(s===Iw.mapValue)return 1;if(o===Iw.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const f=Q2(l[h],c[h]);if(f!==0)return f;const p=lv(a[l[h]],u[c[h]]);if(p!==0)return p}return Pn(l.length,c.length)})(n.mapValue,e.mapValue);default:throw tn(23264,{le:t})}}function qN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pn(n,e);const t=wf(n),r=wf(e),i=Pn(t.seconds,r.seconds);return i!==0?i:Pn(t.nanos,r.nanos)}function WN(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=lv(t[i],r[i]);if(s)return s}return Pn(t.length,r.length)}function uv(n){return Z2(n)}function Z2(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=wf(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return bf(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Wt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Z2(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Z2(t.fields[o])}`;return i+"}"})(n.mapValue):tn(61005,{value:n})}function fb(n){switch(Ef(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=DA(n);return e?16+fb(e):16;case 5:return 2*n.stringValue.length;case 6:return bf(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+fb(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Df(r.fields,((s,o)=>{i+=s.length+fb(o)})),i})(n.mapValue);default:throw tn(13486,{value:n})}}function eI(n){return!!n&&"integerValue"in n}function vk(n){return!!n&&"arrayValue"in n}function $N(n){return!!n&&"nullValue"in n}function KN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function db(n){return!!n&&"mapValue"in n}function Ste(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[p8])===null||t===void 0?void 0:t.stringValue)===m8}function D0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Df(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=D0(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=D0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Tte(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ate}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!db(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=D0(t)}setAll(e){let t=Ss.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=D0(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());db(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _u(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];db(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Df(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Oo(D0(this.value))}}function g8(n){const e=[];return Df(n.fields,((t,r)=>{const i=new Ss([t]);if(db(r)){const s=g8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new ia(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Hs(e,0,hn.min(),hn.min(),hn.min(),Oo.empty(),0)}static newFoundDocument(e,t,r,i){return new Hs(e,1,t,hn.min(),r,i,0)}static newNoDocument(e,t){return new Hs(e,2,t,hn.min(),hn.min(),Oo.empty(),0)}static newUnknownDocument(e,t){return new Hs(e,3,t,hn.min(),hn.min(),Oo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(hn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){this.position=e,this.inclusive=t}}function JN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Wt.comparator(Wt.fromName(o.referenceValue),t.key):r=lv(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function XN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!_u(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,t="asc"){this.field=e,this.dir=t}}function Cte(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{}class $i extends v8{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Rte(e,t,r):t==="array-contains"?new kte(e,r):t==="in"?new Ote(e,r):t==="not-in"?new Dte(e,r):t==="array-contains-any"?new Nte(e,r):new $i(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ite(e,r):new Pte(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(lv(t,this.value)):t!==null&&Ef(this.value)===Ef(t)&&this.matchesComparison(lv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xu extends v8{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new xu(e,t)}matches(e){return y8(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function y8(n){return n.op==="and"}function _8(n){return Mte(n)&&y8(n)}function Mte(n){for(const e of n.filters)if(e instanceof xu)return!1;return!0}function tI(n){if(n instanceof $i)return n.field.canonicalString()+n.op.toString()+uv(n.value);if(_8(n))return n.filters.map((e=>tI(e))).join(",");{const e=n.filters.map((t=>tI(t))).join(",");return`${n.op}(${e})`}}function x8(n,e){return n instanceof $i?(function(r,i){return i instanceof $i&&r.op===i.op&&r.field.isEqual(i.field)&&_u(r.value,i.value)})(n,e):n instanceof xu?(function(r,i){return i instanceof xu&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&x8(o,i.filters[a])),!0):!1})(n,e):void tn(19439)}function w8(n){return n instanceof $i?(function(t){return`${t.field.canonicalString()} ${t.op} ${uv(t.value)}`})(n):n instanceof xu?(function(t){return t.op.toString()+" {"+t.getFilters().map(w8).join(" ,")+"}"})(n):"Filter"}class Rte extends $i{constructor(e,t,r){super(e,t,r),this.key=Wt.fromName(r.referenceValue)}matches(e){const t=Wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ite extends $i{constructor(e,t){super(e,"in",t),this.keys=b8("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Pte extends $i{constructor(e,t){super(e,"not-in",t),this.keys=b8("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function b8(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Wt.fromName(r.referenceValue)))}class kte extends $i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vk(t)&&d_(t.arrayValue,this.value)}}class Ote extends $i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&d_(this.value.arrayValue,t)}}class Dte extends $i{constructor(e,t){super(e,"not-in",t)}matches(e){if(d_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!d_(this.value.arrayValue,t)}}class Nte extends $i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vk(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>d_(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function YN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Lte(n,e,t,r,i,s,o)}function yk(n){const e=_n(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>tI(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),OA(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>uv(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>uv(r))).join(",")),e.Pe=t}return e.Pe}function _k(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Cte(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!x8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XN(n.startAt,e.startAt)&&XN(n.endAt,e.endAt)}function nI(n){return Wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Bte(n,e,t,r,i,s,o,a){return new NA(n,e,t,r,i,s,o,a)}function xk(n){return new NA(n)}function QN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fte(n){return n.collectionGroup!==null}function N0(n){const e=_n(n);if(e.Te===null){e.Te=[];const t=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ki(Ss.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new $b(s,r))})),t.has(Ss.keyField().canonicalString())||e.Te.push(new $b(Ss.keyField(),r))}return e.Te}function uu(n){const e=_n(n);return e.Ie||(e.Ie=Ute(e,N0(n))),e.Ie}function Ute(n,e){if(n.limitType==="F")return YN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new $b(i.field,s)}));const t=n.endAt?new Wb(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wb(n.startAt.position,n.startAt.inclusive):null;return YN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rI(n,e,t){return new NA(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function LA(n,e){return _k(uu(n),uu(e))&&n.limitType===e.limitType}function E8(n){return`${yk(uu(n))}|lt:${n.limitType}`}function Rg(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>w8(i))).join(", ")}]`),OA(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>uv(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>uv(i))).join(",")),`Target(${r})`})(uu(n))}; limitType=${n.limitType})`}function BA(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Wt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of N0(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const u=JN(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,N0(r),i)||r.endAt&&!(function(o,a,l){const u=JN(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,N0(r),i))})(n,e)}function jte(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function A8(n){return(e,t)=>{let r=!1;for(const i of N0(n)){const s=Vte(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Vte(n,e,t){const r=n.field.isKeyField()?Wt.comparator(e.key,t.key):(function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?lv(l,u):tn(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tn(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Df(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return l8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte=new Kr(Wt.comparator);function Hc(){return zte}const S8=new Kr(Wt.comparator);function w0(...n){let e=S8;for(const t of n)e=e.insert(t.key,t);return e}function T8(n){let e=S8;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ap(){return L0()}function C8(){return L0()}function L0(){return new tm((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Hte=new Kr(Wt.comparator),Gte=new Ki(Wt.comparator);function jn(...n){let e=Gte;for(const t of n)e=e.add(t);return e}const qte=new Ki(Pn);function Wte(){return qte}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hb(e)?"-0":e}}function M8(n){return{integerValue:""+n}}function $te(n,e){return _te(e)?M8(e):wk(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this._=void 0}}function Kte(n,e,t){return n instanceof Kb?(function(i,s){const o={fields:{[h8]:{stringValue:c8},[d8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gk(s)&&(s=DA(s)),s&&(o.fields[f8]=s),{mapValue:o}})(t,e):n instanceof p_?I8(n,e):n instanceof m_?P8(n,e):(function(i,s){const o=R8(i,s),a=ZN(o)+ZN(i.Ee);return eI(o)&&eI(i.Ee)?M8(a):wk(i.serializer,a)})(n,e)}function Jte(n,e,t){return n instanceof p_?I8(n,e):n instanceof m_?P8(n,e):t}function R8(n,e){return n instanceof Jb?(function(r){return eI(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class Kb extends FA{}class p_ extends FA{constructor(e){super(),this.elements=e}}function I8(n,e){const t=k8(e);for(const r of n.elements)t.some((i=>_u(i,r)))||t.push(r);return{arrayValue:{values:t}}}class m_ extends FA{constructor(e){super(),this.elements=e}}function P8(n,e){let t=k8(e);for(const r of n.elements)t=t.filter((i=>!_u(i,r)));return{arrayValue:{values:t}}}class Jb extends FA{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function ZN(n){return gi(n.integerValue||n.doubleValue)}function k8(n){return vk(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Xte(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof p_&&i instanceof p_||r instanceof m_&&i instanceof m_?av(r.elements,i.elements,_u):r instanceof Jb&&i instanceof Jb?_u(r.Ee,i.Ee):r instanceof Kb&&i instanceof Kb})(n.transform,e.transform)}class Yte{constructor(e,t){this.version=e,this.transformResults=t}}class Ba{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ba}static exists(e){return new Ba(void 0,e)}static updateTime(e){return new Ba(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pb(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let UA=class{};function O8(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bk(n.key,Ba.none()):new nx(n.key,n.data,Ba.none());{const t=n.data,r=Oo.empty();let i=new Ki(Ss.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Nf(n.key,r,new ia(i.toArray()),Ba.none())}}function Qte(n,e,t){n instanceof nx?(function(i,s,o){const a=i.value.clone(),l=tL(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Nf?(function(i,s,o){if(!pb(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=tL(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(D8(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function B0(n,e,t,r){return n instanceof nx?(function(s,o,a,l){if(!pb(s.precondition,o))return a;const u=s.value.clone(),c=nL(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Nf?(function(s,o,a,l){if(!pb(s.precondition,o))return a;const u=nL(s.fieldTransforms,l,o),c=o.data;return c.setAll(D8(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(n,e,t,r):(function(s,o,a){return pb(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function Zte(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=R8(r.transform,i||null);s!=null&&(t===null&&(t=Oo.empty()),t.set(r.field,s))}return t||null}function eL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&av(r,i,((s,o)=>Xte(s,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nx extends UA{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Nf extends UA{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function D8(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function tL(n,e,t){const r=new Map;or(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Jte(o,a,t[i]))}return r}function nL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Kte(s,o,e))}return r}class bk extends UA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ene extends UA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tne{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Qte(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=B0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=B0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=C8();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=O8(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(hn.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jn())}isEqual(e){return this.batchId===e.batchId&&av(this.mutations,e.mutations,((t,r)=>eL(t,r)))&&av(this.baseMutations,e.baseMutations,((t,r)=>eL(t,r)))}}class Ek{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){or(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return Hte})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ek(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nne{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rne{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii,Gn;function ine(n){switch(n){case et.OK:return tn(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return tn(15467,{code:n})}}function N8(n){if(n===void 0)return zc("GRPC error has no .code"),et.UNKNOWN;switch(n){case Ii.OK:return et.OK;case Ii.CANCELLED:return et.CANCELLED;case Ii.UNKNOWN:return et.UNKNOWN;case Ii.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case Ii.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case Ii.INTERNAL:return et.INTERNAL;case Ii.UNAVAILABLE:return et.UNAVAILABLE;case Ii.UNAUTHENTICATED:return et.UNAUTHENTICATED;case Ii.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case Ii.NOT_FOUND:return et.NOT_FOUND;case Ii.ALREADY_EXISTS:return et.ALREADY_EXISTS;case Ii.PERMISSION_DENIED:return et.PERMISSION_DENIED;case Ii.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case Ii.ABORTED:return et.ABORTED;case Ii.OUT_OF_RANGE:return et.OUT_OF_RANGE;case Ii.UNIMPLEMENTED:return et.UNIMPLEMENTED;case Ii.DATA_LOSS:return et.DATA_LOSS;default:return tn(39323,{code:n})}}(Gn=Ii||(Ii={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sne=new ff([4294967295,4294967295],0);function rL(n){const e=i8().encode(n),t=new X6;return t.update(e),new Uint8Array(t.digest())}function iL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ff([t,r],0),new ff([i,s],0)]}class Ak{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new b0(`Invalid padding: ${t}`);if(r<0)throw new b0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new b0(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new b0(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ff.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ff.fromNumber(r)));return i.compare(sne)===1&&(i=new ff([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=rL(e),[r,i]=iL(t);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Ak(s,i,t);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.fe===0)return;const t=rL(e),[r,i]=iL(t);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class b0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rx.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new jA(hn.min(),i,new Kr(Pn),Hc(),jn())}}class rx{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rx(r,t,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}}class L8{constructor(e,t){this.targetId=e,this.De=t}}class B8{constructor(e,t,r=Cs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class sL{constructor(){this.ve=0,this.Ce=oL(),this.Fe=Cs.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=jn(),t=jn(),r=jn();return this.Ce.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tn(38017,{changeType:s})}})),new rx(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=oL()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,or(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class one{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hc(),this.je=Pw(),this.Je=Pw(),this.He=new Kr(Pn)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:tn(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,i)=>{this.nt(i)&&t(i)}))}it(e){const t=e.targetId,r=e.De.count,i=this.st(t);if(i){const s=i.target;if(nI(s))if(r===0){const o=new Wt(s.path);this.Xe(t,o,Hs.newNoDocument(o,hn.min()))}else or(r===1,20013,{expectedCount:r});else{const o=this.ot(t);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=bf(r).toUint8Array()}catch(l){if(l instanceof u8)return _f("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Ak(o,i,s)}catch(l){return _f(l instanceof b0?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)})),i}Pt(e){const t=new Map;this.Ge.forEach(((s,o)=>{const a=this.st(o);if(a){if(s.current&&nI(a.target)){const l=new Wt(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,Hs.newNoDocument(l,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}}));let r=jn();this.Je.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.ze.forEach(((s,o)=>o.setReadTime(e)));const i=new jA(e,t,this.He,this.ze,r);return this.ze=Hc(),this.je=Pw(),this.Je=Pw(),this.He=new Kr(Pn),i}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new sL,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ki(Pn),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ki(Pn),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sL),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Pw(){return new Kr(Wt.comparator)}function oL(){return new Kr(Wt.comparator)}const ane={asc:"ASCENDING",desc:"DESCENDING"},lne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},une={and:"AND",or:"OR"};class cne{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iI(n,e){return n.useProto3Json||OA(e)?e:{value:e}}function Xb(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F8(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function hne(n,e){return Xb(n,e.toTimestamp())}function cu(n){return or(!!n,49232),hn.fromTimestamp((function(t){const r=wf(t);return new sr(r.seconds,r.nanos)})(n))}function Sk(n,e){return sI(n,e).canonicalString()}function sI(n,e){const t=(function(i){return new Ir(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function U8(n){const e=Ir.fromString(n);return or(G8(e),10190,{key:e.toString()}),e}function oI(n,e){return Sk(n.databaseId,e.path)}function GT(n,e){const t=U8(e);if(t.get(1)!==n.databaseId.projectId)throw new Lt(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Lt(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Wt(V8(t))}function j8(n,e){return Sk(n.databaseId,e)}function fne(n){const e=U8(n);return e.length===4?Ir.emptyPath():V8(e)}function aI(n){return new Ir(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function V8(n){return or(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function aL(n,e,t){return{name:oI(n,e),fields:t.value.mapValue.fields}}function dne(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:tn(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,c){return u.useProto3Json?(or(c===void 0||typeof c=="string",58123),Cs.fromBase64String(c||"")):(or(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Cs.fromUint8Array(c||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const c=u.code===void 0?et.UNKNOWN:N8(u.code);return new Lt(c,u.message||"")})(o);t=new B8(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=GT(n,r.document.name),s=cu(r.document.updateTime),o=r.document.createTime?cu(r.document.createTime):hn.min(),a=new Oo({mapValue:{fields:r.document.fields}}),l=Hs.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];t=new mb(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=GT(n,r.document),s=r.readTime?cu(r.readTime):hn.min(),o=Hs.newNoDocument(i,s),a=r.removedTargetIds||[];t=new mb([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=GT(n,r.document),s=r.removedTargetIds||[];t=new mb([],s,i,null)}else{if(!("filter"in e))return tn(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rne(i,s),a=r.targetId;t=new L8(a,o)}}return t}function pne(n,e){let t;if(e instanceof nx)t={update:aL(n,e.key,e.value)};else if(e instanceof bk)t={delete:oI(n,e.key)};else if(e instanceof Nf)t={update:aL(n,e.key,e.data),updateMask:Ene(e.fieldMask)};else{if(!(e instanceof ene))return tn(16599,{Rt:e.type});t={verify:oI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof Kb)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof p_)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof m_)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jb)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw tn(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:hne(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:tn(27497)})(n,e.precondition)),t}function mne(n,e){return n&&n.length>0?(or(e!==void 0,14353),n.map((t=>(function(i,s){let o=i.updateTime?cu(i.updateTime):cu(s);return o.isEqual(hn.min())&&(o=cu(s)),new Yte(o,i.transformResults||[])})(t,e)))):[]}function gne(n,e){return{documents:[j8(n,e.path)]}}function vne(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=j8(n,i);const s=(function(u){if(u.length!==0)return H8(xu.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const o=(function(u){if(u.length!==0)return u.map((c=>(function(f){return{field:Ig(f.field),direction:xne(f.dir)}})(c)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=iI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function yne(n){let e=fne(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){or(r===1,65062);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=(function(h){const f=z8(h);return f instanceof xu&&_8(f)?f.getFilters():[f]})(t.where));let o=[];t.orderBy&&(o=(function(h){return h.map((f=>(function(g){return new $b(Pg(g.field),(function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(g.direction))})(f)))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,OA(f)?null:f})(t.limit));let l=null;t.startAt&&(l=(function(h){const f=!!h.before,p=h.values||[];return new Wb(p,f)})(t.startAt));let u=null;return t.endAt&&(u=(function(h){const f=!h.before,p=h.values||[];return new Wb(p,f)})(t.endAt)),Bte(e,i,o,s,a,"F",l,u)}function _ne(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z8(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Pg(t.unaryFilter.field);return $i.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Pg(t.unaryFilter.field);return $i.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Pg(t.unaryFilter.field);return $i.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Pg(t.unaryFilter.field);return $i.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tn(61313);default:return tn(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $i.create(Pg(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tn(58110);default:return tn(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xu.create(t.compositeFilter.filters.map((r=>z8(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tn(1026)}})(t.compositeFilter.op))})(n):tn(30097,{filter:n})}function xne(n){return ane[n]}function wne(n){return lne[n]}function bne(n){return une[n]}function Ig(n){return{fieldPath:n.canonicalString()}}function Pg(n){return Ss.fromServerFormat(n.fieldPath)}function H8(n){return n instanceof $i?(function(t){if(t.op==="=="){if(KN(t.value))return{unaryFilter:{field:Ig(t.field),op:"IS_NAN"}};if($N(t.value))return{unaryFilter:{field:Ig(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KN(t.value))return{unaryFilter:{field:Ig(t.field),op:"IS_NOT_NAN"}};if($N(t.value))return{unaryFilter:{field:Ig(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ig(t.field),op:wne(t.op),value:t.value}}})(n):n instanceof xu?(function(t){const r=t.getFilters().map((i=>H8(i)));return r.length===1?r[0]:{compositeFilter:{op:bne(t.op),filters:r}}})(n):tn(54877,{filter:n})}function Ene(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function G8(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,i,s=hn.min(),o=hn.min(),a=Cs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new af(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new af(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ane{constructor(e){this.gt=e}}function Sne(n){const e=yne({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rI(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(){this.Dn=new Cne}addToCollectionParentIndex(e,t){return this.Dn.add(t),Qe.resolve()}getCollectionParents(e,t){return Qe.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Qe.resolve()}deleteFieldIndex(e,t){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,t){return Qe.resolve()}getDocumentsMatchingTarget(e,t){return Qe.resolve(null)}getIndexType(e,t){return Qe.resolve(0)}getFieldIndexes(e,t){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,t){return Qe.resolve(xf.min())}getMinOffsetFromCollectionGroup(e,t){return Qe.resolve(xf.min())}updateCollectionGroup(e,t,r){return Qe.resolve()}updateIndexEntries(e,t){return Qe.resolve()}}class Cne{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ki(Ir.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ki(Ir.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},q8=41943040;class Po{static withCacheSize(e){return new Po(e,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po.DEFAULT_COLLECTION_PERCENTILE=10,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Po.DEFAULT=new Po(q8,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Po.DISABLED=new Po(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new cv(0)}static ur(){return new cv(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL="LruGarbageCollector",Mne=1048576;function cL([n,e],[t,r]){const i=Pn(n,t);return i===0?Pn(e,r):i}class Rne{constructor(e){this.Tr=e,this.buffer=new Ki(cL),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ine{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Ct(uL,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fv(t)?Ct(uL,"Ignoring IndexedDB error during garbage collection: ",t):await Bv(t)}await this.Rr(3e5)}))}}class Pne{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Qe.resolve(kA.ue);const r=new Rne(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.gr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(lL)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lL):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,t)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(u=Date.now(),Mg()<=Un.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function kne(n,e){return new Pne(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(){this.changes=new tm((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Qe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dne{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&B0(r.mutation,i,ia.empty(),sr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,jn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=jn()){const i=ap();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let o=w0();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=ap();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,jn())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,r,i){let s=Hc();const o=L0(),a=(function(){return L0()})();return t.forEach(((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Nf)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),B0(c.mutation,u,c.mutation.getFieldMask(),sr.now())):o.set(u.key,ia.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,c)=>o.set(u,c))),t.forEach(((u,c)=>{var h;return a.set(u,new Dne(c,(h=o.get(u))!==null&&h!==void 0?h:null))})),a)))}recalculateAndSaveOverlays(e,t){const r=L0();let i=new Kr(((o,a)=>o-a)),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let c=r.get(l)||ia.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||jn()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=C8();c.forEach((f=>{if(!s.has(f)){const p=O8(t.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Qe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return Wt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fte(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Qe.resolve(ap());let a=c_,l=s;return o.next((u=>Qe.forEach(u,((c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(e,c).next((f=>{l=l.insert(c,f)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,jn()))).next((c=>({batchId:a,changes:T8(c)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wt(t)).next((r=>{let i=w0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=w0();return this.indexManager.getCollectionParents(e,s).next((a=>Qe.forEach(a,(l=>{const u=(function(h,f){return new NA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((c=>{c.forEach(((h,f)=>{o=o.insert(h,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((o=>{s.forEach(((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Hs.newInvalidDocument(c)))}));let a=w0();return o.forEach(((l,u)=>{const c=s.get(l);c!==void 0&&B0(c.mutation,u,ia.empty(),sr.now()),BA(t,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Qe.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:cu(i.createTime)}})(t)),Qe.resolve()}getNamedQuery(e,t){return Qe.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:Sne(i.bundledQuery),readTime:cu(i.readTime)}})(t)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(){this.overlays=new Kr(Wt.comparator),this.kr=new Map}getOverlay(e,t){return Qe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ap();return Qe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.wt(e,t,s)})),Qe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.kr.delete(r)),Qe.resolve()}getOverlaysForCollection(e,t,r){const i=ap(),s=t.length+1,o=new Wt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Qe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Kr(((u,c)=>u-c));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ap(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ap(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,c)=>a.set(u,c))),!(a.size()>=i)););return Qe.resolve(a)}wt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nne(t,r));let s=this.kr.get(t);s===void 0&&(s=jn(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fne{constructor(){this.sessionToken=Cs.EMPTY_BYTE_STRING}getSessionToken(e){return Qe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.qr=new Ki(cs.Qr),this.$r=new Ki(cs.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new cs(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new cs(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new Wt(new Ir([])),r=new cs(t,e),i=new cs(t,e+1),s=[];return this.$r.forEachInRange([r,i],(o=>{this.Wr(o),s.push(o.key)})),s}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Wt(new Ir([])),r=new cs(t,e),i=new cs(t,e+1);let s=jn();return this.$r.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const t=new cs(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class cs{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Wt.comparator(e.key,t.key)||Pn(e.Hr,t.Hr)}static Ur(e,t){return Pn(e.Hr,t.Hr)||Wt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ki(cs.Qr)}checkEmpty(e){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tne(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new cs(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(e,t){return Qe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?mk:this.er-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new cs(t,0),i=new cs(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],(o=>{const a=this.Zr(o.Hr);s.push(a)})),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ki(Pn);return t.forEach((i=>{const s=new cs(i,0),o=new cs(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],(a=>{r=r.add(a.Hr)}))})),Qe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Wt.isDocumentKey(s)||(s=s.child(""));const o=new cs(new Wt(s),0);let a=new Ki(Pn);return this.Yr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)}),o),Qe.resolve(this.ei(a))}ei(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){or(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Qe.forEach(t.mutations,(i=>{const s=new cs(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new cs(t,0),i=this.Yr.firstAfterOrEqual(r);return Qe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qe.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jne{constructor(e){this.ni=e,this.docs=(function(){return new Kr(Wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Qe.resolve(r?r.document.mutableCopy():Hs.newInvalidDocument(t))}getEntries(e,t){let r=Hc();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Hs.newInvalidDocument(i))})),Qe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Hc();const o=t.path,a=new Wt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||mte(pte(c),r)<=0||(i.has(c.key)||BA(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){tn(9500)}ri(e,t){return Qe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Vne(this)}getSize(e){return Qe.resolve(this.size)}}class Vne extends One{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)})),Qe.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zne{constructor(e){this.persistence=e,this.ii=new tm((t=>yk(t)),_k),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.si=0,this.oi=new Tk,this.targetCount=0,this._i=cv.ar()}forEachTarget(e,t){return this.ii.forEach(((r,i)=>t(i))),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Qe.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new cv(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Qe.resolve()}updateTargetData(e,t){return this.hr(t),Qe.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.ii.forEach(((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),Qe.waitFor(s).next((()=>i))}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return Qe.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Qe.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),Qe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Qe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return Qe.resolve(r)}containsKey(e,t){return Qe.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,t){this.ai={},this.overlays={},this.ui=new kA(0),this.ci=!1,this.ci=!0,this.li=new Fne,this.referenceDelegate=e(this),this.hi=new zne(this),this.indexManager=new Tne,this.remoteDocumentCache=(function(i){return new jne(i)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Ane(t),this.Ti=new Lne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Bne,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Une(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){Ct("MemoryPersistence","Starting transaction:",e);const i=new Hne(this.ui.next());return this.referenceDelegate.Ii(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(e,t){return Qe.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class Hne extends vte{constructor(e){super(),this.currentSequenceNumber=e}}class Ck{constructor(e){this.persistence=e,this.Ai=new Tk,this.Ri=null}static Vi(e){return new Ck(e)}get mi(){if(this.Ri)return this.Ri;throw tn(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Qe.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Qe.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((i=>this.mi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.mi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.mi,(r=>{const i=Wt.fromPath(r);return this.fi(e,i).next((s=>{s||t.removeEntry(i,hn.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return Qe.or([()=>Qe.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yb{constructor(e,t){this.persistence=e,this.gi=new tm((r=>xte(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=kne(this,t)}static Vi(e,t){return new Yb(e,t)}Ii(){}di(e){return Qe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return Qe.forEach(this.gi,((r,i)=>this.Sr(e,r,i).next((s=>s?Qe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,(o=>this.Sr(e,o,t).next((a=>{a||(r++,s.removeEntry(o,hn.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Qe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Qe.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Qe.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Qe.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fb(e.data.value)),t}Sr(e,t,r){return Qe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.gi.get(t);return Qe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=jn(),i=jn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Mk(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return mY()?8:yte(Ks())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ps(e,t).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ys(e,t,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new Gne;return this.ws(e,t,o).next((a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)}))})).next((()=>s.result))}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Mg()<=Un.DEBUG&&Ct("QueryEngine","SDK will not create cache indexes for query:",Rg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Qe.resolve()):(Mg()<=Un.DEBUG&&Ct("QueryEngine","Query:",Rg(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Mg()<=Un.DEBUG&&Ct("QueryEngine","The SDK decides to create cache indexes for query:",Rg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,uu(t))):Qe.resolve())}ps(e,t){if(QN(t))return Qe.resolve(null);let r=uu(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=rI(t,null,"F"),r=uu(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=jn(...s);return this.gs.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.bs(t,a);return this.Ds(t,u,o,l.readTime)?this.ps(e,rI(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ys(e,t,r,i){return QN(t)||i.isEqual(hn.min())?Qe.resolve(null):this.gs.getDocuments(e,r).next((s=>{const o=this.bs(t,s);return this.Ds(t,o,r,i)?Qe.resolve(null):(Mg()<=Un.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Rg(t)),this.vs(e,o,t,dte(i,c_)).next((a=>a)))}))}bs(e,t){let r=new Ki(A8(e));return t.forEach(((i,s)=>{BA(e,s)&&(r=r.add(s))})),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Mg()<=Un.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",Rg(t)),this.gs.getDocumentsMatchingQuery(e,t,xf.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="LocalStore",Wne=3e8;class $ne{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Kr(Pn),this.Ms=new tm((s=>yk(s)),_k),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nne(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function Kne(n,e,t,r){return new $ne(n,e,t,r)}async function $8(n,e){const t=_n(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=jn();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Bs:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function Jne(n,e){const t=_n(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,c){const h=u.batch,f=h.keys();let p=Qe.resolve();return f.forEach((g=>{p=p.next((()=>c.getEntry(l,g))).next((x=>{const _=u.docVersions.get(g);or(_!==null,48541),x.version.compareTo(_)<0&&(h.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),c.addEntry(x)))}))})),p.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=jn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function K8(n){const e=_n(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function Xne(n,e){const t=_n(n),r=e.snapshotVersion;let i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;const a=[];e.targetChanges.forEach(((c,h)=>{const f=i.get(h);if(!f)return;a.push(t.hi.removeMatchingKeys(s,c.removedDocuments,h).next((()=>t.hi.addMatchingKeys(s,c.addedDocuments,h))));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Cs.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),(function(x,_,v){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Wne?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0})(f,p,c)&&a.push(t.hi.updateTargetData(s,p))}));let l=Hc(),u=jn();if(e.documentUpdates.forEach((c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))})),a.push(Yne(s,o,e.documentUpdates).next((c=>{l=c.Ls,u=c.ks}))),!r.isEqual(hn.min())){const c=t.hi.getLastRemoteSnapshotVersion(s).next((h=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(c)}return Qe.waitFor(a).next((()=>o.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Fs=i,s)))}function Yne(n,e,t){let r=jn(),i=jn();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let o=Hc();return t.forEach(((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(hn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ct(Rk,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{Ls:o,ks:i}}))}function Qne(n,e){const t=_n(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=mk),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Zne(n,e){const t=_n(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.hi.getTargetData(r,e).next((s=>s?(i=s,Qe.resolve(i)):t.hi.allocateTargetId(r).next((o=>(i=new af(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function lI(n,e,t){const r=_n(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fv(o))throw o;Ct(Rk,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function hL(n,e,t){const r=_n(n);let i=hn.min(),s=jn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,c){const h=_n(l),f=h.Ms.get(c);return f!==void 0?Qe.resolve(h.Fs.get(f)):h.hi.getTargetData(u,c)})(r,o,uu(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:hn.min(),t?s:jn()))).next((a=>(ere(r,jte(e),a),{documents:a,qs:s})))))}function ere(n,e,t){let r=n.xs.get(e)||hn.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.xs.set(e,r)}class fL{constructor(){this.activeTargetIds=Wte()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tre{constructor(){this.Fo=new fL,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new fL,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="ConnectivityMonitor";class pL{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Ct(dL,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Ct(dL,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kw=null;function uI(){return kw===null?kw=(function(){return 268435456+Math.round(2147483648*Math.random())})():kw++,"0x"+kw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="RestConnection",rre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ire{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Gb?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){const o=uI(),a=this.Go(e,t.toUriEncodedString());Ct(qT,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),c=Yp(u);return this.jo(e,a,l,r,c).then((h=>(Ct(qT,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw _f(qT,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lv})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}Go(e,t){const r=rre[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sre{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="WebChannelConnection";class ore extends ire{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){const o=uI();return new Promise(((a,l)=>{const u=new Y6;u.setWithCredentials(!0),u.listenOnce(Q6.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case hb.NO_ERROR:const h=u.getResponseJson();Ct(Ns,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case hb.TIMEOUT:Ct(Ns,`RPC '${e}' ${o} timed out`),l(new Lt(et.DEADLINE_EXCEEDED,"Request time out"));break;case hb.HTTP_ERROR:const f=u.getStatus();if(Ct(Ns,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=(function(v){const b=v.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(b)>=0?b:et.UNKNOWN})(g.status);l(new Lt(x,g.message))}else l(new Lt(et.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Lt(et.UNAVAILABLE,"Connection failed."));break;default:tn(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{Ct(Ns,`RPC '${e}' ${o} completed.`)}}));const c=JSON.stringify(i);Ct(Ns,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",c,r,15)}))}P_(e,t,r){const i=uI(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=t8(),a=e8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ct(Ns,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);this.T_(h);let f=!1,p=!1;const g=new sre({Ho:_=>{p?Ct(Ns,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(f||(Ct(Ns,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),Ct(Ns,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},Yo:()=>h.close()}),x=(_,v,b)=>{_.listen(v,(E=>{try{b(E)}catch(S){setTimeout((()=>{throw S}),0)}}))};return x(h,x0.EventType.OPEN,(()=>{p||(Ct(Ns,`RPC '${e}' stream ${i} transport opened.`),g.s_())})),x(h,x0.EventType.CLOSE,(()=>{p||(p=!0,Ct(Ns,`RPC '${e}' stream ${i} transport closed`),g.__(),this.I_(h))})),x(h,x0.EventType.ERROR,(_=>{p||(p=!0,_f(Ns,`RPC '${e}' stream ${i} transport errored. Name:`,_.name,"Message:",_.message),g.__(new Lt(et.UNAVAILABLE,"The operation could not be completed")))})),x(h,x0.EventType.MESSAGE,(_=>{var v;if(!p){const b=_.data[0];or(!!b,16349);const E=b,S=(E==null?void 0:E.error)||((v=E[0])===null||v===void 0?void 0:v.error);if(S){Ct(Ns,`RPC '${e}' stream ${i} received error:`,S);const C=S.status;let D=(function(O){const R=Ii[O];if(R!==void 0)return N8(R)})(C),M=S.message;D===void 0&&(D=et.INTERNAL,M="Unknown error status: "+C+" with message "+S.message),p=!0,g.__(new Lt(D,M)),h.close()}else Ct(Ns,`RPC '${e}' stream ${i} received:`,b),g.a_(b)}})),x(a,Z6.STAT_EVENT,(_=>{_.stat===Y2.PROXY?Ct(Ns,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Y2.NOPROXY&&Ct(Ns,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{g.o_()}),0),g}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}function WT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n){return new cne(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&Ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL="PersistentStream";class X8{constructor(e,t,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new J8(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===et.RESOURCE_EXHAUSTED?(zc(t.toString()),zc("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.b_===t&&this.W_(r,i)}),(r=>{e((()=>{const i=new Lt(et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((i=>{r((()=>this.G_(i)))})),this.stream.onMessage((i=>{r((()=>++this.C_==1?this.j_(i):this.onNext(i)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Ct(mL,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(Ct(mL,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class are extends X8{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=dne(this.serializer,e),r=(function(s){if(!("targetChange"in s))return hn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?hn.min():o.readTime?cu(o.readTime):hn.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=aI(this.serializer),t.addTarget=(function(s,o){let a;const l=o.target;if(a=nI(l)?{documents:gne(s,l)}:{query:vne(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=F8(s,o.resumeToken);const u=iI(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(hn.min())>0){a.readTime=Xb(s,o.snapshotVersion.toTimestamp());const u=iI(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=_ne(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=aI(this.serializer),t.removeTarget=e,this.k_(t)}}class lre extends X8{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return or(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,or(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){or(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=mne(e.writeResults,e.commitTime),r=cu(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=aI(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>pne(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ure{}class cre extends ure{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Lt(et.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Wo(e,sI(t,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lt(et.UNKNOWN,s.toString())}))}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Jo(e,sI(t,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Lt(et.UNKNOWN,o.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class hre{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zc(t),this._a=!1):Ct("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="RemoteStore";class fre{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo((o=>{r.enqueueAndForget((async()=>{nm(this)&&(Ct(Lp,"Restarting streams for network reachability change."),await(async function(l){const u=_n(l);u.Ia.add(4),await ix(u),u.Aa.set("Unknown"),u.Ia.delete(4),await zA(u)})(this))}))})),this.Aa=new hre(r,i)}}async function zA(n){if(nm(n))for(const e of n.da)await e(!0)}async function ix(n){for(const e of n.da)await e(!1)}function Y8(n,e){const t=_n(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Ok(t)?kk(t):Uv(t).x_()&&Pk(t,e))}function Ik(n,e){const t=_n(n),r=Uv(t);t.Ta.delete(e),r.x_()&&Q8(t,e),t.Ta.size===0&&(r.x_()?r.B_():nm(t)&&t.Aa.set("Unknown"))}function Pk(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(hn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uv(n).H_(e)}function Q8(n,e){n.Ra.$e(e),Uv(n).Y_(e)}function kk(n){n.Ra=new one({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Uv(n).start(),n.Aa.aa()}function Ok(n){return nm(n)&&!Uv(n).M_()&&n.Ta.size>0}function nm(n){return _n(n).Ia.size===0}function Z8(n){n.Ra=void 0}async function dre(n){n.Aa.set("Online")}async function pre(n){n.Ta.forEach(((e,t)=>{Pk(n,e)}))}async function mre(n,e){Z8(n),Ok(n)?(n.Aa.la(e),kk(n)):n.Aa.set("Unknown")}async function gre(n,e,t){if(n.Aa.set("Online"),e instanceof B8&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){Ct(Lp,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qb(n,r)}else if(e instanceof mb?n.Ra.Ye(e):e instanceof L8?n.Ra.it(e):n.Ra.et(e),!t.isEqual(hn.min()))try{const r=await K8(n.localStore);t.compareTo(r)>=0&&await(function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ta.get(u);c&&s.Ta.set(u,c.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const c=s.Ta.get(l);if(!c)return;s.Ta.set(l,c.withResumeToken(Cs.EMPTY_BYTE_STRING,c.snapshotVersion)),Q8(s,l);const h=new af(c.target,l,u,c.sequenceNumber);Pk(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){Ct(Lp,"Failed to raise snapshot:",r),await Qb(n,r)}}async function Qb(n,e,t){if(!Fv(e))throw e;n.Ia.add(1),await ix(n),n.Aa.set("Offline"),t||(t=()=>K8(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ct(Lp,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await zA(n)}))}function ez(n,e){return e().catch((t=>Qb(n,t,e)))}async function HA(n){const e=_n(n),t=Af(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mk;for(;vre(e);)try{const i=await Qne(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,yre(e,i)}catch(i){await Qb(e,i)}tz(e)&&nz(e)}function vre(n){return nm(n)&&n.Pa.length<10}function yre(n,e){n.Pa.push(e);const t=Af(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function tz(n){return nm(n)&&!Af(n).M_()&&n.Pa.length>0}function nz(n){Af(n).start()}async function _re(n){Af(n).na()}async function xre(n){const e=Af(n);for(const t of n.Pa)e.X_(t.mutations)}async function wre(n,e,t){const r=n.Pa.shift(),i=Ek.from(r,e,t);await ez(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await HA(n)}async function bre(n,e){e&&Af(n).Z_&&await(async function(r,i){if((function(o){return ine(o)&&o!==et.ABORTED})(i.code)){const s=r.Pa.shift();Af(r).N_(),await ez(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await HA(r)}})(n,e),tz(n)&&nz(n)}async function gL(n,e){const t=_n(n);t.asyncQueue.verifyOperationInProgress(),Ct(Lp,"RemoteStore received new credentials");const r=nm(t);t.Ia.add(3),await ix(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await zA(t)}async function Ere(n,e){const t=_n(n);e?(t.Ia.delete(2),await zA(t)):e||(t.Ia.add(2),await ix(t),t.Aa.set("Unknown"))}function Uv(n){return n.Va||(n.Va=(function(t,r,i){const s=_n(t);return s.ia(),new are(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:dre.bind(null,n),e_:pre.bind(null,n),n_:mre.bind(null,n),J_:gre.bind(null,n)}),n.da.push((async e=>{e?(n.Va.N_(),Ok(n)?kk(n):n.Aa.set("Unknown")):(await n.Va.stop(),Z8(n))}))),n.Va}function Af(n){return n.ma||(n.ma=(function(t,r,i){const s=_n(t);return s.ia(),new lre(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:_re.bind(null,n),n_:bre.bind(null,n),ea:xre.bind(null,n),ta:wre.bind(null,n)}),n.da.push((async e=>{e?(n.ma.N_(),await HA(n)):(await n.ma.stop(),n.Pa.length>0&&(Ct(Lp,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new Dk(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Lt(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nk(n,e){if(zc("AsyncQueue",`${e}: ${n}`),Fv(n))return new Lt(et.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{static emptySet(e){return new Qg(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Wt.comparator(t.key,r.key):(t,r)=>Wt.comparator(t.key,r.key),this.keyedMap=w0(),this.sortedSet=new Kr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Qg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.fa=new Kr(Wt.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):tn(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class hv{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new hv(e,t,Qg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&LA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class Sre{constructor(){this.queries=yL(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const i=_n(t),s=i.queries;i.queries=yL(),s.forEach(((o,a)=>{for(const l of a.wa)l.onError(r)}))})(this,new Lt(et.ABORTED,"Firestore shutting down"))}}function yL(){return new tm((n=>E8(n)),LA)}async function rz(n,e){const t=_n(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new Are,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=Nk(o,`Initialization of query '${Rg(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&Lk(t)}async function iz(n,e){const t=_n(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Tre(n,e){const t=_n(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Lk(t)}function Cre(n,e,t){const r=_n(n),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(t);r.queries.delete(e)}function Lk(n){n.Da.forEach((e=>{e.next()}))}var cI,_L;(_L=cI||(cI={})).Fa="default",_L.Cache="cache";class sz{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=hv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cI.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e){this.key=e}}class az{constructor(e){this.key=e}}class Mre{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=jn(),this.mutatedKeys=jn(),this.Xa=A8(e),this.eu=new Qg(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new vL,i=t?t.eu:this.eu;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((c,h)=>{const f=i.get(c),p=BA(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;f&&p?f.data.isEqual(p.data)?g!==x&&(r.track({type:3,doc:p}),_=!0):this.iu(f,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.Xa(p,l)>0||u&&this.Xa(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),_=!0):f&&!p&&(r.track({type:1,doc:f}),_=!0,(l||u)&&(a=!0)),_&&(p?(o=o.add(p),s=x?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort(((c,h)=>(function(p,g){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn(20277,{At:_})}};return x(p)-x(g)})(c.type,h.type)||this.Xa(c.doc,h.doc))),this.su(r),i=i!=null&&i;const a=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new hv(this.query,e.eu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new vL,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=jn(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new az(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new oz(r))})),t}uu(e){this.Ha=e.qs,this.Za=jn();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return hv.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Bk="SyncEngine";class Rre{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ire{constructor(e){this.key=e,this.lu=!1}}class Pre{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new tm((a=>E8(a)),LA),this.Tu=new Map,this.Iu=new Set,this.du=new Kr(Wt.comparator),this.Eu=new Map,this.Au=new Tk,this.Ru={},this.Vu=new Map,this.mu=cv.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function kre(n,e,t=!0){const r=dz(n);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await lz(r,e,t,!0),i}async function Ore(n,e){const t=dz(n);await lz(t,e,!0,!1)}async function lz(n,e,t,r){const i=await Zne(n.localStore,uu(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await Dre(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Y8(n.remoteStore,i),a}async function Dre(n,e,t,r,i){n.gu=(h,f,p)=>(async function(x,_,v,b){let E=_.view.nu(v);E.Ds&&(E=await hL(x.localStore,_.query,!1).then((({documents:M})=>_.view.nu(M,E))));const S=b&&b.targetChanges.get(_.targetId),C=b&&b.targetMismatches.get(_.targetId)!=null,D=_.view.applyChanges(E,x.isPrimaryClient,S,C);return wL(x,_.targetId,D._u),D.snapshot})(n,h,f,p);const s=await hL(n.localStore,e,!0),o=new Mre(e,s.qs),a=o.nu(s.documents),l=rx.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);wL(n,t,u._u);const c=new Rre(e,t,o);return n.Pu.set(e,c),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot}async function Nre(n,e,t){const r=_n(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter((o=>!LA(o,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lI(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ik(r.remoteStore,i.targetId),hI(r,i.targetId)})).catch(Bv)):(hI(r,i.targetId),await lI(r.localStore,i.targetId,!0))}async function Lre(n,e){const t=_n(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ik(t.remoteStore,r.targetId))}async function Bre(n,e,t){const r=Gre(n);try{const i=await(function(o,a){const l=_n(o),u=sr.now(),c=a.reduce(((p,g)=>p.add(g.key)),jn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let g=Hc(),x=jn();return l.Os.getEntries(p,c).next((_=>{g=_,g.forEach(((v,b)=>{b.isValidDocument()||(x=x.add(v))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,g))).next((_=>{h=_;const v=[];for(const b of a){const E=Zte(b,h.get(b.key).overlayedDocument);E!=null&&v.push(new Nf(b.key,E,g8(E.value.mapValue),Ba.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,a)})).next((_=>{f=_;const v=_.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,_.batchId,v)}))})).then((()=>({batchId:f.batchId,changes:T8(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new Kr(Pn)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,t),await sx(r,i.changes),await HA(r.remoteStore)}catch(i){const s=Nk(i,"Failed to persist write");t.reject(s)}}async function uz(n,e){const t=_n(n);try{const r=await Xne(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=t.Eu.get(s);o&&(or(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?or(o.lu,14607):i.removedDocuments.size>0&&(or(o.lu,42227),o.lu=!1))})),await sx(t,r,e)}catch(r){await Bv(r)}}function xL(n,e,t){const r=_n(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Pu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=_n(o);l.onlineState=a;let u=!1;l.queries.forEach(((c,h)=>{for(const f of h.wa)f.va(a)&&(u=!0)})),u&&Lk(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fre(n,e,t){const r=_n(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Kr(Wt.comparator);o=o.insert(s,Hs.newNoDocument(s,hn.min()));const a=jn().add(s),l=new jA(hn.min(),new Map,new Kr(Pn),o,a);await uz(r,l),r.du=r.du.remove(s),r.Eu.delete(e),Fk(r)}else await lI(r.localStore,e,!1).then((()=>hI(r,e,t))).catch(Bv)}async function Ure(n,e){const t=_n(n),r=e.batch.batchId;try{const i=await Jne(t.localStore,e);hz(t,r,null),cz(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await sx(t,i)}catch(i){await Bv(i)}}async function jre(n,e,t){const r=_n(n);try{const i=await(function(o,a){const l=_n(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next((h=>(or(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c))).next((()=>l.localDocuments.getDocuments(u,c)))}))})(r.localStore,e);hz(r,e,t),cz(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await sx(r,i)}catch(i){await Bv(i)}}function cz(n,e){(n.Vu.get(e)||[]).forEach((t=>{t.resolve()})),n.Vu.delete(e)}function hz(n,e,t){const r=_n(n);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function hI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach((r=>{n.Au.containsKey(r)||fz(n,r)}))}function fz(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ik(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Fk(n))}function wL(n,e,t){for(const r of t)r instanceof oz?(n.Au.addReference(r.key,e),Vre(n,r)):r instanceof az?(Ct(Bk,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||fz(n,r.key)):tn(19791,{yu:r})}function Vre(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(Ct(Bk,"New document in limbo: "+t),n.Iu.add(r),Fk(n))}function Fk(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Wt(Ir.fromString(e)),r=n.mu.next();n.Eu.set(r,new Ire(t)),n.du=n.du.insert(t,r),Y8(n.remoteStore,new af(uu(xk(t.path)),r,"TargetPurposeLimboResolution",kA.ue))}}async function sx(n,e,t){const r=_n(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach(((a,l)=>{o.push(r.gu(l,e,t).then((u=>{var c;if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Mk.Es(l.targetId,u);s.push(h)}})))})),await Promise.all(o),r.hu.J_(i),await(async function(l,u){const c=_n(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>Qe.forEach(u,(f=>Qe.forEach(f.Is,(p=>c.persistence.referenceDelegate.addReference(h,f.targetId,p))).next((()=>Qe.forEach(f.ds,(p=>c.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))))))}catch(h){if(!Fv(h))throw h;Ct(Rk,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const p=c.Fs.get(f),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);c.Fs=c.Fs.insert(f,x)}}})(r.localStore,s))}async function zre(n,e){const t=_n(n);if(!t.currentUser.isEqual(e)){Ct(Bk,"User change. New user:",e.toKey());const r=await $8(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach((a=>{a.forEach((l=>{l.reject(new Lt(et.CANCELLED,o))}))})),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sx(t,r.Bs)}}function Hre(n,e){const t=_n(n),r=t.Eu.get(e);if(r&&r.lu)return jn().add(r.key);{let i=jn();const s=t.Tu.get(e);if(!s)return i;for(const o of s){const a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function dz(n){const e=_n(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uz.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fre.bind(null,e),e.hu.J_=Tre.bind(null,e.eventManager),e.hu.pu=Cre.bind(null,e.eventManager),e}function Gre(n){const e=_n(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ure.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jre.bind(null,e),e}class Zb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=VA(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Kne(this.persistence,new qne,e.initialUser,this.serializer)}Du(e){return new W8(Ck.Vi,this.serializer)}bu(e){return new tre}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zb.provider={build:()=>new Zb};class qre extends Zb{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){or(this.persistence.referenceDelegate instanceof Yb,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ine(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Po.withCacheSize(this.cacheSizeBytes):Po.DEFAULT;return new W8((r=>Yb.Vi(r,t)),this.serializer)}}class fI{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xL(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zre.bind(null,this.syncEngine),await Ere(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Sre})()}createDatastore(e){const t=VA(e.databaseInfo.databaseId),r=(function(s){return new ore(s)})(e.databaseInfo);return(function(s,o,a,l){return new cre(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,o,a){return new fre(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>xL(this.syncEngine,t,0)),(function(){return pL.C()?new pL:new nre})())}createSyncEngine(e,t){return(function(i,s,o,a,l,u,c){const h=new Pre(i,s,o,a,l,u);return c&&(h.fu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=_n(i);Ct(Lp,"RemoteStore shutting down."),s.Ia.add(5),await ix(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}fI.provider={build:()=>new fI};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zc("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="FirestoreClient";class Wre{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zs.UNAUTHENTICATED,this.clientId=dk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{Ct(Sf,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Ct(Sf,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Nk(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function $T(n,e){n.asyncQueue.verifyOperationInProgress(),Ct(Sf,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await $8(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>{_f("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then((()=>{Ct("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((i=>{_f("Terminating Firestore due to IndexedDb database deletion failed",i)}))})),n._offlineComponents=e}async function bL(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $re(n);Ct(Sf,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>gL(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>gL(e.remoteStore,i))),n._onlineComponents=e}async function $re(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ct(Sf,"Using user provided OfflineComponentProvider");try{await $T(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===et.FAILED_PRECONDITION||i.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;_f("Error using user provided cache. Falling back to memory cache: "+t),await $T(n,new Zb)}}else Ct(Sf,"Using default OfflineComponentProvider"),await $T(n,new qre(void 0));return n._offlineComponents}async function mz(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ct(Sf,"Using user provided OnlineComponentProvider"),await bL(n,n._uninitializedComponentsProvider._online)):(Ct(Sf,"Using default OnlineComponentProvider"),await bL(n,new fI))),n._onlineComponents}function Kre(n){return mz(n).then((e=>e.syncEngine))}async function gz(n){const e=await mz(n),t=e.eventManager;return t.onListen=kre.bind(null,e.syncEngine),t.onUnlisten=Nre.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ore.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lre.bind(null,e.syncEngine),t}function Jre(n,e,t={}){const r=new Oc;return n.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new pz({next:f=>{c.Ou(),o.enqueueAndForget((()=>iz(s,h)));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new Lt(et.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new Lt(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new sz(xk(a.path),c,{includeMetadataChanges:!0,ka:!0});return rz(s,h)})(await gz(n),n.asyncQueue,e,t,r))),r.promise}function Xre(n,e,t={}){const r=new Oc;return n.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new pz({next:f=>{c.Ou(),o.enqueueAndForget((()=>iz(s,h))),f.fromCache&&l.source==="server"?u.reject(new Lt(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new sz(a,c,{includeMetadataChanges:!0,ka:!0});return rz(s,h)})(await gz(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="firestore.googleapis.com",AL=!0;class SL{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Lt(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yz,this.ssl=AL}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:AL;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=q8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Mne)throw new Lt(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vz((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Lt(et.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class GA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SL({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Lt(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Lt(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SL(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new rte;switch(r.type){case"firstParty":return new ate(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Lt(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=EL.get(t);r&&(Ct("ComponentProvider","Removing Datastore"),EL.delete(t),r.terminate())})(this),Promise.resolve()}}function Yre(n,e,t,r={}){var i;n=kl(n,GA);const s=Yp(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;s&&(QP(`https://${l}`),ZP("Firestore",!0)),o.host!==yz&&o.host!==l&&_f("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Ip(u,a)&&(n._setSettings(u),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=zs.MOCK_USER;else{c=L9(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Lt(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new zs(f)}n._authCredentials=new ite(new r8(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _z=class xz{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xz(this.firestore,e,this._query)}};class Ni{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new df(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ni(this.firestore,e,this._key)}toJSON(){return{type:Ni._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(tx(t,Ni._jsonSchema))return new Ni(e,r||null,new Wt(Ir.fromString(t.referencePath)))}}Ni._jsonSchemaVersion="firestore/documentReference/1.0",Ni._jsonSchema={type:Di("string",Ni._jsonSchemaVersion),referencePath:Di("string")};class df extends _z{constructor(e,t,r){super(e,t,xk(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ni(this.firestore,null,new Wt(e))}withConverter(e){return new df(this.firestore,e,this._path)}}function Jr(n,e,...t){if(n=Li(n),s8("collection","path",e),n instanceof GA){const r=Ir.fromString(e,...t);return UN(r),new df(n,null,r)}{if(!(n instanceof Ni||n instanceof df))throw new Lt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ir.fromString(e,...t));return UN(r),new df(n.firestore,null,r)}}function qr(n,e,...t){if(n=Li(n),arguments.length===1&&(e=dk.newId()),s8("doc","path",e),n instanceof GA){const r=Ir.fromString(e,...t);return FN(r),new Ni(n,null,new Wt(r))}{if(!(n instanceof Ni||n instanceof df))throw new Lt(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ir.fromString(e,...t));return FN(r),new Ni(n.firestore,n instanceof df?n.converter:null,new Wt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="AsyncQueue";class CL{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new J8(this,"async_queue_retry"),this.oc=()=>{const r=WT();r&&Ct(TL,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=WT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=WT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new Oc;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fv(e))throw e;Ct(TL,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,zc("INTERNAL UNHANDLED ERROR: ",ML(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=Dk.createAndSchedule(this,e,t,r,(s=>this.lc(s)));return this.ec.push(i),i}ac(){this.tc&&tn(47125,{hc:ML(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function ML(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class rm extends GA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CL(e),this._firestoreClient=void 0,await e}}}function Qre(n,e){const t=typeof n=="object"?n:nk(),r=typeof n=="string"?n:Gb,i=CA(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=O9("firestore");s&&Yre(i,...s)}return i}function Uk(n){if(n._terminated)throw new Lt(et.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Zre(n),n._firestoreClient}function Zre(n){var e,t,r;const i=n._freezeSettings(),s=(function(a,l,u,c){return new Ete(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,vz(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Wre(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ka(Cs.fromBase64String(e))}catch(t){throw new Lt(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ka(Cs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ka._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tx(e,ka._jsonSchema))return ka.fromBase64String(e.bytes)}}ka._jsonSchemaVersion="firestore/bytes/1.0",ka._jsonSchema={type:Di("string",ka._jsonSchemaVersion),bytes:Di("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Lt(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ss(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lt(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lt(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pn(this._lat,e._lat)||Pn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hu._jsonSchemaVersion}}static fromJSON(e){if(tx(e,hu._jsonSchema))return new hu(e.latitude,e.longitude)}}hu._jsonSchemaVersion="firestore/geoPoint/1.0",hu._jsonSchema={type:Di("string",hu._jsonSchemaVersion),latitude:Di("number"),longitude:Di("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tx(e,fu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fu(e.vectorValues);throw new Lt(et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fu._jsonSchemaVersion="firestore/vectorValue/1.0",fu._jsonSchema={type:Di("string",fu._jsonSchemaVersion),vectorValues:Di("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eie=/^__.*__$/;class tie{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nf(e,this.data,this.fieldMask,t,this.fieldTransforms):new nx(e,this.data,t,this.fieldTransforms)}}class wz{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bz(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn(40011,{Ec:n})}}class Vk{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Vk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return eE(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bz(this.Ec)&&eie.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class nie{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||VA(e)}Dc(e,t,r,i=!1){return new Vk({Ec:e,methodName:t,bc:r,path:Ss.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zk(n){const e=n._freezeSettings(),t=VA(n._databaseId);return new nie(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ez(n,e,t,r,i,s={}){const o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Hk("Data must be an object, but it was:",o,r);const a=Az(r,o);let l,u;if(s.merge)l=new ia(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const f=dI(e,h,t);if(!o.contains(f))throw new Lt(et.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Tz(c,f)||c.push(f)}l=new ia(c),u=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,u=o.fieldTransforms;return new tie(new Oo(a),l,u)}class WA extends jk{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof WA}}function rie(n,e,t,r){const i=n.Dc(1,e,t);Hk("Data must be an object, but it was:",i,r);const s=[],o=Oo.empty();Df(r,((l,u)=>{const c=Gk(e,l,t);u=Li(u);const h=i.gc(c);if(u instanceof WA)s.push(c);else{const f=$A(u,h);f!=null&&(s.push(c),o.set(c,f))}}));const a=new ia(s);return new wz(o,a,i.fieldTransforms)}function iie(n,e,t,r,i,s){const o=n.Dc(1,e,t),a=[dI(e,r,t)],l=[i];if(s.length%2!=0)throw new Lt(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(dI(e,s[f])),l.push(s[f+1]);const u=[],c=Oo.empty();for(let f=a.length-1;f>=0;--f)if(!Tz(u,a[f])){const p=a[f];let g=l[f];g=Li(g);const x=o.gc(p);if(g instanceof WA)u.push(p);else{const _=$A(g,x);_!=null&&(u.push(p),c.set(p,_))}}const h=new ia(u);return new wz(c,h,o.fieldTransforms)}function $A(n,e){if(Sz(n=Li(n)))return Hk("Unsupported field value:",e,n),Az(n,e);if(n instanceof jk)return(function(r,i){if(!bz(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=$A(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Li(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $te(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=sr.fromDate(r);return{timestampValue:Xb(i.serializer,s)}}if(r instanceof sr){const s=new sr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xb(i.serializer,s)}}if(r instanceof hu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ka)return{bytesValue:F8(i.serializer,r._byteString)};if(r instanceof Ni){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sk(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fu)return(function(o,a){return{mapValue:{fields:{[p8]:{stringValue:m8},[qb]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return wk(a.serializer,u)}))}}}}}})(r,i);throw i.wc(`Unsupported field value: ${pk(r)}`)})(n,e)}function Az(n,e){const t={};return l8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Df(n,((r,i)=>{const s=$A(i,e.Vc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Sz(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof sr||n instanceof hu||n instanceof ka||n instanceof Ni||n instanceof jk||n instanceof fu)}function Hk(n,e,t){if(!Sz(t)||!o8(t)){const r=pk(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function dI(n,e,t){if((e=Li(e))instanceof qA)return e._internalPath;if(typeof e=="string")return Gk(n,e);throw eE("Field path arguments must be of type string or ",n,!1,void 0,t)}const sie=new RegExp("[~\\*/\\[\\]]");function Gk(n,e,t){if(e.search(sie)>=0)throw eE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qA(...e.split("."))._internalPath}catch{throw eE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function eE(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Lt(et.INVALID_ARGUMENT,a+n+l)}function Tz(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ni(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mz("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oie extends Cz{data(){return super.data()}}function Mz(n,e){return typeof e=="string"?Gk(n,e):e instanceof qA?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aie(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Lt(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lie{convertValue(e,t="none"){switch(Ef(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tn(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Df(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[qb].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>gi(o.doubleValue)));return new fu(s)}convertGeoPoint(e){return new hu(gi(e.latitude),gi(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DA(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(h_(e));default:return null}}convertTimestamp(e){const t=wf(e);return new sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ir.fromString(e);or(G8(r),9688,{name:e});const i=new f_(r.get(1),r.get(3)),s=new Wt(r.popFirst(5));return i.isEqual(t)||zc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class E0{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xp extends Cz{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new gb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mz("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xp._jsonSchemaVersion="firestore/documentSnapshot/1.0",xp._jsonSchema={type:Di("string",xp._jsonSchemaVersion),bundleSource:Di("string","DocumentSnapshot"),bundleName:Di("string"),bundle:Di("string")};class gb extends xp{data(e={}){return super.data(e)}}class Zg{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new E0(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new gb(this._firestore,this._userDataWriter,r.key,r,new E0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lt(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new gb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new E0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new gb(i._firestore,i._userDataWriter,a.doc.key,a.doc,new E0(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:uie(a.type),doc:l,oldIndex:u,newIndex:c}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dk.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uie(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(n){n=kl(n,Ni);const e=kl(n.firestore,rm);return Jre(Uk(e),n._key).then((t=>cie(e,n,t)))}Zg._jsonSchemaVersion="firestore/querySnapshot/1.0",Zg._jsonSchema={type:Di("string",Zg._jsonSchemaVersion),bundleSource:Di("string","QuerySnapshot"),bundleName:Di("string"),bundle:Di("string")};class Iz extends lie{constructor(e){super(),this.firestore=e}convertBytes(e){return new ka(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,t)}}function Js(n){n=kl(n,_z);const e=kl(n.firestore,rm),t=Uk(e),r=new Iz(e);return aie(n._query),Xre(t,n._query).then((i=>new Zg(e,r,n,i)))}function qk(n,e,t){n=kl(n,Ni);const r=kl(n.firestore,rm),i=Rz(n.converter,e);return KA(r,[Ez(zk(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ba.none())])}function fv(n,e,t,...r){n=kl(n,Ni);const i=kl(n.firestore,rm),s=zk(i);let o;return o=typeof(e=Li(e))=="string"||e instanceof qA?iie(s,"updateDoc",n._key,e,t,r):rie(s,"updateDoc",n._key,e),KA(i,[o.toMutation(n._key,Ba.exists(!0))])}function Tf(n){return KA(kl(n.firestore,rm),[new bk(n._key,Ba.none())])}function Bp(n,e){const t=kl(n.firestore,rm),r=qr(n),i=Rz(n.converter,e);return KA(t,[Ez(zk(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ba.exists(!1))]).then((()=>r))}function KA(n,e){return(function(r,i){const s=new Oc;return r.asyncQueue.enqueueAndForget((async()=>Bre(await Kre(r),i,s))),s.promise})(Uk(n),e)}function cie(n,e,t){const r=t.docs.get(e._key),i=new Iz(n);return new xp(n,i,e._key,r,new E0(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Lv=i})(Qp),Pp(new yf("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rm(new ste(r.getProvider("auth-internal")),new lte(o,r.getProvider("app-check-internal")),(function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Lt(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new f_(u.options.projectId,c)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),ou(ON,DN,e),ou(ON,DN,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="firebasestorage.googleapis.com",hie="storageBucket",fie=120*1e3,die=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf=class kz extends Su{constructor(e,t,r=0){super(KT(e),`Firebase Storage: ${t} (${KT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kz.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var wu;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wu||(wu={}));function KT(n){return"storage/"+n}function pie(){const n="An unknown error occurred, please check the error payload for server response.";return new Lf(wu.UNKNOWN,n)}function mie(){return new Lf(wu.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gie(){return new Lf(wu.CANCELED,"User canceled the upload/download.")}function vie(n){return new Lf(wu.INVALID_URL,"Invalid URL '"+n+"'.")}function yie(n){return new Lf(wu.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function RL(n){return new Lf(wu.INVALID_ARGUMENT,n)}function Oz(){return new Lf(wu.APP_DELETED,"The Firebase app was deleted.")}function _ie(n){return new Lf(wu.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cl.makeFromUrl(e,t)}catch{return new Cl(e,"")}if(r.path==="")return r;throw yie(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(S){S.path_=decodeURIComponent(S.path)}const c="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${c}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},x=t===Pz?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",v=new RegExp(`^https?://${x}/${i}/${_}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let S=0;S<E.length;S++){const C=E[S],D=C.regex.exec(e);if(D){const M=D[C.indices.bucket];let P=D[C.indices.path];P||(P=""),r=new Cl(M,P),C.postModify(r);break}}if(r==null)throw vie(e);return r}}class xie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wie(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(..._){u||(u=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,n(p,l())},_)}function f(){s&&clearTimeout(s)}function p(_,...v){if(u){f();return}if(_){f(),c.call(null,_,...v);return}if(l()||o){f(),c.call(null,_,...v);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,h(E)}let g=!1;function x(_){g||(g=!0,f(),!u&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},t),x}function bie(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eie(n){return n!==void 0}function IL(n,e,t,r){if(r<e)throw RL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw RL(`Invalid value for '${n}'. Expected ${t} or less.`)}function Aie(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var tE;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(tE||(tE={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tie{constructor(e,t,r,i,s,o,a,l,u,c,h,f=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ow(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===tE.NO_ERROR,l=s.getStatus();if(!a||Sie(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===tE.ABORT;r(!1,new Ow(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ow(u,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Eie(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=pie();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Oz():gie();o(l)}else{const l=mie();o(l)}};this.canceled_?t(!1,new Ow(!1,null,!0)):this.backoffId_=wie(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ow{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Cie(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Mie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Rie(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Iie(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Pie(n,e,t,r,i,s,o=!0,a=!1){const l=Aie(n.urlParams),u=n.url+l,c=Object.assign({},n.headers);return Rie(c,e),Cie(c,t),Mie(c,s),Iie(c,r),new Tie(u,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kie(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Oie(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Die=class pI{constructor(e,t){this._service=e,t instanceof Cl?this._location=t:this._location=Cl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pI(e,t)}get root(){const e=new Cl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Oie(this._location.path)}get storage(){return this._service}get parent(){const e=kie(this._location.path);if(e===null)return null;const t=new Cl(this._location.bucket,e);return new pI(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw _ie(e)}};function PL(n,e){const t=e==null?void 0:e[hie];return t==null?null:Cl.makeFromBucketSpec(t,n)}function Nie(n,e,t,r={}){n.host=`${e}:${t}`;const i=Yp(e);i&&(QP(`https://${n.host}/b`),ZP("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:L9(s,n.app.options.projectId))}class Lie{constructor(e,t,r,i,s,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Pz,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fie,this._maxUploadRetryTime=die,this._requests=new Set,i!=null?this._bucket=Cl.makeFromBucketSpec(i,this._host):this._bucket=PL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cl.makeFromBucketSpec(this._url,e):this._bucket=PL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ta(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Die(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new xie(Oz());{const o=Pie(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const kL="@firebase/storage",OL="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz="storage";function Bie(n=nk(),e){n=Li(n);const r=CA(n,Dz).getImmediate({identifier:e}),i=O9("storage");return i&&Fie(r,...i),r}function Fie(n,e,t,r={}){Nie(n,e,t,r)}function Uie(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Lie(t,r,i,e,Qp)}function jie(){Pp(new yf(Dz,Uie,"PUBLIC").setMultipleInstances(!0)),ou(kL,OL,""),ou(kL,OL,"esm2017")}jie();const Vie={apiKey:"AIzaSyC9C7-V8BDscp9IZj5O3u9YE4L7FvM9wu8",authDomain:"sahajshakya-12643.firebaseapp.com",projectId:"sahajshakya-12643",storageBucket:"sahajshakya-12643.firebasestorage.app",messagingSenderId:"719600661086",appId:"1:719600661086:web:fc4ae3968d123782e77acf",measurementId:"G-THGG2PYM9D"},Wk=U9(Vie),bc=ex(Wk),sn=Qre(Wk);Bie(Wk);const zie="modulepreload",Hie=function(n){return"/"+n},DL={},jv=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(t.map(u=>{if(u=Hie(u),u in DL)return;DL[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":zie,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Gie=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jv(async()=>{const{default:r}=await Promise.resolve().then(()=>im);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class $k extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class NL extends $k{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class LL extends $k{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BL extends $k{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mI;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(mI||(mI={}));class qie{constructor(e,{headers:t={},customFetch:r,region:i=mI.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Gie(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Rt(this,arguments,void 0,function*(t,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let u={},{region:c}=r;c||(c=this.region);const h=new URL(`${this.url}/${t}`);c&&c!=="any"&&(u["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(u["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(u["Content-Type"]="application/json",f=JSON.stringify(a)):f=a;const p=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f,signal:l}).catch(v=>{throw v.name==="AbortError"?v:new NL(v)}),g=p.headers.get("x-relay-error");if(g&&g==="true")throw new LL(p);if(!p.ok)throw new BL(p);let x=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield p.json():x==="application/octet-stream"||x==="application/pdf"?_=yield p.blob():x==="text/event-stream"?_=p:x==="multipart/form-data"?_=yield p.formData():_=yield p.text(),{data:_,error:null,response:p}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new NL(s)}:{data:null,error:s,response:s instanceof BL||s instanceof LL?s.context:void 0}}})}}var Ls={};const Vv=HP(LQ);var Dw={},Nw={},Lw={},Bw={},Fw={},Wie=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},dv=Wie();const $ie=dv.fetch,Nz=dv.fetch.bind(dv),Lz=dv.Headers,Kie=dv.Request,Jie=dv.Response,im=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lz,Request:Kie,Response:Jie,default:Nz,fetch:$ie},Symbol.toStringTag,{value:"Module"})),Xie=HP(im);var Uw={},FL;function Bz(){if(FL)return Uw;FL=1,Object.defineProperty(Uw,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Uw.default=n,Uw}var UL;function Fz(){if(UL)return Fw;UL=1,Object.defineProperty(Fw,"__esModule",{value:!0});const n=Vv,e=n.__importDefault(Xie),t=n.__importDefault(Bz());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,f,p;let g=null,x=null,_=null,v=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?x=D:x=JSON.parse(D))}const S=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),C=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");S&&C&&C.length>1&&(_=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(g={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,_=null,v=406,b="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const S=await u.text();try{g=JSON.parse(S),Array.isArray(g)&&u.status===404&&(x=[],g=null,v=200,b="OK")}catch{u.status===404&&S===""?(v=204,b="No Content"):g={message:S}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,v=200,b="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:x,count:_,status:v,statusText:b}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,f;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return Fw.default=r,Fw}var jL;function Uz(){if(jL)return Bw;jL=1,Object.defineProperty(Bw,"__esModule",{value:!0});const e=Vv.__importDefault(Fz());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Bw.default=t,Bw}var VL;function Kk(){if(VL)return Lw;VL=1,Object.defineProperty(Lw,"__esModule",{value:!0});const e=Vv.__importDefault(Uz());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Lw.default=t,Lw}var zL;function jz(){if(zL)return Nw;zL=1,Object.defineProperty(Nw,"__esModule",{value:!0});const e=Vv.__importDefault(Kk());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let u=!1;const c=(i??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const c="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Nw.default=t,Nw}var HL;function Yie(){if(HL)return Dw;HL=1,Object.defineProperty(Dw,"__esModule",{value:!0});const n=Vv,e=n.__importDefault(jz()),t=n.__importDefault(Kk());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:u}={}){var c;let h;const f=new URL(`${this.url}/rpc/${s}`);let p;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{f.searchParams.append(x,_)})):(h="POST",p=o);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new t.default({method:h,url:f,headers:g,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Dw.default=r,Dw}var GL;function Qie(){if(GL)return Ls;GL=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.PostgrestError=Ls.PostgrestBuilder=Ls.PostgrestTransformBuilder=Ls.PostgrestFilterBuilder=Ls.PostgrestQueryBuilder=Ls.PostgrestClient=void 0;const n=Vv,e=n.__importDefault(Yie());Ls.PostgrestClient=e.default;const t=n.__importDefault(jz());Ls.PostgrestQueryBuilder=t.default;const r=n.__importDefault(Kk());Ls.PostgrestFilterBuilder=r.default;const i=n.__importDefault(Uz());Ls.PostgrestTransformBuilder=i.default;const s=n.__importDefault(Fz());Ls.PostgrestBuilder=s.default;const o=n.__importDefault(Bz());return Ls.PostgrestError=o.default,Ls.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Ls}var Zie=Qie();const ese=Ll(Zie),{PostgrestClient:tse,PostgrestQueryBuilder:DIe,PostgrestFilterBuilder:NIe,PostgrestTransformBuilder:LIe,PostgrestBuilder:BIe,PostgrestError:FIe}=ese;class nse{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const rse="2.76.1",ise=`realtime-js/${rse}`,sse="1.0.0",gI=1e4,ose=1e3,ase=100;var F0;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(F0||(F0={}));var qi;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(qi||(qi={}));var El;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(El||(El={}));var vI;(function(n){n.websocket="websocket"})(vI||(vI={}));var np;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(np||(np={}));class lse{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Vz{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Er;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Er||(Er={}));const qL=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=use(o,n,e,i),s),{}):{}},use=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?zz(s,o):yI(o)},zz=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return dse(e,t)}switch(n){case Er.bool:return cse(e);case Er.float4:case Er.float8:case Er.int2:case Er.int4:case Er.int8:case Er.numeric:case Er.oid:return hse(e);case Er.json:case Er.jsonb:return fse(e);case Er.timestamp:return pse(e);case Er.abstime:case Er.date:case Er.daterange:case Er.int4range:case Er.int8range:case Er.money:case Er.reltime:case Er.text:case Er.time:case Er.timestamptz:case Er.timetz:case Er.tsrange:case Er.tstzrange:return yI(e);default:return yI(e)}},yI=n=>n,cse=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},hse=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},fse=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},dse=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>zz(e,a))}return n},pse=n=>typeof n=="string"?n.replace(" ","T"):n,Hz=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class JT{constructor(e,t,r={},i=gI){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var WL;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(WL||(WL={}));class U0{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=U0.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=U0.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=U0.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=s[u];if(h){const f=c.map(_=>_.presence_ref),p=h.map(_=>_.presence_ref),g=c.filter(_=>p.indexOf(_.presence_ref)<0),x=h.filter(_=>f.indexOf(_.presence_ref)<0);g.length>0&&(a[u]=g),x.length>0&&(l[u]=x)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(p=>p.presence_ref),f=c.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $L;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})($L||($L={}));var j0;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(j0||(j0={}));var xc;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xc||(xc={}));class Jk{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=qi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new JT(this,El.join,this.params,this.timeout),this.rejoinTimer=new Vz(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qi.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=qi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=qi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(El.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new U0(this),this.broadcastEndpointURL=Hz(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==qi.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[j0.PRESENCE]&&this.bindings[j0.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(xc.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(xc.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(xc.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(g=x==null?void 0:x.length)!==null&&g!==void 0?g:0,v=[];for(let b=0;b<_;b++){const E=x[b],{filter:{event:S,schema:C,table:D,filter:M}}=E,P=p&&p[b];if(P&&P.event===S&&P.schema===C&&P.table===D&&P.filter===M)v.push(Object.assign(Object.assign({},E),{id:P.id}));else{this.unsubscribe(),this.state=qi.errored,e==null||e(xc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(xc.SUBSCRIBED);return}}).receive("error",p=>{this.state=qi.errored,e==null||e(xc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===qi.joined&&e===j0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qi.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(El.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new JT(this,El.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qi.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new JT(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ase){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=El;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,x,_;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(x=p.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var g,x,_,v,b,E;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,C=(g=p.filter)===null||g===void 0?void 0:g.event;return S&&((x=t.ids)===null||x===void 0?void 0:x.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const S=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((E=t==null?void 0:t.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:x,table:_,commit_timestamp:v,type:b,errors:E}=g;f=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:v,eventType:b,new:{},old:{},errors:E}),this._getPayloadRecords(g))}p.callback(f,r)})}_isClosed(){return this.state===qi.closed}_isJoined(){return this.state===qi.joined}_isJoining(){return this.state===qi.joining}_isLeaving(){return this.state===qi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Jk.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(El.close,{},e)}_onError(e){this._on(El.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=qL(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=qL(e.columns,e.old_record)),t}}const XT=()=>{},jw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mse=[1e3,2e3,5e3,1e4],gse=1e4,vse=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yse{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gI,this.transport=null,this.heartbeatIntervalMs=jw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=XT,this.ref=0,this.reconnectTimer=null,this.logger=XT,this.conn=null,this.sendBuffer=[],this.serializer=new lse,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>jv(async()=>{const{default:a}=await Promise.resolve().then(()=>im);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${vI.websocket}`,this.httpEndpoint=Hz(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nse.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sse}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case F0.connecting:return np.Connecting;case F0.open:return np.Open;case F0.closing:return np.Closing;default:return np.Closed}}isConnected(){return this.connectionState()===np.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Jk(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ose,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},jw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(El.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([vse],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:ise};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(El.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Vz(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,l,u,c;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:gI,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:jw.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:XT,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:(h=>mse[h-1]||gse),this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:((h,f)=>f(JSON.stringify(h))),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Xk extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class _se extends Xk{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _I extends Xk{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Yk=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jv(async()=>{const{default:r}=await Promise.resolve().then(()=>im);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},xse=()=>Rt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jv(()=>Promise.resolve().then(()=>im),void 0)).Response:Response}),xI=n=>{if(Array.isArray(n))return n.map(t=>xI(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=xI(r)}),e},wse=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},YT=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),bse=(n,e,t)=>Rt(void 0,void 0,void 0,function*(){const r=yield xse();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new _se(YT(i),s,o))}).catch(i=>{e(new _I(YT(i),i))}):e(new _I(YT(n),n))}),Ese=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(wse(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function ox(n,e,t,r,i,s){return Rt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Ese(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>bse(l,a,r))})})}function g_(n,e,t,r){return Rt(this,void 0,void 0,function*(){return ox(n,"GET",e,t,r)})}function wl(n,e,t,r,i){return Rt(this,void 0,void 0,function*(){return ox(n,"POST",e,r,i,t)})}function wI(n,e,t,r,i){return Rt(this,void 0,void 0,function*(){return ox(n,"PUT",e,r,i,t)})}function Ase(n,e,t,r){return Rt(this,void 0,void 0,function*(){return ox(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Qk(n,e,t,r,i){return Rt(this,void 0,void 0,function*(){return ox(n,"DELETE",e,r,i,t)})}class Sse{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Rt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gr(e))return{data:null,error:e};throw e}})}}var Gz;class Tse{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Gz]="BlobDownloadBuilder",this.promise=null}asStream(){return new Sse(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Rt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gr(e))return{data:null,error:e};throw e}})}}Gz=Symbol.toStringTag;const Cse={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},KL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mse{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Yk(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Rt(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},KL),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield(e=="PUT"?wI:wl)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gr(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Rt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:KL.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield wI(this.fetch,a.toString(),l,{headers:c});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Gr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Rt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield wl(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Xk("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}update(e,t,r){return Rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Rt(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Rt(this,void 0,void 0,function*(){try{return{data:{path:(yield wl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Rt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield wl(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Rt(this,void 0,void 0,function*(){try{const i=yield wl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}download(e,t){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>g_(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Tse(l,this.shouldThrowOnError)}info(e){return Rt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield g_(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xI(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}exists(e){return Rt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ase(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r)&&r instanceof _I){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield Qk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}list(e,t,r){return Rt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Cse),t),{prefix:e||""});return{data:yield wl(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}listV2(e,t){return Rt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield wl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const qz="2.76.1",Wz={"X-Client-Info":`storage-js/${qz}`};class Rse{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wz),t),this.fetch=Yk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Rt(this,void 0,void 0,function*(){try{return{data:yield g_(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Gr(e))return{data:null,error:e};throw e}})}getBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield g_(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}createBucket(e){return Rt(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield wl(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gr(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Rt(this,void 0,void 0,function*(){try{return{data:yield wI(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield Qk(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}}class Ise{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wz),t),this.fetch=Yk(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield wl(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}listBuckets(e){return Rt(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,s=yield g_(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield Qk(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Gr(t))return{data:null,error:t};throw t}})}}const Zk={"X-Client-Info":`storage-js/${qz}`,"Content-Type":"application/json"};class $z extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function na(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class QT extends $z{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pse extends $z{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var JL;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(JL||(JL={}));const eO=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jv(async()=>{const{default:r}=await Promise.resolve().then(()=>im);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},kse=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},XL=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ose=(n,e,t)=>Rt(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const i=n.status||500,s=n;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new QT(XL(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new QT(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new QT(a,i,o))}}else e(new Pse(XL(n),n))}),Dse=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return r?(kse(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),t)):i};function Nse(n,e,t,r,i,s){return Rt(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,Dse(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Ose(l,a,r))})})}function ra(n,e,t,r,i){return Rt(this,void 0,void 0,function*(){return Nse(n,"POST",e,r,i,t)})}class Lse{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zk),t),this.fetch=eO(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Rt(this,void 0,void 0,function*(){try{return{data:(yield ra(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Rt(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(na(r))return{data:null,error:r};throw r}})}listIndexes(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Rt(this,void 0,void 0,function*(){try{return{data:(yield ra(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(na(r))return{data:null,error:r};throw r}})}}class Bse{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zk),t),this.fetch=eO(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Rt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ra(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}getVectors(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}listVectors(e){return Rt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ra(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}queryVectors(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Rt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ra(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}}class Fse{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Zk),t),this.fetch=eO(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:(yield ra(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}getBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}listBuckets(){return Rt(this,arguments,void 0,function*(e={}){try{return{data:yield ra(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Rt(this,void 0,void 0,function*(){try{return{data:(yield ra(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(na(t))return{data:null,error:t};throw t}})}}class Use extends Fse{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new jse(this.url,this.headers,e,this.fetch)}}class jse extends Lse{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Rt(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Rt(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Rt(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Rt(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Vse(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Vse extends Bse{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Rt(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Rt(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Rt(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Rt(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Rt(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zse extends Rse{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Mse(this.url,this.headers,e,this.fetch)}get vectors(){return new Use(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ise(this.url+"/iceberg",this.headers,this.fetch)}}const Hse="2.76.1";let A0="";typeof Deno<"u"?A0="deno":typeof document<"u"?A0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?A0="react-native":A0="node";const Gse={"X-Client-Info":`supabase-js-${A0}/${Hse}`},qse={headers:Gse},Wse={schema:"public"},$se={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Kse={},Jse=n=>{let e;return n?e=n:typeof fetch>"u"?e=Nz:e=fetch,(...t)=>e(...t)},Xse=()=>typeof Headers>"u"?Lz:Headers,Yse=(n,e,t)=>{const r=Jse(t),i=Xse();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))}};function Qse(n){return n.endsWith("/")?n:n+"/"}function Zse(n,e){var t,r;const{db:i,auth:s,realtime:o,global:a}=n,{db:l,auth:u,realtime:c,global:h}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h==null?void 0:h.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?f.accessToken=n.accessToken:delete f.accessToken,f}function eoe(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Qse(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kz="2.76.1",kg=30*1e3,bI=3,ZT=bI*kg,toe="http://localhost:9999",noe="supabase.auth.token",roe={"X-Client-Info":`gotrue-js/${Kz}`},EI="X-Supabase-Api-Version",Jz={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ioe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,soe=600*1e3;class v_ extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Jt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class ooe extends v_{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function aoe(n){return Jt(n)&&n.name==="AuthApiError"}class rp extends v_{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Bf extends v_{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Kh extends Bf{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function loe(n){return Jt(n)&&n.name==="AuthSessionMissingError"}class Ym extends Bf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vw extends Bf{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zw extends Bf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uoe(n){return Jt(n)&&n.name==="AuthImplicitGrantRedirectError"}class YL extends Bf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AI extends Bf{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function eC(n){return Jt(n)&&n.name==="AuthRetryableFetchError"}class QL extends Bf{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class SI extends Bf{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const nE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ZL=` 	
\r=`.split(""),coe=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<ZL.length;e+=1)n[ZL[e].charCodeAt(0)]=-2;for(let e=0;e<nE.length;e+=1)n[nE[e].charCodeAt(0)]=e;return n})();function eB(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nE[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(nE[r]),e.queuedBits-=6}}function Xz(n,e,t){const r=coe[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function tB(n){const e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{doe(o,r,t)};for(let o=0;o<n.length;o+=1)Xz(n.charCodeAt(o),i,s);return e.join("")}function hoe(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function foe(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}hoe(r,e)}}function doe(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ev(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)Xz(n.charCodeAt(i),t,r);return new Uint8Array(e)}function poe(n){const e=[];return foe(n,t=>e.push(t)),new Uint8Array(e)}function lp(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>eB(i,t,r)),eB(null,t,r),e.join("")}function moe(n){return Math.round(Date.now()/1e3)+n}function goe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ea=()=>typeof window<"u"&&typeof document<"u",Cd={tested:!1,writable:!1},Yz=()=>{if(!ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cd.tested)return Cd.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Cd.tested=!0,Cd.writable=!0}catch{Cd.tested=!0,Cd.writable=!1}return Cd.writable};function voe(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const Qz=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jv(async()=>{const{default:r}=await Promise.resolve().then(()=>im);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},yoe=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Og=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Md=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bh=async(n,e)=>{await n.removeItem(e)};class JA{constructor(){this.promise=new JA.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}JA.promiseConstructor=Promise;function tC(n){const e=n.split(".");if(e.length!==3)throw new SI("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ioe.test(e[r]))throw new SI("JWT not in base64url format");return{header:JSON.parse(tB(e[0])),payload:JSON.parse(tB(e[1])),signature:ev(e[2]),raw:{header:e[0],payload:e[1]}}}async function _oe(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function xoe(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function woe(n){return("0"+n.toString(16)).substr(-2)}function boe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,woe).join("")}async function Eoe(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Aoe(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Eoe(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qm(n,e,t=!1){const r=boe();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await Og(n,`${e}-code-verifier`,i);const s=await Aoe(r);return[s,r===s?"plain":"s256"]}const Soe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Toe(n){const e=n.headers.get(EI);if(!e||!e.match(Soe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Coe(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Moe(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Roe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zm(n){if(!Roe.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function nC(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nB(n){return JSON.parse(JSON.stringify(n))}const Xd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ioe=[502,503,504];async function rB(n){var e;if(!yoe(n))throw new AI(Xd(n),0);if(Ioe.includes(n.status))throw new AI(Xd(n),n.status);let t;try{t=await n.json()}catch(s){throw new rp(Xd(s),s)}let r;const i=Toe(n);if(i&&i.getTime()>=Jz["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new QL(Xd(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Kh}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new QL(Xd(t),n.status,t.weak_password.reasons);throw new ooe(Xd(t),n.status||500,r)}const Poe=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function vn(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[EI]||(s[EI]=Jz["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await koe(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function koe(n,e,t,r,i,s){const o=Poe(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new AI(Xd(l),0)}if(a.ok||await rB(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await rB(l)}}function _l(n){var e;let t=null;Noe(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=moe(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function iB(n){const e=_l(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function rf(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Ooe(n){return{data:n,error:null}}function Doe(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=Xc(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function sB(n){return n}function Noe(n){return n.access_token&&n.refresh_token&&n.expires_in}const rC=["global","local","others"];class Loe{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Qz(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=rC[0]){if(rC.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rC.join(", ")}`);try{return await vn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await vn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:rf})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Xc(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await vn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Doe,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Jt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await vn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:rf})}catch(t){if(Jt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await vn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:sB});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Jt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Zm(e);try{return await vn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:rf})}catch(t){if(Jt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Zm(e);try{return await vn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:rf})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Zm(e);try{return await vn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:rf})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zm(e.userId);try{const{data:t,error:r}=await vn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Zm(e.userId),Zm(e.id);try{return{data:await vn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await vn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:sB});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Jt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await vn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await vn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _deleteOAuthClient(e){try{return await vn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await vn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}}function oB(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const eg={debug:!!(globalThis&&Yz()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zz extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Boe extends Zz{}async function Foe(n,e,t){eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),eg.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw eg.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Boe(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(eg.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Uoe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eH(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function joe(n){return parseInt(n,16)}function Voe(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function zoe(n){var e;const{chainId:t,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:h,version:f}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const p=eH(n.address),g=c?`${c}://${r}`:r,x=n.statement?`${n.statement}
`:"",_=`${g} wants you to sign in with your Ethereum account:
${p}

${x}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),u){let b=`
Resources:`;for(const E of u){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);b+=`
- ${E}`}v+=b}return`${_}
${v}`}class Pi extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class rE extends Pi{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Hoe({error:n,options:e}){var t,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Pi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Pi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Pi({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Pi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Pi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(tH(o)){if(s.rp.id!==o)return new Pi({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Pi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Pi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Pi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Pi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Goe({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Pi({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(tH(r)){if(t.rpId!==r)return new Pi({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Pi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Pi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Pi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class qoe{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Woe=new qoe;function $oe(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,i=Xc(n,["challenge","user","excludeCredentials"]),s=ev(e).buffer,o=Object.assign(Object.assign({},t),{id:ev(t.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:ev(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Koe(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Xc(n,["challenge","allowCredentials"]),i=ev(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:ev(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Joe(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:lp(new Uint8Array(n.response.attestationObject)),clientDataJSON:lp(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Xoe(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:lp(new Uint8Array(i.authenticatorData)),clientDataJSON:lp(new Uint8Array(i.clientDataJSON)),signature:lp(new Uint8Array(i.signature)),userHandle:i.userHandle?lp(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function tH(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function aB(){var n,e;return!!(ea()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Yoe(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rE("Browser returned unexpected credential type",e)}:{data:null,error:new rE("Empty credential response",e)}}catch(e){return{data:null,error:Hoe({error:e,options:n})}}}async function Qoe(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rE("Browser returned unexpected credential type",e)}:{data:null,error:new rE("Empty credential response",e)}}catch(e){return{data:null,error:Goe({error:e,options:n})}}}const Zoe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},eae={userVerification:"preferred",hints:["security-key"]};function iE(...n){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of n)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(t(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=iE(a,o):r[s]=iE(o)}else r[s]=o}return r}function tae(n,e){return iE(Zoe,n,e||{})}function nae(n,e){return iE(eae,n,e||{})}class rae{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const l=i??Woe.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=tae(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:c,error:h}=await Yoe({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}case"request":{const u=nae(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:c,error:h}=await Qoe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:c}},error:null}:{data:null,error:h}}}}catch(o){return Jt(o)?{data:null,error:o}:{data:null,error:new rp("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new v_("rpId is required for WebAuthn authentication")};try{if(!aB())return{data:null,error:new rp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:t,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Jt(o)?{data:null,error:o}:{data:null,error:new rp("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new v_("rpId is required for WebAuthn registration")};try{if(!aB())return{data:null,error:new rp("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var h;return(h=c.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:t,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Jt(o)?{data:null,error:o}:{data:null,error:new rp("Unexpected error in register",o)}}}}Uoe();const iae={url:toe,storageKey:noe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:roe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lB(n,e,t){return await t()}const tg={};class y_{get jwks(){var e,t;return(t=(e=tg[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){tg[this.storageKey]=Object.assign(Object.assign({},tg[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=tg[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){tg[this.storageKey]=Object.assign(Object.assign({},tg[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=y_.nextInstanceID,y_.nextInstanceID+=1,this.instanceID>0&&ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},iae),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Loe({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Qz(i.fetch),this.lock=i.lock||lB,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ea()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Foe:this.lock=lB,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rae(this)},this.persistSession?(i.storage?this.storage=i.storage:Yz()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oB(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=oB(this.memoryStorage)),ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kz}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=voe(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ea()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),uoe(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Jt(t)?{error:t}:{error:new rp("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:_l}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Jt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:c,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Qm(this.storage,this.storageKey)),s=await vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:_l})}else if("phone"in e){const{phone:c,password:h,options:f}=e;s=await vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:_l})}else throw new Vw("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Jt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:iB})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:iB})}else throw new Vw("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ym}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Jt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,o,a,l,u,c,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:x,wallet:_,statement:v,options:b}=e;let E;if(ea())if(typeof _=="object")E=_;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")E=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const S=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href),C=await E.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=eH(C[0]);let M=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const O=await E.request({method:"eth_chainId"});M=joe(O)}const P={domain:S.host,address:D,statement:v,uri:S.href,version:"1",chainId:M,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=zoe(P),g=await E.request({method:"personal_sign",params:[Voe(p),D]})}try{const{data:x,error:_}=await vn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_l});if(_)throw _;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Ym}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:_})}catch(x){if(Jt(x))return{data:{user:null,session:null},error:x};throw x}}async signInWithSolana(e){var t,r,i,s,o,a,l,u,c,h,f,p;let g,x;if("message"in e)g=e.message,x=e.signature;else{const{chain:_,wallet:v,statement:b,options:E}=e;let S;if(ea())if(typeof v=="object")S=v;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))S=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const C=new URL((t=E==null?void 0:E.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const D=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),b?{statement:b}:null));let M;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")M=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)M=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)g=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),x=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(i=(r=E==null?void 0:E.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=E==null?void 0:E.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((a=E==null?void 0:E.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E==null?void 0:E.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(c=E==null?void 0:E.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const D=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=D}}try{const{data:_,error:v}=await vn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:lp(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:_l});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Ym}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(Jt(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const t=await Md(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await vn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_l});if(await Bh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Ym}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Jt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await vn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:_l}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ym}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(Jt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Qm(this.storage,this.storageKey));const{error:h}=await vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Vw("You must provide either an email or phone number.")}catch(a){if(Jt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await vn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:_l});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Jt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Qm(this.storage,this.storageKey)),await vn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Ooe})}catch(s){if(Jt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Kh;const{error:i}=await vn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Jt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await vn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await vn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Vw("You must provide either an email or phone number and a type")}catch(t){if(Jt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Md(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ZT:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Md(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=nC()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:rf}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kh}:await vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:rf})})}catch(t){if(Jt(t))return loe(t)&&(await this._removeSession(),await Bh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Kh;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Qm(this.storage,this.storageKey));const{data:u,error:c}=await vn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:rf});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Jt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kh;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:o}=tC(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Jt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Kh;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Jt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ea())throw new zw("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zw(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new YL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zw("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new YL("No code detected.");const{data:b,error:E}=await this._exchangeCodeForSession(e.code);if(E)throw E;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new zw("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const p=f-c;p*1e3<=kg&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,c);const{data:x,error:_}=await this._getUser(s);if(_)throw _;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(Jt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Md(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(aoe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Bh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=goe(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Qm(this.storage,this.storageKey,!0));try{return await vn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Jt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:h,error:f}=s;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await vn(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return ea()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Jt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,h=await vn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:_l}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ym}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),{data:f,error:p})}catch(i){if(Jt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await vn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await xoe(async i=>(i>0&&await _oe(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await vn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_l})),(i,s)=>{const o=200*Math.pow(2,i);return s&&eC(s)&&Date.now()+o-r<kg})}catch(r){if(this._debug(t,"error",r),Jt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ea()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Md(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Md(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Og(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:nC()}else if(i&&!i.user&&!i.user){const o=await Md(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Bh(this.storage,this.storageKey+"-user"),await Og(this.storage,this.storageKey,i)):i.user=nC()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ZT;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${ZT}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),eC(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Kh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new JA;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Kh;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Jt(s)){const o={data:null,error:s};return eC(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Og(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=nB(i);await Og(this.storage,this.storageKey,s)}else{const i=nB(t);await Og(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Bh(this.storage,this.storageKey),await Bh(this.storage,this.storageKey+"-code-verifier"),await Bh(this.storage,this.storageKey+"-user"),this.userStorage&&await Bh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ea()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kg);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/kg);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${kg}ms, refresh threshold is ${bI} ticks`),i<=bI&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zz)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ea()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Qm(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await vn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await vn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Joe(e.webauthn.credential_response):Xoe(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await vn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const o=await vn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:$oe(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Koe(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Jt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=tC(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+soe>i)return r;const{data:s,error:o}=await vn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};r=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=tC(r);t!=null&&t.allowExpired||Coe(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const c=Moe(i.alg),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,poe(`${a}.${l}`)))throw new SI("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Jt(r))return{data:null,error:r};throw r}}}y_.nextInstanceID=0;const sae=y_;class oae extends sae{constructor(e){super(e)}}class aae{constructor(e,t,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=t;const a=eoe(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Wse,realtime:Kse,auth:Object.assign(Object.assign({},$se),{storageKey:l}),global:qse},c=Zse(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Yse(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new tse(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new zse(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new qie(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u},c,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oae({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yse(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lae=(n,e,t)=>new aae(n,e,t);function uae(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uae()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cae="https://gpkzyfbdjociuubltyjg.supabase.co",hae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdwa3p5ZmJkam9jaXV1Ymx0eWpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5NzE1MzgsImV4cCI6MjA1MzU0NzUzOH0.zTF4wtV898IEsnO_Ub8uQMqlGur5RHTMujtgxy_RcLY",Fp=lae(cae,hae),fae=async n=>{try{const e=qr(sn,"users",n),t=await Oa(e);if(t.exists()){const r=t.data(),i=r==null?void 0:r.role;if(!i)return{role:null,roleId:null};const o=(await pae("roles")).find(a=>a.id===i);return o?{role:o.name||null,roleId:i}:{role:null,roleId:null}}else return{role:null,roleId:null}}catch(e){return console.error("Error fetching user role:",e),{role:null,roleId:null}}},dae=async(n,e,t,r,i)=>{await qk(qr(sn,"activeUsers",n),{id:n,name:e,email:t,role:r,token:i,ActiveTime:sr.now(),isLoggedIn:!0})};async function pae(n){try{const e=Jr(sn,n),t=await Js(e),r=[];return t.forEach(i=>{r.push({id:i.id,...i.data()})}),r}catch(e){return console.error("Error fetching documents: ",e),[]}}const nH=()=>{const[n,e]=W.useState(null),[t,r]=W.useState(null),i=async(l,u,c,h="patient")=>{try{const f=await LZ(bc,l,u);await U6(f.user,{displayName:c}),await f.user;const p=f.user.uid,g=qr(sn,"roles",h),x=await Oa(g);if(!x.exists())throw new Error(`Role '${h}' does not exist in the roles collection.`);const _=x.data(),v=_==null?void 0:_.id;await qk(qr(sn,"users",p),{id:p,name:c,email:l,role:v,createdAt:sr.now(),updatedAt:sr.now(),lastLogin:sr.now(),isLoggedIn:!1}),await FZ(f.user)}catch(f){throw r(f.message),f}},s=async(l,u)=>{try{const c=await BZ(bc,l,u),{data:h,error:f}=await Fp.auth.signInWithPassword({email:l,password:u});if(console.log(h,"Login with Supabase"),f)throw new Error(f.message);e(c.user);const p=c.user.uid,g=qr(sn,"users",p);return(await Oa(g)).exists()&&await fv(g,{isLoggedIn:!0}),c}catch(c){throw r(c.message),c}},o=async l=>{const u=qr(sn,"users",l),c=await Oa(u);return c.exists()?c.data():null};async function a(l){try{console.log("Logout called inside Custom Auth",l);const u=qr(sn,"users",l);(await Oa(u)).exists()?(await fv(u,{isLoggedIn:!1,lastLogin:sr.now()}),console.log(`User ${l} is now inactive.`)):console.log(`User with id ${l} not found.`);const h=qr(sn,"activeUsers",l),f=await Oa(h);if(f.exists()){const p=f.data();try{p&&(await Tf(qr(sn,"activeUsers",l)),console.log(`Field with userId ${l} deleted from activeUsers.`)),await Tf(qr(sn,"activeUsers",l)),console.log(`Field with userId ${l} deleted from activeUsers.`)}catch(g){throw new Error("Error deleting field from activeUsers: "+g)}}else console.log("No data found in activeUsers document.");await bc.signOut(),await Fp.auth.signOut(),e(null),console.log(`User ${l} logged out successfully.`)}catch(u){console.error("Error during logout:",u)}}return{user:n,error:t,register:i,login:s,getUserData:o,ActiveUser:dae,logout:a}},tO=W.createContext({});function ax(n){const e=W.useRef(null);return e.current===null&&(e.current=n()),e.current}const nO=typeof window<"u",rO=nO?W.useLayoutEffect:W.useEffect,XA=W.createContext(null);function iO(n,e){n.indexOf(e)===-1&&n.push(e)}function sO(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Gc=(n,e,t)=>t>e?e:t<n?n:t;let oO=()=>{};const qc={},rH=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function iH(n){return typeof n=="object"&&n!==null}const sH=n=>/^0[^.\s]+$/u.test(n);function aO(n){let e;return()=>(e===void 0&&(e=n()),e)}const Fa=n=>n,mae=(n,e)=>t=>e(n(t)),lx=(...n)=>n.reduce(mae),__=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class lO{constructor(){this.subscriptions=[]}add(e){return iO(this.subscriptions,e),()=>sO(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const du=n=>n*1e3,Na=n=>n/1e3;function oH(n,e){return e?n*(1e3/e):0}const aH=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,gae=1e-7,vae=12;function yae(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=aH(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>gae&&++a<vae);return o}function ux(n,e,t,r){if(n===e&&t===r)return Fa;const i=s=>yae(s,0,1,n,t);return s=>s===0||s===1?s:aH(i(s),e,r)}const lH=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,uH=n=>e=>1-n(1-e),cH=ux(.33,1.53,.69,.99),uO=uH(cH),hH=lH(uO),fH=n=>(n*=2)<1?.5*uO(n):.5*(2-Math.pow(2,-10*(n-1))),cO=n=>1-Math.sin(Math.acos(n)),dH=uH(cO),pH=lH(cO),_ae=ux(.42,0,1,1),xae=ux(0,0,.58,1),mH=ux(.42,0,.58,1),wae=n=>Array.isArray(n)&&typeof n[0]!="number",gH=n=>Array.isArray(n)&&typeof n[0]=="number",bae={linear:Fa,easeIn:_ae,easeInOut:mH,easeOut:xae,circIn:cO,circInOut:pH,circOut:dH,backIn:uO,backInOut:hH,backOut:cH,anticipate:fH},Eae=n=>typeof n=="string",uB=n=>{if(gH(n)){oO(n.length===4);const[e,t,r,i]=n;return ux(e,t,r,i)}else if(Eae(n))return bae[n];return n},Hw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Aae(n,e){let t=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(c){o.has(c)&&(u.schedule(c),n()),c(a)}const u={schedule:(c,h=!1,f=!1)=>{const g=f&&i?t:r;return h&&o.add(c),g.has(c)||g.add(c),c},cancel:c=>{r.delete(c),o.delete(c)},process:c=>{if(a=c,i){s=!0;return}i=!0,[t,r]=[r,t],t.forEach(l),t.clear(),i=!1,s&&(s=!1,u.process(c))}};return u}const Sae=40;function vH(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Hw.reduce((E,S)=>(E[S]=Aae(s),E),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:f,render:p,postRender:g}=o,x=()=>{const E=qc.useManualTiming?i.timestamp:performance.now();t=!1,qc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,Sae),1)),i.timestamp=E,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(x))},_=()=>{t=!0,r=!0,i.isProcessing||n(x)};return{schedule:Hw.reduce((E,S)=>{const C=o[S];return E[S]=(D,M=!1,P=!1)=>(t||_(),C.schedule(D,M,P)),E},{}),cancel:E=>{for(let S=0;S<Hw.length;S++)o[Hw[S]].cancel(E)},state:i,steps:o}}const{schedule:Pr,cancel:Wc,state:bs,steps:iC}=vH(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fa,!0);let vb;function Tae(){vb=void 0}const No={now:()=>(vb===void 0&&No.set(bs.isProcessing||qc.useManualTiming?bs.timestamp:performance.now()),vb),set:n=>{vb=n,queueMicrotask(Tae)}},yH=n=>e=>typeof e=="string"&&e.startsWith(n),hO=yH("--"),Cae=yH("var(--"),fO=n=>Cae(n)?Mae.test(n.split("/*")[0].trim()):!1,Mae=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zv={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},x_={...zv,transform:n=>Gc(0,1,n)},Gw={...zv,default:1},V0=n=>Math.round(n*1e5)/1e5,dO=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rae(n){return n==null}const Iae=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pO=(n,e)=>t=>!!(typeof t=="string"&&Iae.test(t)&&t.startsWith(n)||e&&!Rae(t)&&Object.prototype.hasOwnProperty.call(t,e)),_H=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(dO);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Pae=n=>Gc(0,255,n),sC={...zv,transform:n=>Math.round(Pae(n))},up={test:pO("rgb","red"),parse:_H("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+sC.transform(n)+", "+sC.transform(e)+", "+sC.transform(t)+", "+V0(x_.transform(r))+")"};function kae(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const TI={test:pO("#"),parse:kae,transform:up.transform},cx=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Jh=cx("deg"),pu=cx("%"),nn=cx("px"),Oae=cx("vh"),Dae=cx("vw"),cB={...pu,parse:n=>pu.parse(n)/100,transform:n=>pu.transform(n*100)},Fg={test:pO("hsl","hue"),parse:_H("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+pu.transform(V0(e))+", "+pu.transform(V0(t))+", "+V0(x_.transform(r))+")"},ki={test:n=>up.test(n)||TI.test(n)||Fg.test(n),parse:n=>up.test(n)?up.parse(n):Fg.test(n)?Fg.parse(n):TI.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?up.transform(n):Fg.transform(n),getAnimatableNone:n=>{const e=ki.parse(n);return e.alpha=0,ki.transform(e)}},Nae=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lae(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(dO))==null?void 0:e.length)||0)+(((t=n.match(Nae))==null?void 0:t.length)||0)>0}const xH="number",wH="color",Bae="var",Fae="var(",hB="${}",Uae=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function w_(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Uae,l=>(ki.test(l)?(r.color.push(s),i.push(wH),t.push(ki.parse(l))):l.startsWith(Fae)?(r.var.push(s),i.push(Bae),t.push(l)):(r.number.push(s),i.push(xH),t.push(parseFloat(l))),++s,hB)).split(hB);return{values:t,split:a,indexes:r,types:i}}function bH(n){return w_(n).values}function EH(n){const{split:e,types:t}=w_(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===xH?s+=V0(i[o]):a===wH?s+=ki.transform(i[o]):s+=i[o]}return s}}const jae=n=>typeof n=="number"?0:ki.test(n)?ki.getAnimatableNone(n):n;function Vae(n){const e=bH(n);return EH(n)(e.map(jae))}const Cf={test:Lae,parse:bH,createTransformer:EH,getAnimatableNone:Vae};function oC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function zae({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=oC(l,a,n+1/3),s=oC(l,a,n),o=oC(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function sE(n,e){return t=>t>0?e:n}const Wr=(n,e,t)=>n+(e-n)*t,aC=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Hae=[TI,up,Fg],Gae=n=>Hae.find(e=>e.test(n));function fB(n){const e=Gae(n);if(!e)return!1;let t=e.parse(n);return e===Fg&&(t=zae(t)),t}const dB=(n,e)=>{const t=fB(n),r=fB(e);if(!t||!r)return sE(n,e);const i={...t};return s=>(i.red=aC(t.red,r.red,s),i.green=aC(t.green,r.green,s),i.blue=aC(t.blue,r.blue,s),i.alpha=Wr(t.alpha,r.alpha,s),up.transform(i))},CI=new Set(["none","hidden"]);function qae(n,e){return CI.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Wae(n,e){return t=>Wr(n,e,t)}function mO(n){return typeof n=="number"?Wae:typeof n=="string"?fO(n)?sE:ki.test(n)?dB:Jae:Array.isArray(n)?AH:typeof n=="object"?ki.test(n)?dB:$ae:sE}function AH(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>mO(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function $ae(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=mO(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Kae(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=n.indexes[s][r[s]],a=n.values[o]??0;t[i]=a,r[s]++}return t}const Jae=(n,e)=>{const t=Cf.createTransformer(e),r=w_(n),i=w_(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?CI.has(n)&&!i.values.length||CI.has(e)&&!r.values.length?qae(n,e):lx(AH(Kae(r,i),i.values),t):sE(n,e)};function SH(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Wr(n,e,t):mO(n)(n,e)}const Xae=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Pr.update(e,t),stop:()=>Wc(e),now:()=>bs.isProcessing?bs.timestamp:No.now()}},TH=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=Math.round(n(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},oE=2e4;function gO(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<oE;)e+=t,r=n.next(e);return e>=oE?1/0:e}function Yae(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(gO(r),oE);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Na(i)}}const Qae=5;function CH(n,e,t){const r=Math.max(e-Qae,0);return oH(t-n(r),e-r)}const oi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},lC=.001;function Zae({duration:n=oi.duration,bounce:e=oi.bounce,velocity:t=oi.velocity,mass:r=oi.mass}){let i,s,o=1-e;o=Gc(oi.minDamping,oi.maxDamping,o),n=Gc(oi.minDuration,oi.maxDuration,Na(n)),o<1?(i=u=>{const c=u*o,h=c*n,f=c-t,p=MI(u,o),g=Math.exp(-h);return lC-f/p*g},s=u=>{const h=u*o*n,f=h*t+t,p=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-h),x=MI(Math.pow(u,2),o);return(-i(u)+lC>0?-1:1)*((f-p)*g)/x}):(i=u=>{const c=Math.exp(-u*n),h=(u-t)*n+1;return-lC+c*h},s=u=>{const c=Math.exp(-u*n),h=(t-u)*(n*n);return c*h});const a=5/n,l=tle(i,s,a);if(n=du(n),isNaN(l))return{stiffness:oi.stiffness,damping:oi.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const ele=12;function tle(n,e,t){let r=t;for(let i=1;i<ele;i++)r=r-n(r)/e(r);return r}function MI(n,e){return n*Math.sqrt(1-e*e)}const nle=["duration","bounce"],rle=["stiffness","damping","mass"];function pB(n,e){return e.some(t=>n[t]!==void 0)}function ile(n){let e={velocity:oi.velocity,stiffness:oi.stiffness,damping:oi.damping,mass:oi.mass,isResolvedFromDuration:!1,...n};if(!pB(n,rle)&&pB(n,nle))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Gc(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:oi.mass,stiffness:i,damping:s}}else{const t=Zae(n);e={...e,...t,mass:oi.mass},e.isResolvedFromDuration=!0}return e}function aE(n=oi.visualDuration,e=oi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:p}=ile({...t,velocity:-Na(t.velocity||0)}),g=f||0,x=u/(2*Math.sqrt(l*c)),_=o-s,v=Na(Math.sqrt(l/c)),b=Math.abs(_)<5;r||(r=b?oi.restSpeed.granular:oi.restSpeed.default),i||(i=b?oi.restDelta.granular:oi.restDelta.default);let E;if(x<1){const C=MI(v,x);E=D=>{const M=Math.exp(-x*v*D);return o-M*((g+x*v*_)/C*Math.sin(C*D)+_*Math.cos(C*D))}}else if(x===1)E=C=>o-Math.exp(-v*C)*(_+(g+v*_)*C);else{const C=v*Math.sqrt(x*x-1);E=D=>{const M=Math.exp(-x*v*D),P=Math.min(C*D,300);return o-M*((g+x*v*_)*Math.sinh(P)+C*_*Math.cosh(P))/C}}const S={calculatedDuration:p&&h||null,next:C=>{const D=E(C);if(p)a.done=C>=h;else{let M=C===0?g:0;x<1&&(M=C===0?du(g):CH(E,C,D));const P=Math.abs(M)<=r,O=Math.abs(o-D)<=i;a.done=P&&O}return a.value=a.done?o:D,a},toString:()=>{const C=Math.min(gO(S),oE),D=TH(M=>S.next(C*M).value,C,30);return C+"ms "+D},toTransition:()=>{}};return S}aE.applyToOptions=n=>{const e=Yae(n,100,aE);return n.ease=e.ease,n.duration=du(e.duration),n.type="keyframes",n};function RI({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=n[0],f={done:!1,value:h},p=P=>a!==void 0&&P<a||l!==void 0&&P>l,g=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let x=t*e;const _=h+x,v=o===void 0?_:o(_);v!==_&&(x=v-h);const b=P=>-x*Math.exp(-P/r),E=P=>v+b(P),S=P=>{const O=b(P),R=E(P);f.done=Math.abs(O)<=u,f.value=f.done?v:R};let C,D;const M=P=>{p(f.value)&&(C=P,D=aE({keyframes:[f.value,g(f.value)],velocity:CH(E,P,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:P=>{let O=!1;return!D&&C===void 0&&(O=!0,S(P),M(P)),C!==void 0&&P>=C?D.next(P-C):(!O&&S(P),f)}}}function sle(n,e,t){const r=[],i=t||qc.mix||SH,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Fa:e;a=lx(l,a)}r.push(a)}return r}function MH(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(oO(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=sle(e,r,i),l=a.length,u=c=>{if(o&&c<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(c<n[h+1]);h++);const f=__(n[h],n[h+1],c);return a[h](f)};return t?c=>u(Gc(n[0],n[s-1],c)):u}function ole(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=__(0,e,r);n.push(Wr(t,1,i))}}function ale(n){const e=[0];return ole(e,n.length-1),e}function lle(n,e){return n.map(t=>t*e)}function ule(n,e){return n.map(()=>e||mH).splice(0,n.length-1)}function z0({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=wae(r)?r.map(uB):uB(r),s={done:!1,value:e[0]},o=lle(t&&t.length===e.length?t:ale(e),n),a=MH(o,e,{ease:Array.isArray(i)?i:ule(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const cle=n=>n!==null;function vO(n,{repeat:e,repeatType:t="loop"},r,i=1){const s=n.filter(cle),a=i<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const hle={decay:RI,inertia:RI,tween:z0,keyframes:z0,spring:aE};function RH(n){typeof n.type=="string"&&(n.type=hle[n.type])}class yO{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const fle=n=>n/100;class _O extends yO{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==No.now()&&this.tick(No.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;RH(e);const{type:t=z0,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||z0;l!==z0&&typeof a[0]!="number"&&(this.mixKeyframes=lx(fle,SH(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=gO(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:f,repeatDelay:p,type:g,onUpdate:x,finalKeyframe:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,S=r;if(h){const P=Math.min(this.currentTime,i)/a;let O=Math.floor(P),R=P%1;!R&&P>=1&&(R=1),R===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(f==="reverse"?(R=1-R,p&&(R-=p/a)):f==="mirror"&&(S=o)),E=Gc(0,1,R)*a}const C=b?{done:!1,value:c[0]}:S.next(E);s&&(C.value=s(C.value));let{done:D}=C;!b&&l!==null&&(D=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return M&&g!==RI&&(C.value=vO(c,this.options,_,this.speed)),x&&x(C.value),M&&this.finish(),C}then(e,t){return this.finished.then(e,t)}get duration(){return Na(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Na(e)}get time(){return Na(this.currentTime)}set time(e){var t;e=du(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(No.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Na(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=Xae,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(No.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function dle(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const cp=n=>n*180/Math.PI,II=n=>{const e=cp(Math.atan2(n[1],n[0]));return PI(e)},ple={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:II,rotateZ:II,skewX:n=>cp(Math.atan(n[1])),skewY:n=>cp(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},PI=n=>(n=n%360,n<0&&(n+=360),n),mB=II,gB=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),vB=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),mle={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gB,scaleY:vB,scale:n=>(gB(n)+vB(n))/2,rotateX:n=>PI(cp(Math.atan2(n[6],n[5]))),rotateY:n=>PI(cp(Math.atan2(-n[2],n[0]))),rotateZ:mB,rotate:mB,skewX:n=>cp(Math.atan(n[4])),skewY:n=>cp(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function kI(n){return n.includes("scale")?1:0}function OI(n,e){if(!n||n==="none")return kI(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=mle,i=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ple,i=a}if(!i)return kI(e);const s=r[e],o=i[1].split(",").map(vle);return typeof s=="function"?s(o):o[s]}const gle=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return OI(t,e)};function vle(n){return parseFloat(n.trim())}const Hv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gv=new Set(Hv),yB=n=>n===zv||n===nn,yle=new Set(["x","y","z"]),_le=Hv.filter(n=>!yle.has(n));function xle(n){const e=[];return _le.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const wp={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>OI(e,"x"),y:(n,{transform:e})=>OI(e,"y")};wp.translateX=wp.x;wp.translateY=wp.y;const bp=new Set;let DI=!1,NI=!1,LI=!1;function IH(){if(NI){const n=Array.from(bp).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=xle(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}NI=!1,DI=!1,bp.forEach(n=>n.complete(LI)),bp.clear()}function PH(){bp.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(NI=!0)})}function wle(){LI=!0,PH(),IH(),LI=!1}class xO{constructor(e,t,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bp.add(this),DI||(DI=!0,Pr.read(PH),Pr.resolveKeyframes(IH))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&t){const a=r.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}dle(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bp.delete(this)}cancel(){this.state==="scheduled"&&(bp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ble=n=>n.startsWith("--");function Ele(n,e,t){ble(e)?n.style.setProperty(e,t):n.style[e]=t}const Ale=aO(()=>window.ScrollTimeline!==void 0),Sle={};function Tle(n,e){const t=aO(n);return()=>Sle[e]??t()}const kH=Tle(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),S0=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,_B={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:S0([0,.65,.55,1]),circOut:S0([.55,0,1,.45]),backIn:S0([.31,.01,.66,-.59]),backOut:S0([.33,1.53,.69,.99])};function OH(n,e){if(n)return typeof n=="function"?kH()?TH(n,e):"ease-out":gH(n)?S0(n):Array.isArray(n)?n.map(t=>OH(t,e)||_B.easeOut):_B[n]}function Cle(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=OH(a,i);Array.isArray(h)&&(c.easing=h);const f={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(c,f)}function DH(n){return typeof n=="function"&&"applyToOptions"in n}function Mle({type:n,...e}){return DH(n)&&kH()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Rle extends yO{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,oO(typeof e.type!="string");const u=Mle(e);this.animation=Cle(t,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=vO(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):Ele(t,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Na(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Na(e)}get time(){return Na(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=du(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Ale()?(this.animation.timeline=e,Fa):t(this)}}const NH={anticipate:fH,backInOut:hH,circInOut:pH};function Ile(n){return n in NH}function Ple(n){typeof n.ease=="string"&&Ile(n.ease)&&(n.ease=NH[n.ease])}const xB=10;class kle extends Rle{constructor(e){Ple(e),RH(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new _O({...o,autoplay:!1}),l=du(this.finishedTime??this.time);t.setWithVelocity(a.sample(l-xB).value,a.sample(l).value,xB),a.stop()}}const wB=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Cf.test(n)||n==="0")&&!n.startsWith("url("));function Ole(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Dle(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=wB(i,e),a=wB(s,e);return!o||!a?!1:Ole(n)||(t==="spring"||DH(t))&&r}function BI(n){n.duration=0,n.type="keyframes"}const Nle=new Set(["opacity","clipPath","filter","transform"]),Lle=aO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Ble(n){var c;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:s,type:o}=n;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Lle()&&t&&Nle.has(t)&&(t!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Fle=40;class Ule extends yO{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...h}){var g;super(),this.stop=()=>{var x,_;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(_=this.keyframeResolver)==null||_.cancel()},this.createdAt=No.now();const f={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...h},p=(c==null?void 0:c.KeyframeResolver)||xO;this.keyframeResolver=new p(a,(x,_,v)=>this.onKeyframesResolved(x,_,f,!v),l,u,c),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=No.now(),Dle(e,s,o,a)||((qc.instantAnimations||!l)&&(c==null||c(vO(e,r,t))),e[0]=e[e.length-1],BI(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Fle?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},p=!u&&Ble(f)?new kle({...f,element:f.motionValue.owner.current}):new _O(f);p.finished.then(()=>this.notifyFinished()).catch(Fa),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),wle()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const jle=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Vle(n){const e=jle.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function LH(n,e,t=1){const[r,i]=Vle(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return rH(o)?parseFloat(o):o}return fO(i)?LH(i,e,t+1):i}function wO(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const BH=new Set(["width","height","top","left","right","bottom",...Hv]),zle={test:n=>n==="auto",parse:n=>n},FH=n=>e=>e.test(n),UH=[zv,nn,pu,Jh,Dae,Oae,zle],bB=n=>UH.find(FH(n));function Hle(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||sH(n):!0}const Gle=new Set(["brightness","contrast","saturate","opacity"]);function qle(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(dO)||[];if(!r)return n;const i=t.replace(r,"");let s=Gle.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const Wle=/\b([a-z-]*)\(.*?\)/gu,FI={...Cf,getAnimatableNone:n=>{const e=n.match(Wle);return e?e.map(qle).join(" "):n}},EB={...zv,transform:Math.round},$le={rotate:Jh,rotateX:Jh,rotateY:Jh,rotateZ:Jh,scale:Gw,scaleX:Gw,scaleY:Gw,scaleZ:Gw,skew:Jh,skewX:Jh,skewY:Jh,distance:nn,translateX:nn,translateY:nn,translateZ:nn,x:nn,y:nn,z:nn,perspective:nn,transformPerspective:nn,opacity:x_,originX:cB,originY:cB,originZ:nn},bO={borderWidth:nn,borderTopWidth:nn,borderRightWidth:nn,borderBottomWidth:nn,borderLeftWidth:nn,borderRadius:nn,radius:nn,borderTopLeftRadius:nn,borderTopRightRadius:nn,borderBottomRightRadius:nn,borderBottomLeftRadius:nn,width:nn,maxWidth:nn,height:nn,maxHeight:nn,top:nn,right:nn,bottom:nn,left:nn,padding:nn,paddingTop:nn,paddingRight:nn,paddingBottom:nn,paddingLeft:nn,margin:nn,marginTop:nn,marginRight:nn,marginBottom:nn,marginLeft:nn,backgroundPositionX:nn,backgroundPositionY:nn,...$le,zIndex:EB,fillOpacity:x_,strokeOpacity:x_,numOctaves:EB},Kle={...bO,color:ki,backgroundColor:ki,outlineColor:ki,fill:ki,stroke:ki,borderColor:ki,borderTopColor:ki,borderRightColor:ki,borderBottomColor:ki,borderLeftColor:ki,filter:FI,WebkitFilter:FI},jH=n=>Kle[n];function VH(n,e){let t=jH(n);return t!==FI&&(t=Cf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Jle=new Set(["auto","none","0"]);function Xle(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!Jle.has(s)&&w_(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=VH(t,i)}class Yle extends xO{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),fO(u))){const c=LH(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!BH.has(r)||e.length!==2)return;const[i,s]=e,o=bB(i),a=bB(s);if(o!==a)if(yB(o)&&yB(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else wp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Hle(e[i]))&&r.push(i);r.length&&Xle(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wp[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=wp[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Qle(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const zH=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function HH(n){return iH(n)&&"offsetHeight"in n}const AB=30,Zle=n=>!isNaN(parseFloat(n)),H0={current:void 0};class eue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=No.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=No.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Zle(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new lO);const r=this.events[e].add(t);return e==="change"?()=>{r(),Pr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return H0.current&&H0.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=No.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AB)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,AB);return oH(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Up(n,e){return new eue(n,e)}const{schedule:EO}=vH(queueMicrotask,!1),xl={x:!1,y:!1};function GH(){return xl.x||xl.y}function tue(n){return n==="x"||n==="y"?xl[n]?null:(xl[n]=!0,()=>{xl[n]=!1}):xl.x||xl.y?null:(xl.x=xl.y=!0,()=>{xl.x=xl.y=!1})}function qH(n,e){const t=Qle(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function SB(n){return!(n.pointerType==="touch"||GH())}function nue(n,e,t={}){const[r,i,s]=qH(n,t),o=a=>{if(!SB(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=h=>{SB(h)&&(u(h),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const WH=(n,e)=>e?n===e?!0:WH(n,e.parentElement):!1,AO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,rue=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iue(n){return rue.has(n.tagName)||n.tabIndex!==-1}const yb=new WeakSet;function TB(n){return e=>{e.key==="Enter"&&n(e)}}function uC(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sue=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=TB(()=>{if(yb.has(t))return;uC(t,"down");const i=TB(()=>{uC(t,"up")}),s=()=>uC(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function CB(n){return AO(n)&&!GH()}function oue(n,e,t={}){const[r,i,s]=qH(n,t),o=a=>{const l=a.currentTarget;if(!CB(a))return;yb.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),yb.has(l)&&yb.delete(l),CB(p)&&typeof u=="function"&&u(p,{success:g})},h=p=>{c(p,l===window||l===document||t.useGlobalTarget||WH(l,p.target))},f=p=>{c(p,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),HH(a)&&(a.addEventListener("focus",u=>sue(u,i)),!iue(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function $H(n){return iH(n)&&"ownerSVGElement"in n}function aue(n){return $H(n)&&n.tagName==="svg"}function lue(...n){const e=!Array.isArray(n[0]),t=e?0:-1,r=n[0+t],i=n[1+t],s=n[2+t],o=n[3+t],a=MH(i,s,o);return e?a(r):a}const Gs=n=>!!(n&&n.getVelocity),uue=[...UH,ki,Cf],cue=n=>uue.find(FH(n)),YA=W.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function MB(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function hue(...n){return e=>{let t=!1;const r=n.map(i=>{const s=MB(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():MB(n[i],null)}}}}function fue(...n){return W.useCallback(hue(...n),n)}class due extends W.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=HH(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pue({children:n,isPresent:e,anchorX:t,root:r}){const i=W.useId(),s=W.useRef(null),o=W.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=W.useContext(YA),l=fue(s,n==null?void 0:n.ref);return W.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:f,right:p}=o.current;if(e||!s.current||!u||!c)return;const g=t==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const _=r??document.head;return _.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{_.contains(x)&&_.removeChild(x)}},[e]),L.jsx(due,{isPresent:e,childRef:s,sizeRef:o,children:W.cloneElement(n,{ref:l})})}const mue=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const u=ax(gue),c=W.useId();let h=!0,f=W.useMemo(()=>(h=!1,{id:c,initial:e,isPresent:t,custom:i,onExitComplete:p=>{u.set(p,!0);for(const g of u.values())if(!g)return;r&&r()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[t,u,r]);return s&&h&&(f={...f}),W.useMemo(()=>{u.forEach((p,g)=>u.set(g,!1))},[t]),W.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),o==="popLayout"&&(n=L.jsx(pue,{isPresent:t,anchorX:a,root:l,children:n})),L.jsx(XA.Provider,{value:f,children:n})};function gue(){return new Map}function KH(n=!0){const e=W.useContext(XA);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=W.useId();W.useEffect(()=>{if(n)return i(s)},[n]);const o=W.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const qw=n=>n.key||"";function RB(n){const e=[];return W.Children.forEach(n,t=>{W.isValidElement(t)&&e.push(t)}),e}const vue=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,c]=KH(o),h=W.useMemo(()=>RB(n),[n]),f=o&&!u?[]:h.map(qw),p=W.useRef(!0),g=W.useRef(h),x=ax(()=>new Map),[_,v]=W.useState(h),[b,E]=W.useState(h);rO(()=>{p.current=!1,g.current=h;for(let D=0;D<b.length;D++){const M=qw(b[D]);f.includes(M)?x.delete(M):x.get(M)!==!0&&x.set(M,!1)}},[b,f.length,f.join("-")]);const S=[];if(h!==_){let D=[...h];for(let M=0;M<b.length;M++){const P=b[M],O=qw(P);f.includes(O)||(D.splice(M,0,P),S.push(P))}return s==="wait"&&S.length&&(D=S),E(RB(D)),v(h),null}const{forceRender:C}=W.useContext(tO);return L.jsx(L.Fragment,{children:b.map(D=>{const M=qw(D),P=o&&!u?!1:h===b||f.includes(M),O=()=>{if(x.has(M))x.set(M,!0);else return;let R=!0;x.forEach(N=>{N||(R=!1)}),R&&(C==null||C(),E(g.current),o&&(c==null||c()),r&&r())};return L.jsx(mue,{isPresent:P,initial:!p.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:P?void 0:O,anchorX:a,children:D},M)})})},JH=W.createContext({strict:!1}),IB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pv={};for(const n in IB)pv[n]={isEnabled:e=>IB[n].some(t=>!!e[t])};function yue(n){for(const e in n)pv[e]={...pv[e],...n[e]}}const _ue=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lE(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||_ue.has(n)}let XH=n=>!lE(n);function xue(n){typeof n=="function"&&(XH=e=>e.startsWith("on")?!lE(e):n(e))}try{xue(require("@emotion/is-prop-valid").default)}catch{}function wue(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(XH(i)||t===!0&&lE(i)||!e&&!lE(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const QA=W.createContext({});function ZA(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function b_(n){return typeof n=="string"||Array.isArray(n)}const SO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TO=["initial",...SO];function eS(n){return ZA(n.animate)||TO.some(e=>b_(n[e]))}function YH(n){return!!(eS(n)||n.variants)}function bue(n,e){if(eS(n)){const{initial:t,animate:r}=n;return{initial:t===!1||b_(t)?t:void 0,animate:b_(r)?r:void 0}}return n.inherit!==!1?e:{}}function Eue(n){const{initial:e,animate:t}=bue(n,W.useContext(QA));return W.useMemo(()=>({initial:e,animate:t}),[PB(e),PB(t)])}function PB(n){return Array.isArray(n)?n.join(" "):n}const E_={};function Aue(n){for(const e in n)E_[e]=n[e],hO(e)&&(E_[e].isCSSVariable=!0)}function QH(n,{layout:e,layoutId:t}){return Gv.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!E_[n]||n==="opacity")}const Sue={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Tue=Hv.length;function Cue(n,e,t){let r="",i=!0;for(let s=0;s<Tue;s++){const o=Hv[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=zH(a,bO[o]);if(!l){i=!1;const c=Sue[o]||o;r+=`${c}(${u}) `}t&&(e[o]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function CO(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if(Gv.has(l)){o=!0;continue}else if(hO(l)){i[l]=u;continue}else{const c=zH(u,bO[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||t?r.transform=Cue(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const MO=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ZH(n,e,t){for(const r in e)!Gs(e[r])&&!QH(r,t)&&(n[r]=e[r])}function Mue({transformTemplate:n},e){return W.useMemo(()=>{const t=MO();return CO(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Rue(n,e){const t=n.style||{},r={};return ZH(r,t,n),Object.assign(r,Mue(n,e)),r}function Iue(n,e){const t={},r=Rue(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Pue={offset:"stroke-dashoffset",array:"stroke-dasharray"},kue={offset:"strokeDashoffset",array:"strokeDasharray"};function Oue(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Pue:kue;n[s.offset]=nn.transform(-r);const o=nn.transform(e),a=nn.transform(t);n[s.array]=`${o} ${a}`}function eG(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(CO(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:f}=n;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),i!==void 0&&Oue(h,i,s,o,!1)}const tG=()=>({...MO(),attrs:{}}),nG=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Due(n,e,t,r){const i=W.useMemo(()=>{const s=tG();return eG(s,e,nG(r),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};ZH(s,n.style,n),i.style={...s,...i.style}}return i}const Nue=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RO(n){return typeof n!="string"||n.includes("-")?!1:!!(Nue.indexOf(n)>-1||/[A-Z]/u.test(n))}function Lue(n,e,t,{latestValues:r},i,s=!1){const a=(RO(n)?Due:Iue)(e,r,i,n),l=wue(e,typeof n=="string",s),u=n!==W.Fragment?{...l,...a,ref:t}:{},{children:c}=e,h=W.useMemo(()=>Gs(c)?c.get():c,[c]);return W.createElement(n,{...u,children:h})}function kB(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function IO(n,e,t,r){if(typeof e=="function"){const[i,s]=kB(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=kB(r);e=e(t!==void 0?t:n.custom,i,s)}return e}function _b(n){return Gs(n)?n.get():n}function Bue({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:Fue(t,r,i,n),renderState:e()}}function Fue(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=_b(s[f]);let{initial:o,animate:a}=n;const l=eS(n),u=YH(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=t?t.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!ZA(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const g=IO(n,f[p]);if(g){const{transitionEnd:x,transition:_,...v}=g;for(const b in v){let E=v[b];if(Array.isArray(E)){const S=c?E.length-1:0;E=E[S]}E!==null&&(i[b]=E)}for(const b in x)i[b]=x[b]}}}return i}const rG=n=>(e,t)=>{const r=W.useContext(QA),i=W.useContext(XA),s=()=>Bue(n,e,r,i);return t?s():ax(s)};function PO(n,e,t){var s;const{style:r}=n,i={};for(const o in r)(Gs(r[o])||e.style&&Gs(e.style[o])||QH(o,n)||((s=t==null?void 0:t.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Uue=rG({scrapeMotionValuesFromProps:PO,createRenderState:MO});function iG(n,e,t){const r=PO(n,e,t);for(const i in n)if(Gs(n[i])||Gs(e[i])){const s=Hv.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}const jue=rG({scrapeMotionValuesFromProps:iG,createRenderState:tG}),Vue=Symbol.for("motionComponentSymbol");function Ug(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zue(n,e,t){return W.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ug(t)&&(t.current=r))},[e])}const kO=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Hue="framerAppearId",sG="data-"+kO(Hue),oG=W.createContext({});function Gue(n,e,t,r,i){var x,_;const{visualElement:s}=W.useContext(QA),o=W.useContext(JH),a=W.useContext(XA),l=W.useContext(YA).reducedMotion,u=W.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,h=W.useContext(oG);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&que(u.current,t,i,h);const f=W.useRef(!1);W.useInsertionEffect(()=>{c&&f.current&&c.update(t,a)});const p=t[sG],g=W.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((_=window.MotionHasOptimisedAnimation)==null?void 0:_.call(window,p)));return rO(()=>{c&&(f.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c.scheduleRenderMicrotask(),g.current&&c.animationState&&c.animationState.animateChanges())}),W.useEffect(()=>{c&&(!g.current&&c.animationState&&c.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,p)}),g.current=!1),c.enteringChildren=void 0)}),c}function que(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:aG(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ug(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function aG(n){if(n)return n.options.allowProjection!==!1?n.projection:aG(n.parent)}function cC(n,{forwardMotionProps:e=!1}={},t,r){t&&yue(t);const i=RO(n)?jue:Uue;function s(a,l){let u;const c={...W.useContext(YA),...a,layoutId:Wue(a)},{isStatic:h}=c,f=Eue(a),p=i(a,h);if(!h&&nO){$ue();const g=Kue(c);u=g.MeasureLayout,f.visualElement=Gue(n,p,c,r,g.ProjectionNode)}return L.jsxs(QA.Provider,{value:f,children:[u&&f.visualElement?L.jsx(u,{visualElement:f.visualElement,...c}):null,Lue(n,a,zue(p,f.visualElement,l),p,h,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=W.forwardRef(s);return o[Vue]=n,o}function Wue({layoutId:n}){const e=W.useContext(tO).id;return e&&n!==void 0?e+"-"+n:n}function $ue(n,e){W.useContext(JH).strict}function Kue(n){const{drag:e,layout:t}=pv;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Jue(n,e){if(typeof Proxy>"u")return cC;const t=new Map,r=(s,o)=>cC(s,o,n,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(t.has(o)||t.set(o,cC(o,void 0,n,e)),t.get(o))})}function lG({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Xue({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Yue(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function hC(n){return n===void 0||n===1}function UI({scale:n,scaleX:e,scaleY:t}){return!hC(n)||!hC(e)||!hC(t)}function Yd(n){return UI(n)||uG(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function uG(n){return OB(n.x)||OB(n.y)}function OB(n){return n&&n!=="0%"}function uE(n,e,t){const r=n-t,i=e*r;return t+i}function DB(n,e,t,r,i){return i!==void 0&&(n=uE(n,i,r)),uE(n,t,r)+e}function jI(n,e=0,t=1,r,i){n.min=DB(n.min,e,t,r,i),n.max=DB(n.max,e,t,r,i)}function cG(n,{x:e,y:t}){jI(n.x,e.translate,e.scale,e.originPoint),jI(n.y,t.translate,t.scale,t.originPoint)}const NB=.999999999999,LB=1.0000000000001;function Que(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Vg(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cG(n,o)),r&&Yd(s.latestValues)&&Vg(n,s.latestValues))}e.x<LB&&e.x>NB&&(e.x=1),e.y<LB&&e.y>NB&&(e.y=1)}function jg(n,e){n.min=n.min+e,n.max=n.max+e}function BB(n,e,t,r,i=.5){const s=Wr(n.min,n.max,i);jI(n,e,t,s,r)}function Vg(n,e){BB(n.x,e.x,e.scaleX,e.scale,e.originX),BB(n.y,e.y,e.scaleY,e.scale,e.originY)}function hG(n,e){return lG(Yue(n.getBoundingClientRect(),e))}function Zue(n,e,t){const r=hG(n,t),{scroll:i}=e;return i&&(jg(r.x,i.offset.x),jg(r.y,i.offset.y)),r}const FB=()=>({translate:0,scale:1,origin:0,originPoint:0}),zg=()=>({x:FB(),y:FB()}),UB=()=>({min:0,max:0}),mi=()=>({x:UB(),y:UB()}),VI={current:null},fG={current:!1};function ece(){if(fG.current=!0,!!nO)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>VI.current=n.matches;n.addEventListener("change",e),e()}else VI.current=!1}const tce=new WeakMap;function nce(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Gs(i))n.addValue(r,i);else if(Gs(s))n.addValue(r,Up(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,Up(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const jB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rce{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xO,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=No.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Pr.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=eS(t),this.isVariantNode=YH(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&Gs(p)&&p.set(l[f])}}mount(e){var t;this.current=e,tce.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),fG.current||ece(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:VI.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Wc(this.notifyUpdate),Wc(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gv.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Pr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pv){const t=pv[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<jB.length;r++){const i=jB[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=nce(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Up(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(rH(r)||sH(r))?r=parseFloat(r):!cue(r)&&Cf.test(t)&&(r=VH(e,t)),this.setBaseTarget(e,Gs(r)?r.get():r)),Gs(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=IO(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Gs(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new lO),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){EO.render(this.render)}}class dG extends rce{constructor(){super(...arguments),this.KeyframeResolver=Yle}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gs(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function pG(n,{style:e,vars:t},r,i){const s=n.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in t)s.setProperty(o,t[o])}function ice(n){return window.getComputedStyle(n)}class sce extends dG{constructor(){super(...arguments),this.type="html",this.renderInstance=pG}readValueFromInstance(e,t){var r;if(Gv.has(t))return(r=this.projection)!=null&&r.isProjecting?kI(t):gle(e,t);{const i=ice(e),s=(hO(t)?i.getPropertyValue(t):i[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return hG(e,t)}build(e,t,r){CO(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return PO(e,t,r)}}const mG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oce(n,e,t,r){pG(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(mG.has(i)?i:kO(i),e.attrs[i])}class ace extends dG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Gv.has(t)){const r=jH(t);return r&&r.default||0}return t=mG.has(t)?t:kO(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return iG(e,t,r)}build(e,t,r){eG(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){oce(e,t,r,i)}mount(e){this.isSVGTag=nG(e.tagName),super.mount(e)}}const lce=(n,e)=>RO(n)?new ace(e):new sce(e,{allowProjection:n!==W.Fragment});function tv(n,e,t){const r=n.getProps();return IO(r,e,t!==void 0?t:r.custom,n)}const zI=n=>Array.isArray(n);function uce(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Up(t))}function cce(n){return zI(n)?n[n.length-1]||0:n}function hce(n,e){const t=tv(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=cce(s[o]);uce(n,o,a)}}function fce(n){return!!(Gs(n)&&n.add)}function HI(n,e){const t=n.getValue("willChange");if(fce(t))return t.add(e);if(!t&&qc.WillChange){const r=new qc.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function gG(n){return n.props[sG]}const dce=n=>n!==null;function pce(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(dce),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[s]}const mce={type:"spring",stiffness:500,damping:25,restSpeed:10},gce=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),vce={type:"keyframes",duration:.8},yce={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_ce=(n,{keyframes:e})=>e.length>2?vce:Gv.has(n)?n.startsWith("scale")?gce(e[1]):mce:yce;function xce({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const OO=(n,e,t,r={},i,s)=>o=>{const a=wO(r,n)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-du(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};xce(a)||Object.assign(c,_ce(n,c)),c.duration&&(c.duration=du(c.duration)),c.repeatDelay&&(c.repeatDelay=du(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(BI(c),c.delay===0&&(h=!0)),(qc.instantAnimations||qc.skipAnimations)&&(h=!0,BI(c),c.delay=0),c.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const f=pce(c.keyframes,a);if(f!==void 0){Pr.update(()=>{c.onUpdate(f),c.onComplete()});return}}return a.isSync?new _O(c):new Ule(c)};function wce({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function vG(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&n.animationState&&n.animationState.getState()[i];for(const c in a){const h=n.getValue(c,n.latestValues[c]??null),f=a[c];if(f===void 0||u&&wce(u,c))continue;const p={delay:t,...wO(s||{},c)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const v=gG(n);if(v){const b=window.MotionHandoffAnimation(v,c,Pr);b!==null&&(p.startTime=b,x=!0)}}HI(n,c),h.start(OO(c,h,f,n.shouldReduceMotion&&BH.has(c)?{type:!1}:p,n,x));const _=h.animation;_&&l.push(_)}return o&&Promise.all(l).then(()=>{Pr.update(()=>{o&&hce(n,o)})}),l}function yG(n,e,t,r=0,i=1){const s=Array.from(n).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),o=n.size,a=(o-1)*r;return typeof t=="function"?t(s,o):i===1?s*r:a-s*r}function GI(n,e,t={}){var l;const r=tv(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(vG(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=i;return bce(n,e,u,c,h,f,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function bce(n,e,t=0,r=0,i=0,s=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),a.push(GI(l,e,{...o,delay:t+(typeof r=="function"?0:r)+yG(n.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Ece(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>GI(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=GI(n,e,t);else{const i=typeof e=="function"?tv(n,e,t.custom):e;r=Promise.all(vG(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function _G(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const Ace=TO.length;function xG(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?xG(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Ace;t++){const r=TO[t],i=n.props[r];(b_(i)||i===!1)&&(e[r]=i)}return e}const Sce=[...SO].reverse(),Tce=SO.length;function Cce(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Ece(n,t,r)))}function Mce(n){let e=Cce(n),t=VB(),r=!0;const i=l=>(u,c)=>{var f;const h=tv(n,c,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...x}=h;u={...u,...x,...g}}return u};function s(l){e=l(n)}function o(l){const{props:u}=n,c=xG(n.parent)||{},h=[],f=new Set;let p={},g=1/0;for(let _=0;_<Tce;_++){const v=Sce[_],b=t[v],E=u[v]!==void 0?u[v]:c[v],S=b_(E),C=v===l?b.isActive:null;C===!1&&(g=_);let D=E===c[v]&&E!==u[v]&&S;if(D&&r&&n.manuallyAnimateOnMount&&(D=!1),b.protectedKeys={...p},!b.isActive&&C===null||!E&&!b.prevProp||ZA(E)||typeof E=="boolean")continue;const M=Rce(b.prevProp,E);let P=M||v===l&&b.isActive&&!D&&S||_>g&&S,O=!1;const R=Array.isArray(E)?E:[E];let N=R.reduce(i(v),{});C===!1&&(N={});const{prevResolvedValues:U={}}=b,F={...U,...N},J=ae=>{P=!0,f.has(ae)&&(O=!0,f.delete(ae)),b.needsAnimating[ae]=!0;const Q=n.getValue(ae);Q&&(Q.liveStyle=!1)};for(const ae in F){const Q=N[ae],ee=U[ae];if(p.hasOwnProperty(ae))continue;let Y=!1;zI(Q)&&zI(ee)?Y=!_G(Q,ee):Y=Q!==ee,Y?Q!=null?J(ae):f.add(ae):Q!==void 0&&f.has(ae)?J(ae):b.protectedKeys[ae]=!0}b.prevProp=E,b.prevResolvedValues=N,b.isActive&&(p={...p,...N}),r&&n.blockInitialAnimation&&(P=!1);const Z=D&&M;P&&(!Z||O)&&h.push(...R.map(ae=>{const Q={type:v};if(typeof ae=="string"&&r&&!Z&&n.manuallyAnimateOnMount&&n.parent){const{parent:ee}=n,Y=tv(ee,ae);if(ee.enteringChildren&&Y){const{delayChildren:V}=Y.transition||{};Q.delay=yG(ee.enteringChildren,n,V)}}return{animation:ae,options:Q}}))}if(f.size){const _={};if(typeof u.initial!="boolean"){const v=tv(n,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(_.transition=v.transition)}f.forEach(v=>{const b=n.getBaseTarget(v),E=n.getValue(v);E&&(E.liveStyle=!0),_[v]=b??null}),h.push({animation:_})}let x=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),t[l].isActive=u;const c=o(l);for(const f in t)t[f].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=VB()}}}function Rce(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_G(e,n):!1}function Rd(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VB(){return{animate:Rd(!0),whileInView:Rd(),whileHover:Rd(),whileTap:Rd(),whileDrag:Rd(),whileFocus:Rd(),exit:Rd()}}class Ff{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ice extends Ff{constructor(e){super(e),e.animationState||(e.animationState=Mce(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ZA(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Pce=0;class kce extends Ff{constructor(){super(...arguments),this.id=Pce++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Oce={animation:{Feature:Ice},exit:{Feature:kce}};function A_(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function hx(n){return{point:{x:n.pageX,y:n.pageY}}}const Dce=n=>e=>AO(e)&&n(e,hx(e));function G0(n,e,t,r){return A_(n,e,Dce(t),r)}const wG=1e-4,Nce=1-wG,Lce=1+wG,bG=.01,Bce=0-bG,Fce=0+bG;function vo(n){return n.max-n.min}function Uce(n,e,t){return Math.abs(n-e)<=t}function zB(n,e,t,r=.5){n.origin=r,n.originPoint=Wr(e.min,e.max,n.origin),n.scale=vo(t)/vo(e),n.translate=Wr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Nce&&n.scale<=Lce||isNaN(n.scale))&&(n.scale=1),(n.translate>=Bce&&n.translate<=Fce||isNaN(n.translate))&&(n.translate=0)}function q0(n,e,t,r){zB(n.x,e.x,t.x,r?r.originX:void 0),zB(n.y,e.y,t.y,r?r.originY:void 0)}function HB(n,e,t){n.min=t.min+e.min,n.max=n.min+vo(e)}function jce(n,e,t){HB(n.x,e.x,t.x),HB(n.y,e.y,t.y)}function GB(n,e,t){n.min=e.min-t.min,n.max=n.min+vo(e)}function W0(n,e,t){GB(n.x,e.x,t.x),GB(n.y,e.y,t.y)}function Ia(n){return[n("x"),n("y")]}const EG=({current:n})=>n?n.ownerDocument.defaultView:null,qB=(n,e)=>Math.abs(n-e);function Vce(n,e){const t=qB(n.x,e.x),r=qB(n.y,e.y);return Math.sqrt(t**2+r**2)}class AG{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=dC(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=Vce(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:x}=f,{timestamp:_}=bs;this.history.push({...x,timestamp:_});const{onStart:v,onMove:b}=this.handlers;p||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=fC(p,this.transformPagePoint),Pr.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=dC(f.type==="pointercancel"?this.lastMoveEventInfo:fC(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,v),x&&x(f,v)},!AO(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=hx(e),l=fC(a,this.transformPagePoint),{point:u}=l,{timestamp:c}=bs;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=t;h&&h(e,dC(l,this.history)),this.removeListeners=lx(G0(this.contextWindow,"pointermove",this.handlePointerMove),G0(this.contextWindow,"pointerup",this.handlePointerUp),G0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Wc(this.updatePoint)}}function fC(n,e){return e?{point:e(n.point)}:n}function WB(n,e){return{x:n.x-e.x,y:n.y-e.y}}function dC({point:n},e){return{point:n,delta:WB(n,SG(e)),offset:WB(n,zce(e)),velocity:Hce(e,.1)}}function zce(n){return n[0]}function SG(n){return n[n.length-1]}function Hce(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=SG(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>du(e)));)t--;if(!r)return{x:0,y:0};const s=Na(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Gce(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Wr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Wr(t,n,r.max):Math.min(n,t)),n}function $B(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function qce(n,{top:e,left:t,bottom:r,right:i}){return{x:$B(n.x,t,i),y:$B(n.y,e,r)}}function KB(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Wce(n,e){return{x:KB(n.x,e.x),y:KB(n.y,e.y)}}function $ce(n,e){let t=.5;const r=vo(n),i=vo(e);return i>r?t=__(e.min,e.max-r,n.min):r>i&&(t=__(n.min,n.max-i,e.min)),Gc(0,1,t)}function Kce(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const qI=.35;function Jce(n=qI){return n===!1?n=0:n===!0&&(n=qI),{x:JB(n,"left","right"),y:JB(n,"top","bottom")}}function JB(n,e,t){return{min:XB(n,e),max:XB(n,t)}}function XB(n,e){return typeof n=="number"?n:n[e]||0}const Xce=new WeakMap;class Yce{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mi(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(hx(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:x}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tue(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ia(v=>{let b=this.getAxisMotionValue(v).get()||0;if(pu.test(b)){const{projection:E}=this.visualElement;if(E&&E.layout){const S=E.layout.layoutBox[v];S&&(b=vo(S)*(parseFloat(b)/100))}}this.originPoint[v]=b}),x&&Pr.postRender(()=>x(h,f)),HI(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:x,onDrag:_}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=f;if(g&&this.currentDirection===null){this.currentDirection=Qce(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),_&&_(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ia(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new AG(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:EG(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Pr.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Ww(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Gce(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Ug(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=qce(r.layoutBox,e):this.constraints=!1,this.elastic=Jce(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ia(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Kce(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ug(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Zue(r,i.root,this.visualElement.getTransformPagePoint());let o=Wce(i.layout.layoutBox,s);if(t){const a=t(Xue(o));this.hasMutatedConstraints=!!a,a&&(o=lG(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ia(c=>{if(!Ww(c,t,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const f=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return HI(this.visualElement,e),r.start(OO(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ia(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ia(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ia(t=>{const{drag:r}=this.getProps();if(!Ww(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Wr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ug(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ia(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=$ce({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ia(o=>{if(!Ww(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Wr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Xce.set(this.visualElement,this);const e=this.visualElement.current,t=G0(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ug(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pr.read(r);const o=A_(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ia(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qI,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ww(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Qce(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Zce extends Ff{constructor(e){super(e),this.removeGroupControls=Fa,this.removeListeners=Fa,this.controls=new Yce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fa}unmount(){this.removeGroupControls(),this.removeListeners()}}const YB=n=>(e,t)=>{n&&Pr.postRender(()=>n(e,t))};class ehe extends Ff{constructor(){super(...arguments),this.removePointerDownListener=Fa}onPointerDown(e){this.session=new AG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:YB(e),onStart:YB(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=G0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QB(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const qy={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(nn.test(n))n=parseFloat(n);else return n;const t=QB(n,e.target.x),r=QB(n,e.target.y);return`${t}% ${r}%`}},the={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Cf.parse(n);if(i.length>5)return r;const s=Cf.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Wr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};let pC=!1;class nhe extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Aue(rhe),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),pC&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),xb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,pC=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),EO.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;pC=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TG(n){const[e,t]=KH(),r=W.useContext(tO);return L.jsx(nhe,{...n,layoutGroup:r,switchLayoutGroup:W.useContext(oG),isPresent:e,safeToRemove:t})}const rhe={borderRadius:{...qy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qy,borderTopRightRadius:qy,borderBottomLeftRadius:qy,borderBottomRightRadius:qy,boxShadow:the};function ihe(n,e,t){const r=Gs(n)?n:Up(n);return r.start(OO("",r,e,t)),r.animation}const she=(n,e)=>n.depth-e.depth;class ohe{constructor(){this.children=[],this.isDirty=!1}add(e){iO(this.children,e),this.isDirty=!0}remove(e){sO(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(she),this.isDirty=!1,this.children.forEach(e)}}function ahe(n,e){const t=No.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Wc(r),n(s-e))};return Pr.setup(r,!0),()=>Wc(r)}const CG=["TopLeft","TopRight","BottomLeft","BottomRight"],lhe=CG.length,ZB=n=>typeof n=="string"?parseFloat(n):n,eF=n=>typeof n=="number"||nn.test(n);function uhe(n,e,t,r,i,s){i?(n.opacity=Wr(0,t.opacity??1,che(r)),n.opacityExit=Wr(e.opacity??1,0,hhe(r))):s&&(n.opacity=Wr(e.opacity??1,t.opacity??1,r));for(let o=0;o<lhe;o++){const a=`border${CG[o]}Radius`;let l=tF(e,a),u=tF(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||eF(l)===eF(u)?(n[a]=Math.max(Wr(ZB(l),ZB(u),r),0),(pu.test(u)||pu.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Wr(e.rotate||0,t.rotate||0,r))}function tF(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const che=MG(0,.5,dH),hhe=MG(.5,.95,Fa);function MG(n,e,t){return r=>r<n?0:r>e?1:t(__(n,e,r))}function nF(n,e){n.min=e.min,n.max=e.max}function Ca(n,e){nF(n.x,e.x),nF(n.y,e.y)}function rF(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function iF(n,e,t,r,i){return n-=e,n=uE(n,1/t,r),i!==void 0&&(n=uE(n,1/i,r)),n}function fhe(n,e=0,t=1,r=.5,i,s=n,o=n){if(pu.test(e)&&(e=parseFloat(e),e=Wr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Wr(s.min,s.max,r);n===s&&(a-=e),n.min=iF(n.min,e,t,a,i),n.max=iF(n.max,e,t,a,i)}function sF(n,e,[t,r,i],s,o){fhe(n,e[t],e[r],e[i],e.scale,s,o)}const dhe=["x","scaleX","originX"],phe=["y","scaleY","originY"];function oF(n,e,t,r){sF(n.x,e,dhe,t?t.x:void 0,r?r.x:void 0),sF(n.y,e,phe,t?t.y:void 0,r?r.y:void 0)}function aF(n){return n.translate===0&&n.scale===1}function RG(n){return aF(n.x)&&aF(n.y)}function lF(n,e){return n.min===e.min&&n.max===e.max}function mhe(n,e){return lF(n.x,e.x)&&lF(n.y,e.y)}function uF(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function IG(n,e){return uF(n.x,e.x)&&uF(n.y,e.y)}function cF(n){return vo(n.x)/vo(n.y)}function hF(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class ghe{constructor(){this.members=[]}add(e){iO(this.members,e),e.scheduleRender()}remove(e){if(sO(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vhe(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:f,skewX:p,skewY:g}=t;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const mC=["","X","Y","Z"],yhe=1e3;let _he=0;function gC(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function PG(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=gG(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Pr,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&PG(r)}function kG({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=_he++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bhe),this.nodes.forEach(The),this.nodes.forEach(Che),this.nodes.forEach(Ehe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ohe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lO),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$H(o)&&!aue(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let c,h=0;const f=()=>this.root.updateBlockedByResize=!1;Pr.read(()=>{h=window.innerWidth}),n(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,c&&c(),c=ahe(f,250),xb.hasAnimatedSinceResize&&(xb.hasAnimatedSinceResize=!1,this.nodes.forEach(pF)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||khe,{onLayoutAnimationStart:x,onLayoutAnimationComplete:_}=u.getProps(),v=!this.targetLayout||!IG(this.targetLayout,p),b=!h&&f;if(this.options.layoutRoot||this.resumeFrom||b||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...wO(g,"layout"),onPlay:x,onComplete:_};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(c,b)}else h||pF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Wc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Mhe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PG(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fF);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dF);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(She),this.nodes.forEach(xhe),this.nodes.forEach(whe)):this.nodes.forEach(dF),this.clearAllSnapshots();const a=No.now();bs.delta=Gc(0,1e3/60,a-bs.timestamp),bs.timestamp=a,bs.isProcessing=!0,iC.update.process(bs),iC.preRender.process(bs),iC.render.process(bs),bs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,EO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ahe),this.sharedNodes.forEach(Rhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vo(this.snapshot.measuredBox.x)&&!vo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!RG(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Yd(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Ohe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return mi();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Dhe))){const{scroll:c}=this.root;c&&(jg(a.x,c.offset.x),jg(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=mi();if(Ca(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;c!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ca(a,o),jg(a.x,h.offset.x),jg(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=mi();Ca(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Vg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Yd(c.latestValues)&&Vg(l,c.latestValues)}return Yd(this.latestValues)&&Vg(l,this.latestValues),l}removeTransform(o){const a=mi();Ca(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Yd(u.latestValues))continue;UI(u.latestValues)&&u.updateSnapshot();const c=mi(),h=u.measurePageBox();Ca(c,h),oF(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Yd(this.latestValues)&&oF(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!(!this.layout||!(c||h))){if(this.resolvedRelativeTargetAt=bs.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mi(),this.relativeTargetOrigin=mi(),W0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mi(),this.targetWithTransforms=mi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ca(this.target,this.layout.layoutBox),cG(this.target,this.targetDelta)):Ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mi(),this.relativeTargetOrigin=mi(),W0(this.relativeTargetOrigin,this.target,p.target),Ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||UI(this.parent.latestValues)||uG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===bs.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;Ca(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Que(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mi());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rF(this.prevProjectionDelta.x,this.projectionDelta.x),rF(this.prevProjectionDelta.y,this.projectionDelta.y)),q0(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!hF(this.projectionDelta.x,this.prevProjectionDelta.x)||!hF(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zg(),this.projectionDelta=zg(),this.projectionDeltaWithTransform=zg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=zg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=mi(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,x=p!==g,_=this.getStack(),v=!_||_.members.length<=1,b=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(Phe));this.animationProgress=0;let E;this.mixTargetDelta=S=>{const C=S/1e3;mF(h.x,o.x,C),mF(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(W0(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ihe(this.relativeTarget,this.relativeTargetOrigin,f,C),E&&mhe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=mi()),Ca(E,this.relativeTarget)),x&&(this.animationValues=c,uhe(c,u,this.latestValues,C,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Wc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pr.update(()=>{xb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Up(0)),this.currentAnimation=ihe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yhe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&OG(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||mi();const h=vo(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=vo(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Ca(a,l),Vg(a,c),q0(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new ghe),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&gC("z",o,u,this.animationValues);for(let c=0;c<mC.length;c++)gC(`rotate${mC[c]}`,o,u,this.animationValues),gC(`skew${mC[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=_b(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=_b(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Yd(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=vhe(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:o.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const g in E_){if(c[g]===void 0)continue;const{correct:x,applyTo:_,isCSSVariable:v}=E_[g],b=h==="none"?c[g]:x(c[g],u);if(_){const E=_.length;for(let S=0;S<E;S++)o[_[S]]=b}else v?this.options.visualElement.renderState.vars[g]=b:o[g]=b}this.options.layoutId&&(o.pointerEvents=u===this?_b(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(fF),this.root.sharedNodes.clear()}}}function xhe(n){n.updateLayout()}function whe(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?Ia(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vo(f);f.min=r[h].min,f.max=f.min+p}):OG(s,e.layoutBox,r)&&Ia(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=vo(r[h]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const a=zg();q0(a,r,e.layoutBox);const l=zg();o?q0(l,n.applyTransform(i,!0),e.measuredBox):q0(l,r,e.layoutBox);const u=!RG(a);let c=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=mi();W0(g,e.layoutBox,f.layoutBox);const x=mi();W0(x,r,p.layoutBox),IG(g,x)||(c=!0),h.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=g,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function bhe(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Ehe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Ahe(n){n.clearSnapshot()}function fF(n){n.clearMeasurements()}function dF(n){n.isLayoutDirty=!1}function She(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function pF(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function The(n){n.resolveTargetDelta()}function Che(n){n.calcProjection()}function Mhe(n){n.resetSkewAndRotation()}function Rhe(n){n.removeLeadSnapshot()}function mF(n,e,t){n.translate=Wr(e.translate,0,t),n.scale=Wr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function gF(n,e,t,r){n.min=Wr(e.min,t.min,r),n.max=Wr(e.max,t.max,r)}function Ihe(n,e,t,r){gF(n.x,e.x,t.x,r),gF(n.y,e.y,t.y,r)}function Phe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const khe={duration:.45,ease:[.4,0,.1,1]},vF=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),yF=vF("applewebkit/")&&!vF("chrome/")?Math.round:Fa;function _F(n){n.min=yF(n.min),n.max=yF(n.max)}function Ohe(n){_F(n.x),_F(n.y)}function OG(n,e,t){return n==="position"||n==="preserve-aspect"&&!Uce(cF(e),cF(t),.2)}function Dhe(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Nhe=kG({attachResizeListener:(n,e)=>A_(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vC={current:void 0},DG=kG({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!vC.current){const n=new Nhe({});n.mount(window),n.setOptions({layoutScroll:!0}),vC.current=n}return vC.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Lhe={pan:{Feature:ehe},drag:{Feature:Zce,ProjectionNode:DG,MeasureLayout:TG}};function xF(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&Pr.postRender(()=>s(e,hx(e)))}class Bhe extends Ff{mount(){const{current:e}=this.node;e&&(this.unmount=nue(e,(t,r)=>(xF(this.node,r,"Start"),i=>xF(this.node,i,"End"))))}unmount(){}}class Fhe extends Ff{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lx(A_(this.node.current,"focus",()=>this.onFocus()),A_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wF(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&Pr.postRender(()=>s(e,hx(e)))}class Uhe extends Ff{mount(){const{current:e}=this.node;e&&(this.unmount=oue(e,(t,r)=>(wF(this.node,r,"Start"),(i,{success:s})=>wF(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const WI=new WeakMap,yC=new WeakMap,jhe=n=>{const e=WI.get(n.target);e&&e(n)},Vhe=n=>{n.forEach(jhe)};function zhe({root:n,...e}){const t=n||document;yC.has(t)||yC.set(t,{});const r=yC.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Vhe,{root:n,...e})),r[i]}function Hhe(n,e,t){const r=zhe(e);return WI.set(n,t),r.observe(n),()=>{WI.delete(n),r.unobserve(n)}}const Ghe={some:0,all:1};class qhe extends Ff{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ghe[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),f=u?c:h;f&&f(l)};return Hhe(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Whe(e,t))&&this.startObserver()}unmount(){}}function Whe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const $he={inView:{Feature:qhe},tap:{Feature:Uhe},focus:{Feature:Fhe},hover:{Feature:Bhe}},Khe={layout:{ProjectionNode:DG,MeasureLayout:TG}},Jhe={...Oce,...$he,...Lhe,...Khe},Xt=Jue(Jhe,lce);function S_(n){const e=ax(()=>Up(n)),{isStatic:t}=W.useContext(YA);if(t){const[,r]=W.useState(n);W.useEffect(()=>e.on("change",r),[])}return e}function NG(n,e){const t=S_(e()),r=()=>t.set(e());return r(),rO(()=>{const i=()=>Pr.preRender(r,!1,!0),s=n.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Wc(r)}}),t}function Xhe(n){H0.current=[],n();const e=NG(H0.current,n);return H0.current=void 0,e}function cE(n,e,t,r){if(typeof n=="function")return Xhe(n);const i=typeof e=="function"?e:lue(e,t,r);return Array.isArray(n)?bF(n,i):bF([n],([s])=>i(s))}function bF(n,e){const t=ax(()=>[]);return NG(n,()=>{t.length=0;const r=n.length;for(let i=0;i<r;i++)t[i]=n[i].get();return e(t)})}var Yhe=function(e){return Qhe(e)&&!Zhe(e)};function Qhe(n){return!!n&&typeof n=="object"}function Zhe(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||nfe(n)}var efe=typeof Symbol=="function"&&Symbol.for,tfe=efe?Symbol.for("react.element"):60103;function nfe(n){return n.$$typeof===tfe}function rfe(n){return Array.isArray(n)?[]:{}}function hE(n,e){return e.clone!==!1&&e.isMergeableObject(n)?T_(rfe(n),n,e):n}function ife(n,e,t){return n.concat(e).map(function(r){return hE(r,t)})}function sfe(n,e,t){var r={};return t.isMergeableObject(n)&&Object.keys(n).forEach(function(i){r[i]=hE(n[i],t)}),Object.keys(e).forEach(function(i){!t.isMergeableObject(e[i])||!n[i]?r[i]=hE(e[i],t):r[i]=T_(n[i],e[i],t)}),r}function T_(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||ife,t.isMergeableObject=t.isMergeableObject||Yhe;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):sfe(n,e,t):hE(e,t)}T_.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return T_(r,i,t)},{})};var $I=T_,LG=typeof global=="object"&&global&&global.Object===Object&&global,ofe=typeof self=="object"&&self&&self.Object===Object&&self,Tu=LG||ofe||Function("return this")(),Mf=Tu.Symbol,BG=Object.prototype,afe=BG.hasOwnProperty,lfe=BG.toString,Wy=Mf?Mf.toStringTag:void 0;function ufe(n){var e=afe.call(n,Wy),t=n[Wy];try{n[Wy]=void 0;var r=!0}catch{}var i=lfe.call(n);return r&&(e?n[Wy]=t:delete n[Wy]),i}var cfe=Object.prototype,hfe=cfe.toString;function ffe(n){return hfe.call(n)}var dfe="[object Null]",pfe="[object Undefined]",EF=Mf?Mf.toStringTag:void 0;function sm(n){return n==null?n===void 0?pfe:dfe:EF&&EF in Object(n)?ufe(n):ffe(n)}function FG(n,e){return function(t){return n(e(t))}}var DO=FG(Object.getPrototypeOf,Object);function om(n){return n!=null&&typeof n=="object"}var mfe="[object Object]",gfe=Function.prototype,vfe=Object.prototype,UG=gfe.toString,yfe=vfe.hasOwnProperty,_fe=UG.call(Object);function AF(n){if(!om(n)||sm(n)!=mfe)return!1;var e=DO(n);if(e===null)return!0;var t=yfe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&UG.call(t)==_fe}function xfe(){this.__data__=[],this.size=0}function jG(n,e){return n===e||n!==n&&e!==e}function tS(n,e){for(var t=n.length;t--;)if(jG(n[t][0],e))return t;return-1}var wfe=Array.prototype,bfe=wfe.splice;function Efe(n){var e=this.__data__,t=tS(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():bfe.call(e,t,1),--this.size,!0}function Afe(n){var e=this.__data__,t=tS(e,n);return t<0?void 0:e[t][1]}function Sfe(n){return tS(this.__data__,n)>-1}function Tfe(n,e){var t=this.__data__,r=tS(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Qc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Qc.prototype.clear=xfe;Qc.prototype.delete=Efe;Qc.prototype.get=Afe;Qc.prototype.has=Sfe;Qc.prototype.set=Tfe;function Cfe(){this.__data__=new Qc,this.size=0}function Mfe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function Rfe(n){return this.__data__.get(n)}function Ife(n){return this.__data__.has(n)}function fx(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Pfe="[object AsyncFunction]",kfe="[object Function]",Ofe="[object GeneratorFunction]",Dfe="[object Proxy]";function VG(n){if(!fx(n))return!1;var e=sm(n);return e==kfe||e==Ofe||e==Pfe||e==Dfe}var _C=Tu["__core-js_shared__"],SF=(function(){var n=/[^.]+$/.exec(_C&&_C.keys&&_C.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function Nfe(n){return!!SF&&SF in n}var Lfe=Function.prototype,Bfe=Lfe.toString;function am(n){if(n!=null){try{return Bfe.call(n)}catch{}try{return n+""}catch{}}return""}var Ffe=/[\\^$.*+?()[\]{}|]/g,Ufe=/^\[object .+?Constructor\]$/,jfe=Function.prototype,Vfe=Object.prototype,zfe=jfe.toString,Hfe=Vfe.hasOwnProperty,Gfe=RegExp("^"+zfe.call(Hfe).replace(Ffe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qfe(n){if(!fx(n)||Nfe(n))return!1;var e=VG(n)?Gfe:Ufe;return e.test(am(n))}function Wfe(n,e){return n==null?void 0:n[e]}function lm(n,e){var t=Wfe(n,e);return qfe(t)?t:void 0}var C_=lm(Tu,"Map"),M_=lm(Object,"create");function $fe(){this.__data__=M_?M_(null):{},this.size=0}function Kfe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Jfe="__lodash_hash_undefined__",Xfe=Object.prototype,Yfe=Xfe.hasOwnProperty;function Qfe(n){var e=this.__data__;if(M_){var t=e[n];return t===Jfe?void 0:t}return Yfe.call(e,n)?e[n]:void 0}var Zfe=Object.prototype,ede=Zfe.hasOwnProperty;function tde(n){var e=this.__data__;return M_?e[n]!==void 0:ede.call(e,n)}var nde="__lodash_hash_undefined__";function rde(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=M_&&e===void 0?nde:e,this}function jp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}jp.prototype.clear=$fe;jp.prototype.delete=Kfe;jp.prototype.get=Qfe;jp.prototype.has=tde;jp.prototype.set=rde;function ide(){this.size=0,this.__data__={hash:new jp,map:new(C_||Qc),string:new jp}}function sde(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function nS(n,e){var t=n.__data__;return sde(e)?t[typeof e=="string"?"string":"hash"]:t.map}function ode(n){var e=nS(this,n).delete(n);return this.size-=e?1:0,e}function ade(n){return nS(this,n).get(n)}function lde(n){return nS(this,n).has(n)}function ude(n,e){var t=nS(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Uf(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Uf.prototype.clear=ide;Uf.prototype.delete=ode;Uf.prototype.get=ade;Uf.prototype.has=lde;Uf.prototype.set=ude;var cde=200;function hde(n,e){var t=this.__data__;if(t instanceof Qc){var r=t.__data__;if(!C_||r.length<cde-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Uf(r)}return t.set(n,e),this.size=t.size,this}function qv(n){var e=this.__data__=new Qc(n);this.size=e.size}qv.prototype.clear=Cfe;qv.prototype.delete=Mfe;qv.prototype.get=Rfe;qv.prototype.has=Ife;qv.prototype.set=hde;function fde(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var TF=(function(){try{var n=lm(Object,"defineProperty");return n({},"",{}),n}catch{}})();function zG(n,e,t){e=="__proto__"&&TF?TF(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var dde=Object.prototype,pde=dde.hasOwnProperty;function HG(n,e,t){var r=n[e];(!(pde.call(n,e)&&jG(r,t))||t===void 0&&!(e in n))&&zG(n,e,t)}function rS(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),i?zG(t,a,l):HG(t,a,l)}return t}function mde(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var gde="[object Arguments]";function CF(n){return om(n)&&sm(n)==gde}var GG=Object.prototype,vde=GG.hasOwnProperty,yde=GG.propertyIsEnumerable,_de=CF((function(){return arguments})())?CF:function(n){return om(n)&&vde.call(n,"callee")&&!yde.call(n,"callee")},dx=Array.isArray;function xde(){return!1}var qG=typeof aa=="object"&&aa&&!aa.nodeType&&aa,MF=qG&&typeof la=="object"&&la&&!la.nodeType&&la,wde=MF&&MF.exports===qG,RF=wde?Tu.Buffer:void 0,bde=RF?RF.isBuffer:void 0,WG=bde||xde,Ede=9007199254740991,Ade=/^(?:0|[1-9]\d*)$/;function Sde(n,e){var t=typeof n;return e=e??Ede,!!e&&(t=="number"||t!="symbol"&&Ade.test(n))&&n>-1&&n%1==0&&n<e}var Tde=9007199254740991;function $G(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Tde}var Cde="[object Arguments]",Mde="[object Array]",Rde="[object Boolean]",Ide="[object Date]",Pde="[object Error]",kde="[object Function]",Ode="[object Map]",Dde="[object Number]",Nde="[object Object]",Lde="[object RegExp]",Bde="[object Set]",Fde="[object String]",Ude="[object WeakMap]",jde="[object ArrayBuffer]",Vde="[object DataView]",zde="[object Float32Array]",Hde="[object Float64Array]",Gde="[object Int8Array]",qde="[object Int16Array]",Wde="[object Int32Array]",$de="[object Uint8Array]",Kde="[object Uint8ClampedArray]",Jde="[object Uint16Array]",Xde="[object Uint32Array]",Rr={};Rr[zde]=Rr[Hde]=Rr[Gde]=Rr[qde]=Rr[Wde]=Rr[$de]=Rr[Kde]=Rr[Jde]=Rr[Xde]=!0;Rr[Cde]=Rr[Mde]=Rr[jde]=Rr[Rde]=Rr[Vde]=Rr[Ide]=Rr[Pde]=Rr[kde]=Rr[Ode]=Rr[Dde]=Rr[Nde]=Rr[Lde]=Rr[Bde]=Rr[Fde]=Rr[Ude]=!1;function Yde(n){return om(n)&&$G(n.length)&&!!Rr[sm(n)]}function NO(n){return function(e){return n(e)}}var KG=typeof aa=="object"&&aa&&!aa.nodeType&&aa,$0=KG&&typeof la=="object"&&la&&!la.nodeType&&la,Qde=$0&&$0.exports===KG,xC=Qde&&LG.process,mv=(function(){try{var n=$0&&$0.require&&$0.require("util").types;return n||xC&&xC.binding&&xC.binding("util")}catch{}})(),IF=mv&&mv.isTypedArray,Zde=IF?NO(IF):Yde,epe=Object.prototype,tpe=epe.hasOwnProperty;function JG(n,e){var t=dx(n),r=!t&&_de(n),i=!t&&!r&&WG(n),s=!t&&!r&&!i&&Zde(n),o=t||r||i||s,a=o?mde(n.length,String):[],l=a.length;for(var u in n)(e||tpe.call(n,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Sde(u,l)))&&a.push(u);return a}var npe=Object.prototype;function LO(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||npe;return n===t}var rpe=FG(Object.keys,Object),ipe=Object.prototype,spe=ipe.hasOwnProperty;function ope(n){if(!LO(n))return rpe(n);var e=[];for(var t in Object(n))spe.call(n,t)&&t!="constructor"&&e.push(t);return e}function XG(n){return n!=null&&$G(n.length)&&!VG(n)}function BO(n){return XG(n)?JG(n):ope(n)}function ape(n,e){return n&&rS(e,BO(e),n)}function lpe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var upe=Object.prototype,cpe=upe.hasOwnProperty;function hpe(n){if(!fx(n))return lpe(n);var e=LO(n),t=[];for(var r in n)r=="constructor"&&(e||!cpe.call(n,r))||t.push(r);return t}function FO(n){return XG(n)?JG(n,!0):hpe(n)}function fpe(n,e){return n&&rS(e,FO(e),n)}var YG=typeof aa=="object"&&aa&&!aa.nodeType&&aa,PF=YG&&typeof la=="object"&&la&&!la.nodeType&&la,dpe=PF&&PF.exports===YG,kF=dpe?Tu.Buffer:void 0,OF=kF?kF.allocUnsafe:void 0;function ppe(n,e){if(e)return n.slice();var t=n.length,r=OF?OF(t):new n.constructor(t);return n.copy(r),r}function QG(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}function mpe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function ZG(){return[]}var gpe=Object.prototype,vpe=gpe.propertyIsEnumerable,DF=Object.getOwnPropertySymbols,UO=DF?function(n){return n==null?[]:(n=Object(n),mpe(DF(n),function(e){return vpe.call(n,e)}))}:ZG;function ype(n,e){return rS(n,UO(n),e)}function e7(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var _pe=Object.getOwnPropertySymbols,t7=_pe?function(n){for(var e=[];n;)e7(e,UO(n)),n=DO(n);return e}:ZG;function xpe(n,e){return rS(n,t7(n),e)}function n7(n,e,t){var r=e(n);return dx(n)?r:e7(r,t(n))}function wpe(n){return n7(n,BO,UO)}function bpe(n){return n7(n,FO,t7)}var KI=lm(Tu,"DataView"),JI=lm(Tu,"Promise"),XI=lm(Tu,"Set"),YI=lm(Tu,"WeakMap"),NF="[object Map]",Epe="[object Object]",LF="[object Promise]",BF="[object Set]",FF="[object WeakMap]",UF="[object DataView]",Ape=am(KI),Spe=am(C_),Tpe=am(JI),Cpe=am(XI),Mpe=am(YI),Ec=sm;(KI&&Ec(new KI(new ArrayBuffer(1)))!=UF||C_&&Ec(new C_)!=NF||JI&&Ec(JI.resolve())!=LF||XI&&Ec(new XI)!=BF||YI&&Ec(new YI)!=FF)&&(Ec=function(n){var e=sm(n),t=e==Epe?n.constructor:void 0,r=t?am(t):"";if(r)switch(r){case Ape:return UF;case Spe:return NF;case Tpe:return LF;case Cpe:return BF;case Mpe:return FF}return e});var Rpe=Object.prototype,Ipe=Rpe.hasOwnProperty;function Ppe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Ipe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var jF=Tu.Uint8Array;function jO(n){var e=new n.constructor(n.byteLength);return new jF(e).set(new jF(n)),e}function kpe(n,e){var t=e?jO(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Ope=/\w*$/;function Dpe(n){var e=new n.constructor(n.source,Ope.exec(n));return e.lastIndex=n.lastIndex,e}var VF=Mf?Mf.prototype:void 0,zF=VF?VF.valueOf:void 0;function Npe(n){return zF?Object(zF.call(n)):{}}function Lpe(n,e){var t=e?jO(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Bpe="[object Boolean]",Fpe="[object Date]",Upe="[object Map]",jpe="[object Number]",Vpe="[object RegExp]",zpe="[object Set]",Hpe="[object String]",Gpe="[object Symbol]",qpe="[object ArrayBuffer]",Wpe="[object DataView]",$pe="[object Float32Array]",Kpe="[object Float64Array]",Jpe="[object Int8Array]",Xpe="[object Int16Array]",Ype="[object Int32Array]",Qpe="[object Uint8Array]",Zpe="[object Uint8ClampedArray]",eme="[object Uint16Array]",tme="[object Uint32Array]";function nme(n,e,t){var r=n.constructor;switch(e){case qpe:return jO(n);case Bpe:case Fpe:return new r(+n);case Wpe:return kpe(n,t);case $pe:case Kpe:case Jpe:case Xpe:case Ype:case Qpe:case Zpe:case eme:case tme:return Lpe(n,t);case Upe:return new r;case jpe:case Hpe:return new r(n);case Vpe:return Dpe(n);case zpe:return new r;case Gpe:return Npe(n)}}var HF=Object.create,rme=(function(){function n(){}return function(e){if(!fx(e))return{};if(HF)return HF(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}})();function ime(n){return typeof n.constructor=="function"&&!LO(n)?rme(DO(n)):{}}var sme="[object Map]";function ome(n){return om(n)&&Ec(n)==sme}var GF=mv&&mv.isMap,ame=GF?NO(GF):ome,lme="[object Set]";function ume(n){return om(n)&&Ec(n)==lme}var qF=mv&&mv.isSet,cme=qF?NO(qF):ume,hme=1,fme=2,dme=4,r7="[object Arguments]",pme="[object Array]",mme="[object Boolean]",gme="[object Date]",vme="[object Error]",i7="[object Function]",yme="[object GeneratorFunction]",_me="[object Map]",xme="[object Number]",s7="[object Object]",wme="[object RegExp]",bme="[object Set]",Eme="[object String]",Ame="[object Symbol]",Sme="[object WeakMap]",Tme="[object ArrayBuffer]",Cme="[object DataView]",Mme="[object Float32Array]",Rme="[object Float64Array]",Ime="[object Int8Array]",Pme="[object Int16Array]",kme="[object Int32Array]",Ome="[object Uint8Array]",Dme="[object Uint8ClampedArray]",Nme="[object Uint16Array]",Lme="[object Uint32Array]",Ar={};Ar[r7]=Ar[pme]=Ar[Tme]=Ar[Cme]=Ar[mme]=Ar[gme]=Ar[Mme]=Ar[Rme]=Ar[Ime]=Ar[Pme]=Ar[kme]=Ar[_me]=Ar[xme]=Ar[s7]=Ar[wme]=Ar[bme]=Ar[Eme]=Ar[Ame]=Ar[Ome]=Ar[Dme]=Ar[Nme]=Ar[Lme]=!0;Ar[vme]=Ar[i7]=Ar[Sme]=!1;function K0(n,e,t,r,i,s){var o,a=e&hme,l=e&fme,u=e&dme;if(o!==void 0)return o;if(!fx(n))return n;var c=dx(n);if(c){if(o=Ppe(n),!a)return QG(n,o)}else{var h=Ec(n),f=h==i7||h==yme;if(WG(n))return ppe(n,a);if(h==s7||h==r7||f&&!i){if(o=l||f?{}:ime(n),!a)return l?xpe(n,fpe(o,n)):ype(n,ape(o,n))}else{if(!Ar[h])return i?n:{};o=nme(n,h,a)}}s||(s=new qv);var p=s.get(n);if(p)return p;s.set(n,o),cme(n)?n.forEach(function(_){o.add(K0(_,e,t,_,n,s))}):ame(n)&&n.forEach(function(_,v){o.set(v,K0(_,e,t,v,n,s))});var g=u?l?bpe:wpe:l?FO:BO,x=c?void 0:g(n);return fde(x||n,function(_,v){x&&(v=_,_=n[v]),HG(o,v,K0(_,e,t,v,n,s))}),o}var Bme=1,Fme=4;function T0(n){return K0(n,Bme|Fme)}var wC,WF;function Ume(){if(WF)return wC;WF=1;var n=Array.isArray,e=Object.keys,t=Object.prototype.hasOwnProperty,r=typeof Element<"u";function i(s,o){if(s===o)return!0;if(s&&o&&typeof s=="object"&&typeof o=="object"){var a=n(s),l=n(o),u,c,h;if(a&&l){if(c=s.length,c!=o.length)return!1;for(u=c;u--!==0;)if(!i(s[u],o[u]))return!1;return!0}if(a!=l)return!1;var f=s instanceof Date,p=o instanceof Date;if(f!=p)return!1;if(f&&p)return s.getTime()==o.getTime();var g=s instanceof RegExp,x=o instanceof RegExp;if(g!=x)return!1;if(g&&x)return s.toString()==o.toString();var _=e(s);if(c=_.length,c!==e(o).length)return!1;for(u=c;u--!==0;)if(!t.call(o,_[u]))return!1;if(r&&s instanceof Element&&o instanceof Element)return s===o;for(u=c;u--!==0;)if(h=_[u],!(h==="_owner"&&s.$$typeof)&&!i(s[h],o[h]))return!1;return!0}return s!==s&&o!==o}return wC=function(o,a){try{return i(o,a)}catch(l){if(l.message&&l.message.match(/stack|recursion/i)||l.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",l.name,l.message),!1;throw l}},wC}var jme=Ume();const Xh=Ll(jme);var Vme=4;function $F(n){return K0(n,Vme)}function o7(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var zme="[object Symbol]";function VO(n){return typeof n=="symbol"||om(n)&&sm(n)==zme}var Hme="Expected a function";function zO(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Hme);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(zO.Cache||Uf),t}zO.Cache=Uf;var Gme=500;function qme(n){var e=zO(n,function(r){return t.size===Gme&&t.clear(),r}),t=e.cache;return e}var Wme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$me=/\\(\\)?/g,Kme=qme(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Wme,function(t,r,i,s){e.push(i?s.replace($me,"$1"):r||t)}),e});function Jme(n){if(typeof n=="string"||VO(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var KF=Mf?Mf.prototype:void 0,JF=KF?KF.toString:void 0;function a7(n){if(typeof n=="string")return n;if(dx(n))return o7(n,a7)+"";if(VO(n))return JF?JF.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Xme(n){return n==null?"":a7(n)}function l7(n){return dx(n)?o7(n,Jme):VO(n)?[n]:QG(Kme(Xme(n)))}var bC={exports:{}},ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XF;function Yme(){if(XF)return ir;XF=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,c=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,x=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function E(C){if(typeof C=="object"&&C!==null){var D=C.$$typeof;switch(D){case e:switch(C=C.type,C){case l:case u:case r:case s:case i:case h:return C;default:switch(C=C&&C.$$typeof,C){case a:case c:case g:case p:case o:return C;default:return D}}case t:return D}}}function S(C){return E(C)===u}return ir.AsyncMode=l,ir.ConcurrentMode=u,ir.ContextConsumer=a,ir.ContextProvider=o,ir.Element=e,ir.ForwardRef=c,ir.Fragment=r,ir.Lazy=g,ir.Memo=p,ir.Portal=t,ir.Profiler=s,ir.StrictMode=i,ir.Suspense=h,ir.isAsyncMode=function(C){return S(C)||E(C)===l},ir.isConcurrentMode=S,ir.isContextConsumer=function(C){return E(C)===a},ir.isContextProvider=function(C){return E(C)===o},ir.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},ir.isForwardRef=function(C){return E(C)===c},ir.isFragment=function(C){return E(C)===r},ir.isLazy=function(C){return E(C)===g},ir.isMemo=function(C){return E(C)===p},ir.isPortal=function(C){return E(C)===t},ir.isProfiler=function(C){return E(C)===s},ir.isStrictMode=function(C){return E(C)===i},ir.isSuspense=function(C){return E(C)===h},ir.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===u||C===s||C===i||C===h||C===f||typeof C=="object"&&C!==null&&(C.$$typeof===g||C.$$typeof===p||C.$$typeof===o||C.$$typeof===a||C.$$typeof===c||C.$$typeof===_||C.$$typeof===v||C.$$typeof===b||C.$$typeof===x)},ir.typeOf=E,ir}var YF;function Qme(){return YF||(YF=1,bC.exports=Yme()),bC.exports}var EC,QF;function Zme(){if(QF)return EC;QF=1;var n=Qme(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function o(g){return n.isMemo(g)?i:s[g.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;function p(g,x,_){if(typeof x!="string"){if(f){var v=h(x);v&&v!==f&&p(g,v,_)}var b=l(x);u&&(b=b.concat(u(x)));for(var E=o(g),S=o(x),C=0;C<b.length;++C){var D=b[C];if(!t[D]&&!(_&&_[D])&&!(S&&S[D])&&!(E&&E[D])){var M=c(x,D);try{a(g,D,M)}catch{}}}}return g}return EC=p,EC}var ege=Zme();const tge=Ll(ege);function si(){return si=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},si.apply(this,arguments)}function u7(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function iS(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function ZF(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var sS=W.createContext(void 0);sS.displayName="FormikContext";var nge=sS.Provider,rge=sS.Consumer;function ige(){var n=W.useContext(sS);return n}var eU=function(e){return Array.isArray(e)&&e.length===0},js=function(e){return typeof e=="function"},px=function(e){return e!==null&&typeof e=="object"},sge=function(e){return String(Math.floor(Number(e)))===e},AC=function(e){return Object.prototype.toString.call(e)==="[object String]"},c7=function(e){return W.Children.count(e)===0},SC=function(e){return px(e)&&js(e.then)};function Nr(n,e,t,r){r===void 0&&(r=0);for(var i=l7(e);n&&r<i.length;)n=n[i[r++]];return r!==i.length&&!n||n===void 0?t:n}function mu(n,e,t){for(var r=$F(n),i=r,s=0,o=l7(e);s<o.length-1;s++){var a=o[s],l=Nr(n,o.slice(0,s+1));if(l&&(px(l)||Array.isArray(l)))i=i[a]=$F(l);else{var u=o[s+1];i=i[a]=sge(u)&&Number(u)>=0?[]:{}}}return(s===0?n:i)[o[s]]===t?n:(t===void 0?delete i[o[s]]:i[o[s]]=t,s===0&&t===void 0&&delete r[o[s]],r)}function h7(n,e,t,r){t===void 0&&(t=new WeakMap),r===void 0&&(r={});for(var i=0,s=Object.keys(n);i<s.length;i++){var o=s[i],a=n[o];px(a)?t.get(a)||(t.set(a,!0),r[o]=Array.isArray(a)?[]:{},h7(a,e,t,r[o])):r[o]=e}return r}function oge(n,e){switch(e.type){case"SET_VALUES":return si({},n,{values:e.payload});case"SET_TOUCHED":return si({},n,{touched:e.payload});case"SET_ERRORS":return Xh(n.errors,e.payload)?n:si({},n,{errors:e.payload});case"SET_STATUS":return si({},n,{status:e.payload});case"SET_ISSUBMITTING":return si({},n,{isSubmitting:e.payload});case"SET_ISVALIDATING":return si({},n,{isValidating:e.payload});case"SET_FIELD_VALUE":return si({},n,{values:mu(n.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return si({},n,{touched:mu(n.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return si({},n,{errors:mu(n.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return si({},n,e.payload);case"SET_FORMIK_STATE":return e.payload(n);case"SUBMIT_ATTEMPT":return si({},n,{touched:h7(n.values,!0),isSubmitting:!0,submitCount:n.submitCount+1});case"SUBMIT_FAILURE":return si({},n,{isSubmitting:!1});case"SUBMIT_SUCCESS":return si({},n,{isSubmitting:!1});default:return n}}var Id={},$w={};function Wv(n){var e=n.validateOnChange,t=e===void 0?!0:e,r=n.validateOnBlur,i=r===void 0?!0:r,s=n.validateOnMount,o=s===void 0?!1:s,a=n.isInitialValid,l=n.enableReinitialize,u=l===void 0?!1:l,c=n.onSubmit,h=iS(n,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=si({validateOnChange:t,validateOnBlur:i,validateOnMount:o,onSubmit:c},h),p=W.useRef(f.initialValues),g=W.useRef(f.initialErrors||Id),x=W.useRef(f.initialTouched||$w),_=W.useRef(f.initialStatus),v=W.useRef(!1),b=W.useRef({});W.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var E=W.useState(0),S=E[1],C=W.useRef({values:T0(f.initialValues),errors:T0(f.initialErrors)||Id,touched:T0(f.initialTouched)||$w,status:T0(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),D=C.current,M=W.useCallback(function(q){var me=C.current;C.current=oge(me,q),me!==C.current&&S(function(de){return de+1})},[]),P=W.useCallback(function(q,me){return new Promise(function(de,ye){var be=f.validate(q,me);be==null?de(Id):SC(be)?be.then(function(He){de(He||Id)},function(He){ye(He)}):de(be)})},[f.validate]),O=W.useCallback(function(q,me){var de=f.validationSchema,ye=js(de)?de(me):de,be=me&&ye.validateAt?ye.validateAt(me,q):lge(q,ye);return new Promise(function(He,qe){be.then(function(){He(Id)},function(lt){lt.name==="ValidationError"?He(age(lt)):qe(lt)})})},[f.validationSchema]),R=W.useCallback(function(q,me){return new Promise(function(de){return de(b.current[q].validate(me))})},[]),N=W.useCallback(function(q){var me=Object.keys(b.current).filter(function(ye){return js(b.current[ye].validate)}),de=me.length>0?me.map(function(ye){return R(ye,Nr(q,ye))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(de).then(function(ye){return ye.reduce(function(be,He,qe){return He==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||He&&(be=mu(be,me[qe],He)),be},{})})},[R]),U=W.useCallback(function(q){return Promise.all([N(q),f.validationSchema?O(q):{},f.validate?P(q):{}]).then(function(me){var de=me[0],ye=me[1],be=me[2],He=$I.all([de,ye,be],{arrayMerge:uge});return He})},[f.validate,f.validationSchema,N,P,O]),F=Ma(function(q){return q===void 0&&(q=D.values),M({type:"SET_ISVALIDATING",payload:!0}),U(q).then(function(me){return v.current&&(M({type:"SET_ISVALIDATING",payload:!1}),M({type:"SET_ERRORS",payload:me})),me})});W.useEffect(function(){o&&v.current===!0&&Xh(p.current,f.initialValues)&&F(p.current)},[o,F]);var J=W.useCallback(function(q){var me=q&&q.values?q.values:p.current,de=q&&q.errors?q.errors:g.current?g.current:f.initialErrors||{},ye=q&&q.touched?q.touched:x.current?x.current:f.initialTouched||{},be=q&&q.status?q.status:_.current?_.current:f.initialStatus;p.current=me,g.current=de,x.current=ye,_.current=be;var He=function(){M({type:"RESET_FORM",payload:{isSubmitting:!!q&&!!q.isSubmitting,errors:de,touched:ye,status:be,values:me,isValidating:!!q&&!!q.isValidating,submitCount:q&&q.submitCount&&typeof q.submitCount=="number"?q.submitCount:0}})};if(f.onReset){var qe=f.onReset(D.values,Be);SC(qe)?qe.then(He):He()}else He()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);W.useEffect(function(){v.current===!0&&!Xh(p.current,f.initialValues)&&u&&(p.current=f.initialValues,J(),o&&F(p.current))},[u,f.initialValues,J,o,F]),W.useEffect(function(){u&&v.current===!0&&!Xh(g.current,f.initialErrors)&&(g.current=f.initialErrors||Id,M({type:"SET_ERRORS",payload:f.initialErrors||Id}))},[u,f.initialErrors]),W.useEffect(function(){u&&v.current===!0&&!Xh(x.current,f.initialTouched)&&(x.current=f.initialTouched||$w,M({type:"SET_TOUCHED",payload:f.initialTouched||$w}))},[u,f.initialTouched]),W.useEffect(function(){u&&v.current===!0&&!Xh(_.current,f.initialStatus)&&(_.current=f.initialStatus,M({type:"SET_STATUS",payload:f.initialStatus}))},[u,f.initialStatus,f.initialTouched]);var Z=Ma(function(q){if(b.current[q]&&js(b.current[q].validate)){var me=Nr(D.values,q),de=b.current[q].validate(me);return SC(de)?(M({type:"SET_ISVALIDATING",payload:!0}),de.then(function(ye){return ye}).then(function(ye){M({type:"SET_FIELD_ERROR",payload:{field:q,value:ye}}),M({type:"SET_ISVALIDATING",payload:!1})})):(M({type:"SET_FIELD_ERROR",payload:{field:q,value:de}}),Promise.resolve(de))}else if(f.validationSchema)return M({type:"SET_ISVALIDATING",payload:!0}),O(D.values,q).then(function(ye){return ye}).then(function(ye){M({type:"SET_FIELD_ERROR",payload:{field:q,value:Nr(ye,q)}}),M({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),oe=W.useCallback(function(q,me){var de=me.validate;b.current[q]={validate:de}},[]),ae=W.useCallback(function(q){delete b.current[q]},[]),Q=Ma(function(q,me){M({type:"SET_TOUCHED",payload:q});var de=me===void 0?i:me;return de?F(D.values):Promise.resolve()}),ee=W.useCallback(function(q){M({type:"SET_ERRORS",payload:q})},[]),Y=Ma(function(q,me){var de=js(q)?q(D.values):q;M({type:"SET_VALUES",payload:de});var ye=me===void 0?t:me;return ye?F(de):Promise.resolve()}),V=W.useCallback(function(q,me){M({type:"SET_FIELD_ERROR",payload:{field:q,value:me}})},[]),X=Ma(function(q,me,de){M({type:"SET_FIELD_VALUE",payload:{field:q,value:me}});var ye=de===void 0?t:de;return ye?F(mu(D.values,q,me)):Promise.resolve()}),re=W.useCallback(function(q,me){var de=me,ye=q,be;if(!AC(q)){q.persist&&q.persist();var He=q.target?q.target:q.currentTarget,qe=He.type,lt=He.name,vt=He.id,Ye=He.value,yt=He.checked;He.outerHTML;var Ot=He.options,jt=He.multiple;de=me||lt||vt,ye=/number|range/.test(qe)?(be=parseFloat(Ye),isNaN(be)?"":be):/checkbox/.test(qe)?hge(Nr(D.values,de),yt,Ye):Ot&&jt?cge(Ot):Ye}de&&X(de,ye)},[X,D.values]),se=Ma(function(q){if(AC(q))return function(me){return re(me,q)};re(q)}),he=Ma(function(q,me,de){me===void 0&&(me=!0),M({type:"SET_FIELD_TOUCHED",payload:{field:q,value:me}});var ye=de===void 0?i:de;return ye?F(D.values):Promise.resolve()}),te=W.useCallback(function(q,me){q.persist&&q.persist();var de=q.target,ye=de.name,be=de.id;de.outerHTML;var He=me||ye||be;he(He,!0)},[he]),ce=Ma(function(q){if(AC(q))return function(me){return te(me,q)};te(q)}),ve=W.useCallback(function(q){js(q)?M({type:"SET_FORMIK_STATE",payload:q}):M({type:"SET_FORMIK_STATE",payload:function(){return q}})},[]),xe=W.useCallback(function(q){M({type:"SET_STATUS",payload:q})},[]),Te=W.useCallback(function(q){M({type:"SET_ISSUBMITTING",payload:q})},[]),$e=Ma(function(){return M({type:"SUBMIT_ATTEMPT"}),F().then(function(q){var me=q instanceof Error,de=!me&&Object.keys(q).length===0;if(de){var ye;try{if(ye=fe(),ye===void 0)return}catch(be){throw be}return Promise.resolve(ye).then(function(be){return v.current&&M({type:"SUBMIT_SUCCESS"}),be}).catch(function(be){if(v.current)throw M({type:"SUBMIT_FAILURE"}),be})}else if(v.current&&(M({type:"SUBMIT_FAILURE"}),me))throw q})}),De=Ma(function(q){q&&q.preventDefault&&js(q.preventDefault)&&q.preventDefault(),q&&q.stopPropagation&&js(q.stopPropagation)&&q.stopPropagation(),$e().catch(function(me){console.warn("Warning: An unhandled error was caught from submitForm()",me)})}),Be={resetForm:J,validateForm:F,validateField:Z,setErrors:ee,setFieldError:V,setFieldTouched:he,setFieldValue:X,setStatus:xe,setSubmitting:Te,setTouched:Q,setValues:Y,setFormikState:ve,submitForm:$e},fe=Ma(function(){return c(D.values,Be)}),it=Ma(function(q){q&&q.preventDefault&&js(q.preventDefault)&&q.preventDefault(),q&&q.stopPropagation&&js(q.stopPropagation)&&q.stopPropagation(),J()}),Je=W.useCallback(function(q){return{value:Nr(D.values,q),error:Nr(D.errors,q),touched:!!Nr(D.touched,q),initialValue:Nr(p.current,q),initialTouched:!!Nr(x.current,q),initialError:Nr(g.current,q)}},[D.errors,D.touched,D.values]),rt=W.useCallback(function(q){return{setValue:function(de,ye){return X(q,de,ye)},setTouched:function(de,ye){return he(q,de,ye)},setError:function(de){return V(q,de)}}},[X,he,V]),we=W.useCallback(function(q){var me=px(q),de=me?q.name:q,ye=Nr(D.values,de),be={name:de,value:ye,onChange:se,onBlur:ce};if(me){var He=q.type,qe=q.value,lt=q.as,vt=q.multiple;He==="checkbox"?qe===void 0?be.checked=!!ye:(be.checked=!!(Array.isArray(ye)&&~ye.indexOf(qe)),be.value=qe):He==="radio"?(be.checked=ye===qe,be.value=qe):lt==="select"&&vt&&(be.value=be.value||[],be.multiple=!0)}return be},[ce,se,D.values]),Ie=W.useMemo(function(){return!Xh(p.current,D.values)},[p.current,D.values]),Ne=W.useMemo(function(){return typeof a<"u"?Ie?D.errors&&Object.keys(D.errors).length===0:a!==!1&&js(a)?a(f):a:D.errors&&Object.keys(D.errors).length===0},[a,Ie,D.errors,f]),ie=si({},D,{initialValues:p.current,initialErrors:g.current,initialTouched:x.current,initialStatus:_.current,handleBlur:ce,handleChange:se,handleReset:it,handleSubmit:De,resetForm:J,setErrors:ee,setFormikState:ve,setFieldTouched:he,setFieldValue:X,setFieldError:V,setStatus:xe,setSubmitting:Te,setTouched:Q,setValues:Y,submitForm:$e,validateForm:F,validateField:Z,isValid:Ne,dirty:Ie,unregisterField:ae,registerField:oe,getFieldProps:we,getFieldMeta:Je,getFieldHelpers:rt,validateOnBlur:i,validateOnChange:t,validateOnMount:o});return ie}function oS(n){var e=Wv(n),t=n.component,r=n.children,i=n.render,s=n.innerRef;return W.useImperativeHandle(s,function(){return e}),W.createElement(nge,{value:e},t?W.createElement(t,e):i?i(e):r?js(r)?r(e):c7(r)?null:W.Children.only(r):null)}function age(n){var e={};if(n.inner){if(n.inner.length===0)return mu(e,n.path,n.message);for(var i=n.inner,t=Array.isArray(i),r=0,i=t?i:i[Symbol.iterator]();;){var s;if(t){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var o=s;Nr(e,o.path)||(e=mu(e,o.path,o.message))}}return e}function lge(n,e,t,r){t===void 0&&(t=!1);var i=QI(n);return e[t?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function QI(n){var e=Array.isArray(n)?[]:{};for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var r=String(t);Array.isArray(n[r])===!0?e[r]=n[r].map(function(i){return Array.isArray(i)===!0||AF(i)?QI(i):i!==""?i:void 0}):AF(n[r])?e[r]=QI(n[r]):e[r]=n[r]!==""?n[r]:void 0}return e}function uge(n,e,t){var r=n.slice();return e.forEach(function(s,o){if(typeof r[o]>"u"){var a=t.clone!==!1,l=a&&t.isMergeableObject(s);r[o]=l?$I(Array.isArray(s)?[]:{},s,t):s}else t.isMergeableObject(s)?r[o]=$I(n[o],s,t):n.indexOf(s)===-1&&r.push(s)}),r}function cge(n){return Array.from(n).filter(function(e){return e.selected}).map(function(e){return e.value})}function hge(n,e,t){if(typeof n=="boolean")return!!e;var r=[],i=!1,s=-1;if(Array.isArray(n))r=n,s=n.indexOf(t),i=s>=0;else if(!t||t=="true"||t=="false")return!!e;return e&&t&&!i?r.concat(t):i?r.slice(0,s).concat(r.slice(s+1)):r}var fge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?W.useLayoutEffect:W.useEffect;function Ma(n){var e=W.useRef(n);return fge(function(){e.current=n}),W.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current.apply(void 0,r)},[])}var mx=W.forwardRef(function(n,e){var t=n.action,r=iS(n,["action"]),i=t??"#",s=ige(),o=s.handleReset,a=s.handleSubmit;return W.createElement("form",si({onSubmit:a,ref:e,onReset:o,action:i},r))});mx.displayName="Form";function f7(n){var e=function(i){return W.createElement(rge,null,function(s){return W.createElement(n,si({},i,{formik:s}))})},t=n.displayName||n.name||n.constructor&&n.constructor.name||"Component";return e.WrappedComponent=n,e.displayName="FormikConnect("+t+")",tge(e,n)}var dge=function(e,t,r){var i=Vp(e),s=i[t];return i.splice(t,1),i.splice(r,0,s),i},pge=function(e,t,r){var i=Vp(e),s=i[t];return i[t]=i[r],i[r]=s,i},TC=function(e,t,r){var i=Vp(e);return i.splice(t,0,r),i},mge=function(e,t,r){var i=Vp(e);return i[t]=r,i},Vp=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map(function(r){return parseInt(r)}).reduce(function(r,i){return i>r?i:r},0);return Array.from(si({},e,{length:t+1}))}else return[]},tU=function(e,t){var r=typeof e=="function"?e:t;return function(i){if(Array.isArray(i)||px(i)){var s=Vp(i);return r(s)}return i}},d7=(function(n){u7(e,n);function e(r){var i;return i=n.call(this,r)||this,i.updateArrayField=function(s,o,a){var l=i.props,u=l.name,c=l.formik.setFormikState;c(function(h){var f=tU(a,s),p=tU(o,s),g=mu(h.values,u,s(Nr(h.values,u))),x=a?f(Nr(h.errors,u)):void 0,_=o?p(Nr(h.touched,u)):void 0;return eU(x)&&(x=void 0),eU(_)&&(_=void 0),si({},h,{values:g,errors:a?mu(h.errors,u,x):h.errors,touched:o?mu(h.touched,u,_):h.touched})})},i.push=function(s){return i.updateArrayField(function(o){return[].concat(Vp(o),[T0(s)])},!1,!1)},i.handlePush=function(s){return function(){return i.push(s)}},i.swap=function(s,o){return i.updateArrayField(function(a){return pge(a,s,o)},!0,!0)},i.handleSwap=function(s,o){return function(){return i.swap(s,o)}},i.move=function(s,o){return i.updateArrayField(function(a){return dge(a,s,o)},!0,!0)},i.handleMove=function(s,o){return function(){return i.move(s,o)}},i.insert=function(s,o){return i.updateArrayField(function(a){return TC(a,s,o)},function(a){return TC(a,s,null)},function(a){return TC(a,s,null)})},i.handleInsert=function(s,o){return function(){return i.insert(s,o)}},i.replace=function(s,o){return i.updateArrayField(function(a){return mge(a,s,o)},!1,!1)},i.handleReplace=function(s,o){return function(){return i.replace(s,o)}},i.unshift=function(s){var o=-1;return i.updateArrayField(function(a){var l=a?[s].concat(a):[s];return o=l.length,l},function(a){return a?[null].concat(a):[null]},function(a){return a?[null].concat(a):[null]}),o},i.handleUnshift=function(s){return function(){return i.unshift(s)}},i.handleRemove=function(s){return function(){return i.remove(s)}},i.handlePop=function(){return function(){return i.pop()}},i.remove=i.remove.bind(ZF(i)),i.pop=i.pop.bind(ZF(i)),i}var t=e.prototype;return t.componentDidUpdate=function(i){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Xh(Nr(i.formik.values,i.name),Nr(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},t.remove=function(i){var s;return this.updateArrayField(function(o){var a=o?Vp(o):[];return s||(s=a[i]),js(a.splice)&&a.splice(i,1),js(a.every)&&a.every(function(l){return l===void 0})?[]:a},!0,!0),s},t.pop=function(){var i;return this.updateArrayField(function(s){var o=s.slice();return i||(i=o&&o.pop&&o.pop()),o},!0,!0),i},t.render=function(){var i={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},s=this.props,o=s.component,a=s.render,l=s.children,u=s.name,c=s.formik,h=iS(c,["validate","validationSchema"]),f=si({},i,{form:h,name:u});return o?W.createElement(o,f):a?a(f):l?typeof l=="function"?l(f):c7(l)?null:W.Children.only(l):null},e})(W.Component);d7.defaultProps={validateOnChange:!0};var fE=f7(d7),gge=(function(n){u7(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(i){return Nr(this.props.formik.errors,this.props.name)!==Nr(i.formik.errors,this.props.name)||Nr(this.props.formik.touched,this.props.name)!==Nr(i.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(i).length},t.render=function(){var i=this.props,s=i.component,o=i.formik,a=i.render,l=i.children,u=i.name,c=iS(i,["component","formik","render","children","name"]),h=Nr(o.touched,u),f=Nr(o.errors,u);return h&&f?a?js(a)?a(f):null:l?js(l)?l(f):null:s?W.createElement(s,c,f):f:null},e})(W.Component),vge=f7(gge),CC,nU;function yge(){if(nU)return CC;nU=1;function n(v){this._maxSize=v,this.clear()}n.prototype.clear=function(){this._size=0,this._values=Object.create(null)},n.prototype.get=function(v){return this._values[v]},n.prototype.set=function(v,b){return this._size>=this._maxSize&&this.clear(),v in this._values||this._size++,this._values[v]=b};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,t=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,s=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,a=new n(o),l=new n(o),u=new n(o);CC={Cache:n,split:h,normalizePath:c,setter:function(v){var b=c(v);return l.get(v)||l.set(v,function(S,C){for(var D=0,M=b.length,P=S;D<M-1;){var O=b[D];if(O==="__proto__"||O==="constructor"||O==="prototype")return S;P=P[b[D++]]}P[b[D]]=C})},getter:function(v,b){var E=c(v);return u.get(v)||u.set(v,function(C){for(var D=0,M=E.length;D<M;)if(C!=null||!b)C=C[E[D++]];else return;return C})},join:function(v){return v.reduce(function(b,E){return b+(p(E)||t.test(E)?"["+E+"]":(b?".":"")+E)},"")},forEach:function(v,b,E){f(Array.isArray(v)?v:h(v),b,E)}};function c(v){return a.get(v)||a.set(v,h(v).map(function(b){return b.replace(s,"$2")}))}function h(v){return v.match(e)||[""]}function f(v,b,E){var S=v.length,C,D,M,P;for(D=0;D<S;D++)C=v[D],C&&(_(C)&&(C='"'+C+'"'),P=p(C),M=!P&&/^\d+$/.test(C),b.call(E,C,P,M,D,v))}function p(v){return typeof v=="string"&&v&&["'",'"'].indexOf(v.charAt(0))!==-1}function g(v){return v.match(r)&&!v.match(t)}function x(v){return i.test(v)}function _(v){return!p(v)&&(g(v)||x(v))}return CC}var Ep=yge(),MC,rU;function _ge(){if(rU)return MC;rU=1;const n=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=c=>c.match(n)||[],t=c=>c[0].toUpperCase()+c.slice(1),r=(c,h)=>e(c).join(h).toLowerCase(),i=c=>e(c).reduce((h,f)=>`${h}${h?f[0].toUpperCase()+f.slice(1).toLowerCase():f.toLowerCase()}`,"");return MC={words:e,upperFirst:t,camelCase:i,pascalCase:c=>t(i(c)),snakeCase:c=>r(c,"_"),kebabCase:c=>r(c,"-"),sentenceCase:c=>t(r(c," ")),titleCase:c=>e(c).map(t).join(" ")},MC}var RC=_ge(),Kw={exports:{}},iU;function xge(){if(iU)return Kw.exports;iU=1,Kw.exports=function(i){return n(e(i),i)},Kw.exports.array=n;function n(i,s){var o=i.length,a=new Array(o),l={},u=o,c=t(s),h=r(i);for(s.forEach(function(p){if(!h.has(p[0])||!h.has(p[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});u--;)l[u]||f(i[u],u,new Set);return a;function f(p,g,x){if(x.has(p)){var _;try{_=", node was:"+JSON.stringify(p)}catch{_=""}throw new Error("Cyclic dependency"+_)}if(!h.has(p))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(p));if(!l[g]){l[g]=!0;var v=c.get(p)||new Set;if(v=Array.from(v),g=v.length){x.add(p);do{var b=v[--g];f(b,h.get(b),x)}while(g);x.delete(p)}a[--o]=p}}}function e(i){for(var s=new Set,o=0,a=i.length;o<a;o++){var l=i[o];s.add(l[0]),s.add(l[1])}return Array.from(s)}function t(i){for(var s=new Map,o=0,a=i.length;o<a;o++){var l=i[o];s.has(l[0])||s.set(l[0],new Set),s.has(l[1])||s.set(l[1],new Set),s.get(l[0]).add(l[1])}return s}function r(i){for(var s=new Map,o=0,a=i.length;o<a;o++)s.set(i[o],o);return s}return Kw.exports}var wge=xge();const bge=Ll(wge),Ege=Object.prototype.toString,Age=Error.prototype.toString,Sge=RegExp.prototype.toString,Tge=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Cge=/^Symbol\((.*)\)(.*)$/;function Mge(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function sU(n,e=!1){if(n==null||n===!0||n===!1)return""+n;const t=typeof n;if(t==="number")return Mge(n);if(t==="string")return e?`"${n}"`:n;if(t==="function")return"[Function "+(n.name||"anonymous")+"]";if(t==="symbol")return Tge.call(n).replace(Cge,"Symbol($1)");const r=Ege.call(n).slice(8,-1);return r==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):r==="Error"||n instanceof Error?"["+Age.call(n)+"]":r==="RegExp"?Sge.call(n):null}function Dc(n,e){let t=sU(n,e);return t!==null?t:JSON.stringify(n,function(r,i){let s=sU(this[r],e);return s!==null?s:i},2)}function p7(n){return n==null?[]:[].concat(n)}let m7,g7,v7,Rge=/\$\{\s*(\w+)\s*\}/g;m7=Symbol.toStringTag;class oU{constructor(e,t,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[m7]="Error",this.name="ValidationError",this.value=t,this.path=r,this.type=i,this.errors=[],this.inner=[],p7(e).forEach(s=>{if(mo.isError(s)){this.errors.push(...s.errors);const o=s.inner.length?s.inner:[s];this.inner.push(...o)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}g7=Symbol.hasInstance;v7=Symbol.toStringTag;class mo extends Error{static formatError(e,t){const r=t.label||t.path||"this";return t=Object.assign({},t,{path:r,originalPath:t.path}),typeof e=="string"?e.replace(Rge,(i,s)=>Dc(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,r,i,s){const o=new oU(e,t,r,i);if(s)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[v7]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,mo)}static[g7](e){return oU[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let su={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:e,value:t,originalValue:r})=>{const i=r!=null&&r!==t?` (cast from the value \`${Dc(r,!0)}\`).`:".";return e!=="mixed"?`${n} must be a \`${e}\` type, but the final value was: \`${Dc(t,!0)}\``+i:`${n} must match the configured type. The validated value was: \`${Dc(t,!0)}\``+i}},Ro={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Ige={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},ZI={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pge={isValue:"${path} field must be ${value}"},wb={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},bb={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},kge={notType:n=>{const{path:e,value:t,spec:r}=n,i=r.types.length;if(Array.isArray(t)){if(t.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${t.length} for value: \`${Dc(t,!0)}\``;if(t.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${t.length} for value: \`${Dc(t,!0)}\``}return mo.formatError(su.notType,n)}};Object.assign(Object.create(null),{mixed:su,string:Ro,number:Ige,date:ZI,object:wb,array:bb,boolean:Pge,tuple:kge});const aS=n=>n&&n.__isYupSchema__;class dE{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=t,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new dE(e,(a,l)=>{var u;let c=o(...a)?i:s;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let r=this.refs.map(s=>s.getValue(t==null?void 0:t.value,t==null?void 0:t.parent,t==null?void 0:t.context)),i=this.fn(r,e,t);if(i===void 0||i===e)return e;if(!aS(i))throw new TypeError("conditions must return a schema object");return i.resolve(t)}}const Jw={context:"$",value:"."};function Oge(n,e){return new jf(n,e)}class jf{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Jw.context,this.isValue=this.key[0]===Jw.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Jw.context:this.isValue?Jw.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Ep.getter(this.path,!0),this.map=t.map}getValue(e,t,r){let i=this.isContext?r:this.isValue?e:t;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,t){return this.getValue(e,t==null?void 0:t.parent,t==null?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}jf.prototype.__isYupRef=!0;const hp=n=>n==null;function ng(n){function e({value:t,path:r="",options:i,originalValue:s,schema:o},a,l){const{name:u,test:c,params:h,message:f,skipAbsent:p}=n;let{parent:g,context:x,abortEarly:_=o.spec.abortEarly,disableStackTrace:v=o.spec.disableStackTrace}=i;const b={value:t,parent:g,context:x};function E(N={}){const U=y7(Object.assign({value:t,originalValue:s,label:o.spec.label,path:N.path||r,spec:o.spec,disableStackTrace:N.disableStackTrace||v},h,N.params),b),F=new mo(mo.formatError(N.message||f,U),t,U.path,N.type||u,U.disableStackTrace);return F.params=U,F}const S=_?a:l;let C={path:r,parent:g,type:u,from:i.from,createError:E,resolve(N){return _7(N,b)},options:i,originalValue:s,schema:o};const D=N=>{mo.isError(N)?S(N):N?l(null):S(E())},M=N=>{mo.isError(N)?S(N):a(N)};if(p&&hp(t))return D(!0);let O;try{var R;if(O=c.call(C,t,C),typeof((R=O)==null?void 0:R.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${C.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(O).then(D,M)}}catch(N){M(N);return}D(O)}return e.OPTIONS=n,e}function y7(n,e){if(!n)return n;for(const t of Object.keys(n))n[t]=_7(n[t],e);return n}function _7(n,e){return jf.isRef(n)?n.getValue(e.value,e.parent,e.context):n}function Dge(n,e,t,r=t){let i,s,o;return e?(Ep.forEach(e,(a,l,u)=>{let c=l?a.slice(1,a.length-1):a;n=n.resolve({context:r,parent:i,value:t});let h=n.type==="tuple",f=u?parseInt(c,10):0;if(n.innerType||h){if(h&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(t&&f>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);i=t,t=t&&t[f],n=h?n.spec.types[f]:n.innerType}if(!u){if(!n.fields||!n.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${n.type}")`);i=t,t=t&&t[c],n=n.fields[c]}s=c,o=l?"["+a+"]":"."+a}),{schema:n,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:n}}class pE extends Set{describe(){const e=[];for(const t of this.values())e.push(jf.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const r of this.values())t.push(e(r));return t}clone(){return new pE(this.values())}merge(e,t){const r=this.clone();return e.forEach(i=>r.add(i)),t.forEach(i=>r.delete(i)),r}}function Hg(n,e=new Map){if(aS(n)||!n||typeof n!="object")return n;if(e.has(n))return e.get(n);let t;if(n instanceof Date)t=new Date(n.getTime()),e.set(n,t);else if(n instanceof RegExp)t=new RegExp(n),e.set(n,t);else if(Array.isArray(n)){t=new Array(n.length),e.set(n,t);for(let r=0;r<n.length;r++)t[r]=Hg(n[r],e)}else if(n instanceof Map){t=new Map,e.set(n,t);for(const[r,i]of n.entries())t.set(r,Hg(i,e))}else if(n instanceof Set){t=new Set,e.set(n,t);for(const r of n)t.add(Hg(r,e))}else if(n instanceof Object){t={},e.set(n,t);for(const[r,i]of Object.entries(n))t[r]=Hg(i,e)}else throw Error(`Unable to clone ${n}`);return t}function Nge(n){if(!(n!=null&&n.length))return;const e=[];let t="",r=!1,i=!1;for(let s=0;s<n.length;s++){const o=n[s];if(o==="["&&!i){t&&(e.push(...t.split(".").filter(Boolean)),t=""),r=!0;continue}if(o==="]"&&!i){t&&(/^\d+$/.test(t)?e.push(t):e.push(t.replace(/^"|"$/g,"")),t=""),r=!1;continue}if(o==='"'){i=!i;continue}if(o==="."&&!r&&!i){t&&(e.push(t),t="");continue}t+=o}return t&&e.push(...t.split(".").filter(Boolean)),e}function Lge(n,e){const t=e?`${e}.${n.path}`:n.path;return n.errors.map(r=>({message:r,path:Nge(t)}))}function x7(n,e){var t;if(!((t=n.inner)!=null&&t.length)&&n.errors.length)return Lge(n,e);const r=e?`${e}.${n.path}`:n.path;return n.inner.flatMap(i=>x7(i,r))}class Ol{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new pE,this._blacklist=new pE,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(su.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Hg(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=t,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,r=e.clone();const i=Object.assign({},t.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},t.internalTests,r.internalTests),r._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),r.tests=t.tests,r.exclusiveTests=t.exclusiveTests,r.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),r.transforms=[...t.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let r=t.conditions;t=t.clone(),t.conditions=[],t=r.reduce((i,s)=>s.resolve(i,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,t={}){let r=this.resolve(Object.assign({},t,{value:e})),i=t.assert==="ignore-optionality",s=r._cast(e,t);if(t.assert!==!1&&!r.isType(s)){if(i&&hp(s))return s;let o=Dc(e),a=Dc(s);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return s}_cast(e,t){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this,t),e);return r===void 0&&(r=this.getDefault(t)),r}_validate(e,t={},r,i){let{path:s,originalValue:o=e,strict:a=this.spec.strict}=t,l=e;a||(l=this._cast(l,Object.assign({assert:!1},t)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:s,value:l,originalValue:o,options:t,tests:u},r,c=>{if(c.length)return i(c,l);this.runTests({path:s,value:l,originalValue:o,options:t,tests:this.tests},r,i)})}runTests(e,t,r){let i=!1,{tests:s,value:o,originalValue:a,path:l,options:u}=e,c=x=>{i||(i=!0,t(x,o))},h=x=>{i||(i=!0,r(x,o))},f=s.length,p=[];if(!f)return h([]);let g={value:o,originalValue:a,path:l,options:u,schema:this};for(let x=0;x<s.length;x++){const _=s[x];_(g,c,function(b){b&&(Array.isArray(b)?p.push(...b):p.push(b)),--f<=0&&h(p)})}}asNestedTest({key:e,index:t,parent:r,parentPath:i,originalParent:s,options:o}){const a=e??t;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let u=r[a];const c=Object.assign({},o,{strict:!0,parent:r,value:u,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${i||""}[${l?a:`"${a}"`}]`:(i?`${i}.`:"")+e});return(h,f,p)=>this.resolve(c)._validate(u,c,f,p)}validate(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s=(r=t==null?void 0:t.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((o,a)=>i._validate(e,t,(l,u)=>{mo.isError(l)&&(l.value=u),a(l)},(l,u)=>{l.length?a(new mo(l,u,void 0,void 0,s)):o(u)}))}validateSync(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s,o=(r=t==null?void 0:t.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),(a,l)=>{throw mo.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new mo(a,e,void 0,void 0,o);s=l}),s}isValid(e,t){return this.validate(e,t).then(()=>!0,r=>{if(mo.isError(r))return!1;throw r})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(r){if(mo.isError(r))return!1;throw r}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):Hg(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const r=this.clone({nullable:e});return r.internalTests.nullable=ng({message:t,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,t){const r=this.clone({optional:e});return r.internalTests.optionality=ng({message:t,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=su.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=su.notNull){return this.nullability(!1,e)}required(e=su.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=su.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=ng(t),s=t.exclusive||t.name&&r.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(r.exclusiveTests[t.name]=!!t.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===t.name&&(s||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let r=this.clone(),i=p7(e).map(s=>new jf(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof t=="function"?new dE(i,t):dE.fromOptions(i,t)),r}typeError(e){let t=this.clone();return t.internalTests.typeError=ng({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=su.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=ng({message:t,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),r}notOneOf(e,t=su.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=ng({message:t,name:"notOneOf",test(i){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:o}=t.spec;return{meta:i,label:r,optional:s,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((l,u,c)=>c.findIndex(h=>h.OPTIONS.name===l.OPTIONS.name)===u).map(l=>{const u=l.OPTIONS.params&&e?y7(Object.assign({},l.OPTIONS.params),e):l.OPTIONS.params;return{name:l.OPTIONS.name,params:u}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(i){if(i instanceof mo)return{issues:x7(i)};throw i}}}}}Ol.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Ol.prototype[`${n}At`]=function(e,t,r={}){const{parent:i,parentPath:s,schema:o}=Dge(this,e,t,r.context);return o[n](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])Ol.prototype[n]=Ol.prototype.oneOf;for(const n of["not","nope"])Ol.prototype[n]=Ol.prototype.notOneOf;const Bge=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Fge(n){const e=eP(n);if(!e)return Date.parse?Date.parse(n):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function eP(n){var e,t;const r=Bge.exec(n);return r?{year:hc(r[1]),month:hc(r[2],1)-1,day:hc(r[3],1),hour:hc(r[4]),minute:hc(r[5]),second:hc(r[6]),millisecond:r[7]?hc(r[7].substring(0,3)):0,precision:(e=(t=r[7])==null?void 0:t.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:hc(r[10]),minuteOffset:hc(r[11])}:null}function hc(n,e=0){return Number(n)||e}let Uge=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jge=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Vge=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,zge="^\\d{4}-\\d{2}-\\d{2}",Hge="\\d{2}:\\d{2}:\\d{2}",Gge="(([+-]\\d{2}(:?\\d{2})?)|Z)",qge=new RegExp(`${zge}T${Hge}(\\.\\d+)?${Gge}$`),Wge=n=>hp(n)||n===n.trim(),$ge={}.toString();function Oi(){return new w7}class w7 extends Ol{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t)=>{if(!this.spec.coerce||this.isType(e)||Array.isArray(e))return e;const r=e!=null&&e.toString?e.toString():e;return r===$ge?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||su.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=Ro.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t=Ro.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t=Ro.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,t){let r=!1,i,s;return t&&(typeof t=="object"?{excludeEmptyString:r=!1,message:i,name:s}=t:i=t),this.test({name:s||"matches",message:i||Ro.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Ro.email){return this.matches(Uge,{name:"email",message:e,excludeEmptyString:!0})}url(e=Ro.url){return this.matches(jge,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Ro.uuid){return this.matches(Vge,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",r,i;return e&&(typeof e=="object"?{message:t="",allowOffset:r=!1,precision:i=void 0}=e:t=e),this.matches(qge,{name:"datetime",message:t||Ro.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||Ro.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const o=eP(s);return o?!!o.z:!1}}).test({name:"datetime_precision",message:t||Ro.datetime_precision,params:{precision:i},skipAbsent:!0,test:s=>{if(!s||i==null)return!0;const o=eP(s);return o?o.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Ro.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:Wge})}lowercase(e=Ro.lowercase){return this.transform(t=>hp(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>hp(t)||t===t.toLowerCase()})}uppercase(e=Ro.uppercase){return this.transform(t=>hp(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>hp(t)||t===t.toUpperCase()})}}Oi.prototype=w7.prototype;let b7=new Date(""),Kge=n=>Object.prototype.toString.call(n)==="[object Date]";function gv(){return new gx}class gx extends Ol{constructor(){super({type:"date",check(e){return Kge(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t)=>!this.spec.coerce||this.isType(e)||e===null?e:(e=Fge(e),isNaN(e)?gx.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let r;if(jf.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,t=ZI.min){let r=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,t=ZI.max){let r=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}gx.INVALID_DATE=b7;gv.prototype=gx.prototype;gv.INVALID_DATE=b7;function Jge(n,e=[]){let t=[],r=new Set,i=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let l=Ep.split(o)[0];r.add(l),i.has(`${a}-${l}`)||t.push([a,l])}for(const o of Object.keys(n)){let a=n[o];r.add(o),jf.isRef(a)&&a.isSibling?s(a.path,o):aS(a)&&"deps"in a&&a.deps.forEach(l=>s(l,o))}return bge.array(Array.from(r),t).reverse()}function aU(n,e){let t=1/0;return n.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return t=i,!0}),t}function E7(n){return(e,t)=>aU(n,e)-aU(n,t)}const A7=(n,e,t)=>{if(typeof n!="string")return n;let r=n;try{r=JSON.parse(n)}catch{}return t.isType(r)?r:n};function Eb(n){if("fields"in n){const e={};for(const[t,r]of Object.entries(n.fields))e[t]=Eb(r);return n.setFields(e)}if(n.type==="array"){const e=n.optional();return e.innerType&&(e.innerType=Eb(e.innerType)),e}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(Eb)}):"optional"in n?n.optional():n}const Xge=(n,e)=>{const t=[...Ep.normalizePath(e)];if(t.length===1)return t[0]in n;let r=t.pop(),i=Ep.getter(Ep.join(t),!0)(n);return!!(i&&r in i)};let lU=n=>Object.prototype.toString.call(n)==="[object Object]";function uU(n,e){let t=Object.keys(n.fields);return Object.keys(e).filter(r=>t.indexOf(r)===-1)}const Yge=E7([]);function um(n){return new S7(n)}class S7 extends Ol{constructor(e){super({type:"object",check(t){return lU(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=Yge,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var r;let i=super._cast(e,t);if(i===void 0)return this.getDefault(t);if(!this._typeCheck(i))return i;let s=this.fields,o=(r=t.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(i).filter(h=>!this._nodes.includes(h))),l={},u=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const h of a){let f=s[h],p=h in i,g=i[h];if(f){let x;u.path=(t.path?`${t.path}.`:"")+h,f=f.resolve({value:g,context:t.context,parent:l});let _=f instanceof Ol?f.spec:void 0,v=_==null?void 0:_.strict;if(_!=null&&_.strip){c=c||h in i;continue}x=!t.__validating||!v?f.cast(g,u):g,x!==void 0&&(l[h]=x)}else p&&!o&&(l[h]=g);(p!==h in l||l[h]!==g)&&(c=!0)}return c?l:i}_validate(e,t={},r,i){let{from:s=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,super._validate(e,t,r,(l,u)=>{if(!a||!lU(u)){i(l,u);return}o=o||u;let c=[];for(let h of this._nodes){let f=this.fields[h];!f||jf.isRef(f)||c.push(f.asNestedTest({options:t,key:h,parent:u,parentPath:t.path,originalParent:o}))}this.runTests({tests:c,value:u,originalValue:o,options:t},r,h=>{i(h.sort(this._sortErrors).concat(l),u)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),r=t.fields;for(let[i,s]of Object.entries(this.fields)){const o=r[i];r[i]=o===void 0?s:o}return t.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),t[r]=s&&"getDefault"in s?s.getDefault(o):void 0}),t}setFields(e,t){let r=this.clone();return r.fields=e,r._nodes=Jge(e,t),r._sortErrors=E7(Object.keys(e)),t&&(r._excludedEdges=t),r}shape(e,t=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),i=[...r._excludedEdges,...t]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[t,r]of Object.entries(this.fields))e[t]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Eb(this)}pick(e){const t={};for(const r of e)this.fields[r]&&(t[r]=this.fields[r]);return this.setFields(t,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const t=[];for(const r of Object.keys(this.fields))e.includes(r)||t.push(r);return this.pick(t)}from(e,t,r){let i=Ep.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return Xge(s,e)&&(o=Object.assign({},s),r||delete o[e],o[t]=i(s)),o})}json(){return this.transform(A7)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||wb.exact,test(t){if(t==null)return!0;const r=uU(this.schema,t);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=wb.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:t,test(i){if(i==null)return!0;const s=uU(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,t=wb.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const r={};for(const i of Object.keys(t))r[e(i)]=t[i];return r})}camelCase(){return this.transformKeys(RC.camelCase)}snakeCase(){return this.transformKeys(RC.snakeCase)}constantCase(){return this.transformKeys(e=>RC.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,o]of Object.entries(t.fields)){var i;let a=e;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[s]})),r.fields[s]=o.describe(a)}return r}}um.prototype=S7.prototype;function HO(n){return new T7(n)}class T7 extends Ol{constructor(e){super({type:"array",spec:{types:e},check(t){return Array.isArray(t)}}),this.innerType=void 0,this.innerType=e}_cast(e,t){const r=super._cast(e,t);if(!this._typeCheck(r)||!this.innerType)return r;let i=!1;const s=r.map((o,a)=>{const l=this.innerType.cast(o,Object.assign({},t,{path:`${t.path||""}[${a}]`,parent:r,originalValue:o,value:o,index:a}));return l!==o&&(i=!0),l});return i?s:r}_validate(e,t={},r,i){var s;let o=this.innerType,a=(s=t.recursive)!=null?s:this.spec.recursive;t.originalValue!=null&&t.originalValue,super._validate(e,t,r,(l,u)=>{var c;if(!a||!o||!this._typeCheck(u)){i(l,u);return}let h=new Array(u.length);for(let p=0;p<u.length;p++){var f;h[p]=o.asNestedTest({options:t,index:p,parent:u,parentPath:t.path,originalParent:(f=t.originalValue)!=null?f:e})}this.runTests({value:u,tests:h,originalValue:(c=t.originalValue)!=null?c:e,options:t},r,p=>i(p.concat(l),u))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(A7)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!aS(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Dc(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e,t=bb.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t){return t=t||bb.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t){return t=t||bb.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:t==null?[]:[].concat(t))}compact(e){let t=e?(r,i,s)=>!e(r,i,s):r=>!!r;return this.transform(r=>r!=null?r.filter(t):r)}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);if(t.innerType){var i;let s=e;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=t.innerType.describe(s)}return r}}HO.prototype=T7.prototype;const tr=({name:n,type:e,label:t,value:r,onChange:i,onBlur:s,error:o,touched:a,focusedField:l,setFocusedField:u})=>{const c=l===n||r&&r.length>0;return L.jsxs("div",{className:"relative mb-6",children:[L.jsx(Xt.label,{htmlFor:n,className:`absolute left-3 transition-all duration-300 ${c?"top-0 text-sm text-blue-500":"top-1/4 transform -translate-y-1/4 text-gray-500"}`,children:t}),L.jsx(Xt.input,{type:e,id:n,name:n,className:`w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${a&&o?"border-red-500":"border-gray-300"}`,value:r,onChange:i,onBlur:s,onFocus:()=>u(n)}),a&&o&&L.jsx("p",{className:"text-red-500 text-xs mt-2",children:o})]})};function C7(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=C7(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function cm(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=C7(n))&&(r&&(r+=" "),r+=e);return r}let Qge={data:""},Zge=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||Qge},eve=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tve=/\/\*[^]*?\*\/|  +/g,cU=/\n+/g,ip=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?ip(o,s):s+"{"+ip(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=ip(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ip.p?ip.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},fc={},M7=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+M7(n[t]);return e}return n},nve=(n,e,t,r,i)=>{let s=M7(n),o=fc[s]||(fc[s]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(s));if(!fc[o]){let l=s!==n?n:(u=>{let c,h,f=[{}];for(;c=eve.exec(u.replace(tve,""));)c[4]?f.shift():c[3]?(h=c[3].replace(cU," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][c[1]]=c[2].replace(cU," ").trim();return f[0]})(n);fc[o]=ip(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&fc.g?fc.g:null;return t&&(fc.g=fc[o]),((l,u,c,h)=>{h?u.data=u.data.replace(h,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(fc[o],e,r,a),o},rve=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":ip(a,""):a===!1?"":a}return r+i+(o??"")},"");function GO(n){let e=this||{},t=n.call?n(e.p):n;return nve(t.unshift?t.raw?rve(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,Zge(e.target),e.g,e.o,e.k)}GO.bind({g:1});GO.bind({k:1});function ive(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function R7(n,e,t){return e&&ive(n.prototype,e),n}function mr(){return mr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},mr.apply(this,arguments)}function I7(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function vx(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function hU(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var fU=function(){return""},P7=Qt.createContext({enqueueSnackbar:fU,closeSnackbar:fU}),Qd={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},dU=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},qO=function(e){return""+dU(e.vertical)+dU(e.horizontal)},Xw=function(e){return!!e||e===0},Yw="unmounted",rg="exited",ig="entering",$y="entered",pU="exiting",WO=(function(n){I7(e,n);function e(r){var i;i=n.call(this,r)||this;var s=r.appear,o;return i.appearStatus=null,r.in?s?(o=rg,i.appearStatus=ig):o=$y:r.unmountOnExit||r.mountOnEnter?o=Yw:o=rg,i.state={status:o},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Yw?{status:rg}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==ig&&o!==$y&&(s=ig):(o===ig||o===$y)&&(s=pU)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s=i,o=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(o=i.exit,s=i.enter),{exit:o,enter:s}},t.updateStatus=function(i,s){i===void 0&&(i=!1),s!==null?(this.cancelNextCallback(),s===ig?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===rg&&this.setState({status:Yw})},t.performEnter=function(i){var s=this,o=this.props.enter,a=i,l=this.getTimeouts();if(!i&&!o){this.safeSetState({status:$y},function(){s.props.onEntered&&s.props.onEntered(s.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:ig},function(){s.props.onEntering&&s.props.onEntering(s.node,a),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:$y},function(){s.props.onEntered&&s.props.onEntered(s.node,a)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts();if(!s){this.safeSetState({status:rg},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:pU},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:rg},function(){i.props.onExited&&i.props.onExited(i.node)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(){o&&(o=!1,s.nextCallback=null,i())},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=i==null&&!this.props.addEndListener;if(!this.node||o){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===Yw)return null;var s=this.props,o=s.children,a=vx(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o(i,a)},R7(e,[{key:"node",get:function(){var i,s=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),e})(Qt.Component);function sg(){}WO.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sg,onEntering:sg,onEntered:sg,onExit:sg,onExiting:sg,onExited:sg};function mU(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function tP(n,e){return W.useMemo(function(){return n==null&&e==null?null:function(t){mU(n,t),mU(e,t)}},[n,e])}function mE(n){var e=n.timeout,t=n.style,r=t===void 0?{}:t,i=n.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var nP={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},k7=function(e){e.scrollTop=e.scrollTop},gU=function(e){return Math.round(e)+"ms"};function Gg(n,e){n===void 0&&(n=["all"]);var t=e||{},r=t.duration,i=r===void 0?300:r,s=t.easing,o=s===void 0?nP.easeInOut:s,a=t.delay,l=a===void 0?0:a,u=Array.isArray(n)?n:[n];return u.map(function(c){var h=typeof i=="string"?i:gU(i),f=typeof l=="string"?l:gU(l);return c+" "+h+" "+o+" "+f}).join(",")}function sve(n){return n&&n.ownerDocument||document}function O7(n){var e=sve(n);return e.defaultView||window}function ove(n,e){e===void 0&&(e=166);var t;function r(){for(var i=this,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=function(){n.apply(i,o)};clearTimeout(t),t=setTimeout(l,e)}return r.clear=function(){clearTimeout(t)},r}function ave(n,e){var t=e.getBoundingClientRect(),r=O7(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var s=r.getComputedStyle(e);i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var o=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),a=parseInt(l[5],10)}switch(n){case"left":return"translateX("+(r.innerWidth+o-t.left)+"px)";case"right":return"translateX(-"+(t.left+t.width-o)+"px)";case"up":return"translateY("+(r.innerHeight+a-t.top)+"px)";default:return"translateY(-"+(t.top+t.height-a)+"px)"}}function Qw(n,e){if(e){var t=ave(n,e);t&&(e.style.webkitTransform=t,e.style.transform=t)}}var D7=W.forwardRef(function(n,e){var t=n.children,r=n.direction,i=r===void 0?"down":r,s=n.in,o=n.style,a=n.timeout,l=a===void 0?0:a,u=n.onEnter,c=n.onEntered,h=n.onExit,f=n.onExited,p=vx(n,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),g=W.useRef(null),x=tP(t.ref,g),_=tP(x,e),v=function(M,P){Qw(i,M),k7(M),u&&u(M,P)},b=function(M){var P=(o==null?void 0:o.transitionTimingFunction)||nP.easeOut,O=mE({timeout:l,mode:"enter",style:mr({},o,{transitionTimingFunction:P})});M.style.webkitTransition=Gg("-webkit-transform",O),M.style.transition=Gg("transform",O),M.style.webkitTransform="none",M.style.transform="none"},E=function(M){var P=(o==null?void 0:o.transitionTimingFunction)||nP.sharp,O=mE({timeout:l,mode:"exit",style:mr({},o,{transitionTimingFunction:P})});M.style.webkitTransition=Gg("-webkit-transform",O),M.style.transition=Gg("transform",O),Qw(i,M),h&&h(M)},S=function(M){M.style.webkitTransition="",M.style.transition="",f&&f(M)},C=W.useCallback(function(){g.current&&Qw(i,g.current)},[i]);return W.useEffect(function(){if(!(s||i==="down"||i==="right")){var D=ove(function(){g.current&&Qw(i,g.current)}),M=O7(g.current);return M.addEventListener("resize",D),function(){D.clear(),M.removeEventListener("resize",D)}}},[i,s]),W.useEffect(function(){s||C()},[s,C]),W.createElement(WO,Object.assign({appear:!0,nodeRef:g,onEnter:v,onEntered:c,onEntering:b,onExit:E,onExited:S,in:s,timeout:l},p),function(D,M){return W.cloneElement(t,mr({ref:_,style:mr({visibility:D==="exited"&&!s?"hidden":void 0},o,{},t.props.style)},M))})});D7.displayName="Slide";var lS=function(e){return Qt.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},lve=function(){return Qt.createElement(lS,null,Qt.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},uve=function(){return Qt.createElement(lS,null,Qt.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},cve=function(){return Qt.createElement(lS,null,Qt.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},hve=function(){return Qt.createElement(lS,null,Qt.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},fve={default:void 0,success:Qt.createElement(lve,null),warning:Qt.createElement(uve,null),error:Qt.createElement(cve,null),info:Qt.createElement(hve,null)},Ap={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:fve,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:D7,transitionDuration:{enter:225,exit:195}},dve=function(e,t){var r=function(s){return typeof s=="number"||s===null};return r(e)?e:r(t)?t:Ap.autoHideDuration},pve=function(e,t){var r=function(s,o){return o.some(function(a){return typeof s===a})};return r(e,["string","number"])?e:r(e,["object"])?mr({},Ap.transitionDuration,{},r(t,["object"])&&t,{},e):r(t,["string","number"])?t:r(t,["object"])?mr({},Ap.transitionDuration,{},t):Ap.transitionDuration},mve=function(e,t){return function(r,i){return i===void 0&&(i=!1),i?mr({},Ap[r],{},t[r],{},e[r]):r==="autoHideDuration"?dve(e.autoHideDuration,t.autoHideDuration):r==="transitionDuration"?pve(e.transitionDuration,t.transitionDuration):e[r]||t[r]||Ap[r]}};function yx(n){return Object.entries(n).reduce(function(e,t){var r,i=t[0],s=t[1];return mr({},e,(r={},r[i]=GO(s),r))},{})}var vv={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},vU=yx({root:{height:0},entered:{height:"auto"}}),IC="0px",PC=175,N7=W.forwardRef(function(n,e){var t=n.children,r=n.in,i=n.onExited,s=W.useRef(null),o=W.useRef(null),a=tP(e,o),l=function(){return s.current?s.current.clientHeight:0},u=function(x){x.style.height=IC},c=function(x){var _=l(),v=mE({timeout:PC,mode:"enter"}),b=v.duration,E=v.easing;x.style.transitionDuration=typeof b=="string"?b:b+"ms",x.style.height=_+"px",x.style.transitionTimingFunction=E||""},h=function(x){x.style.height="auto"},f=function(x){x.style.height=l()+"px"},p=function(x){k7(x);var _=mE({timeout:PC,mode:"exit"}),v=_.duration,b=_.easing;x.style.transitionDuration=typeof v=="string"?v:v+"ms",x.style.height=IC,x.style.transitionTimingFunction=b||""};return W.createElement(WO,{in:r,unmountOnExit:!0,onEnter:u,onEntered:h,onEntering:c,onExit:f,onExited:i,onExiting:p,nodeRef:o,timeout:PC},function(g,x){return W.createElement("div",Object.assign({ref:a,className:cm(vU.root,g==="entered"&&vU.entered),style:mr({pointerEvents:"all",overflow:"hidden",minHeight:IC,transition:Gg("height")},g==="entered"&&{overflow:"visible"},{},g==="exited"&&!r&&{visibility:"hidden"})},x),W.createElement("div",{ref:s,className:vv.CollapseWrapper,style:{display:"flex",width:"100%"}},t))})});N7.displayName="Collapse";var yU={right:"left",left:"right",bottom:"up",top:"down"},gve=function(e){return e.horizontal!=="center"?yU[e.horizontal]:yU[e.vertical]},vve=function(e){return"anchorOrigin"+qO(e)},yve=function(e){e===void 0&&(e={});var t={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!t[r]}).reduce(function(r,i){var s;return mr({},r,(s={},s[i]=e[i],s))},{})},_ve=function(){};function J0(n,e){return n.reduce(function(t,r){return r==null?t:function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=[].concat(o);e&&l.indexOf(e)===-1&&l.push(e),t.apply(this,l),r.apply(this,l)}},_ve)}var xve=typeof window<"u"?W.useLayoutEffect:W.useEffect;function _U(n){var e=W.useRef(n);return xve(function(){e.current=n}),W.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var L7=W.forwardRef(function(n,e){var t=n.children,r=n.className,i=n.autoHideDuration,s=n.disableWindowBlurListener,o=s===void 0?!1:s,a=n.onClose,l=n.id,u=n.open,c=n.SnackbarProps,h=c===void 0?{}:c,f=W.useRef(),p=_U(function(){a&&a.apply(void 0,arguments)}),g=_U(function(E){!a||E==null||(f.current&&clearTimeout(f.current),f.current=setTimeout(function(){p(null,"timeout",l)},E))});W.useEffect(function(){return u&&g(i),function(){f.current&&clearTimeout(f.current)}},[u,i,g]);var x=function(){f.current&&clearTimeout(f.current)},_=W.useCallback(function(){i!=null&&g(i*.5)},[i,g]),v=function(S){h.onMouseEnter&&h.onMouseEnter(S),x()},b=function(S){h.onMouseLeave&&h.onMouseLeave(S),_()};return W.useEffect(function(){if(!o&&u)return window.addEventListener("focus",_),window.addEventListener("blur",x),function(){window.removeEventListener("focus",_),window.removeEventListener("blur",x)}},[o,_,u]),W.createElement("div",Object.assign({ref:e},h,{className:cm(vv.Snackbar,r),onMouseEnter:v,onMouseLeave:b}),t)});L7.displayName="Snackbar";var kC,wve=yx({root:(kC={display:"flex",flexWrap:"wrap",flexGrow:1},kC[Qd.upSm]={flexGrow:"initial",minWidth:"288px"},kC)}),B7=W.forwardRef(function(n,e){var t=n.className,r=vx(n,["className"]);return Qt.createElement("div",Object.assign({ref:e,className:cm(wve.root,t)},r))});B7.displayName="SnackbarContent";var Ky=yx({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),xU="notistack-snackbar",F7=W.forwardRef(function(n,e){var t=n.id,r=n.message,i=n.action,s=n.iconVariant,o=n.variant,a=n.hideIconVariant,l=n.style,u=n.className,c=s[o],h=i;return typeof h=="function"&&(h=h(t)),Qt.createElement(B7,{ref:e,role:"alert","aria-describedby":xU,style:l,className:cm(vv.MuiContent,vv.MuiContentVariant(o),Ky.root,Ky[o],u,!a&&c&&Ky.lessPadding)},Qt.createElement("div",{id:xU,className:Ky.message},a?null:c,r),h&&Qt.createElement("div",{className:Ky.action},h))});F7.displayName="MaterialDesignContent";var bve=W.memo(F7),Eve=yx({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),Ave=function(e){var t=W.useRef(),r=W.useState(!0),i=r[0],s=r[1],o=J0([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&o(null,"instructed",e.snack.id)},l=W.useCallback(function(){t.current=setTimeout(function(){s(function(O){return!O})},125)},[]);W.useEffect(function(){return function(){t.current&&clearTimeout(t.current)}},[]);var u=e.snack,c=e.classes,h=e.Component,f=h===void 0?bve:h,p=W.useMemo(function(){return yve(c)},[c]),g=u.open,x=u.SnackbarProps,_=u.TransitionComponent,v=u.TransitionProps,b=u.transitionDuration,E=u.disableWindowBlurListener,S=u.content,C=vx(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),D=mr({direction:gve(C.anchorOrigin),timeout:b},v),M=S;typeof M=="function"&&(M=M(C.id,C.message));var P=["onEnter","onEntered","onExit","onExited"].reduce(function(O,R){var N;return mr({},O,(N={},N[R]=J0([e.snack[R],e[R]],C.id),N))},{});return Qt.createElement(N7,{in:i,onExited:P.onExited},Qt.createElement(L7,{open:g,id:C.id,disableWindowBlurListener:E,autoHideDuration:C.autoHideDuration,className:cm(Eve.wrappedRoot,p.root,p[vve(C.anchorOrigin)]),SnackbarProps:x,onClose:o},Qt.createElement(_,Object.assign({},D,{appear:!0,in:g,onExit:P.onExit,onExited:l,onEnter:P.onEnter,onEntered:J0([P.onEntered,a],C.id)}),M||Qt.createElement(f,Object.assign({},C)))))},Jy,OC,Zw,e1,DC,dc={view:{default:20},snackbar:{default:6,dense:2}},wU="."+vv.CollapseWrapper,NC=16,t1=yx({root:(Jy={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Gg(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Jy[wU]={padding:dc.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Jy.maxWidth="calc(100% - "+dc.view.default*2+"px)",Jy[Qd.downXs]={width:"100%",maxWidth:"calc(100% - "+NC*2+"px)"},Jy),rootDense:(OC={},OC[wU]={padding:dc.snackbar.dense+"px 0px"},OC),top:{top:dc.view.default-dc.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:dc.view.default-dc.snackbar.default+"px",flexDirection:"column-reverse"},left:(Zw={left:dc.view.default+"px"},Zw[Qd.upSm]={alignItems:"flex-start"},Zw[Qd.downXs]={left:NC+"px"},Zw),right:(e1={right:dc.view.default+"px"},e1[Qd.upSm]={alignItems:"flex-end"},e1[Qd.downXs]={right:NC+"px"},e1),center:(DC={left:"50%",transform:"translateX(-50%)"},DC[Qd.upSm]={alignItems:"center"},DC)}),Sve=function(e){var t=e.classes,r=t===void 0?{}:t,i=e.anchorOrigin,s=e.dense,o=e.children,a=cm(vv.SnackbarContainer,t1[i.vertical],t1[i.horizontal],t1.root,r.containerRoot,r["containerAnchorOrigin"+qO(i)],s&&t1.rootDense);return Qt.createElement("div",{className:a},o)},Tve=W.memo(Sve),bU=function(e){var t=typeof e=="string"||W.isValidElement(e);return!t},pf,Cve=(function(n){I7(e,n);function e(r){var i;return i=n.call(this,r)||this,i.enqueueSnackbar=function(s,o){if(o===void 0&&(o={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var a=bU(s)?s:o,l=bU(s)?s.message:s,u=a.key,c=a.preventDuplicate,h=vx(a,["key","preventDuplicate"]),f=Xw(u),p=f?u:new Date().getTime()+Math.random(),g=mve(h,i.props),x=mr({id:p},h,{message:l,open:!0,entered:!1,requestClose:!1,persist:g("persist"),action:g("action"),content:g("content"),variant:g("variant"),anchorOrigin:g("anchorOrigin"),disableWindowBlurListener:g("disableWindowBlurListener"),autoHideDuration:g("autoHideDuration"),hideIconVariant:g("hideIconVariant"),TransitionComponent:g("TransitionComponent"),transitionDuration:g("transitionDuration"),TransitionProps:g("TransitionProps",!0),iconVariant:g("iconVariant",!0),style:g("style",!0),SnackbarProps:g("SnackbarProps",!0),className:cm(i.props.className,h.className)});return x.persist&&(x.autoHideDuration=void 0),i.setState(function(_){if(c===void 0&&i.props.preventDuplicate||c){var v=function(C){return f?C.id===p:C.message===l},b=_.queue.findIndex(v)>-1,E=_.snacks.findIndex(v)>-1;if(b||E)return _}return i.handleDisplaySnack(mr({},_,{queue:[].concat(_.queue,[x])}))}),p},i.handleDisplaySnack=function(s){var o=s.snacks;return o.length>=i.maxSnack?i.handleDismissOldest(s):i.processQueue(s)},i.processQueue=function(s){var o=s.queue,a=s.snacks;return o.length>0?mr({},s,{snacks:[].concat(a,[o[0]]),queue:o.slice(1,o.length)}):s},i.handleDismissOldest=function(s){if(s.snacks.some(function(c){return!c.open||c.requestClose}))return s;var o=!1,a=!1,l=s.snacks.reduce(function(c,h){return c+(h.open&&h.persist?1:0)},0);l===i.maxSnack&&(a=!0);var u=s.snacks.map(function(c){return!o&&(!c.persist||a)?(o=!0,c.entered?(c.onClose&&c.onClose(null,"maxsnack",c.id),i.props.onClose&&i.props.onClose(null,"maxsnack",c.id),mr({},c,{open:!1})):mr({},c,{requestClose:!0})):mr({},c)});return mr({},s,{snacks:u})},i.handleEnteredSnack=function(s,o,a){if(!Xw(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var u=l.snacks;return{snacks:u.map(function(c){return c.id===a?mr({},c,{entered:!0}):mr({},c)})}})},i.handleCloseSnack=function(s,o,a){i.props.onClose&&i.props.onClose(s,o,a);var l=a===void 0;i.setState(function(u){var c=u.snacks,h=u.queue;return{snacks:c.map(function(f){return!l&&f.id!==a?mr({},f):f.entered?mr({},f,{open:!1}):mr({},f,{requestClose:!0})}),queue:h.filter(function(f){return f.id!==a})}})},i.closeSnackbar=function(s){var o=i.state.snacks.find(function(a){return a.id===s});Xw(s)&&o&&o.onClose&&o.onClose(null,"instructed",s),i.handleCloseSnack(null,"instructed",s)},i.handleExitedSnack=function(s,o){if(!Xw(o))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(a){var l=i.processQueue(mr({},a,{snacks:a.snacks.filter(function(u){return u.id!==o})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},pf=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(hU(i)),closeSnackbar:i.closeSnackbar.bind(hU(i))}},i}var t=e.prototype;return t.render=function(){var i=this,s=this.state.contextValue,o=this.props,a=o.domRoot,l=o.children,u=o.dense,c=u===void 0?!1:u,h=o.Components,f=h===void 0?{}:h,p=o.classes,g=this.state.snacks.reduce(function(_,v){var b,E=qO(v.anchorOrigin),S=_[E]||[];return mr({},_,(b={},b[E]=[].concat(S,[v]),b))},{}),x=Object.keys(g).map(function(_){var v=g[_],b=v[0];return Qt.createElement(Tve,{key:_,dense:c,anchorOrigin:b.anchorOrigin,classes:p},v.map(function(E){return Qt.createElement(Ave,{key:E.id,snack:E,classes:p,Component:f[E.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:J0([i.handleExitedSnack,i.props.onExited],E.id),onEntered:J0([i.handleEnteredSnack,i.props.onEntered],E.id)})}))});return Qt.createElement(P7.Provider,{value:s},l,a?M9.createPortal(x,a):x)},R7(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||Ap.maxSnack}}]),e})(W.Component),Cu=(function(){return W.useContext(P7)});const U7=W.createContext(void 0),uS=()=>{const n=W.useContext(U7);if(!n)throw new Error("useUser must be used within a UserProvider");return n},j7=({children:n})=>{const[e,t]=W.useState({name:"",email:"",roleId:"",role:""}),{logout:r}=nH();W.useEffect(()=>{const o=localStorage.getItem("user");o&&t(JSON.parse(o))},[]);const i=o=>{t(o),localStorage.setItem("user",JSON.stringify(o))},s=()=>{var a;const o=ex();console.log((a=o.currentUser)==null?void 0:a.uid),localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("refreshToken"),i({name:"",email:"",roleId:"",role:""}),localStorage.removeItem("user"),console.log("Logout called inside Context"),o.currentUser&&(console.log("Logout called inside Context if block"),r(o.currentUser.uid))};return L.jsx(U7.Provider,{value:{user:e,addData:i,handleLogout:s},children:n})},Mve=({role:n,routeName:e})=>{const t=Of();return W.useEffect(()=>{const r=localStorage.getItem("user"),i=r?JSON.parse(r).role:null;if(!i)t("/login");else if(i==="admin"){const s=e?`/admin/${e}`:"/admin/dashboard";t(s)}else t(i==="patient"?"/":i==="doctor"?`/doctor/${e}`:i==="employee"?`/employee/${e}`:"/access-denied")},[n,e,t]),null},Rve=()=>{const{login:n,error:e,ActiveUser:t}=nH(),[r,i]=W.useState(null),[s,o]=W.useState(!1),[a,l]=W.useState(!1),u=Of(),{addData:c,user:h}=uS(),f=um({email:Oi().email("Invalid email format").required("Email is required").matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Invalid email format"),password:Oi().min(6,"Password must be at least 6 characters").required("Password is required")}),p=Wv({initialValues:{email:"",password:""},validationSchema:f,onSubmit:async x=>{var b,E,S;const{email:_,password:v}=x;try{const C=await n(_,v);if(console.log("User details",C),bc.currentUser)if(!bc.currentUser.emailVerified)o(!0),pf("Email not verified",{variant:"error"}),p.setFieldValue("password","");else{const D=await bc.currentUser.getIdToken();localStorage.setItem("authToken",D);const M=new Date().getTime()+1800*1e3;localStorage.setItem("tokenExpiry",M.toString());const P=await bc.currentUser.getIdTokenResult();localStorage.setItem("refreshToken",P.token);const R=(await bc.currentUser.getIdTokenResult()).claims.admin||!1,{role:N,roleId:U}=await fae(bc.currentUser.uid);if((!N||!U)&&!R)throw new Error("Unable to fetch user role or roleId");const F=R?"admin":N,Z={email:_,role:F||"",roleId:R?"1":U||"",name:((b=C==null?void 0:C.user)==null?void 0:b.displayName)||""};c(Z),pf("Login successful!",{variant:"success"}),p.resetForm(),t((E=C.user)==null?void 0:E.uid,((S=C.user)==null?void 0:S.displayName)||"",_,F||"",D)}}catch(C){p.setFieldValue("password",""),console.log("Formik hit",p.values),pf(`Error: ${C}`,{variant:"error"})}}}),g=()=>{u("/")};return L.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:[L.jsxs(Xt.div,{className:"bg-white p-6 rounded-lg shadow-lg w-96",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},children:[L.jsx("h2",{className:"text-xl font-bold mb-4 text-center cursor-pointer",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:g,children:a?"Back to Home":"Login"}),e&&L.jsx("p",{className:"text-red-500 mb-4 text-center",children:e}),s&&L.jsx("p",{className:"text-red-500 mb-4 text-center",children:"Your email is not verified. Please verify your email to proceed."}),L.jsxs("form",{onSubmit:p.handleSubmit,children:[L.jsx(tr,{name:"email",type:"email",label:"Email",value:p.values.email,onChange:p.handleChange,onBlur:p.handleBlur,error:p.errors.email,touched:p.touched.email??!1,focusedField:r,setFocusedField:i}),L.jsx(tr,{name:"password",type:"password",label:"Password",value:p.values.password,onChange:p.handleChange,onBlur:p.handleBlur,error:p.errors.password,touched:p.touched.password??!1,focusedField:r,setFocusedField:i}),L.jsx(Xt.button,{className:`w-full text-white p-3 rounded-lg transition-all duration-300 ${p.isSubmitting||!p.isValid?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,type:"submit",disabled:p.isSubmitting||!p.isValid,whileHover:{scale:1.05},children:"Login"})]}),L.jsx(Xt.div,{className:"mt-4 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}})]}),h&&L.jsx(Mve,{role:h.role||"",routeName:"dashboard"})]})},V7=()=>{const[n,e]=W.useState(0);return W.useEffect(()=>{let t;const r=()=>{e(i=>i>=100?(cancelAnimationFrame(t),100):i+1),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[]),L.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[L.jsx("div",{className:"relative mb-4",children:L.jsx("div",{className:"w-40 h-40 border-8 border-t-8 border-blue-500 rounded-full animate-smooth-spin"})}),L.jsx("div",{className:"w-64 h-2 bg-gray-200 rounded-full",children:L.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${n}%`}})})]})};var z7={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},EU=Qt.createContext&&Qt.createContext(z7),Ive=["attr","size","title"];function Pve(n,e){if(n==null)return{};var t=kve(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kve(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function gE(){return gE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},gE.apply(this,arguments)}function AU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function vE(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(t),!0).forEach(function(r){Ove(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):AU(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ove(n,e,t){return e=Dve(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dve(n){var e=Nve(n,"string");return typeof e=="symbol"?e:e+""}function Nve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function H7(n){return n&&n.map((e,t)=>Qt.createElement(e.tag,vE({key:t},e.attr),H7(e.child)))}function Bi(n){return e=>Qt.createElement(Lve,gE({attr:vE({},n.attr)},e),H7(n.child))}function Lve(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=Pve(n,Ive),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Qt.createElement("svg",gE({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:vE(vE({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Qt.createElement("title",null,s),n.children)};return EU!==void 0?Qt.createElement(EU.Consumer,null,t=>e(t)):e(z7)}function G7(n){return Bi({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function q7(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function W7(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function $7(n){return Bi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function Bve(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function Fve(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(n)}function Uve(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(n)}function jve(n){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"},child:[]}]})(n)}function Vve(n){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(n)}function K7(n){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function zve(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function J7(n){return Bi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(n)}function Hve(n){return Bi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function X7(n){return Bi({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Gve(n){return Bi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function Y7(n){return Bi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function qve(n){return Bi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function Wve(n){return Bi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(n)}function $ve(n){return Bi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}function Q7(n){return Bi({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const Kve=({tabs:n,token:e})=>{const[t,r]=W.useState(!1),[i,s]=W.useState(!1),[o,a]=W.useState(null),l=W.useRef(null),u=Au();W.useEffect(()=>{const g=()=>r(window.innerWidth<=768);return g(),window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}},[]),W.useEffect(()=>{const g=x=>{l.current&&!l.current.contains(x.target)&&(s(!1),a(null))};return i?document.addEventListener("mousedown",g):document.removeEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[i]),W.useEffect(()=>{s(!1),a(null)},[u.pathname]);const c=()=>{i?(s(!1),a(null)):s(!0)},h=g=>{t&&a(o===g?null:g)},f=()=>{s(!1),a(null)},p=t&&e===null?[...n,{name:"Login",hasDropdown:!1,linkTo:"/login"}]:n;return L.jsxs("div",{className:"relative",children:[L.jsxs("div",{className:"flex items-center justify-between w-full",children:[L.jsx("div",{className:"flex-1"}),t&&L.jsx("button",{onClick:c,className:"p-2 text-gray-600 lg:hidden","aria-label":"Toggle Menu",children:i?L.jsx(Q7,{size:24}):L.jsx(Wve,{size:24})})]}),!t&&L.jsx(Xve,{tabs:p,isMobile:t,token:e,currentPath:u.pathname}),t&&i&&L.jsx("div",{className:"absolute inset-0 z-50 p-4",ref:l,children:L.jsx(Jve,{tabs:p,token:e,openDropdown:o,handleDropdownToggle:h,setMenuOpen:s,handleLinkClick:f,currentPath:u.pathname})})]})},Jve=({tabs:n,token:e,openDropdown:t,handleDropdownToggle:r,setMenuOpen:i,handleLinkClick:s,currentPath:o})=>L.jsxs("ul",{className:"flex flex-col items-start mt-4 bg w-[250px] rounded-lg shadow-lg bg-white absolute right-0 top-0 z-50",children:[L.jsx("button",{onClick:()=>i(!1),className:"absolute top-0 right-0 p-2 text-gray-600","aria-label":"Close Menu",children:L.jsx(Q7,{size:24})}),n.map((a,l)=>{var u,c;return L.jsxs("li",{className:"relative text-lg text-center text-black",children:[a.linkTo?L.jsx(ua,{to:a.linkTo,onClick:s,className:`block py-2 px-4 hover:bg-gray-100 transition-colors ${o===a.linkTo?"bg-blue-50 text-blue-600 font-medium":""}`,children:a.name}):L.jsxs("span",{className:`py-2 px-4 cursor-pointer flex hover:bg-gray-100 transition-colors ${(u=a.dropdownOptions)!=null&&u.some(h=>h.to===o)?"bg-blue-50 text-blue-600":""}`,onClick:()=>r(l),children:[a.name,a.hasDropdown&&L.jsx("span",{className:"ml-2 text-sm",children:t===l?L.jsx(qve,{}):L.jsx(Y7,{})})]}),a.hasDropdown&&t===l&&L.jsx(Xt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"absolute right-0 z-20 mt-2 bg-white rounded-md shadow-lg w-60",children:L.jsx("ul",{children:(c=a.dropdownOptions)==null?void 0:c.map((h,f)=>L.jsx("li",{children:L.jsx(ua,{to:h.to,onClick:s,className:`block px-4 py-2 text-sm hover:bg-gray-100 transition-colors ${o===h.to?"bg-blue-100 text-blue-600 font-medium":"text-gray-700"}`,children:h.label})},f))})})]},l)})]}),Xve=({tabs:n,isMobile:e,token:t,currentPath:r})=>{const[i,s]=W.useState(null),[o,a]=W.useState(null),l=u=>{s(u)};return L.jsx("ul",{className:`relative mx-auto flex w-full max-w-5xl justify-around rounded-full border-2 border-black bg-white p-1 sm:p-1.5 md:p-2 ${e?"hidden":""}`,children:n.map((u,c)=>L.jsx(Yve,{tab:c+1,setHovered:a,hovered:o,hasDropdown:u.hasDropdown,handleSetSelected:l,selected:i,linkTo:u.linkTo,dropdownOptions:u.dropdownOptions??[],children:u.name},c))})},Yve=({children:n,tab:e,setHovered:t,hovered:r,hasDropdown:i,handleSetSelected:s,selected:o,linkTo:a,dropdownOptions:l})=>{const u=()=>{t(e)},c=()=>{t(null)};return L.jsxs("li",{onMouseEnter:u,onMouseLeave:c,onClick:()=>s(e),className:`relative z-10 block cursor-pointer px-2 py-1.5 text-xs uppercase sm:px-3 sm:text-sm md:px-4 md:py-2 lg:px-5 lg:py-3 lg:text-base ${r===e||o===e?"text-red-500 bg-gray-200 rounded-full":"text-black"}`,children:[a?L.jsx(ua,{to:a,className:"block",children:n}):L.jsx("span",{children:n}),i&&L.jsxs(Xt.div,{initial:{opacity:0,y:-10},animate:{opacity:r===e?1:0,y:r===e?0:-10},transition:{duration:.3},className:"absolute left-0 z-20 mt-2 bg-white rounded-md shadow-lg w-60",children:[L.jsx("div",{className:"px-4 py-2 text-lg font-semibold text-white bg-black",children:n}),L.jsx("ul",{children:l.map((h,f)=>L.jsx("li",{children:L.jsx(ua,{to:h.to,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:h.label})},f))})]}),i&&L.jsx(Y7,{className:"inline-block ml-2 text-sm text-gray-600",size:14})]})},SU=(n,e,t,r)=>{const i=e-n,s=r-t;return o=>t+((o-n)/i*s||0)},Qve=(n,e,t,r)=>{const i=n.getBoundingClientRect(),s=e.clientX-i.left,o=e.clientY-i.top,a=SU(0,i.width,-1,1)(s),l=SU(0,i.height,-1,1)(o);t.set(a*10),r.set(l*10)},Zve=({path:n,name:e,isActive:t,location:r,logo:i})=>{const s=S_(0),o=S_(0),a=cE(s,u=>u*.5),l=cE(o,u=>u*.5);return L.jsx(Xt.li,{onPointerMove:u=>{const c=u.currentTarget;Qve(c,u,s,o)},onPointerLeave:()=>{s.set(0),o.set(0)},style:{x:s,y:o},children:L.jsx(Xt.div,{className:`relative inline-block w-full max-w-5xl py-2 px-4 text-sm transition-all duration-500 ease-out ${t?"bg-slate-300":""}`,children:L.jsxs("a",{href:n,target:"_blank",className:"text-2xl relative",children:[L.jsx(Xt.span,{style:{x:a,y:l},className:"z-10 relative",children:i?L.jsx("img",{src:i,alt:"Logo",className:"h-6 w-6 object-contain"}):L.jsx("div",{className:"py-2 px-4 text-xl pt-2 flex justify-around rounded-full border-2 border-black bg-white",children:e})}),t&&L.jsx(Xt.div,{transition:{type:"spring"},layoutId:"underline",className:"absolute w-full h-full rounded-md left-0 bottom-0 bg-blue-300"})]})})})},mf=({title:n,onClose:e,children:t,fullWidth:r=!1})=>L.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50 p-4",children:L.jsxs("div",{className:`bg-white rounded-lg shadow-xl ${r?"w-full":"w-full sm:w-[90%] md:w-[80%] lg:w-[70%] xl:w-[60%]"} max-w-6xl max-h-[90vh] flex flex-col`,children:[L.jsxs("div",{className:"flex justify-between items-center border-b px-4 sm:px-6 py-4 flex-shrink-0",children:[L.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:n}),L.jsx("button",{onClick:e,className:"text-3xl font-semibold text-gray-500 hover:text-gray-800 transition-colors leading-none","aria-label":"Close modal",children:""})]}),L.jsx("div",{className:"overflow-y-auto flex-1 px-4 sm:px-6 py-4",children:t})]})}),eye=({setDropdownVisible:n,handleOpenModal:e})=>L.jsxs("ul",{className:"w-56",children:[" ",L.jsx("li",{className:"py-1",children:L.jsx("button",{onClick:()=>{n(!1),e("update")},className:"block text-sm hover:underline w-full text-left",children:"Update Profile"})}),L.jsx("li",{className:"py-1",children:L.jsx("button",{onClick:()=>{n(!1),e("updatePassword")},className:"block text-sm hover:underline w-full text-left",children:"Update Password"})}),L.jsx("li",{className:"py-1",children:L.jsx("button",{onClick:()=>{n(!1),e("logout")},className:"block text-sm hover:underline w-full text-left",children:"Logout"})})]}),tye=({children:n,href:e,setDropdownVisible:t,handleOpenModal:r})=>{const[i,s]=W.useState(!1),o=i;return L.jsxs("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:"relative w-fit h-fit",children:[L.jsxs("a",{href:e,className:"relative text-white",children:[n,L.jsx("span",{style:{transform:o?"scaleX(1)":"scaleX(0)"},className:"absolute -bottom-2 -left-2 -right-2 h-1 origin-left scale-x-0 rounded-full bg-indigo-300 transition-transform duration-300 ease-out"})]}),L.jsx(vue,{children:o&&L.jsxs(Xt.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:15},style:{translateX:"-50%"},transition:{duration:.3,ease:"easeOut"},className:"absolute left-1/2 top-12 bg-white text-black shadow-lg rounded-md py-2 px-4",children:[L.jsx("div",{className:"absolute -top-6 left-0 right-0 h-6 bg-transparent"}),L.jsx("div",{className:"absolute left-1/2 top-0 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rotate-45 bg-white"}),L.jsx(eye,{setDropdownVisible:t,handleOpenModal:r})]})})]})},nye=({handleCloseModal:n})=>{var c;const[e,t]=W.useState({name:""}),[r,i]=W.useState(null),[s,o]=W.useState(!1),a=ex(),l=(c=a.currentUser)==null?void 0:c.uid;W.useEffect(()=>{l&&_6(a.currentUser).then(h=>{h.claims.admin?t({name:a.currentUser.displayName||""}):console.log("User is not an admin.")}).catch(h=>{console.error("Error fetching token result:",h)})},[l]);const u=Wv({enableReinitialize:!0,initialValues:{name:(e==null?void 0:e.name)||""},validationSchema:um({name:Oi().required("Name is required")}),onSubmit:async h=>{if(l){o(!0);try{a.currentUser&&(await U6(a.currentUser,{displayName:h.name}),pf("Profile updated successfully!",{variant:"success"}),n())}catch{pf("Update failed. Please try again.",{variant:"error"})}finally{o(!1)}}}});return e?L.jsx("div",{className:"p-6",children:L.jsxs("form",{onSubmit:u.handleSubmit,children:[L.jsx(tr,{name:"name",type:"text",label:"Name",value:u.values.name,onChange:u.handleChange,onBlur:u.handleBlur,error:u.errors.name,touched:u.touched.name||!1,focusedField:r,setFocusedField:i}),L.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md",disabled:s,children:s?"Updating...":"Update Profile"})]})}):L.jsx("div",{children:"Loading..."})},rye=({handleCloseModal:n})=>{const[e,t]=W.useState(!1),[r,i]=W.useState(null),o=ex().currentUser,a=Wv({initialValues:{password:"",newPassword:"",confirmPassword:""},validationSchema:um({password:Oi().required("Current password is required").min(6,"Password must be at least 6 characters"),newPassword:Oi().required("New password is required").min(6,"Password must be at least 6 characters"),confirmPassword:Oi().oneOf([Oge("newPassword"),void 0],"Passwords must match").required("Confirm Password is required")}),onSubmit:async l=>{if(o){t(!0);try{const u=em.credential(o.email||"",l.password);await NZ(o,u),await jZ(o,l.newPassword),pf("Password updated successfully!",{variant:"success"}),n()}catch(u){pf(String(u),{variant:"error"})}finally{t(!1)}}}});return L.jsx("div",{className:"p-6",children:L.jsxs("form",{onSubmit:a.handleSubmit,children:[L.jsx(tr,{name:"password",type:"password",label:"Current Password",value:a.values.password,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.password,touched:a.touched.password||!1,focusedField:r,setFocusedField:i}),L.jsx(tr,{name:"newPassword",type:"password",label:"New Password",value:a.values.newPassword,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.newPassword,touched:a.touched.newPassword||!1,focusedField:r,setFocusedField:i}),L.jsx(tr,{name:"confirmPassword",type:"password",label:"Confirm New Password",value:a.values.confirmPassword,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.confirmPassword,touched:a.touched.confirmPassword||!1,focusedField:r,setFocusedField:i}),L.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded-md",disabled:e,children:e?"Updating...":"Update Password"})]})})},iye=({token:n,path:e,pathName:t,logo:r})=>{const i=Au(),[s,o]=W.useState(null),[a,l]=W.useState(!1),[u,c]=W.useState(!1),{handleLogout:h}=uS(),f=Of(),p=_=>{o(_),l(!1)},g=()=>{o(null)},x=()=>{h(),f("/login"),g()};return L.jsxs("nav",{className:"p-8",children:[L.jsx("ul",{className:"flex gap-12",children:n?L.jsx(L.Fragment,{children:L.jsx(tye,{href:"#",setDropdownVisible:l,handleOpenModal:p,children:L.jsx($ve,{size:24,className:"cursor-pointer text-gray-600"})})}):L.jsx(Zve,{path:Array.isArray(e)?e[0]:e,name:t,isActive:i.pathname===(Array.isArray(e)?e[0]:e),location:i.pathname,logo:r})}),s==="update"&&L.jsx(mf,{title:"Update Profile",onClose:()=>{u||(g(),c(!1))},children:L.jsx(nye,{handleCloseModal:g,isCounting:u,setIsCounting:c})}),s==="updatePassword"&&L.jsx(mf,{title:"Update Password",onClose:g,children:L.jsx(rye,{handleCloseModal:g})}),s==="logout"&&L.jsx(mf,{title:"Logout",onClose:g,children:L.jsxs(L.Fragment,{children:[L.jsx("p",{children:"Are you sure you want to logout"}),L.jsxs("div",{className:"flex justify-center gap-4",children:[L.jsx("button",{onClick:x,className:"mt-4 p-2 bg-blue-500 text-white rounded-md w-20",children:"Yes"}),L.jsx("button",{onClick:g,className:"mt-4 p-2 bg-red-500 text-white rounded-md w-20",children:"No"})]})]})})]})},Z7="/assets/mypic-Rbpf1Nzz.png",sye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHElEQVR4nO2aX2iXVRjHP6u1/UT7s2lNKiizm5qVEERBkRdlq7C0m3DpRf+wG01mF0H0PyrMK8mQxKCgILrLVIystIhZNpOicmZU0yyTqOXWptUbD31feHj3/n9/v63CLxz24z3Pec55zjnP3zM4jv8v2oH5wDPARuBL4GdgVM1+f6E+o7kZaONfghqwGHgT+BMICrY/gC3AIqB1IgSYBKwAvneLGgHeBh7UyVygHT9JrU3frO8h4B2NCccfAHq0OeOCG4F9bgEfAXcBp5bgdRpwN7DT8fsKuJ4GwnZqrZvwY2BuHfl3Absc/zWNOJ3pWrhNMAQsBU6s9yT8w/NeYNiddke9mM/QcQeyOrNoPC4G9mjOvVpDJZzuGH4ITGP80Aa8r7n36VaUQs1dpw+AyYw/JgO97pqV0pm17jqZs8uDJmBVCX/i21/SwRBT3a0wA1DYxIaKnVcnWoCXKwoRqMXpTGgAzLrldnahn/A7k4aT5d2rLH5/iiCG5U75c12x+5yfyGNiOyIOLWw7FL7cADyt000Sog84K0OQZuAT9ZtQqai5sCOPs5vpTLNvWxWWeFwOHImh3QBMEU2QIgjy+OHppcZmi5yFyMKlwA8JO3xZwphlEbpXI6ceZAjS5Cxpd9riwntusVMargUGU6xO0h22XTzoaDe5vmvcd/udhCWi2ZxE0K6weiQjAOxWfpF0349l6NazjvZH991fUfud5ihHNU/sOueLiYXiSVihHc+yQOek8Ljd0f3mvmeZYI93RXNTXGfoyCyfKIpZkUXETiBc7eh2lRTkEdGsjOvcqE5LQYuiFrFIr6TQXuXoHispyAJn8cagX52WxZXB8xE9SYoIlopmIBL6FBGkUzRWFxiDw+q02KYMztDiwoV8pm8eZ4vmkMIOSgoyTTQ/xXWGlshiprKYGcnyDkrnuuXdfwG+ER0VBGkVzUijBDGcID17Tnc4GoOZI42DP83vqghS9Wol4daI7ljMlBR+DEiIripXq6qyJ+GOyIk8UQeenWnK/kYF85uGM+X4vDAvVqyQLBCf19McohXP6gELHy5SkrYpRpnfK5B5FnKIYYhiFcCysJziKWC3QplvVRK1zPGlmDC+V4lcUWzT+HlJwVgYNFoFsAgsSHxcY49qp86PoTP9+zQizJMF52p3QeMpSURbxNzKmHlhOcJrGjeYkov4tHirE2SwYLHvnpgUYAxuE5Glrnlxp1vUAznHTHJW0tp5BTatT2MWphHWVBU3wutyMg8ZBzlOI2kDLixY3RnI8wzRI+K+HEfeFEmyriA/rtSYIzkVvllGJFDKnImay9asoJyFMCKw9ij5sVhjXshJ3yP6PUUehcJqxXBMlBrFeifIUEos5dGiIsKhnNX22cDvmqPwU8YatwNp8df0SHFtULtn1ikOZpbfkhC2wDyF9L3ivZoSqKksFDqutCK2lf23R/zDkHLrdXr8XK+i3VFlkHlOYorGBPpb+p2xw+1Gb8bJmOLPUfi+U5GpOa1fga8V0t+fUZiInkQoRH9MklYYM5wwds0uofGY7eY0Ic6tF+MOd82GVXtNyiuqoFn6FSr2jnqcRJzOhAYgUEG5Xq+vTXJ2ux3/1Y1+e+9yxx7IjC4p+V8M7YqdfHTQX+fX4szTWR4xu6MKrx9W4tMp49CiNlUloltEsy0SFVjYsWyi/gOiVRWSzUoBgoLtmAqDCydKgKSMcJ5ykQ16ezzs/qnGfn+u9HSlaBPziePgP46/AUH2PEaHIlMJAAAAAElFTkSuQmCC",eq=()=>{const[n,e]=W.useState([]),[t,r]=W.useState([]);W.useEffect(()=>{(async()=>{const u=(await Js(Jr(sn,"projects"))).docs.map(c=>({id:c.id,...c.data()})).sort((c,h)=>new Date(c.startDate)-new Date(h.startDate));e(u)})()},[]),W.useEffect(()=>{(async()=>{const u=(await Js(Jr(sn,"achievements"))).docs.map(c=>({id:c.id,...c.data()})).sort((c,h)=>new Date(c.startDate)-new Date(h.startDate));r(u)})()},[]);const i=localStorage.getItem("authToken"),s=[{name:"Home",hasDropdown:!1,linkTo:"/"},{name:"Projects",hasDropdown:!0,dropdownOptions:[{label:n.length>0?n[2].name:"Loading...",to:n.length>0?`/projects/${n[2].id}`:"/"},{label:n.length>0?n[1].name:"Loading...",to:n.length>0?`/projects/${n[1].id}`:"/"},{label:"Show All",to:"/projects"}]},{name:"Achievements",hasDropdown:!0,dropdownOptions:[{label:t.length>0?t[0].name:"Loading...",to:t.length>0?`/achievements/${t[0].id}`:"/"},{label:t.length>0?t[1].name:"Loading...",to:t.length>0?`/achievements/${t[1].id}`:"/"},{label:"Show All",to:"/achievements"}]},{name:"Publications",hasDropdown:!1,linkTo:"https://scholar.google.com/citations?user=TyG1JqoAAAAJ&hl=en"},{name:"About Me",hasDropdown:!1,linkTo:"/me"},{name:"Contact",hasDropdown:!1,linkTo:"/contact"}];return L.jsxs(Xt.div,{className:"flex items-center justify-between min-h-[80px] px-4 sm:px-6 md:px-8 lg:px-10 pt-3 sm:pt-4 md:pt-5 lg:pt-6 pb-2",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[L.jsxs("div",{className:"flex justify-center flex-col items-center",children:[L.jsxs("div",{className:"flex items-center justify-content-center",children:[L.jsx("img",{src:Z7,alt:"Sahaj Shakya",className:"w-10 h-10 sm:w-11 sm:h-11 md:w-12 md:h-12 rounded-full object-cover"}),L.jsxs("div",{className:"ml-3 sm:ml-4 text-white align-content-center align-item-center",children:[L.jsx("div",{className:"font-semibold text-base sm:text-lg md:text-xl text-black",children:"Sahaj Shakya"}),L.jsxs("div",{className:"flex items-center text-xs sm:text-sm md:text-base",children:[L.jsx(K7,{className:"mr-1 sm:mr-2 text-blue-500"}),L.jsx("h3",{className:"text-blue-700",children:"saz.shakya@gmail.com"})]}),L.jsxs("div",{className:"flex items-center text-xs sm:text-sm md:text-base",children:[L.jsx(J7,{className:"mr-1 sm:mr-2 text-green-400"}),L.jsx("h3",{className:"text-green-700",children:"977-9841194900"})]})]})]}),L.jsxs("div",{className:"flex-row gap-1 md:gap-1 lg:gap-2 hidden md:flex",children:[L.jsx(og,{path:"https://github.com/sahajshakya",logo:L.jsx(G7,{size:28}),name:"GitHub"}),L.jsx(og,{path:"https://www.linkedin.com/in/sahaj-shakya-98253710a/",logo:L.jsx(W7,{size:28}),name:"LinkedIn"}),L.jsx(og,{path:"https://www.researchgate.net/profile/Sahaj-Shakya",logo:L.jsx("span",{className:"text-lg font-bold",children:"RG"}),name:"ResearchGate"}),L.jsx(og,{path:"https://scholar.google.com/citations?user=TyG1JqoAAAAJ&hl=en",logo:L.jsx("img",{src:sye,alt:"Google Scholar",className:"w-6 h-6"}),name:"Google Scholar"}),L.jsx(og,{path:"https://www.youtube.com/@KA1SKZ",logo:L.jsx($7,{size:28}),name:"YouTube"}),L.jsx(og,{path:"https://www.instagram.com/kai_loves_to_click/",logo:L.jsx(q7,{size:28}),name:"Instagram"})]})]}),L.jsx("div",{className:"flex-1 mx-4 sm:mx-6 md:mx-8 z-50",children:L.jsx(Kve,{tabs:s,token:i})}),L.jsx("div",{className:"hidden md:flex gap-3 sm:gap-4 lg:gap-5",children:L.jsx(iye,{token:i,path:"https://engineeringstudymaterials.com/",pathName:"Materials"})})]})},og=({path:n,logo:e,name:t})=>{const r=S_(0),i=S_(0),s=cE(r,a=>a*.5),o=cE(i,a=>a*.5);return L.jsx(Xt.div,{className:"relative inline-block",onPointerMove:a=>{const l=a.currentTarget;oye(l,a,r,i)},onPointerLeave:()=>{r.set(0),i.set(0)},style:{x:r,y:i},children:L.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-gray-300",children:L.jsx(Xt.span,{className:"z-10 relative flex items-center justify-center w-12 h-12 rounded-full bg-gray-700 hover:scale-110 transition-transform",style:{x:s,y:o},children:e})})})},TU=(n,e,t,r)=>{const i=e-n,s=r-t;return o=>t+((o-n)/i*s||0)},oye=(n,e,t,r)=>{const i=n.getBoundingClientRect(),s=e.clientX-i.left,o=e.clientY-i.top,a=TU(0,i.width,-1,1)(s),l=TU(0,i.height,-1,1)(o);t.set(a*10),r.set(l*10)},aye=()=>L.jsxs("div",{className:"bg-gray-200",children:[L.jsx(eq,{}),L.jsx("div",{children:L.jsx(b9,{})})]});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _x="172",lye={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},uye={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tq=0,rP=1,nq=2,cye=3,rq=0,cS=1,X0=2,bl=3,bu=0,yo=1,Sl=2,Nc=0,Sp=1,iP=2,sP=3,oP=4,iq=5,sf=100,sq=101,oq=102,aq=103,lq=104,uq=200,cq=201,hq=202,fq=203,yE=204,_E=205,dq=206,pq=207,mq=208,gq=209,vq=210,yq=211,_q=212,xq=213,wq=214,xE=0,wE=1,bE=2,zp=3,EE=4,AE=5,SE=6,TE=7,xx=0,bq=1,Eq=2,gu=0,Aq=1,Sq=2,Tq=3,$O=4,Cq=5,Mq=6,Rq=7,aP="attached",Iq="detached",hS=300,$c=301,Rf=302,R_=303,I_=304,$v=306,If=1e3,sa=1001,yv=1002,hs=1003,fS=1004,hye=1004,fp=1005,fye=1005,vi=1006,nv=1007,dye=1007,La=1008,pye=1008,Dl=1009,KO=1010,JO=1011,_v=1012,dS=1013,Kc=1014,Lo=1015,Kv=1016,pS=1017,mS=1018,Hp=1020,XO=35902,YO=1021,QO=1022,qs=1023,ZO=1024,e3=1025,Tp=1026,Gp=1027,gS=1028,wx=1029,t3=1030,vS=1031,mye=1032,yS=1033,Y0=33776,Q0=33777,Z0=33778,e_=33779,CE=35840,ME=35841,RE=35842,IE=35843,PE=36196,kE=37492,OE=37496,DE=37808,NE=37809,LE=37810,BE=37811,FE=37812,UE=37813,jE=37814,VE=37815,zE=37816,HE=37817,GE=37818,qE=37819,WE=37820,$E=37821,t_=36492,KE=36494,JE=36495,n3=36283,XE=36284,YE=36285,QE=36286,Pq=2200,kq=2201,Oq=2202,xv=2300,wv=2301,Ab=2302,dp=2400,pp=2401,P_=2402,_S=2500,r3=2501,Dq=0,i3=1,ZE=2,Nq=3200,Lq=3201,gye=3202,vye=3203,Vf=0,Bq=1,Sc="",ko="srgb",qp="srgb-linear",k_="linear",ur="srgb",yye=0,Zd=7680,_ye=7681,xye=7682,wye=7683,bye=34055,Eye=34056,Aye=5386,Sye=512,Tye=513,Cye=514,Mye=515,Rye=516,Iye=517,Pye=518,lP=519,Fq=512,Uq=513,jq=514,s3=515,Vq=516,zq=517,Hq=518,Gq=519,O_=35044,kye=35048,Oye=35040,Dye=35045,Nye=35049,Lye=35041,Bye=35046,Fye=35050,Uye=35042,jye="100",uP="300 es",Ml=2e3,D_=2001;class Mu{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Bs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let CU=1234567;const Cp=Math.PI/180,bv=180/Math.PI;function ca(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Bs[n&255]+Bs[n>>8&255]+Bs[n>>16&255]+Bs[n>>24&255]+"-"+Bs[e&255]+Bs[e>>8&255]+"-"+Bs[e>>16&15|64]+Bs[e>>24&255]+"-"+Bs[t&63|128]+Bs[t>>8&255]+"-"+Bs[t>>16&255]+Bs[t>>24&255]+Bs[r&255]+Bs[r>>8&255]+Bs[r>>16&255]+Bs[r>>24&255]).toLowerCase()}function yn(n,e,t){return Math.max(e,Math.min(t,n))}function o3(n,e){return(n%e+e)%e}function Vye(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zye(n,e,t){return n!==e?(t-n)/(e-n):0}function n_(n,e,t){return(1-t)*n+t*e}function Hye(n,e,t,r){return n_(n,e,1-Math.exp(-t*r))}function Gye(n,e=1){return e-Math.abs(o3(n,e*2)-e)}function qye(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Wye(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function $ye(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Kye(n,e){return n+Math.random()*(e-n)}function Jye(n){return n*(.5-Math.random())}function Xye(n){n!==void 0&&(CU=n);let e=CU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Yye(n){return n*Cp}function Qye(n){return n*bv}function Zye(n){return(n&n-1)===0&&n!==0}function e0e(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function t0e(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function n0e(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),h=s((e-r)/2),f=o((e-r)/2),p=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*h,l*f,a*u);break;case"YZY":n.set(l*f,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*f,a*c,a*u);break;case"XZX":n.set(a*c,l*g,l*p,a*u);break;case"YXY":n.set(l*p,a*c,l*g,a*u);break;case"ZYZ":n.set(l*g,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function go(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Cn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const qq={DEG2RAD:Cp,RAD2DEG:bv,generateUUID:ca,clamp:yn,euclideanModulo:o3,mapLinear:Vye,inverseLerp:zye,lerp:n_,damp:Hye,pingpong:Gye,smoothstep:qye,smootherstep:Wye,randInt:$ye,randFloat:Kye,randFloatSpread:Jye,seededRandom:Xye,degToRad:Yye,radToDeg:Qye,isPowerOfTwo:Zye,ceilPowerOfTwo:e0e,floorPowerOfTwo:t0e,setQuaternionFromProperEuler:n0e,normalize:Cn,denormalize:go};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(yn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(yn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(e,t,r,i,s,o,a,l,u){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],p=r[5],g=r[8],x=i[0],_=i[3],v=i[6],b=i[1],E=i[4],S=i[7],C=i[2],D=i[5],M=i[8];return s[0]=o*x+a*b+l*C,s[3]=o*_+a*E+l*D,s[6]=o*v+a*S+l*M,s[1]=u*x+c*b+h*C,s[4]=u*_+c*E+h*D,s[7]=u*v+c*S+h*M,s[2]=f*x+p*b+g*C,s[5]=f*_+p*E+g*D,s[8]=f*v+p*S+g*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,f=a*l-c*s,p=u*s-o*l,g=t*h+r*f+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/g;return e[0]=h*x,e[1]=(i*u-c*r)*x,e[2]=(a*r-i*o)*x,e[3]=f*x,e[4]=(c*t-i*l)*x,e[5]=(i*s-a*t)*x,e[6]=p*x,e[7]=(r*l-u*t)*x,e[8]=(o*t-r*s)*x,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(LC.makeScale(e,t)),this}rotate(e){return this.premultiply(LC.makeRotation(-e)),this}translate(e,t){return this.premultiply(LC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const LC=new bn;function Wq(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const r0e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qg(n,e){return new r0e[n](e)}function N_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function $q(){const n=N_("canvas");return n.style.display="block",n}const MU={};function Dg(n){n in MU||(MU[n]=!0,console.warn(n))}function i0e(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function s0e(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function o0e(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const RU=new bn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),IU=new bn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function a0e(){const n={enabled:!0,workingColorSpace:qp,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ur&&(i.r=Lc(i.r),i.g=Lc(i.g),i.b=Lc(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ur&&(i.r=rv(i.r),i.g=rv(i.g),i.b=rv(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Sc?k_:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[qp]:{primaries:e,whitePoint:r,transfer:k_,toXYZ:RU,fromXYZ:IU,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:ko},outputColorSpaceConfig:{drawingBufferColorSpace:ko}},[ko]:{primaries:e,whitePoint:r,transfer:ur,toXYZ:RU,fromXYZ:IU,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:ko}}}),n}const Wn=a0e();function Lc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function rv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let ag;class Kq{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ag===void 0&&(ag=N_("canvas")),ag.width=e.width,ag.height=e.height;const r=ag.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ag}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=N_("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Lc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Lc(t[r]/255)*255):t[r]=Lc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let l0e=0;class mp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:l0e++}),this.uuid=ca(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(BC(i[o].image)):s.push(BC(i[o]))}else s=BC(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function BC(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Kq.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let u0e=0;class Br extends Mu{constructor(e=Br.DEFAULT_IMAGE,t=Br.DEFAULT_MAPPING,r=sa,i=sa,s=vi,o=La,a=qs,l=Dl,u=Br.DEFAULT_ANISOTROPY,c=Sc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:u0e++}),this.uuid=ca(),this.name="",this.source=new mp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case If:e.x=e.x-Math.floor(e.x);break;case sa:e.x=e.x<0?0:1;break;case yv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case If:e.y=e.y-Math.floor(e.y);break;case sa:e.y=e.y<0?0:1;break;case yv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Br.DEFAULT_IMAGE=null;Br.DEFAULT_MAPPING=hS;Br.DEFAULT_ANISOTROPY=1;class Xn{constructor(e=0,t=0,r=0,i=1){Xn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],p=l[5],g=l[9],x=l[2],_=l[6],v=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-x)<.01&&Math.abs(g-_)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+x)<.1&&Math.abs(g+_)<.1&&Math.abs(u+p+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(u+1)/2,S=(p+1)/2,C=(v+1)/2,D=(c+f)/4,M=(h+x)/4,P=(g+_)/4;return E>S&&E>C?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=D/r,s=M/r):S>C?S<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(S),r=D/i,s=P/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=M/s,i=P/s),this.set(r,i,s,t),this}let b=Math.sqrt((_-g)*(_-g)+(h-x)*(h-x)+(f-c)*(f-c));return Math.abs(b)<.001&&(b=1),this.x=(_-g)/b,this.y=(h-x)/b,this.z=(f-c)/b,this.w=Math.acos((u+p+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this.z=yn(this.z,e.z,t.z),this.w=yn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this.z=yn(this.z,e,t),this.w=yn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(yn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xS extends Mu{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Xn(0,0,e,t),this.scissorTest=!1,this.viewport=new Xn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:vi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Br(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new mp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Eu extends xS{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class bx extends Br{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=hs,this.minFilter=hs,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class c0e extends Eu{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new bx(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class wS extends Br{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=hs,this.minFilter=hs,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class h0e extends Eu{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new wS(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Ws{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=s[o+0],p=s[o+1],g=s[o+2],x=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=p,e[t+2]=g,e[t+3]=x;return}if(h!==x||l!==f||u!==p||c!==g){let _=1-a;const v=l*f+u*p+c*g+h*x,b=v>=0?1:-1,E=1-v*v;if(E>Number.EPSILON){const C=Math.sqrt(E),D=Math.atan2(C,v*b);_=Math.sin(_*D)/C,a=Math.sin(a*D)/C}const S=a*b;if(l=l*_+f*S,u=u*_+p*S,c=c*_+g*S,h=h*_+x*S,_===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=C,u*=C,c*=C,h*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=s[o],f=s[o+1],p=s[o+2],g=s[o+3];return e[t]=a*g+c*h+l*p-u*f,e[t+1]=l*g+c*f+u*h-a*p,e[t+2]=u*g+c*p+a*f-l*h,e[t+3]=c*g-a*h-l*f-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),h=a(s/2),f=l(r/2),p=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=f*c*h+u*p*g,this._y=u*p*h-f*c*g,this._z=u*c*g+f*p*h,this._w=u*c*h-f*p*g;break;case"YXZ":this._x=f*c*h+u*p*g,this._y=u*p*h-f*c*g,this._z=u*c*g-f*p*h,this._w=u*c*h+f*p*g;break;case"ZXY":this._x=f*c*h-u*p*g,this._y=u*p*h+f*c*g,this._z=u*c*g+f*p*h,this._w=u*c*h-f*p*g;break;case"ZYX":this._x=f*c*h-u*p*g,this._y=u*p*h+f*c*g,this._z=u*c*g-f*p*h,this._w=u*c*h+f*p*g;break;case"YZX":this._x=f*c*h+u*p*g,this._y=u*p*h+f*c*g,this._z=u*c*g-f*p*h,this._w=u*c*h-f*p*g;break;case"XZY":this._x=f*c*h-u*p*g,this._y=u*p*h-f*c*g,this._z=u*c*g+f*p*h,this._w=u*c*h+f*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=r+a+h;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(c-l)*p,this._y=(s-u)*p,this._z=(o-i)*p}else if(r>a&&r>h){const p=2*Math.sqrt(1+r-a-h);this._w=(c-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+u)/p}else if(a>h){const p=2*Math.sqrt(1+a-r-h);this._w=(s-u)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+h-r-a);this._w=(o-i)/p,this._x=(s+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,t=0,r=0){pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(PU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(PU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),c=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*u+o*h-a*c,this.y=r+l*c+a*u-s*h,this.z=i+l*h+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=yn(this.x,e.x,t.x),this.y=yn(this.y,e.y,t.y),this.z=yn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=yn(this.x,e,t),this.y=yn(this.y,e,t),this.z=yn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(yn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return FC.copy(this).projectOnVector(e),this.sub(FC)}reflect(e){return this.sub(FC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(yn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const FC=new pe,PU=new Ws;class $s{constructor(e=new pe(1/0,1/0,1/0),t=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(pl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(pl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=pl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,pl):pl.fromBufferAttribute(s,o),pl.applyMatrix4(e.matrixWorld),this.expandByPoint(pl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),n1.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),n1.copy(r.boundingBox)),n1.applyMatrix4(e.matrixWorld),this.union(n1)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,pl),pl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xy),r1.subVectors(this.max,Xy),lg.subVectors(e.a,Xy),ug.subVectors(e.b,Xy),cg.subVectors(e.c,Xy),Fh.subVectors(ug,lg),Uh.subVectors(cg,ug),Pd.subVectors(lg,cg);let t=[0,-Fh.z,Fh.y,0,-Uh.z,Uh.y,0,-Pd.z,Pd.y,Fh.z,0,-Fh.x,Uh.z,0,-Uh.x,Pd.z,0,-Pd.x,-Fh.y,Fh.x,0,-Uh.y,Uh.x,0,-Pd.y,Pd.x,0];return!UC(t,lg,ug,cg,r1)||(t=[1,0,0,0,1,0,0,0,1],!UC(t,lg,ug,cg,r1))?!1:(i1.crossVectors(Fh,Uh),t=[i1.x,i1.y,i1.z],UC(t,lg,ug,cg,r1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(pl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(pc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),pc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),pc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),pc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),pc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),pc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),pc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),pc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(pc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pc=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],pl=new pe,n1=new $s,lg=new pe,ug=new pe,cg=new pe,Fh=new pe,Uh=new pe,Pd=new pe,Xy=new pe,r1=new pe,i1=new pe,kd=new pe;function UC(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){kd.fromArray(n,s);const a=i.x*Math.abs(kd.x)+i.y*Math.abs(kd.y)+i.z*Math.abs(kd.z),l=e.dot(kd),u=t.dot(kd),c=r.dot(kd);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const f0e=new $s,Yy=new pe,jC=new pe;class Ts{constructor(e=new pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):f0e.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yy.subVectors(e,this.center);const t=Yy.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Yy,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yy.copy(e.center).add(jC)),this.expandByPoint(Yy.copy(e.center).sub(jC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const mc=new pe,VC=new pe,s1=new pe,jh=new pe,zC=new pe,o1=new pe,HC=new pe;class Jv{constructor(e=new pe,t=new pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=mc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(mc.copy(this.origin).addScaledVector(this.direction,t),mc.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){VC.copy(e).add(t).multiplyScalar(.5),s1.copy(t).sub(e).normalize(),jh.copy(this.origin).sub(VC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(s1),a=jh.dot(this.direction),l=-jh.dot(s1),u=jh.lengthSq(),c=Math.abs(1-o*o);let h,f,p,g;if(c>0)if(h=o*l-a,f=o*a-l,g=s*c,h>=0)if(f>=-g)if(f<=g){const x=1/c;h*=x,f*=x,p=h*(h+o*f+2*a)+f*(o*h+f+2*l)+u}else f=s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+u;else f=-s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+u;else f<=-g?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+u):f<=g?(h=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+u):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+u);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(VC).addScaledVector(s1,f),p}intersectSphere(e,t){mc.subVectors(e.center,this.origin);const r=mc.dot(this.direction),i=mc.dot(mc)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,mc)!==null}intersectTriangle(e,t,r,i,s){zC.subVectors(t,e),o1.subVectors(r,e),HC.crossVectors(zC,o1);let o=this.direction.dot(HC),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;jh.subVectors(this.origin,e);const l=a*this.direction.dot(o1.crossVectors(jh,o1));if(l<0)return null;const u=a*this.direction.dot(zC.cross(jh));if(u<0||l+u>o)return null;const c=-a*jh.dot(HC);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yt{constructor(e,t,r,i,s,o,a,l,u,c,h,f,p,g,x,_){Yt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,h,f,p,g,x,_)}set(e,t,r,i,s,o,a,l,u,c,h,f,p,g,x,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=f,v[3]=p,v[7]=g,v[11]=x,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/hg.setFromMatrixColumn(e,0).length(),s=1/hg.setFromMatrixColumn(e,1).length(),o=1/hg.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*c,p=o*h,g=a*c,x=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=p+g*u,t[5]=f-x*u,t[9]=-a*l,t[2]=x-f*u,t[6]=g+p*u,t[10]=o*l}else if(e.order==="YXZ"){const f=l*c,p=l*h,g=u*c,x=u*h;t[0]=f+x*a,t[4]=g*a-p,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-a,t[2]=p*a-g,t[6]=x+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*c,p=l*h,g=u*c,x=u*h;t[0]=f-x*a,t[4]=-o*h,t[8]=g+p*a,t[1]=p+g*a,t[5]=o*c,t[9]=x-f*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*c,p=o*h,g=a*c,x=a*h;t[0]=l*c,t[4]=g*u-p,t[8]=f*u+x,t[1]=l*h,t[5]=x*u+f,t[9]=p*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*u,g=a*l,x=a*u;t[0]=l*c,t[4]=x-f*h,t[8]=g*h+p,t[1]=h,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=p*h+g,t[10]=f-x*h}else if(e.order==="XZY"){const f=o*l,p=o*u,g=a*l,x=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+x,t[5]=o*c,t[9]=p*h-g,t[2]=g*h-p,t[6]=a*c,t[10]=x*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(d0e,e,p0e)}lookAt(e,t,r){const i=this.elements;return Qo.subVectors(e,t),Qo.lengthSq()===0&&(Qo.z=1),Qo.normalize(),Vh.crossVectors(r,Qo),Vh.lengthSq()===0&&(Math.abs(r.z)===1?Qo.x+=1e-4:Qo.z+=1e-4,Qo.normalize(),Vh.crossVectors(r,Qo)),Vh.normalize(),a1.crossVectors(Qo,Vh),i[0]=Vh.x,i[4]=a1.x,i[8]=Qo.x,i[1]=Vh.y,i[5]=a1.y,i[9]=Qo.y,i[2]=Vh.z,i[6]=a1.z,i[10]=Qo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],p=r[13],g=r[2],x=r[6],_=r[10],v=r[14],b=r[3],E=r[7],S=r[11],C=r[15],D=i[0],M=i[4],P=i[8],O=i[12],R=i[1],N=i[5],U=i[9],F=i[13],J=i[2],Z=i[6],oe=i[10],ae=i[14],Q=i[3],ee=i[7],Y=i[11],V=i[15];return s[0]=o*D+a*R+l*J+u*Q,s[4]=o*M+a*N+l*Z+u*ee,s[8]=o*P+a*U+l*oe+u*Y,s[12]=o*O+a*F+l*ae+u*V,s[1]=c*D+h*R+f*J+p*Q,s[5]=c*M+h*N+f*Z+p*ee,s[9]=c*P+h*U+f*oe+p*Y,s[13]=c*O+h*F+f*ae+p*V,s[2]=g*D+x*R+_*J+v*Q,s[6]=g*M+x*N+_*Z+v*ee,s[10]=g*P+x*U+_*oe+v*Y,s[14]=g*O+x*F+_*ae+v*V,s[3]=b*D+E*R+S*J+C*Q,s[7]=b*M+E*N+S*Z+C*ee,s[11]=b*P+E*U+S*oe+C*Y,s[15]=b*O+E*F+S*ae+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],p=e[14],g=e[3],x=e[7],_=e[11],v=e[15];return g*(+s*l*h-i*u*h-s*a*f+r*u*f+i*a*p-r*l*p)+x*(+t*l*p-t*u*f+s*o*f-i*o*p+i*u*c-s*l*c)+_*(+t*u*h-t*a*p-s*o*h+r*o*p+s*a*c-r*u*c)+v*(-i*a*c-t*l*h+t*a*f+i*o*h-r*o*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],p=e[11],g=e[12],x=e[13],_=e[14],v=e[15],b=h*_*u-x*f*u+x*l*p-a*_*p-h*l*v+a*f*v,E=g*f*u-c*_*u-g*l*p+o*_*p+c*l*v-o*f*v,S=c*x*u-g*h*u+g*a*p-o*x*p-c*a*v+o*h*v,C=g*h*l-c*x*l-g*a*f+o*x*f+c*a*_-o*h*_,D=t*b+r*E+i*S+s*C;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/D;return e[0]=b*M,e[1]=(x*f*s-h*_*s-x*i*p+r*_*p+h*i*v-r*f*v)*M,e[2]=(a*_*s-x*l*s+x*i*u-r*_*u-a*i*v+r*l*v)*M,e[3]=(h*l*s-a*f*s-h*i*u+r*f*u+a*i*p-r*l*p)*M,e[4]=E*M,e[5]=(c*_*s-g*f*s+g*i*p-t*_*p-c*i*v+t*f*v)*M,e[6]=(g*l*s-o*_*s-g*i*u+t*_*u+o*i*v-t*l*v)*M,e[7]=(o*f*s-c*l*s+c*i*u-t*f*u-o*i*p+t*l*p)*M,e[8]=S*M,e[9]=(g*h*s-c*x*s-g*r*p+t*x*p+c*r*v-t*h*v)*M,e[10]=(o*x*s-g*a*s+g*r*u-t*x*u-o*r*v+t*a*v)*M,e[11]=(c*a*s-o*h*s-c*r*u+t*h*u+o*r*p-t*a*p)*M,e[12]=C*M,e[13]=(c*x*i-g*h*i+g*r*f-t*x*f-c*r*_+t*h*_)*M,e[14]=(g*a*i-o*x*i-g*r*l+t*x*l+o*r*_-t*a*_)*M,e[15]=(o*h*i-c*a*i+c*r*l-t*h*l-o*r*f+t*a*f)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,h=a+a,f=s*u,p=s*c,g=s*h,x=o*c,_=o*h,v=a*h,b=l*u,E=l*c,S=l*h,C=r.x,D=r.y,M=r.z;return i[0]=(1-(x+v))*C,i[1]=(p+S)*C,i[2]=(g-E)*C,i[3]=0,i[4]=(p-S)*D,i[5]=(1-(f+v))*D,i[6]=(_+b)*D,i[7]=0,i[8]=(g+E)*M,i[9]=(_-b)*M,i[10]=(1-(f+x))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=hg.set(i[0],i[1],i[2]).length();const o=hg.set(i[4],i[5],i[6]).length(),a=hg.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ml.copy(this);const u=1/s,c=1/o,h=1/a;return ml.elements[0]*=u,ml.elements[1]*=u,ml.elements[2]*=u,ml.elements[4]*=c,ml.elements[5]*=c,ml.elements[6]*=c,ml.elements[8]*=h,ml.elements[9]*=h,ml.elements[10]*=h,t.setFromRotationMatrix(ml),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Ml){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),h=(t+e)/(t-e),f=(r+i)/(r-i);let p,g;if(a===Ml)p=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===D_)p=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Ml){const l=this.elements,u=1/(t-e),c=1/(r-i),h=1/(o-s),f=(t+e)*u,p=(r+i)*c;let g,x;if(a===Ml)g=(o+s)*h,x=-2*h;else if(a===D_)g=s*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=x,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const hg=new pe,ml=new Yt,d0e=new pe(0,0,0),p0e=new pe(1,1,1),Vh=new pe,a1=new pe,Qo=new pe,kU=new Yt,OU=new Ws;class ha{constructor(e=0,t=0,r=0,i=ha.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(yn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-yn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(yn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-yn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(yn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-yn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return kU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(kU,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return OU.setFromEuler(this),this.setFromQuaternion(OU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ha.DEFAULT_ORDER="XYZ";class Mp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let m0e=0;const DU=new pe,fg=new Ws,gc=new Yt,l1=new pe,Qy=new pe,g0e=new pe,v0e=new Ws,NU=new pe(1,0,0),LU=new pe(0,1,0),BU=new pe(0,0,1),FU={type:"added"},y0e={type:"removed"},dg={type:"childadded",child:null},GC={type:"childremoved",child:null};class Bn extends Mu{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:m0e++}),this.uuid=ca(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new pe,t=new ha,r=new Ws,i=new pe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yt},normalMatrix:{value:new bn}}),this.matrix=new Yt,this.matrixWorld=new Yt,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fg.setFromAxisAngle(e,t),this.quaternion.multiply(fg),this}rotateOnWorldAxis(e,t){return fg.setFromAxisAngle(e,t),this.quaternion.premultiply(fg),this}rotateX(e){return this.rotateOnAxis(NU,e)}rotateY(e){return this.rotateOnAxis(LU,e)}rotateZ(e){return this.rotateOnAxis(BU,e)}translateOnAxis(e,t){return DU.copy(e).applyQuaternion(this.quaternion),this.position.add(DU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NU,e)}translateY(e){return this.translateOnAxis(LU,e)}translateZ(e){return this.translateOnAxis(BU,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(gc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?l1.copy(e):l1.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Qy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?gc.lookAt(Qy,l1,this.up):gc.lookAt(l1,Qy,this.up),this.quaternion.setFromRotationMatrix(gc),i&&(gc.extractRotation(i.matrixWorld),fg.setFromRotationMatrix(gc),this.quaternion.premultiply(fg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(FU),dg.child=e,this.dispatchEvent(dg),dg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(y0e),GC.child=e,this.dispatchEvent(GC),GC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),gc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),gc.multiply(e.parent.matrixWorld)),e.applyMatrix4(gc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(FU),dg.child=e,this.dispatchEvent(dg),dg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qy,e,g0e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qy,v0e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),f=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Bn.DEFAULT_UP=new pe(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gl=new pe,vc=new pe,qC=new pe,yc=new pe,pg=new pe,mg=new pe,UU=new pe,WC=new pe,$C=new pe,KC=new pe,JC=new Xn,XC=new Xn,YC=new Xn;class Do{constructor(e=new pe,t=new pe,r=new pe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),gl.subVectors(e,t),i.cross(gl);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){gl.subVectors(i,t),vc.subVectors(r,t),qC.subVectors(e,t);const o=gl.dot(gl),a=gl.dot(vc),l=gl.dot(qC),u=vc.dot(vc),c=vc.dot(qC),h=o*u-a*a;if(h===0)return s.set(0,0,0),null;const f=1/h,p=(u*l-a*c)*f,g=(o*c-a*l)*f;return s.set(1-p-g,g,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,yc)===null?!1:yc.x>=0&&yc.y>=0&&yc.x+yc.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,yc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,yc.x),l.addScaledVector(o,yc.y),l.addScaledVector(a,yc.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return JC.setScalar(0),XC.setScalar(0),YC.setScalar(0),JC.fromBufferAttribute(e,t),XC.fromBufferAttribute(e,r),YC.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(JC,s.x),o.addScaledVector(XC,s.y),o.addScaledVector(YC,s.z),o}static isFrontFacing(e,t,r,i){return gl.subVectors(r,t),vc.subVectors(e,t),gl.cross(vc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gl.subVectors(this.c,this.b),vc.subVectors(this.a,this.b),gl.cross(vc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Do.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Do.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Do.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Do.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Do.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;pg.subVectors(i,r),mg.subVectors(s,r),WC.subVectors(e,r);const l=pg.dot(WC),u=mg.dot(WC);if(l<=0&&u<=0)return t.copy(r);$C.subVectors(e,i);const c=pg.dot($C),h=mg.dot($C);if(c>=0&&h<=c)return t.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(pg,o);KC.subVectors(e,s);const p=pg.dot(KC),g=mg.dot(KC);if(g>=0&&p<=g)return t.copy(s);const x=p*u-l*g;if(x<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(r).addScaledVector(mg,a);const _=c*g-p*h;if(_<=0&&h-c>=0&&p-g>=0)return UU.subVectors(s,i),a=(h-c)/(h-c+(p-g)),t.copy(i).addScaledVector(UU,a);const v=1/(_+x+f);return o=x*v,a=f*v,t.copy(r).addScaledVector(pg,o).addScaledVector(mg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Jq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},zh={h:0,s:0,l:0},u1={h:0,s:0,l:0};function QC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class bt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Wn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Wn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Wn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Wn.workingColorSpace){if(e=o3(e,1),t=yn(t,0,1),r=yn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=QC(o,s,e+1/3),this.g=QC(o,s,e),this.b=QC(o,s,e-1/3)}return Wn.toWorkingColorSpace(this,i),this}setStyle(e,t=ko){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ko){const r=Jq[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lc(e.r),this.g=Lc(e.g),this.b=Lc(e.b),this}copyLinearToSRGB(e){return this.r=rv(e.r),this.g=rv(e.g),this.b=rv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ko){return Wn.fromWorkingColorSpace(Fs.copy(this),e),Math.round(yn(Fs.r*255,0,255))*65536+Math.round(yn(Fs.g*255,0,255))*256+Math.round(yn(Fs.b*255,0,255))}getHexString(e=ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Wn.workingColorSpace){Wn.fromWorkingColorSpace(Fs.copy(this),t);const r=Fs.r,i=Fs.g,s=Fs.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Wn.workingColorSpace){return Wn.fromWorkingColorSpace(Fs.copy(this),t),e.r=Fs.r,e.g=Fs.g,e.b=Fs.b,e}getStyle(e=ko){Wn.fromWorkingColorSpace(Fs.copy(this),e);const t=Fs.r,r=Fs.g,i=Fs.b;return e!==ko?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(zh),this.setHSL(zh.h+e,zh.s+t,zh.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(zh),e.getHSL(u1);const r=n_(zh.h,u1.h,t),i=n_(zh.s,u1.s,t),s=n_(zh.l,u1.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fs=new bt;bt.NAMES=Jq;let _0e=0;class Ji extends Mu{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_0e++}),this.uuid=ca(),this.name="",this.type="Material",this.blending=Sp,this.side=bu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=yE,this.blendDst=_E,this.blendEquation=sf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new bt(0,0,0),this.blendAlpha=0,this.depthFunc=zp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=lP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zd,this.stencilZFail=Zd,this.stencilZPass=Zd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Sp&&(r.blending=this.blending),this.side!==bu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==yE&&(r.blendSrc=this.blendSrc),this.blendDst!==_E&&(r.blendDst=this.blendDst),this.blendEquation!==sf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==zp&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==lP&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Zd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Zd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class oa extends Ji{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ha,this.combine=xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Tc=x0e();function x0e(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Io(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=yn(n,-65504,65504),Tc.floatView[0]=n;const e=Tc.uint32View[0],t=e>>23&511;return Tc.baseTable[t]+((e&8388607)>>Tc.shiftTable[t])}function C0(n){const e=n>>10;return Tc.uint32View[0]=Tc.mantissaTable[Tc.offsetTable[e]+(n&1023)]+Tc.exponentTable[e],Tc.floatView[0]}const w0e={toHalfFloat:Io,fromHalfFloat:C0},Ri=new pe,c1=new Ze;class Yn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=O_,this.updateRanges=[],this.gpuType=Lo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)c1.fromBufferAttribute(this,t),c1.applyMatrix3(e),this.setXY(t,c1.x,c1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix3(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ri.fromBufferAttribute(this,t),Ri.applyMatrix4(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ri.fromBufferAttribute(this,t),Ri.applyNormalMatrix(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ri.fromBufferAttribute(this,t),Ri.transformDirection(e),this.setXYZ(t,Ri.x,Ri.y,Ri.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=go(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Cn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=go(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=go(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=go(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=go(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array),s=Cn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==O_&&(e.usage=this.usage),e}}class b0e extends Yn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class E0e extends Yn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class A0e extends Yn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class S0e extends Yn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class a3 extends Yn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class T0e extends Yn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class l3 extends Yn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class C0e extends Yn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=C0(this.array[e*this.itemSize]);return this.normalized&&(t=go(t,this.array)),t}setX(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize]=Io(t),this}getY(e){let t=C0(this.array[e*this.itemSize+1]);return this.normalized&&(t=go(t,this.array)),t}setY(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+1]=Io(t),this}getZ(e){let t=C0(this.array[e*this.itemSize+2]);return this.normalized&&(t=go(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+2]=Io(t),this}getW(e){let t=C0(this.array[e*this.itemSize+3]);return this.normalized&&(t=go(t,this.array)),t}setW(e,t){return this.normalized&&(t=Cn(t,this.array)),this.array[e*this.itemSize+3]=Io(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(r),this.array[e+2]=Io(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array),s=Cn(s,this.array)),this.array[e+0]=Io(t),this.array[e+1]=Io(r),this.array[e+2]=Io(i),this.array[e+3]=Io(s),this}}class Ut extends Yn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let M0e=0;const Ra=new Yt,ZC=new Bn,gg=new pe,Zo=new $s,Zy=new $s,us=new pe;class En extends Mu{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:M0e++}),this.uuid=ca(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Wq(e)?l3:a3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new bn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ra.makeRotationFromQuaternion(e),this.applyMatrix4(Ra),this}rotateX(e){return Ra.makeRotationX(e),this.applyMatrix4(Ra),this}rotateY(e){return Ra.makeRotationY(e),this.applyMatrix4(Ra),this}rotateZ(e){return Ra.makeRotationZ(e),this.applyMatrix4(Ra),this}translate(e,t,r){return Ra.makeTranslation(e,t,r),this.applyMatrix4(Ra),this}scale(e,t,r){return Ra.makeScale(e,t,r),this.applyMatrix4(Ra),this}lookAt(e){return ZC.lookAt(e),ZC.updateMatrix(),this.applyMatrix4(ZC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gg).negate(),this.translate(gg.x,gg.y,gg.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ut(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Zo.setFromBufferAttribute(s),this.morphTargetsRelative?(us.addVectors(this.boundingBox.min,Zo.min),this.boundingBox.expandByPoint(us),us.addVectors(this.boundingBox.max,Zo.max),this.boundingBox.expandByPoint(us)):(this.boundingBox.expandByPoint(Zo.min),this.boundingBox.expandByPoint(Zo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const r=this.boundingSphere.center;if(Zo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Zy.setFromBufferAttribute(a),this.morphTargetsRelative?(us.addVectors(Zo.min,Zy.min),Zo.expandByPoint(us),us.addVectors(Zo.max,Zy.max),Zo.expandByPoint(us)):(Zo.expandByPoint(Zy.min),Zo.expandByPoint(Zy.max))}Zo.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)us.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(us));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)us.fromBufferAttribute(a,u),l&&(gg.fromBufferAttribute(e,u),us.add(gg)),i=Math.max(i,r.distanceToSquared(us))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Yn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<r.count;P++)a[P]=new pe,l[P]=new pe;const u=new pe,c=new pe,h=new pe,f=new Ze,p=new Ze,g=new Ze,x=new pe,_=new pe;function v(P,O,R){u.fromBufferAttribute(r,P),c.fromBufferAttribute(r,O),h.fromBufferAttribute(r,R),f.fromBufferAttribute(s,P),p.fromBufferAttribute(s,O),g.fromBufferAttribute(s,R),c.sub(u),h.sub(u),p.sub(f),g.sub(f);const N=1/(p.x*g.y-g.x*p.y);isFinite(N)&&(x.copy(c).multiplyScalar(g.y).addScaledVector(h,-p.y).multiplyScalar(N),_.copy(h).multiplyScalar(p.x).addScaledVector(c,-g.x).multiplyScalar(N),a[P].add(x),a[O].add(x),a[R].add(x),l[P].add(_),l[O].add(_),l[R].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let P=0,O=b.length;P<O;++P){const R=b[P],N=R.start,U=R.count;for(let F=N,J=N+U;F<J;F+=3)v(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const E=new pe,S=new pe,C=new pe,D=new pe;function M(P){C.fromBufferAttribute(i,P),D.copy(C);const O=a[P];E.copy(O),E.sub(C.multiplyScalar(C.dot(O))).normalize(),S.crossVectors(D,O);const N=S.dot(l[P])<0?-1:1;o.setXYZW(P,E.x,E.y,E.z,N)}for(let P=0,O=b.length;P<O;++P){const R=b[P],N=R.start,U=R.count;for(let F=N,J=N+U;F<J;F+=3)M(e.getX(F+0)),M(e.getX(F+1)),M(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Yn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,p=r.count;f<p;f++)r.setXYZ(f,0,0,0);const i=new pe,s=new pe,o=new pe,a=new pe,l=new pe,u=new pe,c=new pe,h=new pe;if(e)for(let f=0,p=e.count;f<p;f+=3){const g=e.getX(f+0),x=e.getX(f+1),_=e.getX(f+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,x),o.fromBufferAttribute(t,_),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,_),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let f=0,p=t.count;f<p;f+=3)i.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)us.fromBufferAttribute(e,t),us.normalize(),e.setXYZ(t,us.x,us.y,us.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let p=0,g=0;for(let x=0,_=l.length;x<_;x++){a.isInterleavedBufferAttribute?p=l[x]*a.data.stride+a.offset:p=l[x]*c;for(let v=0;v<c;v++)f[g++]=u[p++]}return new Yn(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new En,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],p=e(f,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const p=u[h];c.push(p.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let f=0,p=h.length;f<p;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const jU=new Yt,Od=new Jv,h1=new Ts,VU=new pe,f1=new pe,d1=new pe,p1=new pe,eM=new pe,m1=new pe,zU=new pe,g1=new pe;class yi extends Bn{constructor(e=new En,t=new oa){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){m1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(eM.fromBufferAttribute(h,e),o?m1.addScaledVector(eM,c):m1.addScaledVector(eM.sub(t),c))}t.add(m1)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),h1.copy(r.boundingSphere),h1.applyMatrix4(s),Od.copy(e.ray).recast(e.near),!(h1.containsPoint(Od.origin)===!1&&(Od.intersectSphere(h1,VU)===null||Od.origin.distanceToSquared(VU)>(e.far-e.near)**2))&&(jU.copy(s).invert(),Od.copy(e.ray).applyMatrix4(jU),!(r.boundingBox!==null&&Od.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Od)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,f=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,x=f.length;g<x;g++){const _=f[g],v=o[_.materialIndex],b=Math.max(_.start,p.start),E=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let S=b,C=E;S<C;S+=3){const D=a.getX(S),M=a.getX(S+1),P=a.getX(S+2);i=v1(this,v,e,r,u,c,h,D,M,P),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),x=Math.min(a.count,p.start+p.count);for(let _=g,v=x;_<v;_+=3){const b=a.getX(_),E=a.getX(_+1),S=a.getX(_+2);i=v1(this,o,e,r,u,c,h,b,E,S),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,x=f.length;g<x;g++){const _=f[g],v=o[_.materialIndex],b=Math.max(_.start,p.start),E=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let S=b,C=E;S<C;S+=3){const D=S,M=S+1,P=S+2;i=v1(this,v,e,r,u,c,h,D,M,P),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),x=Math.min(l.count,p.start+p.count);for(let _=g,v=x;_<v;_+=3){const b=_,E=_+1,S=_+2;i=v1(this,o,e,r,u,c,h,b,E,S),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function R0e(n,e,t,r,i,s,o,a){let l;if(e.side===yo?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===bu,a),l===null)return null;g1.copy(a),g1.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(g1);return u<t.near||u>t.far?null:{distance:u,point:g1.clone(),object:n}}function v1(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,f1),n.getVertexPosition(l,d1),n.getVertexPosition(u,p1);const c=R0e(n,e,t,r,f1,d1,p1,zU);if(c){const h=new pe;Do.getBarycoord(zU,f1,d1,p1,h),i&&(c.uv=Do.getInterpolatedAttribute(i,a,l,u,h,new Ze)),s&&(c.uv1=Do.getInterpolatedAttribute(s,a,l,u,h,new Ze)),o&&(c.normal=Do.getInterpolatedAttribute(o,a,l,u,h,new pe),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new pe,materialIndex:0};Do.getNormal(f1,d1,p1,f.normal),c.face=f,c.barycoord=h}return c}class hm extends En{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let f=0,p=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ut(u,3)),this.setAttribute("normal",new Ut(c,3)),this.setAttribute("uv",new Ut(h,2));function g(x,_,v,b,E,S,C,D,M,P,O){const R=S/M,N=C/P,U=S/2,F=C/2,J=D/2,Z=M+1,oe=P+1;let ae=0,Q=0;const ee=new pe;for(let Y=0;Y<oe;Y++){const V=Y*N-F;for(let X=0;X<Z;X++){const re=X*R-U;ee[x]=re*b,ee[_]=V*E,ee[v]=J,u.push(ee.x,ee.y,ee.z),ee[x]=0,ee[_]=0,ee[v]=D>0?1:-1,c.push(ee.x,ee.y,ee.z),h.push(X/M),h.push(1-Y/P),ae+=1}}for(let Y=0;Y<P;Y++)for(let V=0;V<M;V++){const X=f+V+Z*Y,re=f+V+Z*(Y+1),se=f+(V+1)+Z*(Y+1),he=f+(V+1)+Z*Y;l.push(X,re,he),l.push(re,se,he),Q+=6}a.addGroup(p,Q,O),p+=Q,f+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ev(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function po(n){const e={};for(let t=0;t<n.length;t++){const r=Ev(n[t]);for(const i in r)e[i]=r[i]}return e}function I0e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Xq(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Wn.workingColorSpace}const Yq={clone:Ev,merge:po};var P0e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,k0e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Nl extends Ji{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=P0e,this.fragmentShader=k0e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ev(e.uniforms),this.uniformsGroups=I0e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Ex extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yt,this.projectionMatrix=new Yt,this.projectionMatrixInverse=new Yt,this.coordinateSystem=Ml}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Hh=new pe,HU=new Ze,GU=new Ze;class Wi extends Ex{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=bv*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Cp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return bv*2*Math.atan(Math.tan(Cp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Hh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Hh.x,Hh.y).multiplyScalar(-e/Hh.z),Hh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Hh.x,Hh.y).multiplyScalar(-e/Hh.z)}getViewSize(e,t){return this.getViewBounds(e,HU,GU),t.subVectors(GU,HU)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Cp*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const vg=-90,yg=1;class Qq extends Bn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Wi(vg,yg,e,t);i.layers=this.layers,this.add(i);const s=new Wi(vg,yg,e,t);s.layers=this.layers,this.add(s);const o=new Wi(vg,yg,e,t);o.layers=this.layers,this.add(o);const a=new Wi(vg,yg,e,t);a.layers=this.layers,this.add(a);const l=new Wi(vg,yg,e,t);l.layers=this.layers,this.add(l);const u=new Wi(vg,yg,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ml)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===D_)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const x=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=x,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(h,f,p),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class Ax extends Br{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:$c,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Zq extends Eu{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Ax(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new hm(5,5,5),s=new Nl({name:"CubemapFromEquirect",uniforms:Ev(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:yo,blending:Nc});s.uniforms.tEquirect.value=t;const o=new yi(i,s),a=t.minFilter;return t.minFilter===La&&(t.minFilter=vi),new Qq(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class bS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new bt(e),this.density=t}clone(){return new bS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ES{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new bt(e),this.near=t,this.far=r}clone(){return new ES(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class u3 extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ha,this.environmentIntensity=1,this.environmentRotation=new ha,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Sx{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=O_,this.updateRanges=[],this.version=0,this.uuid=ca()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ca()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fo=new pe;class Pf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.applyMatrix4(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.applyNormalMatrix(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)fo.fromBufferAttribute(this,t),fo.transformDirection(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=go(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Cn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Cn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=go(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=go(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=go(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=go(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Cn(t,this.array),r=Cn(r,this.array),i=Cn(i,this.array),s=Cn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class c3 extends Ji{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let _g;const e0=new pe,xg=new pe,wg=new pe,bg=new Ze,t0=new Ze,eW=new Yt,y1=new pe,n0=new pe,_1=new pe,qU=new Ze,tM=new Ze,WU=new Ze;class tW extends Bn{constructor(e=new c3){if(super(),this.isSprite=!0,this.type="Sprite",_g===void 0){_g=new En;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Sx(t,5);_g.setIndex([0,1,2,0,2,3]),_g.setAttribute("position",new Pf(r,3,0,!1)),_g.setAttribute("uv",new Pf(r,2,3,!1))}this.geometry=_g,this.material=e,this.center=new Ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xg.setFromMatrixScale(this.matrixWorld),eW.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xg.multiplyScalar(-wg.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;x1(y1.set(-.5,-.5,0),wg,o,xg,i,s),x1(n0.set(.5,-.5,0),wg,o,xg,i,s),x1(_1.set(.5,.5,0),wg,o,xg,i,s),qU.set(0,0),tM.set(1,0),WU.set(1,1);let a=e.ray.intersectTriangle(y1,n0,_1,!1,e0);if(a===null&&(x1(n0.set(-.5,.5,0),wg,o,xg,i,s),tM.set(0,1),a=e.ray.intersectTriangle(y1,_1,n0,!1,e0),a===null))return;const l=e.ray.origin.distanceTo(e0);l<e.near||l>e.far||t.push({distance:l,point:e0.clone(),uv:Do.getInterpolation(e0,y1,n0,_1,qU,tM,WU,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function x1(n,e,t,r,i,s){bg.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(t0.x=s*bg.x-i*bg.y,t0.y=i*bg.x+s*bg.y):t0.copy(bg),n.copy(e),n.x+=t0.x,n.y+=t0.y,n.applyMatrix4(eW)}const w1=new pe,$U=new pe;class nW extends Bn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){w1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(w1);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){w1.setFromMatrixPosition(e.matrixWorld),$U.setFromMatrixPosition(this.matrixWorld);const r=w1.distanceTo($U)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const KU=new pe,JU=new Xn,XU=new Xn,O0e=new pe,YU=new Yt,b1=new pe,nM=new Ts,QU=new Yt,rM=new Jv;class h3 extends yi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=aP,this.bindMatrix=new Yt,this.bindMatrixInverse=new Yt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new $s),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,b1),this.boundingBox.expandByPoint(b1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,b1),this.boundingSphere.expandByPoint(b1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nM.copy(this.boundingSphere),nM.applyMatrix4(i),e.ray.intersectsSphere(nM)!==!1&&(QU.copy(i).invert(),rM.copy(e.ray).applyMatrix4(QU),!(this.boundingBox!==null&&rM.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,rM)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Xn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===aP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Iq?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;JU.fromBufferAttribute(i.attributes.skinIndex,e),XU.fromBufferAttribute(i.attributes.skinWeight,e),KU.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=XU.getComponent(s);if(o!==0){const a=JU.getComponent(s);YU.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(O0e.copy(KU).applyMatrix4(YU),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class AS extends Bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class vu extends Br{constructor(e=null,t=1,r=1,i,s,o,a,l,u=hs,c=hs,h,f){super(null,o,a,l,u,c,i,s,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ZU=new Yt,D0e=new Yt;class Tx{constructor(e=[],t=[]){this.uuid=ca(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Yt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Yt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:D0e;ZU.multiplyMatrices(a,t[s]),ZU.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Tx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new vu(t,e,e,qs,Lo);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new AS),this.bones.push(o),this.boneInverses.push(new Yt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Wp extends Yn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Eg=new Yt,e4=new Yt,E1=[],t4=new $s,N0e=new Yt,r0=new yi,i0=new Ts;class f3 extends yi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wp(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,N0e)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new $s),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Eg),t4.copy(e.boundingBox).applyMatrix4(Eg),this.boundingBox.union(t4)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Eg),i0.copy(e.boundingSphere).applyMatrix4(Eg),this.boundingSphere.union(i0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(r0.geometry=this.geometry,r0.material=this.material,r0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),i0.copy(this.boundingSphere),i0.applyMatrix4(r),e.ray.intersectsSphere(i0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Eg),e4.multiplyMatrices(r,Eg),r0.matrixWorld=e4,r0.raycast(e,E1);for(let o=0,a=E1.length;o<a;o++){const l=E1[o];l.instanceId=s,l.object=this,t.push(l)}E1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new vu(new Float32Array(i*this.count),i,this.count,gS,Lo));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<r.length;u++)o+=r[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const iM=new pe,L0e=new pe,B0e=new bn;class Yh{constructor(e=new pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=iM.subVectors(r,t).cross(L0e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(iM),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||B0e.getNormalMatrix(e),i=this.coplanarPoint(iM).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Dd=new Ts,A1=new pe;class Cx{constructor(e=new Yh,t=new Yh,r=new Yh,i=new Yh,s=new Yh,o=new Yh){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Ml){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],p=i[8],g=i[9],x=i[10],_=i[11],v=i[12],b=i[13],E=i[14],S=i[15];if(r[0].setComponents(l-s,f-u,_-p,S-v).normalize(),r[1].setComponents(l+s,f+u,_+p,S+v).normalize(),r[2].setComponents(l+o,f+c,_+g,S+b).normalize(),r[3].setComponents(l-o,f-c,_-g,S-b).normalize(),r[4].setComponents(l-a,f-h,_-x,S-E).normalize(),t===Ml)r[5].setComponents(l+a,f+h,_+x,S+E).normalize();else if(t===D_)r[5].setComponents(a,h,x,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Dd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Dd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Dd)}intersectsSprite(e){return Dd.center.set(0,0,0),Dd.radius=.7071067811865476,Dd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Dd)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(A1.x=i.normal.x>0?e.max.x:e.min.x,A1.y=i.normal.y>0?e.max.y:e.min.y,A1.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(A1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function sM(n,e){return n-e}function F0e(n,e){return n.z-e.z}function U0e(n,e){return e.z-n.z}class j0e{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Mo=new Yt,V0e=new bt(1,1,1),oM=new Cx,S1=new $s,Nd=new Ts,s0=new pe,n4=new pe,z0e=new pe,aM=new j0e,Us=new yi,T1=[];function H0e(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function Ld(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class rW extends yi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,r=t*2,i){super(new En,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new vu(t,e,e,qs,Lo);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new vu(t,e,e,wx,Kc);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new vu(t,e,e,qs,Lo);r.colorSpace=Wn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(r*l),h=new Yn(c,l,u);t.setAttribute(s,h)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Yn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new $s);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Mo),this.getBoundingBoxAt(s,S1).applyMatrix4(Mo),e.union(S1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Mo),this.getBoundingSphereAt(s,Nd).applyMatrix4(Mo),e.union(Nd)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(sM),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Mo.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(V0e.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(sM),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in r.attributes){const h=t.getAttribute(c),f=r.getAttribute(c);H0e(h,f,l);const p=h.itemSize;for(let g=h.count,x=u;g<x;g++){const _=l+g;for(let v=0;v<p;v++)f.setComponent(_,v,0)}f.needsUpdate=!0,f.addUpdateRange(l*p,u*p)}if(i){const c=a.indexStart,h=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let f=0;f<o.count;f++)s.setX(c+f,l+o.getX(f));for(let f=o.count,p=h;f<p;f++)s.setX(c+f,l);s.needsUpdate=!0,s.addUpdateRange(c,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],u=r[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:h,reservedIndexCount:f}=u,p=s.index,g=p.array,x=e-h;for(let _=c;_<c+f;_++)g[_]=g[_]+x;p.array.copyWithin(t,c,c+f),p.addUpdateRange(t,f),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:h}=u,f=s.attributes;for(const p in f){const g=f[p],{array:x,itemSize:_}=g;x.copyWithin(e*_,c*_,(c+h)*_),g.addUpdateRange(e*_,h*_)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new $s,o=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let c=l;o&&(c=o.getX(c)),s.expandByPoint(s0.fromBufferAttribute(a,c))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new Ts;this.getBoundingBoxAt(e,S1),S1.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let u=i.start,c=i.start+i.count;u<c;u++){let h=u;o&&(h=o.getX(h)),s0.fromBufferAttribute(a,h),l=Math.max(l,s.center.distanceToSquared(s0))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(sM);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Ld(this._multiDrawCounts,i),Ld(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Ld(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Ld(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Ld(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new En,this._initializeGeometry(s));const o=this.geometry;s.index&&Ld(s.index.array,o.index.array);for(const a in s.attributes)Ld(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Us.material=this.material,Us.geometry.index=o.index,Us.geometry.attributes=o.attributes,Us.geometry.boundingBox===null&&(Us.geometry.boundingBox=new $s),Us.geometry.boundingSphere===null&&(Us.geometry.boundingSphere=new Ts);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,c=i[u];Us.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Us.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Us.geometry.boundingBox),this.getBoundingSphereAt(u,Us.geometry.boundingSphere),Us.raycast(e,T1);for(let h=0,f=T1.length;h<f;h++){const p=T1[h];p.object=this,p.batchId=a,t.push(p)}T1.length=0}Us.material=null,Us.geometry.index=null,Us.geometry.attributes={},Us.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,h=this._geometryInfo,f=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data;f&&(Mo.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),oM.setFromProjectionMatrix(Mo,e.coordinateSystem));let x=0;if(this.sortObjects){Mo.copy(this.matrixWorld).invert(),s0.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Mo),n4.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Mo);for(let b=0,E=l.length;b<E;b++)if(l[b].visible&&l[b].active){const S=l[b].geometryIndex;this.getMatrixAt(b,Mo),this.getBoundingSphereAt(S,Nd).applyMatrix4(Mo);let C=!1;if(f&&(C=!oM.intersectsSphere(Nd)),!C){const D=h[S],M=z0e.subVectors(Nd.center,s0).dot(n4);aM.push(D.start,D.count,M,b)}}const _=aM.list,v=this.customSort;v===null?_.sort(s.transparent?U0e:F0e):v.call(this,_,r);for(let b=0,E=_.length;b<E;b++){const S=_[b];u[x]=S.start*a,c[x]=S.count,g[x]=S.index,x++}aM.reset()}else for(let _=0,v=l.length;_<v;_++)if(l[_].visible&&l[_].active){const b=l[_].geometryIndex;let E=!1;if(f&&(this.getMatrixAt(_,Mo),this.getBoundingSphereAt(b,Nd).applyMatrix4(Mo),E=!oM.intersectsSphere(Nd)),!E){const S=h[b];u[x]=S.start*a,c[x]=S.count,g[x]=_,x++}}p.needsUpdate=!0,this._multiDrawCount=x,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Xs extends Ji{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eA=new pe,tA=new pe,r4=new Yt,o0=new Jv,C1=new Ts,lM=new pe,i4=new pe;class Jc extends Bn{constructor(e=new En,t=new Xs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)eA.fromBufferAttribute(t,i-1),tA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=eA.distanceTo(tA);e.setAttribute("lineDistance",new Ut(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),C1.copy(r.boundingSphere),C1.applyMatrix4(i),C1.radius+=s,e.ray.intersectsSphere(C1)===!1)return;r4.copy(i).invert(),o0.copy(e.ray).applyMatrix4(r4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=r.index,f=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=p,_=g-1;x<_;x+=u){const v=c.getX(x),b=c.getX(x+1),E=M1(this,e,o0,l,v,b);E&&t.push(E)}if(this.isLineLoop){const x=c.getX(g-1),_=c.getX(p),v=M1(this,e,o0,l,x,_);v&&t.push(v)}}else{const p=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let x=p,_=g-1;x<_;x+=u){const v=M1(this,e,o0,l,x,x+1);v&&t.push(v)}if(this.isLineLoop){const x=M1(this,e,o0,l,g-1,p);x&&t.push(x)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function M1(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(eA.fromBufferAttribute(o,i),tA.fromBufferAttribute(o,s),t.distanceSqToSegment(eA,tA,lM,i4)>r)return;lM.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(lM);if(!(l<e.near||l>e.far))return{distance:l,point:i4.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}const s4=new pe,o4=new pe;class Ul extends Jc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)s4.fromBufferAttribute(t,i),o4.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+s4.distanceTo(o4);e.setAttribute("lineDistance",new Ut(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class d3 extends Jc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class SS extends Ji{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const a4=new Yt,cP=new Jv,R1=new Ts,I1=new pe;class p3 extends Bn{constructor(e=new En,t=new SS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),R1.copy(r.boundingSphere),R1.applyMatrix4(i),R1.radius+=s,e.ray.intersectsSphere(R1)===!1)return;a4.copy(i).invert(),cP.copy(e.ray).applyMatrix4(a4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=f,x=p;g<x;g++){const _=u.getX(g);I1.fromBufferAttribute(h,_),l4(I1,_,l,i,e,t,this)}}else{const f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let g=f,x=p;g<x;g++)I1.fromBufferAttribute(h,g),l4(I1,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function l4(n,e,t,r,i,s,o){const a=cP.distanceSqToPoint(n);if(a<t){const l=new pe;cP.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Rc extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class G0e extends Br{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:vi,this.magFilter=s!==void 0?s:vi,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class q0e extends Br{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=hs,this.minFilter=hs,this.generateMipmaps=!1,this.needsUpdate=!0}}class TS extends Br{constructor(e,t,r,i,s,o,a,l,u,c,h,f){super(null,o,a,l,u,c,i,s,h,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class W0e extends TS{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=sa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $0e extends TS{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,$c),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class K0e extends Br{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class m3 extends Br{constructor(e,t,r,i,s,o,a,l,u,c=Tp){if(c!==Tp&&c!==Gp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Tp&&(r=Kc),r===void 0&&c===Gp&&(r=Hp),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:hs,this.minFilter=l!==void 0?l:hs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class jl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],f=r[i+1]-c,p=(o-c)/f;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ze:new pe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new pe,i=[],s=[],o=[],a=new pe,l=new Yt;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new pe)}s[0]=new pe,o[0]=new pe;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(yn(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(yn(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class CS extends jl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ze){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,p=u-this.aY;l=f*c-p*h+this.aX,u=f*h+p*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class iW extends CS{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function g3(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,h){let f=(o-s)/u-(a-s)/(u+c)+(a-o)/c,p=(a-o)/c-(l-o)/(c+h)+(l-a)/h;f*=c,p*=c,i(o,a,f,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const P1=new pe,uM=new g3,cM=new g3,hM=new g3;class sW extends jl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new pe){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(P1.subVectors(i[0],i[1]).add(i[0]),u=P1);const h=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(P1.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=P1),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(h),p),x=Math.pow(h.distanceToSquared(f),p),_=Math.pow(f.distanceToSquared(c),p);x<1e-4&&(x=1),g<1e-4&&(g=x),_<1e-4&&(_=x),uM.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,g,x,_),cM.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,g,x,_),hM.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,g,x,_)}else this.curveType==="catmullrom"&&(uM.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),cM.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),hM.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(uM.calc(l),cM.calc(l),hM.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function u4(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function J0e(n,e){const t=1-n;return t*t*e}function X0e(n,e){return 2*(1-n)*n*e}function Y0e(n,e){return n*n*e}function r_(n,e,t,r){return J0e(n,e)+X0e(n,t)+Y0e(n,r)}function Q0e(n,e){const t=1-n;return t*t*t*e}function Z0e(n,e){const t=1-n;return 3*t*t*n*e}function e_e(n,e){return 3*(1-n)*n*n*e}function t_e(n,e){return n*n*n*e}function i_(n,e,t,r,i){return Q0e(n,e)+Z0e(n,t)+e_e(n,r)+t_e(n,i)}class v3 extends jl{constructor(e=new Ze,t=new Ze,r=new Ze,i=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(i_(e,i.x,s.x,o.x,a.x),i_(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class oW extends jl{constructor(e=new pe,t=new pe,r=new pe,i=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new pe){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(i_(e,i.x,s.x,o.x,a.x),i_(e,i.y,s.y,o.y,a.y),i_(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class y3 extends jl{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aW extends jl{constructor(e=new pe,t=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new pe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _3 extends jl{constructor(e=new Ze,t=new Ze,r=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(r_(e,i.x,s.x,o.x),r_(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class x3 extends jl{constructor(e=new pe,t=new pe,r=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new pe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(r_(e,i.x,s.x,o.x),r_(e,i.y,s.y,o.y),r_(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class w3 extends jl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(u4(a,l.x,u.x,c.x,h.x),u4(a,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ze().fromArray(i))}return this}}var nA=Object.freeze({__proto__:null,ArcCurve:iW,CatmullRomCurve3:sW,CubicBezierCurve:v3,CubicBezierCurve3:oW,EllipseCurve:CS,LineCurve:y3,LineCurve3:aW,QuadraticBezierCurve:_3,QuadraticBezierCurve3:x3,SplineCurve:w3});class lW extends jl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nA[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new nA[i.type]().fromJSON(i))}return this}}class L_ extends lW{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new y3(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new _3(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new v3(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i),new Ze(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new w3(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new CS(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Mx extends En{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=yn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,h=new pe,f=new Ze,p=new pe,g=new pe,x=new pe;let _=0,v=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:_=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,p.x=v*1,p.y=-_,p.z=v*0,x.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:_=e[b+1].x-e[b].x,v=e[b+1].y-e[b].y,p.x=v*1,p.y=-_,p.z=v*0,g.copy(p),p.x+=x.x,p.y+=x.y,p.z+=x.z,p.normalize(),l.push(p.x,p.y,p.z),x.copy(g)}for(let b=0;b<=t;b++){const E=r+b*c*i,S=Math.sin(E),C=Math.cos(E);for(let D=0;D<=e.length-1;D++){h.x=e[D].x*S,h.y=e[D].y,h.z=e[D].x*C,o.push(h.x,h.y,h.z),f.x=b/t,f.y=D/(e.length-1),a.push(f.x,f.y);const M=l[3*D+0]*S,P=l[3*D+1],O=l[3*D+0]*C;u.push(M,P,O)}}for(let b=0;b<t;b++)for(let E=0;E<e.length-1;E++){const S=E+b*e.length,C=S,D=S+e.length,M=S+e.length+1,P=S+1;s.push(C,D,P),s.push(M,P,D)}this.setIndex(s),this.setAttribute("position",new Ut(o,3)),this.setAttribute("uv",new Ut(a,2)),this.setAttribute("normal",new Ut(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mx(e.points,e.segments,e.phiStart,e.phiLength)}}class MS extends Mx{constructor(e=1,t=1,r=4,i=8){const s=new L_;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new MS(e.radius,e.length,e.capSegments,e.radialSegments)}}class RS extends En{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new pe,c=new Ze;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const p=r+h/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[f]/e+1)/2,c.y=(o[f+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new Ut(o,3)),this.setAttribute("normal",new Ut(a,3)),this.setAttribute("uv",new Ut(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xv extends En{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],h=[],f=[],p=[];let g=0;const x=[],_=r/2;let v=0;b(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(c),this.setAttribute("position",new Ut(h,3)),this.setAttribute("normal",new Ut(f,3)),this.setAttribute("uv",new Ut(p,2));function b(){const S=new pe,C=new pe;let D=0;const M=(t-e)/r;for(let P=0;P<=s;P++){const O=[],R=P/s,N=R*(t-e)+e;for(let U=0;U<=i;U++){const F=U/i,J=F*l+a,Z=Math.sin(J),oe=Math.cos(J);C.x=N*Z,C.y=-R*r+_,C.z=N*oe,h.push(C.x,C.y,C.z),S.set(Z,M,oe).normalize(),f.push(S.x,S.y,S.z),p.push(F,1-R),O.push(g++)}x.push(O)}for(let P=0;P<i;P++)for(let O=0;O<s;O++){const R=x[O][P],N=x[O+1][P],U=x[O+1][P+1],F=x[O][P+1];(e>0||O!==0)&&(c.push(R,N,F),D+=3),(t>0||O!==s-1)&&(c.push(N,U,F),D+=3)}u.addGroup(v,D,0),v+=D}function E(S){const C=g,D=new Ze,M=new pe;let P=0;const O=S===!0?e:t,R=S===!0?1:-1;for(let U=1;U<=i;U++)h.push(0,_*R,0),f.push(0,R,0),p.push(.5,.5),g++;const N=g;for(let U=0;U<=i;U++){const J=U/i*l+a,Z=Math.cos(J),oe=Math.sin(J);M.x=O*oe,M.y=_*R,M.z=O*Z,h.push(M.x,M.y,M.z),f.push(0,R,0),D.x=Z*.5+.5,D.y=oe*.5*R+.5,p.push(D.x,D.y),g++}for(let U=0;U<i;U++){const F=C+U,J=N+U;S===!0?c.push(J,J+1,F):c.push(J+1,J,F),P+=3}u.addGroup(v,P,S===!0?1:2),v+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class IS extends Xv{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new IS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zf extends En{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Ut(s,3)),this.setAttribute("normal",new Ut(s.slice(),3)),this.setAttribute("uv",new Ut(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const E=new pe,S=new pe,C=new pe;for(let D=0;D<t.length;D+=3)p(t[D+0],E),p(t[D+1],S),p(t[D+2],C),l(E,S,C,b)}function l(b,E,S,C){const D=C+1,M=[];for(let P=0;P<=D;P++){M[P]=[];const O=b.clone().lerp(S,P/D),R=E.clone().lerp(S,P/D),N=D-P;for(let U=0;U<=N;U++)U===0&&P===D?M[P][U]=O:M[P][U]=O.clone().lerp(R,U/N)}for(let P=0;P<D;P++)for(let O=0;O<2*(D-P)-1;O++){const R=Math.floor(O/2);O%2===0?(f(M[P][R+1]),f(M[P+1][R]),f(M[P][R])):(f(M[P][R+1]),f(M[P+1][R+1]),f(M[P+1][R]))}}function u(b){const E=new pe;for(let S=0;S<s.length;S+=3)E.x=s[S+0],E.y=s[S+1],E.z=s[S+2],E.normalize().multiplyScalar(b),s[S+0]=E.x,s[S+1]=E.y,s[S+2]=E.z}function c(){const b=new pe;for(let E=0;E<s.length;E+=3){b.x=s[E+0],b.y=s[E+1],b.z=s[E+2];const S=_(b)/2/Math.PI+.5,C=v(b)/Math.PI+.5;o.push(S,1-C)}g(),h()}function h(){for(let b=0;b<o.length;b+=6){const E=o[b+0],S=o[b+2],C=o[b+4],D=Math.max(E,S,C),M=Math.min(E,S,C);D>.9&&M<.1&&(E<.2&&(o[b+0]+=1),S<.2&&(o[b+2]+=1),C<.2&&(o[b+4]+=1))}}function f(b){s.push(b.x,b.y,b.z)}function p(b,E){const S=b*3;E.x=e[S+0],E.y=e[S+1],E.z=e[S+2]}function g(){const b=new pe,E=new pe,S=new pe,C=new pe,D=new Ze,M=new Ze,P=new Ze;for(let O=0,R=0;O<s.length;O+=9,R+=6){b.set(s[O+0],s[O+1],s[O+2]),E.set(s[O+3],s[O+4],s[O+5]),S.set(s[O+6],s[O+7],s[O+8]),D.set(o[R+0],o[R+1]),M.set(o[R+2],o[R+3]),P.set(o[R+4],o[R+5]),C.copy(b).add(E).add(S).divideScalar(3);const N=_(C);x(D,R+0,b,N),x(M,R+2,E,N),x(P,R+4,S,N)}}function x(b,E,S,C){C<0&&b.x===1&&(o[E]=b.x-1),S.x===0&&S.z===0&&(o[E]=C/2/Math.PI+.5)}function _(b){return Math.atan2(b.z,-b.x)}function v(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zf(e.vertices,e.indices,e.radius,e.details)}}class PS extends zf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new PS(e.radius,e.detail)}}const k1=new pe,O1=new pe,fM=new pe,D1=new Do;class uW extends En{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Cp*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),f={},p=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:x,b:_,c:v}=D1;if(x.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),v.fromBufferAttribute(a,u[2]),D1.getNormal(fM),h[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let b=0;b<3;b++){const E=(b+1)%3,S=h[b],C=h[E],D=D1[c[b]],M=D1[c[E]],P=`${S}_${C}`,O=`${C}_${S}`;O in f&&f[O]?(fM.dot(f[O].normal)<=s&&(p.push(D.x,D.y,D.z),p.push(M.x,M.y,M.z)),f[O]=null):P in f||(f[P]={index0:u[b],index1:u[E],normal:fM.clone()})}}for(const g in f)if(f[g]){const{index0:x,index1:_}=f[g];k1.fromBufferAttribute(a,x),O1.fromBufferAttribute(a,_),p.push(k1.x,k1.y,k1.z),p.push(O1.x,O1.y,O1.z)}this.setAttribute("position",new Ut(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Rp extends L_{constructor(e){super(e),this.uuid=ca(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new L_().fromJSON(i))}return this}}const n_e={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=cW(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,h,f,p;if(r&&(s=a_e(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let g=t;g<i;g+=t)h=n[g],f=n[g+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);p=Math.max(u-a,c-l),p=p!==0?32767/p:0}return B_(s,o,t,a,l,p,0),o}};function cW(n,e,t,r,i){let s,o;if(i===y_e(n,e,t,r)>0)for(s=e;s<t;s+=r)o=c4(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=c4(s,n[s],n[s+1],o);return o&&kS(o,o.next)&&(U_(o),o=o.next),o}function $p(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(kS(t,t.next)||$r(t.prev,t,t.next)===0)){if(U_(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function B_(n,e,t,r,i,s,o){if(!n)return;!o&&s&&f_e(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?i_e(n,r,i,s):r_e(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),U_(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=s_e($p(n),e,t),B_(n,e,t,r,i,s,2)):o===2&&o_e(n,e,t,r,i,s):B_($p(n),e,t,r,i,s,1);break}}}function r_e(n){const e=n.prev,t=n,r=n.next;if($r(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,f=i>s?i>o?i:o:s>o?s:o,p=a>l?a>u?a:u:l>u?l:u;let g=r.next;for(;g!==e;){if(g.x>=c&&g.x<=f&&g.y>=h&&g.y<=p&&Wg(i,a,s,l,o,u,g.x,g.y)&&$r(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function i_e(n,e,t,r){const i=n.prev,s=n,o=n.next;if($r(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,f=o.y,p=a<l?a<u?a:u:l<u?l:u,g=c<h?c<f?c:f:h<f?h:f,x=a>l?a>u?a:u:l>u?l:u,_=c>h?c>f?c:f:h>f?h:f,v=hP(p,g,e,t,r),b=hP(x,_,e,t,r);let E=n.prevZ,S=n.nextZ;for(;E&&E.z>=v&&S&&S.z<=b;){if(E.x>=p&&E.x<=x&&E.y>=g&&E.y<=_&&E!==i&&E!==o&&Wg(a,c,l,h,u,f,E.x,E.y)&&$r(E.prev,E,E.next)>=0||(E=E.prevZ,S.x>=p&&S.x<=x&&S.y>=g&&S.y<=_&&S!==i&&S!==o&&Wg(a,c,l,h,u,f,S.x,S.y)&&$r(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;E&&E.z>=v;){if(E.x>=p&&E.x<=x&&E.y>=g&&E.y<=_&&E!==i&&E!==o&&Wg(a,c,l,h,u,f,E.x,E.y)&&$r(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;S&&S.z<=b;){if(S.x>=p&&S.x<=x&&S.y>=g&&S.y<=_&&S!==i&&S!==o&&Wg(a,c,l,h,u,f,S.x,S.y)&&$r(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function s_e(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!kS(i,s)&&hW(i,r,r.next,s)&&F_(i,s)&&F_(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),U_(r),U_(r.next),r=n=s),r=r.next}while(r!==n);return $p(r)}function o_e(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&m_e(o,a)){let l=fW(o,a);o=$p(o,o.next),l=$p(l,l.next),B_(o,e,t,r,i,s,0),B_(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function a_e(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=cW(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(p_e(u));for(i.sort(l_e),s=0;s<i.length;s++)t=u_e(i[s],t);return t}function l_e(n,e){return n.x-e.x}function u_e(n,e){const t=c_e(n,e);if(!t)return e;const r=fW(t,n);return $p(r,r.next),$p(t,t.next)}function c_e(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>r&&(r=f,i=t.x<t.next.x?t:t.next,f===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,h;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Wg(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),F_(t,n)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&h_e(i,t)))&&(i=t,c=h)),t=t.next;while(t!==a);return i}function h_e(n,e){return $r(n.prev,n,e.prev)<0&&$r(e.next,n,n.next)<0}function f_e(n,e,t,r){let i=n;do i.z===0&&(i.z=hP(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,d_e(i)}function d_e(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function hP(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function p_e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Wg(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function m_e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!g_e(n,e)&&(F_(n,e)&&F_(e,n)&&v_e(n,e)&&($r(n.prev,n,e.prev)||$r(n,e.prev,e))||kS(n,e)&&$r(n.prev,n,n.next)>0&&$r(e.prev,e,e.next)>0)}function $r(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function kS(n,e){return n.x===e.x&&n.y===e.y}function hW(n,e,t,r){const i=L1($r(n,e,t)),s=L1($r(n,e,r)),o=L1($r(t,r,n)),a=L1($r(t,r,e));return!!(i!==s&&o!==a||i===0&&N1(n,t,e)||s===0&&N1(n,r,e)||o===0&&N1(t,n,r)||a===0&&N1(t,e,r))}function N1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function L1(n){return n>0?1:n<0?-1:0}function g_e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hW(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function F_(n,e){return $r(n.prev,n,n.next)<0?$r(n,e,n.next)>=0&&$r(n,n.prev,e)>=0:$r(n,e,n.prev)<0||$r(n,n.next,e)<0}function v_e(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function fW(n,e){const t=new fP(n.i,n.x,n.y),r=new fP(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function c4(n,e,t,r){const i=new fP(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function U_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function fP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y_e(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class yu{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return yu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];h4(e),f4(r,e);let o=e.length;t.forEach(h4);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,f4(r,t[l]);const a=n_e.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function h4(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function f4(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class OS extends En{constructor(e=new Rp([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ut(i,3)),this.setAttribute("uv",new Ut(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,x=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:__e;let E,S=!1,C,D,M,P;v&&(E=v.getSpacedPoints(c),S=!0,f=!1,C=v.computeFrenetFrames(c,!1),D=new pe,M=new pe,P=new pe),f||(_=0,p=0,g=0,x=0);const O=a.extractPoints(u);let R=O.shape;const N=O.holes;if(!yu.isClockWise(R)){R=R.reverse();for(let De=0,Be=N.length;De<Be;De++){const fe=N[De];yu.isClockWise(fe)&&(N[De]=fe.reverse())}}const F=yu.triangulateShape(R,N),J=R;for(let De=0,Be=N.length;De<Be;De++){const fe=N[De];R=R.concat(fe)}function Z(De,Be,fe){return Be||console.error("THREE.ExtrudeGeometry: vec does not exist"),De.clone().addScaledVector(Be,fe)}const oe=R.length,ae=F.length;function Q(De,Be,fe){let it,Je,rt;const we=De.x-Be.x,Ie=De.y-Be.y,Ne=fe.x-De.x,ie=fe.y-De.y,q=we*we+Ie*Ie,me=we*ie-Ie*Ne;if(Math.abs(me)>Number.EPSILON){const de=Math.sqrt(q),ye=Math.sqrt(Ne*Ne+ie*ie),be=Be.x-Ie/de,He=Be.y+we/de,qe=fe.x-ie/ye,lt=fe.y+Ne/ye,vt=((qe-be)*ie-(lt-He)*Ne)/(we*ie-Ie*Ne);it=be+we*vt-De.x,Je=He+Ie*vt-De.y;const Ye=it*it+Je*Je;if(Ye<=2)return new Ze(it,Je);rt=Math.sqrt(Ye/2)}else{let de=!1;we>Number.EPSILON?Ne>Number.EPSILON&&(de=!0):we<-Number.EPSILON?Ne<-Number.EPSILON&&(de=!0):Math.sign(Ie)===Math.sign(ie)&&(de=!0),de?(it=-Ie,Je=we,rt=Math.sqrt(q)):(it=we,Je=Ie,rt=Math.sqrt(q/2))}return new Ze(it/rt,Je/rt)}const ee=[];for(let De=0,Be=J.length,fe=Be-1,it=De+1;De<Be;De++,fe++,it++)fe===Be&&(fe=0),it===Be&&(it=0),ee[De]=Q(J[De],J[fe],J[it]);const Y=[];let V,X=ee.concat();for(let De=0,Be=N.length;De<Be;De++){const fe=N[De];V=[];for(let it=0,Je=fe.length,rt=Je-1,we=it+1;it<Je;it++,rt++,we++)rt===Je&&(rt=0),we===Je&&(we=0),V[it]=Q(fe[it],fe[rt],fe[we]);Y.push(V),X=X.concat(V)}for(let De=0;De<_;De++){const Be=De/_,fe=p*Math.cos(Be*Math.PI/2),it=g*Math.sin(Be*Math.PI/2)+x;for(let Je=0,rt=J.length;Je<rt;Je++){const we=Z(J[Je],ee[Je],it);ce(we.x,we.y,-fe)}for(let Je=0,rt=N.length;Je<rt;Je++){const we=N[Je];V=Y[Je];for(let Ie=0,Ne=we.length;Ie<Ne;Ie++){const ie=Z(we[Ie],V[Ie],it);ce(ie.x,ie.y,-fe)}}}const re=g+x;for(let De=0;De<oe;De++){const Be=f?Z(R[De],X[De],re):R[De];S?(M.copy(C.normals[0]).multiplyScalar(Be.x),D.copy(C.binormals[0]).multiplyScalar(Be.y),P.copy(E[0]).add(M).add(D),ce(P.x,P.y,P.z)):ce(Be.x,Be.y,0)}for(let De=1;De<=c;De++)for(let Be=0;Be<oe;Be++){const fe=f?Z(R[Be],X[Be],re):R[Be];S?(M.copy(C.normals[De]).multiplyScalar(fe.x),D.copy(C.binormals[De]).multiplyScalar(fe.y),P.copy(E[De]).add(M).add(D),ce(P.x,P.y,P.z)):ce(fe.x,fe.y,h/c*De)}for(let De=_-1;De>=0;De--){const Be=De/_,fe=p*Math.cos(Be*Math.PI/2),it=g*Math.sin(Be*Math.PI/2)+x;for(let Je=0,rt=J.length;Je<rt;Je++){const we=Z(J[Je],ee[Je],it);ce(we.x,we.y,h+fe)}for(let Je=0,rt=N.length;Je<rt;Je++){const we=N[Je];V=Y[Je];for(let Ie=0,Ne=we.length;Ie<Ne;Ie++){const ie=Z(we[Ie],V[Ie],it);S?ce(ie.x,ie.y+E[c-1].y,E[c-1].x+fe):ce(ie.x,ie.y,h+fe)}}}se(),he();function se(){const De=i.length/3;if(f){let Be=0,fe=oe*Be;for(let it=0;it<ae;it++){const Je=F[it];ve(Je[2]+fe,Je[1]+fe,Je[0]+fe)}Be=c+_*2,fe=oe*Be;for(let it=0;it<ae;it++){const Je=F[it];ve(Je[0]+fe,Je[1]+fe,Je[2]+fe)}}else{for(let Be=0;Be<ae;Be++){const fe=F[Be];ve(fe[2],fe[1],fe[0])}for(let Be=0;Be<ae;Be++){const fe=F[Be];ve(fe[0]+oe*c,fe[1]+oe*c,fe[2]+oe*c)}}r.addGroup(De,i.length/3-De,0)}function he(){const De=i.length/3;let Be=0;te(J,Be),Be+=J.length;for(let fe=0,it=N.length;fe<it;fe++){const Je=N[fe];te(Je,Be),Be+=Je.length}r.addGroup(De,i.length/3-De,1)}function te(De,Be){let fe=De.length;for(;--fe>=0;){const it=fe;let Je=fe-1;Je<0&&(Je=De.length-1);for(let rt=0,we=c+_*2;rt<we;rt++){const Ie=oe*rt,Ne=oe*(rt+1),ie=Be+it+Ie,q=Be+Je+Ie,me=Be+Je+Ne,de=Be+it+Ne;xe(ie,q,me,de)}}}function ce(De,Be,fe){l.push(De),l.push(Be),l.push(fe)}function ve(De,Be,fe){Te(De),Te(Be),Te(fe);const it=i.length/3,Je=b.generateTopUV(r,i,it-3,it-2,it-1);$e(Je[0]),$e(Je[1]),$e(Je[2])}function xe(De,Be,fe,it){Te(De),Te(Be),Te(it),Te(Be),Te(fe),Te(it);const Je=i.length/3,rt=b.generateSideWallUV(r,i,Je-6,Je-3,Je-2,Je-1);$e(rt[0]),$e(rt[1]),$e(rt[3]),$e(rt[1]),$e(rt[2]),$e(rt[3])}function Te(De){i.push(l[De*3+0]),i.push(l[De*3+1]),i.push(l[De*3+2])}function $e(De){s.push(De.x),s.push(De.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return x_e(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nA[i.type]().fromJSON(i)),new OS(r,e.options)}}const __e={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Ze(s,o),new Ze(a,l),new Ze(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],x=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ze(o,1-l),new Ze(u,1-h),new Ze(f,1-g),new Ze(x,1-v)]:[new Ze(a,1-l),new Ze(c,1-h),new Ze(p,1-g),new Ze(_,1-v)]}};function x_e(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class DS extends zf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DS(e.radius,e.detail)}}class Rx extends zf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rx(e.radius,e.detail)}}class Yv extends En{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,h=e/a,f=t/l,p=[],g=[],x=[],_=[];for(let v=0;v<c;v++){const b=v*f-o;for(let E=0;E<u;E++){const S=E*h-s;g.push(S,-b,0),x.push(0,0,1),_.push(E/a),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let b=0;b<a;b++){const E=b+u*v,S=b+u*(v+1),C=b+1+u*(v+1),D=b+1+u*v;p.push(E,S,D),p.push(S,C,D)}this.setIndex(p),this.setAttribute("position",new Ut(g,3)),this.setAttribute("normal",new Ut(x,3)),this.setAttribute("uv",new Ut(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yv(e.width,e.height,e.widthSegments,e.heightSegments)}}class NS extends En{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let h=e;const f=(t-e)/i,p=new pe,g=new Ze;for(let x=0;x<=i;x++){for(let _=0;_<=r;_++){const v=s+_/r*o;p.x=h*Math.cos(v),p.y=h*Math.sin(v),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,c.push(g.x,g.y)}h+=f}for(let x=0;x<i;x++){const _=x*(r+1);for(let v=0;v<r;v++){const b=v+_,E=b,S=b+r+1,C=b+r+2,D=b+1;a.push(E,S,D),a.push(S,C,D)}}this.setIndex(a),this.setAttribute("position",new Ut(l,3)),this.setAttribute("normal",new Ut(u,3)),this.setAttribute("uv",new Ut(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class LS extends En{constructor(e=new Rp([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Ut(i,3)),this.setAttribute("normal",new Ut(s,3)),this.setAttribute("uv",new Ut(o,2));function u(c){const h=i.length/3,f=c.extractPoints(t);let p=f.shape;const g=f.holes;yu.isClockWise(p)===!1&&(p=p.reverse());for(let _=0,v=g.length;_<v;_++){const b=g[_];yu.isClockWise(b)===!0&&(g[_]=b.reverse())}const x=yu.triangulateShape(p,g);for(let _=0,v=g.length;_<v;_++){const b=g[_];p=p.concat(b)}for(let _=0,v=p.length;_<v;_++){const b=p[_];i.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let _=0,v=x.length;_<v;_++){const b=x[_],E=b[0]+h,S=b[1]+h,C=b[2]+h;r.push(E,S,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return w_e(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new LS(r,e.curveSegments)}}function w_e(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class Ix extends En{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new pe,f=new pe,p=[],g=[],x=[],_=[];for(let v=0;v<=r;v++){const b=[],E=v/r;let S=0;v===0&&o===0?S=.5/t:v===r&&l===Math.PI&&(S=-.5/t);for(let C=0;C<=t;C++){const D=C/t;h.x=-e*Math.cos(i+D*s)*Math.sin(o+E*a),h.y=e*Math.cos(o+E*a),h.z=e*Math.sin(i+D*s)*Math.sin(o+E*a),g.push(h.x,h.y,h.z),f.copy(h).normalize(),x.push(f.x,f.y,f.z),_.push(D+S,1-E),b.push(u++)}c.push(b)}for(let v=0;v<r;v++)for(let b=0;b<t;b++){const E=c[v][b+1],S=c[v][b],C=c[v+1][b],D=c[v+1][b+1];(v!==0||o>0)&&p.push(E,S,D),(v!==r-1||l<Math.PI)&&p.push(S,C,D)}this.setIndex(p),this.setAttribute("position",new Ut(g,3)),this.setAttribute("normal",new Ut(x,3)),this.setAttribute("uv",new Ut(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ix(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class BS extends zf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new BS(e.radius,e.detail)}}class FS extends En{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new pe,h=new pe,f=new pe;for(let p=0;p<=r;p++)for(let g=0;g<=i;g++){const x=g/i*s,_=p/r*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(x),h.y=(e+t*Math.cos(_))*Math.sin(x),h.z=t*Math.sin(_),a.push(h.x,h.y,h.z),c.x=e*Math.cos(x),c.y=e*Math.sin(x),f.subVectors(h,c).normalize(),l.push(f.x,f.y,f.z),u.push(g/i),u.push(p/r)}for(let p=1;p<=r;p++)for(let g=1;g<=i;g++){const x=(i+1)*p+g-1,_=(i+1)*(p-1)+g-1,v=(i+1)*(p-1)+g,b=(i+1)*p+g;o.push(x,_,b),o.push(_,v,b)}this.setIndex(o),this.setAttribute("position",new Ut(a,3)),this.setAttribute("normal",new Ut(l,3)),this.setAttribute("uv",new Ut(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new FS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class US extends En{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],h=new pe,f=new pe,p=new pe,g=new pe,x=new pe,_=new pe,v=new pe;for(let E=0;E<=r;++E){const S=E/r*s*Math.PI*2;b(S,s,o,e,p),b(S+.01,s,o,e,g),_.subVectors(g,p),v.addVectors(g,p),x.crossVectors(_,v),v.crossVectors(x,_),x.normalize(),v.normalize();for(let C=0;C<=i;++C){const D=C/i*Math.PI*2,M=-t*Math.cos(D),P=t*Math.sin(D);h.x=p.x+(M*v.x+P*x.x),h.y=p.y+(M*v.y+P*x.y),h.z=p.z+(M*v.z+P*x.z),l.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),u.push(f.x,f.y,f.z),c.push(E/r),c.push(C/i)}}for(let E=1;E<=r;E++)for(let S=1;S<=i;S++){const C=(i+1)*(E-1)+(S-1),D=(i+1)*E+(S-1),M=(i+1)*E+S,P=(i+1)*(E-1)+S;a.push(C,D,P),a.push(D,M,P)}this.setIndex(a),this.setAttribute("position",new Ut(l,3)),this.setAttribute("normal",new Ut(u,3)),this.setAttribute("uv",new Ut(c,2));function b(E,S,C,D,M){const P=Math.cos(E),O=Math.sin(E),R=C/S*E,N=Math.cos(R);M.x=D*(2+N)*.5*P,M.y=D*(2+N)*O*.5,M.z=D*Math.sin(R)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new US(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class jS extends En{constructor(e=new x3(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new pe,l=new pe,u=new Ze;let c=new pe;const h=[],f=[],p=[],g=[];x(),this.setIndex(g),this.setAttribute("position",new Ut(h,3)),this.setAttribute("normal",new Ut(f,3)),this.setAttribute("uv",new Ut(p,2));function x(){for(let E=0;E<t;E++)_(E);_(s===!1?t:0),b(),v()}function _(E){c=e.getPointAt(E/t,c);const S=o.normals[E],C=o.binormals[E];for(let D=0;D<=i;D++){const M=D/i*Math.PI*2,P=Math.sin(M),O=-Math.cos(M);l.x=O*S.x+P*C.x,l.y=O*S.y+P*C.y,l.z=O*S.z+P*C.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,h.push(a.x,a.y,a.z)}}function v(){for(let E=1;E<=t;E++)for(let S=1;S<=i;S++){const C=(i+1)*(E-1)+(S-1),D=(i+1)*E+(S-1),M=(i+1)*E+S,P=(i+1)*(E-1)+S;g.push(C,D,P),g.push(D,M,P)}}function b(){for(let E=0;E<=t;E++)for(let S=0;S<=i;S++)u.x=E/t,u.y=S/i,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new jS(new nA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class dW extends En{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new pe,s=new pe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,p=h.count;for(let g=f,x=f+p;g<x;g+=3)for(let _=0;_<3;_++){const v=a.getX(g+_),b=a.getX(g+(_+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,b),d4(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,h),d4(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ut(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function d4(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var p4=Object.freeze({__proto__:null,BoxGeometry:hm,CapsuleGeometry:MS,CircleGeometry:RS,ConeGeometry:IS,CylinderGeometry:Xv,DodecahedronGeometry:PS,EdgesGeometry:uW,ExtrudeGeometry:OS,IcosahedronGeometry:DS,LatheGeometry:Mx,OctahedronGeometry:Rx,PlaneGeometry:Yv,PolyhedronGeometry:zf,RingGeometry:NS,ShapeGeometry:LS,SphereGeometry:Ix,TetrahedronGeometry:BS,TorusGeometry:FS,TorusKnotGeometry:US,TubeGeometry:jS,WireframeGeometry:dW});class pW extends Ji{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class mW extends Nl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Px extends Ji{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ha,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ja extends Px{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gW extends Ji{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new bt(16777215),this.specular=new bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ha,this.combine=xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vW extends Ji{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class yW extends Ji{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _W extends Ji{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ha,this.combine=xx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b3 extends Ji{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Nq,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class E3 extends Ji{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class xW extends Ji{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Vf,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wW extends Xs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function gp(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function bW(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function EW(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function dP(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function A3(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function b_e(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],f=[];for(let p=0;p<u.times.length;++p){const g=u.times[p]*i;if(!(g<t||g>=r)){h.push(u.times[p]);for(let x=0;x<c;++x)f.push(u.values[p*c+x])}}h.length!==0&&(u.times=gp(h,u.times.constructor),u.values=gp(f,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function E_e(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let f=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);const g=a.times.length-1;let x;if(s<=a.times[0]){const v=c,b=h-c;x=a.values.slice(v,b)}else if(s>=a.times[g]){const v=g*h+c,b=v+h-c;x=a.values.slice(v,b)}else{const v=a.createInterpolant(),b=c,E=h-c;v.evaluate(s),x=v.resultBuffer.slice(b,E)}l==="quaternion"&&new Ws().fromArray(x).normalize().conjugate().toArray(x);const _=u.times.length;for(let v=0;v<_;++v){const b=v*p+f;if(l==="quaternion")Ws.multiplyQuaternionsFlat(u.values,b,x,0,u.values,b);else{const E=p-f*2;for(let S=0;S<E;++S)u.values[b+S]-=x[S]}}}return n.blendMode=r3,n}const A_e={convertArray:gp,isTypedArray:bW,getKeyframeOrder:EW,sortedArray:dP,flattenJSON:A3,subclip:b_e,makeClipAdditive:E_e};class Qv{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class AW extends Qv{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dp,endingEnd:dp}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case pp:s=e,a=2*t-r;break;case P_:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case pp:o=e,l=2*r-t;break;case P_:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,p=this._weightNext,g=(r-t)/(i-t),x=g*g,_=x*g,v=-f*_+2*f*x-f*g,b=(1+f)*_+(-1.5-2*f)*x+(-.5+f)*g+1,E=(-1-p)*_+(1.5+p)*x+.5*g,S=p*_-p*x;for(let C=0;C!==a;++C)s[C]=v*o[c+C]+b*o[u+C]+E*o[l+C]+S*o[h+C];return s}}class S3 extends Qv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),h=1-c;for(let f=0;f!==a;++f)s[f]=o[u+f]*h+o[l+f]*c;return s}}class SW extends Qv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vl{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gp(t,this.TimeBufferType),this.values=gp(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:gp(e.times,Array),values:gp(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new SW(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new S3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new AW(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xv:t=this.InterpolantFactoryMethodDiscrete;break;case wv:t=this.InterpolantFactoryMethodLinear;break;case Ab:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xv;case this.InterpolantFactoryMethodLinear:return wv;case this.InterpolantFactoryMethodSmooth:return Ab}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&bW(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Ab,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,f=h-r,p=h+r;for(let g=0;g!==r;++g){const x=t[h+g];if(x!==t[f+g]||x!==t[p+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,f=o*r;for(let p=0;p!==r;++p)t[f+p]=t[h+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Vl.prototype.TimeBufferType=Float32Array;Vl.prototype.ValueBufferType=Float32Array;Vl.prototype.DefaultInterpolation=wv;class fm extends Vl{constructor(e,t,r){super(e,t,r)}}fm.prototype.ValueTypeName="bool";fm.prototype.ValueBufferType=Array;fm.prototype.DefaultInterpolation=xv;fm.prototype.InterpolantFactoryMethodLinear=void 0;fm.prototype.InterpolantFactoryMethodSmooth=void 0;class T3 extends Vl{}T3.prototype.ValueTypeName="color";class Kp extends Vl{}Kp.prototype.ValueTypeName="number";class TW extends Qv{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Ws.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Jp extends Vl{InterpolantFactoryMethodLinear(e){return new TW(this.times,this.values,this.getValueSize(),e)}}Jp.prototype.ValueTypeName="quaternion";Jp.prototype.InterpolantFactoryMethodSmooth=void 0;class dm extends Vl{constructor(e,t,r){super(e,t,r)}}dm.prototype.ValueTypeName="string";dm.prototype.ValueBufferType=Array;dm.prototype.DefaultInterpolation=xv;dm.prototype.InterpolantFactoryMethodLinear=void 0;dm.prototype.InterpolantFactoryMethodSmooth=void 0;class Xp extends Vl{}Xp.prototype.ValueTypeName="vector";class Av{constructor(e="",t=-1,r=[],i=_S){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ca(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(T_e(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Vl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=EW(l);l=dP(l,1,c),u=dP(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Kp(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,p,g,x){if(p.length!==0){const _=[],v=[];A3(p,_,v,g),_.length!==0&&x.push(new h(f,_,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let x=0;x<f[g].morphTargets.length;x++)p[f[g].morphTargets[x]]=-1;for(const x in p){const _=[],v=[];for(let b=0;b!==f[g].morphTargets.length;++b){const E=f[g];_.push(E.time),v.push(E.morphTarget===x?1:0)}i.push(new Kp(".morphTargetInfluence["+x+"]",_,v))}l=p.length*o}else{const p=".bones["+t[h].name+"]";r(Xp,p+".position",f,"pos",i),r(Jp,p+".quaternion",f,"rot",i),r(Xp,p+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function S_e(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kp;case"vector":case"vector2":case"vector3":case"vector4":return Xp;case"color":return T3;case"quaternion":return Jp;case"bool":case"boolean":return fm;case"string":return dm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function T_e(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=S_e(n.type);if(n.times===void 0){const t=[],r=[];A3(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ic={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class C3{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const p=u[h],g=u[h+1];if(p.global&&(p.lastIndex=0),p.test(c))return g}return null}}}const CW=new C3;class Ys{constructor(e){this.manager=e!==void 0?e:CW,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ys.DEFAULT_MATERIAL_NAME="__DEFAULT";const _c={};class C_e extends Error{constructor(e,t){super(e),this.response=t}}class fa extends Ys{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ic.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(_c[e]!==void 0){_c[e].push({onLoad:t,onProgress:r,onError:i});return}_c[e]=[],_c[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=_c[e],h=u.body.getReader(),f=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=f?parseInt(f):0,g=p!==0;let x=0;const _=new ReadableStream({start(v){b();function b(){h.read().then(({done:E,value:S})=>{if(E)v.close();else{x+=S.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:x,total:p});for(let D=0,M=c.length;D<M;D++){const P=c[D];P.onProgress&&P.onProgress(C)}v.enqueue(S),b()}},E=>{v.error(E)})}}});return new Response(_)}else throw new C_e(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,p=new TextDecoder(f);return u.arrayBuffer().then(g=>p.decode(g))}}}).then(u=>{Ic.add(e,u);const c=_c[e];delete _c[e];for(let h=0,f=c.length;h<f;h++){const p=c[h];p.onLoad&&p.onLoad(u)}}).catch(u=>{const c=_c[e];if(c===void 0)throw this.manager.itemError(e),u;delete _c[e];for(let h=0,f=c.length;h<f;h++){const p=c[h];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class M_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new fa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Av.parse(e[r]);t.push(i)}return t}}class R_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new TS,l=new fa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(f){const p=s.parse(f,!0);o[h]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(a.minFilter=vi),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)c(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const p=f.mipmaps.length/f.mipmapCount;for(let g=0;g<p;g++){o[g]={mipmaps:[]};for(let x=0;x<f.mipmapCount;x++)o[g].mipmaps.push(f.mipmaps[g*f.mipmapCount+x]),o[g].format=f.format,o[g].width=f.width,o[g].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=vi),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class j_ extends Ys{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ic.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=N_("img");function l(){c(),Ic.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){c(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class I_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=new Ax;s.colorSpace=ko;const o=new j_(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class P_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new vu,a=new fa(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:sa,o.wrapT=u.wrapT!==void 0?u.wrapT:sa,o.magFilter=u.magFilter!==void 0?u.magFilter:vi,o.minFilter=u.minFilter!==void 0?u.minFilter:vi,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=La),u.mipmapCount===1&&(o.minFilter=vi),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class MW extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=new Br,o=new j_(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Hf extends Bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class RW extends Hf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const dM=new Yt,m4=new pe,g4=new pe;class M3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Yt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cx,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;m4.setFromMatrixPosition(e.matrixWorld),t.position.copy(m4),g4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(g4),t.updateMatrixWorld(),dM.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dM),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(dM)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class k_e extends M3{constructor(){super(new Wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=bv*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class R3 extends Hf{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new k_e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const v4=new Yt,a0=new pe,pM=new pe;class O_e extends M3{constructor(){super(new Wi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),a0.setFromMatrixPosition(e.matrixWorld),r.position.copy(a0),pM.copy(r.position),pM.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(pM),r.updateMatrixWorld(),i.makeTranslation(-a0.x,-a0.y,-a0.z),v4.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(v4)}}class I3 extends Hf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new O_e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Zv extends Ex{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class D_e extends M3{constructor(){super(new Zv(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class P3 extends Hf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new D_e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class IW extends Hf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class PW extends Hf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class kW{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class OW extends Hf{constructor(e=new kW,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class VS extends Ys{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new bt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ze().fromArray(o.value);break;case"v3":i.uniforms[s].value=new pe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Xn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new bn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Yt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return VS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:pW,SpriteMaterial:c3,RawShaderMaterial:mW,ShaderMaterial:Nl,PointsMaterial:SS,MeshPhysicalMaterial:ja,MeshStandardMaterial:Px,MeshPhongMaterial:gW,MeshToonMaterial:vW,MeshNormalMaterial:yW,MeshLambertMaterial:_W,MeshDepthMaterial:b3,MeshDistanceMaterial:E3,MeshBasicMaterial:oa,MeshMatcapMaterial:xW,LineDashedMaterial:wW,LineBasicMaterial:Xs,Material:Ji};return new t[e]}}class gf{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class DW extends En{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class NW extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,g){if(t[g]!==void 0)return t[g];const _=p.interleavedBuffers[g],v=s(p,_.buffer),b=qg(_.type,v),E=new Sx(b,_.stride);return E.uuid=_.uuid,t[g]=E,E}function s(p,g){if(r[g]!==void 0)return r[g];const _=p.arrayBuffers[g],v=new Uint32Array(_).buffer;return r[g]=v,v}const o=e.isInstancedBufferGeometry?new DW:new En,a=e.data.index;if(a!==void 0){const p=qg(a.type,a.array);o.setIndex(new Yn(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let x;if(g.isInterleavedBufferAttribute){const _=i(e.data,g.data);x=new Pf(_,g.itemSize,g.offset,g.normalized)}else{const _=qg(g.type,g.array),v=g.isInstancedBufferAttribute?Wp:Yn;x=new v(_,g.itemSize,g.normalized)}g.name!==void 0&&(x.name=g.name),g.usage!==void 0&&x.setUsage(g.usage),o.setAttribute(p,x)}const u=e.data.morphAttributes;if(u)for(const p in u){const g=u[p],x=[];for(let _=0,v=g.length;_<v;_++){const b=g[_];let E;if(b.isInterleavedBufferAttribute){const S=i(e.data,b.data);E=new Pf(S,b.itemSize,b.offset,b.normalized)}else{const S=qg(b.type,b.array);E=new Yn(S,b.itemSize,b.normalized)}b.name!==void 0&&(E.name=b.name),x.push(E)}o.morphAttributes[p]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let p=0,g=h.length;p!==g;++p){const x=h[p];o.addGroup(x.start,x.count,x.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const p=new pe;f.center!==void 0&&p.fromArray(f.center),o.boundingSphere=new Ts(p,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class N_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?gf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new fa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?gf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new fa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Rp().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Tx().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new NW;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in p4?a=p4[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new VS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=Av.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:qg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new C3(t);s=new j_(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],f=h.url;if(Array.isArray(f)){const p=[];for(let g=0,x=f.length;g<x;g++){const _=f[g],v=a(_);v!==null&&(v instanceof HTMLImageElement?p.push(v):p.push(new vu(v.data,v.width,v.height)))}i[h.uuid]=new mp(p)}else{const p=a(h.url);i[h.uuid]=new mp(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:qg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new j_(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,f=u.length;h<f;h++){const p=u[h],g=await s(p);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new vu(g.data,g.width,g.height)))}r[l.uuid]=new mp(c)}else{const c=await s(l.url);r[l.uuid]=new mp(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new Ax,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new vu:c=new Br,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,L_e)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],y4),c.wrapT=r(a.wrap[1],y4)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,_4)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,_4)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const p=[];for(let g=0,x=f.length;g<x;g++){const _=f[g];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),p.push(r[_])}return p}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,h;switch(e.type){case"Scene":o=new u3,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new bt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new ES(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new bS(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Wi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Zv(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new IW(e.color,e.intensity);break;case"DirectionalLight":o=new P3(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new I3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new PW(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new R3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new RW(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new OW().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),o=new h3(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),o=new yi(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const f=e.count,p=e.instanceMatrix,g=e.instanceColor;o=new f3(c,h,f),o.instanceMatrix=new Wp(new Float32Array(p.array),16),g!==void 0&&(o.instanceColor=new Wp(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":c=a(e.geometry),h=l(e.material),o=new rW(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(x=>{const _=new $s;_.min.fromArray(x.boxMin),_.max.fromArray(x.boxMax);const v=new Ts;return v.radius=x.sphereRadius,v.center.fromArray(x.sphereCenter),{boxInitialized:x.boxInitialized,box:_,sphereInitialized:x.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new nW;break;case"Line":o=new Jc(a(e.geometry),l(e.material));break;case"LineLoop":o=new d3(a(e.geometry),l(e.material));break;case"LineSegments":o=new Ul(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new p3(a(e.geometry),l(e.material));break;case"Sprite":o=new tW(l(e.material));break;case"Group":o=new Rc;break;case"Bone":o=new AS;break;default:o=new Bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let p=0;p<f.length;p++)o.add(this.parseObject(f[p],t,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let p=0;p<f.length;p++){const g=f[p];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let p=0;p<f.length;p++){const g=f[p],x=o.getObjectByProperty("uuid",g.object);x!==void 0&&o.addLevel(x,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new Bn}})}}const L_e={UVMapping:hS,CubeReflectionMapping:$c,CubeRefractionMapping:Rf,EquirectangularReflectionMapping:R_,EquirectangularRefractionMapping:I_,CubeUVReflectionMapping:$v},y4={RepeatWrapping:If,ClampToEdgeWrapping:sa,MirroredRepeatWrapping:yv},_4={NearestFilter:hs,NearestMipmapNearestFilter:fS,NearestMipmapLinearFilter:fp,LinearFilter:vi,LinearMipmapNearestFilter:nv,LinearMipmapLinearFilter:La};class LW extends Ys{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ic.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Ic.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),Ic.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ic.add(e,l),s.manager.itemStart(e)}}let B1;class k3{static getContext(){return B1===void 0&&(B1=new(window.AudioContext||window.webkitAudioContext)),B1}static setContext(e){B1=e}}class B_e extends Ys{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new fa(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);k3.getContext().decodeAudioData(u,function(h){t(h)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const x4=new Yt,w4=new Yt,Bd=new Yt;class F_e{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Wi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Wi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Bd.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Cp*t.fov*.5)/t.zoom;let a,l;w4.elements[12]=-i,x4.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,Bd.elements[0]=2*t.near/(l-a),Bd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Bd),a=-o*t.aspect-s,l=o*t.aspect-s,Bd.elements[0]=2*t.near/(l-a),Bd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Bd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(w4),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(x4)}}class BW extends Wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class O3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=b4(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=b4();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function b4(){return performance.now()}const Fd=new pe,E4=new Ws,U_e=new pe,Ud=new pe;class j_e extends Bn{constructor(){super(),this.type="AudioListener",this.context=k3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new O3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fd,E4,U_e),Ud.set(0,0,-1).applyQuaternion(E4),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Fd.x,i),t.positionY.linearRampToValueAtTime(Fd.y,i),t.positionZ.linearRampToValueAtTime(Fd.z,i),t.forwardX.linearRampToValueAtTime(Ud.x,i),t.forwardY.linearRampToValueAtTime(Ud.y,i),t.forwardZ.linearRampToValueAtTime(Ud.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Fd.x,Fd.y,Fd.z),t.setOrientation(Ud.x,Ud.y,Ud.z,r.x,r.y,r.z)}}class FW extends Bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const jd=new pe,A4=new Ws,V_e=new pe,Vd=new pe;class z_e extends FW{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(jd,A4,V_e),Vd.set(0,0,1).applyQuaternion(A4);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(jd.x,r),t.positionY.linearRampToValueAtTime(jd.y,r),t.positionZ.linearRampToValueAtTime(jd.z,r),t.orientationX.linearRampToValueAtTime(Vd.x,r),t.orientationY.linearRampToValueAtTime(Vd.y,r),t.orientationZ.linearRampToValueAtTime(Vd.z,r)}else t.setPosition(jd.x,jd.y,jd.z),t.setOrientation(Vd.x,Vd.y,Vd.z)}}class H_e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class UW{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Ws.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Ws.multiplyQuaternionsFlat(e,o,e,t,e,r),Ws.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const D3="\\[\\]\\.:\\/",G_e=new RegExp("["+D3+"]","g"),N3="[^"+D3+"]",q_e="[^"+D3.replace("\\.","")+"]",W_e=/((?:WC+[\/:])*)/.source.replace("WC",N3),$_e=/(WCOD+)?/.source.replace("WCOD",q_e),K_e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",N3),J_e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",N3),X_e=new RegExp("^"+W_e+$_e+K_e+J_e+"$"),Y_e=["material","materials","bones","map"];class Q_e{constructor(e,t,r){const i=r||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class qn{constructor(e,t,r){this.path=t,this.parsedPath=r||qn.parseTrackName(t),this.node=qn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new qn.Composite(e,t,r):new qn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(G_e,"")}static parseTrackName(e){const t=X_e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Y_e.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=qn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qn.Composite=Q_e;qn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};qn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};qn.prototype.GetterByBindingType=[qn.prototype._getValue_direct,qn.prototype._getValue_array,qn.prototype._getValue_arrayElement,qn.prototype._getValue_toArray];qn.prototype.SetterByBindingTypeAndVersioning=[[qn.prototype._setValue_direct,qn.prototype._setValue_direct_setNeedsUpdate,qn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_array,qn.prototype._setValue_array_setNeedsUpdate,qn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_arrayElement,qn.prototype._setValue_arrayElement_setNeedsUpdate,qn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qn.prototype._setValue_fromArray,qn.prototype._setValue_fromArray_setNeedsUpdate,qn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Z_e{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ca(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const f=arguments[c],p=f.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(f);for(let x=0,_=o;x!==_;++x)s[x].push(new qn(f,r[x],i[x]))}else if(g<u){a=e[g];const x=--u,_=e[x];t[_.uuid]=g,e[g]=_,t[p]=x,e[x]=f;for(let v=0,b=o;v!==b;++v){const E=s[v],S=E[x];let C=E[g];E[g]=S,C===void 0&&(C=new qn(f,r[v],i[v])),E[x]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const h=s++,f=e[h];t[f.uuid]=c,e[c]=f,t[u]=h,e[h]=l;for(let p=0,g=i;p!==g;++p){const x=r[p],_=x[h],v=x[c];x[c]=_,x[h]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<s){const f=--s,p=e[f],g=--o,x=e[g];t[p.uuid]=h,e[h]=p,t[x.uuid]=f,e[f]=x,e.pop();for(let _=0,v=i;_!==v;++_){const b=r[_],E=b[f],S=b[g];b[h]=E,b[f]=S,b.pop()}}else{const f=--o,p=e[f];f>0&&(t[p.uuid]=h),e[h]=p,e.pop();for(let g=0,x=i;g!==x;++g){const _=r[g];_[h]=_[f],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let f=c,p=l.length;f!==p;++f){const g=l[f];h[f]=new qn(g,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class jW{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:dp,endingEnd:dp};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=kq,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case r3:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case _S:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===Oq;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===Pq){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=pp,i.endingEnd=pp):(e?i.endingStart=this.zeroSlopeAtStart?pp:dp:i.endingStart=P_,t?i.endingEnd=this.zeroSlopeAtEnd?pp:dp:i.endingEnd=P_)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const exe=new Float32Array(1);class VW extends Mu{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const f=i[h],p=f.name;let g=c[p];if(g!==void 0)++g.referenceCount,o[h]=g;else{if(g=o[h],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const x=t&&t._propertyBindings[h].binding.parsedPath;g=new UW(qn.create(r,p,x),f.ValueTypeName,f.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),o[h]=g}a[h].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new S3(new Float32Array(2),new Float32Array(2),1,exe),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Av.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=_S),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new jW(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?Av.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class txe extends xS{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new wS(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class nxe extends xS{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new bx(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class L3{constructor(e){this.value=e}clone(){return new L3(this.value.clone===void 0?this.value:this.value.clone())}}let rxe=0;class ixe extends Mu{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rxe++}),this.name="",this.usage=O_,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class sxe extends Sx{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class oxe{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const S4=new Yt;class zW{constructor(e,t,r=0,i=1/0){this.ray=new Jv(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Mp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return S4.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(S4),this}intersectObject(e,t=!0,r=[]){return pP(e,this,r,t),r.sort(T4),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)pP(e[i],this,r,t);return r.sort(T4),r}}function T4(n,e){return n.distance-e.distance}function pP(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)pP(s[o],e,t,!0)}}class axe{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=yn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(yn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lxe{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class B3{constructor(e,t,r,i){B3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const C4=new Ze;class uxe{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=C4.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,C4).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const M4=new pe,F1=new pe;class cxe{constructor(e=new pe,t=new pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){M4.subVectors(e,this.start),F1.subVectors(this.end,this.start);const r=F1.dot(F1);let s=F1.dot(M4)/r;return t&&(s=yn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const R4=new pe;class hxe extends Bn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new En,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Ut(i,3));const s=new Xs({fog:!1,toneMapped:!1});this.cone=new Ul(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),R4.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(R4),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Gh=new pe,U1=new Yt,mM=new Yt;class fxe extends Ul{constructor(e){const t=HW(e),r=new En,i=[],s=[],o=new bt(0,0,1),a=new bt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Ut(i,3)),r.setAttribute("color",new Ut(s,3));const l=new Xs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");mM.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(U1.multiplyMatrices(mM,a.matrixWorld),Gh.setFromMatrixPosition(U1),i.setXYZ(o,Gh.x,Gh.y,Gh.z),U1.multiplyMatrices(mM,a.parent.matrixWorld),Gh.setFromMatrixPosition(U1),i.setXYZ(o+1,Gh.x,Gh.y,Gh.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HW(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,HW(n.children[t]));return e}class dxe extends yi{constructor(e,t,r){const i=new Ix(t,4,2),s=new oa({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const pxe=new pe,I4=new bt,P4=new bt;class mxe extends Bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Rx(t);i.rotateY(Math.PI*.5),this.material=new oa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Yn(o,3)),this.add(new yi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");I4.copy(this.light.color),P4.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?I4:P4;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(pxe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gxe extends Ul{constructor(e=10,t=10,r=4473924,i=8947848){r=new bt(r),i=new bt(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let f=0,p=0,g=-a;f<=t;f++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const x=f===s?r:i;x.toArray(u,p),p+=3,x.toArray(u,p),p+=3,x.toArray(u,p),p+=3,x.toArray(u,p),p+=3}const c=new En;c.setAttribute("position",new Ut(l,3)),c.setAttribute("color",new Ut(u,3));const h=new Xs({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class vxe extends Ul{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new bt(s),o=new bt(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),p=Math.sin(f)*e,g=Math.cos(f)*e;a.push(0,0,0),a.push(p,0,g);const x=h&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let h=0;h<r;h++){const f=h&1?s:o,p=e-e/r*h;for(let g=0;g<i;g++){let x=g/i*(Math.PI*2),_=Math.sin(x)*p,v=Math.cos(x)*p;a.push(_,0,v),l.push(f.r,f.g,f.b),x=(g+1)/i*(Math.PI*2),_=Math.sin(x)*p,v=Math.cos(x)*p,a.push(_,0,v),l.push(f.r,f.g,f.b)}}const u=new En;u.setAttribute("position",new Ut(a,3)),u.setAttribute("color",new Ut(l,3));const c=new Xs({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const k4=new pe,j1=new pe,O4=new pe;class yxe extends Bn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new En;i.setAttribute("position",new Ut([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Xs({fog:!1,toneMapped:!1});this.lightPlane=new Jc(i,s),this.add(this.lightPlane),i=new En,i.setAttribute("position",new Ut([0,0,0,0,0,1],3)),this.targetLine=new Jc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),k4.setFromMatrixPosition(this.light.matrixWorld),j1.setFromMatrixPosition(this.light.target.matrixWorld),O4.subVectors(j1,k4),this.lightPlane.lookAt(j1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(j1),this.targetLine.scale.z=O4.length()}}const V1=new pe,ii=new Ex;class _xe extends Ul{constructor(e){const t=new En,r=new Xs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,x){l(g),l(x)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new Ut(i,3)),t.setAttribute("color",new Ut(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new bt(16755200),c=new bt(16711680),h=new bt(43775),f=new bt(16777215),p=new bt(3355443);this.setColors(u,c,h,f,p)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Ml?-1:0;pi("c",t,e,ii,0,0,s),pi("t",t,e,ii,0,0,1),pi("n1",t,e,ii,-r,-i,s),pi("n2",t,e,ii,r,-i,s),pi("n3",t,e,ii,-r,i,s),pi("n4",t,e,ii,r,i,s),pi("f1",t,e,ii,-r,-i,1),pi("f2",t,e,ii,r,-i,1),pi("f3",t,e,ii,-r,i,1),pi("f4",t,e,ii,r,i,1),pi("u1",t,e,ii,r*.7,i*1.1,s),pi("u2",t,e,ii,-r*.7,i*1.1,s),pi("u3",t,e,ii,0,i*2,s),pi("cf1",t,e,ii,-r,0,1),pi("cf2",t,e,ii,r,0,1),pi("cf3",t,e,ii,0,-i,1),pi("cf4",t,e,ii,0,i,1),pi("cn1",t,e,ii,-r,0,s),pi("cn2",t,e,ii,r,0,s),pi("cn3",t,e,ii,0,-i,s),pi("cn4",t,e,ii,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pi(n,e,t,r,i,s,o){V1.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],V1.x,V1.y,V1.z)}}const z1=new $s;class xxe extends Ul{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new En;s.setIndex(new Yn(r,1)),s.setAttribute("position",new Yn(i,3)),super(s,new Xs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&z1.setFromObject(this.object),z1.isEmpty())return;const t=z1.min,r=z1.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class wxe extends Ul{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new En;s.setIndex(new Yn(r,1)),s.setAttribute("position",new Ut(i,3)),super(s,new Xs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class bxe extends Jc{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new En;o.setAttribute("position",new Ut(s,3)),o.computeBoundingSphere(),super(o,new Xs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new En;l.setAttribute("position",new Ut(a,3)),l.computeBoundingSphere(),this.add(new yi(l,new oa({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const D4=new pe;let H1,gM;class Exe extends Bn{constructor(e=new pe(0,0,1),t=new pe(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",H1===void 0&&(H1=new En,H1.setAttribute("position",new Ut([0,0,0,0,1,0],3)),gM=new Xv(0,.5,1,5,1),gM.translate(0,-.5,0)),this.position.copy(t),this.line=new Jc(H1,new Xs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new yi(gM,new oa({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{D4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(D4,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Axe extends Ul{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new En;i.setAttribute("position",new Ut(t,3)),i.setAttribute("color",new Ut(r,3));const s=new Xs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new bt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sxe{constructor(){this.type="ShapePath",this.color=new bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new L_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const b=[];for(let E=0,S=v.length;E<S;E++){const C=v[E],D=new Rp;D.curves=C.curves,b.push(D)}return b}function r(v,b){const E=b.length;let S=!1;for(let C=E-1,D=0;D<E;C=D++){let M=b[C],P=b[D],O=P.x-M.x,R=P.y-M.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(M=b[D],O=-O,P=b[C],R=-R),v.y<M.y||v.y>P.y)continue;if(v.y===M.y){if(v.x===M.x)return!0}else{const N=R*(v.x-M.x)-O*(v.y-M.y);if(N===0)return!0;if(N<0)continue;S=!S}}else{if(v.y!==M.y)continue;if(P.x<=v.x&&v.x<=M.x||M.x<=v.x&&v.x<=P.x)return!0}}return S}const i=yu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Rp,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const h=[],f=[];let p=[],g=0,x;f[g]=void 0,p[g]=[];for(let v=0,b=s.length;v<b;v++)a=s[v],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!c&&f[g]&&g++,f[g]={s:new Rp,p:x},f[g].s.curves=a.curves,c&&g++,p[g]=[]):p[g].push({h:a,p:x[0]});if(!f[0])return t(s);if(f.length>1){let v=!1,b=0;for(let E=0,S=f.length;E<S;E++)h[E]=[];for(let E=0,S=f.length;E<S;E++){const C=p[E];for(let D=0;D<C.length;D++){const M=C[D];let P=!0;for(let O=0;O<f.length;O++)r(M.p,f[O].p)&&(E!==O&&b++,P?(P=!1,h[O].push(M)):v=!0);P&&h[E].push(M)}}b>0&&v===!1&&(p=h)}let _;for(let v=0,b=f.length;v<b;v++){l=f[v].s,u.push(l),_=p[v];for(let E=0,S=_.length;E<S;E++)l.holes.push(_[E].h)}return u}}class Txe extends Mu{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Cxe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Mxe(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Rxe(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function mP(n,e,t,r){const i=Ixe(r);switch(t){case YO:return n*e;case ZO:return n*e;case e3:return n*e*2;case gS:return n*e/i.components*i.byteLength;case wx:return n*e/i.components*i.byteLength;case t3:return n*e*2/i.components*i.byteLength;case vS:return n*e*2/i.components*i.byteLength;case QO:return n*e*3/i.components*i.byteLength;case qs:return n*e*4/i.components*i.byteLength;case yS:return n*e*4/i.components*i.byteLength;case Y0:case Q0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Z0:case e_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ME:case IE:return Math.max(n,16)*Math.max(e,8)/4;case CE:case RE:return Math.max(n,8)*Math.max(e,8)/2;case PE:case kE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case OE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case DE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case NE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case LE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case BE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case FE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case UE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case jE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case VE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case zE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case HE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case GE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case qE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case WE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case $E:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case t_:case KE:case JE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case n3:case XE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case YE:case QE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Ixe(n){switch(n){case Dl:case KO:return{byteLength:1,components:1};case _v:case JO:case Kv:return{byteLength:2,components:1};case pS:case mS:return{byteLength:2,components:4};case Kc:case dS:case Lo:return{byteLength:4,components:1};case XO:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Pxe={contain:Cxe,cover:Mxe,fill:Rxe,getByteLength:mP};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_x}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_x);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function GW(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function kxe(n){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,h=u.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,u,c),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,u){const c=l.array,h=l.updateRanges;if(n.bindBuffer(u,a),h.length===0)n.bufferSubData(u,0,c);else{h.sort((p,g)=>p.start-g.start);let f=0;for(let p=1;p<h.length;p++){const g=h[f],x=h[p];x.start<=g.start+g.count+1?g.count=Math.max(g.count,x.start+x.count-g.start):(++f,h[f]=x)}h.length=f+1;for(let p=0,g=h.length;p<g;p++){const x=h[p];n.bufferSubData(u,x.start*c.BYTES_PER_ELEMENT,c,x.start,x.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:s,update:o}}var Oxe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Dxe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Nxe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Lxe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bxe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Fxe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Uxe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jxe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vxe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,zxe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Hxe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Gxe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,qxe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Wxe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$xe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kxe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Jxe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xxe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Yxe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qxe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Zxe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ewe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,twe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,nwe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rwe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,iwe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,swe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,owe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,awe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lwe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,uwe="gl_FragColor = linearToOutputTexel( gl_FragColor );",cwe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,fwe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dwe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pwe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,mwe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,gwe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,vwe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,ywe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_we=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xwe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,wwe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bwe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ewe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Awe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Swe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Twe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Cwe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Mwe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Rwe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Iwe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Pwe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kwe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Owe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Dwe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Nwe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lwe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Bwe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Fwe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Uwe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,jwe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Vwe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,zwe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Hwe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Gwe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,qwe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Wwe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$we=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kwe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Jwe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Xwe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ywe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Qwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zwe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,e1e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,t1e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,n1e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,r1e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,i1e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,s1e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,o1e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,a1e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,l1e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,u1e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,c1e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,h1e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,f1e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,d1e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,p1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,m1e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g1e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,v1e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,y1e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_1e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,x1e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,w1e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,b1e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,E1e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,A1e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,S1e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,T1e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,C1e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,M1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,R1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,I1e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,P1e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const k1e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,O1e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,D1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N1e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,L1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,B1e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,U1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,j1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,V1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,z1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,H1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W1e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Y1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Z1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ebe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tbe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nbe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rbe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ibe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sbe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,obe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,abe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lbe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ube=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cbe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hbe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mn={alphahash_fragment:Oxe,alphahash_pars_fragment:Dxe,alphamap_fragment:Nxe,alphamap_pars_fragment:Lxe,alphatest_fragment:Bxe,alphatest_pars_fragment:Fxe,aomap_fragment:Uxe,aomap_pars_fragment:jxe,batching_pars_vertex:Vxe,batching_vertex:zxe,begin_vertex:Hxe,beginnormal_vertex:Gxe,bsdfs:qxe,iridescence_fragment:Wxe,bumpmap_pars_fragment:$xe,clipping_planes_fragment:Kxe,clipping_planes_pars_fragment:Jxe,clipping_planes_pars_vertex:Xxe,clipping_planes_vertex:Yxe,color_fragment:Qxe,color_pars_fragment:Zxe,color_pars_vertex:ewe,color_vertex:twe,common:nwe,cube_uv_reflection_fragment:rwe,defaultnormal_vertex:iwe,displacementmap_pars_vertex:swe,displacementmap_vertex:owe,emissivemap_fragment:awe,emissivemap_pars_fragment:lwe,colorspace_fragment:uwe,colorspace_pars_fragment:cwe,envmap_fragment:hwe,envmap_common_pars_fragment:fwe,envmap_pars_fragment:dwe,envmap_pars_vertex:pwe,envmap_physical_pars_fragment:Swe,envmap_vertex:mwe,fog_vertex:gwe,fog_pars_vertex:vwe,fog_fragment:ywe,fog_pars_fragment:_we,gradientmap_pars_fragment:xwe,lightmap_pars_fragment:wwe,lights_lambert_fragment:bwe,lights_lambert_pars_fragment:Ewe,lights_pars_begin:Awe,lights_toon_fragment:Twe,lights_toon_pars_fragment:Cwe,lights_phong_fragment:Mwe,lights_phong_pars_fragment:Rwe,lights_physical_fragment:Iwe,lights_physical_pars_fragment:Pwe,lights_fragment_begin:kwe,lights_fragment_maps:Owe,lights_fragment_end:Dwe,logdepthbuf_fragment:Nwe,logdepthbuf_pars_fragment:Lwe,logdepthbuf_pars_vertex:Bwe,logdepthbuf_vertex:Fwe,map_fragment:Uwe,map_pars_fragment:jwe,map_particle_fragment:Vwe,map_particle_pars_fragment:zwe,metalnessmap_fragment:Hwe,metalnessmap_pars_fragment:Gwe,morphinstance_vertex:qwe,morphcolor_vertex:Wwe,morphnormal_vertex:$we,morphtarget_pars_vertex:Kwe,morphtarget_vertex:Jwe,normal_fragment_begin:Xwe,normal_fragment_maps:Ywe,normal_pars_fragment:Qwe,normal_pars_vertex:Zwe,normal_vertex:e1e,normalmap_pars_fragment:t1e,clearcoat_normal_fragment_begin:n1e,clearcoat_normal_fragment_maps:r1e,clearcoat_pars_fragment:i1e,iridescence_pars_fragment:s1e,opaque_fragment:o1e,packing:a1e,premultiplied_alpha_fragment:l1e,project_vertex:u1e,dithering_fragment:c1e,dithering_pars_fragment:h1e,roughnessmap_fragment:f1e,roughnessmap_pars_fragment:d1e,shadowmap_pars_fragment:p1e,shadowmap_pars_vertex:m1e,shadowmap_vertex:g1e,shadowmask_pars_fragment:v1e,skinbase_vertex:y1e,skinning_pars_vertex:_1e,skinning_vertex:x1e,skinnormal_vertex:w1e,specularmap_fragment:b1e,specularmap_pars_fragment:E1e,tonemapping_fragment:A1e,tonemapping_pars_fragment:S1e,transmission_fragment:T1e,transmission_pars_fragment:C1e,uv_pars_fragment:M1e,uv_pars_vertex:R1e,uv_vertex:I1e,worldpos_vertex:P1e,background_vert:k1e,background_frag:O1e,backgroundCube_vert:D1e,backgroundCube_frag:N1e,cube_vert:L1e,cube_frag:B1e,depth_vert:F1e,depth_frag:U1e,distanceRGBA_vert:j1e,distanceRGBA_frag:V1e,equirect_vert:z1e,equirect_frag:H1e,linedashed_vert:G1e,linedashed_frag:q1e,meshbasic_vert:W1e,meshbasic_frag:$1e,meshlambert_vert:K1e,meshlambert_frag:J1e,meshmatcap_vert:X1e,meshmatcap_frag:Y1e,meshnormal_vert:Q1e,meshnormal_frag:Z1e,meshphong_vert:ebe,meshphong_frag:tbe,meshphysical_vert:nbe,meshphysical_frag:rbe,meshtoon_vert:ibe,meshtoon_frag:sbe,points_vert:obe,points_frag:abe,shadow_vert:lbe,shadow_frag:ube,sprite_vert:cbe,sprite_frag:hbe},wt={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},envMapRotation:{value:new bn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}}},Al={basic:{uniforms:po([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:po([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:po([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:po([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:po([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new bt(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:po([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:po([wt.points,wt.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:po([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:po([wt.common,wt.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:po([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:po([wt.sprite,wt.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new bn}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:po([wt.common,wt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:po([wt.lights,wt.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};Al.physical={uniforms:po([Al.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new bn}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const G1={r:0,b:0,g:0},zd=new ha,fbe=new Yt;function dbe(n,e,t,r,i,s,o){const a=new bt(0);let l=s===!0?0:1,u,c,h=null,f=0,p=null;function g(E){let S=E.isScene===!0?E.background:null;return S&&S.isTexture&&(S=(E.backgroundBlurriness>0?t:e).get(S)),S}function x(E){let S=!1;const C=g(E);C===null?v(a,l):C&&C.isColor&&(v(C,1),S=!0);const D=n.xr.getEnvironmentBlendMode();D==="additive"?r.buffers.color.setClear(0,0,0,1,o):D==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(E,S){const C=g(S);C&&(C.isCubeTexture||C.mapping===$v)?(c===void 0&&(c=new yi(new hm(1,1,1),new Nl({name:"BackgroundCubeMaterial",uniforms:Ev(Al.backgroundCube.uniforms),vertexShader:Al.backgroundCube.vertexShader,fragmentShader:Al.backgroundCube.fragmentShader,side:yo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(D,M,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),zd.copy(S.backgroundRotation),zd.x*=-1,zd.y*=-1,zd.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(zd.y*=-1,zd.z*=-1),c.material.uniforms.envMap.value=C,c.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(fbe.makeRotationFromEuler(zd)),c.material.toneMapped=Wn.getTransfer(C.colorSpace)!==ur,(h!==C||f!==C.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,h=C,f=C.version,p=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null)):C&&C.isTexture&&(u===void 0&&(u=new yi(new Yv(2,2),new Nl({name:"BackgroundMaterial",uniforms:Ev(Al.background.uniforms),vertexShader:Al.background.vertexShader,fragmentShader:Al.background.fragmentShader,side:bu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=C,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.toneMapped=Wn.getTransfer(C.colorSpace)!==ur,C.matrixAutoUpdate===!0&&C.updateMatrix(),u.material.uniforms.uvTransform.value.copy(C.matrix),(h!==C||f!==C.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,h=C,f=C.version,p=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null))}function v(E,S){E.getRGB(G1,Xq(n)),r.buffers.color.setClear(G1.r,G1.g,G1.b,S,o)}function b(){c!==void 0&&(c.geometry.dispose(),c.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(E,S=1){a.set(E),l=S,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,v(a,l)},render:x,addToRenderList:_,dispose:b}}function pbe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=f(null);let s=i,o=!1;function a(R,N,U,F,J){let Z=!1;const oe=h(F,U,N);s!==oe&&(s=oe,u(s.object)),Z=p(R,F,U,J),Z&&g(R,F,U,J),J!==null&&e.update(J,n.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,S(R,N,U,F),J!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(J).buffer))}function l(){return n.createVertexArray()}function u(R){return n.bindVertexArray(R)}function c(R){return n.deleteVertexArray(R)}function h(R,N,U){const F=U.wireframe===!0;let J=r[R.id];J===void 0&&(J={},r[R.id]=J);let Z=J[N.id];Z===void 0&&(Z={},J[N.id]=Z);let oe=Z[F];return oe===void 0&&(oe=f(l()),Z[F]=oe),oe}function f(R){const N=[],U=[],F=[];for(let J=0;J<t;J++)N[J]=0,U[J]=0,F[J]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:U,attributeDivisors:F,object:R,attributes:{},index:null}}function p(R,N,U,F){const J=s.attributes,Z=N.attributes;let oe=0;const ae=U.getAttributes();for(const Q in ae)if(ae[Q].location>=0){const Y=J[Q];let V=Z[Q];if(V===void 0&&(Q==="instanceMatrix"&&R.instanceMatrix&&(V=R.instanceMatrix),Q==="instanceColor"&&R.instanceColor&&(V=R.instanceColor)),Y===void 0||Y.attribute!==V||V&&Y.data!==V.data)return!0;oe++}return s.attributesNum!==oe||s.index!==F}function g(R,N,U,F){const J={},Z=N.attributes;let oe=0;const ae=U.getAttributes();for(const Q in ae)if(ae[Q].location>=0){let Y=Z[Q];Y===void 0&&(Q==="instanceMatrix"&&R.instanceMatrix&&(Y=R.instanceMatrix),Q==="instanceColor"&&R.instanceColor&&(Y=R.instanceColor));const V={};V.attribute=Y,Y&&Y.data&&(V.data=Y.data),J[Q]=V,oe++}s.attributes=J,s.attributesNum=oe,s.index=F}function x(){const R=s.newAttributes;for(let N=0,U=R.length;N<U;N++)R[N]=0}function _(R){v(R,0)}function v(R,N){const U=s.newAttributes,F=s.enabledAttributes,J=s.attributeDivisors;U[R]=1,F[R]===0&&(n.enableVertexAttribArray(R),F[R]=1),J[R]!==N&&(n.vertexAttribDivisor(R,N),J[R]=N)}function b(){const R=s.newAttributes,N=s.enabledAttributes;for(let U=0,F=N.length;U<F;U++)N[U]!==R[U]&&(n.disableVertexAttribArray(U),N[U]=0)}function E(R,N,U,F,J,Z,oe){oe===!0?n.vertexAttribIPointer(R,N,U,J,Z):n.vertexAttribPointer(R,N,U,F,J,Z)}function S(R,N,U,F){x();const J=F.attributes,Z=U.getAttributes(),oe=N.defaultAttributeValues;for(const ae in Z){const Q=Z[ae];if(Q.location>=0){let ee=J[ae];if(ee===void 0&&(ae==="instanceMatrix"&&R.instanceMatrix&&(ee=R.instanceMatrix),ae==="instanceColor"&&R.instanceColor&&(ee=R.instanceColor)),ee!==void 0){const Y=ee.normalized,V=ee.itemSize,X=e.get(ee);if(X===void 0)continue;const re=X.buffer,se=X.type,he=X.bytesPerElement,te=se===n.INT||se===n.UNSIGNED_INT||ee.gpuType===dS;if(ee.isInterleavedBufferAttribute){const ce=ee.data,ve=ce.stride,xe=ee.offset;if(ce.isInstancedInterleavedBuffer){for(let Te=0;Te<Q.locationSize;Te++)v(Q.location+Te,ce.meshPerAttribute);R.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Te=0;Te<Q.locationSize;Te++)_(Q.location+Te);n.bindBuffer(n.ARRAY_BUFFER,re);for(let Te=0;Te<Q.locationSize;Te++)E(Q.location+Te,V/Q.locationSize,se,Y,ve*he,(xe+V/Q.locationSize*Te)*he,te)}else{if(ee.isInstancedBufferAttribute){for(let ce=0;ce<Q.locationSize;ce++)v(Q.location+ce,ee.meshPerAttribute);R.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ce=0;ce<Q.locationSize;ce++)_(Q.location+ce);n.bindBuffer(n.ARRAY_BUFFER,re);for(let ce=0;ce<Q.locationSize;ce++)E(Q.location+ce,V/Q.locationSize,se,Y,V*he,V/Q.locationSize*ce*he,te)}}else if(oe!==void 0){const Y=oe[ae];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(Q.location,Y);break;case 3:n.vertexAttrib3fv(Q.location,Y);break;case 4:n.vertexAttrib4fv(Q.location,Y);break;default:n.vertexAttrib1fv(Q.location,Y)}}}}b()}function C(){P();for(const R in r){const N=r[R];for(const U in N){const F=N[U];for(const J in F)c(F[J].object),delete F[J];delete N[U]}delete r[R]}}function D(R){if(r[R.id]===void 0)return;const N=r[R.id];for(const U in N){const F=N[U];for(const J in F)c(F[J].object),delete F[J];delete N[U]}delete r[R.id]}function M(R){for(const N in r){const U=r[N];if(U[R.id]===void 0)continue;const F=U[R.id];for(const J in F)c(F[J].object),delete F[J];delete U[R.id]}}function P(){O(),o=!0,s!==i&&(s=i,u(s.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:P,resetDefaultState:O,dispose:C,releaseStatesOfGeometry:D,releaseStatesOfProgram:M,initAttributes:x,enableAttribute:_,disableUnusedAttributes:b}}function mbe(n,e,t){let r;function i(u){r=u}function s(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function o(u,c,h){h!==0&&(n.drawArraysInstanced(r,u,c,h),t.update(c,r,h))}function a(u,c,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,h);let p=0;for(let g=0;g<h;g++)p+=c[g];t.update(p,r,1)}function l(u,c,h,f){if(h===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)o(u[g],c[g],f[g]);else{p.multiDrawArraysInstancedWEBGL(r,u,0,c,0,f,0,h);let g=0;for(let x=0;x<h;x++)g+=c[x]*f[x];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function gbe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(M){return!(M!==qs&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(M){const P=M===Kv&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==Dl&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Lo&&!P)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const h=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,D=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:g,maxTextureSize:x,maxCubemapSize:_,maxAttributes:v,maxVertexUniforms:b,maxVaryings:E,maxFragmentUniforms:S,vertexTextures:C,maxSamples:D}}function vbe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Yh,a=new bn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const p=h.length!==0||f||r!==0||i;return i=f,r=h.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){t=c(h,f,0)},this.setState=function(h,f,p){const g=h.clippingPlanes,x=h.clipIntersection,_=h.clipShadows,v=n.get(h);if(!i||g===null||g.length===0||s&&!_)s?c(null):u();else{const b=s?0:r,E=b*4;let S=v.clippingState||null;l.value=S,S=c(g,f,E,p);for(let C=0;C!==E;++C)S[C]=t[C];v.clippingState=S,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,f,p,g){const x=h!==null?h.length:0;let _=null;if(x!==0){if(_=l.value,g!==!0||_===null){const v=p+x*4,b=f.matrixWorldInverse;a.getNormalMatrix(b),(_===null||_.length<v)&&(_=new Float32Array(v));for(let E=0,S=p;E!==x;++E,S+=4)o.copy(h[E]).applyMatrix4(b,a),o.normal.toArray(_,S),_[S+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,_}}function ybe(n){let e=new WeakMap;function t(o,a){return a===R_?o.mapping=$c:a===I_&&(o.mapping=Rf),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===R_||a===I_)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new Zq(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const $g=4,N4=[.125,.215,.35,.446,.526,.582],sp=20,vM=new Zv,L4=new bt;let yM=null,_M=0,xM=0,wM=!1;const ep=(1+Math.sqrt(5))/2,Ag=1/ep,B4=[new pe(-ep,Ag,0),new pe(ep,Ag,0),new pe(-Ag,0,ep),new pe(Ag,0,ep),new pe(0,ep,-Ag),new pe(0,ep,Ag),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)];class gP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){yM=this._renderer.getRenderTarget(),_M=this._renderer.getActiveCubeFace(),xM=this._renderer.getActiveMipmapLevel(),wM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=j4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=U4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yM,_M,xM),this._renderer.xr.enabled=wM,e.scissorTest=!1,q1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$c||e.mapping===Rf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yM=this._renderer.getRenderTarget(),_M=this._renderer.getActiveCubeFace(),xM=this._renderer.getActiveMipmapLevel(),wM=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:vi,minFilter:vi,generateMipmaps:!1,type:Kv,format:qs,colorSpace:qp,depthBuffer:!1},i=F4(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=F4(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_be(s)),this._blurMaterial=xbe(s,e,t)}return i}_compileMaterial(e){const t=new yi(this._lodPlanes[0],e);this._renderer.compile(t,vM)}_sceneToCubeUV(e,t,r,i){const a=new Wi(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(L4),c.toneMapping=gu,c.autoClear=!1;const p=new oa({name:"PMREM.Background",side:yo,depthWrite:!1,depthTest:!1}),g=new yi(new hm,p);let x=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,x=!0):(p.color.copy(L4),x=!0);for(let v=0;v<6;v++){const b=v%3;b===0?(a.up.set(0,l[v],0),a.lookAt(u[v],0,0)):b===1?(a.up.set(0,0,l[v]),a.lookAt(0,u[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,u[v]));const E=this._cubeSize;q1(i,b*E,v>2?E:0,E,E),c.setRenderTarget(i),x&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===$c||e.mapping===Rf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=j4()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=U4());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new yi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;q1(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,vM)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=B4[(i-s-1)%B4.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new yi(this._lodPlanes[i],u),f=u.uniforms,p=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*sp-1),x=s/g,_=isFinite(s)?1+Math.floor(c*x):sp;_>sp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${sp}`);const v=[];let b=0;for(let M=0;M<sp;++M){const P=M/x,O=Math.exp(-P*P/2);v.push(O),M===0?b+=O:M<_&&(b+=2*O)}for(let M=0;M<v.length;M++)v[M]=v[M]/b;f.envMap.value=e.texture,f.samples.value=_,f.weights.value=v,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:E}=this;f.dTheta.value=g,f.mipInt.value=E-r;const S=this._sizeLods[i],C=3*S*(i>E-$g?i-E+$g:0),D=4*(this._cubeSize-S);q1(t,C,D,3*S,2*S),l.setRenderTarget(t),l.render(h,vM)}}function _be(n){const e=[],t=[],r=[];let i=n;const s=n-$g+1+N4.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-$g?l=N4[o-n+$g-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],p=6,g=6,x=3,_=2,v=1,b=new Float32Array(x*g*p),E=new Float32Array(_*g*p),S=new Float32Array(v*g*p);for(let D=0;D<p;D++){const M=D%3*2/3-1,P=D>2?0:-1,O=[M,P,0,M+2/3,P,0,M+2/3,P+1,0,M,P,0,M+2/3,P+1,0,M,P+1,0];b.set(O,x*g*D),E.set(f,_*g*D);const R=[D,D,D,D,D,D];S.set(R,v*g*D)}const C=new En;C.setAttribute("position",new Yn(b,x)),C.setAttribute("uv",new Yn(E,_)),C.setAttribute("faceIndex",new Yn(S,v)),e.push(C),i>$g&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function F4(n,e,t){const r=new Eu(n,e,t);return r.texture.mapping=$v,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function q1(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function xbe(n,e,t){const r=new Float32Array(sp),i=new pe(0,1,0);return new Nl({name:"SphericalGaussianBlur",defines:{n:sp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:F3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nc,depthTest:!1,depthWrite:!1})}function U4(){return new Nl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:F3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nc,depthTest:!1,depthWrite:!1})}function j4(){return new Nl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:F3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nc,depthTest:!1,depthWrite:!1})}function F3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wbe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===R_||l===I_,c=l===$c||l===Rf;if(u||c){let h=e.get(a);const f=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new gP(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const p=a.image;return u&&p&&p.height>0||c&&p&&i(p)?(t===null&&(t=new gP(n)),h=u?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function bbe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&Dg("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Ebe(n,e,t,r){const i={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);f.removeEventListener("dispose",o),delete i[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function u(h){const f=[],p=h.index,g=h.attributes.position;let x=0;if(p!==null){const b=p.array;x=p.version;for(let E=0,S=b.length;E<S;E+=3){const C=b[E+0],D=b[E+1],M=b[E+2];f.push(C,D,D,M,M,C)}}else if(g!==void 0){const b=g.array;x=g.version;for(let E=0,S=b.length/3-1;E<S;E+=3){const C=E+0,D=E+1,M=E+2;f.push(C,D,D,M,M,C)}}else return;const _=new(Wq(f)?l3:a3)(f,1);_.version=x;const v=s.get(h);v&&e.remove(v),s.set(h,_)}function c(h){const f=s.get(h);if(f){const p=h.index;p!==null&&f.version<p.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function Abe(n,e,t){let r;function i(f){r=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,p){n.drawElements(r,p,s,f*o),t.update(p,r,1)}function u(f,p,g){g!==0&&(n.drawElementsInstanced(r,p,s,f*o,g),t.update(p,r,g))}function c(f,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,f,0,g);let _=0;for(let v=0;v<g;v++)_+=p[v];t.update(_,r,1)}function h(f,p,g,x){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let v=0;v<f.length;v++)u(f[v]/o,p[v],x[v]);else{_.multiDrawElementsInstancedWEBGL(r,p,0,s,f,0,x,0,g);let v=0;for(let b=0;b<g;b++)v+=p[b]*x[b];t.update(v,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function Sbe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Tbe(n,e,t){const r=new WeakMap,i=new Xn;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=c!==void 0?c.length:0;let f=r.get(a);if(f===void 0||f.count!==h){let R=function(){P.dispose(),r.delete(a),a.removeEventListener("dispose",R)};var p=R;f!==void 0&&f.texture.dispose();const g=a.morphAttributes.position!==void 0,x=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],b=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let S=0;g===!0&&(S=1),x===!0&&(S=2),_===!0&&(S=3);let C=a.attributes.position.count*S,D=1;C>e.maxTextureSize&&(D=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const M=new Float32Array(C*D*4*h),P=new bx(M,C,D,h);P.type=Lo,P.needsUpdate=!0;const O=S*4;for(let N=0;N<h;N++){const U=v[N],F=b[N],J=E[N],Z=C*D*4*N;for(let oe=0;oe<U.count;oe++){const ae=oe*O;g===!0&&(i.fromBufferAttribute(U,oe),M[Z+ae+0]=i.x,M[Z+ae+1]=i.y,M[Z+ae+2]=i.z,M[Z+ae+3]=0),x===!0&&(i.fromBufferAttribute(F,oe),M[Z+ae+4]=i.x,M[Z+ae+5]=i.y,M[Z+ae+6]=i.z,M[Z+ae+7]=0),_===!0&&(i.fromBufferAttribute(J,oe),M[Z+ae+8]=i.x,M[Z+ae+9]=i.y,M[Z+ae+10]=i.z,M[Z+ae+11]=J.itemSize===4?i.w:1)}}f={count:h,texture:P,size:new Ze(C,D)},r.set(a,f),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let g=0;for(let _=0;_<u.length;_++)g+=u[_];const x=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",x),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function Cbe(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const qW=new Br,V4=new m3(1,1),WW=new bx,$W=new wS,KW=new Ax,z4=[],H4=[],G4=new Float32Array(16),q4=new Float32Array(9),W4=new Float32Array(4);function ey(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=z4[i];if(s===void 0&&(s=new Float32Array(i),z4[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Xi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Yi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function zS(n,e){let t=H4[e];t===void 0&&(t=new Int32Array(e),H4[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Mbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Rbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2fv(this.addr,e),Yi(t,e)}}function Ibe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Xi(t,e))return;n.uniform3fv(this.addr,e),Yi(t,e)}}function Pbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4fv(this.addr,e),Yi(t,e)}}function kbe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Xi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,r))return;W4.set(r),n.uniformMatrix2fv(this.addr,!1,W4),Yi(t,r)}}function Obe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Xi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,r))return;q4.set(r),n.uniformMatrix3fv(this.addr,!1,q4),Yi(t,r)}}function Dbe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Xi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Yi(t,e)}else{if(Xi(t,r))return;G4.set(r),n.uniformMatrix4fv(this.addr,!1,G4),Yi(t,r)}}function Nbe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Lbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2iv(this.addr,e),Yi(t,e)}}function Bbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xi(t,e))return;n.uniform3iv(this.addr,e),Yi(t,e)}}function Fbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4iv(this.addr,e),Yi(t,e)}}function Ube(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function jbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Xi(t,e))return;n.uniform2uiv(this.addr,e),Yi(t,e)}}function Vbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Xi(t,e))return;n.uniform3uiv(this.addr,e),Yi(t,e)}}function zbe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Xi(t,e))return;n.uniform4uiv(this.addr,e),Yi(t,e)}}function Hbe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(V4.compareFunction=s3,s=V4):s=qW,t.setTexture2D(e||s,i)}function Gbe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||$W,i)}function qbe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||KW,i)}function Wbe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||WW,i)}function $be(n){switch(n){case 5126:return Mbe;case 35664:return Rbe;case 35665:return Ibe;case 35666:return Pbe;case 35674:return kbe;case 35675:return Obe;case 35676:return Dbe;case 5124:case 35670:return Nbe;case 35667:case 35671:return Lbe;case 35668:case 35672:return Bbe;case 35669:case 35673:return Fbe;case 5125:return Ube;case 36294:return jbe;case 36295:return Vbe;case 36296:return zbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Hbe;case 35679:case 36299:case 36307:return Gbe;case 35680:case 36300:case 36308:case 36293:return qbe;case 36289:case 36303:case 36311:case 36292:return Wbe}}function Kbe(n,e){n.uniform1fv(this.addr,e)}function Jbe(n,e){const t=ey(e,this.size,2);n.uniform2fv(this.addr,t)}function Xbe(n,e){const t=ey(e,this.size,3);n.uniform3fv(this.addr,t)}function Ybe(n,e){const t=ey(e,this.size,4);n.uniform4fv(this.addr,t)}function Qbe(n,e){const t=ey(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Zbe(n,e){const t=ey(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eEe(n,e){const t=ey(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tEe(n,e){n.uniform1iv(this.addr,e)}function nEe(n,e){n.uniform2iv(this.addr,e)}function rEe(n,e){n.uniform3iv(this.addr,e)}function iEe(n,e){n.uniform4iv(this.addr,e)}function sEe(n,e){n.uniform1uiv(this.addr,e)}function oEe(n,e){n.uniform2uiv(this.addr,e)}function aEe(n,e){n.uniform3uiv(this.addr,e)}function lEe(n,e){n.uniform4uiv(this.addr,e)}function uEe(n,e,t){const r=this.cache,i=e.length,s=zS(t,i);Xi(r,s)||(n.uniform1iv(this.addr,s),Yi(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||qW,s[o])}function cEe(n,e,t){const r=this.cache,i=e.length,s=zS(t,i);Xi(r,s)||(n.uniform1iv(this.addr,s),Yi(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||$W,s[o])}function hEe(n,e,t){const r=this.cache,i=e.length,s=zS(t,i);Xi(r,s)||(n.uniform1iv(this.addr,s),Yi(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||KW,s[o])}function fEe(n,e,t){const r=this.cache,i=e.length,s=zS(t,i);Xi(r,s)||(n.uniform1iv(this.addr,s),Yi(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||WW,s[o])}function dEe(n){switch(n){case 5126:return Kbe;case 35664:return Jbe;case 35665:return Xbe;case 35666:return Ybe;case 35674:return Qbe;case 35675:return Zbe;case 35676:return eEe;case 5124:case 35670:return tEe;case 35667:case 35671:return nEe;case 35668:case 35672:return rEe;case 35669:case 35673:return iEe;case 5125:return sEe;case 36294:return oEe;case 36295:return aEe;case 36296:return lEe;case 35678:case 36198:case 36298:case 36306:case 35682:return uEe;case 35679:case 36299:case 36307:return cEe;case 35680:case 36300:case 36308:case 36293:return hEe;case 36289:case 36303:case 36311:case 36292:return fEe}}class pEe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=$be(t.type)}}class mEe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=dEe(t.type)}}class gEe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const bM=/(\w+)(\])?(\[|\.)?/g;function $4(n,e){n.seq.push(e),n.map[e.id]=e}function vEe(n,e,t){const r=n.name,i=r.length;for(bM.lastIndex=0;;){const s=bM.exec(r),o=bM.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){$4(t,u===void 0?new pEe(a,n,e):new mEe(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new gEe(a),$4(t,h)),t=h}}}class Sb{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);vEe(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function K4(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const yEe=37297;let _Ee=0;function xEe(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const J4=new bn;function wEe(n){Wn._getMatrix(J4,Wn.workingColorSpace,n);const e=`mat3( ${J4.elements.map(t=>t.toFixed(4))} )`;switch(Wn.getTransfer(n)){case k_:return[e,"LinearTransferOETF"];case ur:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function X4(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xEe(n.getShaderSource(e),o)}else return i}function bEe(n,e){const t=wEe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function EEe(n,e){let t;switch(e){case Aq:t="Linear";break;case Sq:t="Reinhard";break;case Tq:t="Cineon";break;case $O:t="ACESFilmic";break;case Mq:t="AgX";break;case Rq:t="Neutral";break;case Cq:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const W1=new pe;function AEe(){Wn.getLuminanceCoefficients(W1);const n=W1.x.toFixed(4),e=W1.y.toFixed(4),t=W1.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function SEe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(M0).join(`
`)}function TEe(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function CEe(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function M0(n){return n!==""}function Y4(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Q4(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const MEe=/^[ \t]*#include +<([\w\d./]+)>/gm;function vP(n){return n.replace(MEe,IEe)}const REe=new Map;function IEe(n,e){let t=Mn[e];if(t===void 0){const r=REe.get(e);if(r!==void 0)t=Mn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return vP(t)}const PEe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Z4(n){return n.replace(PEe,kEe)}function kEe(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function ej(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function OEe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===cS?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===X0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bl&&(e="SHADOWMAP_TYPE_VSM"),e}function DEe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case $c:case Rf:e="ENVMAP_TYPE_CUBE";break;case $v:e="ENVMAP_TYPE_CUBE_UV";break}return e}function NEe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Rf:e="ENVMAP_MODE_REFRACTION";break}return e}function LEe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case xx:e="ENVMAP_BLENDING_MULTIPLY";break;case bq:e="ENVMAP_BLENDING_MIX";break;case Eq:e="ENVMAP_BLENDING_ADD";break}return e}function BEe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function FEe(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=OEe(t),u=DEe(t),c=NEe(t),h=LEe(t),f=BEe(t),p=SEe(t),g=TEe(s),x=i.createProgram();let _,v,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(M0).join(`
`),_.length>0&&(_+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(M0).join(`
`),v.length>0&&(v+=`
`)):(_=[ej(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(M0).join(`
`),v=[ej(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==gu?"#define TONE_MAPPING":"",t.toneMapping!==gu?Mn.tonemapping_pars_fragment:"",t.toneMapping!==gu?EEe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,bEe("linearToOutputTexel",t.outputColorSpace),AEe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(M0).join(`
`)),o=vP(o),o=Y4(o,t),o=Q4(o,t),a=vP(a),a=Y4(a,t),a=Q4(a,t),o=Z4(o),a=Z4(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,_=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===uP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===uP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=b+_+o,S=b+v+a,C=K4(i,i.VERTEX_SHADER,E),D=K4(i,i.FRAGMENT_SHADER,S);i.attachShader(x,C),i.attachShader(x,D),t.index0AttributeName!==void 0?i.bindAttribLocation(x,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x);function M(N){if(n.debug.checkShaderErrors){const U=i.getProgramInfoLog(x).trim(),F=i.getShaderInfoLog(C).trim(),J=i.getShaderInfoLog(D).trim();let Z=!0,oe=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(Z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,x,C,D);else{const ae=X4(i,C,"vertex"),Q=X4(i,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+U+`
`+ae+`
`+Q)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(F===""||J==="")&&(oe=!1);oe&&(N.diagnostics={runnable:Z,programLog:U,vertexShader:{log:F,prefix:_},fragmentShader:{log:J,prefix:v}})}i.deleteShader(C),i.deleteShader(D),P=new Sb(i,x),O=CEe(i,x)}let P;this.getUniforms=function(){return P===void 0&&M(this),P};let O;this.getAttributes=function(){return O===void 0&&M(this),O};let R=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&&(R=i.getProgramParameter(x,yEe)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=_Ee++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=C,this.fragmentShader=D,this}let UEe=0;class jEe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new VEe(e),t.set(e,r)),r}}class VEe{constructor(e){this.id=UEe++,this.code=e,this.usedTimes=0}}function zEe(n,e,t,r,i,s,o){const a=new Mp,l=new jEe,u=new Set,c=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(O){return u.add(O),O===0?"uv":`uv${O}`}function _(O,R,N,U,F){const J=U.fog,Z=F.geometry,oe=O.isMeshStandardMaterial?U.environment:null,ae=(O.isMeshStandardMaterial?t:e).get(O.envMap||oe),Q=ae&&ae.mapping===$v?ae.image.height:null,ee=g[O.type];O.precision!==null&&(p=i.getMaxPrecision(O.precision),p!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",p,"instead."));const Y=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,V=Y!==void 0?Y.length:0;let X=0;Z.morphAttributes.position!==void 0&&(X=1),Z.morphAttributes.normal!==void 0&&(X=2),Z.morphAttributes.color!==void 0&&(X=3);let re,se,he,te;if(ee){const An=Al[ee];re=An.vertexShader,se=An.fragmentShader}else re=O.vertexShader,se=O.fragmentShader,l.update(O),he=l.getVertexShaderID(O),te=l.getFragmentShaderID(O);const ce=n.getRenderTarget(),ve=n.state.buffers.depth.getReversed(),xe=F.isInstancedMesh===!0,Te=F.isBatchedMesh===!0,$e=!!O.map,De=!!O.matcap,Be=!!ae,fe=!!O.aoMap,it=!!O.lightMap,Je=!!O.bumpMap,rt=!!O.normalMap,we=!!O.displacementMap,Ie=!!O.emissiveMap,Ne=!!O.metalnessMap,ie=!!O.roughnessMap,q=O.anisotropy>0,me=O.clearcoat>0,de=O.dispersion>0,ye=O.iridescence>0,be=O.sheen>0,He=O.transmission>0,qe=q&&!!O.anisotropyMap,lt=me&&!!O.clearcoatMap,vt=me&&!!O.clearcoatNormalMap,Ye=me&&!!O.clearcoatRoughnessMap,yt=ye&&!!O.iridescenceMap,Ot=ye&&!!O.iridescenceThicknessMap,jt=be&&!!O.sheenColorMap,Et=be&&!!O.sheenRoughnessMap,on=!!O.specularMap,qt=!!O.specularColorMap,Rn=!!O.specularIntensityMap,Ae=He&&!!O.transmissionMap,mt=He&&!!O.thicknessMap,Ge=!!O.gradientMap,Xe=!!O.alphaMap,_t=O.alphaTest>0,dt=!!O.alphaHash,Zt=!!O.extensions;let Qn=gu;O.toneMapped&&(ce===null||ce.isXRRenderTarget===!0)&&(Qn=n.toneMapping);const Tr={shaderID:ee,shaderType:O.type,shaderName:O.name,vertexShader:re,fragmentShader:se,defines:O.defines,customVertexShaderID:he,customFragmentShaderID:te,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:p,batching:Te,batchingColor:Te&&F._colorsTexture!==null,instancing:xe,instancingColor:xe&&F.instanceColor!==null,instancingMorph:xe&&F.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ce===null?n.outputColorSpace:ce.isXRRenderTarget===!0?ce.texture.colorSpace:qp,alphaToCoverage:!!O.alphaToCoverage,map:$e,matcap:De,envMap:Be,envMapMode:Be&&ae.mapping,envMapCubeUVHeight:Q,aoMap:fe,lightMap:it,bumpMap:Je,normalMap:rt,displacementMap:f&&we,emissiveMap:Ie,normalMapObjectSpace:rt&&O.normalMapType===Bq,normalMapTangentSpace:rt&&O.normalMapType===Vf,metalnessMap:Ne,roughnessMap:ie,anisotropy:q,anisotropyMap:qe,clearcoat:me,clearcoatMap:lt,clearcoatNormalMap:vt,clearcoatRoughnessMap:Ye,dispersion:de,iridescence:ye,iridescenceMap:yt,iridescenceThicknessMap:Ot,sheen:be,sheenColorMap:jt,sheenRoughnessMap:Et,specularMap:on,specularColorMap:qt,specularIntensityMap:Rn,transmission:He,transmissionMap:Ae,thicknessMap:mt,gradientMap:Ge,opaque:O.transparent===!1&&O.blending===Sp&&O.alphaToCoverage===!1,alphaMap:Xe,alphaTest:_t,alphaHash:dt,combine:O.combine,mapUv:$e&&x(O.map.channel),aoMapUv:fe&&x(O.aoMap.channel),lightMapUv:it&&x(O.lightMap.channel),bumpMapUv:Je&&x(O.bumpMap.channel),normalMapUv:rt&&x(O.normalMap.channel),displacementMapUv:we&&x(O.displacementMap.channel),emissiveMapUv:Ie&&x(O.emissiveMap.channel),metalnessMapUv:Ne&&x(O.metalnessMap.channel),roughnessMapUv:ie&&x(O.roughnessMap.channel),anisotropyMapUv:qe&&x(O.anisotropyMap.channel),clearcoatMapUv:lt&&x(O.clearcoatMap.channel),clearcoatNormalMapUv:vt&&x(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ye&&x(O.clearcoatRoughnessMap.channel),iridescenceMapUv:yt&&x(O.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&x(O.iridescenceThicknessMap.channel),sheenColorMapUv:jt&&x(O.sheenColorMap.channel),sheenRoughnessMapUv:Et&&x(O.sheenRoughnessMap.channel),specularMapUv:on&&x(O.specularMap.channel),specularColorMapUv:qt&&x(O.specularColorMap.channel),specularIntensityMapUv:Rn&&x(O.specularIntensityMap.channel),transmissionMapUv:Ae&&x(O.transmissionMap.channel),thicknessMapUv:mt&&x(O.thicknessMap.channel),alphaMapUv:Xe&&x(O.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(rt||q),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!Z.attributes.uv&&($e||Xe),fog:!!J,useFog:O.fog===!0,fogExp2:!!J&&J.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:ve,skinning:F.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:X,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Qn,decodeVideoTexture:$e&&O.map.isVideoTexture===!0&&Wn.getTransfer(O.map.colorSpace)===ur,decodeVideoTextureEmissive:Ie&&O.emissiveMap.isVideoTexture===!0&&Wn.getTransfer(O.emissiveMap.colorSpace)===ur,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===Sl,flipSided:O.side===yo,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Zt&&O.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Zt&&O.extensions.multiDraw===!0||Te)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Tr.vertexUv1s=u.has(1),Tr.vertexUv2s=u.has(2),Tr.vertexUv3s=u.has(3),u.clear(),Tr}function v(O){const R=[];if(O.shaderID?R.push(O.shaderID):(R.push(O.customVertexShaderID),R.push(O.customFragmentShaderID)),O.defines!==void 0)for(const N in O.defines)R.push(N),R.push(O.defines[N]);return O.isRawShaderMaterial===!1&&(b(R,O),E(R,O),R.push(n.outputColorSpace)),R.push(O.customProgramCacheKey),R.join()}function b(O,R){O.push(R.precision),O.push(R.outputColorSpace),O.push(R.envMapMode),O.push(R.envMapCubeUVHeight),O.push(R.mapUv),O.push(R.alphaMapUv),O.push(R.lightMapUv),O.push(R.aoMapUv),O.push(R.bumpMapUv),O.push(R.normalMapUv),O.push(R.displacementMapUv),O.push(R.emissiveMapUv),O.push(R.metalnessMapUv),O.push(R.roughnessMapUv),O.push(R.anisotropyMapUv),O.push(R.clearcoatMapUv),O.push(R.clearcoatNormalMapUv),O.push(R.clearcoatRoughnessMapUv),O.push(R.iridescenceMapUv),O.push(R.iridescenceThicknessMapUv),O.push(R.sheenColorMapUv),O.push(R.sheenRoughnessMapUv),O.push(R.specularMapUv),O.push(R.specularColorMapUv),O.push(R.specularIntensityMapUv),O.push(R.transmissionMapUv),O.push(R.thicknessMapUv),O.push(R.combine),O.push(R.fogExp2),O.push(R.sizeAttenuation),O.push(R.morphTargetsCount),O.push(R.morphAttributeCount),O.push(R.numDirLights),O.push(R.numPointLights),O.push(R.numSpotLights),O.push(R.numSpotLightMaps),O.push(R.numHemiLights),O.push(R.numRectAreaLights),O.push(R.numDirLightShadows),O.push(R.numPointLightShadows),O.push(R.numSpotLightShadows),O.push(R.numSpotLightShadowsWithMaps),O.push(R.numLightProbes),O.push(R.shadowMapType),O.push(R.toneMapping),O.push(R.numClippingPlanes),O.push(R.numClipIntersection),O.push(R.depthPacking)}function E(O,R){a.disableAll(),R.supportsVertexTextures&&a.enable(0),R.instancing&&a.enable(1),R.instancingColor&&a.enable(2),R.instancingMorph&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),R.alphaHash&&a.enable(18),R.batching&&a.enable(19),R.dispersion&&a.enable(20),R.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.reverseDepthBuffer&&a.enable(4),R.skinning&&a.enable(5),R.morphTargets&&a.enable(6),R.morphNormals&&a.enable(7),R.morphColors&&a.enable(8),R.premultipliedAlpha&&a.enable(9),R.shadowMapEnabled&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),R.decodeVideoTextureEmissive&&a.enable(20),R.alphaToCoverage&&a.enable(21),O.push(a.mask)}function S(O){const R=g[O.type];let N;if(R){const U=Al[R];N=Yq.clone(U.uniforms)}else N=O.uniforms;return N}function C(O,R){let N;for(let U=0,F=c.length;U<F;U++){const J=c[U];if(J.cacheKey===R){N=J,++N.usedTimes;break}}return N===void 0&&(N=new FEe(n,R,O,s),c.push(N)),N}function D(O){if(--O.usedTimes===0){const R=c.indexOf(O);c[R]=c[c.length-1],c.pop(),O.destroy()}}function M(O){l.remove(O)}function P(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:S,acquireProgram:C,releaseProgram:D,releaseShaderCache:M,programs:c,dispose:P}}function HEe(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function GEe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function tj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function nj(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,f,p,g,x,_){let v=n[e];return v===void 0?(v={id:h.id,object:h,geometry:f,material:p,groupOrder:g,renderOrder:h.renderOrder,z:x,group:_},n[e]=v):(v.id=h.id,v.object=h,v.geometry=f,v.material=p,v.groupOrder=g,v.renderOrder=h.renderOrder,v.z=x,v.group=_),e++,v}function a(h,f,p,g,x,_){const v=o(h,f,p,g,x,_);p.transmission>0?r.push(v):p.transparent===!0?i.push(v):t.push(v)}function l(h,f,p,g,x,_){const v=o(h,f,p,g,x,_);p.transmission>0?r.unshift(v):p.transparent===!0?i.unshift(v):t.unshift(v)}function u(h,f){t.length>1&&t.sort(h||GEe),r.length>1&&r.sort(f||tj),i.length>1&&i.sort(f||tj)}function c(){for(let h=e,f=n.length;h<f;h++){const p=n[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function qEe(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new nj,n.set(r,[o])):i>=s.length?(o=new nj,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function WEe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new pe,color:new bt};break;case"SpotLight":t={position:new pe,direction:new pe,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new pe,color:new bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new pe,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":t={color:new bt,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return n[e.id]=t,t}}}function $Ee(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let KEe=0;function JEe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function XEe(n){const e=new WEe,t=$Ee(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new pe);const i=new pe,s=new Yt,o=new Yt;function a(u){let c=0,h=0,f=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let p=0,g=0,x=0,_=0,v=0,b=0,E=0,S=0,C=0,D=0,M=0;u.sort(JEe);for(let O=0,R=u.length;O<R;O++){const N=u[O],U=N.color,F=N.intensity,J=N.distance,Z=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)c+=U.r*F,h+=U.g*F,f+=U.b*F;else if(N.isLightProbe){for(let oe=0;oe<9;oe++)r.probe[oe].addScaledVector(N.sh.coefficients[oe],F);M++}else if(N.isDirectionalLight){const oe=e.get(N);if(oe.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const ae=N.shadow,Q=t.get(N);Q.shadowIntensity=ae.intensity,Q.shadowBias=ae.bias,Q.shadowNormalBias=ae.normalBias,Q.shadowRadius=ae.radius,Q.shadowMapSize=ae.mapSize,r.directionalShadow[p]=Q,r.directionalShadowMap[p]=Z,r.directionalShadowMatrix[p]=N.shadow.matrix,b++}r.directional[p]=oe,p++}else if(N.isSpotLight){const oe=e.get(N);oe.position.setFromMatrixPosition(N.matrixWorld),oe.color.copy(U).multiplyScalar(F),oe.distance=J,oe.coneCos=Math.cos(N.angle),oe.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),oe.decay=N.decay,r.spot[x]=oe;const ae=N.shadow;if(N.map&&(r.spotLightMap[C]=N.map,C++,ae.updateMatrices(N),N.castShadow&&D++),r.spotLightMatrix[x]=ae.matrix,N.castShadow){const Q=t.get(N);Q.shadowIntensity=ae.intensity,Q.shadowBias=ae.bias,Q.shadowNormalBias=ae.normalBias,Q.shadowRadius=ae.radius,Q.shadowMapSize=ae.mapSize,r.spotShadow[x]=Q,r.spotShadowMap[x]=Z,S++}x++}else if(N.isRectAreaLight){const oe=e.get(N);oe.color.copy(U).multiplyScalar(F),oe.halfWidth.set(N.width*.5,0,0),oe.halfHeight.set(0,N.height*.5,0),r.rectArea[_]=oe,_++}else if(N.isPointLight){const oe=e.get(N);if(oe.color.copy(N.color).multiplyScalar(N.intensity),oe.distance=N.distance,oe.decay=N.decay,N.castShadow){const ae=N.shadow,Q=t.get(N);Q.shadowIntensity=ae.intensity,Q.shadowBias=ae.bias,Q.shadowNormalBias=ae.normalBias,Q.shadowRadius=ae.radius,Q.shadowMapSize=ae.mapSize,Q.shadowCameraNear=ae.camera.near,Q.shadowCameraFar=ae.camera.far,r.pointShadow[g]=Q,r.pointShadowMap[g]=Z,r.pointShadowMatrix[g]=N.shadow.matrix,E++}r.point[g]=oe,g++}else if(N.isHemisphereLight){const oe=e.get(N);oe.skyColor.copy(N.color).multiplyScalar(F),oe.groundColor.copy(N.groundColor).multiplyScalar(F),r.hemi[v]=oe,v++}}_>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=wt.LTC_FLOAT_1,r.rectAreaLTC2=wt.LTC_FLOAT_2):(r.rectAreaLTC1=wt.LTC_HALF_1,r.rectAreaLTC2=wt.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=h,r.ambient[2]=f;const P=r.hash;(P.directionalLength!==p||P.pointLength!==g||P.spotLength!==x||P.rectAreaLength!==_||P.hemiLength!==v||P.numDirectionalShadows!==b||P.numPointShadows!==E||P.numSpotShadows!==S||P.numSpotMaps!==C||P.numLightProbes!==M)&&(r.directional.length=p,r.spot.length=x,r.rectArea.length=_,r.point.length=g,r.hemi.length=v,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=S+C-D,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=D,r.numLightProbes=M,P.directionalLength=p,P.pointLength=g,P.spotLength=x,P.rectAreaLength=_,P.hemiLength=v,P.numDirectionalShadows=b,P.numPointShadows=E,P.numSpotShadows=S,P.numSpotMaps=C,P.numLightProbes=M,r.version=KEe++)}function l(u,c){let h=0,f=0,p=0,g=0,x=0;const _=c.matrixWorldInverse;for(let v=0,b=u.length;v<b;v++){const E=u[v];if(E.isDirectionalLight){const S=r.directional[h];S.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(_),h++}else if(E.isSpotLight){const S=r.spot[p];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(_),S.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(_),p++}else if(E.isRectAreaLight){const S=r.rectArea[g];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(_),o.identity(),s.copy(E.matrixWorld),s.premultiply(_),o.extractRotation(s),S.halfWidth.set(E.width*.5,0,0),S.halfHeight.set(0,E.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),g++}else if(E.isPointLight){const S=r.point[f];S.position.setFromMatrixPosition(E.matrixWorld),S.position.applyMatrix4(_),f++}else if(E.isHemisphereLight){const S=r.hemi[x];S.direction.setFromMatrixPosition(E.matrixWorld),S.direction.transformDirection(_),x++}}}return{setup:a,setupView:l,state:r}}function rj(n){const e=new XEe(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function s(c){t.push(c)}function o(c){r.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function YEe(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new rj(n),e.set(i,[a])):s>=o.length?(a=new rj(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const QEe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ZEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eAe(n,e,t){let r=new Cx;const i=new Ze,s=new Ze,o=new Xn,a=new b3({depthPacking:Lq}),l=new E3,u={},c=t.maxTextureSize,h={[bu]:yo,[yo]:bu,[Sl]:Sl},f=new Nl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:QEe,fragmentShader:ZEe}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const g=new En;g.setAttribute("position",new Yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new yi(g,f),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=cS;let v=this.type;this.render=function(D,M,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||D.length===0)return;const O=n.getRenderTarget(),R=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),U=n.state;U.setBlending(Nc),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const F=v!==bl&&this.type===bl,J=v===bl&&this.type!==bl;for(let Z=0,oe=D.length;Z<oe;Z++){const ae=D[Z],Q=ae.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const ee=Q.getFrameExtents();if(i.multiply(ee),s.copy(Q.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/ee.x),i.x=s.x*ee.x,Q.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/ee.y),i.y=s.y*ee.y,Q.mapSize.y=s.y)),Q.map===null||F===!0||J===!0){const V=this.type!==bl?{minFilter:hs,magFilter:hs}:{};Q.map!==null&&Q.map.dispose(),Q.map=new Eu(i.x,i.y,V),Q.map.texture.name=ae.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const Y=Q.getViewportCount();for(let V=0;V<Y;V++){const X=Q.getViewport(V);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),U.viewport(o),Q.updateMatrices(ae,V),r=Q.getFrustum(),S(M,P,Q.camera,ae,this.type)}Q.isPointLightShadow!==!0&&this.type===bl&&b(Q,P),Q.needsUpdate=!1}v=this.type,_.needsUpdate=!1,n.setRenderTarget(O,R,N)};function b(D,M){const P=e.update(x);f.defines.VSM_SAMPLES!==D.blurSamples&&(f.defines.VSM_SAMPLES=D.blurSamples,p.defines.VSM_SAMPLES=D.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new Eu(i.x,i.y)),f.uniforms.shadow_pass.value=D.map.texture,f.uniforms.resolution.value=D.mapSize,f.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(M,null,P,f,x,null),p.uniforms.shadow_pass.value=D.mapPass.texture,p.uniforms.resolution.value=D.mapSize,p.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(M,null,P,p,x,null)}function E(D,M,P,O){let R=null;const N=P.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(N!==void 0)R=N;else if(R=P.isPointLight===!0?l:a,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0){const U=R.uuid,F=M.uuid;let J=u[U];J===void 0&&(J={},u[U]=J);let Z=J[F];Z===void 0&&(Z=R.clone(),J[F]=Z,M.addEventListener("dispose",C)),R=Z}if(R.visible=M.visible,R.wireframe=M.wireframe,O===bl?R.side=M.shadowSide!==null?M.shadowSide:M.side:R.side=M.shadowSide!==null?M.shadowSide:h[M.side],R.alphaMap=M.alphaMap,R.alphaTest=M.alphaTest,R.map=M.map,R.clipShadows=M.clipShadows,R.clippingPlanes=M.clippingPlanes,R.clipIntersection=M.clipIntersection,R.displacementMap=M.displacementMap,R.displacementScale=M.displacementScale,R.displacementBias=M.displacementBias,R.wireframeLinewidth=M.wireframeLinewidth,R.linewidth=M.linewidth,P.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const U=n.properties.get(R);U.light=P}return R}function S(D,M,P,O,R){if(D.visible===!1)return;if(D.layers.test(M.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&R===bl)&&(!D.frustumCulled||r.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,D.matrixWorld);const F=e.update(D),J=D.material;if(Array.isArray(J)){const Z=F.groups;for(let oe=0,ae=Z.length;oe<ae;oe++){const Q=Z[oe],ee=J[Q.materialIndex];if(ee&&ee.visible){const Y=E(D,ee,O,R);D.onBeforeShadow(n,D,M,P,F,Y,Q),n.renderBufferDirect(P,null,F,Y,D,Q),D.onAfterShadow(n,D,M,P,F,Y,Q)}}}else if(J.visible){const Z=E(D,J,O,R);D.onBeforeShadow(n,D,M,P,F,Z,null),n.renderBufferDirect(P,null,F,Z,D,null),D.onAfterShadow(n,D,M,P,F,Z,null)}}const U=D.children;for(let F=0,J=U.length;F<J;F++)S(U[F],M,P,O,R)}function C(D){D.target.removeEventListener("dispose",C);for(const P in u){const O=u[P],R=D.target.uuid;R in O&&(O[R].dispose(),delete O[R])}}}const tAe={[xE]:wE,[bE]:SE,[EE]:TE,[zp]:AE,[wE]:xE,[SE]:bE,[TE]:EE,[AE]:zp};function nAe(n,e){function t(){let Ae=!1;const mt=new Xn;let Ge=null;const Xe=new Xn(0,0,0,0);return{setMask:function(_t){Ge!==_t&&!Ae&&(n.colorMask(_t,_t,_t,_t),Ge=_t)},setLocked:function(_t){Ae=_t},setClear:function(_t,dt,Zt,Qn,Tr){Tr===!0&&(_t*=Qn,dt*=Qn,Zt*=Qn),mt.set(_t,dt,Zt,Qn),Xe.equals(mt)===!1&&(n.clearColor(_t,dt,Zt,Qn),Xe.copy(mt))},reset:function(){Ae=!1,Ge=null,Xe.set(-1,0,0,0)}}}function r(){let Ae=!1,mt=!1,Ge=null,Xe=null,_t=null;return{setReversed:function(dt){if(mt!==dt){const Zt=e.get("EXT_clip_control");mt?Zt.clipControlEXT(Zt.LOWER_LEFT_EXT,Zt.ZERO_TO_ONE_EXT):Zt.clipControlEXT(Zt.LOWER_LEFT_EXT,Zt.NEGATIVE_ONE_TO_ONE_EXT);const Qn=_t;_t=null,this.setClear(Qn)}mt=dt},getReversed:function(){return mt},setTest:function(dt){dt?ce(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(dt){Ge!==dt&&!Ae&&(n.depthMask(dt),Ge=dt)},setFunc:function(dt){if(mt&&(dt=tAe[dt]),Xe!==dt){switch(dt){case xE:n.depthFunc(n.NEVER);break;case wE:n.depthFunc(n.ALWAYS);break;case bE:n.depthFunc(n.LESS);break;case zp:n.depthFunc(n.LEQUAL);break;case EE:n.depthFunc(n.EQUAL);break;case AE:n.depthFunc(n.GEQUAL);break;case SE:n.depthFunc(n.GREATER);break;case TE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=dt}},setLocked:function(dt){Ae=dt},setClear:function(dt){_t!==dt&&(mt&&(dt=1-dt),n.clearDepth(dt),_t=dt)},reset:function(){Ae=!1,Ge=null,Xe=null,_t=null,mt=!1}}}function i(){let Ae=!1,mt=null,Ge=null,Xe=null,_t=null,dt=null,Zt=null,Qn=null,Tr=null;return{setTest:function(An){Ae||(An?ce(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(An){mt!==An&&!Ae&&(n.stencilMask(An),mt=An)},setFunc:function(An,_i,Kn){(Ge!==An||Xe!==_i||_t!==Kn)&&(n.stencilFunc(An,_i,Kn),Ge=An,Xe=_i,_t=Kn)},setOp:function(An,_i,Kn){(dt!==An||Zt!==_i||Qn!==Kn)&&(n.stencilOp(An,_i,Kn),dt=An,Zt=_i,Qn=Kn)},setLocked:function(An){Ae=An},setClear:function(An){Tr!==An&&(n.clearStencil(An),Tr=An)},reset:function(){Ae=!1,mt=null,Ge=null,Xe=null,_t=null,dt=null,Zt=null,Qn=null,Tr=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,u=new WeakMap;let c={},h={},f=new WeakMap,p=[],g=null,x=!1,_=null,v=null,b=null,E=null,S=null,C=null,D=null,M=new bt(0,0,0),P=0,O=!1,R=null,N=null,U=null,F=null,J=null;const Z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let oe=!1,ae=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(ae=parseFloat(/^WebGL (\d)/.exec(Q)[1]),oe=ae>=1):Q.indexOf("OpenGL ES")!==-1&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),oe=ae>=2);let ee=null,Y={};const V=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),re=new Xn().fromArray(V),se=new Xn().fromArray(X);function he(Ae,mt,Ge,Xe){const _t=new Uint8Array(4),dt=n.createTexture();n.bindTexture(Ae,dt),n.texParameteri(Ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Zt=0;Zt<Ge;Zt++)Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?n.texImage3D(mt,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,_t):n.texImage2D(mt+Zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_t);return dt}const te={};te[n.TEXTURE_2D]=he(n.TEXTURE_2D,n.TEXTURE_2D,1),te[n.TEXTURE_CUBE_MAP]=he(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),te[n.TEXTURE_2D_ARRAY]=he(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),te[n.TEXTURE_3D]=he(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ce(n.DEPTH_TEST),o.setFunc(zp),Je(!1),rt(rP),ce(n.CULL_FACE),fe(Nc);function ce(Ae){c[Ae]!==!0&&(n.enable(Ae),c[Ae]=!0)}function ve(Ae){c[Ae]!==!1&&(n.disable(Ae),c[Ae]=!1)}function xe(Ae,mt){return h[Ae]!==mt?(n.bindFramebuffer(Ae,mt),h[Ae]=mt,Ae===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=mt),Ae===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=mt),!0):!1}function Te(Ae,mt){let Ge=p,Xe=!1;if(Ae){Ge=f.get(mt),Ge===void 0&&(Ge=[],f.set(mt,Ge));const _t=Ae.textures;if(Ge.length!==_t.length||Ge[0]!==n.COLOR_ATTACHMENT0){for(let dt=0,Zt=_t.length;dt<Zt;dt++)Ge[dt]=n.COLOR_ATTACHMENT0+dt;Ge.length=_t.length,Xe=!0}}else Ge[0]!==n.BACK&&(Ge[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(Ge)}function $e(Ae){return g!==Ae?(n.useProgram(Ae),g=Ae,!0):!1}const De={[sf]:n.FUNC_ADD,[sq]:n.FUNC_SUBTRACT,[oq]:n.FUNC_REVERSE_SUBTRACT};De[aq]=n.MIN,De[lq]=n.MAX;const Be={[uq]:n.ZERO,[cq]:n.ONE,[hq]:n.SRC_COLOR,[yE]:n.SRC_ALPHA,[vq]:n.SRC_ALPHA_SATURATE,[mq]:n.DST_COLOR,[dq]:n.DST_ALPHA,[fq]:n.ONE_MINUS_SRC_COLOR,[_E]:n.ONE_MINUS_SRC_ALPHA,[gq]:n.ONE_MINUS_DST_COLOR,[pq]:n.ONE_MINUS_DST_ALPHA,[yq]:n.CONSTANT_COLOR,[_q]:n.ONE_MINUS_CONSTANT_COLOR,[xq]:n.CONSTANT_ALPHA,[wq]:n.ONE_MINUS_CONSTANT_ALPHA};function fe(Ae,mt,Ge,Xe,_t,dt,Zt,Qn,Tr,An){if(Ae===Nc){x===!0&&(ve(n.BLEND),x=!1);return}if(x===!1&&(ce(n.BLEND),x=!0),Ae!==iq){if(Ae!==_||An!==O){if((v!==sf||S!==sf)&&(n.blendEquation(n.FUNC_ADD),v=sf,S=sf),An)switch(Ae){case Sp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case iP:n.blendFunc(n.ONE,n.ONE);break;case sP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case oP:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Sp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case iP:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case sP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case oP:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}b=null,E=null,C=null,D=null,M.set(0,0,0),P=0,_=Ae,O=An}return}_t=_t||mt,dt=dt||Ge,Zt=Zt||Xe,(mt!==v||_t!==S)&&(n.blendEquationSeparate(De[mt],De[_t]),v=mt,S=_t),(Ge!==b||Xe!==E||dt!==C||Zt!==D)&&(n.blendFuncSeparate(Be[Ge],Be[Xe],Be[dt],Be[Zt]),b=Ge,E=Xe,C=dt,D=Zt),(Qn.equals(M)===!1||Tr!==P)&&(n.blendColor(Qn.r,Qn.g,Qn.b,Tr),M.copy(Qn),P=Tr),_=Ae,O=!1}function it(Ae,mt){Ae.side===Sl?ve(n.CULL_FACE):ce(n.CULL_FACE);let Ge=Ae.side===yo;mt&&(Ge=!Ge),Je(Ge),Ae.blending===Sp&&Ae.transparent===!1?fe(Nc):fe(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),o.setFunc(Ae.depthFunc),o.setTest(Ae.depthTest),o.setMask(Ae.depthWrite),s.setMask(Ae.colorWrite);const Xe=Ae.stencilWrite;a.setTest(Xe),Xe&&(a.setMask(Ae.stencilWriteMask),a.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),a.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),Ie(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?ce(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Je(Ae){R!==Ae&&(Ae?n.frontFace(n.CW):n.frontFace(n.CCW),R=Ae)}function rt(Ae){Ae!==tq?(ce(n.CULL_FACE),Ae!==N&&(Ae===rP?n.cullFace(n.BACK):Ae===nq?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ve(n.CULL_FACE),N=Ae}function we(Ae){Ae!==U&&(oe&&n.lineWidth(Ae),U=Ae)}function Ie(Ae,mt,Ge){Ae?(ce(n.POLYGON_OFFSET_FILL),(F!==mt||J!==Ge)&&(n.polygonOffset(mt,Ge),F=mt,J=Ge)):ve(n.POLYGON_OFFSET_FILL)}function Ne(Ae){Ae?ce(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function ie(Ae){Ae===void 0&&(Ae=n.TEXTURE0+Z-1),ee!==Ae&&(n.activeTexture(Ae),ee=Ae)}function q(Ae,mt,Ge){Ge===void 0&&(ee===null?Ge=n.TEXTURE0+Z-1:Ge=ee);let Xe=Y[Ge];Xe===void 0&&(Xe={type:void 0,texture:void 0},Y[Ge]=Xe),(Xe.type!==Ae||Xe.texture!==mt)&&(ee!==Ge&&(n.activeTexture(Ge),ee=Ge),n.bindTexture(Ae,mt||te[Ae]),Xe.type=Ae,Xe.texture=mt)}function me(){const Ae=Y[ee];Ae!==void 0&&Ae.type!==void 0&&(n.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function de(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ye(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function be(){try{n.texSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function qe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function lt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function vt(){try{n.texStorage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ye(){try{n.texStorage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function yt(){try{n.texImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ot(){try{n.texImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function jt(Ae){re.equals(Ae)===!1&&(n.scissor(Ae.x,Ae.y,Ae.z,Ae.w),re.copy(Ae))}function Et(Ae){se.equals(Ae)===!1&&(n.viewport(Ae.x,Ae.y,Ae.z,Ae.w),se.copy(Ae))}function on(Ae,mt){let Ge=u.get(mt);Ge===void 0&&(Ge=new WeakMap,u.set(mt,Ge));let Xe=Ge.get(Ae);Xe===void 0&&(Xe=n.getUniformBlockIndex(mt,Ae.name),Ge.set(Ae,Xe))}function qt(Ae,mt){const Xe=u.get(mt).get(Ae);l.get(mt)!==Xe&&(n.uniformBlockBinding(mt,Xe,Ae.__bindingPointIndex),l.set(mt,Xe))}function Rn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},ee=null,Y={},h={},f=new WeakMap,p=[],g=null,x=!1,_=null,v=null,b=null,E=null,S=null,C=null,D=null,M=new bt(0,0,0),P=0,O=!1,R=null,N=null,U=null,F=null,J=null,re.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ce,disable:ve,bindFramebuffer:xe,drawBuffers:Te,useProgram:$e,setBlending:fe,setMaterial:it,setFlipSided:Je,setCullFace:rt,setLineWidth:we,setPolygonOffset:Ie,setScissorTest:Ne,activeTexture:ie,bindTexture:q,unbindTexture:me,compressedTexImage2D:de,compressedTexImage3D:ye,texImage2D:yt,texImage3D:Ot,updateUBOMapping:on,uniformBlockBinding:qt,texStorage2D:vt,texStorage3D:Ye,texSubImage2D:be,texSubImage3D:He,compressedTexSubImage2D:qe,compressedTexSubImage3D:lt,scissor:jt,viewport:Et,reset:Rn}}function rAe(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ze,c=new WeakMap;let h;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(ie,q){return p?new OffscreenCanvas(ie,q):N_("canvas")}function x(ie,q,me){let de=1;const ye=Ne(ie);if((ye.width>me||ye.height>me)&&(de=me/Math.max(ye.width,ye.height)),de<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const be=Math.floor(de*ye.width),He=Math.floor(de*ye.height);h===void 0&&(h=g(be,He));const qe=q?g(be,He):h;return qe.width=be,qe.height=He,qe.getContext("2d").drawImage(ie,0,0,be,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+be+"x"+He+")."),qe}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),ie;return ie}function _(ie){return ie.generateMipmaps}function v(ie){n.generateMipmap(ie)}function b(ie){return ie.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ie.isWebGL3DRenderTarget?n.TEXTURE_3D:ie.isWebGLArrayRenderTarget||ie.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(ie,q,me,de,ye=!1){if(ie!==null){if(n[ie]!==void 0)return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let be=q;if(q===n.RED&&(me===n.FLOAT&&(be=n.R32F),me===n.HALF_FLOAT&&(be=n.R16F),me===n.UNSIGNED_BYTE&&(be=n.R8)),q===n.RED_INTEGER&&(me===n.UNSIGNED_BYTE&&(be=n.R8UI),me===n.UNSIGNED_SHORT&&(be=n.R16UI),me===n.UNSIGNED_INT&&(be=n.R32UI),me===n.BYTE&&(be=n.R8I),me===n.SHORT&&(be=n.R16I),me===n.INT&&(be=n.R32I)),q===n.RG&&(me===n.FLOAT&&(be=n.RG32F),me===n.HALF_FLOAT&&(be=n.RG16F),me===n.UNSIGNED_BYTE&&(be=n.RG8)),q===n.RG_INTEGER&&(me===n.UNSIGNED_BYTE&&(be=n.RG8UI),me===n.UNSIGNED_SHORT&&(be=n.RG16UI),me===n.UNSIGNED_INT&&(be=n.RG32UI),me===n.BYTE&&(be=n.RG8I),me===n.SHORT&&(be=n.RG16I),me===n.INT&&(be=n.RG32I)),q===n.RGB_INTEGER&&(me===n.UNSIGNED_BYTE&&(be=n.RGB8UI),me===n.UNSIGNED_SHORT&&(be=n.RGB16UI),me===n.UNSIGNED_INT&&(be=n.RGB32UI),me===n.BYTE&&(be=n.RGB8I),me===n.SHORT&&(be=n.RGB16I),me===n.INT&&(be=n.RGB32I)),q===n.RGBA_INTEGER&&(me===n.UNSIGNED_BYTE&&(be=n.RGBA8UI),me===n.UNSIGNED_SHORT&&(be=n.RGBA16UI),me===n.UNSIGNED_INT&&(be=n.RGBA32UI),me===n.BYTE&&(be=n.RGBA8I),me===n.SHORT&&(be=n.RGBA16I),me===n.INT&&(be=n.RGBA32I)),q===n.RGB&&me===n.UNSIGNED_INT_5_9_9_9_REV&&(be=n.RGB9_E5),q===n.RGBA){const He=ye?k_:Wn.getTransfer(de);me===n.FLOAT&&(be=n.RGBA32F),me===n.HALF_FLOAT&&(be=n.RGBA16F),me===n.UNSIGNED_BYTE&&(be=He===ur?n.SRGB8_ALPHA8:n.RGBA8),me===n.UNSIGNED_SHORT_4_4_4_4&&(be=n.RGBA4),me===n.UNSIGNED_SHORT_5_5_5_1&&(be=n.RGB5_A1)}return(be===n.R16F||be===n.R32F||be===n.RG16F||be===n.RG32F||be===n.RGBA16F||be===n.RGBA32F)&&e.get("EXT_color_buffer_float"),be}function S(ie,q){let me;return ie?q===null||q===Kc||q===Hp?me=n.DEPTH24_STENCIL8:q===Lo?me=n.DEPTH32F_STENCIL8:q===_v&&(me=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Kc||q===Hp?me=n.DEPTH_COMPONENT24:q===Lo?me=n.DEPTH_COMPONENT32F:q===_v&&(me=n.DEPTH_COMPONENT16),me}function C(ie,q){return _(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==hs&&ie.minFilter!==vi?Math.log2(Math.max(q.width,q.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?q.mipmaps.length:1}function D(ie){const q=ie.target;q.removeEventListener("dispose",D),P(q),q.isVideoTexture&&c.delete(q)}function M(ie){const q=ie.target;q.removeEventListener("dispose",M),R(q)}function P(ie){const q=r.get(ie);if(q.__webglInit===void 0)return;const me=ie.source,de=f.get(me);if(de){const ye=de[q.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&O(ie),Object.keys(de).length===0&&f.delete(me)}r.remove(ie)}function O(ie){const q=r.get(ie);n.deleteTexture(q.__webglTexture);const me=ie.source,de=f.get(me);delete de[q.__cacheKey],o.memory.textures--}function R(ie){const q=r.get(ie);if(ie.depthTexture&&(ie.depthTexture.dispose(),r.remove(ie.depthTexture)),ie.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(q.__webglFramebuffer[de]))for(let ye=0;ye<q.__webglFramebuffer[de].length;ye++)n.deleteFramebuffer(q.__webglFramebuffer[de][ye]);else n.deleteFramebuffer(q.__webglFramebuffer[de]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[de])}else{if(Array.isArray(q.__webglFramebuffer))for(let de=0;de<q.__webglFramebuffer.length;de++)n.deleteFramebuffer(q.__webglFramebuffer[de]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let de=0;de<q.__webglColorRenderbuffer.length;de++)q.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[de]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const me=ie.textures;for(let de=0,ye=me.length;de<ye;de++){const be=r.get(me[de]);be.__webglTexture&&(n.deleteTexture(be.__webglTexture),o.memory.textures--),r.remove(me[de])}r.remove(ie)}let N=0;function U(){N=0}function F(){const ie=N;return ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),N+=1,ie}function J(ie){const q=[];return q.push(ie.wrapS),q.push(ie.wrapT),q.push(ie.wrapR||0),q.push(ie.magFilter),q.push(ie.minFilter),q.push(ie.anisotropy),q.push(ie.internalFormat),q.push(ie.format),q.push(ie.type),q.push(ie.generateMipmaps),q.push(ie.premultiplyAlpha),q.push(ie.flipY),q.push(ie.unpackAlignment),q.push(ie.colorSpace),q.join()}function Z(ie,q){const me=r.get(ie);if(ie.isVideoTexture&&we(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&me.__version!==ie.version){const de=ie.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{se(me,ie,q);return}}t.bindTexture(n.TEXTURE_2D,me.__webglTexture,n.TEXTURE0+q)}function oe(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){se(me,ie,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,me.__webglTexture,n.TEXTURE0+q)}function ae(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){se(me,ie,q);return}t.bindTexture(n.TEXTURE_3D,me.__webglTexture,n.TEXTURE0+q)}function Q(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){he(me,ie,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,me.__webglTexture,n.TEXTURE0+q)}const ee={[If]:n.REPEAT,[sa]:n.CLAMP_TO_EDGE,[yv]:n.MIRRORED_REPEAT},Y={[hs]:n.NEAREST,[fS]:n.NEAREST_MIPMAP_NEAREST,[fp]:n.NEAREST_MIPMAP_LINEAR,[vi]:n.LINEAR,[nv]:n.LINEAR_MIPMAP_NEAREST,[La]:n.LINEAR_MIPMAP_LINEAR},V={[Fq]:n.NEVER,[Gq]:n.ALWAYS,[Uq]:n.LESS,[s3]:n.LEQUAL,[jq]:n.EQUAL,[Hq]:n.GEQUAL,[Vq]:n.GREATER,[zq]:n.NOTEQUAL};function X(ie,q){if(q.type===Lo&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===vi||q.magFilter===nv||q.magFilter===fp||q.magFilter===La||q.minFilter===vi||q.minFilter===nv||q.minFilter===fp||q.minFilter===La)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ie,n.TEXTURE_WRAP_S,ee[q.wrapS]),n.texParameteri(ie,n.TEXTURE_WRAP_T,ee[q.wrapT]),(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ie,n.TEXTURE_WRAP_R,ee[q.wrapR]),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,Y[q.magFilter]),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,Y[q.minFilter]),q.compareFunction&&(n.texParameteri(ie,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ie,n.TEXTURE_COMPARE_FUNC,V[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===hs||q.minFilter!==fp&&q.minFilter!==La||q.type===Lo&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ie,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function re(ie,q){let me=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,q.addEventListener("dispose",D));const de=q.source;let ye=f.get(de);ye===void 0&&(ye={},f.set(de,ye));const be=J(q);if(be!==ie.__cacheKey){ye[be]===void 0&&(ye[be]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,me=!0),ye[be].usedTimes++;const He=ye[ie.__cacheKey];He!==void 0&&(ye[ie.__cacheKey].usedTimes--,He.usedTimes===0&&O(q)),ie.__cacheKey=be,ie.__webglTexture=ye[be].texture}return me}function se(ie,q,me){let de=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(de=n.TEXTURE_3D);const ye=re(ie,q),be=q.source;t.bindTexture(de,ie.__webglTexture,n.TEXTURE0+me);const He=r.get(be);if(be.version!==He.__version||ye===!0){t.activeTexture(n.TEXTURE0+me);const qe=Wn.getPrimaries(Wn.workingColorSpace),lt=q.colorSpace===Sc?null:Wn.getPrimaries(q.colorSpace),vt=q.colorSpace===Sc||qe===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);let Ye=x(q.image,!1,i.maxTextureSize);Ye=Ie(q,Ye);const yt=s.convert(q.format,q.colorSpace),Ot=s.convert(q.type);let jt=E(q.internalFormat,yt,Ot,q.colorSpace,q.isVideoTexture);X(de,q);let Et;const on=q.mipmaps,qt=q.isVideoTexture!==!0,Rn=He.__version===void 0||ye===!0,Ae=be.dataReady,mt=C(q,Ye);if(q.isDepthTexture)jt=S(q.format===Gp,q.type),Rn&&(qt?t.texStorage2D(n.TEXTURE_2D,1,jt,Ye.width,Ye.height):t.texImage2D(n.TEXTURE_2D,0,jt,Ye.width,Ye.height,0,yt,Ot,null));else if(q.isDataTexture)if(on.length>0){qt&&Rn&&t.texStorage2D(n.TEXTURE_2D,mt,jt,on[0].width,on[0].height);for(let Ge=0,Xe=on.length;Ge<Xe;Ge++)Et=on[Ge],qt?Ae&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,yt,Ot,Et.data):t.texImage2D(n.TEXTURE_2D,Ge,jt,Et.width,Et.height,0,yt,Ot,Et.data);q.generateMipmaps=!1}else qt?(Rn&&t.texStorage2D(n.TEXTURE_2D,mt,jt,Ye.width,Ye.height),Ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ye.width,Ye.height,yt,Ot,Ye.data)):t.texImage2D(n.TEXTURE_2D,0,jt,Ye.width,Ye.height,0,yt,Ot,Ye.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){qt&&Rn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,jt,on[0].width,on[0].height,Ye.depth);for(let Ge=0,Xe=on.length;Ge<Xe;Ge++)if(Et=on[Ge],q.format!==qs)if(yt!==null)if(qt){if(Ae)if(q.layerUpdates.size>0){const _t=mP(Et.width,Et.height,q.format,q.type);for(const dt of q.layerUpdates){const Zt=Et.data.subarray(dt*_t/Et.data.BYTES_PER_ELEMENT,(dt+1)*_t/Et.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,dt,Et.width,Et.height,1,yt,Zt)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Et.width,Et.height,Ye.depth,yt,Et.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ge,jt,Et.width,Et.height,Ye.depth,0,Et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else qt?Ae&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Et.width,Et.height,Ye.depth,yt,Ot,Et.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ge,jt,Et.width,Et.height,Ye.depth,0,yt,Ot,Et.data)}else{qt&&Rn&&t.texStorage2D(n.TEXTURE_2D,mt,jt,on[0].width,on[0].height);for(let Ge=0,Xe=on.length;Ge<Xe;Ge++)Et=on[Ge],q.format!==qs?yt!==null?qt?Ae&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,yt,Et.data):t.compressedTexImage2D(n.TEXTURE_2D,Ge,jt,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qt?Ae&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,yt,Ot,Et.data):t.texImage2D(n.TEXTURE_2D,Ge,jt,Et.width,Et.height,0,yt,Ot,Et.data)}else if(q.isDataArrayTexture)if(qt){if(Rn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,jt,Ye.width,Ye.height,Ye.depth),Ae)if(q.layerUpdates.size>0){const Ge=mP(Ye.width,Ye.height,q.format,q.type);for(const Xe of q.layerUpdates){const _t=Ye.data.subarray(Xe*Ge/Ye.data.BYTES_PER_ELEMENT,(Xe+1)*Ge/Ye.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,Ye.width,Ye.height,1,yt,Ot,_t)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ye.width,Ye.height,Ye.depth,yt,Ot,Ye.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,jt,Ye.width,Ye.height,Ye.depth,0,yt,Ot,Ye.data);else if(q.isData3DTexture)qt?(Rn&&t.texStorage3D(n.TEXTURE_3D,mt,jt,Ye.width,Ye.height,Ye.depth),Ae&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ye.width,Ye.height,Ye.depth,yt,Ot,Ye.data)):t.texImage3D(n.TEXTURE_3D,0,jt,Ye.width,Ye.height,Ye.depth,0,yt,Ot,Ye.data);else if(q.isFramebufferTexture){if(Rn)if(qt)t.texStorage2D(n.TEXTURE_2D,mt,jt,Ye.width,Ye.height);else{let Ge=Ye.width,Xe=Ye.height;for(let _t=0;_t<mt;_t++)t.texImage2D(n.TEXTURE_2D,_t,jt,Ge,Xe,0,yt,Ot,null),Ge>>=1,Xe>>=1}}else if(on.length>0){if(qt&&Rn){const Ge=Ne(on[0]);t.texStorage2D(n.TEXTURE_2D,mt,jt,Ge.width,Ge.height)}for(let Ge=0,Xe=on.length;Ge<Xe;Ge++)Et=on[Ge],qt?Ae&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,yt,Ot,Et):t.texImage2D(n.TEXTURE_2D,Ge,jt,yt,Ot,Et);q.generateMipmaps=!1}else if(qt){if(Rn){const Ge=Ne(Ye);t.texStorage2D(n.TEXTURE_2D,mt,jt,Ge.width,Ge.height)}Ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,Ot,Ye)}else t.texImage2D(n.TEXTURE_2D,0,jt,yt,Ot,Ye);_(q)&&v(de),He.__version=be.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function he(ie,q,me){if(q.image.length!==6)return;const de=re(ie,q),ye=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+me);const be=r.get(ye);if(ye.version!==be.__version||de===!0){t.activeTexture(n.TEXTURE0+me);const He=Wn.getPrimaries(Wn.workingColorSpace),qe=q.colorSpace===Sc?null:Wn.getPrimaries(q.colorSpace),lt=q.colorSpace===Sc||He===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const vt=q.isCompressedTexture||q.image[0].isCompressedTexture,Ye=q.image[0]&&q.image[0].isDataTexture,yt=[];for(let Xe=0;Xe<6;Xe++)!vt&&!Ye?yt[Xe]=x(q.image[Xe],!0,i.maxCubemapSize):yt[Xe]=Ye?q.image[Xe].image:q.image[Xe],yt[Xe]=Ie(q,yt[Xe]);const Ot=yt[0],jt=s.convert(q.format,q.colorSpace),Et=s.convert(q.type),on=E(q.internalFormat,jt,Et,q.colorSpace),qt=q.isVideoTexture!==!0,Rn=be.__version===void 0||de===!0,Ae=ye.dataReady;let mt=C(q,Ot);X(n.TEXTURE_CUBE_MAP,q);let Ge;if(vt){qt&&Rn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,mt,on,Ot.width,Ot.height);for(let Xe=0;Xe<6;Xe++){Ge=yt[Xe].mipmaps;for(let _t=0;_t<Ge.length;_t++){const dt=Ge[_t];q.format!==qs?jt!==null?qt?Ae&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,0,0,dt.width,dt.height,jt,dt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,on,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qt?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,0,0,dt.width,dt.height,jt,Et,dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,on,dt.width,dt.height,0,jt,Et,dt.data)}}}else{if(Ge=q.mipmaps,qt&&Rn){Ge.length>0&&mt++;const Xe=Ne(yt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,mt,on,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(Ye){qt?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,yt[Xe].width,yt[Xe].height,jt,Et,yt[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,on,yt[Xe].width,yt[Xe].height,0,jt,Et,yt[Xe].data);for(let _t=0;_t<Ge.length;_t++){const Zt=Ge[_t].image[Xe].image;qt?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,0,0,Zt.width,Zt.height,jt,Et,Zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,on,Zt.width,Zt.height,0,jt,Et,Zt.data)}}else{qt?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,jt,Et,yt[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,on,jt,Et,yt[Xe]);for(let _t=0;_t<Ge.length;_t++){const dt=Ge[_t];qt?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,0,0,jt,Et,dt.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,on,jt,Et,dt.image[Xe])}}}_(q)&&v(n.TEXTURE_CUBE_MAP),be.__version=ye.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function te(ie,q,me,de,ye,be){const He=s.convert(me.format,me.colorSpace),qe=s.convert(me.type),lt=E(me.internalFormat,He,qe,me.colorSpace),vt=r.get(q),Ye=r.get(me);if(Ye.__renderTarget=q,!vt.__hasExternalTextures){const yt=Math.max(1,q.width>>be),Ot=Math.max(1,q.height>>be);ye===n.TEXTURE_3D||ye===n.TEXTURE_2D_ARRAY?t.texImage3D(ye,be,lt,yt,Ot,q.depth,0,He,qe,null):t.texImage2D(ye,be,lt,yt,Ot,0,He,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,ie),rt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,ye,Ye.__webglTexture,0,Je(q)):(ye===n.TEXTURE_2D||ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,ye,Ye.__webglTexture,be),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ce(ie,q,me){if(n.bindRenderbuffer(n.RENDERBUFFER,ie),q.depthBuffer){const de=q.depthTexture,ye=de&&de.isDepthTexture?de.type:null,be=S(q.stencilBuffer,ye),He=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Je(q);rt(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,be,q.width,q.height):me?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,be,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,be,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,ie)}else{const de=q.textures;for(let ye=0;ye<de.length;ye++){const be=de[ye],He=s.convert(be.format,be.colorSpace),qe=s.convert(be.type),lt=E(be.internalFormat,He,qe,be.colorSpace),vt=Je(q);me&&rt(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,lt,q.width,q.height):rt(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,vt,lt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,lt,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ve(ie,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ie),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=r.get(q.depthTexture);de.__renderTarget=q,(!de.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Z(q.depthTexture,0);const ye=de.__webglTexture,be=Je(q);if(q.depthTexture.format===Tp)rt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ye,0);else if(q.depthTexture.format===Gp)rt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function xe(ie){const q=r.get(ie),me=ie.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ie.depthTexture){const de=ie.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),de){const ye=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,de.removeEventListener("dispose",ye)};de.addEventListener("dispose",ye),q.__depthDisposeCallback=ye}q.__boundDepthTexture=de}if(ie.depthTexture&&!q.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");ve(q.__webglFramebuffer,ie)}else if(me){q.__webglDepthbuffer=[];for(let de=0;de<6;de++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[de]),q.__webglDepthbuffer[de]===void 0)q.__webglDepthbuffer[de]=n.createRenderbuffer(),ce(q.__webglDepthbuffer[de],ie,!1);else{const ye=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,be=q.__webglDepthbuffer[de];n.bindRenderbuffer(n.RENDERBUFFER,be),n.framebufferRenderbuffer(n.FRAMEBUFFER,ye,n.RENDERBUFFER,be)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),ce(q.__webglDepthbuffer,ie,!1);else{const de=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ye=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,de,n.RENDERBUFFER,ye)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(ie,q,me){const de=r.get(ie);q!==void 0&&te(de.__webglFramebuffer,ie,ie.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),me!==void 0&&xe(ie)}function $e(ie){const q=ie.texture,me=r.get(ie),de=r.get(q);ie.addEventListener("dispose",M);const ye=ie.textures,be=ie.isWebGLCubeRenderTarget===!0,He=ye.length>1;if(He||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=q.version,o.memory.textures++),be){me.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer[qe]=[];for(let lt=0;lt<q.mipmaps.length;lt++)me.__webglFramebuffer[qe][lt]=n.createFramebuffer()}else me.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer=[];for(let qe=0;qe<q.mipmaps.length;qe++)me.__webglFramebuffer[qe]=n.createFramebuffer()}else me.__webglFramebuffer=n.createFramebuffer();if(He)for(let qe=0,lt=ye.length;qe<lt;qe++){const vt=r.get(ye[qe]);vt.__webglTexture===void 0&&(vt.__webglTexture=n.createTexture(),o.memory.textures++)}if(ie.samples>0&&rt(ie)===!1){me.__webglMultisampledFramebuffer=n.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let qe=0;qe<ye.length;qe++){const lt=ye[qe];me.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,me.__webglColorRenderbuffer[qe]);const vt=s.convert(lt.format,lt.colorSpace),Ye=s.convert(lt.type),yt=E(lt.internalFormat,vt,Ye,lt.colorSpace,ie.isXRRenderTarget===!0),Ot=Je(ie);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ot,yt,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,me.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),ie.depthBuffer&&(me.__webglDepthRenderbuffer=n.createRenderbuffer(),ce(me.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(be){t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),X(n.TEXTURE_CUBE_MAP,q);for(let qe=0;qe<6;qe++)if(q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)te(me.__webglFramebuffer[qe][lt],ie,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,lt);else te(me.__webglFramebuffer[qe],ie,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);_(q)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){for(let qe=0,lt=ye.length;qe<lt;qe++){const vt=ye[qe],Ye=r.get(vt);t.bindTexture(n.TEXTURE_2D,Ye.__webglTexture),X(n.TEXTURE_2D,vt),te(me.__webglFramebuffer,ie,vt,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),_(vt)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(qe=ie.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,de.__webglTexture),X(qe,q),q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)te(me.__webglFramebuffer[lt],ie,q,n.COLOR_ATTACHMENT0,qe,lt);else te(me.__webglFramebuffer,ie,q,n.COLOR_ATTACHMENT0,qe,0);_(q)&&v(qe),t.unbindTexture()}ie.depthBuffer&&xe(ie)}function De(ie){const q=ie.textures;for(let me=0,de=q.length;me<de;me++){const ye=q[me];if(_(ye)){const be=b(ie),He=r.get(ye).__webglTexture;t.bindTexture(be,He),v(be),t.unbindTexture()}}}const Be=[],fe=[];function it(ie){if(ie.samples>0){if(rt(ie)===!1){const q=ie.textures,me=ie.width,de=ie.height;let ye=n.COLOR_BUFFER_BIT;const be=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=r.get(ie),qe=q.length>1;if(qe)for(let lt=0;lt<q.length;lt++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let lt=0;lt<q.length;lt++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&(ye|=n.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&(ye|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]);const vt=r.get(q[lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,vt,0)}n.blitFramebuffer(0,0,me,de,0,0,me,de,ye,n.NEAREST),l===!0&&(Be.length=0,fe.length=0,Be.push(n.COLOR_ATTACHMENT0+lt),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Be.push(be),fe.push(be),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,fe)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Be))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let lt=0;lt<q.length;lt++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]);const vt=r.get(q[lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,vt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&l){const q=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function Je(ie){return Math.min(i.maxSamples,ie.samples)}function rt(ie){const q=r.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function we(ie){const q=o.render.frame;c.get(ie)!==q&&(c.set(ie,q),ie.update())}function Ie(ie,q){const me=ie.colorSpace,de=ie.format,ye=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||me!==qp&&me!==Sc&&(Wn.getTransfer(me)===ur?(de!==qs||ye!==Dl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),q}function Ne(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(u.width=ie.naturalWidth||ie.width,u.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(u.width=ie.displayWidth,u.height=ie.displayHeight):(u.width=ie.width,u.height=ie.height),u}this.allocateTextureUnit=F,this.resetTextureUnits=U,this.setTexture2D=Z,this.setTexture2DArray=oe,this.setTexture3D=ae,this.setTextureCube=Q,this.rebindTextures=Te,this.setupRenderTarget=$e,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=it,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=te,this.useMultisampledRTT=rt}function JW(n,e){function t(r,i=Sc){let s;const o=Wn.getTransfer(i);if(r===Dl)return n.UNSIGNED_BYTE;if(r===pS)return n.UNSIGNED_SHORT_4_4_4_4;if(r===mS)return n.UNSIGNED_SHORT_5_5_5_1;if(r===XO)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===KO)return n.BYTE;if(r===JO)return n.SHORT;if(r===_v)return n.UNSIGNED_SHORT;if(r===dS)return n.INT;if(r===Kc)return n.UNSIGNED_INT;if(r===Lo)return n.FLOAT;if(r===Kv)return n.HALF_FLOAT;if(r===YO)return n.ALPHA;if(r===QO)return n.RGB;if(r===qs)return n.RGBA;if(r===ZO)return n.LUMINANCE;if(r===e3)return n.LUMINANCE_ALPHA;if(r===Tp)return n.DEPTH_COMPONENT;if(r===Gp)return n.DEPTH_STENCIL;if(r===gS)return n.RED;if(r===wx)return n.RED_INTEGER;if(r===t3)return n.RG;if(r===vS)return n.RG_INTEGER;if(r===yS)return n.RGBA_INTEGER;if(r===Y0||r===Q0||r===Z0||r===e_)if(o===ur)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Y0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Q0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Z0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===e_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Y0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Q0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Z0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===e_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===CE||r===ME||r===RE||r===IE)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===CE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===ME)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===RE)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===IE)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===PE||r===kE||r===OE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===PE||r===kE)return o===ur?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===OE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===DE||r===NE||r===LE||r===BE||r===FE||r===UE||r===jE||r===VE||r===zE||r===HE||r===GE||r===qE||r===WE||r===$E)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===DE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===NE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===LE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===BE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===FE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===UE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===jE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===VE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===zE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===HE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===GE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===qE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===WE)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===$E)return o===ur?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===t_||r===KE||r===JE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===t_)return o===ur?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===KE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===JE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===n3||r===XE||r===YE||r===QE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===t_)return s.COMPRESSED_RED_RGTC1_EXT;if(r===XE)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===YE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===QE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Hp?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const iAe={type:"move"};class EM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const _=t.getJointPose(x,r),v=this._getHandJoint(u,x);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),p=.02,g=.005;u.inputState.pinching&&f>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iAe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Rc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const sAe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,oAe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class aAe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Br,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Nl({vertexShader:sAe,fragmentShader:oAe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new yi(new Yv(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class lAe extends Mu{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,h=null,f=null,p=null,g=null;const x=new aAe,_=t.getContextAttributes();let v=null,b=null;const E=[],S=[],C=new Ze;let D=null;const M=new Wi;M.viewport=new Xn;const P=new Wi;P.viewport=new Xn;const O=[M,P],R=new BW;let N=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let he=E[se];return he===void 0&&(he=new EM,E[se]=he),he.getTargetRaySpace()},this.getControllerGrip=function(se){let he=E[se];return he===void 0&&(he=new EM,E[se]=he),he.getGripSpace()},this.getHand=function(se){let he=E[se];return he===void 0&&(he=new EM,E[se]=he),he.getHandSpace()};function F(se){const he=S.indexOf(se.inputSource);if(he===-1)return;const te=E[he];te!==void 0&&(te.update(se.inputSource,se.frame,u||o),te.dispatchEvent({type:se.type,data:se.inputSource}))}function J(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",J),i.removeEventListener("inputsourceschange",Z);for(let se=0;se<E.length;se++){const he=S[se];he!==null&&(S[se]=null,E[se].disconnect(he))}N=null,U=null,x.reset(),e.setRenderTarget(v),p=null,f=null,h=null,i=null,b=null,re.stop(),r.isPresenting=!1,e.setPixelRatio(D),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){s=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(se){u=se},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(se){if(i=se,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",J),i.addEventListener("inputsourceschange",Z),_.xrCompatible!==!0&&await t.makeXRCompatible(),D=e.getPixelRatio(),e.getSize(C),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let te=null,ce=null,ve=null;_.depth&&(ve=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,te=_.stencil?Gp:Tp,ce=_.stencil?Hp:Kc);const xe={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:s};h=new XRWebGLBinding(i,t),f=h.createProjectionLayer(xe),i.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),b=new Eu(f.textureWidth,f.textureHeight,{format:qs,type:Dl,depthTexture:new m3(f.textureWidth,f.textureHeight,ce,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}else{const te={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,te),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new Eu(p.framebufferWidth,p.framebufferHeight,{format:qs,type:Dl,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}b.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),re.setContext(i),re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return x.getDepthTexture()};function Z(se){for(let he=0;he<se.removed.length;he++){const te=se.removed[he],ce=S.indexOf(te);ce>=0&&(S[ce]=null,E[ce].disconnect(te))}for(let he=0;he<se.added.length;he++){const te=se.added[he];let ce=S.indexOf(te);if(ce===-1){for(let xe=0;xe<E.length;xe++)if(xe>=S.length){S.push(te),ce=xe;break}else if(S[xe]===null){S[xe]=te,ce=xe;break}if(ce===-1)break}const ve=E[ce];ve&&ve.connect(te)}}const oe=new pe,ae=new pe;function Q(se,he,te){oe.setFromMatrixPosition(he.matrixWorld),ae.setFromMatrixPosition(te.matrixWorld);const ce=oe.distanceTo(ae),ve=he.projectionMatrix.elements,xe=te.projectionMatrix.elements,Te=ve[14]/(ve[10]-1),$e=ve[14]/(ve[10]+1),De=(ve[9]+1)/ve[5],Be=(ve[9]-1)/ve[5],fe=(ve[8]-1)/ve[0],it=(xe[8]+1)/xe[0],Je=Te*fe,rt=Te*it,we=ce/(-fe+it),Ie=we*-fe;if(he.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(Ie),se.translateZ(we),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert(),ve[10]===-1)se.projectionMatrix.copy(he.projectionMatrix),se.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{const Ne=Te+we,ie=$e+we,q=Je-Ie,me=rt+(ce-Ie),de=De*$e/ie*Ne,ye=Be*$e/ie*Ne;se.projectionMatrix.makePerspective(q,me,de,ye,Ne,ie),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}}function ee(se,he){he===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(he.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(i===null)return;let he=se.near,te=se.far;x.texture!==null&&(x.depthNear>0&&(he=x.depthNear),x.depthFar>0&&(te=x.depthFar)),R.near=P.near=M.near=he,R.far=P.far=M.far=te,(N!==R.near||U!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),N=R.near,U=R.far),M.layers.mask=se.layers.mask|2,P.layers.mask=se.layers.mask|4,R.layers.mask=M.layers.mask|P.layers.mask;const ce=se.parent,ve=R.cameras;ee(R,ce);for(let xe=0;xe<ve.length;xe++)ee(ve[xe],ce);ve.length===2?Q(R,M,P):R.projectionMatrix.copy(M.projectionMatrix),Y(se,R,ce)};function Y(se,he,te){te===null?se.matrix.copy(he.matrixWorld):(se.matrix.copy(te.matrixWorld),se.matrix.invert(),se.matrix.multiply(he.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(he.projectionMatrix),se.projectionMatrixInverse.copy(he.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=bv*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(se){l=se,f!==null&&(f.fixedFoveation=se),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=se)},this.hasDepthSensing=function(){return x.texture!==null},this.getDepthSensingMesh=function(){return x.getMesh(R)};let V=null;function X(se,he){if(c=he.getViewerPose(u||o),g=he,c!==null){const te=c.views;p!==null&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let ce=!1;te.length!==R.cameras.length&&(R.cameras.length=0,ce=!0);for(let xe=0;xe<te.length;xe++){const Te=te[xe];let $e=null;if(p!==null)$e=p.getViewport(Te);else{const Be=h.getViewSubImage(f,Te);$e=Be.viewport,xe===0&&(e.setRenderTargetTextures(b,Be.colorTexture,f.ignoreDepthValues?void 0:Be.depthStencilTexture),e.setRenderTarget(b))}let De=O[xe];De===void 0&&(De=new Wi,De.layers.enable(xe),De.viewport=new Xn,O[xe]=De),De.matrix.fromArray(Te.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(Te.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set($e.x,$e.y,$e.width,$e.height),xe===0&&(R.matrix.copy(De.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),ce===!0&&R.cameras.push(De)}const ve=i.enabledFeatures;if(ve&&ve.includes("depth-sensing")){const xe=h.getDepthInformation(te[0]);xe&&xe.isValid&&xe.texture&&x.init(e,xe,i.renderState)}}for(let te=0;te<E.length;te++){const ce=S[te],ve=E[te];ce!==null&&ve!==void 0&&ve.update(ce,he,u||o)}V&&V(se,he),he.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:he}),g=null}const re=new GW;re.setAnimationLoop(X),this.setAnimationLoop=function(se){V=se},this.dispose=function(){}}}const Hd=new ha,uAe=new Yt;function cAe(n,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function r(_,v){v.color.getRGB(_.fogColor.value,Xq(n)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function i(_,v,b,E,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),h(_,v)):v.isMeshPhongMaterial?(s(_,v),c(_,v)):v.isMeshStandardMaterial?(s(_,v),f(_,v),v.isMeshPhysicalMaterial&&p(_,v,S)):v.isMeshMatcapMaterial?(s(_,v),g(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),x(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(o(_,v),v.isLineDashedMaterial&&a(_,v)):v.isPointsMaterial?l(_,v,b,E):v.isSpriteMaterial?u(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===yo&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===yo&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const b=e.get(v),E=b.envMap,S=b.envMapRotation;E&&(_.envMap.value=E,Hd.copy(S),Hd.x*=-1,Hd.y*=-1,Hd.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Hd.y*=-1,Hd.z*=-1),_.envMapRotation.value.setFromMatrix4(uAe.makeRotationFromEuler(Hd)),_.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap&&(_.lightMap.value=v.lightMap,_.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,_.lightMapTransform)),v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function o(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function a(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,b,E){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*b,_.scale.value=E*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function h(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function f(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),v.envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function p(_,v,b){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===yo&&_.clearcoatNormalScale.value.negate())),v.dispersion>0&&(_.dispersion.value=v.dispersion),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=b.texture,_.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,v){v.matcap&&(_.matcap.value=v.matcap)}function x(_,v){const b=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(b.matrixWorld),_.nearDistance.value=b.shadow.camera.near,_.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function hAe(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,E){const S=E.program;r.uniformBlockBinding(b,S)}function u(b,E){let S=i[b.id];S===void 0&&(g(b),S=c(b),i[b.id]=S,b.addEventListener("dispose",_));const C=E.program;r.updateUBOMapping(b,C);const D=e.render.frame;s[b.id]!==D&&(f(b),s[b.id]=D)}function c(b){const E=h();b.__bindingPointIndex=E;const S=n.createBuffer(),C=b.__size,D=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,C,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,S),S}function h(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(b){const E=i[b.id],S=b.uniforms,C=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let D=0,M=S.length;D<M;D++){const P=Array.isArray(S[D])?S[D]:[S[D]];for(let O=0,R=P.length;O<R;O++){const N=P[O];if(p(N,D,O,C)===!0){const U=N.__offset,F=Array.isArray(N.value)?N.value:[N.value];let J=0;for(let Z=0;Z<F.length;Z++){const oe=F[Z],ae=x(oe);typeof oe=="number"||typeof oe=="boolean"?(N.__data[0]=oe,n.bufferSubData(n.UNIFORM_BUFFER,U+J,N.__data)):oe.isMatrix3?(N.__data[0]=oe.elements[0],N.__data[1]=oe.elements[1],N.__data[2]=oe.elements[2],N.__data[3]=0,N.__data[4]=oe.elements[3],N.__data[5]=oe.elements[4],N.__data[6]=oe.elements[5],N.__data[7]=0,N.__data[8]=oe.elements[6],N.__data[9]=oe.elements[7],N.__data[10]=oe.elements[8],N.__data[11]=0):(oe.toArray(N.__data,J),J+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(b,E,S,C){const D=b.value,M=E+"_"+S;if(C[M]===void 0)return typeof D=="number"||typeof D=="boolean"?C[M]=D:C[M]=D.clone(),!0;{const P=C[M];if(typeof D=="number"||typeof D=="boolean"){if(P!==D)return C[M]=D,!0}else if(P.equals(D)===!1)return P.copy(D),!0}return!1}function g(b){const E=b.uniforms;let S=0;const C=16;for(let M=0,P=E.length;M<P;M++){const O=Array.isArray(E[M])?E[M]:[E[M]];for(let R=0,N=O.length;R<N;R++){const U=O[R],F=Array.isArray(U.value)?U.value:[U.value];for(let J=0,Z=F.length;J<Z;J++){const oe=F[J],ae=x(oe),Q=S%C,ee=Q%ae.boundary,Y=Q+ee;S+=ee,Y!==0&&C-Y<ae.storage&&(S+=C-Y),U.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=S,S+=ae.storage}}}const D=S%C;return D>0&&(S+=C-D),b.__size=S,b.__cache={},this}function x(b){const E={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(E.boundary=4,E.storage=4):b.isVector2?(E.boundary=8,E.storage=8):b.isVector3||b.isColor?(E.boundary=16,E.storage=12):b.isVector4?(E.boundary=16,E.storage=16):b.isMatrix3?(E.boundary=48,E.storage=48):b.isMatrix4?(E.boundary=64,E.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),E}function _(b){const E=b.target;E.removeEventListener("dispose",_);const S=o.indexOf(E.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function v(){for(const b in i)n.deleteBuffer(i[b]);o=[],i={},s={}}return{bind:l,update:u,dispose:v}}class XW{constructor(e={}){const{canvas:t=$q(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),x=new Int32Array(4);let _=null,v=null;const b=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ko,this.toneMapping=gu,this.toneMappingExposure=1;const S=this;let C=!1,D=0,M=0,P=null,O=-1,R=null;const N=new Xn,U=new Xn;let F=null;const J=new bt(0);let Z=0,oe=t.width,ae=t.height,Q=1,ee=null,Y=null;const V=new Xn(0,0,oe,ae),X=new Xn(0,0,oe,ae);let re=!1;const se=new Cx;let he=!1,te=!1;this.transmissionResolutionScale=1;const ce=new Yt,ve=new Yt,xe=new pe,Te=new Xn,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let De=!1;function Be(){return P===null?Q:1}let fe=r;function it(le,Me){return t.getContext(le,Me)}try{const le={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${_x}`),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",_t,!1),t.addEventListener("webglcontextcreationerror",dt,!1),fe===null){const Me="webgl2";if(fe=it(Me,le),fe===null)throw it(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(le){throw console.error("THREE.WebGLRenderer: "+le.message),le}let Je,rt,we,Ie,Ne,ie,q,me,de,ye,be,He,qe,lt,vt,Ye,yt,Ot,jt,Et,on,qt,Rn,Ae;function mt(){Je=new bbe(fe),Je.init(),qt=new JW(fe,Je),rt=new gbe(fe,Je,e,qt),we=new nAe(fe,Je),rt.reverseDepthBuffer&&f&&we.buffers.depth.setReversed(!0),Ie=new Sbe(fe),Ne=new HEe,ie=new rAe(fe,Je,we,Ne,rt,qt,Ie),q=new ybe(S),me=new wbe(S),de=new kxe(fe),Rn=new pbe(fe,de),ye=new Ebe(fe,de,Ie,Rn),be=new Cbe(fe,ye,de,Ie),jt=new Tbe(fe,rt,ie),Ye=new vbe(Ne),He=new zEe(S,q,me,Je,rt,Rn,Ye),qe=new cAe(S,Ne),lt=new qEe,vt=new YEe(Je),Ot=new dbe(S,q,me,we,be,p,l),yt=new eAe(S,be,rt),Ae=new hAe(fe,Ie,rt,we),Et=new mbe(fe,Je,Ie),on=new Abe(fe,Je,Ie),Ie.programs=He.programs,S.capabilities=rt,S.extensions=Je,S.properties=Ne,S.renderLists=lt,S.shadowMap=yt,S.state=we,S.info=Ie}mt();const Ge=new lAe(S,fe);this.xr=Ge,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){const le=Je.get("WEBGL_lose_context");le&&le.loseContext()},this.forceContextRestore=function(){const le=Je.get("WEBGL_lose_context");le&&le.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(le){le!==void 0&&(Q=le,this.setSize(oe,ae,!1))},this.getSize=function(le){return le.set(oe,ae)},this.setSize=function(le,Me,je=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}oe=le,ae=Me,t.width=Math.floor(le*Q),t.height=Math.floor(Me*Q),je===!0&&(t.style.width=le+"px",t.style.height=Me+"px"),this.setViewport(0,0,le,Me)},this.getDrawingBufferSize=function(le){return le.set(oe*Q,ae*Q).floor()},this.setDrawingBufferSize=function(le,Me,je){oe=le,ae=Me,Q=je,t.width=Math.floor(le*je),t.height=Math.floor(Me*je),this.setViewport(0,0,le,Me)},this.getCurrentViewport=function(le){return le.copy(N)},this.getViewport=function(le){return le.copy(V)},this.setViewport=function(le,Me,je,Oe){le.isVector4?V.set(le.x,le.y,le.z,le.w):V.set(le,Me,je,Oe),we.viewport(N.copy(V).multiplyScalar(Q).round())},this.getScissor=function(le){return le.copy(X)},this.setScissor=function(le,Me,je,Oe){le.isVector4?X.set(le.x,le.y,le.z,le.w):X.set(le,Me,je,Oe),we.scissor(U.copy(X).multiplyScalar(Q).round())},this.getScissorTest=function(){return re},this.setScissorTest=function(le){we.setScissorTest(re=le)},this.setOpaqueSort=function(le){ee=le},this.setTransparentSort=function(le){Y=le},this.getClearColor=function(le){return le.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor.apply(Ot,arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha.apply(Ot,arguments)},this.clear=function(le=!0,Me=!0,je=!0){let Oe=0;if(le){let Re=!1;if(P!==null){const tt=P.texture.format;Re=tt===yS||tt===vS||tt===wx}if(Re){const tt=P.texture.type,ft=tt===Dl||tt===Kc||tt===_v||tt===Hp||tt===pS||tt===mS,gt=Ot.getClearColor(),At=Ot.getClearAlpha(),zt=gt.r,Bt=gt.g,ut=gt.b;ft?(g[0]=zt,g[1]=Bt,g[2]=ut,g[3]=At,fe.clearBufferuiv(fe.COLOR,0,g)):(x[0]=zt,x[1]=Bt,x[2]=ut,x[3]=At,fe.clearBufferiv(fe.COLOR,0,x))}else Oe|=fe.COLOR_BUFFER_BIT}Me&&(Oe|=fe.DEPTH_BUFFER_BIT),je&&(Oe|=fe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),fe.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",_t,!1),t.removeEventListener("webglcontextcreationerror",dt,!1),Ot.dispose(),lt.dispose(),vt.dispose(),Ne.dispose(),q.dispose(),me.dispose(),be.dispose(),Rn.dispose(),Ae.dispose(),He.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Va),Ge.removeEventListener("sessionend",Ms),Qi.stop()};function Xe(le){le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const le=Ie.autoReset,Me=yt.enabled,je=yt.autoUpdate,Oe=yt.needsUpdate,Re=yt.type;mt(),Ie.autoReset=le,yt.enabled=Me,yt.autoUpdate=je,yt.needsUpdate=Oe,yt.type=Re}function dt(le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",le.statusMessage)}function Zt(le){const Me=le.target;Me.removeEventListener("dispose",Zt),Qn(Me)}function Qn(le){Tr(le),Ne.remove(le)}function Tr(le){const Me=Ne.get(le).programs;Me!==void 0&&(Me.forEach(function(je){He.releaseProgram(je)}),le.isShaderMaterial&&He.releaseShaderCache(le))}this.renderBufferDirect=function(le,Me,je,Oe,Re,tt){Me===null&&(Me=$e);const ft=Re.isMesh&&Re.matrixWorld.determinant()<0,gt=Ha(le,Me,je,Oe,Re);we.setMaterial(Oe,ft);let At=je.index,zt=1;if(Oe.wireframe===!0){if(At=ye.getWireframeAttribute(je),At===void 0)return;zt=2}const Bt=je.drawRange,ut=je.attributes.position;let Pt=Bt.start*zt,Ht=(Bt.start+Bt.count)*zt;tt!==null&&(Pt=Math.max(Pt,tt.start*zt),Ht=Math.min(Ht,(tt.start+tt.count)*zt)),At!==null?(Pt=Math.max(Pt,0),Ht=Math.min(Ht,At.count)):ut!=null&&(Pt=Math.max(Pt,0),Ht=Math.min(Ht,ut.count));const xn=Ht-Pt;if(xn<0||xn===1/0)return;Rn.setup(Re,Oe,gt,je,At);let Sn,un=Et;if(At!==null&&(Sn=de.get(At),un=on,un.setIndex(Sn)),Re.isMesh)Oe.wireframe===!0?(we.setLineWidth(Oe.wireframeLinewidth*Be()),un.setMode(fe.LINES)):un.setMode(fe.TRIANGLES);else if(Re.isLine){let kt=Oe.linewidth;kt===void 0&&(kt=1),we.setLineWidth(kt*Be()),Re.isLineSegments?un.setMode(fe.LINES):Re.isLineLoop?un.setMode(fe.LINE_LOOP):un.setMode(fe.LINE_STRIP)}else Re.isPoints?un.setMode(fe.POINTS):Re.isSprite&&un.setMode(fe.TRIANGLES);if(Re.isBatchedMesh)if(Re._multiDrawInstances!==null)un.renderMultiDrawInstances(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount,Re._multiDrawInstances);else if(Je.get("WEBGL_multi_draw"))un.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else{const kt=Re._multiDrawStarts,In=Re._multiDrawCounts,fn=Re._multiDrawCount,Xr=At?de.get(At).bytesPerElement:1,Fo=Ne.get(Oe).currentProgram.getUniforms();for(let cr=0;cr<fn;cr++)Fo.setValue(fe,"_gl_DrawID",cr),un.render(kt[cr]/Xr,In[cr])}else if(Re.isInstancedMesh)un.renderInstances(Pt,xn,Re.count);else if(je.isInstancedBufferGeometry){const kt=je._maxInstanceCount!==void 0?je._maxInstanceCount:1/0,In=Math.min(je.instanceCount,kt);un.renderInstances(Pt,xn,In)}else un.render(Pt,xn)};function An(le,Me,je){le.transparent===!0&&le.side===Sl&&le.forceSinglePass===!1?(le.side=yo,le.needsUpdate=!0,Bo(le,Me,je),le.side=bu,le.needsUpdate=!0,Bo(le,Me,je),le.side=Sl):Bo(le,Me,je)}this.compile=function(le,Me,je=null){je===null&&(je=le),v=vt.get(je),v.init(Me),E.push(v),je.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Me.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),le!==je&&le.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Me.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),v.setupLights();const Oe=new Set;return le.traverse(function(Re){if(!(Re.isMesh||Re.isPoints||Re.isLine||Re.isSprite))return;const tt=Re.material;if(tt)if(Array.isArray(tt))for(let ft=0;ft<tt.length;ft++){const gt=tt[ft];An(gt,je,Re),Oe.add(gt)}else An(tt,je,Re),Oe.add(tt)}),E.pop(),v=null,Oe},this.compileAsync=function(le,Me,je=null){const Oe=this.compile(le,Me,je);return new Promise(Re=>{function tt(){if(Oe.forEach(function(ft){Ne.get(ft).currentProgram.isReady()&&Oe.delete(ft)}),Oe.size===0){Re(le);return}setTimeout(tt,10)}Je.get("KHR_parallel_shader_compile")!==null?tt():setTimeout(tt,10)})};let _i=null;function Kn(le){_i&&_i(le)}function Va(){Qi.stop()}function Ms(){Qi.start()}const Qi=new GW;Qi.setAnimationLoop(Kn),typeof self<"u"&&Qi.setContext(self),this.setAnimationLoop=function(le){_i=le,Ge.setAnimationLoop(le),le===null?Qi.stop():Qi.start()},Ge.addEventListener("sessionstart",Va),Ge.addEventListener("sessionend",Ms),this.render=function(le,Me){if(Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(le.matrixWorldAutoUpdate===!0&&le.updateMatrixWorld(),Me.parent===null&&Me.matrixWorldAutoUpdate===!0&&Me.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(Me),Me=Ge.getCamera()),le.isScene===!0&&le.onBeforeRender(S,le,Me,P),v=vt.get(le,E.length),v.init(Me),E.push(v),ve.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),se.setFromProjectionMatrix(ve),te=this.localClippingEnabled,he=Ye.init(this.clippingPlanes,te),_=lt.get(le,b.length),_.init(),b.push(_),Ge.enabled===!0&&Ge.isPresenting===!0){const tt=S.xr.getDepthSensingMesh();tt!==null&&Qs(tt,Me,-1/0,S.sortObjects)}Qs(le,Me,0,S.sortObjects),_.finish(),S.sortObjects===!0&&_.sort(ee,Y),De=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,De&&Ot.addToRenderList(_,le),this.info.render.frame++,he===!0&&Ye.beginShadows();const je=v.state.shadowsArray;yt.render(je,le,Me),he===!0&&Ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=_.opaque,Re=_.transmissive;if(v.setupLights(),Me.isArrayCamera){const tt=Me.cameras;if(Re.length>0)for(let ft=0,gt=tt.length;ft<gt;ft++){const At=tt[ft];xi(Oe,Re,le,At)}De&&Ot.render(le);for(let ft=0,gt=tt.length;ft<gt;ft++){const At=tt[ft];za(_,le,At,At.viewport)}}else Re.length>0&&xi(Oe,Re,le,Me),De&&Ot.render(le),za(_,le,Me);P!==null&&M===0&&(ie.updateMultisampleRenderTarget(P),ie.updateRenderTargetMipmap(P)),le.isScene===!0&&le.onAfterRender(S,le,Me),Rn.resetDefaultState(),O=-1,R=null,E.pop(),E.length>0?(v=E[E.length-1],he===!0&&Ye.setGlobalState(S.clippingPlanes,v.state.camera)):v=null,b.pop(),b.length>0?_=b[b.length-1]:_=null};function Qs(le,Me,je,Oe){if(le.visible===!1)return;if(le.layers.test(Me.layers)){if(le.isGroup)je=le.renderOrder;else if(le.isLOD)le.autoUpdate===!0&&le.update(Me);else if(le.isLight)v.pushLight(le),le.castShadow&&v.pushShadow(le);else if(le.isSprite){if(!le.frustumCulled||se.intersectsSprite(le)){Oe&&Te.setFromMatrixPosition(le.matrixWorld).applyMatrix4(ve);const ft=be.update(le),gt=le.material;gt.visible&&_.push(le,ft,gt,je,Te.z,null)}}else if((le.isMesh||le.isLine||le.isPoints)&&(!le.frustumCulled||se.intersectsObject(le))){const ft=be.update(le),gt=le.material;if(Oe&&(le.boundingSphere!==void 0?(le.boundingSphere===null&&le.computeBoundingSphere(),Te.copy(le.boundingSphere.center)):(ft.boundingSphere===null&&ft.computeBoundingSphere(),Te.copy(ft.boundingSphere.center)),Te.applyMatrix4(le.matrixWorld).applyMatrix4(ve)),Array.isArray(gt)){const At=ft.groups;for(let zt=0,Bt=At.length;zt<Bt;zt++){const ut=At[zt],Pt=gt[ut.materialIndex];Pt&&Pt.visible&&_.push(le,ft,Pt,je,Te.z,ut)}}else gt.visible&&_.push(le,ft,gt,je,Te.z,null)}}const tt=le.children;for(let ft=0,gt=tt.length;ft<gt;ft++)Qs(tt[ft],Me,je,Oe)}function za(le,Me,je,Oe){const Re=le.opaque,tt=le.transmissive,ft=le.transparent;v.setupLightsView(je),he===!0&&Ye.setGlobalState(S.clippingPlanes,je),Oe&&we.viewport(N.copy(Oe)),Re.length>0&&da(Re,Me,je),tt.length>0&&da(tt,Me,je),ft.length>0&&da(ft,Me,je),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function xi(le,Me,je,Oe){if((je.isScene===!0?je.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[Oe.id]===void 0&&(v.state.transmissionRenderTarget[Oe.id]=new Eu(1,1,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")||Je.has("EXT_color_buffer_float")?Kv:Dl,minFilter:La,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Wn.workingColorSpace}));const tt=v.state.transmissionRenderTarget[Oe.id],ft=Oe.viewport||N;tt.setSize(ft.z*S.transmissionResolutionScale,ft.w*S.transmissionResolutionScale);const gt=S.getRenderTarget();S.setRenderTarget(tt),S.getClearColor(J),Z=S.getClearAlpha(),Z<1&&S.setClearColor(16777215,.5),S.clear(),De&&Ot.render(je);const At=S.toneMapping;S.toneMapping=gu;const zt=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),v.setupLightsView(Oe),he===!0&&Ye.setGlobalState(S.clippingPlanes,Oe),da(le,je,Oe),ie.updateMultisampleRenderTarget(tt),ie.updateRenderTargetMipmap(tt),Je.has("WEBGL_multisampled_render_to_texture")===!1){let Bt=!1;for(let ut=0,Pt=Me.length;ut<Pt;ut++){const Ht=Me[ut],xn=Ht.object,Sn=Ht.geometry,un=Ht.material,kt=Ht.group;if(un.side===Sl&&xn.layers.test(Oe.layers)){const In=un.side;un.side=yo,un.needsUpdate=!0,th(xn,je,Oe,Sn,un,kt),un.side=In,un.needsUpdate=!0,Bt=!0}}Bt===!0&&(ie.updateMultisampleRenderTarget(tt),ie.updateRenderTargetMipmap(tt))}S.setRenderTarget(gt),S.setClearColor(J,Z),zt!==void 0&&(Oe.viewport=zt),S.toneMapping=At}function da(le,Me,je){const Oe=Me.isScene===!0?Me.overrideMaterial:null;for(let Re=0,tt=le.length;Re<tt;Re++){const ft=le[Re],gt=ft.object,At=ft.geometry,zt=Oe===null?ft.material:Oe,Bt=ft.group;gt.layers.test(je.layers)&&th(gt,Me,je,At,zt,Bt)}}function th(le,Me,je,Oe,Re,tt){le.onBeforeRender(S,Me,je,Oe,Re,tt),le.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,le.matrixWorld),le.normalMatrix.getNormalMatrix(le.modelViewMatrix),Re.onBeforeRender(S,Me,je,Oe,le,tt),Re.transparent===!0&&Re.side===Sl&&Re.forceSinglePass===!1?(Re.side=yo,Re.needsUpdate=!0,S.renderBufferDirect(je,Me,Oe,Re,le,tt),Re.side=bu,Re.needsUpdate=!0,S.renderBufferDirect(je,Me,Oe,Re,le,tt),Re.side=Sl):S.renderBufferDirect(je,Me,Oe,Re,le,tt),le.onAfterRender(S,Me,je,Oe,Re,tt)}function Bo(le,Me,je){Me.isScene!==!0&&(Me=$e);const Oe=Ne.get(le),Re=v.state.lights,tt=v.state.shadowsArray,ft=Re.state.version,gt=He.getParameters(le,Re.state,tt,Me,je),At=He.getProgramCacheKey(gt);let zt=Oe.programs;Oe.environment=le.isMeshStandardMaterial?Me.environment:null,Oe.fog=Me.fog,Oe.envMap=(le.isMeshStandardMaterial?me:q).get(le.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&le.envMap===null?Me.environmentRotation:le.envMapRotation,zt===void 0&&(le.addEventListener("dispose",Zt),zt=new Map,Oe.programs=zt);let Bt=zt.get(At);if(Bt!==void 0){if(Oe.currentProgram===Bt&&Oe.lightsStateVersion===ft)return Rs(le,gt),Bt}else gt.uniforms=He.getUniforms(le),le.onBeforeCompile(gt,S),Bt=He.acquireProgram(gt,At),zt.set(At,Bt),Oe.uniforms=gt.uniforms;const ut=Oe.uniforms;return(!le.isShaderMaterial&&!le.isRawShaderMaterial||le.clipping===!0)&&(ut.clippingPlanes=Ye.uniform),Rs(le,gt),Oe.needsLights=Pu(le),Oe.lightsStateVersion=ft,Oe.needsLights&&(ut.ambientLightColor.value=Re.state.ambient,ut.lightProbe.value=Re.state.probe,ut.directionalLights.value=Re.state.directional,ut.directionalLightShadows.value=Re.state.directionalShadow,ut.spotLights.value=Re.state.spot,ut.spotLightShadows.value=Re.state.spotShadow,ut.rectAreaLights.value=Re.state.rectArea,ut.ltc_1.value=Re.state.rectAreaLTC1,ut.ltc_2.value=Re.state.rectAreaLTC2,ut.pointLights.value=Re.state.point,ut.pointLightShadows.value=Re.state.pointShadow,ut.hemisphereLights.value=Re.state.hemi,ut.directionalShadowMap.value=Re.state.directionalShadowMap,ut.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,ut.spotShadowMap.value=Re.state.spotShadowMap,ut.spotLightMatrix.value=Re.state.spotLightMatrix,ut.spotLightMap.value=Re.state.spotLightMap,ut.pointShadowMap.value=Re.state.pointShadowMap,ut.pointShadowMatrix.value=Re.state.pointShadowMatrix),Oe.currentProgram=Bt,Oe.uniformsList=null,Bt}function Iu(le){if(le.uniformsList===null){const Me=le.currentProgram.getUniforms();le.uniformsList=Sb.seqWithValue(Me.seq,le.uniforms)}return le.uniformsList}function Rs(le,Me){const je=Ne.get(le);je.outputColorSpace=Me.outputColorSpace,je.batching=Me.batching,je.batchingColor=Me.batchingColor,je.instancing=Me.instancing,je.instancingColor=Me.instancingColor,je.instancingMorph=Me.instancingMorph,je.skinning=Me.skinning,je.morphTargets=Me.morphTargets,je.morphNormals=Me.morphNormals,je.morphColors=Me.morphColors,je.morphTargetsCount=Me.morphTargetsCount,je.numClippingPlanes=Me.numClippingPlanes,je.numIntersection=Me.numClipIntersection,je.vertexAlphas=Me.vertexAlphas,je.vertexTangents=Me.vertexTangents,je.toneMapping=Me.toneMapping}function Ha(le,Me,je,Oe,Re){Me.isScene!==!0&&(Me=$e),ie.resetTextureUnits();const tt=Me.fog,ft=Oe.isMeshStandardMaterial?Me.environment:null,gt=P===null?S.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:qp,At=(Oe.isMeshStandardMaterial?me:q).get(Oe.envMap||ft),zt=Oe.vertexColors===!0&&!!je.attributes.color&&je.attributes.color.itemSize===4,Bt=!!je.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),ut=!!je.morphAttributes.position,Pt=!!je.morphAttributes.normal,Ht=!!je.morphAttributes.color;let xn=gu;Oe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(xn=S.toneMapping);const Sn=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,un=Sn!==void 0?Sn.length:0,kt=Ne.get(Oe),In=v.state.lights;if(he===!0&&(te===!0||le!==R)){const cn=le===R&&Oe.id===O;Ye.setState(Oe,le,cn)}let fn=!1;Oe.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==In.state.version||kt.outputColorSpace!==gt||Re.isBatchedMesh&&kt.batching===!1||!Re.isBatchedMesh&&kt.batching===!0||Re.isBatchedMesh&&kt.batchingColor===!0&&Re.colorTexture===null||Re.isBatchedMesh&&kt.batchingColor===!1&&Re.colorTexture!==null||Re.isInstancedMesh&&kt.instancing===!1||!Re.isInstancedMesh&&kt.instancing===!0||Re.isSkinnedMesh&&kt.skinning===!1||!Re.isSkinnedMesh&&kt.skinning===!0||Re.isInstancedMesh&&kt.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&kt.instancingColor===!1&&Re.instanceColor!==null||Re.isInstancedMesh&&kt.instancingMorph===!0&&Re.morphTexture===null||Re.isInstancedMesh&&kt.instancingMorph===!1&&Re.morphTexture!==null||kt.envMap!==At||Oe.fog===!0&&kt.fog!==tt||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==Ye.numPlanes||kt.numIntersection!==Ye.numIntersection)||kt.vertexAlphas!==zt||kt.vertexTangents!==Bt||kt.morphTargets!==ut||kt.morphNormals!==Pt||kt.morphColors!==Ht||kt.toneMapping!==xn||kt.morphTargetsCount!==un)&&(fn=!0):(fn=!0,kt.__version=Oe.version);let Xr=kt.currentProgram;fn===!0&&(Xr=Bo(Oe,Me,Re));let Fo=!1,cr=!1,Yr=!1;const dn=Xr.getUniforms(),Fr=kt.uniforms;if(we.useProgram(Xr.program)&&(Fo=!0,cr=!0,Yr=!0),Oe.id!==O&&(O=Oe.id,cr=!0),Fo||R!==le){we.buffers.depth.getReversed()?(ce.copy(le.projectionMatrix),s0e(ce),o0e(ce),dn.setValue(fe,"projectionMatrix",ce)):dn.setValue(fe,"projectionMatrix",le.projectionMatrix),dn.setValue(fe,"viewMatrix",le.matrixWorldInverse);const hr=dn.map.cameraPosition;hr!==void 0&&hr.setValue(fe,xe.setFromMatrixPosition(le.matrixWorld)),rt.logarithmicDepthBuffer&&dn.setValue(fe,"logDepthBufFC",2/(Math.log(le.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&dn.setValue(fe,"isOrthographic",le.isOrthographicCamera===!0),R!==le&&(R=le,cr=!0,Yr=!0)}if(Re.isSkinnedMesh){dn.setOptional(fe,Re,"bindMatrix"),dn.setOptional(fe,Re,"bindMatrixInverse");const cn=Re.skeleton;cn&&(cn.boneTexture===null&&cn.computeBoneTexture(),dn.setValue(fe,"boneTexture",cn.boneTexture,ie))}Re.isBatchedMesh&&(dn.setOptional(fe,Re,"batchingTexture"),dn.setValue(fe,"batchingTexture",Re._matricesTexture,ie),dn.setOptional(fe,Re,"batchingIdTexture"),dn.setValue(fe,"batchingIdTexture",Re._indirectTexture,ie),dn.setOptional(fe,Re,"batchingColorTexture"),Re._colorsTexture!==null&&dn.setValue(fe,"batchingColorTexture",Re._colorsTexture,ie));const Ur=je.morphAttributes;if((Ur.position!==void 0||Ur.normal!==void 0||Ur.color!==void 0)&&jt.update(Re,je,Xr),(cr||kt.receiveShadow!==Re.receiveShadow)&&(kt.receiveShadow=Re.receiveShadow,dn.setValue(fe,"receiveShadow",Re.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(Fr.envMap.value=At,Fr.flipEnvMap.value=At.isCubeTexture&&At.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&Me.environment!==null&&(Fr.envMapIntensity.value=Me.environmentIntensity),cr&&(dn.setValue(fe,"toneMappingExposure",S.toneMappingExposure),kt.needsLights&&Zs(Fr,Yr),tt&&Oe.fog===!0&&qe.refreshFogUniforms(Fr,tt),qe.refreshMaterialUniforms(Fr,Oe,Q,ae,v.state.transmissionRenderTarget[le.id]),Sb.upload(fe,Iu(kt),Fr,ie)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(Sb.upload(fe,Iu(kt),Fr,ie),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&dn.setValue(fe,"center",Re.center),dn.setValue(fe,"modelViewMatrix",Re.modelViewMatrix),dn.setValue(fe,"normalMatrix",Re.normalMatrix),dn.setValue(fe,"modelMatrix",Re.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const cn=Oe.uniformsGroups;for(let hr=0,pn=cn.length;hr<pn;hr++){const Qr=cn[hr];Ae.update(Qr,Xr),Ae.bind(Qr,Xr)}}return Xr}function Zs(le,Me){le.ambientLightColor.needsUpdate=Me,le.lightProbe.needsUpdate=Me,le.directionalLights.needsUpdate=Me,le.directionalLightShadows.needsUpdate=Me,le.pointLights.needsUpdate=Me,le.pointLightShadows.needsUpdate=Me,le.spotLights.needsUpdate=Me,le.spotLightShadows.needsUpdate=Me,le.rectAreaLights.needsUpdate=Me,le.hemisphereLights.needsUpdate=Me}function Pu(le){return le.isMeshLambertMaterial||le.isMeshToonMaterial||le.isMeshPhongMaterial||le.isMeshStandardMaterial||le.isShadowMaterial||le.isShaderMaterial&&le.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(le,Me,je){Ne.get(le.texture).__webglTexture=Me,Ne.get(le.depthTexture).__webglTexture=je;const Oe=Ne.get(le);Oe.__hasExternalTextures=!0,Oe.__autoAllocateDepthBuffer=je===void 0,Oe.__autoAllocateDepthBuffer||Je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(le,Me){const je=Ne.get(le);je.__webglFramebuffer=Me,je.__useDefaultFramebuffer=Me===void 0};const ku=fe.createFramebuffer();this.setRenderTarget=function(le,Me=0,je=0){P=le,D=Me,M=je;let Oe=!0,Re=null,tt=!1,ft=!1;if(le){const At=Ne.get(le);if(At.__useDefaultFramebuffer!==void 0)we.bindFramebuffer(fe.FRAMEBUFFER,null),Oe=!1;else if(At.__webglFramebuffer===void 0)ie.setupRenderTarget(le);else if(At.__hasExternalTextures)ie.rebindTextures(le,Ne.get(le.texture).__webglTexture,Ne.get(le.depthTexture).__webglTexture);else if(le.depthBuffer){const ut=le.depthTexture;if(At.__boundDepthTexture!==ut){if(ut!==null&&Ne.has(ut)&&(le.width!==ut.image.width||le.height!==ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(le)}}const zt=le.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(ft=!0);const Bt=Ne.get(le).__webglFramebuffer;le.isWebGLCubeRenderTarget?(Array.isArray(Bt[Me])?Re=Bt[Me][je]:Re=Bt[Me],tt=!0):le.samples>0&&ie.useMultisampledRTT(le)===!1?Re=Ne.get(le).__webglMultisampledFramebuffer:Array.isArray(Bt)?Re=Bt[je]:Re=Bt,N.copy(le.viewport),U.copy(le.scissor),F=le.scissorTest}else N.copy(V).multiplyScalar(Q).floor(),U.copy(X).multiplyScalar(Q).floor(),F=re;if(je!==0&&(Re=ku),we.bindFramebuffer(fe.FRAMEBUFFER,Re)&&Oe&&we.drawBuffers(le,Re),we.viewport(N),we.scissor(U),we.setScissorTest(F),tt){const At=Ne.get(le.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+Me,At.__webglTexture,je)}else if(ft){const At=Ne.get(le.texture),zt=Me;fe.framebufferTextureLayer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,At.__webglTexture,je,zt)}else if(le!==null&&je!==0){const At=Ne.get(le.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,At.__webglTexture,je)}O=-1},this.readRenderTargetPixels=function(le,Me,je,Oe,Re,tt,ft){if(!(le&&le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=Ne.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&ft!==void 0&&(gt=gt[ft]),gt){we.bindFramebuffer(fe.FRAMEBUFFER,gt);try{const At=le.texture,zt=At.format,Bt=At.type;if(!rt.textureFormatReadable(zt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!rt.textureTypeReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Me>=0&&Me<=le.width-Oe&&je>=0&&je<=le.height-Re&&fe.readPixels(Me,je,Oe,Re,qt.convert(zt),qt.convert(Bt),tt)}finally{const At=P!==null?Ne.get(P).__webglFramebuffer:null;we.bindFramebuffer(fe.FRAMEBUFFER,At)}}},this.readRenderTargetPixelsAsync=async function(le,Me,je,Oe,Re,tt,ft){if(!(le&&le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let gt=Ne.get(le).__webglFramebuffer;if(le.isWebGLCubeRenderTarget&&ft!==void 0&&(gt=gt[ft]),gt){const At=le.texture,zt=At.format,Bt=At.type;if(!rt.textureFormatReadable(zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!rt.textureTypeReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Me>=0&&Me<=le.width-Oe&&je>=0&&je<=le.height-Re){we.bindFramebuffer(fe.FRAMEBUFFER,gt);const ut=fe.createBuffer();fe.bindBuffer(fe.PIXEL_PACK_BUFFER,ut),fe.bufferData(fe.PIXEL_PACK_BUFFER,tt.byteLength,fe.STREAM_READ),fe.readPixels(Me,je,Oe,Re,qt.convert(zt),qt.convert(Bt),0);const Pt=P!==null?Ne.get(P).__webglFramebuffer:null;we.bindFramebuffer(fe.FRAMEBUFFER,Pt);const Ht=fe.fenceSync(fe.SYNC_GPU_COMMANDS_COMPLETE,0);return fe.flush(),await i0e(fe,Ht,4),fe.bindBuffer(fe.PIXEL_PACK_BUFFER,ut),fe.getBufferSubData(fe.PIXEL_PACK_BUFFER,0,tt),fe.deleteBuffer(ut),fe.deleteSync(Ht),tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(le,Me=null,je=0){le.isTexture!==!0&&(Dg("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Me=arguments[0]||null,le=arguments[1]);const Oe=Math.pow(2,-je),Re=Math.floor(le.image.width*Oe),tt=Math.floor(le.image.height*Oe),ft=Me!==null?Me.x:0,gt=Me!==null?Me.y:0;ie.setTexture2D(le,0),fe.copyTexSubImage2D(fe.TEXTURE_2D,je,0,0,ft,gt,Re,tt),we.unbindTexture()};const zl=fe.createFramebuffer(),Hl=fe.createFramebuffer();this.copyTextureToTexture=function(le,Me,je=null,Oe=null,Re=0,tt=null){le.isTexture!==!0&&(Dg("WebGLRenderer: copyTextureToTexture function signature has changed."),Oe=arguments[0]||null,le=arguments[1],Me=arguments[2],tt=arguments[3]||0,je=null),tt===null&&(Re!==0?(Dg("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),tt=Re,Re=0):tt=0);let ft,gt,At,zt,Bt,ut,Pt,Ht,xn;const Sn=le.isCompressedTexture?le.mipmaps[tt]:le.image;if(je!==null)ft=je.max.x-je.min.x,gt=je.max.y-je.min.y,At=je.isBox3?je.max.z-je.min.z:1,zt=je.min.x,Bt=je.min.y,ut=je.isBox3?je.min.z:0;else{const Ur=Math.pow(2,-Re);ft=Math.floor(Sn.width*Ur),gt=Math.floor(Sn.height*Ur),le.isDataArrayTexture?At=Sn.depth:le.isData3DTexture?At=Math.floor(Sn.depth*Ur):At=1,zt=0,Bt=0,ut=0}Oe!==null?(Pt=Oe.x,Ht=Oe.y,xn=Oe.z):(Pt=0,Ht=0,xn=0);const un=qt.convert(Me.format),kt=qt.convert(Me.type);let In;Me.isData3DTexture?(ie.setTexture3D(Me,0),In=fe.TEXTURE_3D):Me.isDataArrayTexture||Me.isCompressedArrayTexture?(ie.setTexture2DArray(Me,0),In=fe.TEXTURE_2D_ARRAY):(ie.setTexture2D(Me,0),In=fe.TEXTURE_2D),fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,Me.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,Me.unpackAlignment);const fn=fe.getParameter(fe.UNPACK_ROW_LENGTH),Xr=fe.getParameter(fe.UNPACK_IMAGE_HEIGHT),Fo=fe.getParameter(fe.UNPACK_SKIP_PIXELS),cr=fe.getParameter(fe.UNPACK_SKIP_ROWS),Yr=fe.getParameter(fe.UNPACK_SKIP_IMAGES);fe.pixelStorei(fe.UNPACK_ROW_LENGTH,Sn.width),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,Sn.height),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,zt),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,Bt),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,ut);const dn=le.isDataArrayTexture||le.isData3DTexture,Fr=Me.isDataArrayTexture||Me.isData3DTexture;if(le.isDepthTexture){const Ur=Ne.get(le),cn=Ne.get(Me),hr=Ne.get(Ur.__renderTarget),pn=Ne.get(cn.__renderTarget);we.bindFramebuffer(fe.READ_FRAMEBUFFER,hr.__webglFramebuffer),we.bindFramebuffer(fe.DRAW_FRAMEBUFFER,pn.__webglFramebuffer);for(let Qr=0;Qr<At;Qr++)dn&&(fe.framebufferTextureLayer(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Ne.get(le).__webglTexture,Re,ut+Qr),fe.framebufferTextureLayer(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Ne.get(Me).__webglTexture,tt,xn+Qr)),fe.blitFramebuffer(zt,Bt,ft,gt,Pt,Ht,ft,gt,fe.DEPTH_BUFFER_BIT,fe.NEAREST);we.bindFramebuffer(fe.READ_FRAMEBUFFER,null),we.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null)}else if(Re!==0||le.isRenderTargetTexture||Ne.has(le)){const Ur=Ne.get(le),cn=Ne.get(Me);we.bindFramebuffer(fe.READ_FRAMEBUFFER,zl),we.bindFramebuffer(fe.DRAW_FRAMEBUFFER,Hl);for(let hr=0;hr<At;hr++)dn?fe.framebufferTextureLayer(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,Ur.__webglTexture,Re,ut+hr):fe.framebufferTexture2D(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,Ur.__webglTexture,Re),Fr?fe.framebufferTextureLayer(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,cn.__webglTexture,tt,xn+hr):fe.framebufferTexture2D(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,cn.__webglTexture,tt),Re!==0?fe.blitFramebuffer(zt,Bt,ft,gt,Pt,Ht,ft,gt,fe.COLOR_BUFFER_BIT,fe.NEAREST):Fr?fe.copyTexSubImage3D(In,tt,Pt,Ht,xn+hr,zt,Bt,ft,gt):fe.copyTexSubImage2D(In,tt,Pt,Ht,zt,Bt,ft,gt);we.bindFramebuffer(fe.READ_FRAMEBUFFER,null),we.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null)}else Fr?le.isDataTexture||le.isData3DTexture?fe.texSubImage3D(In,tt,Pt,Ht,xn,ft,gt,At,un,kt,Sn.data):Me.isCompressedArrayTexture?fe.compressedTexSubImage3D(In,tt,Pt,Ht,xn,ft,gt,At,un,Sn.data):fe.texSubImage3D(In,tt,Pt,Ht,xn,ft,gt,At,un,kt,Sn):le.isDataTexture?fe.texSubImage2D(fe.TEXTURE_2D,tt,Pt,Ht,ft,gt,un,kt,Sn.data):le.isCompressedTexture?fe.compressedTexSubImage2D(fe.TEXTURE_2D,tt,Pt,Ht,Sn.width,Sn.height,un,Sn.data):fe.texSubImage2D(fe.TEXTURE_2D,tt,Pt,Ht,ft,gt,un,kt,Sn);fe.pixelStorei(fe.UNPACK_ROW_LENGTH,fn),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,Xr),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,Fo),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,cr),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,Yr),tt===0&&Me.generateMipmaps&&fe.generateMipmap(In),we.unbindTexture()},this.copyTextureToTexture3D=function(le,Me,je=null,Oe=null,Re=0){return le.isTexture!==!0&&(Dg("WebGLRenderer: copyTextureToTexture3D function signature has changed."),je=arguments[0]||null,Oe=arguments[1]||null,le=arguments[2],Me=arguments[3],Re=arguments[4]||0),Dg('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(le,Me,je,Oe,Re)},this.initRenderTarget=function(le){Ne.get(le).__webglFramebuffer===void 0&&ie.setupRenderTarget(le)},this.initTexture=function(le){le.isCubeTexture?ie.setTextureCube(le,0):le.isData3DTexture?ie.setTexture3D(le,0):le.isDataArrayTexture||le.isCompressedArrayTexture?ie.setTexture2DArray(le,0):ie.setTexture2D(le,0),we.unbindTexture()},this.resetState=function(){D=0,M=0,P=null,we.reset(),Rn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ml}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Wn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Wn._getUnpackColorSpace()}}const YW=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$O,AddEquation:sf,AddOperation:Eq,AdditiveAnimationBlendMode:r3,AdditiveBlending:iP,AgXToneMapping:Mq,AlphaFormat:YO,AlwaysCompare:Gq,AlwaysDepth:wE,AlwaysStencilFunc:lP,AmbientLight:IW,AnimationAction:jW,AnimationClip:Av,AnimationLoader:M_e,AnimationMixer:VW,AnimationObjectGroup:Z_e,AnimationUtils:A_e,ArcCurve:iW,ArrayCamera:BW,ArrowHelper:Exe,AttachedBindMode:aP,Audio:FW,AudioAnalyser:H_e,AudioContext:k3,AudioListener:j_e,AudioLoader:B_e,AxesHelper:Axe,BackSide:yo,BasicDepthPacking:Nq,BasicShadowMap:rq,BatchedMesh:rW,Bone:AS,BooleanKeyframeTrack:fm,Box2:uxe,Box3:$s,Box3Helper:wxe,BoxGeometry:hm,BoxHelper:xxe,BufferAttribute:Yn,BufferGeometry:En,BufferGeometryLoader:NW,ByteType:KO,Cache:Ic,Camera:Ex,CameraHelper:_xe,CanvasTexture:K0e,CapsuleGeometry:MS,CatmullRomCurve3:sW,CineonToneMapping:Tq,CircleGeometry:RS,ClampToEdgeWrapping:sa,Clock:O3,Color:bt,ColorKeyframeTrack:T3,ColorManagement:Wn,CompressedArrayTexture:W0e,CompressedCubeTexture:$0e,CompressedTexture:TS,CompressedTextureLoader:R_e,ConeGeometry:IS,ConstantAlphaFactor:xq,ConstantColorFactor:yq,Controls:Txe,CubeCamera:Qq,CubeReflectionMapping:$c,CubeRefractionMapping:Rf,CubeTexture:Ax,CubeTextureLoader:I_e,CubeUVReflectionMapping:$v,CubicBezierCurve:v3,CubicBezierCurve3:oW,CubicInterpolant:AW,CullFaceBack:rP,CullFaceFront:nq,CullFaceFrontBack:cye,CullFaceNone:tq,Curve:jl,CurvePath:lW,CustomBlending:iq,CustomToneMapping:Cq,CylinderGeometry:Xv,Cylindrical:lxe,Data3DTexture:wS,DataArrayTexture:bx,DataTexture:vu,DataTextureLoader:P_e,DataUtils:w0e,DecrementStencilOp:wye,DecrementWrapStencilOp:Eye,DefaultLoadingManager:CW,DepthFormat:Tp,DepthStencilFormat:Gp,DepthTexture:m3,DetachedBindMode:Iq,DirectionalLight:P3,DirectionalLightHelper:yxe,DiscreteInterpolant:SW,DodecahedronGeometry:PS,DoubleSide:Sl,DstAlphaFactor:dq,DstColorFactor:mq,DynamicCopyUsage:Fye,DynamicDrawUsage:kye,DynamicReadUsage:Nye,EdgesGeometry:uW,EllipseCurve:CS,EqualCompare:jq,EqualDepth:EE,EqualStencilFunc:Cye,EquirectangularReflectionMapping:R_,EquirectangularRefractionMapping:I_,Euler:ha,EventDispatcher:Mu,ExtrudeGeometry:OS,FileLoader:fa,Float16BufferAttribute:C0e,Float32BufferAttribute:Ut,FloatType:Lo,Fog:ES,FogExp2:bS,FramebufferTexture:q0e,FrontSide:bu,Frustum:Cx,GLBufferAttribute:oxe,GLSL1:jye,GLSL3:uP,GreaterCompare:Vq,GreaterDepth:SE,GreaterEqualCompare:Hq,GreaterEqualDepth:AE,GreaterEqualStencilFunc:Pye,GreaterStencilFunc:Rye,GridHelper:gxe,Group:Rc,HalfFloatType:Kv,HemisphereLight:RW,HemisphereLightHelper:mxe,IcosahedronGeometry:DS,ImageBitmapLoader:LW,ImageLoader:j_,ImageUtils:Kq,IncrementStencilOp:xye,IncrementWrapStencilOp:bye,InstancedBufferAttribute:Wp,InstancedBufferGeometry:DW,InstancedInterleavedBuffer:sxe,InstancedMesh:f3,Int16BufferAttribute:S0e,Int32BufferAttribute:T0e,Int8BufferAttribute:b0e,IntType:dS,InterleavedBuffer:Sx,InterleavedBufferAttribute:Pf,Interpolant:Qv,InterpolateDiscrete:xv,InterpolateLinear:wv,InterpolateSmooth:Ab,InvertStencilOp:Aye,KeepStencilOp:Zd,KeyframeTrack:Vl,LOD:nW,LatheGeometry:Mx,Layers:Mp,LessCompare:Uq,LessDepth:bE,LessEqualCompare:s3,LessEqualDepth:zp,LessEqualStencilFunc:Mye,LessStencilFunc:Tye,Light:Hf,LightProbe:OW,Line:Jc,Line3:cxe,LineBasicMaterial:Xs,LineCurve:y3,LineCurve3:aW,LineDashedMaterial:wW,LineLoop:d3,LineSegments:Ul,LinearFilter:vi,LinearInterpolant:S3,LinearMipMapLinearFilter:pye,LinearMipMapNearestFilter:dye,LinearMipmapLinearFilter:La,LinearMipmapNearestFilter:nv,LinearSRGBColorSpace:qp,LinearToneMapping:Aq,LinearTransfer:k_,Loader:Ys,LoaderUtils:gf,LoadingManager:C3,LoopOnce:Pq,LoopPingPong:Oq,LoopRepeat:kq,LuminanceAlphaFormat:e3,LuminanceFormat:ZO,MOUSE:lye,Material:Ji,MaterialLoader:VS,MathUtils:qq,Matrix2:B3,Matrix3:bn,Matrix4:Yt,MaxEquation:lq,Mesh:yi,MeshBasicMaterial:oa,MeshDepthMaterial:b3,MeshDistanceMaterial:E3,MeshLambertMaterial:_W,MeshMatcapMaterial:xW,MeshNormalMaterial:yW,MeshPhongMaterial:gW,MeshPhysicalMaterial:ja,MeshStandardMaterial:Px,MeshToonMaterial:vW,MinEquation:aq,MirroredRepeatWrapping:yv,MixOperation:bq,MultiplyBlending:oP,MultiplyOperation:xx,NearestFilter:hs,NearestMipMapLinearFilter:fye,NearestMipMapNearestFilter:hye,NearestMipmapLinearFilter:fp,NearestMipmapNearestFilter:fS,NeutralToneMapping:Rq,NeverCompare:Fq,NeverDepth:xE,NeverStencilFunc:Sye,NoBlending:Nc,NoColorSpace:Sc,NoToneMapping:gu,NormalAnimationBlendMode:_S,NormalBlending:Sp,NotEqualCompare:zq,NotEqualDepth:TE,NotEqualStencilFunc:Iye,NumberKeyframeTrack:Kp,Object3D:Bn,ObjectLoader:N_e,ObjectSpaceNormalMap:Bq,OctahedronGeometry:Rx,OneFactor:cq,OneMinusConstantAlphaFactor:wq,OneMinusConstantColorFactor:_q,OneMinusDstAlphaFactor:pq,OneMinusDstColorFactor:gq,OneMinusSrcAlphaFactor:_E,OneMinusSrcColorFactor:fq,OrthographicCamera:Zv,PCFShadowMap:cS,PCFSoftShadowMap:X0,PMREMGenerator:gP,Path:L_,PerspectiveCamera:Wi,Plane:Yh,PlaneGeometry:Yv,PlaneHelper:bxe,PointLight:I3,PointLightHelper:dxe,Points:p3,PointsMaterial:SS,PolarGridHelper:vxe,PolyhedronGeometry:zf,PositionalAudio:z_e,PropertyBinding:qn,PropertyMixer:UW,QuadraticBezierCurve:_3,QuadraticBezierCurve3:x3,Quaternion:Ws,QuaternionKeyframeTrack:Jp,QuaternionLinearInterpolant:TW,RED_GREEN_RGTC2_Format:YE,RED_RGTC1_Format:n3,REVISION:_x,RGBADepthPacking:Lq,RGBAFormat:qs,RGBAIntegerFormat:yS,RGBA_ASTC_10x10_Format:qE,RGBA_ASTC_10x5_Format:zE,RGBA_ASTC_10x6_Format:HE,RGBA_ASTC_10x8_Format:GE,RGBA_ASTC_12x10_Format:WE,RGBA_ASTC_12x12_Format:$E,RGBA_ASTC_4x4_Format:DE,RGBA_ASTC_5x4_Format:NE,RGBA_ASTC_5x5_Format:LE,RGBA_ASTC_6x5_Format:BE,RGBA_ASTC_6x6_Format:FE,RGBA_ASTC_8x5_Format:UE,RGBA_ASTC_8x6_Format:jE,RGBA_ASTC_8x8_Format:VE,RGBA_BPTC_Format:t_,RGBA_ETC2_EAC_Format:OE,RGBA_PVRTC_2BPPV1_Format:IE,RGBA_PVRTC_4BPPV1_Format:RE,RGBA_S3TC_DXT1_Format:Q0,RGBA_S3TC_DXT3_Format:Z0,RGBA_S3TC_DXT5_Format:e_,RGBDepthPacking:gye,RGBFormat:QO,RGBIntegerFormat:mye,RGB_BPTC_SIGNED_Format:KE,RGB_BPTC_UNSIGNED_Format:JE,RGB_ETC1_Format:PE,RGB_ETC2_Format:kE,RGB_PVRTC_2BPPV1_Format:ME,RGB_PVRTC_4BPPV1_Format:CE,RGB_S3TC_DXT1_Format:Y0,RGDepthPacking:vye,RGFormat:t3,RGIntegerFormat:vS,RawShaderMaterial:mW,Ray:Jv,Raycaster:zW,RectAreaLight:PW,RedFormat:gS,RedIntegerFormat:wx,ReinhardToneMapping:Sq,RenderTarget:xS,RenderTarget3D:txe,RenderTargetArray:nxe,RepeatWrapping:If,ReplaceStencilOp:_ye,ReverseSubtractEquation:oq,RingGeometry:NS,SIGNED_RED_GREEN_RGTC2_Format:QE,SIGNED_RED_RGTC1_Format:XE,SRGBColorSpace:ko,SRGBTransfer:ur,Scene:u3,ShaderChunk:Mn,ShaderLib:Al,ShaderMaterial:Nl,ShadowMaterial:pW,Shape:Rp,ShapeGeometry:LS,ShapePath:Sxe,ShapeUtils:yu,ShortType:JO,Skeleton:Tx,SkeletonHelper:fxe,SkinnedMesh:h3,Source:mp,Sphere:Ts,SphereGeometry:Ix,Spherical:axe,SphericalHarmonics3:kW,SplineCurve:w3,SpotLight:R3,SpotLightHelper:hxe,Sprite:tW,SpriteMaterial:c3,SrcAlphaFactor:yE,SrcAlphaSaturateFactor:vq,SrcColorFactor:hq,StaticCopyUsage:Bye,StaticDrawUsage:O_,StaticReadUsage:Dye,StereoCamera:F_e,StreamCopyUsage:Uye,StreamDrawUsage:Oye,StreamReadUsage:Lye,StringKeyframeTrack:dm,SubtractEquation:sq,SubtractiveBlending:sP,TOUCH:uye,TangentSpaceNormalMap:Vf,TetrahedronGeometry:BS,Texture:Br,TextureLoader:MW,TextureUtils:Pxe,TorusGeometry:FS,TorusKnotGeometry:US,Triangle:Do,TriangleFanDrawMode:ZE,TriangleStripDrawMode:i3,TrianglesDrawMode:Dq,TubeGeometry:jS,UVMapping:hS,Uint16BufferAttribute:a3,Uint32BufferAttribute:l3,Uint8BufferAttribute:E0e,Uint8ClampedBufferAttribute:A0e,Uniform:L3,UniformsGroup:ixe,UniformsLib:wt,UniformsUtils:Yq,UnsignedByteType:Dl,UnsignedInt248Type:Hp,UnsignedInt5999Type:XO,UnsignedIntType:Kc,UnsignedShort4444Type:pS,UnsignedShort5551Type:mS,UnsignedShortType:_v,VSMShadowMap:bl,Vector2:Ze,Vector3:pe,Vector4:Xn,VectorKeyframeTrack:Xp,VideoTexture:G0e,WebGL3DRenderTarget:h0e,WebGLArrayRenderTarget:c0e,WebGLCoordinateSystem:Ml,WebGLCubeRenderTarget:Zq,WebGLRenderTarget:Eu,WebGLRenderer:XW,WebGLUtils:JW,WebGPUCoordinateSystem:D_,WireframeGeometry:dW,WrapAroundEnding:P_,ZeroCurvatureEnding:dp,ZeroFactor:uq,ZeroSlopeEnding:pp,ZeroStencilOp:yye,createCanvasElement:$q},Symbol.toStringTag,{value:"Module"}));var AM={exports:{}},qh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ij;function fAe(){return ij||(ij=1,qh.ConcurrentRoot=1,qh.ContinuousEventPriority=4,qh.DefaultEventPriority=16,qh.DiscreteEventPriority=1,qh.IdleEventPriority=536870912,qh.LegacyRoot=0),qh}var sj;function dAe(){return sj||(sj=1,AM.exports=fAe()),AM.exports}var Kg=dAe();function pAe(n){let e;const t=new Set,r=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const f=e;e=c?h:Object.assign({},e,h),t.forEach(p=>p(e,f))}},i=()=>e,s=(u,c=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function p(){const g=c(e);if(!h(f,g)){const x=f;u(f=g,x)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(u,c,h)=>c||h?s(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const mAe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oj=mAe?W.useEffect:W.useLayoutEffect;function gAe(n){const e=typeof n=="function"?pAe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=W.useReducer(_=>_+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(r),u=W.useRef(i),c=W.useRef(!1),h=W.useRef();h.current===void 0&&(h.current=r(o));let f,p=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(f=r(o),p=!i(h.current,f)),oj(()=>{p&&(h.current=f),a.current=o,l.current=r,u.current=i,c.current=!1});const g=W.useRef(o);oj(()=>{const _=()=>{try{const b=e.getState(),E=l.current(b);u.current(h.current,E)||(a.current=b,h.current=E,s())}catch{c.current=!0,s()}},v=e.subscribe(_);return e.getState()!==g.current&&_(),v},[]);const x=p?f:h.current;return W.useDebugValue(x),x};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const vAe=n=>typeof n=="object"&&typeof n.then=="function",vp=[];function QW(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function ZW(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of vp)if(QW(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=vp.indexOf(i);s!==-1&&vp.splice(s,1)},promise:(vAe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(vp.push(i),!t)throw i.promise}const yAe=(n,e,t)=>ZW(n,e,!1,t),_Ae=(n,e,t)=>void ZW(n,e,!0,t),xAe=n=>{if(n===void 0||n.length===0)vp.splice(0,vp.length);else{const e=vp.find(t=>QW(n,t.keys,t.equal));e&&e.remove()}};var SM={exports:{}},TM={exports:{}},CM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aj;function wAe(){return aj||(aj=1,(function(n){function e(Q,ee){var Y=Q.length;Q.push(ee);e:for(;0<Y;){var V=Y-1>>>1,X=Q[V];if(0<i(X,ee))Q[V]=ee,Q[Y]=X,Y=V;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],Y=Q.pop();if(Y!==ee){Q[0]=Y;e:for(var V=0,X=Q.length,re=X>>>1;V<re;){var se=2*(V+1)-1,he=Q[se],te=se+1,ce=Q[te];if(0>i(he,Y))te<X&&0>i(ce,he)?(Q[V]=ce,Q[te]=Y,V=te):(Q[V]=he,Q[se]=Y,V=se);else if(te<X&&0>i(ce,Y))Q[V]=ce,Q[te]=Y,V=te;else break e}}return ee}function i(Q,ee){var Y=Q.sortIndex-ee.sortIndex;return Y!==0?Y:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,p=!1,g=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Q){for(var ee=t(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=Q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function S(Q){if(x=!1,E(Q),!g)if(t(l)!==null)g=!0,oe(C);else{var ee=t(u);ee!==null&&ae(S,ee.startTime-Q)}}function C(Q,ee){g=!1,x&&(x=!1,v(P),P=-1),p=!0;var Y=f;try{for(E(ee),h=t(l);h!==null&&(!(h.expirationTime>ee)||Q&&!N());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var X=V(h.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?h.callback=X:h===t(l)&&r(l),E(ee)}else r(l);h=t(l)}if(h!==null)var re=!0;else{var se=t(u);se!==null&&ae(S,se.startTime-ee),re=!1}return re}finally{h=null,f=Y,p=!1}}var D=!1,M=null,P=-1,O=5,R=-1;function N(){return!(n.unstable_now()-R<O)}function U(){if(M!==null){var Q=n.unstable_now();R=Q;var ee=!0;try{ee=M(!0,Q)}finally{ee?F():(D=!1,M=null)}}else D=!1}var F;if(typeof b=="function")F=function(){b(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Z=J.port2;J.port1.onmessage=U,F=function(){Z.postMessage(null)}}else F=function(){_(U,0)};function oe(Q){M=Q,D||(D=!0,F())}function ae(Q,ee){P=_(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,oe(C))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var ee=3;break;default:ee=f}var Y=f;f=ee;try{return Q()}finally{f=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=f;f=Q;try{return ee()}finally{f=Y}},n.unstable_scheduleCallback=function(Q,ee,Y){var V=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?V+Y:V):Y=V,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Y+X,Q={id:c++,callback:ee,priorityLevel:Q,startTime:Y,expirationTime:X,sortIndex:-1},Y>V?(Q.sortIndex=Y,e(u,Q),t(l)===null&&Q===t(u)&&(x?(v(P),P=-1):x=!0,ae(S,Y-V))):(Q.sortIndex=X,e(l,Q),g||p||(g=!0,oe(C))),Q},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(Q){var ee=f;return function(){var Y=f;f=ee;try{return Q.apply(this,arguments)}finally{f=Y}}}})(CM)),CM}var lj;function e$(){return lj||(lj=1,TM.exports=wAe()),TM.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MM,uj;function bAe(){return uj||(uj=1,MM=function(e){var t={},r=kf(),i=e$(),s=Object.assign;function o(y){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+y,I=1;I<arguments.length;I++)w+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+y+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),C=Symbol.iterator;function D(y){return y===null||typeof y!="object"?null:(y=C&&y[C]||y["@@iterator"],typeof y=="function"?y:null)}function M(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case g:return(y.displayName||"Context")+".Consumer";case p:return(y._context.displayName||"Context")+".Provider";case x:var w=y.render;return y=y.displayName,y||(y=w.displayName||w.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case b:return w=y.displayName||null,w!==null?w:M(y.type)||"Memo";case E:w=y._payload,y=y._init;try{return M(y(w))}catch{}}return null}function P(y){var w=y.type;switch(y.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=w.render,y=y.displayName||y.name||"",w.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(w);case 8:return w===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function O(y){var w=y,I=y;if(y.alternate)for(;w.return;)w=w.return;else{y=w;do w=y,(w.flags&4098)!==0&&(I=w.return),y=w.return;while(y)}return w.tag===3?I:null}function R(y){if(O(y)!==y)throw Error(o(188))}function N(y){var w=y.alternate;if(!w){if(w=O(y),w===null)throw Error(o(188));return w!==y?null:y}for(var I=y,B=w;;){var z=I.return;if(z===null)break;var $=z.alternate;if($===null){if(B=z.return,B!==null){I=B;continue}break}if(z.child===$.child){for($=z.child;$;){if($===I)return R(z),y;if($===B)return R(z),w;$=$.sibling}throw Error(o(188))}if(I.return!==B.return)I=z,B=$;else{for(var ge=!1,Ce=z.child;Ce;){if(Ce===I){ge=!0,I=z,B=$;break}if(Ce===B){ge=!0,B=z,I=$;break}Ce=Ce.sibling}if(!ge){for(Ce=$.child;Ce;){if(Ce===I){ge=!0,I=$,B=z;break}if(Ce===B){ge=!0,B=$,I=z;break}Ce=Ce.sibling}if(!ge)throw Error(o(189))}}if(I.alternate!==B)throw Error(o(190))}if(I.tag!==3)throw Error(o(188));return I.stateNode.current===I?y:w}function U(y){return y=N(y),y!==null?F(y):null}function F(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var w=F(y);if(w!==null)return w;y=y.sibling}return null}function J(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var w=J(y);if(w!==null)return w}y=y.sibling}return null}var Z=Array.isArray,oe=e.getPublicInstance,ae=e.getRootHostContext,Q=e.getChildHostContext,ee=e.prepareForCommit,Y=e.resetAfterCommit,V=e.createInstance,X=e.appendInitialChild,re=e.finalizeInitialChildren,se=e.prepareUpdate,he=e.shouldSetTextContent,te=e.createTextInstance,ce=e.scheduleTimeout,ve=e.cancelTimeout,xe=e.noTimeout,Te=e.isPrimaryRenderer,$e=e.supportsMutation,De=e.supportsPersistence,Be=e.supportsHydration,fe=e.getInstanceFromNode,it=e.preparePortalMount,Je=e.getCurrentEventPriority,rt=e.detachDeletedInstance,we=e.supportsMicrotasks,Ie=e.scheduleMicrotask,Ne=e.supportsTestSelectors,ie=e.findFiberRoot,q=e.getBoundingRect,me=e.getTextContent,de=e.isHiddenSubtree,ye=e.matchAccessibilityRole,be=e.setFocusIfFocusable,He=e.setupIntersectionObserver,qe=e.appendChild,lt=e.appendChildToContainer,vt=e.commitTextUpdate,Ye=e.commitMount,yt=e.commitUpdate,Ot=e.insertBefore,jt=e.insertInContainerBefore,Et=e.removeChild,on=e.removeChildFromContainer,qt=e.resetTextContent,Rn=e.hideInstance,Ae=e.hideTextInstance,mt=e.unhideInstance,Ge=e.unhideTextInstance,Xe=e.clearContainer,_t=e.cloneInstance,dt=e.createContainerChildSet,Zt=e.appendChildToContainerChildSet,Qn=e.finalizeContainerChildren,Tr=e.replaceContainerChildren,An=e.cloneHiddenInstance,_i=e.cloneHiddenTextInstance,Kn=e.canHydrateInstance,Va=e.canHydrateTextInstance,Ms=e.canHydrateSuspenseInstance,Qi=e.isSuspenseInstancePending,Qs=e.isSuspenseInstanceFallback,za=e.registerSuspenseInstanceRetry,xi=e.getNextHydratableSibling,da=e.getFirstHydratableChild,th=e.getFirstHydratableChildWithinContainer,Bo=e.getFirstHydratableChildWithinSuspenseInstance,Iu=e.hydrateInstance,Rs=e.hydrateTextInstance,Ha=e.hydrateSuspenseInstance,Zs=e.getNextHydratableInstanceAfterSuspenseInstance,Pu=e.commitHydratedContainer,ku=e.commitHydratedSuspenseInstance,zl=e.clearSuspenseBoundary,Hl=e.clearSuspenseBoundaryFromContainer,le=e.shouldDeleteUnhydratedTailInstances,Me=e.didNotMatchHydratedContainerTextInstance,je=e.didNotMatchHydratedTextInstance,Oe;function Re(y){if(Oe===void 0)try{throw Error()}catch(I){var w=I.stack.trim().match(/\n( *(at )?)/);Oe=w&&w[1]||""}return`
`+Oe+y}var tt=!1;function ft(y,w){if(!y||tt)return"";tt=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(ct){var B=ct}Reflect.construct(y,[],w)}else{try{w.call()}catch(ct){B=ct}y.call(w.prototype)}else{try{throw Error()}catch(ct){B=ct}y()}}catch(ct){if(ct&&B&&typeof ct.stack=="string"){for(var z=ct.stack.split(`
`),$=B.stack.split(`
`),ge=z.length-1,Ce=$.length-1;1<=ge&&0<=Ce&&z[ge]!==$[Ce];)Ce--;for(;1<=ge&&0<=Ce;ge--,Ce--)if(z[ge]!==$[Ce]){if(ge!==1||Ce!==1)do if(ge--,Ce--,0>Ce||z[ge]!==$[Ce]){var Ke=`
`+z[ge].replace(" at new "," at ");return y.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",y.displayName)),Ke}while(1<=ge&&0<=Ce);break}}}finally{tt=!1,Error.prepareStackTrace=I}return(y=y?y.displayName||y.name:"")?Re(y):""}var gt=Object.prototype.hasOwnProperty,At=[],zt=-1;function Bt(y){return{current:y}}function ut(y){0>zt||(y.current=At[zt],At[zt]=null,zt--)}function Pt(y,w){zt++,At[zt]=y.current,y.current=w}var Ht={},xn=Bt(Ht),Sn=Bt(!1),un=Ht;function kt(y,w){var I=y.type.contextTypes;if(!I)return Ht;var B=y.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===w)return B.__reactInternalMemoizedMaskedChildContext;var z={},$;for($ in I)z[$]=w[$];return B&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=w,y.__reactInternalMemoizedMaskedChildContext=z),z}function In(y){return y=y.childContextTypes,y!=null}function fn(){ut(Sn),ut(xn)}function Xr(y,w,I){if(xn.current!==Ht)throw Error(o(168));Pt(xn,w),Pt(Sn,I)}function Fo(y,w,I){var B=y.stateNode;if(w=w.childContextTypes,typeof B.getChildContext!="function")return I;B=B.getChildContext();for(var z in B)if(!(z in w))throw Error(o(108,P(y)||"Unknown",z));return s({},I,B)}function cr(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||Ht,un=xn.current,Pt(xn,y),Pt(Sn,Sn.current),!0}function Yr(y,w,I){var B=y.stateNode;if(!B)throw Error(o(169));I?(y=Fo(y,w,un),B.__reactInternalMemoizedMergedChildContext=y,ut(Sn),ut(xn),Pt(xn,y)):ut(Sn),Pt(Sn,I)}var dn=Math.clz32?Math.clz32:cn,Fr=Math.log,Ur=Math.LN2;function cn(y){return y>>>=0,y===0?32:31-(Fr(y)/Ur|0)|0}var hr=64,pn=4194304;function Qr(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Ou(y,w){var I=y.pendingLanes;if(I===0)return 0;var B=0,z=y.suspendedLanes,$=y.pingedLanes,ge=I&268435455;if(ge!==0){var Ce=ge&~z;Ce!==0?B=Qr(Ce):($&=ge,$!==0&&(B=Qr($)))}else ge=I&~z,ge!==0?B=Qr(ge):$!==0&&(B=Qr($));if(B===0)return 0;if(w!==0&&w!==B&&(w&z)===0&&(z=B&-B,$=w&-w,z>=$||z===16&&($&4194240)!==0))return w;if((B&4)!==0&&(B|=I&16),w=y.entangledLanes,w!==0)for(y=y.entanglements,w&=B;0<w;)I=31-dn(w),z=1<<I,B|=y[I],w&=~z;return B}function nh(y,w){switch(y){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(y,w){for(var I=y.suspendedLanes,B=y.pingedLanes,z=y.expirationTimes,$=y.pendingLanes;0<$;){var ge=31-dn($),Ce=1<<ge,Ke=z[ge];Ke===-1?((Ce&I)===0||(Ce&B)!==0)&&(z[ge]=nh(Ce,w)):Ke<=w&&(y.expiredLanes|=Ce),$&=~Ce}}function rh(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function ih(y){for(var w=[],I=0;31>I;I++)w.push(y);return w}function Ga(y,w,I){y.pendingLanes|=w,w!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,w=31-dn(w),y[w]=I}function pa(y,w){var I=y.pendingLanes&~w;y.pendingLanes=w,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=w,y.mutableReadLanes&=w,y.entangledLanes&=w,w=y.entanglements;var B=y.eventTimes;for(y=y.expirationTimes;0<I;){var z=31-dn(I),$=1<<z;w[z]=0,B[z]=-1,y[z]=-1,I&=~$}}function ci(y,w){var I=y.entangledLanes|=w;for(y=y.entanglements;I;){var B=31-dn(I),z=1<<B;z&w|y[B]&w&&(y[B]|=w),I&=~z}}var mn=0;function _o(y){return y&=-y,1<y?4<y?(y&268435455)!==0?16:536870912:4:1}var ma=i.unstable_scheduleCallback,eo=i.unstable_cancelCallback,ga=i.unstable_shouldYield,ny=i.unstable_requestPaint,jr=i.unstable_now,Zi=i.unstable_ImmediatePriority,ry=i.unstable_UserBlockingPriority,sh=i.unstable_NormalPriority,qa=i.unstable_IdlePriority,va=null,to=null;function Uo(y){if(to&&typeof to.onCommitFiberRoot=="function")try{to.onCommitFiberRoot(va,y,void 0,(y.current.flags&128)===128)}catch{}}function jo(y,w){return y===w&&(y!==0||1/y===1/w)||y!==y&&w!==w}var wi=typeof Object.is=="function"?Object.is:jo,es=null,ar=!1,qf=!1;function oh(y){es===null?es=[y]:es.push(y)}function Du(y){ar=!0,oh(y)}function fs(){if(!qf&&es!==null){qf=!0;var y=0,w=mn;try{var I=es;for(mn=1;y<I.length;y++){var B=I[y];do B=B(!0);while(B!==null)}es=null,ar=!1}catch(z){throw es!==null&&(es=es.slice(y+1)),ma(Zi,fs),z}finally{mn=w,qf=!1}}return null}var Wf=a.ReactCurrentBatchConfig;function ts(y,w){if(wi(y,w))return!0;if(typeof y!="object"||y===null||typeof w!="object"||w===null)return!1;var I=Object.keys(y),B=Object.keys(w);if(I.length!==B.length)return!1;for(B=0;B<I.length;B++){var z=I[B];if(!gt.call(w,z)||!wi(y[z],w[z]))return!1}return!0}function ah(y){switch(y.tag){case 5:return Re(y.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 2:case 15:return y=ft(y.type,!1),y;case 11:return y=ft(y.type.render,!1),y;case 1:return y=ft(y.type,!0),y;default:return""}}function _r(y,w){if(y&&y.defaultProps){w=s({},w),y=y.defaultProps;for(var I in y)w[I]===void 0&&(w[I]=y[I]);return w}return w}var Gl=Bt(null),Wa=null,ds=null,Nu=null;function hi(){Nu=ds=Wa=null}function xo(y,w,I){Te?(Pt(Gl,w._currentValue),w._currentValue=I):(Pt(Gl,w._currentValue2),w._currentValue2=I)}function ql(y){var w=Gl.current;ut(Gl),Te?y._currentValue=w:y._currentValue2=w}function wo(y,w,I){for(;y!==null;){var B=y.alternate;if((y.childLanes&w)!==w?(y.childLanes|=w,B!==null&&(B.childLanes|=w)):B!==null&&(B.childLanes&w)!==w&&(B.childLanes|=w),y===I)break;y=y.return}}function Wl(y,w){Wa=y,Nu=ds=null,y=y.dependencies,y!==null&&y.firstContext!==null&&((y.lanes&w)!==0&&(Ti=!0),y.firstContext=null)}function Fi(y){var w=Te?y._currentValue:y._currentValue2;if(Nu!==y)if(y={context:y,memoizedValue:w,next:null},ds===null){if(Wa===null)throw Error(o(308));ds=y,Wa.dependencies={lanes:0,firstContext:y}}else ds=ds.next=y;return w}var bi=null,ps=!1;function $a(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lu(y,w){y=y.updateQueue,w.updateQueue===y&&(w.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function no(y,w){return{eventTime:y,lane:w,tag:0,payload:null,callback:null,next:null}}function Vo(y,w){var I=y.updateQueue;I!==null&&(I=I.shared,zr!==null&&(y.mode&1)!==0&&(wn&2)===0?(y=I.interleaved,y===null?(w.next=w,bi===null?bi=[I]:bi.push(I)):(w.next=y.next,y.next=w),I.interleaved=w):(y=I.pending,y===null?w.next=w:(w.next=y.next,y.next=w),I.pending=w))}function Ka(y,w,I){if(w=w.updateQueue,w!==null&&(w=w.shared,(I&4194240)!==0)){var B=w.lanes;B&=y.pendingLanes,I|=B,w.lanes=I,ci(y,I)}}function Bu(y,w){var I=y.updateQueue,B=y.alternate;if(B!==null&&(B=B.updateQueue,I===B)){var z=null,$=null;if(I=I.firstBaseUpdate,I!==null){do{var ge={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};$===null?z=$=ge:$=$.next=ge,I=I.next}while(I!==null);$===null?z=$=w:$=$.next=w}else z=$=w;I={baseState:B.baseState,firstBaseUpdate:z,lastBaseUpdate:$,shared:B.shared,effects:B.effects},y.updateQueue=I;return}y=I.lastBaseUpdate,y===null?I.firstBaseUpdate=w:y.next=w,I.lastBaseUpdate=w}function Fu(y,w,I,B){var z=y.updateQueue;ps=!1;var $=z.firstBaseUpdate,ge=z.lastBaseUpdate,Ce=z.shared.pending;if(Ce!==null){z.shared.pending=null;var Ke=Ce,ct=Ke.next;Ke.next=null,ge===null?$=ct:ge.next=ct,ge=Ke;var Mt=y.alternate;Mt!==null&&(Mt=Mt.updateQueue,Ce=Mt.lastBaseUpdate,Ce!==ge&&(Ce===null?Mt.firstBaseUpdate=ct:Ce.next=ct,Mt.lastBaseUpdate=Ke))}if($!==null){var an=z.baseState;ge=0,Mt=ct=Ke=null,Ce=$;do{var Gt=Ce.lane,Tn=Ce.eventTime;if((B&Gt)===Gt){Mt!==null&&(Mt=Mt.next={eventTime:Tn,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var St=y,Hi=Ce;switch(Gt=w,Tn=I,Hi.tag){case 1:if(St=Hi.payload,typeof St=="function"){an=St.call(Tn,an,Gt);break e}an=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Hi.payload,Gt=typeof St=="function"?St.call(Tn,an,Gt):St,Gt==null)break e;an=s({},an,Gt);break e;case 2:ps=!0}}Ce.callback!==null&&Ce.lane!==0&&(y.flags|=64,Gt=z.effects,Gt===null?z.effects=[Ce]:Gt.push(Ce))}else Tn={eventTime:Tn,lane:Gt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Mt===null?(ct=Mt=Tn,Ke=an):Mt=Mt.next=Tn,ge|=Gt;if(Ce=Ce.next,Ce===null){if(Ce=z.shared.pending,Ce===null)break;Gt=Ce,Ce=Gt.next,Gt.next=null,z.lastBaseUpdate=Gt,z.shared.pending=null}}while(!0);if(Mt===null&&(Ke=an),z.baseState=Ke,z.firstBaseUpdate=ct,z.lastBaseUpdate=Mt,w=z.shared.interleaved,w!==null){z=w;do ge|=z.lane,z=z.next;while(z!==w)}else $===null&&(z.shared.lanes=0);ba|=ge,y.lanes=ge,y.memoizedState=an}}function ya(y,w,I){if(y=w.effects,w.effects=null,y!==null)for(w=0;w<y.length;w++){var B=y[w],z=B.callback;if(z!==null){if(B.callback=null,B=I,typeof z!="function")throw Error(o(191,z));z.call(B)}}}var $f=new r.Component().refs;function lh(y,w,I,B){w=y.memoizedState,I=I(B,w),I=I==null?w:s({},w,I),y.memoizedState=I,y.lanes===0&&(y.updateQueue.baseState=I)}var Uu={isMounted:function(y){return(y=y._reactInternals)?O(y)===y:!1},enqueueSetState:function(y,w,I){y=y._reactInternals;var B=Hn(),z=Jo(y),$=no(B,z);$.payload=w,I!=null&&($.callback=I),Vo(y,$),w=os(y,z,B),w!==null&&Ka(w,y,z)},enqueueReplaceState:function(y,w,I){y=y._reactInternals;var B=Hn(),z=Jo(y),$=no(B,z);$.tag=1,$.payload=w,I!=null&&($.callback=I),Vo(y,$),w=os(y,z,B),w!==null&&Ka(w,y,z)},enqueueForceUpdate:function(y,w){y=y._reactInternals;var I=Hn(),B=Jo(y),z=no(I,B);z.tag=2,w!=null&&(z.callback=w),Vo(y,z),w=os(y,B,I),w!==null&&Ka(w,y,B)}};function uh(y,w,I,B,z,$,ge){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(B,$,ge):w.prototype&&w.prototype.isPureReactComponent?!ts(I,B)||!ts(z,$):!0}function ju(y,w,I){var B=!1,z=Ht,$=w.contextType;return typeof $=="object"&&$!==null?$=Fi($):(z=In(w)?un:xn.current,B=w.contextTypes,$=(B=B!=null)?kt(y,z):Ht),w=new w(I,$),y.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Uu,y.stateNode=w,w._reactInternals=y,B&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=z,y.__reactInternalMemoizedMaskedChildContext=$),w}function ns(y,w,I,B){y=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(I,B),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(I,B),w.state!==y&&Uu.enqueueReplaceState(w,w.state,null)}function ch(y,w,I,B){var z=y.stateNode;z.props=I,z.state=y.memoizedState,z.refs=$f,$a(y);var $=w.contextType;typeof $=="object"&&$!==null?z.context=Fi($):($=In(w)?un:xn.current,z.context=kt(y,$)),z.state=y.memoizedState,$=w.getDerivedStateFromProps,typeof $=="function"&&(lh(y,w,$,I),z.state=y.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(w=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),w!==z.state&&Uu.enqueueReplaceState(z,z.state,null),Fu(y,I,z,B),z.state=y.memoizedState),typeof z.componentDidMount=="function"&&(y.flags|=4194308)}var Ja=[],ms=0,T=null,H=0,K=[],ue=0,ke=null,Ve=1,at="";function Nn(y,w){Ja[ms++]=H,Ja[ms++]=T,T=y,H=w}function Zr(y,w,I){K[ue++]=Ve,K[ue++]=at,K[ue++]=ke,ke=y;var B=Ve;y=at;var z=32-dn(B)-1;B&=~(1<<z),I+=1;var $=32-dn(w)+z;if(30<$){var ge=z-z%5;$=(B&(1<<ge)-1).toString(32),B>>=ge,z-=ge,Ve=1<<32-dn(w)+z|I<<z|B,at=$+y}else Ve=1<<$|I<<z|B,at=y}function kn(y){y.return!==null&&(Nn(y,1),Zr(y,1,0))}function ei(y){for(;y===T;)T=Ja[--ms],Ja[ms]=null,H=Ja[--ms],Ja[ms]=null;for(;y===ke;)ke=K[--ue],K[ue]=null,at=K[--ue],K[ue]=null,Ve=K[--ue],K[ue]=null}var zn=null,xr=null,On=!1,zo=!1,rs=null;function iy(y,w){var I=uo(5,null,null,0);I.elementType="DELETED",I.stateNode=w,I.return=y,w=y.deletions,w===null?(y.deletions=[I],y.flags|=16):w.push(I)}function sy(y,w){switch(y.tag){case 5:return w=Kn(w,y.type,y.pendingProps),w!==null?(y.stateNode=w,zn=y,xr=da(w),!0):!1;case 6:return w=Va(w,y.pendingProps),w!==null?(y.stateNode=w,zn=y,xr=null,!0):!1;case 13:if(w=Ms(w),w!==null){var I=ke!==null?{id:Ve,overflow:at}:null;return y.memoizedState={dehydrated:w,treeContext:I,retryLane:1073741824},I=uo(18,null,null,0),I.stateNode=w,I.return=y,y.child=I,zn=y,xr=null,!0}return!1;default:return!1}}function mm(y){return(y.mode&1)!==0&&(y.flags&128)===0}function $l(y){if(On){var w=xr;if(w){var I=w;if(!sy(y,w)){if(mm(y))throw Error(o(418));w=xi(I);var B=zn;w&&sy(y,w)?iy(B,I):(y.flags=y.flags&-4097|2,On=!1,zn=y)}}else{if(mm(y))throw Error(o(418));y.flags=y.flags&-4097|2,On=!1,zn=y}}}function Ux(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;zn=y}function Kf(y){if(!Be||y!==zn)return!1;if(!On)return Ux(y),On=!0,!1;if(y.tag!==3&&(y.tag!==5||le(y.type)&&!he(y.type,y.memoizedProps))){var w=xr;if(w){if(mm(y)){for(y=xr;y;)y=xi(y);throw Error(o(418))}for(;w;)iy(y,w),w=xi(w)}}if(Ux(y),y.tag===13){if(!Be)throw Error(o(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));xr=Zs(y)}else xr=zn?xi(y.stateNode):null;return!0}function hh(){Be&&(xr=zn=null,zo=On=!1)}function gm(y){rs===null?rs=[y]:rs.push(y)}function fh(y,w,I){if(y=I.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(o(309));var B=I.stateNode}if(!B)throw Error(o(147,y));var z=B,$=""+y;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===$?w.ref:(w=function(ge){var Ce=z.refs;Ce===$f&&(Ce=z.refs={}),ge===null?delete Ce[$]:Ce[$]=ge},w._stringRef=$,w)}if(typeof y!="string")throw Error(o(284));if(!I._owner)throw Error(o(290,y))}return y}function Kl(y,w){throw y=Object.prototype.toString.call(w),Error(o(31,y==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":y))}function dh(y){var w=y._init;return w(y._payload)}function jx(y){function w(Ue,Pe){if(y){var We=Ue.deletions;We===null?(Ue.deletions=[Pe],Ue.flags|=16):We.push(Pe)}}function I(Ue,Pe){if(!y)return null;for(;Pe!==null;)w(Ue,Pe),Pe=Pe.sibling;return null}function B(Ue,Pe){for(Ue=new Map;Pe!==null;)Pe.key!==null?Ue.set(Pe.key,Pe):Ue.set(Pe.index,Pe),Pe=Pe.sibling;return Ue}function z(Ue,Pe){return Ue=ul(Ue,Pe),Ue.index=0,Ue.sibling=null,Ue}function $(Ue,Pe,We){return Ue.index=We,y?(We=Ue.alternate,We!==null?(We=We.index,We<Pe?(Ue.flags|=2,Pe):We):(Ue.flags|=2,Pe)):(Ue.flags|=1048576,Pe)}function ge(Ue){return y&&Ue.alternate===null&&(Ue.flags|=2),Ue}function Ce(Ue,Pe,We,xt){return Pe===null||Pe.tag!==6?(Pe=Hm(We,Ue.mode,xt),Pe.return=Ue,Pe):(Pe=z(Pe,We),Pe.return=Ue,Pe)}function Ke(Ue,Pe,We,xt){var Ft=We.type;return Ft===c?Mt(Ue,Pe,We.props.children,xt,We.key):Pe!==null&&(Pe.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===E&&dh(Ft)===Pe.type)?(xt=z(Pe,We.props),xt.ref=fh(Ue,Pe,We),xt.return=Ue,xt):(xt=zm(We.type,We.key,We.props,null,Ue.mode,xt),xt.ref=fh(Ue,Pe,We),xt.return=Ue,xt)}function ct(Ue,Pe,We,xt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==We.containerInfo||Pe.stateNode.implementation!==We.implementation?(Pe=Gm(We,Ue.mode,xt),Pe.return=Ue,Pe):(Pe=z(Pe,We.children||[]),Pe.return=Ue,Pe)}function Mt(Ue,Pe,We,xt,Ft){return Pe===null||Pe.tag!==7?(Pe=lc(We,Ue.mode,xt,Ft),Pe.return=Ue,Pe):(Pe=z(Pe,We),Pe.return=Ue,Pe)}function an(Ue,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=Hm(""+Pe,Ue.mode,We),Pe.return=Ue,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case l:return We=zm(Pe.type,Pe.key,Pe.props,null,Ue.mode,We),We.ref=fh(Ue,null,Pe),We.return=Ue,We;case u:return Pe=Gm(Pe,Ue.mode,We),Pe.return=Ue,Pe;case E:var xt=Pe._init;return an(Ue,xt(Pe._payload),We)}if(Z(Pe)||D(Pe))return Pe=lc(Pe,Ue.mode,We,null),Pe.return=Ue,Pe;Kl(Ue,Pe)}return null}function Gt(Ue,Pe,We,xt){var Ft=Pe!==null?Pe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return Ft!==null?null:Ce(Ue,Pe,""+We,xt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return We.key===Ft?Ke(Ue,Pe,We,xt):null;case u:return We.key===Ft?ct(Ue,Pe,We,xt):null;case E:return Ft=We._init,Gt(Ue,Pe,Ft(We._payload),xt)}if(Z(We)||D(We))return Ft!==null?null:Mt(Ue,Pe,We,xt,null);Kl(Ue,We)}return null}function Tn(Ue,Pe,We,xt,Ft){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ue=Ue.get(We)||null,Ce(Pe,Ue,""+xt,Ft);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return Ue=Ue.get(xt.key===null?We:xt.key)||null,Ke(Pe,Ue,xt,Ft);case u:return Ue=Ue.get(xt.key===null?We:xt.key)||null,ct(Pe,Ue,xt,Ft);case E:var gn=xt._init;return Tn(Ue,Pe,We,gn(xt._payload),Ft)}if(Z(xt)||D(xt))return Ue=Ue.get(We)||null,Mt(Pe,Ue,xt,Ft,null);Kl(Pe,xt)}return null}function St(Ue,Pe,We,xt){for(var Ft=null,gn=null,ln=Pe,Vn=Pe=0,ni=null;ln!==null&&Vn<We.length;Vn++){ln.index>Vn?(ni=ln,ln=null):ni=ln.sibling;var Fn=Gt(Ue,ln,We[Vn],xt);if(Fn===null){ln===null&&(ln=ni);break}y&&ln&&Fn.alternate===null&&w(Ue,ln),Pe=$(Fn,Pe,Vn),gn===null?Ft=Fn:gn.sibling=Fn,gn=Fn,ln=ni}if(Vn===We.length)return I(Ue,ln),On&&Nn(Ue,Vn),Ft;if(ln===null){for(;Vn<We.length;Vn++)ln=an(Ue,We[Vn],xt),ln!==null&&(Pe=$(ln,Pe,Vn),gn===null?Ft=ln:gn.sibling=ln,gn=ln);return On&&Nn(Ue,Vn),Ft}for(ln=B(Ue,ln);Vn<We.length;Vn++)ni=Tn(ln,Ue,Vn,We[Vn],xt),ni!==null&&(y&&ni.alternate!==null&&ln.delete(ni.key===null?Vn:ni.key),Pe=$(ni,Pe,Vn),gn===null?Ft=ni:gn.sibling=ni,gn=ni);return y&&ln.forEach(function(cl){return w(Ue,cl)}),On&&Nn(Ue,Vn),Ft}function Hi(Ue,Pe,We,xt){var Ft=D(We);if(typeof Ft!="function")throw Error(o(150));if(We=Ft.call(We),We==null)throw Error(o(151));for(var gn=Ft=null,ln=Pe,Vn=Pe=0,ni=null,Fn=We.next();ln!==null&&!Fn.done;Vn++,Fn=We.next()){ln.index>Vn?(ni=ln,ln=null):ni=ln.sibling;var cl=Gt(Ue,ln,Fn.value,xt);if(cl===null){ln===null&&(ln=ni);break}y&&ln&&cl.alternate===null&&w(Ue,ln),Pe=$(cl,Pe,Vn),gn===null?Ft=cl:gn.sibling=cl,gn=cl,ln=ni}if(Fn.done)return I(Ue,ln),On&&Nn(Ue,Vn),Ft;if(ln===null){for(;!Fn.done;Vn++,Fn=We.next())Fn=an(Ue,Fn.value,xt),Fn!==null&&(Pe=$(Fn,Pe,Vn),gn===null?Ft=Fn:gn.sibling=Fn,gn=Fn);return On&&Nn(Ue,Vn),Ft}for(ln=B(Ue,ln);!Fn.done;Vn++,Fn=We.next())Fn=Tn(ln,Ue,Vn,Fn.value,xt),Fn!==null&&(y&&Fn.alternate!==null&&ln.delete(Fn.key===null?Vn:Fn.key),Pe=$(Fn,Pe,Vn),gn===null?Ft=Fn:gn.sibling=Fn,gn=Fn);return y&&ln.forEach(function(Ly){return w(Ue,Ly)}),On&&Nn(Ue,Vn),Ft}function co(Ue,Pe,We,xt){if(typeof We=="object"&&We!==null&&We.type===c&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case l:e:{for(var Ft=We.key,gn=Pe;gn!==null;){if(gn.key===Ft){if(Ft=We.type,Ft===c){if(gn.tag===7){I(Ue,gn.sibling),Pe=z(gn,We.props.children),Pe.return=Ue,Ue=Pe;break e}}else if(gn.elementType===Ft||typeof Ft=="object"&&Ft!==null&&Ft.$$typeof===E&&dh(Ft)===gn.type){I(Ue,gn.sibling),Pe=z(gn,We.props),Pe.ref=fh(Ue,gn,We),Pe.return=Ue,Ue=Pe;break e}I(Ue,gn);break}else w(Ue,gn);gn=gn.sibling}We.type===c?(Pe=lc(We.props.children,Ue.mode,xt,We.key),Pe.return=Ue,Ue=Pe):(xt=zm(We.type,We.key,We.props,null,Ue.mode,xt),xt.ref=fh(Ue,Pe,We),xt.return=Ue,Ue=xt)}return ge(Ue);case u:e:{for(gn=We.key;Pe!==null;){if(Pe.key===gn)if(Pe.tag===4&&Pe.stateNode.containerInfo===We.containerInfo&&Pe.stateNode.implementation===We.implementation){I(Ue,Pe.sibling),Pe=z(Pe,We.children||[]),Pe.return=Ue,Ue=Pe;break e}else{I(Ue,Pe);break}else w(Ue,Pe);Pe=Pe.sibling}Pe=Gm(We,Ue.mode,xt),Pe.return=Ue,Ue=Pe}return ge(Ue);case E:return gn=We._init,co(Ue,Pe,gn(We._payload),xt)}if(Z(We))return St(Ue,Pe,We,xt);if(D(We))return Hi(Ue,Pe,We,xt);Kl(Ue,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Pe!==null&&Pe.tag===6?(I(Ue,Pe.sibling),Pe=z(Pe,We),Pe.return=Ue,Ue=Pe):(I(Ue,Pe),Pe=Hm(We,Ue.mode,xt),Pe.return=Ue,Ue=Pe),ge(Ue)):I(Ue,Pe)}return co}var Xa=jx(!0),Vx=jx(!1),ph={},Is=Bt(ph),Vu=Bt(ph),zu=Bt(ph);function Ho(y){if(y===ph)throw Error(o(174));return y}function vm(y,w){Pt(zu,w),Pt(Vu,y),Pt(Is,ph),y=ae(w),ut(Is),Pt(Is,y)}function mh(){ut(Is),ut(Vu),ut(zu)}function zx(y){var w=Ho(zu.current),I=Ho(Is.current);w=Q(I,y.type,w),I!==w&&(Pt(Vu,y),Pt(Is,w))}function oy(y){Vu.current===y&&(ut(Is),ut(Vu))}var Cr=Bt(0);function ym(y){for(var w=y;w!==null;){if(w.tag===13){var I=w.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||Qi(I)||Qs(I)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var ro=[];function Hu(){for(var y=0;y<ro.length;y++){var w=ro[y];Te?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}ro.length=0}var Jf=a.ReactCurrentDispatcher,io=a.ReactCurrentBatchConfig,Gu=0,Mr=null,Ei=null,Ai=null,_m=!1,_a=!1,qu=0,Xf=0;function Si(){throw Error(o(321))}function xm(y,w){if(w===null)return!1;for(var I=0;I<w.length&&I<y.length;I++)if(!wi(y[I],w[I]))return!1;return!0}function gh(y,w,I,B,z,$){if(Gu=$,Mr=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,Jf.current=y===null||y.memoizedState===null?fy:dy,y=I(B,z),_a){$=0;do{if(_a=!1,qu=0,25<=$)throw Error(o(301));$+=1,Ai=Ei=null,w.updateQueue=null,Jf.current=py,y=I(B,z)}while(_a)}if(Jf.current=xh,w=Ei!==null&&Ei.next!==null,Gu=0,Ai=Ei=Mr=null,_m=!1,w)throw Error(o(300));return y}function Jl(){var y=qu!==0;return qu=0,y}function Go(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Mr.memoizedState=Ai=y:Ai=Ai.next=y,Ai}function qo(){if(Ei===null){var y=Mr.alternate;y=y!==null?y.memoizedState:null}else y=Ei.next;var w=Ai===null?Mr.memoizedState:Ai.next;if(w!==null)Ai=w,Ei=y;else{if(y===null)throw Error(o(310));Ei=y,y={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},Ai===null?Mr.memoizedState=Ai=y:Ai=Ai.next=y}return Ai}function xa(y,w){return typeof w=="function"?w(y):w}function Yf(y){var w=qo(),I=w.queue;if(I===null)throw Error(o(311));I.lastRenderedReducer=y;var B=Ei,z=B.baseQueue,$=I.pending;if($!==null){if(z!==null){var ge=z.next;z.next=$.next,$.next=ge}B.baseQueue=z=$,I.pending=null}if(z!==null){$=z.next,B=B.baseState;var Ce=ge=null,Ke=null,ct=$;do{var Mt=ct.lane;if((Gu&Mt)===Mt)Ke!==null&&(Ke=Ke.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),B=ct.hasEagerState?ct.eagerState:y(B,ct.action);else{var an={lane:Mt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Ke===null?(Ce=Ke=an,ge=B):Ke=Ke.next=an,Mr.lanes|=Mt,ba|=Mt}ct=ct.next}while(ct!==null&&ct!==$);Ke===null?ge=B:Ke.next=Ce,wi(B,w.memoizedState)||(Ti=!0),w.memoizedState=B,w.baseState=ge,w.baseQueue=Ke,I.lastRenderedState=B}if(y=I.interleaved,y!==null){z=y;do $=z.lane,Mr.lanes|=$,ba|=$,z=z.next;while(z!==y)}else z===null&&(I.lanes=0);return[w.memoizedState,I.dispatch]}function Qf(y){var w=qo(),I=w.queue;if(I===null)throw Error(o(311));I.lastRenderedReducer=y;var B=I.dispatch,z=I.pending,$=w.memoizedState;if(z!==null){I.pending=null;var ge=z=z.next;do $=y($,ge.action),ge=ge.next;while(ge!==z);wi($,w.memoizedState)||(Ti=!0),w.memoizedState=$,w.baseQueue===null&&(w.baseState=$),I.lastRenderedState=$}return[$,B]}function ay(){}function ly(y,w){var I=Mr,B=qo(),z=w(),$=!wi(B.memoizedState,z);if($&&(B.memoizedState=z,Ti=!0),B=B.queue,vh(Ya.bind(null,I,B,y),[y]),B.getSnapshot!==w||$||Ai!==null&&Ai.memoizedState.tag&1){if(I.flags|=2048,ed(9,cy.bind(null,I,B,z,w),void 0,null),zr===null)throw Error(o(349));(Gu&30)!==0||uy(I,w,z)}return z}function uy(y,w,I){y.flags|=16384,y={getSnapshot:w,value:I},w=Mr.updateQueue,w===null?(w={lastEffect:null,stores:null},Mr.updateQueue=w,w.stores=[y]):(I=w.stores,I===null?w.stores=[y]:I.push(y))}function cy(y,w,I,B){w.value=I,w.getSnapshot=B,wm(w)&&os(y,1,-1)}function Ya(y,w,I){return I(function(){wm(w)&&os(y,1,-1)})}function wm(y){var w=y.getSnapshot;y=y.value;try{var I=w();return!wi(y,I)}catch{return!0}}function Zf(y){var w=Go();return typeof y=="function"&&(y=y()),w.memoizedState=w.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:y},w.queue=y,y=y.dispatch=rT.bind(null,Mr,y),[w.memoizedState,y]}function ed(y,w,I,B){return y={tag:y,create:w,destroy:I,deps:B,next:null},w=Mr.updateQueue,w===null?(w={lastEffect:null,stores:null},Mr.updateQueue=w,w.lastEffect=y.next=y):(I=w.lastEffect,I===null?w.lastEffect=y.next=y:(B=I.next,I.next=y,y.next=B,w.lastEffect=y)),y}function Hx(){return qo().memoizedState}function Xl(y,w,I,B){var z=Go();Mr.flags|=y,z.memoizedState=ed(1|w,I,void 0,B===void 0?null:B)}function bm(y,w,I,B){var z=qo();B=B===void 0?null:B;var $=void 0;if(Ei!==null){var ge=Ei.memoizedState;if($=ge.destroy,B!==null&&xm(B,ge.deps)){z.memoizedState=ed(w,I,$,B);return}}Mr.flags|=y,z.memoizedState=ed(1|w,I,$,B)}function Em(y,w){return Xl(8390656,8,y,w)}function vh(y,w){return bm(2048,8,y,w)}function fr(y,w){return bm(4,2,y,w)}function Am(y,w){return bm(4,4,y,w)}function td(y,w){if(typeof w=="function")return y=y(),w(y),function(){w(null)};if(w!=null)return y=y(),w.current=y,function(){w.current=null}}function yh(y,w,I){return I=I!=null?I.concat([y]):null,bm(4,4,td.bind(null,w,y),I)}function Sm(){}function Tm(y,w){var I=qo();w=w===void 0?null:w;var B=I.memoizedState;return B!==null&&w!==null&&xm(w,B[1])?B[0]:(I.memoizedState=[y,w],y)}function _h(y,w){var I=qo();w=w===void 0?null:w;var B=I.memoizedState;return B!==null&&w!==null&&xm(w,B[1])?B[0]:(y=y(),I.memoizedState=[y,w],y)}function Cm(y,w){var I=mn;mn=I!==0&&4>I?I:4,y(!0);var B=io.transition;io.transition={};try{y(!1),w()}finally{mn=I,io.transition=B}}function Wu(){return qo().memoizedState}function Gx(y,w,I){var B=Jo(y);I={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null},qx(y)?hy(w,I):(nd(y,w,I),I=Hn(),y=os(y,B,I),y!==null&&rd(y,w,B))}function rT(y,w,I){var B=Jo(y),z={lane:B,action:I,hasEagerState:!1,eagerState:null,next:null};if(qx(y))hy(w,z);else{nd(y,w,z);var $=y.alternate;if(y.lanes===0&&($===null||$.lanes===0)&&($=w.lastRenderedReducer,$!==null))try{var ge=w.lastRenderedState,Ce=$(ge,I);if(z.hasEagerState=!0,z.eagerState=Ce,wi(Ce,ge))return}catch{}finally{}I=Hn(),y=os(y,B,I),y!==null&&rd(y,w,B)}}function qx(y){var w=y.alternate;return y===Mr||w!==null&&w===Mr}function hy(y,w){_a=_m=!0;var I=y.pending;I===null?w.next=w:(w.next=I.next,I.next=w),y.pending=w}function nd(y,w,I){zr!==null&&(y.mode&1)!==0&&(wn&2)===0?(y=w.interleaved,y===null?(I.next=I,bi===null?bi=[w]:bi.push(w)):(I.next=y.next,y.next=I),w.interleaved=I):(y=w.pending,y===null?I.next=I:(I.next=y.next,y.next=I),w.pending=I)}function rd(y,w,I){if((I&4194240)!==0){var B=w.lanes;B&=y.pendingLanes,I|=B,w.lanes=I,ci(y,I)}}var xh={readContext:Fi,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},fy={readContext:Fi,useCallback:function(y,w){return Go().memoizedState=[y,w===void 0?null:w],y},useContext:Fi,useEffect:Em,useImperativeHandle:function(y,w,I){return I=I!=null?I.concat([y]):null,Xl(4194308,4,td.bind(null,w,y),I)},useLayoutEffect:function(y,w){return Xl(4194308,4,y,w)},useInsertionEffect:function(y,w){return Xl(4,2,y,w)},useMemo:function(y,w){var I=Go();return w=w===void 0?null:w,y=y(),I.memoizedState=[y,w],y},useReducer:function(y,w,I){var B=Go();return w=I!==void 0?I(w):w,B.memoizedState=B.baseState=w,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:w},B.queue=y,y=y.dispatch=Gx.bind(null,Mr,y),[B.memoizedState,y]},useRef:function(y){var w=Go();return y={current:y},w.memoizedState=y},useState:Zf,useDebugValue:Sm,useDeferredValue:function(y){var w=Zf(y),I=w[0],B=w[1];return Em(function(){var z=io.transition;io.transition={};try{B(y)}finally{io.transition=z}},[y]),I},useTransition:function(){var y=Zf(!1),w=y[0];return y=Cm.bind(null,y[1]),Go().memoizedState=y,[w,y]},useMutableSource:function(){},useSyncExternalStore:function(y,w,I){var B=Mr,z=Go();if(On){if(I===void 0)throw Error(o(407));I=I()}else{if(I=w(),zr===null)throw Error(o(349));(Gu&30)!==0||uy(B,w,I)}z.memoizedState=I;var $={value:I,getSnapshot:w};return z.queue=$,Em(Ya.bind(null,B,$,y),[y]),B.flags|=2048,ed(9,cy.bind(null,B,$,I,w),void 0,null),I},useId:function(){var y=Go(),w=zr.identifierPrefix;if(On){var I=at,B=Ve;I=(B&~(1<<32-dn(B)-1)).toString(32)+I,w=":"+w+"R"+I,I=qu++,0<I&&(w+="H"+I.toString(32)),w+=":"}else I=Xf++,w=":"+w+"r"+I.toString(32)+":";return y.memoizedState=w},unstable_isNewReconciler:!1},dy={readContext:Fi,useCallback:Tm,useContext:Fi,useEffect:vh,useImperativeHandle:yh,useInsertionEffect:fr,useLayoutEffect:Am,useMemo:_h,useReducer:Yf,useRef:Hx,useState:function(){return Yf(xa)},useDebugValue:Sm,useDeferredValue:function(y){var w=Yf(xa),I=w[0],B=w[1];return vh(function(){var z=io.transition;io.transition={};try{B(y)}finally{io.transition=z}},[y]),I},useTransition:function(){var y=Yf(xa)[0],w=qo().memoizedState;return[y,w]},useMutableSource:ay,useSyncExternalStore:ly,useId:Wu,unstable_isNewReconciler:!1},py={readContext:Fi,useCallback:Tm,useContext:Fi,useEffect:vh,useImperativeHandle:yh,useInsertionEffect:fr,useLayoutEffect:Am,useMemo:_h,useReducer:Qf,useRef:Hx,useState:function(){return Qf(xa)},useDebugValue:Sm,useDeferredValue:function(y){var w=Qf(xa),I=w[0],B=w[1];return vh(function(){var z=io.transition;io.transition={};try{B(y)}finally{io.transition=z}},[y]),I},useTransition:function(){var y=Qf(xa)[0],w=qo().memoizedState;return[y,w]},useMutableSource:ay,useSyncExternalStore:ly,useId:Wu,unstable_isNewReconciler:!1};function my(y,w){try{var I="",B=w;do I+=ah(B),B=B.return;while(B);var z=I}catch($){z=`
Error generating stack: `+$.message+`
`+$.stack}return{value:y,source:w,stack:z}}function Mm(y,w){try{console.error(w.value)}catch(I){setTimeout(function(){throw I})}}var iT=typeof WeakMap=="function"?WeakMap:Map;function Wx(y,w,I){I=no(-1,I),I.tag=3,I.payload={element:null};var B=w.value;return I.callback=function(){Th||(Th=!0,vr=B),Mm(y,w)},I}function Rm(y,w,I){I=no(-1,I),I.tag=3;var B=y.type.getDerivedStateFromError;if(typeof B=="function"){var z=w.value;I.payload=function(){return B(z)},I.callback=function(){Mm(y,w)}}var $=y.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(I.callback=function(){Mm(y,w),typeof B!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var ge=w.stack;this.componentDidCatch(w.value,{componentStack:ge!==null?ge:""})}),I}function Qa(y,w,I){var B=y.pingCache;if(B===null){B=y.pingCache=new iT;var z=new Set;B.set(w,z)}else z=B.get(w),z===void 0&&(z=new Set,B.set(w,z));z.has(I)||(z.add(I),y=Oy.bind(null,y,w,I),w.then(y,y))}function gy(y){do{var w;if((w=y.tag===13)&&(w=y.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return y;y=y.return}while(y!==null);return null}function $u(y,w,I,B,z){return(y.mode&1)===0?(y===w?y.flags|=65536:(y.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(w=no(-1,1),w.tag=2,Vo(I,w))),I.lanes|=1),y):(y.flags|=65536,y.lanes=z,y)}function fi(y){y.flags|=4}function wh(y,w){if(y!==null&&y.child===w.child)return!0;if((w.flags&16)!==0)return!1;for(y=w.child;y!==null;){if((y.flags&12854)!==0||(y.subtreeFlags&12854)!==0)return!1;y=y.sibling}return!0}var so,Ku,Im,Pm;if($e)so=function(y,w){for(var I=w.child;I!==null;){if(I.tag===5||I.tag===6)X(y,I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===w)break;for(;I.sibling===null;){if(I.return===null||I.return===w)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Ku=function(){},Im=function(y,w,I,B,z){if(y=y.memoizedProps,y!==B){var $=w.stateNode,ge=Ho(Is.current);I=se($,I,y,B,z,ge),(w.updateQueue=I)&&fi(w)}},Pm=function(y,w,I,B){I!==B&&fi(w)};else if(De){so=function(y,w,I,B){for(var z=w.child;z!==null;){if(z.tag===5){var $=z.stateNode;I&&B&&($=An($,z.type,z.memoizedProps,z)),X(y,$)}else if(z.tag===6)$=z.stateNode,I&&B&&($=_i($,z.memoizedProps,z)),X(y,$);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)$=z.child,$!==null&&($.return=z),so(y,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===w)break;for(;z.sibling===null;){if(z.return===null||z.return===w)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};var Yl=function(y,w,I,B){for(var z=w.child;z!==null;){if(z.tag===5){var $=z.stateNode;I&&B&&($=An($,z.type,z.memoizedProps,z)),Zt(y,$)}else if(z.tag===6)$=z.stateNode,I&&B&&($=_i($,z.memoizedProps,z)),Zt(y,$);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)$=z.child,$!==null&&($.return=z),Yl(y,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===w)break;for(;z.sibling===null;){if(z.return===null||z.return===w)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};Ku=function(y,w){var I=w.stateNode;if(!wh(y,w)){y=I.containerInfo;var B=dt(y);Yl(B,w,!1,!1),I.pendingChildren=B,fi(w),Qn(y,B)}},Im=function(y,w,I,B,z){var $=y.stateNode,ge=y.memoizedProps;if((y=wh(y,w))&&ge===B)w.stateNode=$;else{var Ce=w.stateNode,Ke=Ho(Is.current),ct=null;ge!==B&&(ct=se(Ce,I,ge,B,z,Ke)),y&&ct===null?w.stateNode=$:($=_t($,ct,I,ge,B,w,y,Ce),re($,I,B,z,Ke)&&fi(w),w.stateNode=$,y?fi(w):so($,w,!1,!1))}},Pm=function(y,w,I,B){I!==B?(y=Ho(zu.current),I=Ho(Is.current),w.stateNode=te(B,y,I,w),fi(w)):w.stateNode=y.stateNode}}else Ku=function(){},Im=function(){},Pm=function(){};function Za(y,w){if(!On)switch(y.tailMode){case"hidden":w=y.tail;for(var I=null;w!==null;)w.alternate!==null&&(I=w),w=w.sibling;I===null?y.tail=null:I.sibling=null;break;case"collapsed":I=y.tail;for(var B=null;I!==null;)I.alternate!==null&&(B=I),I=I.sibling;B===null?w||y.tail===null?y.tail=null:y.tail.sibling=null:B.sibling=null}}function Vr(y){var w=y.alternate!==null&&y.alternate.child===y.child,I=0,B=0;if(w)for(var z=y.child;z!==null;)I|=z.lanes|z.childLanes,B|=z.subtreeFlags&14680064,B|=z.flags&14680064,z.return=y,z=z.sibling;else for(z=y.child;z!==null;)I|=z.lanes|z.childLanes,B|=z.subtreeFlags,B|=z.flags,z.return=y,z=z.sibling;return y.subtreeFlags|=B,y.childLanes=I,w}function km(y,w,I){var B=w.pendingProps;switch(ei(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(w),null;case 1:return In(w.type)&&fn(),Vr(w),null;case 3:return B=w.stateNode,mh(),ut(Sn),ut(xn),Hu(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(y===null||y.child===null)&&(Kf(w)?fi(w):y===null||y.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,rs!==null&&(gd(rs),rs=null))),Ku(y,w),Vr(w),null;case 5:oy(w),I=Ho(zu.current);var z=w.type;if(y!==null&&w.stateNode!=null)Im(y,w,z,B,I),y.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!B){if(w.stateNode===null)throw Error(o(166));return Vr(w),null}if(y=Ho(Is.current),Kf(w)){if(!Be)throw Error(o(175));y=Iu(w.stateNode,w.type,w.memoizedProps,I,y,w,!zo),w.updateQueue=y,y!==null&&fi(w)}else{var $=V(z,B,I,y,w);so($,w,!1,!1),w.stateNode=$,re($,z,B,I,y)&&fi(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return Vr(w),null;case 6:if(y&&w.stateNode!=null)Pm(y,w,y.memoizedProps,B);else{if(typeof B!="string"&&w.stateNode===null)throw Error(o(166));if(y=Ho(zu.current),I=Ho(Is.current),Kf(w)){if(!Be)throw Error(o(176));if(y=w.stateNode,B=w.memoizedProps,(I=Rs(y,B,w,!zo))&&(z=zn,z!==null))switch($=(z.mode&1)!==0,z.tag){case 3:Me(z.stateNode.containerInfo,y,B,$);break;case 5:je(z.type,z.memoizedProps,z.stateNode,y,B,$)}I&&fi(w)}else w.stateNode=te(B,y,I,w)}return Vr(w),null;case 13:if(ut(Cr),B=w.memoizedState,On&&xr!==null&&(w.mode&1)!==0&&(w.flags&128)===0){for(y=xr;y;)y=xi(y);return hh(),w.flags|=98560,w}if(B!==null&&B.dehydrated!==null){if(B=Kf(w),y===null){if(!B)throw Error(o(318));if(!Be)throw Error(o(344));if(y=w.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));Ha(y,w)}else hh(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;return Vr(w),null}return rs!==null&&(gd(rs),rs=null),(w.flags&128)!==0?(w.lanes=I,w):(B=B!==null,I=!1,y===null?Kf(w):I=y.memoizedState!==null,B&&!I&&(w.child.flags|=8192,(w.mode&1)!==0&&(y===null||(Cr.current&1)!==0?Or===0&&(Or=3):Um())),w.updateQueue!==null&&(w.flags|=4),Vr(w),null);case 4:return mh(),Ku(y,w),y===null&&it(w.stateNode.containerInfo),Vr(w),null;case 10:return ql(w.type._context),Vr(w),null;case 17:return In(w.type)&&fn(),Vr(w),null;case 19:if(ut(Cr),z=w.memoizedState,z===null)return Vr(w),null;if(B=(w.flags&128)!==0,$=z.rendering,$===null)if(B)Za(z,!1);else{if(Or!==0||y!==null&&(y.flags&128)!==0)for(y=w.child;y!==null;){if($=ym(y),$!==null){for(w.flags|=128,Za(z,!1),y=$.updateQueue,y!==null&&(w.updateQueue=y,w.flags|=4),w.subtreeFlags=0,y=I,B=w.child;B!==null;)I=B,z=y,I.flags&=14680066,$=I.alternate,$===null?(I.childLanes=0,I.lanes=z,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=$.childLanes,I.lanes=$.lanes,I.child=$.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=$.memoizedProps,I.memoizedState=$.memoizedState,I.updateQueue=$.updateQueue,I.type=$.type,z=$.dependencies,I.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),B=B.sibling;return Pt(Cr,Cr.current&1|2),w.child}y=y.sibling}z.tail!==null&&jr()>eu&&(w.flags|=128,B=!0,Za(z,!1),w.lanes=4194304)}else{if(!B)if(y=ym($),y!==null){if(w.flags|=128,B=!0,y=y.updateQueue,y!==null&&(w.updateQueue=y,w.flags|=4),Za(z,!0),z.tail===null&&z.tailMode==="hidden"&&!$.alternate&&!On)return Vr(w),null}else 2*jr()-z.renderingStartTime>eu&&I!==1073741824&&(w.flags|=128,B=!0,Za(z,!1),w.lanes=4194304);z.isBackwards?($.sibling=w.child,w.child=$):(y=z.last,y!==null?y.sibling=$:w.child=$,z.last=$)}return z.tail!==null?(w=z.tail,z.rendering=w,z.tail=w.sibling,z.renderingStartTime=jr(),w.sibling=null,y=Cr.current,Pt(Cr,B?y&1|2:y&1),w):(Vr(w),null);case 22:case 23:return vd(),B=w.memoizedState!==null,y!==null&&y.memoizedState!==null!==B&&(w.flags|=8192),B&&(w.mode&1)!==0?(ss&1073741824)!==0&&(Vr(w),$e&&w.subtreeFlags&6&&(w.flags|=8192)):Vr(w),null;case 24:return null;case 25:return null}throw Error(o(156,w.tag))}var vy=a.ReactCurrentOwner,Ti=!1;function kr(y,w,I,B){w.child=y===null?Vx(w,null,I,B):Xa(w,y.child,I,B)}function dr(y,w,I,B,z){I=I.render;var $=w.ref;return Wl(w,z),B=gh(y,w,I,B,$,z),I=Jl(),y!==null&&!Ti?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~z,Ps(y,w,z)):(On&&I&&kn(w),w.flags|=1,kr(y,w,B,z),w.child)}function lr(y,w,I,B,z){if(y===null){var $=I.type;return typeof $=="function"&&!Vm($)&&$.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(w.tag=15,w.type=$,el(y,w,$,B,z)):(y=zm(I.type,null,B,w,w.mode,z),y.ref=w.ref,y.return=w,w.child=y)}if($=y.child,(y.lanes&z)===0){var ge=$.memoizedProps;if(I=I.compare,I=I!==null?I:ts,I(ge,B)&&y.ref===w.ref)return Ps(y,w,z)}return w.flags|=1,y=ul($,B),y.ref=w.ref,y.return=w,w.child=y}function el(y,w,I,B,z){if(y!==null&&ts(y.memoizedProps,B)&&y.ref===w.ref)if(Ti=!1,(y.lanes&z)!==0)(y.flags&131072)!==0&&(Ti=!0);else return w.lanes=y.lanes,Ps(y,w,z);return tl(y,w,I,B,z)}function Ui(y,w,I){var B=w.pendingProps,z=B.children,$=y!==null?y.memoizedState:null;if(B.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null},Pt(rc,ss),ss|=I;else if((I&1073741824)!==0)w.memoizedState={baseLanes:0,cachePool:null},B=$!==null?$.baseLanes:I,Pt(rc,ss),ss|=B;else return y=$!==null?$.baseLanes|I:I,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:y,cachePool:null},w.updateQueue=null,Pt(rc,ss),ss|=y,null;else $!==null?(B=$.baseLanes|I,w.memoizedState=null):B=I,Pt(rc,ss),ss|=B;return kr(y,w,z,I),w.child}function gs(y,w){var I=w.ref;(y===null&&I!==null||y!==null&&y.ref!==I)&&(w.flags|=512,w.flags|=2097152)}function tl(y,w,I,B,z){var $=In(I)?un:xn.current;return $=kt(w,$),Wl(w,z),I=gh(y,w,I,B,$,z),B=Jl(),y!==null&&!Ti?(w.updateQueue=y.updateQueue,w.flags&=-2053,y.lanes&=~z,Ps(y,w,z)):(On&&B&&kn(w),w.flags|=1,kr(y,w,I,z),w.child)}function Ju(y,w,I,B,z){if(In(I)){var $=!0;cr(w)}else $=!1;if(Wl(w,z),w.stateNode===null)y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),ju(w,I,B),ch(w,I,B,z),B=!0;else if(y===null){var ge=w.stateNode,Ce=w.memoizedProps;ge.props=Ce;var Ke=ge.context,ct=I.contextType;typeof ct=="object"&&ct!==null?ct=Fi(ct):(ct=In(I)?un:xn.current,ct=kt(w,ct));var Mt=I.getDerivedStateFromProps,an=typeof Mt=="function"||typeof ge.getSnapshotBeforeUpdate=="function";an||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ce!==B||Ke!==ct)&&ns(w,ge,B,ct),ps=!1;var Gt=w.memoizedState;ge.state=Gt,Fu(w,B,ge,z),Ke=w.memoizedState,Ce!==B||Gt!==Ke||Sn.current||ps?(typeof Mt=="function"&&(lh(w,I,Mt,B),Ke=w.memoizedState),(Ce=ps||uh(w,I,Ce,B,Gt,Ke,ct))?(an||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(w.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=B,w.memoizedState=Ke),ge.props=B,ge.state=Ke,ge.context=ct,B=Ce):(typeof ge.componentDidMount=="function"&&(w.flags|=4194308),B=!1)}else{ge=w.stateNode,Lu(y,w),Ce=w.memoizedProps,ct=w.type===w.elementType?Ce:_r(w.type,Ce),ge.props=ct,an=w.pendingProps,Gt=ge.context,Ke=I.contextType,typeof Ke=="object"&&Ke!==null?Ke=Fi(Ke):(Ke=In(I)?un:xn.current,Ke=kt(w,Ke));var Tn=I.getDerivedStateFromProps;(Mt=typeof Tn=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ce!==an||Gt!==Ke)&&ns(w,ge,B,Ke),ps=!1,Gt=w.memoizedState,ge.state=Gt,Fu(w,B,ge,z);var St=w.memoizedState;Ce!==an||Gt!==St||Sn.current||ps?(typeof Tn=="function"&&(lh(w,I,Tn,B),St=w.memoizedState),(ct=ps||uh(w,I,ct,B,Gt,St,Ke)||!1)?(Mt||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(B,St,Ke),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(B,St,Ke)),typeof ge.componentDidUpdate=="function"&&(w.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Ce===y.memoizedProps&&Gt===y.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ce===y.memoizedProps&&Gt===y.memoizedState||(w.flags|=1024),w.memoizedProps=B,w.memoizedState=St),ge.props=B,ge.state=St,ge.context=Ke,B=ct):(typeof ge.componentDidUpdate!="function"||Ce===y.memoizedProps&&Gt===y.memoizedState||(w.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ce===y.memoizedProps&&Gt===y.memoizedState||(w.flags|=1024),B=!1)}return is(y,w,I,B,$,z)}function is(y,w,I,B,z,$){gs(y,w);var ge=(w.flags&128)!==0;if(!B&&!ge)return z&&Yr(w,I,!1),Ps(y,w,$);B=w.stateNode,vy.current=w;var Ce=ge&&typeof I.getDerivedStateFromError!="function"?null:B.render();return w.flags|=1,y!==null&&ge?(w.child=Xa(w,y.child,null,$),w.child=Xa(w,null,Ce,$)):kr(y,w,Ce,$),w.memoizedState=B.state,z&&Yr(w,I,!0),w.child}function id(y){var w=y.stateNode;w.pendingContext?Xr(y,w.pendingContext,w.pendingContext!==w.context):w.context&&Xr(y,w.context,!1),vm(y,w.containerInfo)}function yy(y,w,I,B,z){return hh(),gm(z),w.flags|=256,kr(y,w,I,B),w.child}var sd={dehydrated:null,treeContext:null,retryLane:0};function Xu(y){return{baseLanes:y,cachePool:null}}function _y(y,w,I){var B=w.pendingProps,z=Cr.current,$=!1,ge=(w.flags&128)!==0,Ce;if((Ce=ge)||(Ce=y!==null&&y.memoizedState===null?!1:(z&2)!==0),Ce?($=!0,w.flags&=-129):(y===null||y.memoizedState!==null)&&(z|=1),Pt(Cr,z&1),y===null)return $l(w),y=w.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?((w.mode&1)===0?w.lanes=1:Qs(y)?w.lanes=8:w.lanes=1073741824,null):(z=B.children,y=B.fallback,$?(B=w.mode,$=w.child,z={mode:"hidden",children:z},(B&1)===0&&$!==null?($.childLanes=0,$.pendingProps=z):$=xd(z,B,0,null),y=lc(y,B,I,null),$.return=w,y.return=w,$.sibling=y,w.child=$,w.child.memoizedState=Xu(I),w.memoizedState=sd,y):Wo(w,z));if(z=y.memoizedState,z!==null){if(Ce=z.dehydrated,Ce!==null){if(ge)return w.flags&256?(w.flags&=-257,ad(y,w,I,Error(o(422)))):w.memoizedState!==null?(w.child=y.child,w.flags|=128,null):($=B.fallback,z=w.mode,B=xd({mode:"visible",children:B.children},z,0,null),$=lc($,z,I,null),$.flags|=2,B.return=w,$.return=w,B.sibling=$,w.child=B,(w.mode&1)!==0&&Xa(w,y.child,null,I),w.child.memoizedState=Xu(I),w.memoizedState=sd,$);if((w.mode&1)===0)w=ad(y,w,I,null);else if(Qs(Ce))w=ad(y,w,I,Error(o(419)));else if(B=(I&y.childLanes)!==0,Ti||B){if(B=zr,B!==null){switch(I&-I){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}B=($&(B.suspendedLanes|I))!==0?0:$,B!==0&&B!==z.retryLane&&(z.retryLane=B,os(y,B,-1))}Um(),w=ad(y,w,I,Error(o(421)))}else Qi(Ce)?(w.flags|=128,w.child=y.child,w=Yx.bind(null,y),za(Ce,w),w=null):(I=z.treeContext,Be&&(xr=Bo(Ce),zn=w,On=!0,rs=null,zo=!1,I!==null&&(K[ue++]=Ve,K[ue++]=at,K[ue++]=ke,Ve=I.id,at=I.overflow,ke=w)),w=Wo(w,w.pendingProps.children),w.flags|=4096);return w}return $?(B=Om(y,w,B.children,B.fallback,I),$=w.child,z=y.child.memoizedState,$.memoizedState=z===null?Xu(I):{baseLanes:z.baseLanes|I,cachePool:null},$.childLanes=y.childLanes&~I,w.memoizedState=sd,B):(I=od(y,w,B.children,I),w.memoizedState=null,I)}return $?(B=Om(y,w,B.children,B.fallback,I),$=w.child,z=y.child.memoizedState,$.memoizedState=z===null?Xu(I):{baseLanes:z.baseLanes|I,cachePool:null},$.childLanes=y.childLanes&~I,w.memoizedState=sd,B):(I=od(y,w,B.children,I),w.memoizedState=null,I)}function Wo(y,w){return w=xd({mode:"visible",children:w},y.mode,0,null),w.return=y,y.child=w}function od(y,w,I,B){var z=y.child;return y=z.sibling,I=ul(z,{mode:"visible",children:I}),(w.mode&1)===0&&(I.lanes=B),I.return=w,I.sibling=null,y!==null&&(B=w.deletions,B===null?(w.deletions=[y],w.flags|=16):B.push(y)),w.child=I}function Om(y,w,I,B,z){var $=w.mode;y=y.child;var ge=y.sibling,Ce={mode:"hidden",children:I};return($&1)===0&&w.child!==y?(I=w.child,I.childLanes=0,I.pendingProps=Ce,w.deletions=null):(I=ul(y,Ce),I.subtreeFlags=y.subtreeFlags&14680064),ge!==null?B=ul(ge,B):(B=lc(B,$,z,null),B.flags|=2),B.return=w,I.return=w,I.sibling=B,w.child=I,B}function ad(y,w,I,B){return B!==null&&gm(B),Xa(w,y.child,null,I),y=Wo(w,w.pendingProps.children),y.flags|=2,w.memoizedState=null,y}function $x(y,w,I){y.lanes|=w;var B=y.alternate;B!==null&&(B.lanes|=w),wo(y.return,w,I)}function wa(y,w,I,B,z){var $=y.memoizedState;$===null?y.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:B,tail:I,tailMode:z}:($.isBackwards=w,$.rendering=null,$.renderingStartTime=0,$.last=B,$.tail=I,$.tailMode=z)}function Yu(y,w,I){var B=w.pendingProps,z=B.revealOrder,$=B.tail;if(kr(y,w,B.children,I),B=Cr.current,(B&2)!==0)B=B&1|2,w.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=w.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&$x(y,I,w);else if(y.tag===19)$x(y,I,w);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===w)break e;for(;y.sibling===null;){if(y.return===null||y.return===w)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}B&=1}if(Pt(Cr,B),(w.mode&1)===0)w.memoizedState=null;else switch(z){case"forwards":for(I=w.child,z=null;I!==null;)y=I.alternate,y!==null&&ym(y)===null&&(z=I),I=I.sibling;I=z,I===null?(z=w.child,w.child=null):(z=I.sibling,I.sibling=null),wa(w,!1,z,I,$);break;case"backwards":for(I=null,z=w.child,w.child=null;z!==null;){if(y=z.alternate,y!==null&&ym(y)===null){w.child=z;break}y=z.sibling,z.sibling=I,I=z,z=y}wa(w,!0,I,null,$);break;case"together":wa(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Ps(y,w,I){if(y!==null&&(w.dependencies=y.dependencies),ba|=w.lanes,(I&w.childLanes)===0)return null;if(y!==null&&w.child!==y.child)throw Error(o(153));if(w.child!==null){for(y=w.child,I=ul(y,y.pendingProps),w.child=I,I.return=w;y.sibling!==null;)y=y.sibling,I=I.sibling=ul(y,y.pendingProps),I.return=w;I.sibling=null}return w.child}function Dm(y,w,I){switch(w.tag){case 3:id(w),hh();break;case 5:zx(w);break;case 1:In(w.type)&&cr(w);break;case 4:vm(w,w.stateNode.containerInfo);break;case 10:xo(w,w.type._context,w.memoizedProps.value);break;case 13:var B=w.memoizedState;if(B!==null)return B.dehydrated!==null?(Pt(Cr,Cr.current&1),w.flags|=128,null):(I&w.child.childLanes)!==0?_y(y,w,I):(Pt(Cr,Cr.current&1),y=Ps(y,w,I),y!==null?y.sibling:null);Pt(Cr,Cr.current&1);break;case 19:if(B=(I&w.childLanes)!==0,(y.flags&128)!==0){if(B)return Yu(y,w,I);w.flags|=128}var z=w.memoizedState;if(z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Pt(Cr,Cr.current),B)break;return null;case 22:case 23:return w.lanes=0,Ui(y,w,I)}return Ps(y,w,I)}function Nm(y,w){switch(ei(w),w.tag){case 1:return In(w.type)&&fn(),y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 3:return mh(),ut(Sn),ut(xn),Hu(),y=w.flags,(y&65536)!==0&&(y&128)===0?(w.flags=y&-65537|128,w):null;case 5:return oy(w),null;case 13:if(ut(Cr),y=w.memoizedState,y!==null&&y.dehydrated!==null){if(w.alternate===null)throw Error(o(340));hh()}return y=w.flags,y&65536?(w.flags=y&-65537|128,w):null;case 19:return ut(Cr),null;case 4:return mh(),null;case 10:return ql(w.type._context),null;case 22:case 23:return vd(),null;case 24:return null;default:return null}}var vs=!1,Ci=!1,Qu=typeof WeakSet=="function"?WeakSet:Set,pt=null;function bo(y,w){var I=y.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(B){_s(y,w,B)}else I.current=null}function nl(y,w,I){try{I()}catch(B){_s(y,w,B)}}var xy=!1;function wy(y,w){for(ee(y.containerInfo),pt=w;pt!==null;)if(y=pt,w=y.child,(y.subtreeFlags&1028)!==0&&w!==null)w.return=y,pt=w;else for(;pt!==null;){y=pt;try{var I=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var B=I.memoizedProps,z=I.memoizedState,$=y.stateNode,ge=$.getSnapshotBeforeUpdate(y.elementType===y.type?B:_r(y.type,B),z);$.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:$e&&Xe(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ce){_s(y,y.return,Ce)}if(w=y.sibling,w!==null){w.return=y.return,pt=w;break}pt=y.return}return I=xy,xy=!1,I}function rl(y,w,I){var B=w.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var z=B=B.next;do{if((z.tag&y)===y){var $=z.destroy;z.destroy=void 0,$!==void 0&&nl(w,I,$)}z=z.next}while(z!==B)}}function ji(y,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var I=w=w.next;do{if((I.tag&y)===y){var B=I.create;I.destroy=B()}I=I.next}while(I!==w)}}function ys(y){var w=y.ref;if(w!==null){var I=y.stateNode;switch(y.tag){case 5:y=oe(I);break;default:y=I}typeof w=="function"?w(y):w.current=y}}function gr(y,w,I){if(to&&typeof to.onCommitFiberUnmount=="function")try{to.onCommitFiberUnmount(va,w)}catch{}switch(w.tag){case 0:case 11:case 14:case 15:if(y=w.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var B=y=y.next;do{var z=B,$=z.destroy;z=z.tag,$!==void 0&&((z&2)!==0||(z&4)!==0)&&nl(w,I,$),B=B.next}while(B!==y)}break;case 1:if(bo(w,I),y=w.stateNode,typeof y.componentWillUnmount=="function")try{y.props=w.memoizedProps,y.state=w.memoizedState,y.componentWillUnmount()}catch(ge){_s(w,I,ge)}break;case 5:bo(w,I);break;case 4:$e?Ay(y,w,I):De&&De&&(w=w.stateNode.containerInfo,I=dt(w),Tr(w,I))}}function Eo(y,w,I){for(var B=w;;)if(gr(y,B,I),B.child===null||$e&&B.tag===4){if(B===w)break;for(;B.sibling===null;){if(B.return===null||B.return===w)return;B=B.return}B.sibling.return=B.return,B=B.sibling}else B.child.return=B,B=B.child}function by(y){var w=y.alternate;w!==null&&(y.alternate=null,by(w)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(w=y.stateNode,w!==null&&rt(w)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Ey(y){return y.tag===5||y.tag===3||y.tag===4}function Lm(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Ey(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function Bm(y){if($e){e:{for(var w=y.return;w!==null;){if(Ey(w))break e;w=w.return}throw Error(o(160))}var I=w;switch(I.tag){case 5:w=I.stateNode,I.flags&32&&(qt(w),I.flags&=-33),I=Lm(y),bh(y,I,w);break;case 3:case 4:w=I.stateNode.containerInfo,I=Lm(y),Fm(y,I,w);break;default:throw Error(o(161))}}}function Fm(y,w,I){var B=y.tag;if(B===5||B===6)y=y.stateNode,w?jt(I,y,w):lt(I,y);else if(B!==4&&(y=y.child,y!==null))for(Fm(y,w,I),y=y.sibling;y!==null;)Fm(y,w,I),y=y.sibling}function bh(y,w,I){var B=y.tag;if(B===5||B===6)y=y.stateNode,w?Ot(I,y,w):qe(I,y);else if(B!==4&&(y=y.child,y!==null))for(bh(y,w,I),y=y.sibling;y!==null;)bh(y,w,I),y=y.sibling}function Ay(y,w,I){for(var B=w,z=!1,$,ge;;){if(!z){z=B.return;e:for(;;){if(z===null)throw Error(o(160));switch($=z.stateNode,z.tag){case 5:ge=!1;break e;case 3:$=$.containerInfo,ge=!0;break e;case 4:$=$.containerInfo,ge=!0;break e}z=z.return}z=!0}if(B.tag===5||B.tag===6)Eo(y,B,I),ge?on($,B.stateNode):Et($,B.stateNode);else if(B.tag===18)ge?Hl($,B.stateNode):zl($,B.stateNode);else if(B.tag===4){if(B.child!==null){$=B.stateNode.containerInfo,ge=!0,B.child.return=B,B=B.child;continue}}else if(gr(y,B,I),B.child!==null){B.child.return=B,B=B.child;continue}if(B===w)break;for(;B.sibling===null;){if(B.return===null||B.return===w)return;B=B.return,B.tag===4&&(z=!1)}B.sibling.return=B.return,B=B.sibling}}function Ql(y,w){if($e){switch(w.tag){case 0:case 11:case 14:case 15:rl(3,w,w.return),ji(3,w),rl(5,w,w.return);return;case 1:return;case 5:var I=w.stateNode;if(I!=null){var B=w.memoizedProps;y=y!==null?y.memoizedProps:B;var z=w.type,$=w.updateQueue;w.updateQueue=null,$!==null&&yt(I,$,z,y,B,w)}return;case 6:if(w.stateNode===null)throw Error(o(162));I=w.memoizedProps,vt(w.stateNode,y!==null?y.memoizedProps:I,I);return;case 3:Be&&y!==null&&y.memoizedState.isDehydrated&&Pu(w.stateNode.containerInfo);return;case 12:return;case 13:Eh(w);return;case 19:Eh(w);return;case 17:return}throw Error(o(163))}switch(w.tag){case 0:case 11:case 14:case 15:rl(3,w,w.return),ji(3,w),rl(5,w,w.return);return;case 12:return;case 13:Eh(w);return;case 19:Eh(w);return;case 3:Be&&y!==null&&y.memoizedState.isDehydrated&&Pu(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(De){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,Tr(w.containerInfo,w.pendingChildren);break e}throw Error(o(163))}}function Eh(y){var w=y.updateQueue;if(w!==null){y.updateQueue=null;var I=y.stateNode;I===null&&(I=y.stateNode=new Qu),w.forEach(function(B){var z=Qx.bind(null,y,B);I.has(B)||(I.add(B),B.then(z,z))})}}function sT(y,w){for(pt=w;pt!==null;){w=pt;var I=w.deletions;if(I!==null)for(var B=0;B<I.length;B++){var z=I[B];try{var $=y;$e?Ay($,z,w):Eo($,z,w);var ge=z.alternate;ge!==null&&(ge.return=null),z.return=null}catch(Ft){_s(z,w,Ft)}}if(I=w.child,(w.subtreeFlags&12854)!==0&&I!==null)I.return=w,pt=I;else for(;pt!==null;){w=pt;try{var Ce=w.flags;if(Ce&32&&$e&&qt(w.stateNode),Ce&512){var Ke=w.alternate;if(Ke!==null){var ct=Ke.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Ce&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Mt=w.alternate;(Mt===null||Mt.memoizedState===null)&&(pd=jr())}break;case 22:var an=w.memoizedState!==null,Gt=w.alternate,Tn=Gt!==null&&Gt.memoizedState!==null;if(I=w,$e){e:if(B=I,z=an,$=null,$e)for(var St=B;;){if(St.tag===5){if($===null){$=St;var Hi=St.stateNode;z?Rn(Hi):mt(St.stateNode,St.memoizedProps)}}else if(St.tag===6){if($===null){var co=St.stateNode;z?Ae(co):Ge(co,St.memoizedProps)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===B)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===B)break;for(;St.sibling===null;){if(St.return===null||St.return===B)break e;$===St&&($=null),St=St.return}$===St&&($=null),St.sibling.return=St.return,St=St.sibling}}if(an&&!Tn&&(I.mode&1)!==0){pt=I;for(var Ue=I.child;Ue!==null;){for(I=pt=Ue;pt!==null;){B=pt;var Pe=B.child;switch(B.tag){case 0:case 11:case 14:case 15:rl(4,B,B.return);break;case 1:bo(B,B.return);var We=B.stateNode;if(typeof We.componentWillUnmount=="function"){var xt=B.return;try{We.props=B.memoizedProps,We.state=B.memoizedState,We.componentWillUnmount()}catch(Ft){_s(B,xt,Ft)}}break;case 5:bo(B,B.return);break;case 22:if(B.memoizedState!==null){Ty(I);continue}}Pe!==null?(Pe.return=B,pt=Pe):Ty(I)}Ue=Ue.sibling}}}switch(Ce&4102){case 2:Bm(w),w.flags&=-3;break;case 6:Bm(w),w.flags&=-3,Ql(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,Ql(w.alternate,w);break;case 4:Ql(w.alternate,w)}}catch(Ft){_s(w,w.return,Ft)}if(I=w.sibling,I!==null){I.return=w.return,pt=I;break}pt=w.return}}}function ld(y,w,I){pt=y,ud(y)}function ud(y,w,I){for(var B=(y.mode&1)!==0;pt!==null;){var z=pt,$=z.child;if(z.tag===22&&B){var ge=z.memoizedState!==null||vs;if(!ge){var Ce=z.alternate,Ke=Ce!==null&&Ce.memoizedState!==null||Ci;Ce=vs;var ct=Ci;if(vs=ge,(Ci=Ke)&&!ct)for(pt=z;pt!==null;)ge=pt,Ke=ge.child,ge.tag===22&&ge.memoizedState!==null?Zu(z):Ke!==null?(Ke.return=ge,pt=Ke):Zu(z);for(;$!==null;)pt=$,ud($),$=$.sibling;pt=z,vs=Ce,Ci=ct}Sy(y)}else(z.subtreeFlags&8772)!==0&&$!==null?($.return=z,pt=$):Sy(y)}}function Sy(y){for(;pt!==null;){var w=pt;if((w.flags&8772)!==0){var I=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:Ci||ji(5,w);break;case 1:var B=w.stateNode;if(w.flags&4&&!Ci)if(I===null)B.componentDidMount();else{var z=w.elementType===w.type?I.memoizedProps:_r(w.type,I.memoizedProps);B.componentDidUpdate(z,I.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var $=w.updateQueue;$!==null&&ya(w,$,B);break;case 3:var ge=w.updateQueue;if(ge!==null){if(I=null,w.child!==null)switch(w.child.tag){case 5:I=oe(w.child.stateNode);break;case 1:I=w.child.stateNode}ya(w,ge,I)}break;case 5:var Ce=w.stateNode;I===null&&w.flags&4&&Ye(Ce,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Be&&w.memoizedState===null){var Ke=w.alternate;if(Ke!==null){var ct=Ke.memoizedState;if(ct!==null){var Mt=ct.dehydrated;Mt!==null&&ku(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ci||w.flags&512&&ys(w)}catch(an){_s(w,w.return,an)}}if(w===y){pt=null;break}if(I=w.sibling,I!==null){I.return=w.return,pt=I;break}pt=w.return}}function Ty(y){for(;pt!==null;){var w=pt;if(w===y){pt=null;break}var I=w.sibling;if(I!==null){I.return=w.return,pt=I;break}pt=w.return}}function Zu(y){for(;pt!==null;){var w=pt;try{switch(w.tag){case 0:case 11:case 15:var I=w.return;try{ji(4,w)}catch(Ke){_s(w,I,Ke)}break;case 1:var B=w.stateNode;if(typeof B.componentDidMount=="function"){var z=w.return;try{B.componentDidMount()}catch(Ke){_s(w,z,Ke)}}var $=w.return;try{ys(w)}catch(Ke){_s(w,$,Ke)}break;case 5:var ge=w.return;try{ys(w)}catch(Ke){_s(w,ge,Ke)}}}catch(Ke){_s(w,w.return,Ke)}if(w===y){pt=null;break}var Ce=w.sibling;if(Ce!==null){Ce.return=w.return,pt=Ce;break}pt=w.return}}var cd=0,ec=1,tc=2,il=3,Ah=4;if(typeof Symbol=="function"&&Symbol.for){var nc=Symbol.for;cd=nc("selector.component"),ec=nc("selector.has_pseudo_class"),tc=nc("selector.role"),il=nc("selector.test_id"),Ah=nc("selector.text")}function hd(y){var w=fe(y);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(o(364));return w}if(y=ie(y),y===null)throw Error(o(362));return y.stateNode.current}function fd(y,w){switch(w.$$typeof){case cd:if(y.type===w.value)return!0;break;case ec:e:{w=w.value,y=[y,0];for(var I=0;I<y.length;){var B=y[I++],z=y[I++],$=w[z];if(B.tag!==5||!de(B)){for(;$!=null&&fd(B,$);)z++,$=w[z];if(z===w.length){w=!0;break e}else for(B=B.child;B!==null;)y.push(B,z),B=B.sibling}}w=!1}return w;case tc:if(y.tag===5&&ye(y.stateNode,w.value))return!0;break;case Ah:if((y.tag===5||y.tag===6)&&(y=me(y),y!==null&&0<=y.indexOf(w.value)))return!0;break;case il:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Zl(y){switch(y.$$typeof){case cd:return"<"+(M(y.value)||"Unknown")+">";case ec:return":has("+(Zl(y)||"")+")";case tc:return'[role="'+y.value+'"]';case Ah:return'"'+y.value+'"';case il:return'[data-testname="'+y.value+'"]';default:throw Error(o(365))}}function oo(y,w){var I=[];y=[y,0];for(var B=0;B<y.length;){var z=y[B++],$=y[B++],ge=w[$];if(z.tag!==5||!de(z)){for(;ge!=null&&fd(z,ge);)$++,ge=w[$];if($===w.length)I.push(z);else for(z=z.child;z!==null;)y.push(z,$),z=z.sibling}}return I}function sl(y,w){if(!Ne)throw Error(o(363));y=hd(y),y=oo(y,w),w=[],y=Array.from(y);for(var I=0;I<y.length;){var B=y[I++];if(B.tag===5)de(B)||w.push(B.stateNode);else for(B=B.child;B!==null;)y.push(B),B=B.sibling}return w}var Cy=Math.ceil,dd=a.ReactCurrentDispatcher,$o=a.ReactCurrentOwner,nr=a.ReactCurrentBatchConfig,wn=0,zr=null,rr=null,wr=0,ss=0,rc=Bt(0),Or=0,Sh=null,ba=0,ao=0,ic=0,ol=null,ti=null,pd=0,eu=1/0;function sc(){eu=jr()+500}var Th=!1,vr=null,Ko=null,Ch=!1,Ea=null,oc=0,ac=0,al=null,pr=-1,Dr=0;function Hn(){return(wn&6)!==0?jr():pr!==-1?pr:pr=jr()}function Jo(y){return(y.mode&1)===0?1:(wn&2)!==0&&wr!==0?wr&-wr:Wf.transition!==null?(Dr===0&&(y=hr,hr<<=1,(hr&4194240)===0&&(hr=64),Dr=y),Dr):(y=mn,y!==0?y:Je())}function os(y,w,I){if(50<ac)throw ac=0,al=null,Error(o(185));var B=tu(y,w);return B===null?null:(Ga(B,w,I),((wn&2)===0||B!==zr)&&(B===zr&&((wn&2)===0&&(ao|=w),Or===4&&zi(B,wr)),ks(B,I),w===1&&wn===0&&(y.mode&1)===0&&(sc(),ar&&fs())),B)}function tu(y,w){y.lanes|=w;var I=y.alternate;for(I!==null&&(I.lanes|=w),I=y,y=y.return;y!==null;)y.childLanes|=w,I=y.alternate,I!==null&&(I.childLanes|=w),I=y,y=y.return;return I.tag===3?I.stateNode:null}function ks(y,w){var I=y.callbackNode;pm(y,w);var B=Ou(y,y===zr?wr:0);if(B===0)I!==null&&eo(I),y.callbackNode=null,y.callbackPriority=0;else if(w=B&-B,y.callbackPriority!==w){if(I!=null&&eo(I),w===1)y.tag===0?Du(lo.bind(null,y)):oh(lo.bind(null,y)),we?Ie(function(){wn===0&&fs()}):ma(Zi,fs),I=null;else{switch(_o(B)){case 1:I=Zi;break;case 4:I=ry;break;case 16:I=sh;break;case 536870912:I=qa;break;default:I=sh}I=jm(I,Vi.bind(null,y))}y.callbackPriority=w,y.callbackNode=I}}function Vi(y,w){if(pr=-1,Dr=0,(wn&6)!==0)throw Error(o(327));var I=y.callbackNode;if(Aa()&&y.callbackNode!==I)return null;var B=Ou(y,y===zr?wr:0);if(B===0)return null;if((B&30)!==0||(B&y.expiredLanes)!==0||w)w=yd(y,B);else{w=B;var z=wn;wn|=2;var $=Iy();(zr!==y||wr!==w)&&(sc(),ll(y,w));do try{Jx();break}catch(Ce){Ry(y,Ce)}while(!0);hi(),dd.current=$,wn=z,rr!==null?w=0:(zr=null,wr=0,w=Or)}if(w!==0){if(w===2&&(z=rh(y),z!==0&&(B=z,w=md(y,z))),w===1)throw I=Sh,ll(y,0),zi(y,B),ks(y,jr()),I;if(w===6)zi(y,B);else{if(z=y.current.alternate,(B&30)===0&&!My(z)&&(w=yd(y,B),w===2&&($=rh(y),$!==0&&(B=$,w=md(y,$))),w===1))throw I=Sh,ll(y,0),zi(y,B),ks(y,jr()),I;switch(y.finishedWork=z,y.finishedLanes=B,w){case 0:case 1:throw Error(o(345));case 2:Xo(y,ti);break;case 3:if(zi(y,B),(B&130023424)===B&&(w=pd+500-jr(),10<w)){if(Ou(y,0)!==0)break;if(z=y.suspendedLanes,(z&B)!==B){Hn(),y.pingedLanes|=y.suspendedLanes&z;break}y.timeoutHandle=ce(Xo.bind(null,y,ti),w);break}Xo(y,ti);break;case 4:if(zi(y,B),(B&4194240)===B)break;for(w=y.eventTimes,z=-1;0<B;){var ge=31-dn(B);$=1<<ge,ge=w[ge],ge>z&&(z=ge),B&=~$}if(B=z,B=jr()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*Cy(B/1960))-B,10<B){y.timeoutHandle=ce(Xo.bind(null,y,ti),B);break}Xo(y,ti);break;case 5:Xo(y,ti);break;default:throw Error(o(329))}}}return ks(y,jr()),y.callbackNode===I?Vi.bind(null,y):null}function md(y,w){var I=ol;return y.current.memoizedState.isDehydrated&&(ll(y,w).flags|=256),y=yd(y,w),y!==2&&(w=ti,ti=I,w!==null&&gd(w)),y}function gd(y){ti===null?ti=y:ti.push.apply(ti,y)}function My(y){for(var w=y;;){if(w.flags&16384){var I=w.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var B=0;B<I.length;B++){var z=I[B],$=z.getSnapshot;z=z.value;try{if(!wi($(),z))return!1}catch{return!1}}}if(I=w.child,w.subtreeFlags&16384&&I!==null)I.return=w,w=I;else{if(w===y)break;for(;w.sibling===null;){if(w.return===null||w.return===y)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function zi(y,w){for(w&=~ic,w&=~ao,y.suspendedLanes|=w,y.pingedLanes&=~w,y=y.expirationTimes;0<w;){var I=31-dn(w),B=1<<I;y[I]=-1,w&=~B}}function lo(y){if((wn&6)!==0)throw Error(o(327));Aa();var w=Ou(y,0);if((w&1)===0)return ks(y,jr()),null;var I=yd(y,w);if(y.tag!==0&&I===2){var B=rh(y);B!==0&&(w=B,I=md(y,B))}if(I===1)throw I=Sh,ll(y,0),zi(y,w),ks(y,jr()),I;if(I===6)throw Error(o(345));return y.finishedWork=y.current.alternate,y.finishedLanes=w,Xo(y,ti),ks(y,jr()),null}function Mh(y){Ea!==null&&Ea.tag===0&&(wn&6)===0&&Aa();var w=wn;wn|=1;var I=nr.transition,B=mn;try{if(nr.transition=null,mn=1,y)return y()}finally{mn=B,nr.transition=I,wn=w,(wn&6)===0&&fs()}}function vd(){ss=rc.current,ut(rc)}function ll(y,w){y.finishedWork=null,y.finishedLanes=0;var I=y.timeoutHandle;if(I!==xe&&(y.timeoutHandle=xe,ve(I)),rr!==null)for(I=rr.return;I!==null;){var B=I;switch(ei(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&fn();break;case 3:mh(),ut(Sn),ut(xn),Hu();break;case 5:oy(B);break;case 4:mh();break;case 13:ut(Cr);break;case 19:ut(Cr);break;case 10:ql(B.type._context);break;case 22:case 23:vd()}I=I.return}if(zr=y,rr=y=ul(y.current,null),wr=ss=w,Or=0,Sh=null,ic=ao=ba=0,ti=ol=null,bi!==null){for(w=0;w<bi.length;w++)if(I=bi[w],B=I.interleaved,B!==null){I.interleaved=null;var z=B.next,$=I.pending;if($!==null){var ge=$.next;$.next=z,B.next=ge}I.pending=B}bi=null}return y}function Ry(y,w){do{var I=rr;try{if(hi(),Jf.current=xh,_m){for(var B=Mr.memoizedState;B!==null;){var z=B.queue;z!==null&&(z.pending=null),B=B.next}_m=!1}if(Gu=0,Ai=Ei=Mr=null,_a=!1,qu=0,$o.current=null,I===null||I.return===null){Or=1,Sh=w,rr=null;break}e:{var $=y,ge=I.return,Ce=I,Ke=w;if(w=wr,Ce.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ct=Ke,Mt=Ce,an=Mt.tag;if((Mt.mode&1)===0&&(an===0||an===11||an===15)){var Gt=Mt.alternate;Gt?(Mt.updateQueue=Gt.updateQueue,Mt.memoizedState=Gt.memoizedState,Mt.lanes=Gt.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var Tn=gy(ge);if(Tn!==null){Tn.flags&=-257,$u(Tn,ge,Ce,$,w),Tn.mode&1&&Qa($,ct,w),w=Tn,Ke=ct;var St=w.updateQueue;if(St===null){var Hi=new Set;Hi.add(Ke),w.updateQueue=Hi}else St.add(Ke);break e}else{if((w&1)===0){Qa($,ct,w),Um();break e}Ke=Error(o(426))}}else if(On&&Ce.mode&1){var co=gy(ge);if(co!==null){(co.flags&65536)===0&&(co.flags|=256),$u(co,ge,Ce,$,w),gm(Ke);break e}}$=Ke,Or!==4&&(Or=2),ol===null?ol=[$]:ol.push($),Ke=my(Ke,Ce),Ce=ge;do{switch(Ce.tag){case 3:Ce.flags|=65536,w&=-w,Ce.lanes|=w;var Ue=Wx(Ce,Ke,w);Bu(Ce,Ue);break e;case 1:$=Ke;var Pe=Ce.type,We=Ce.stateNode;if((Ce.flags&128)===0&&(typeof Pe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Ko===null||!Ko.has(We)))){Ce.flags|=65536,w&=-w,Ce.lanes|=w;var xt=Rm(Ce,$,w);Bu(Ce,xt);break e}}Ce=Ce.return}while(Ce!==null)}ky(I)}catch(Ft){w=Ft,rr===I&&I!==null&&(rr=I=I.return);continue}break}while(!0)}function Iy(){var y=dd.current;return dd.current=xh,y===null?xh:y}function Um(){(Or===0||Or===3||Or===2)&&(Or=4),zr===null||(ba&268435455)===0&&(ao&268435455)===0||zi(zr,wr)}function yd(y,w){var I=wn;wn|=2;var B=Iy();zr===y&&wr===w||ll(y,w);do try{Kx();break}catch(z){Ry(y,z)}while(!0);if(hi(),wn=I,dd.current=B,rr!==null)throw Error(o(261));return zr=null,wr=0,Or}function Kx(){for(;rr!==null;)Py(rr)}function Jx(){for(;rr!==null&&!ga();)Py(rr)}function Py(y){var w=Ny(y.alternate,y,ss);y.memoizedProps=y.pendingProps,w===null?ky(y):rr=w,$o.current=null}function ky(y){var w=y;do{var I=w.alternate;if(y=w.return,(w.flags&32768)===0){if(I=km(I,w,ss),I!==null){rr=I;return}}else{if(I=Nm(I,w),I!==null){I.flags&=32767,rr=I;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Or=6,rr=null;return}}if(w=w.sibling,w!==null){rr=w;return}rr=w=y}while(w!==null);Or===0&&(Or=5)}function Xo(y,w){var I=mn,B=nr.transition;try{nr.transition=null,mn=1,Xx(y,w,I)}finally{nr.transition=B,mn=I}return null}function Xx(y,w,I){do Aa();while(Ea!==null);if((wn&6)!==0)throw Error(o(327));var B=y.finishedWork,z=y.finishedLanes;if(B===null)return null;if(y.finishedWork=null,y.finishedLanes=0,B===y.current)throw Error(o(177));y.callbackNode=null,y.callbackPriority=0;var $=B.lanes|B.childLanes;if(pa(y,$),y===zr&&(rr=zr=null,wr=0),(B.subtreeFlags&2064)===0&&(B.flags&2064)===0||Ch||(Ch=!0,jm(sh,function(){return Aa(),null})),$=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||$){$=nr.transition,nr.transition=null;var ge=mn;mn=1;var Ce=wn;wn|=4,$o.current=null,wy(y,B),sT(y,B),Y(y.containerInfo),y.current=B,ld(B),ny(),wn=Ce,mn=ge,nr.transition=$}else y.current=B;if(Ch&&(Ch=!1,Ea=y,oc=z),$=y.pendingLanes,$===0&&(Ko=null),Uo(B.stateNode),ks(y,jr()),w!==null)for(I=y.onRecoverableError,B=0;B<w.length;B++)I(w[B]);if(Th)throw Th=!1,y=vr,vr=null,y;return(oc&1)!==0&&y.tag!==0&&Aa(),$=y.pendingLanes,($&1)!==0?y===al?ac++:(ac=0,al=y):ac=0,fs(),null}function Aa(){if(Ea!==null){var y=_o(oc),w=nr.transition,I=mn;try{if(nr.transition=null,mn=16>y?16:y,Ea===null)var B=!1;else{if(y=Ea,Ea=null,oc=0,(wn&6)!==0)throw Error(o(331));var z=wn;for(wn|=4,pt=y.current;pt!==null;){var $=pt,ge=$.child;if((pt.flags&16)!==0){var Ce=$.deletions;if(Ce!==null){for(var Ke=0;Ke<Ce.length;Ke++){var ct=Ce[Ke];for(pt=ct;pt!==null;){var Mt=pt;switch(Mt.tag){case 0:case 11:case 15:rl(8,Mt,$)}var an=Mt.child;if(an!==null)an.return=Mt,pt=an;else for(;pt!==null;){Mt=pt;var Gt=Mt.sibling,Tn=Mt.return;if(by(Mt),Mt===ct){pt=null;break}if(Gt!==null){Gt.return=Tn,pt=Gt;break}pt=Tn}}}var St=$.alternate;if(St!==null){var Hi=St.child;if(Hi!==null){St.child=null;do{var co=Hi.sibling;Hi.sibling=null,Hi=co}while(Hi!==null)}}pt=$}}if(($.subtreeFlags&2064)!==0&&ge!==null)ge.return=$,pt=ge;else e:for(;pt!==null;){if($=pt,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:rl(9,$,$.return)}var Ue=$.sibling;if(Ue!==null){Ue.return=$.return,pt=Ue;break e}pt=$.return}}var Pe=y.current;for(pt=Pe;pt!==null;){ge=pt;var We=ge.child;if((ge.subtreeFlags&2064)!==0&&We!==null)We.return=ge,pt=We;else e:for(ge=Pe;pt!==null;){if(Ce=pt,(Ce.flags&2048)!==0)try{switch(Ce.tag){case 0:case 11:case 15:ji(9,Ce)}}catch(Ft){_s(Ce,Ce.return,Ft)}if(Ce===ge){pt=null;break e}var xt=Ce.sibling;if(xt!==null){xt.return=Ce.return,pt=xt;break e}pt=Ce.return}}if(wn=z,fs(),to&&typeof to.onPostCommitFiberRoot=="function")try{to.onPostCommitFiberRoot(va,y)}catch{}B=!0}return B}finally{mn=I,nr.transition=w}}return!1}function _d(y,w,I){w=my(I,w),w=Wx(y,w,1),Vo(y,w),w=Hn(),y=tu(y,1),y!==null&&(Ga(y,1,w),ks(y,w))}function _s(y,w,I){if(y.tag===3)_d(y,y,I);else for(;w!==null;){if(w.tag===3){_d(w,y,I);break}else if(w.tag===1){var B=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Ko===null||!Ko.has(B))){y=my(I,y),y=Rm(w,y,1),Vo(w,y),y=Hn(),w=tu(w,1),w!==null&&(Ga(w,1,y),ks(w,y));break}}w=w.return}}function Oy(y,w,I){var B=y.pingCache;B!==null&&B.delete(w),w=Hn(),y.pingedLanes|=y.suspendedLanes&I,zr===y&&(wr&I)===I&&(Or===4||Or===3&&(wr&130023424)===wr&&500>jr()-pd?ll(y,0):ic|=I),ks(y,w)}function Dy(y,w){w===0&&((y.mode&1)===0?w=1:(w=pn,pn<<=1,(pn&130023424)===0&&(pn=4194304)));var I=Hn();y=tu(y,w),y!==null&&(Ga(y,w,I),ks(y,I))}function Yx(y){var w=y.memoizedState,I=0;w!==null&&(I=w.retryLane),Dy(y,I)}function Qx(y,w){var I=0;switch(y.tag){case 13:var B=y.stateNode,z=y.memoizedState;z!==null&&(I=z.retryLane);break;case 19:B=y.stateNode;break;default:throw Error(o(314))}B!==null&&B.delete(w),Dy(y,I)}var Ny;Ny=function(y,w,I){if(y!==null)if(y.memoizedProps!==w.pendingProps||Sn.current)Ti=!0;else{if((y.lanes&I)===0&&(w.flags&128)===0)return Ti=!1,Dm(y,w,I);Ti=(y.flags&131072)!==0}else Ti=!1,On&&(w.flags&1048576)!==0&&Zr(w,H,w.index);switch(w.lanes=0,w.tag){case 2:var B=w.type;y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),y=w.pendingProps;var z=kt(w,xn.current);Wl(w,I),z=gh(null,w,B,y,z,I);var $=Jl();return w.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,In(B)?($=!0,cr(w)):$=!1,w.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,$a(w),z.updater=Uu,w.stateNode=z,z._reactInternals=w,ch(w,B,y,I),w=is(null,w,B,!0,$,I)):(w.tag=0,On&&$&&kn(w),kr(null,w,z,I),w=w.child),w;case 16:B=w.elementType;e:{switch(y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),y=w.pendingProps,z=B._init,B=z(B._payload),w.type=B,z=w.tag=oT(B),y=_r(B,y),z){case 0:w=tl(null,w,B,y,I);break e;case 1:w=Ju(null,w,B,y,I);break e;case 11:w=dr(null,w,B,y,I);break e;case 14:w=lr(null,w,B,_r(B.type,y),I);break e}throw Error(o(306,B,""))}return w;case 0:return B=w.type,z=w.pendingProps,z=w.elementType===B?z:_r(B,z),tl(y,w,B,z,I);case 1:return B=w.type,z=w.pendingProps,z=w.elementType===B?z:_r(B,z),Ju(y,w,B,z,I);case 3:e:{if(id(w),y===null)throw Error(o(387));B=w.pendingProps,$=w.memoizedState,z=$.element,Lu(y,w),Fu(w,B,null,I);var ge=w.memoizedState;if(B=ge.element,Be&&$.isDehydrated)if($={element:B,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},w.updateQueue.baseState=$,w.memoizedState=$,w.flags&256){z=Error(o(423)),w=yy(y,w,B,I,z);break e}else if(B!==z){z=Error(o(424)),w=yy(y,w,B,I,z);break e}else for(Be&&(xr=th(w.stateNode.containerInfo),zn=w,On=!0,rs=null,zo=!1),I=Vx(w,null,B,I),w.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(hh(),B===z){w=Ps(y,w,I);break e}kr(y,w,B,I)}w=w.child}return w;case 5:return zx(w),y===null&&$l(w),B=w.type,z=w.pendingProps,$=y!==null?y.memoizedProps:null,ge=z.children,he(B,z)?ge=null:$!==null&&he(B,$)&&(w.flags|=32),gs(y,w),kr(y,w,ge,I),w.child;case 6:return y===null&&$l(w),null;case 13:return _y(y,w,I);case 4:return vm(w,w.stateNode.containerInfo),B=w.pendingProps,y===null?w.child=Xa(w,null,B,I):kr(y,w,B,I),w.child;case 11:return B=w.type,z=w.pendingProps,z=w.elementType===B?z:_r(B,z),dr(y,w,B,z,I);case 7:return kr(y,w,w.pendingProps,I),w.child;case 8:return kr(y,w,w.pendingProps.children,I),w.child;case 12:return kr(y,w,w.pendingProps.children,I),w.child;case 10:e:{if(B=w.type._context,z=w.pendingProps,$=w.memoizedProps,ge=z.value,xo(w,B,ge),$!==null)if(wi($.value,ge)){if($.children===z.children&&!Sn.current){w=Ps(y,w,I);break e}}else for($=w.child,$!==null&&($.return=w);$!==null;){var Ce=$.dependencies;if(Ce!==null){ge=$.child;for(var Ke=Ce.firstContext;Ke!==null;){if(Ke.context===B){if($.tag===1){Ke=no(-1,I&-I),Ke.tag=2;var ct=$.updateQueue;if(ct!==null){ct=ct.shared;var Mt=ct.pending;Mt===null?Ke.next=Ke:(Ke.next=Mt.next,Mt.next=Ke),ct.pending=Ke}}$.lanes|=I,Ke=$.alternate,Ke!==null&&(Ke.lanes|=I),wo($.return,I,w),Ce.lanes|=I;break}Ke=Ke.next}}else if($.tag===10)ge=$.type===w.type?null:$.child;else if($.tag===18){if(ge=$.return,ge===null)throw Error(o(341));ge.lanes|=I,Ce=ge.alternate,Ce!==null&&(Ce.lanes|=I),wo(ge,I,w),ge=$.sibling}else ge=$.child;if(ge!==null)ge.return=$;else for(ge=$;ge!==null;){if(ge===w){ge=null;break}if($=ge.sibling,$!==null){$.return=ge.return,ge=$;break}ge=ge.return}$=ge}kr(y,w,z.children,I),w=w.child}return w;case 9:return z=w.type,B=w.pendingProps.children,Wl(w,I),z=Fi(z),B=B(z),w.flags|=1,kr(y,w,B,I),w.child;case 14:return B=w.type,z=_r(B,w.pendingProps),z=_r(B.type,z),lr(y,w,B,z,I);case 15:return el(y,w,w.type,w.pendingProps,I);case 17:return B=w.type,z=w.pendingProps,z=w.elementType===B?z:_r(B,z),y!==null&&(y.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,In(B)?(y=!0,cr(w)):y=!1,Wl(w,I),ju(w,B,z),ch(w,B,z,I),is(null,w,B,!0,y,I);case 19:return Yu(y,w,I);case 22:return Ui(y,w,I)}throw Error(o(156,w.tag))};function jm(y,w){return ma(y,w)}function Zx(y,w,I,B){this.tag=y,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(y,w,I,B){return new Zx(y,w,I,B)}function Vm(y){return y=y.prototype,!(!y||!y.isReactComponent)}function oT(y){if(typeof y=="function")return Vm(y)?1:0;if(y!=null){if(y=y.$$typeof,y===x)return 11;if(y===b)return 14}return 2}function ul(y,w){var I=y.alternate;return I===null?(I=uo(y.tag,w,y.key,y.mode),I.elementType=y.elementType,I.type=y.type,I.stateNode=y.stateNode,I.alternate=y,y.alternate=I):(I.pendingProps=w,I.type=y.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=y.flags&14680064,I.childLanes=y.childLanes,I.lanes=y.lanes,I.child=y.child,I.memoizedProps=y.memoizedProps,I.memoizedState=y.memoizedState,I.updateQueue=y.updateQueue,w=y.dependencies,I.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},I.sibling=y.sibling,I.index=y.index,I.ref=y.ref,I}function zm(y,w,I,B,z,$){var ge=2;if(B=y,typeof y=="function")Vm(y)&&(ge=1);else if(typeof y=="string")ge=5;else e:switch(y){case c:return lc(I.children,z,$,w);case h:ge=8,z|=8;break;case f:return y=uo(12,I,w,z|2),y.elementType=f,y.lanes=$,y;case _:return y=uo(13,I,w,z),y.elementType=_,y.lanes=$,y;case v:return y=uo(19,I,w,z),y.elementType=v,y.lanes=$,y;case S:return xd(I,z,$,w);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case p:ge=10;break e;case g:ge=9;break e;case x:ge=11;break e;case b:ge=14;break e;case E:ge=16,B=null;break e}throw Error(o(130,y==null?y:typeof y,""))}return w=uo(ge,I,w,z),w.elementType=y,w.type=B,w.lanes=$,w}function lc(y,w,I,B){return y=uo(7,y,B,w),y.lanes=I,y}function xd(y,w,I,B){return y=uo(22,y,B,w),y.elementType=S,y.lanes=I,y.stateNode={},y}function Hm(y,w,I){return y=uo(6,y,null,w),y.lanes=I,y}function Gm(y,w,I){return w=uo(4,y.children!==null?y.children:[],y.key,w),w.lanes=I,w.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},w}function qm(y,w,I,B,z){this.tag=w,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ih(0),this.expirationTimes=ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ih(0),this.identifierPrefix=B,this.onRecoverableError=z,Be&&(this.mutableSourceEagerHydrationData=null)}function ew(y,w,I,B,z,$,ge,Ce,Ke){return y=new qm(y,w,I,Ce,Ke),w===1?(w=1,$===!0&&(w|=8)):w=0,$=uo(3,null,null,w),y.current=$,$.stateNode=y,$.memoizedState={element:B,isDehydrated:I,cache:null,transitions:null},$a($),y}function tw(y){if(!y)return Ht;y=y._reactInternals;e:{if(O(y)!==y||y.tag!==1)throw Error(o(170));var w=y;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(In(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(o(171))}if(y.tag===1){var I=y.type;if(In(I))return Fo(y,I,w)}return w}function nw(y){var w=y._reactInternals;if(w===void 0)throw typeof y.render=="function"?Error(o(188)):(y=Object.keys(y).join(","),Error(o(268,y)));return y=U(w),y===null?null:y.stateNode}function Ao(y,w){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var I=y.retryLane;y.retryLane=I!==0&&I<w?I:w}}function wd(y,w){Ao(y,w),(y=y.alternate)&&Ao(y,w)}function Wm(y){return y=U(y),y===null?null:y.stateNode}function rw(){return null}return t.attemptContinuousHydration=function(y){if(y.tag===13){var w=Hn();os(y,134217728,w),wd(y,134217728)}},t.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var w=Hn(),I=Jo(y);os(y,I,w),wd(y,I)}},t.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var w=y.stateNode;if(w.current.memoizedState.isDehydrated){var I=Qr(w.pendingLanes);I!==0&&(ci(w,I|1),ks(w,jr()),(wn&6)===0&&(sc(),fs()))}break;case 13:var B=Hn();Mh(function(){return os(y,1,B)}),wd(y,1)}},t.batchedUpdates=function(y,w){var I=wn;wn|=1;try{return y(w)}finally{wn=I,wn===0&&(sc(),ar&&fs())}},t.createComponentSelector=function(y){return{$$typeof:cd,value:y}},t.createContainer=function(y,w,I,B,z,$,ge){return ew(y,w,!1,null,I,B,z,$,ge)},t.createHasPseudoClassSelector=function(y){return{$$typeof:ec,value:y}},t.createHydrationContainer=function(y,w,I,B,z,$,ge,Ce,Ke){return y=ew(I,B,!0,y,z,$,ge,Ce,Ke),y.context=tw(null),I=y.current,B=Hn(),z=Jo(I),$=no(B,z),$.callback=w??null,Vo(I,$),y.current.lanes=z,Ga(y,z,B),ks(y,B),y},t.createPortal=function(y,w,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:B==null?null:""+B,children:y,containerInfo:w,implementation:I}},t.createRoleSelector=function(y){return{$$typeof:tc,value:y}},t.createTestNameSelector=function(y){return{$$typeof:il,value:y}},t.createTextSelector=function(y){return{$$typeof:Ah,value:y}},t.deferredUpdates=function(y){var w=mn,I=nr.transition;try{return nr.transition=null,mn=16,y()}finally{mn=w,nr.transition=I}},t.discreteUpdates=function(y,w,I,B,z){var $=mn,ge=nr.transition;try{return nr.transition=null,mn=1,y(w,I,B,z)}finally{mn=$,nr.transition=ge,wn===0&&sc()}},t.findAllNodes=sl,t.findBoundingRects=function(y,w){if(!Ne)throw Error(o(363));w=sl(y,w),y=[];for(var I=0;I<w.length;I++)y.push(q(w[I]));for(w=y.length-1;0<w;w--){I=y[w];for(var B=I.x,z=B+I.width,$=I.y,ge=$+I.height,Ce=w-1;0<=Ce;Ce--)if(w!==Ce){var Ke=y[Ce],ct=Ke.x,Mt=ct+Ke.width,an=Ke.y,Gt=an+Ke.height;if(B>=ct&&$>=an&&z<=Mt&&ge<=Gt){y.splice(w,1);break}else if(B!==ct||I.width!==Ke.width||Gt<$||an>ge){if(!($!==an||I.height!==Ke.height||Mt<B||ct>z)){ct>B&&(Ke.width+=ct-B,Ke.x=B),Mt<z&&(Ke.width=z-ct),y.splice(w,1);break}}else{an>$&&(Ke.height+=an-$,Ke.y=$),Gt<ge&&(Ke.height=ge-an),y.splice(w,1);break}}}return y},t.findHostInstance=nw,t.findHostInstanceWithNoPortals=function(y){return y=N(y),y=y!==null?J(y):null,y===null?null:y.stateNode},t.findHostInstanceWithWarning=function(y){return nw(y)},t.flushControlled=function(y){var w=wn;wn|=1;var I=nr.transition,B=mn;try{nr.transition=null,mn=1,y()}finally{mn=B,nr.transition=I,wn=w,wn===0&&(sc(),fs())}},t.flushPassiveEffects=Aa,t.flushSync=Mh,t.focusWithin=function(y,w){if(!Ne)throw Error(o(363));for(y=hd(y),w=oo(y,w),w=Array.from(w),y=0;y<w.length;){var I=w[y++];if(!de(I)){if(I.tag===5&&be(I.stateNode))return!0;for(I=I.child;I!==null;)w.push(I),I=I.sibling}}return!1},t.getCurrentUpdatePriority=function(){return mn},t.getFindAllNodesFailureDescription=function(y,w){if(!Ne)throw Error(o(363));var I=0,B=[];y=[hd(y),0];for(var z=0;z<y.length;){var $=y[z++],ge=y[z++],Ce=w[ge];if(($.tag!==5||!de($))&&(fd($,Ce)&&(B.push(Zl(Ce)),ge++,ge>I&&(I=ge)),ge<w.length))for($=$.child;$!==null;)y.push($,ge),$=$.sibling}if(I<w.length){for(y=[];I<w.length;I++)y.push(Zl(w[I]));return`findAllNodes was able to match part of the selector:
  `+(B.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},t.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return oe(y.child.stateNode);default:return y.child.stateNode}},t.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Wm,findFiberByHostInstance:y.findFiberByHostInstance||rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)y=!0;else{try{va=w.inject(y),to=w}catch{}y=!!w.checkDCE}}return y},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(y,w,I,B){if(!Ne)throw Error(o(363));y=sl(y,w);var z=He(y,I,B).disconnect;return{disconnect:function(){z()}}},t.registerMutableSourceForHydration=function(y,w){var I=w._getVersion;I=I(w._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[w,I]:y.mutableSourceEagerHydrationData.push(w,I)},t.runWithPriority=function(y,w){var I=mn;try{return mn=y,w()}finally{mn=I}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(y,w,I,B){var z=w.current,$=Hn(),ge=Jo(z);return I=tw(I),w.context===null?w.context=I:w.pendingContext=I,w=no($,ge),w.payload={element:y},B=B===void 0?null:B,B!==null&&(w.callback=B),Vo(z,w),y=os(z,ge,$),y!==null&&Ka(y,z,ge),ge},t}),MM}var cj;function EAe(){return cj||(cj=1,SM.exports=bAe()),SM.exports}var AAe=EAe();const SAe=Ll(AAe);var hj=e$();const U3={},TAe=n=>void Object.assign(U3,n);function CAe(n,e){function t(c,{args:h=[],attach:f,...p},g){let x=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=p.object;_=Ng(v,{type:c,root:g,attach:f,primitive:!0})}else{const v=U3[x];if(!v)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Ng(new v(...h),{type:c,root:g,attach:f,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),x!=="inject"&&PM(_,p),_}function r(c,h){let f=!1;if(h){var p,g;(p=h.__r3f)!=null&&p.attach?IM(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),f=!0),f||(g=c.__r3f)==null||g.objects.push(h),h.__r3f||Ng(h,{}),h.__r3f.parent=c,_P(h),Lg(h)}}function i(c,h,f){let p=!1;if(h){var g,x;if((g=h.__r3f)!=null&&g.attach)IM(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:h});const _=c.children.filter(b=>b!==h),v=_.indexOf(f);c.children=[..._.slice(0,v),h,..._.slice(v)],p=!0}p||(x=c.__r3f)==null||x.objects.push(h),h.__r3f||Ng(h,{}),h.__r3f.parent=c,_P(h),Lg(h)}}function s(c,h,f=!1){c&&[...c].forEach(p=>o(h,p,f))}function o(c,h,f){if(h){var p,g,x;if(h.__r3f&&(h.__r3f.parent=null),(p=c.__r3f)!=null&&p.objects&&(c.__r3f.objects=c.__r3f.objects.filter(S=>S!==h)),(g=h.__r3f)!=null&&g.attach)gj(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var _;c.remove(h),(_=h.__r3f)!=null&&_.root&&NAe(Tb(h),h)}const b=(x=h.__r3f)==null?void 0:x.primitive,E=!b&&(f===void 0?h.dispose!==null:f);if(!b){var v;s((v=h.__r3f)==null?void 0:v.objects,h,E),s(h.children,h,E)}if(delete h.__r3f,E&&h.dispose&&h.type!=="Scene"){const S=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?hj.unstable_scheduleCallback(hj.unstable_IdlePriority,S):S()}Lg(c)}}function a(c,h,f,p){var g;const x=(g=c.__r3f)==null?void 0:g.parent;if(!x)return;const _=t(h,f,c.__r3f.root);if(c.children){for(const v of c.children)v.__r3f&&r(_,v);c.children=c.children.filter(v=>!v.__r3f)}c.__r3f.objects.forEach(v=>r(_,v)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(x,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(x,_),_.raycast&&_.__r3f.eventCount&&Tb(_).getState().internal.interaction.push(_),[p,p.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>{};return{reconciler:SAe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,r(f,h))},removeChildFromContainer:(c,h)=>{h&&o(c.getState().scene,h)},insertInContainerBefore:(c,h,f)=>{if(!h||!f)return;const p=c.getState().scene;p.__r3f&&i(p,h,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;return!!((h=c==null?void 0:c.__r3f)!=null?h:{}).handlers},prepareUpdate(c,h,f,p){var g;if(((g=c==null?void 0:c.__r3f)!=null?g:{}).primitive&&p.object&&p.object!==c)return[!0];{const{args:_=[],children:v,...b}=p,{args:E=[],children:S,...C}=f;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((M,P)=>M!==E[P]))return[!0];const D=a$(c,b,C,!0);return D.changes.length?[!1,D]:null}},commitUpdate(c,[h,f],p,g,x,_){h?a(c,p,x,_):PM(c,f)},commitMount(c,h,f,p){var g;const x=(g=c.__r3f)!=null?g:{};c.raycast&&x.handlers&&x.eventCount&&Tb(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Ng(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:f,parent:p}=(h=c.__r3f)!=null?h:{};f&&p&&gj(p,c,f),c.isObject3D&&(c.visible=!1),Lg(c)},unhideInstance(c,h){var f;const{attach:p,parent:g}=(f=c.__r3f)!=null?f:{};p&&g&&IM(g,c,p),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),Lg(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Kg.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sr.fun(performance.now)?performance.now:Sr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:PM}}var fj,dj;const RM=n=>"colorSpace"in n||"outputColorSpace"in n,t$=()=>{var n;return(n=U3.ColorManagement)!=null?n:null},n$=n=>n&&n.isOrthographicCamera,MAe=n=>n&&n.hasOwnProperty("current"),kx=typeof window<"u"&&((fj=window.document)!=null&&fj.createElement||((dj=window.navigator)==null?void 0:dj.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function r$(n){const e=W.useRef(n);return kx(()=>void(e.current=n),[n]),e}function RAe({set:n}){return kx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class i$ extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}i$.getDerivedStateFromError=()=>({error:!0});const s$="__default",pj=new Map,IAe=n=>n&&!!n.memoized&&!!n.changes;function o$(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const l0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Tb(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Sr={obj:n=>n===Object(n)&&!Sr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Sr.str(n)||Sr.num(n)||Sr.boo(n))return n===e;const s=Sr.obj(n);if(s&&r==="reference")return n===e;const o=Sr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Sr.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Sr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function PAe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function kAe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ng(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function yP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const mj=/-\d+$/;function IM(n,e,t){if(Sr.str(t)){if(mj.test(t)){const s=t.replace(mj,""),{target:o,key:a}=yP(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=yP(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function gj(n,e,t){var r,i;if(Sr.str(t)){const{target:s,key:o}=yP(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function a$(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const c=n.__r3f,h=Object.entries(i),f=[];if(u){const g=Object.keys(l);for(let x=0;x<g.length;x++)i.hasOwnProperty(g[x])||h.unshift([g[x],s$+"remove"])}h.forEach(([g,x])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&g==="object"||Sr.equ(x,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return f.push([g,x,!0,[]]);let v=[];g.includes("-")&&(v=g.split("-")),f.push([g,x,!1,v]);for(const b in i){const E=i[b];b.startsWith(`${g}-`)&&f.push([b,E,!1,b.split("-")])}});const p={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(p.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(p.attach=c.memoizedProps.attach),{memoized:p,changes:f}}function PM(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=IAe(e)?e:a$(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[p,g,x,_]=a[f];if(RM(n)){const S="srgb",C="srgb-linear";p==="encoding"?(p="colorSpace",g=g===3001?S:C):p==="outputEncoding"&&(p="outputColorSpace",g=g===3001?S:C)}let v=n,b=v[p];if(_.length&&(b=_.reduce((E,S)=>E[S],n),!(b&&b.set))){const[E,...S]=_.reverse();v=S.reverse().reduce((C,D)=>C[D],n),p=E}if(g===s$+"remove")if(v.constructor){let E=pj.get(v.constructor);E||(E=new v.constructor,pj.set(v.constructor,E)),g=E[p]}else g=0;if(x&&r)g?r.handlers[p]=g:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(b&&b.set&&(b.copy||b instanceof Mp)){if(Array.isArray(g))b.fromArray?b.fromArray(g):b.set(...g);else if(b.copy&&g&&g.constructor&&b.constructor===g.constructor)b.copy(g);else if(g!==void 0){var u;const E=(u=b)==null?void 0:u.isColor;!E&&b.setScalar?b.setScalar(g):b instanceof Mp&&g instanceof Mp?b.mask=g.mask:b.set(g),!t$()&&s&&!s.linear&&E&&b.convertSRGBToLinear()}}else{var c;if(v[p]=g,(c=v[p])!=null&&c.isTexture&&v[p].format===qs&&v[p].type===Dl&&s){const E=v[p];RM(E)&&RM(s.gl)?E.colorSpace=s.gl.outputColorSpace:E.encoding=s.gl.outputEncoding}}Lg(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const f=Tb(n).getState().internal,p=f.interaction.indexOf(n);p>-1&&f.interaction.splice(p,1),r.eventCount&&f.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&_P(n),n}function Lg(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function _P(n){n.onUpdate==null||n.onUpdate(n)}function OAe(n,e){n.manual||(n$(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function $1(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function DAe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Kg.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Kg.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Kg.ContinuousEventPriority;default:return Kg.DefaultEventPriority}}function l$(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function NAe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{l$(t.capturedMap,e,r,i)})}function LAe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),h=new Set,f=[],p=u?u(c.internal.interaction):c.internal.interaction;for(let v=0;v<p.length;v++){const b=l0(p[v]);b&&(b.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(v){const b=l0(v);if(!b||!b.events.enabled||b.raycaster.camera===null)return[];if(b.raycaster.camera===void 0){var E;b.events.compute==null||b.events.compute(l,b,(E=b.previousRoot)==null?void 0:E.getState()),b.raycaster.camera===void 0&&(b.raycaster.camera=null)}return b.raycaster.camera?b.raycaster.intersectObject(v,!0):[]}let x=p.flatMap(g).sort((v,b)=>{const E=l0(v.object),S=l0(b.object);return!E||!S?v.distance-b.distance:S.events.priority-E.events.priority||v.distance-b.distance}).filter(v=>{const b=$1(v);return h.has(b)?!1:(h.add(b),!0)});c.events.filter&&(x=c.events.filter(x,c));for(const v of x){let b=v.object;for(;b;){var _;(_=b.__r3f)!=null&&_.eventCount&&f.push({...v,eventObject:b}),b=b.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let v of c.internal.capturedMap.get(l.pointerId).values())h.has($1(v.intersection))||f.push(v.intersection);return f}function i(l,u,c,h){const f=n.getState();if(l.length){const p={stopped:!1};for(const g of l){const x=l0(g.object)||f,{raycaster:_,pointer:v,camera:b,internal:E}=x,S=new pe(v.x,v.y,0).unproject(b),C=R=>{var N,U;return(N=(U=E.capturedMap.get(R))==null?void 0:U.has(g.eventObject))!=null?N:!1},D=R=>{const N={intersection:g,target:u.target};E.capturedMap.has(R)?E.capturedMap.get(R).set(g.eventObject,N):E.capturedMap.set(R,new Map([[g.eventObject,N]])),u.target.setPointerCapture(R)},M=R=>{const N=E.capturedMap.get(R);N&&l$(E.capturedMap,g.eventObject,N,R)};let P={};for(let R in u){let N=u[R];typeof N!="function"&&(P[R]=N)}let O={...g,...P,pointer:v,intersections:l,stopped:p.stopped,delta:c,unprojectedPoint:S,ray:_.ray,camera:b,stopPropagation(){const R="pointerId"in u&&E.capturedMap.get(u.pointerId);if((!R||R.has(g.eventObject))&&(O.stopped=p.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(N=>N.eventObject===g.eventObject))){const N=l.slice(0,l.indexOf(g));s([...N,g])}},target:{hasPointerCapture:C,setPointerCapture:D,releasePointerCapture:M},currentTarget:{hasPointerCapture:C,setPointerCapture:D,releasePointerCapture:M},nativeEvent:u};if(h(O),p.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const f=c.eventObject.__r3f,p=f==null?void 0:f.handlers;if(u.hovered.delete($1(c)),f!=null&&f.eventCount){const g={...c,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=c;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(c,p?t:void 0),v=g?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=_.map(E=>E.eventObject)),g&&!_.length&&v<=2&&(o(c,f.interaction),h&&h(c)),p&&s(_);function b(E){const S=E.eventObject,C=S.__r3f,D=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(p){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const M=$1(E),P=f.hovered.get(M);P?P.stopped&&E.stopPropagation():(f.hovered.set(M,E),D.onPointerOver==null||D.onPointerOver(E),D.onPointerEnter==null||D.onPointerEnter(E))}D.onPointerMove==null||D.onPointerMove(E)}else{const M=D[l];M?(!g||f.initialHits.includes(S))&&(o(c,f.interaction.filter(P=>!f.initialHits.includes(P))),M(E)):g&&f.initialHits.includes(S)&&o(c,f.interaction.filter(P=>!f.initialHits.includes(P)))}}i(_,c,v,b)}}return{handlePointer:a}}const u$=n=>!!(n!=null&&n.render),c$=W.createContext(null),BAe=(n,e)=>{const t=gAe((a,l)=>{const u=new pe,c=new pe,h=new pe;function f(v=l().camera,b=c,E=l().size){const{width:S,height:C,top:D,left:M}=E,P=S/C;b.isVector3?h.copy(b):h.set(...b);const O=v.getWorldPosition(u).distanceTo(h);if(n$(v))return{width:S/v.zoom,height:C/v.zoom,top:D,left:M,factor:1,distance:O,aspect:P};{const R=v.fov*Math.PI/180,N=2*Math.tan(R/2)*O,U=N*(S/C);return{width:U,height:N,top:D,left:M,factor:S/U,distance:O,aspect:P}}}let p;const g=v=>a(b=>({performance:{...b.performance,current:v}})),x=new Ze;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,b)=>e(v,b,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new O3,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();p&&clearTimeout(p),v.performance.current!==v.performance.min&&g(v.performance.min),p=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:v=>a(b=>({...b,events:{...b.events,...v}})),setSize:(v,b,E,S,C)=>{const D=l().camera,M={width:v,height:b,top:S||0,left:C||0,updateStyle:E};a(P=>({size:M,viewport:{...P.viewport,...f(D,c,M)}}))},setDpr:v=>a(b=>{const E=o$(v);return{viewport:{...b.viewport,dpr:E,initialDpr:b.viewport.initialDpr||E}}}),setFrameloop:(v="always")=>{const b=l().clock;b.stop(),b.elapsedTime=0,v!=="never"&&(b.start(),b.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,b,E)=>{const S=l().internal;return S.priority=S.priority+(b>0?1:0),S.subscribers.push({ref:v,priority:b,store:E}),S.subscribers=S.subscribers.sort((C,D)=>C.priority-D.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(b>0?1:0),C.subscribers=C.subscribers.filter(D=>D.ref!==v))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var f;i=l,s=u.dpr,OAe(a,l),c.setPixelRatio(u.dpr);const p=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,p)}a!==o&&(o=a,h(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function FAe(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let K1,h$=new Set,UAe=new Set,jAe=new Set;const VAe=n=>FAe(n,h$);function kM(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function u0(n,e){switch(n){case"before":return kM(h$,e);case"after":return kM(UAe,e);case"tail":return kM(jAe,e)}}let OM,DM;function NM(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),OM=e.internal.subscribers,K1=0;K1<OM.length;K1++)DM=OM[K1],DM.ref.current(DM.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function zAe(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,u0("before",u),t=!0;for(const h of n.values()){var c;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(r+=NM(u,s))}if(t=!1,u0("after",u),r===0)return u0("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,c=1){var h;if(!u)return n.forEach(f=>a(f.store.getState(),c));(h=u.gl.xr)!=null&&h.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,h,f){if(c&&u0("before",u),h)NM(u,h,f);else for(const p of n.values())NM(u,p.store.getState());c&&u0("after",u)}return{loop:o,invalidate:a,advance:l}}function f$(){const n=W.useContext(c$);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function HAe(n=t=>t,e){return f$()(n,e)}function HS(n,e=0){const t=f$(),r=t.getState().internal.subscribe,i=r$(n);return kx(()=>r(i,e,t),[e,r,t]),null}const vj=new WeakMap;function d$(n,e){return function(t,...r){let i=vj.get(t);return i||(i=new t,vj.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,PAe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Ox(n,e,t,r){const i=Array.isArray(e)?e:[e],s=yAe(d$(t,r),[n,...i],{equal:Sr.equ});return Array.isArray(e)?s:s[0]}Ox.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return _Ae(d$(t),[n,...r])};Ox.clear=function(n,e){const t=Array.isArray(e)?e:[e];return xAe([n,...t])};const Sv=new Map,{invalidate:yj,advance:_j}=zAe(Sv),{reconciler:rA,applyProps:tp}=CAe(Sv,DAe),Sg={objects:"shallow",strict:!1},GAe=(n,e)=>{const t=typeof n=="function"?n(e):n;return u$(t)?t:new XW({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function qAe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function WAe(n){const e=Sv.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||BAe(yj,_j),o=t||rA.createContainer(s,Kg.ConcurrentRoot,null,!1,null,"",i,null);e||Sv.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:h,size:f,scene:p,events:g,onCreated:x,shadows:_=!1,linear:v=!1,flat:b=!1,legacy:E=!1,orthographic:S=!1,frameloop:C="always",dpr:D=[1,2],performance:M,raycaster:P,camera:O,onPointerMissed:R}=c,N=s.getState(),U=N.gl;N.gl||N.set({gl:U=GAe(h,n)});let F=N.raycaster;F||N.set({raycaster:F=new zW});const{params:J,...Z}=P||{};if(Sr.equ(Z,F,Sg)||tp(F,{...Z}),Sr.equ(J,F.params,Sg)||tp(F,{params:{...F.params,...J}}),!N.camera||N.camera===u&&!Sr.equ(u,O,Sg)){u=O;const Y=O instanceof Ex,V=Y?O:S?new Zv(0,0,0,0,.1,1e3):new Wi(75,0,.1,1e3);Y||(V.position.z=5,O&&(tp(V,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&(V.manual=!0,V.updateProjectionMatrix())),!N.camera&&!(O!=null&&O.rotation)&&V.lookAt(0,0,0)),N.set({camera:V}),F.camera=V}if(!N.scene){let Y;p!=null&&p.isScene?Y=p:(Y=new u3,p&&tp(Y,p)),N.set({scene:Ng(Y)})}if(!N.xr){var oe;const Y=(re,se)=>{const he=s.getState();he.frameloop!=="never"&&_j(re,!0,he,se)},V=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?Y:null),re.gl.xr.isPresenting||yj(re)},X={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",V),re.xr.addEventListener("sessionend",V)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",V),re.xr.removeEventListener("sessionend",V)}};typeof((oe=U.xr)==null?void 0:oe.addEventListener)=="function"&&X.connect(),N.set({xr:X})}if(U.shadowMap){const Y=U.shadowMap.enabled,V=U.shadowMap.type;if(U.shadowMap.enabled=!!_,Sr.boo(_))U.shadowMap.type=X0;else if(Sr.str(_)){var ae;const X={basic:rq,percentage:cS,soft:X0,variance:bl};U.shadowMap.type=(ae=X[_])!=null?ae:X0}else Sr.obj(_)&&Object.assign(U.shadowMap,_);(Y!==U.shadowMap.enabled||V!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const Q=t$();Q&&("enabled"in Q?Q.enabled=!E:"legacyMode"in Q&&(Q.legacyMode=E)),l||tp(U,{outputEncoding:v?3e3:3001,toneMapping:b?gu:$O}),N.legacy!==E&&N.set(()=>({legacy:E})),N.linear!==v&&N.set(()=>({linear:v})),N.flat!==b&&N.set(()=>({flat:b})),h&&!Sr.fun(h)&&!u$(h)&&!Sr.equ(h,U,Sg)&&tp(U,h),g&&!N.events.handlers&&N.set({events:g(s)});const ee=qAe(n,f);return Sr.equ(ee,N.size,Sg)||N.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),D&&N.viewport.dpr!==o$(D)&&N.setDpr(D),N.frameloop!==C&&N.setFrameloop(C),N.onPointerMissed||N.set({onPointerMissed:R}),M&&!Sr.equ(M,N.performance,Sg)&&N.set(Y=>({performance:{...Y.performance,...M}})),a=x,l=!0,this},render(c){return l||this.configure(),rA.updateContainer(L.jsx($Ae,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){p$(n)}}}function $Ae({store:n,children:e,onCreated:t,rootElement:r}){return kx(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),L.jsx(c$.Provider,{value:n,children:e})}function p$(n,e){const t=Sv.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),rA.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),kAe(i),Sv.delete(n)}catch{}},500)})}}rA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});const LM={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function KAe(n){const{handlePointer:e}=LAe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(LM).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=LM[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=LM[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function xj(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function JAe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=W.useRef(!1);W.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,p]=W.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:b,top:E,width:S,height:C,bottom:D,right:M,x:P,y:O}=a.current.element.getBoundingClientRect(),R={left:b,top:E,width:S,height:C,bottom:D,right:M,x:P,y:O};a.current.element instanceof HTMLElement&&r&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),c.current&&!ZAe(a.current.lastBounds,R)&&o(a.current.lastBounds=R)};return[v,u?xj(v,u):v,l?xj(v,l):v]},[o,r,l,u]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(p),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=v=>{!v||v===a.current.element||(g(),a.current.element=v,a.current.scrollContainers=m$(v),x())};return YAe(p,!!e),XAe(f),W.useEffect(()=>{g(),x()},[e,p,f]),W.useEffect(()=>g,[]),[_,s,h]}function XAe(n){W.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function YAe(n,e){W.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function m$(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...m$(n.parentElement)]}const QAe=["x","y","top","bottom","left","right","width","height"],ZAe=(n,e)=>QAe.every(t=>n[t]===e[t]);var eSe=Object.defineProperty,tSe=Object.defineProperties,nSe=Object.getOwnPropertyDescriptors,wj=Object.getOwnPropertySymbols,rSe=Object.prototype.hasOwnProperty,iSe=Object.prototype.propertyIsEnumerable,bj=(n,e,t)=>e in n?eSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ej=(n,e)=>{for(var t in e||(e={}))rSe.call(e,t)&&bj(n,t,e[t]);if(wj)for(var t of wj(e))iSe.call(e,t)&&bj(n,t,e[t]);return n},sSe=(n,e)=>tSe(n,nSe(e)),Aj,Sj;typeof window<"u"&&((Aj=window.document)!=null&&Aj.createElement||((Sj=window.navigator)==null?void 0:Sj.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function g$(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=g$(r,e,t);if(i)return i;r=r.sibling}}function v$(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Tj=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Tj;return}return Tj.apply(this,arguments)};const j3=v$(W.createContext(null));class y$ extends W.Component{render(){return W.createElement(j3.Provider,{value:this._reactInternals},this.props.children)}}function oSe(){const n=W.useContext(j3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=g$(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function aSe(){const n=oSe(),[e]=W.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==j3&&!e.has(i)&&e.set(i,W.useContext(v$(i)))}t=t.return}return e}function lSe(){const n=aSe();return W.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>W.createElement(e,null,W.createElement(t.Provider,sSe(Ej({},r),{value:n.get(t)}))),e=>W.createElement(y$,Ej({},e))),[n])}const uSe=W.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=KAe,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:f,orthographic:p,frameloop:g,dpr:x,performance:_,raycaster:v,camera:b,scene:E,onPointerMissed:S,onCreated:C,...D},M){W.useMemo(()=>TAe(YW),[]);const P=lSe(),[O,R]=JAe({scroll:!0,debounce:{scroll:50,resize:0},...r}),N=W.useRef(null),U=W.useRef(null);W.useImperativeHandle(M,()=>N.current);const F=r$(S),[J,Z]=W.useState(!1),[oe,ae]=W.useState(!1);if(J)throw J;if(oe)throw oe;const Q=W.useRef(null);kx(()=>{const Y=N.current;R.width>0&&R.height>0&&Y&&(Q.current||(Q.current=WAe(Y)),Q.current.configure({gl:s,events:o,shadows:u,linear:c,flat:h,legacy:f,orthographic:p,frameloop:g,dpr:x,performance:_,raycaster:v,camera:b,scene:E,size:R,onPointerMissed:(...V)=>F.current==null?void 0:F.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?MAe(a)?a.current:a:U.current),l&&V.setEvents({compute:(X,re)=>{const se=X[l+"X"],he=X[l+"Y"];re.pointer.set(se/re.size.width*2-1,-(he/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),C==null||C(V)}}),Q.current.render(L.jsx(P,{children:L.jsx(i$,{set:ae,children:L.jsx(W.Suspense,{fallback:L.jsx(RAe,{set:Z}),children:e??null})})})))}),W.useEffect(()=>{const Y=N.current;if(Y)return()=>p$(Y)},[]);const ee=a?"none":"auto";return L.jsx("div",{ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...i},...D,children:L.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:L.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}),_$=W.forwardRef(function(e,t){return L.jsx(y$,{children:L.jsx(uSe,{...e,ref:t})})});function er(){return er=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},er.apply(null,arguments)}var V3=Nx(),$n=n=>Dx(n,V3),z3=Nx();$n.write=n=>Dx(n,z3);var GS=Nx();$n.onStart=n=>Dx(n,GS);var H3=Nx();$n.onFrame=n=>Dx(n,H3);var G3=Nx();$n.onFinish=n=>Dx(n,G3);var iv=[];$n.setTimeout=(n,e)=>{const t=$n.now()+e,r=()=>{const s=iv.findIndex(o=>o.cancel==r);~s&&iv.splice(s,1),uf-=~s?1:0},i={time:t,handler:n,cancel:r};return iv.splice(x$(t),0,i),uf+=1,w$(),i};var x$=n=>~(~iv.findIndex(e=>e.time>n)||~iv.length);$n.cancel=n=>{GS.delete(n),H3.delete(n),G3.delete(n),V3.delete(n),z3.delete(n)};$n.sync=n=>{xP=!0,$n.batchedUpdates(n),xP=!1};$n.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,$n.onStart(t)}return r.handler=n,r.cancel=()=>{GS.delete(t),e=null},r};var q3=typeof window<"u"?window.requestAnimationFrame:(()=>{});$n.use=n=>q3=n;$n.now=typeof performance<"u"?()=>performance.now():Date.now;$n.batchedUpdates=n=>n();$n.catch=console.error;$n.frameLoop="always";$n.advance=()=>{$n.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):E$()};var lf=-1,uf=0,xP=!1;function Dx(n,e){xP?(e.delete(n),n(0)):(e.add(n),w$())}function w$(){lf<0&&(lf=0,$n.frameLoop!=="demand"&&q3(b$))}function cSe(){lf=-1}function b$(){~lf&&(q3(b$),$n.batchedUpdates(E$))}function E$(){const n=lf;lf=$n.now();const e=x$(lf);if(e&&(A$(iv.splice(0,e),t=>t.handler()),uf-=e),!uf){cSe();return}GS.flush(),V3.flush(n?Math.min(64,lf-n):16.667),H3.flush(),z3.flush(),G3.flush()}function Nx(){let n=new Set,e=n;return{add(t){uf+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return uf-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,uf-=e.size,A$(e,r=>r(t)&&n.add(r)),uf+=n.size,e=n)}}}function A$(n,e){n.forEach(t=>{try{e(t)}catch(r){$n.catch(r)}})}var hSe=Object.defineProperty,fSe=(n,e)=>{for(var t in e)hSe(n,t,{get:e[t],enumerable:!0})},Tv={};fSe(Tv,{assign:()=>gSe,colors:()=>vf,createStringInterpolator:()=>$3,skipAnimation:()=>T$,to:()=>S$,willAdvance:()=>K3});function dSe(){}var pSe=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),ui={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function mSe(n,e){if(ui.arr(n)){if(!ui.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var Bc=(n,e)=>n.forEach(e);function wP(n,e,t){if(ui.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}var J1=n=>ui.und(n)?[]:ui.arr(n)?n:[n],W3=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$3,S$,vf=null,T$=!1,K3=dSe,gSe=n=>{n.to&&(S$=n.to),n.now&&($n.now=n.now),n.colors!==void 0&&(vf=n.colors),n.skipAnimation!=null&&(T$=n.skipAnimation),n.createStringInterpolator&&($3=n.createStringInterpolator),n.requestAnimationFrame&&$n.use(n.requestAnimationFrame),n.batchedUpdates&&($n.batchedUpdates=n.batchedUpdates),n.willAdvance&&(K3=n.willAdvance),n.frameLoop&&($n.frameLoop=n.frameLoop)},s_=new Set,Da=[],BM=[],iA=0,J3={get idle(){return!s_.size&&!Da.length},start(n){iA>n.priority?(s_.add(n),$n.onStart(vSe)):(C$(n),$n(bP))},advance:bP,sort(n){if(iA)$n.onFrame(()=>J3.sort(n));else{const e=Da.indexOf(n);~e&&(Da.splice(e,1),M$(n))}},clear(){Da=[],s_.clear()}};function vSe(){s_.forEach(C$),s_.clear(),$n(bP)}function C$(n){Da.includes(n)||M$(n)}function M$(n){Da.splice(ySe(Da,e=>e.priority>n.priority),0,n)}function bP(n){const e=BM;for(let t=0;t<Da.length;t++){const r=Da[t];iA=r.priority,r.idle||(K3(r),r.advance(n),r.idle||e.push(r))}return iA=0,BM=Da,BM.length=0,Da=e,Da.length>0}function ySe(n,e){const t=n.findIndex(e);return t<0?n.length:t}var _Se={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Rl="[-+]?\\d*\\.?\\d+",sA=Rl+"%";function qS(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var xSe=new RegExp("rgb"+qS(Rl,Rl,Rl)),wSe=new RegExp("rgba"+qS(Rl,Rl,Rl,Rl)),bSe=new RegExp("hsl"+qS(Rl,sA,sA)),ESe=new RegExp("hsla"+qS(Rl,sA,sA,Rl)),ASe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,SSe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,TSe=/^#([0-9a-fA-F]{6})$/,CSe=/^#([0-9a-fA-F]{8})$/;function MSe(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=TSe.exec(n))?parseInt(e[1]+"ff",16)>>>0:vf&&vf[n]!==void 0?vf[n]:(e=xSe.exec(n))?(Tg(e[1])<<24|Tg(e[2])<<16|Tg(e[3])<<8|255)>>>0:(e=wSe.exec(n))?(Tg(e[1])<<24|Tg(e[2])<<16|Tg(e[3])<<8|Rj(e[4]))>>>0:(e=ASe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=CSe.exec(n))?parseInt(e[1],16)>>>0:(e=SSe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=bSe.exec(n))?(Cj(Mj(e[1]),X1(e[2]),X1(e[3]))|255)>>>0:(e=ESe.exec(n))?(Cj(Mj(e[1]),X1(e[2]),X1(e[3]))|Rj(e[4]))>>>0:null}function FM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Cj(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,s=FM(i,r,n+1/3),o=FM(i,r,n),a=FM(i,r,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Tg(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function Mj(n){return(parseFloat(n)%360+360)%360/360}function Rj(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function X1(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function Ij(n){let e=MSe(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${s})`}var V_=(n,e,t)=>{if(ui.fun(n))return n;if(ui.arr(n))return V_({range:n,output:e,extrapolate:t});if(ui.str(n.output[0]))return $3(n);const r=n,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=ISe(u,s);return RSe(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function RSe(n,e,t,r,i,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function ISe(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var z_=Symbol.for("FluidValue.get"),H_=Symbol.for("FluidValue.observers"),oA=n=>!!(n&&n[z_]),aA=n=>n&&n[z_]?n[z_]():n;function PSe(n,e){n.eventObserved?n.eventObserved(e):n(e)}function EP(n,e){const t=n[H_];t&&t.forEach(r=>{PSe(r,e)})}var kSe=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");OSe(this,n)}},OSe=(n,e)=>I$(n,z_,e);function R$(n,e){if(n[z_]){let t=n[H_];t||I$(n,H_,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function AP(n,e){const t=n[H_];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[H_]=null,n.observerRemoved&&n.observerRemoved(r,e)}}var I$=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Cb=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,DSe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pj=new RegExp(`(${Cb.source})(%|[a-z]+)`,"i"),NSe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,WS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,P$=n=>{const[e,t]=LSe(n);if(!e||W3())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&WS.test(t))return P$(t);if(t)return t}return n},LSe=n=>{const e=WS.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]},UM,BSe=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,k$=n=>{UM||(UM=vf?new RegExp(`(${Object.keys(vf).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>aA(s).replace(WS,P$).replace(DSe,Ij).replace(UM,Ij)),t=e.map(s=>s.match(Cb).map(Number)),i=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>V_({...n,output:s}));return s=>{var l;const o=!Pj.test(e[0])&&((l=e.find(u=>Pj.test(u)))==null?void 0:l.replace(Cb,""));let a=0;return e[0].replace(Cb,()=>`${i[a++](s)}${o||""}`).replace(NSe,BSe)}},O$="react-spring: ",D$=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${O$}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},FSe=D$(console.warn);function USe(){FSe(`${O$}The "interpolate" function is deprecated in v9 (use "to" instead)`)}D$(console.warn);function N$(n){return ui.str(n)&&(n[0]=="#"||/\d/.test(n)||!W3()&&WS.test(n)||n in(vf||{}))}var L$=W3()?W.useEffect:W.useLayoutEffect,jSe=()=>{const n=W.useRef(!1);return L$(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function VSe(){const n=W.useState()[1],e=jSe();return()=>{e.current&&n(Math.random())}}function zSe(n,e){const[t]=W.useState(()=>({inputs:e,result:n()})),r=W.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&HSe(e,s.inputs)||(s={inputs:e,result:n()}):s=t,W.useEffect(()=>{r.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function HSe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var GSe=n=>W.useEffect(n,qSe),qSe=[],G_=Symbol.for("Animated:node"),WSe=n=>!!n&&n[G_]===n,X3=n=>n&&n[G_],B$=(n,e)=>pSe(n,G_,e),Y3=n=>n&&n[G_]&&n[G_].getPayload(),F$=class{constructor(){B$(this,this)}getPayload(){return this.payload||[]}},$S=class extends F${constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,ui.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new $S(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return ui.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,ui.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},Q3=class extends $S{constructor(n){super(0),this._string=null,this._toString=V_({output:[n,n]})}static create(n){return new Q3(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(ui.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=V_({output:[this.getValue(),n]})),this._value=0,super.reset()}},lA={dependencies:null},Z3=class extends F${constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return wP(this.source,(t,r)=>{WSe(t)?e[r]=t.getValue(n):oA(t)?e[r]=aA(t):n||(e[r]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&Bc(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return wP(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){lA.dependencies&&oA(n)&&lA.dependencies.add(n);const e=Y3(n);e&&Bc(e,t=>this.add(t))}},U$=class extends Z3{constructor(n){super(n)}static create(n){return new U$(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,r)=>t.setValue(n[r])).some(Boolean):(super.setValue(n.map($Se)),!0)}};function $Se(n){return(N$(n)?Q3:$S).create(n)}function KSe(n){const e=X3(n);return e?e.constructor:ui.arr(n)?U$:N$(n)?Q3:$S}var kj=(n,e)=>{const t=!ui.fun(n)||n.prototype&&n.prototype.isReactComponent;return W.forwardRef((r,i)=>{const s=W.useRef(null),o=t&&W.useCallback(g=>{s.current=YSe(i,g)},[i]),[a,l]=XSe(r,e),u=VSe(),c=()=>{const g=s.current;if(t&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&u()},h=new JSe(c,l),f=W.useRef();L$(()=>(f.current=h,Bc(l,g=>R$(g,h)),()=>{f.current&&(Bc(f.current.deps,g=>AP(g,f.current)),$n.cancel(f.current.update))})),W.useEffect(c,[]),GSe(()=>()=>{const g=f.current;Bc(g.deps,x=>AP(x,g))});const p=e.getComponentProps(a.getValue());return W.createElement(n,{...p,ref:o})})},JSe=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&$n.write(this.update)}};function XSe(n,e){const t=new Set;return lA.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new Z3(n),lA.dependencies=null,[n,t]}function YSe(n,e){return n&&(ui.fun(n)?n(e):n.current=e),e}var Oj=Symbol.for("AnimatedComponent"),QSe=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new Z3(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:r},s=o=>{const a=Dj(o)||"Anonymous";return ui.str(o)?o=s[o]||(s[o]=kj(o,i)):o=o[Oj]||(o[Oj]=kj(o,i)),o.displayName=`Animated(${a})`,o};return wP(n,(o,a)=>{ui.arr(n)&&(a=Dj(o)),s[a]=s(o)}),{animated:s}},Dj=n=>ui.str(n)?n:n&&ui.str(n.displayName)?n.displayName:ui.fun(n)&&n.name||null,Nj=n=>n instanceof j$,ZSe=1,j$=class extends kSe{constructor(){super(...arguments),this.id=ZSe++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=X3(this);return n&&n.getValue()}to(...n){return Tv.to(this,n)}interpolate(...n){return USe(),Tv.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){EP(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||J3.sort(this),EP(this,{type:"priority",parent:this,priority:n})}},eD=({children:n,...e})=>{const t=W.useContext(uA),r=e.pause||!!t.pause,i=e.immediate||!!t.immediate;e=zSe(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=uA;return W.createElement(s,{value:e},n)},uA=eTe(eD,{});eD.Provider=uA.Provider;eD.Consumer=uA.Consumer;function eTe(n,e){return Object.assign(n,W.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var tTe=class extends j${constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=V_(...e);const t=this._get(),r=KSe(t);B$(this,r.create(t))}advance(n){const e=this._get(),t=this.get();mSe(e,t)||(X3(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Lj(this._active)&&jM(this)}_get(){const n=ui.arr(this.source)?this.source.map(aA):J1(aA(this.source));return this.calc(...n)}_start(){this.idle&&!Lj(this._active)&&(this.idle=!1,Bc(Y3(this),n=>{n.done=!1}),Tv.skipAnimation?($n.batchedUpdates(()=>this.advance()),jM(this)):J3.start(this))}_attach(){let n=1;Bc(J1(this.source),e=>{oA(e)&&R$(e,this),Nj(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){Bc(J1(this.source),n=>{oA(n)&&AP(n,this)}),this._active.clear(),jM(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=J1(this.source).reduce((e,t)=>Math.max(e,(Nj(t)?t.priority:0)+1),0))}};function nTe(n){return n.idle!==!1}function Lj(n){return!n.size||Array.from(n).every(nTe)}function jM(n){n.idle||(n.idle=!0,Bc(Y3(n),e=>{e.done=!0}),EP(n,{type:"idle",parent:n}))}Tv.assign({createStringInterpolator:k$,to:(n,e)=>new tTe(n,e)});var rTe=["primitive"].concat(Object.keys(YW).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));Tv.assign({createStringInterpolator:k$,colors:_Se,frameLoop:"demand"});VAe(()=>{$n.advance()});var iTe=QSe(rTe,{applyAnimatedValues:tp}),sTe=iTe.animated;const oTe=parseInt(_x.replace(/\D+/g,""));function Bj(n,e){if(e===Dq)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===ZE||e===i3){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===ZE)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function cA(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const yp="srgb",Fc="srgb-linear",Fj=3001,aTe=3e3;class tD extends Ys{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new fTe(t)}),this.register(function(t){return new dTe(t)}),this.register(function(t){return new bTe(t)}),this.register(function(t){return new ETe(t)}),this.register(function(t){return new ATe(t)}),this.register(function(t){return new mTe(t)}),this.register(function(t){return new gTe(t)}),this.register(function(t){return new vTe(t)}),this.register(function(t){return new yTe(t)}),this.register(function(t){return new hTe(t)}),this.register(function(t){return new _Te(t)}),this.register(function(t){return new pTe(t)}),this.register(function(t){return new wTe(t)}),this.register(function(t){return new xTe(t)}),this.register(function(t){return new uTe(t)}),this.register(function(t){return new STe(t)}),this.register(function(t){return new TTe(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=gf.extractUrlBase(e);o=gf.resolveURL(u,this.path)}else o=gf.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new fa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(cA(new Uint8Array(e.slice(0,4)))===V$){try{o[Ln.KHR_BINARY_GLTF]=new CTe(e)}catch(c){i&&i(c);return}s=JSON.parse(o[Ln.KHR_BINARY_GLTF].content)}else s=JSON.parse(cA(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new jTe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);c.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(c){case Ln.KHR_MATERIALS_UNLIT:o[c]=new cTe;break;case Ln.KHR_DRACO_MESH_COMPRESSION:o[c]=new MTe(s,this.dracoLoader);break;case Ln.KHR_TEXTURE_TRANSFORM:o[c]=new RTe;break;case Ln.KHR_MESH_QUANTIZATION:o[c]=new ITe;break;default:h.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function lTe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ln={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class uTe{constructor(e){this.parser=e,this.name=Ln.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new bt(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],Fc);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new P3(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new I3(c),u.distance=h;break;case"spot":u=new R3(c),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,wc(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class cTe{constructor(){this.name=Ln.KHR_MATERIALS_UNLIT}getMaterialType(){return oa}extendParams(e,t,r){const i=[];e.color=new bt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Fc),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,yp))}return Promise.all(i)}}class hTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class fTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ze(a,a)}return Promise.all(s)}}class dTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class pTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class mTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new bt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Fc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,yp)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class gTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class vTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new bt().setRGB(a[0],a[1],a[2],Fc),Promise.all(s)}}class yTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class _Te{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new bt().setRGB(a[0],a[1],a[2],Fc),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,yp)),Promise.all(s)}}class xTe{constructor(e){this.parser=e,this.name=Ln.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class wTe{constructor(e){this.parser=e,this.name=Ln.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:ja}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class bTe{constructor(e){this.parser=e,this.name=Ln.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ETe{constructor(e){this.parser=e,this.name=Ln.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class ATe{constructor(e){this.parser=e,this.name=Ln.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class STe{constructor(e){this.name=Ln.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,h=i.byteStride,f=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,h,f,i.mode,i.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(c*h);return o.decodeGltfBuffer(new Uint8Array(p),c,h,f,i.mode,i.filter),p})})}else return null}}class TTe{constructor(e){this.name=Ln.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Pa.TRIANGLES&&u.mode!==Pa.TRIANGLE_STRIP&&u.mode!==Pa.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),h=c.isGroup?c.children:[c],f=u[0].count,p=[];for(const g of h){const x=new Yt,_=new pe,v=new Ws,b=new pe(1,1,1),E=new f3(g.geometry,g.material,f);for(let S=0;S<f;S++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,S),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,S),l.SCALE&&b.fromBufferAttribute(l.SCALE,S),E.setMatrixAt(S,x.compose(_,v,b));for(const S in l)if(S==="_COLOR_0"){const C=l[S];E.instanceColor=new Wp(C.array,C.itemSize,C.normalized)}else S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&g.geometry.setAttribute(S,l[S]);Bn.prototype.copy.call(E,g),this.parser.assignFinalMaterial(E),p.push(E)}return c.isGroup?(c.clear(),c.add(...p),c):p[0]}))}}const V$="glTF",c0=12,Uj={JSON:1313821514,BIN:5130562};class CTe{constructor(e){this.name=Ln.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,c0);if(this.header={magic:cA(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==V$)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-c0,i=new DataView(e,c0);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===Uj.JSON){const l=new Uint8Array(e,c0+s,o);this.content=cA(l)}else if(a===Uj.BIN){const l=c0+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class MTe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ln.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const h=SP[c]||c.toLowerCase();a[h]=o[c]}for(const c in e.attributes){const h=SP[c]||c.toLowerCase();if(o[c]!==void 0){const f=r.accessors[e.attributes[c]],p=sv[f.componentType];u[h]=p.name,l[h]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(h,f){i.decodeDracoFile(c,function(p){for(const g in p.attributes){const x=p.attributes[g],_=l[g];_!==void 0&&(x.normalized=_)}h(p)},a,u,Fc,f)})})}}class RTe{constructor(){this.name=Ln.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ITe{constructor(){this.name=Ln.KHR_MESH_QUANTIZATION}}class z$ extends Qv{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-t,h=(r-t)/c,f=h*h,p=f*h,g=e*u,x=g-u,_=-2*p+3*f,v=p-f,b=1-_,E=v-f+h;for(let S=0;S!==a;S++){const C=o[x+S+a],D=o[x+S+l]*c,M=o[g+S+a],P=o[g+S]*c;s[S]=b*C+E*D+_*M+v*P}return s}}const PTe=new Ws;class kTe extends z${interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return PTe.fromArray(s).normalize().toArray(s),s}}const Pa={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},sv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},jj={9728:hs,9729:vi,9984:fS,9985:nv,9986:fp,9987:La},Vj={33071:sa,33648:yv,10497:If},VM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},SP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...oTe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Wh={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},OTe={CUBICSPLINE:void 0,LINEAR:wv,STEP:xv},zM={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function DTe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Px({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:bu})),n.DefaultMaterial}function Gd(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function wc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function NTe(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(i=!0),h.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(r){const f=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(f)}if(i){const f=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],f=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function LTe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function BTe(n){let e;const t=n.extensions&&n.extensions[Ln.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+HM(t.attributes):e=n.indices+":"+HM(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+HM(n.targets[r]);return e}function HM(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function TP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function FTe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const UTe=new Yt;class jTe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new lTe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new MW(this.options.manager):this.textureLoader=new LW(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Gd(s,a,i),wc(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ln.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(gf.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=VM[i.type],a=sv[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Yn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=VM[i.type],u=sv[i.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,f=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let x,_;if(p&&p!==h){const v=Math.floor(f/p),b="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let E=t.cache.get(b);E||(x=new u(a,v*p,i.count*p/c),E=new Sx(x,p/c),t.cache.add(b,E)),_=new Pf(E,l,f%p/c,g)}else a===null?x=new u(i.count*l):x=new u(a,f,i.count*l),_=new Yn(x,l,g);if(i.sparse!==void 0){const v=VM.SCALAR,b=sv[i.sparse.indices.componentType],E=i.sparse.indices.byteOffset||0,S=i.sparse.values.byteOffset||0,C=new b(o[1],E,i.sparse.count*v),D=new u(o[2],S,i.sparse.count*l);a!==null&&(_=new Yn(_.array.slice(),_.itemSize,_.normalized));for(let M=0,P=C.length;M<P;M++){const O=C[M];if(_.setX(O,D[M*l]),l>=2&&_.setY(O,D[M*l+1]),l>=3&&_.setZ(O,D[M*l+2]),l>=4&&_.setW(O,D[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return c.magFilter=jj[f.magFilter]||vi,c.minFilter=jj[f.minFilter]||La,c.wrapS=Vj[f.wrapS]||If,c.wrapT=Vj[f.wrapT]||If,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){u=!0;const f=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(f,p){let g=f;t.isImageBitmapLoader===!0&&(g=function(x){const _=new Br(x);_.needsUpdate=!0,f(_)}),t.load(gf.resolveURL(h,s.path),g,void 0,p)})}).then(function(h){return u===!0&&a.revokeObjectURL(l),wc(h,o),h.userData.mimeType=o.mimeType||FTe(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Ln.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Ln.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ln.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===Fj?yp:Fc),"colorSpace"in o?o.colorSpace=i:o.encoding=i===yp?Fj:aTe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new SS,Ji.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Xs,Ji.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Px}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Ln.KHR_MATERIALS_UNLIT]){const h=i[Ln.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),u.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new bt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const f=h.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],Fc),a.opacity=f[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",h.baseColorTexture,yp)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Sl);const c=s.alphaMode||zM.OPAQUE;if(c===zM.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===zM.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==oa&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ze(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&o!==oa&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==oa){const h=s.emissiveFactor;a.emissive=new bt().setRGB(h[0],h[1],h[2],Fc)}return s.emissiveTexture!==void 0&&o!==oa&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,yp)),Promise.all(u).then(function(){const h=new o(a);return s.name&&(h.name=s.name),wc(h,s),t.associations.set(h,{materials:e}),s.extensions&&Gd(i,h,s),h})}createUniqueName(e){const t=qn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[Ln.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return zj(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=BTe(u),h=i[c];if(h)o.push(h.promise);else{let f;u.extensions&&u.extensions[Ln.KHR_DRACO_MESH_COMPRESSION]?f=s(u):f=zj(new En,u,t),i[c]={primitive:u,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?DTe(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let p=0,g=c.length;p<g;p++){const x=c[p],_=o[p];let v;const b=u[p];if(_.mode===Pa.TRIANGLES||_.mode===Pa.TRIANGLE_STRIP||_.mode===Pa.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new h3(x,b):new yi(x,b),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===Pa.TRIANGLE_STRIP?v.geometry=Bj(v.geometry,i3):_.mode===Pa.TRIANGLE_FAN&&(v.geometry=Bj(v.geometry,ZE));else if(_.mode===Pa.LINES)v=new Ul(x,b);else if(_.mode===Pa.LINE_STRIP)v=new Jc(x,b);else if(_.mode===Pa.LINE_LOOP)v=new d3(x,b);else if(_.mode===Pa.POINTS)v=new p3(x,b);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&LTe(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),wc(v,s),_.extensions&&Gd(i,v,_),t.assignFinalMaterial(v),h.push(v)}for(let p=0,g=h.length;p<g;p++)t.associations.set(h[p],{meshes:e,primitives:p});if(h.length===1)return s.extensions&&Gd(i,h[0],s),h[0];const f=new Rc;s.extensions&&Gd(i,f,s),t.associations.set(f,{meshes:e});for(let p=0,g=h.length;p<g;p++)f.add(h[p]);return f})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Wi(qq.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new Zv(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),wc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const h=o[u];if(h){a.push(h);const f=new Yt;s!==null&&f.fromArray(s.array,u*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new Tx(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],c=[];for(let h=0,f=i.channels.length;h<f;h++){const p=i.channels[h],g=i.samplers[p.sampler],x=p.target,_=x.node,v=i.parameters!==void 0?i.parameters[g.input]:g.input,b=i.parameters!==void 0?i.parameters[g.output]:g.output;x.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",b)),u.push(g),c.push(x))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(h){const f=h[0],p=h[1],g=h[2],x=h[3],_=h[4],v=[];for(let b=0,E=f.length;b<E;b++){const S=f[b],C=p[b],D=g[b],M=x[b],P=_[b];if(S===void 0)continue;S.updateMatrix&&S.updateMatrix();const O=r._createAnimationTracks(S,C,D,M,P);if(O)for(let R=0;R<O.length;R++)v.push(O[R])}return new Av(s,void 0,v)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],h=u[1],f=u[2];f!==null&&c.traverse(function(p){p.isSkinnedMesh&&p.bind(f,UTe)});for(let p=0,g=h.length;p<g;p++)c.add(h[p]);return c})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new AS:u.length>1?c=new Rc:u.length===1?c=u[0]:c=new Bn,c!==u[0])for(let h=0,f=u.length;h<f;h++)c.add(u[h]);if(s.name&&(c.userData.name=s.name,c.name=o),wc(c,s),s.extensions&&Gd(r,c,s),s.matrix!==void 0){const h=new Yt;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new Rc;r.name&&(s.name=i.createUniqueName(r.name)),wc(s,r),r.extensions&&Gd(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,h=l.length;c<h;c++)s.add(l[c]);const u=c=>{const h=new Map;for(const[f,p]of i.associations)(f instanceof Ji||f instanceof Br)&&h.set(f,p);return c.traverse(f=>{const p=i.associations.get(f);p!=null&&h.set(f,p)}),h};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];Wh[s.path]===Wh.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let u;switch(Wh[s.path]){case Wh.weights:u=Kp;break;case Wh.rotation:u=Jp;break;case Wh.position:case Wh.scale:u=Xp;break;default:switch(r.itemSize){case 1:u=Kp;break;case 2:case 3:default:u=Xp;break}break}const c=i.interpolation!==void 0?OTe[i.interpolation]:wv,h=this._getArrayFromAccessor(r);for(let f=0,p=l.length;f<p;f++){const g=new u(l[f]+"."+Wh[s.path],t.array,h,c);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=TP(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof Jp?kTe:z$;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function VTe(n,e,t){const r=e.attributes,i=new $s;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new pe(l[0],l[1],l[2]),new pe(u[0],u[1],u[2])),a.normalized){const c=TP(sv[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new pe,l=new pe;for(let u=0,c=s.length;u<c;u++){const h=s[u];if(h.POSITION!==void 0){const f=t.json.accessors[h.POSITION],p=f.min,g=f.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),f.normalized){const x=TP(sv[f.componentType]);l.multiplyScalar(x)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new Ts;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function zj(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=SP[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return wc(n,e),VTe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?NTe(n,e.targets,t):n})}const GM=new WeakMap;class zTe extends Ys{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new fa(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(GM.has(e)){const l=GM.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),GM.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new En;e.index&&t.setIndex(new Yn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Yn(o,a))}return t}_loadLibrary(e,t){const r=new fa(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=HTe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function HTe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const h=c.draco,f=new h.Decoder,p=new h.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(h,f,p,u),x=g.attributes.map(_=>_.array.buffer);g.index&&x.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},x)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{h.destroy(p),h.destroy(f)}});break}};function t(o,a,l,u){const c=u.attributeIDs,h=u.attributeTypes;let f,p;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)f=new o.Mesh,p=a.DecodeBufferToMesh(l,f);else if(g===o.POINT_CLOUD)f=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const x={index:null,attributes:[]};for(const _ in c){const v=self[h[_]];let b,E;if(u.useUniqueIDs)E=c[_],b=a.GetAttributeByUniqueId(f,E);else{if(E=a.GetAttributeId(f,o[c[_]]),E===-1)continue;b=a.GetAttribute(f,E)}x.attributes.push(i(o,a,f,_,v,b))}return g===o.TRIANGULAR_MESH&&(x.index=r(o,a,f)),o.destroy(f),x}function r(o,a,l){const c=l.num_faces()*3,h=c*4,f=o._malloc(h);a.GetTrianglesUInt32Array(l,h,f);const p=new Uint32Array(o.HEAPF32.buffer,f,c).slice();return o._free(f),{array:p,itemSize:1}}function i(o,a,l,u,c,h){const f=h.num_components(),g=l.num_points()*f,x=g*c.BYTES_PER_ELEMENT,_=s(o,c),v=o._malloc(x);a.GetAttributeDataArrayForAllPoints(l,h,_,x,v);const b=new c(o.HEAPF32.buffer,v,g).slice();return o._free(v),{name:u,array:b,itemSize:f}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Y1;const qM=()=>{if(Y1)return Y1;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function a(h){const f=new Uint8Array(h.length);for(let g=0;g<h.length;++g){const x=h.charCodeAt(g);f[g]=x>96?x-71:x>64?x-65:x>47?x+4:x>46?63:62}let p=0;for(let g=0;g<h.length;++g)f[p++]=f[g]<60?r[f[g]]:(f[g]-60)*64+f[++g];return f.buffer.slice(0,p)}function l(h,f,p,g,x,_){const v=s.exports.sbrk,b=p+3&-4,E=v(b*g),S=v(x.length),C=new Uint8Array(s.exports.memory.buffer);C.set(x,S);const D=h(E,p,g,S,x.length);if(D===0&&_&&_(E,b,g),f.set(C.subarray(E,E+p*g)),v(E-v(0)),D!==0)throw new Error(`Malformed buffer data: ${D}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Y1={ready:o,supported:!0,decodeVertexBuffer(h,f,p,g,x){l(s.exports.meshopt_decodeVertexBuffer,h,f,p,g,s.exports[u[x]])},decodeIndexBuffer(h,f,p,g){l(s.exports.meshopt_decodeIndexBuffer,h,f,p,g)},decodeIndexSequence(h,f,p,g){l(s.exports.meshopt_decodeIndexSequence,h,f,p,g)},decodeGltfBuffer(h,f,p,g,x,_){l(s.exports[c[x]],h,f,p,g,s.exports[u[_]])}},Y1};let Q1=null,H$="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function G$(n=!0,e=!0,t){return r=>{t&&t(r),n&&(Q1||(Q1=new zTe),Q1.setDecoderPath(typeof n=="string"?n:H$),r.setDRACOLoader(Q1)),e&&r.setMeshoptDecoder(typeof qM=="function"?qM():qM)}}const Zc=(n,e,t,r)=>Ox(tD,n,G$(e,t,r));Zc.preload=(n,e,t,r)=>Ox.preload(tD,n,G$(e,t,r));Zc.clear=n=>Ox.clear(tD,n);Zc.setDecoderPath=n=>{H$=n};function q$(n,e){const t=W.useRef(),[r]=W.useState(()=>e?e instanceof Bn?{current:e}:e:t),[i]=W.useState(()=>new VW(void 0));W.useLayoutEffect(()=>{e&&(r.current=e instanceof Bn?e:e.current),i._root=r.current});const s=W.useRef({}),o=W.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))},configurable:!0})),{ref:r,clips:n,actions:a,names:n.map(l=>l.name),mixer:i}},[n]);return HS((a,l)=>i.update(l)),W.useEffect(()=>{const a=r.current;return()=>{s.current={},i.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[n]),o}var WM={exports:{}},$M,Hj;function GTe(){if(Hj)return $M;Hj=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return $M=n,$M}var KM,Gj;function qTe(){if(Gj)return KM;Gj=1;var n=GTe();function e(){}function t(){}return t.resetWarningCache=e,KM=function(){function r(o,a,l,u,c,h){if(h!==n){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},KM}var qj;function KS(){return qj||(qj=1,WM.exports=qTe()()),WM.exports}var WTe=KS();const yr=Ll(WTe),$Te="/assets/mightbe-C8v5wAnG.glb",KTe=({isRotating:n,setIsRotating:e,setCurrentStage:t,currentFocusPoint:r,...i})=>{const s=W.useRef(),{gl:o,viewport:a}=HAe(),{nodes:l,materials:u}=Zc($Te),c=W.useRef(0),h=W.useRef(0),f=.95,p=C=>{C.stopPropagation(),C.preventDefault(),e(!0);const D=C.touches?C.touches[0].clientX:C.clientX;c.current=D},g=C=>{C.stopPropagation(),C.preventDefault(),e(!1)},x=C=>{if(C.stopPropagation(),C.preventDefault(),n){const D=C.touches?C.touches[0].clientX:C.clientX,M=(D-c.current)/a.width;s.current.rotation.y+=M*.01*Math.PI,c.current=D,h.current=M*.01*Math.PI}},_=C=>{C.key==="ArrowLeft"?(n||e(!0),s.current.rotation.y+=.005*Math.PI,h.current=.007):C.key==="ArrowRight"&&(n||e(!0),s.current.rotation.y-=.005*Math.PI,h.current=-.007)},v=C=>{(C.key==="ArrowLeft"||C.key==="ArrowRight")&&e(!1)},b=C=>{C.stopPropagation(),C.preventDefault(),e(!0);const D=C.touches?C.touches[0].clientX:C.clientX;c.current=D},E=C=>{C.stopPropagation(),C.preventDefault(),e(!1)},S=C=>{if(C.stopPropagation(),C.preventDefault(),n){const D=C.touches?C.touches[0].clientX:C.clientX,M=(D-c.current)/a.width;s.current.rotation.y+=M*.01*Math.PI,c.current=D,h.current=M*.01*Math.PI}};return W.useEffect(()=>{const C=o.domElement;return C.addEventListener("pointerdown",p),C.addEventListener("pointerup",g),C.addEventListener("pointermove",x),window.addEventListener("keydown",_),window.addEventListener("keyup",v),C.addEventListener("touchstart",b),C.addEventListener("touchend",E),C.addEventListener("touchmove",S),()=>{C.removeEventListener("pointerdown",p),C.removeEventListener("pointerup",g),C.removeEventListener("pointermove",x),window.removeEventListener("keydown",_),window.removeEventListener("keyup",v),C.removeEventListener("touchstart",b),C.removeEventListener("touchend",E),C.removeEventListener("touchmove",S)}},[o,p,g,x]),HS(()=>{if(!n)h.current*=f,Math.abs(h.current)<.001&&(h.current=0),s.current.rotation.y+=h.current;else{const D=(s.current.rotation.y%(2*Math.PI)+2*Math.PI)%(2*Math.PI);switch(!0){case(D>=5.93||D<=.35):t(3);break;case(D>=1.6&&D<=3):t(2);break;case(D>=4.25&&D<=4.75):t(1);break;case(D>=3.2&&D<=2.2):t(6);break;case(D>=5&&D<=5.93):t(4);break;case(D>=.36&&D<=1.164):t(5);break;default:t(null)}}}),L.jsx(sTe.group,{...i,ref:s,children:L.jsx("group",{scale:.01,children:L.jsx("group",{scale:100,children:L.jsx("group",{rotation:[-Math.PI/2,0,0],scale:.008,children:L.jsxs("group",{rotation:[Math.PI/2,0,0],children:[L.jsx("mesh",{geometry:l.Archinteriors8_01_292_003_Esmalte_Preto_001_0001.geometry,material:u.Esmalte_Preto_001,position:[-123.493,1.133,64.664],rotation:[-Math.PI/2,0,-2.988],scale:100}),L.jsxs("group",{position:[83.984,227.115,272.869],rotation:[-Math.PI/2,0,-Math.PI],scale:109.963,children:[L.jsx("mesh",{geometry:l.books_005_books_003_0001.geometry,material:u.books_003}),L.jsx("mesh",{geometry:l.books_005_books_paper_002_0001.geometry,material:u.books_paper_002})]}),L.jsxs("group",{position:[108.26,44.492,-116.527],rotation:[-Math.PI/2,0,0],scale:[4.659,3.09,3.015],children:[L.jsx("mesh",{geometry:l.Box323536_001_Cabinet_color_001_0001.geometry,material:u.Cabinet_color_001}),L.jsx("mesh",{geometry:l.Box323536_001_Cabinet_Handle_001_0001.geometry,material:u.Cabinet_Handle_001})]}),L.jsxs("group",{position:[-39.701,109.763,134.386],rotation:[-Math.PI/2,0,0],scale:7.178,children:[L.jsx("mesh",{geometry:l.Circle_001_PC1Material_008_0001.geometry,material:u.PC1Material_008}),L.jsx("mesh",{geometry:l.Circle_001_PC1Material_015_0001.geometry,material:u.PC1Material_015}),L.jsx("mesh",{geometry:l.Circle_001_PC1Material_016_0001.geometry,material:u.PC1Material_016}),L.jsx("mesh",{geometry:l.Circle_001_PC1PenBlackpart_001_0001.geometry,material:u.PC1PenBlackpart_001})]}),L.jsxs("group",{position:[6.5,109.763,-135.082],rotation:[-Math.PI/2,0,0],scale:7.178,children:[L.jsx("mesh",{geometry:l.Circle_002_PC1Material_008_0001.geometry,material:u.PC1Material_008}),L.jsx("mesh",{geometry:l.Circle_002_PC1Material_015_0001.geometry,material:u.PC1Material_015}),L.jsx("mesh",{geometry:l.Circle_002_PC1PenBlackpart_001_0001.geometry,material:u.PC1PenBlackpart_001})]}),L.jsx("mesh",{geometry:l.Cube__0001.geometry,material:u.Cube__0,rotation:[-Math.PI/2,0,0],scale:100}),L.jsx("mesh",{geometry:l.low_poly_001_PC2_CUP_0001.geometry,material:u.PC2_CUP,position:[-96.934,104.672,-179.34],rotation:[Math.PI,-1.218,Math.PI],scale:104.361}),L.jsx("mesh",{geometry:l.low_poly_013_Green1_0001.geometry,material:u.Green1,position:[89.963,21.688,0],rotation:[Math.PI/2,0,0],scale:100}),L.jsx("mesh",{geometry:l.low_poly_014_Black5_0001.geometry,material:u.PC1WireInGlas,position:[928.261,144.487,-287.716],rotation:[Math.PI/2,0,0],scale:100}),L.jsx("mesh",{geometry:l.low_poly_018_PC2_CUP_0001.geometry,material:u.PC2_CUP,position:[-96.934,104.672,-9.247],rotation:[Math.PI,-1.218,Math.PI],scale:104.361}),L.jsx("mesh",{geometry:l.low_poly_025_Blue3_0001.geometry,material:u.Blue3,position:[89.963,21.688,0],rotation:[Math.PI/2,0,0],scale:100}),L.jsx("mesh",{geometry:l.Mirror_Chrome_001_0001.geometry,material:u.Chrome_001,position:[114.094,229.585,423.474],rotation:[0,1.571,0],scale:[88.69,71.932,71.932]}),L.jsxs("group",{position:[-53.651,132.925,46.362],rotation:[-Math.PI,.004,-Math.PI],scale:4.887,children:[L.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Back_Panel_0001.geometry,material:u.PC_1Back_Panel}),L.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Stand_0001.geometry,material:u.PC_1Stand}),L.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Wallpaper_0001.geometry,material:u.PC_1Wallpaper})]}),L.jsx("mesh",{geometry:l.Monitor_27__Curved_003_PC_1_Keyboard_0001.geometry,material:u.PC_1_Keyboard,position:[-100.191,98.17,38.896],rotation:[-Math.PI,.004,-Math.PI],scale:4.887}),L.jsx("mesh",{geometry:l.Monitor_27__Curved_004_PC1MOUSE_0001.geometry,material:u.PC1MOUSE,position:[-98.322,98.079,66.16],rotation:[-Math.PI,.004,-Math.PI],scale:4.887}),L.jsx("mesh",{geometry:l.Plane_Material_003_0001.geometry,material:u.Material_003,position:[1.104,94.98,-60.764],rotation:[-Math.PI/2,0,0],scale:[129.712,201.896,100]}),L.jsx("mesh",{geometry:l.Plane_002_White_0001.geometry,material:u.White,rotation:[Math.PI,0,0],scale:[264.514,195.858,100]}),L.jsxs("group",{position:[87.241,97.398,7.543],rotation:[-Math.PI/2,0,1.834],scale:1.237,children:[L.jsx("mesh",{geometry:l.R_Mouse_00_001_PC2_BODY_0001.geometry,material:u.PC2_BODY}),L.jsx("mesh",{geometry:l.R_Mouse_00_001_PC2_SCREEN_0001.geometry,material:u.PC2_SCREEN})]}),L.jsx("mesh",{geometry:l.R_Mouse_00_002_PC2_MOUSEPAD_0001.geometry,material:u.PC2_MOUSEPAD,position:[92.88,98.081,42.961],rotation:[-Math.PI/2,0,1.834],scale:1.237}),L.jsx("mesh",{geometry:l.R_Mouse_00_003_PC2_KEYBOARD_0001.geometry,material:u.PC2_KEYBOARD,position:[94.34,98.17,59.888],rotation:[-Math.PI/2,0,1.834],scale:1.237}),L.jsx("mesh",{geometry:l.R_Mouse_00_004_PC2_MOUSE_0001.geometry,material:u.PC2_MOUSE,position:[92.88,98.081,42.961],rotation:[-Math.PI/2,0,1.834],scale:1.237}),L.jsxs("group",{position:[165.531,135.211,385.731],rotation:[0,1.571,0],scale:43.618,children:[L.jsx("mesh",{geometry:l.Rectangle013_001_Marble_0001.geometry,material:u.Marble}),L.jsx("mesh",{geometry:l.Rectangle013_001_Material_020_0001.geometry,material:u.Material_020})]}),L.jsxs("group",{position:[56.094,110.061,-259.265],rotation:[0,1.571,0],scale:1.702,children:[L.jsx("mesh",{geometry:l.surface_SURFACE_2_KEYBOARD_0001.geometry,material:u.SURFACE_2_KEYBOARD}),L.jsx("mesh",{geometry:l.surface_SURFACE_2_SCREEN_0001.geometry,material:u.SURFACE_2_SCREEN})]}),L.jsxs("group",{position:[56.094,110.061,-259.265],rotation:[0,1.571,0],scale:1.702,children:[L.jsx("mesh",{geometry:l.surface_001_SURFACE_1_KEYBOARD_0001.geometry,material:u.PC1WireInGlas}),L.jsx("mesh",{geometry:l.surface_001_SURFACE_1_SCREEN_0001.geometry,material:u.SURFACE_1_SCREEN})]}),L.jsxs("group",{position:[-91.47,95.896,-232.847],rotation:[-1.596,.245,-1.468],scale:41.664,children:[L.jsx("mesh",{geometry:l.tela_LAP_1_BLACK_FRAME_0001.geometry,material:u.LAP_1_BLACK_FRAME}),L.jsx("mesh",{geometry:l.tela_LAP_1_BODY_0001.geometry,material:u.LAP_1_BODY}),L.jsx("mesh",{geometry:l.tela_LAP_1_KEYBOARD_0001.geometry,material:u.LAP_1_KEYBOARD}),L.jsx("mesh",{geometry:l.tela_LAP_1SCREEN_0001.geometry,material:u.LAP_1SCREEN})]})]})})})})})},JTe="/assets/sky-B0A1kvoP.glb",XTe=({isRotating:n})=>{const e=Zc(JTe),t=W.useRef();return HS((r,i)=>{n&&(t.current.rotation.y+=.15*i)}),L.jsx("mesh",{ref:t,children:L.jsx("primitive",{object:e.scene})})},YTe="/assets/drone-CoH1xefA.glb",QTe=({planePosition:n,planeScale:e,isRotating:t,rotation:r})=>{const i=W.useRef(),{scene:s,animations:o}=Zc(YTe);return HS(a=>{i.current.position.y=Math.sin(a.clock.getElapsedTime())*.2+2,i.current.position.x>a.camera.position.x+10?i.current.position.y=Math.PI:i.current.position.x<a.camera.position.x-10&&(i.current.position.y=0),i.current,r.y==0?(i.current.position.x-=.01,i.current.position.z-=1):(i.current.position.x+=.01,i.current.position.z-=.01)}),L.jsx("mesh",{position:n,scale:e,rotation:r,ref:i,children:L.jsx("primitive",{object:s})})},ZTe="/assets/robot_idle_animated-BLRBSC0I.glb",eCe=({isRotating:n,robotScale:e,robotPosition:t,...r})=>{const i=Qt.useRef(),{scene:s,animations:o}=Zc(ZTe),{actions:a}=q$(o,i);return W.useEffect(()=>{n&&a&&a["Skelett|SkelettAction"]&&a["Skelett|SkelettAction"].play()},[a,n]),L.jsx("mesh",{position:t,scale:e,rotation:[0,5,0],children:L.jsx("primitive",{object:s})})},JM=["Electronics Engineer","Computer Engineer","Full Stack Developer","ML Enthusiast","Computer Vision Enthusiast","AI Engineer","Photographer","Senior Lecturer"],h0=({heading:n,linkText:e,linkUrl:t})=>L.jsx("div",{className:"flex justify-center mt-20",children:L.jsxs("div",{className:`
          sm:text-sm text-center py-2 px-2
          text-white mx-5
          bg-blue-500 rounded-lg shadow-lg transform transition-transform duration-300 ease-in-out
          hover:scale-105 hover:shadow-2xl absolute bottom-2
        `,children:[L.jsx("h3",{className:"mb-4",children:n}),L.jsx("a",{href:t,target:"_blank",className:`
            inline-block bg-gradient-to-r from-white to-blue-500 text-blue-700 font-semibold py-2 px-6 rounded-lg
            shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-2xl
            hover:from-blue-500 hover:to-blue-700 hover:text-white mt-4
          `,children:e})]})}),tCe=({currentStage:n})=>{const[e,t]=W.useState(""),[r,i]=W.useState(!1),[s,o]=W.useState(0),[a,l]=W.useState(!1),u=150,c=100,h=1e3;W.useEffect(()=>{const x=()=>{t(r?v=>v.slice(0,v.length-1):v=>JM[s].slice(0,v.length+1))},_=setTimeout(()=>{x()},r?c:u);return e===JM[s]&&!r&&setTimeout(()=>{i(!0)},h),e===""&&r&&(i(!1),o(v=>(v+1)%JM.length)),()=>clearTimeout(_)},[e,r,s]);const f=()=>{l(!0)},p=()=>{l(!1)},g={1:L.jsx("div",{className:"flex justify-center w-full sm:w-[300px] md:w-[200px] mt-20 sm:h-[200px]",onClick:()=>f(),children:L.jsxs("h1",{className:`
            sm:text-sm text-base text-center py-2 px-2
            text-white mx-5
            bg-blue-500 rounded-lg shadow-lg transform transition-transform duration-300 ease-in-out
            hover:scale-105 hover:shadow-2xl absolute bottom-1 left-1/2 transform -translate-x-1/2 cursor-pointer
          `,children:["Hi. I am"," ",L.jsx("span",{className:"font-semibold text-gray-100",children:"Sahaj Shakya"}),L.jsx("br",{}),"I am a ",L.jsx("span",{className:"font-semibold",children:e}),L.jsx("p",{className:"text-center text-white",children:"Bachelors in Electronics and Communication Engineering"}),L.jsx("p",{className:"text-center text-white",children:"Masters in Computer Engineering"})]})}),2:L.jsx(h0,{heading:"My academics",linkText:"Learn More about my academics",linkUrl:"/academics"}),3:L.jsx(h0,{heading:"My Journey",linkText:"Learn More about my journey",linkUrl:"/journey"}),4:L.jsx(h0,{heading:"Done Multiple Projects throughout the year",linkText:"Learn More about my Projects",linkUrl:"/projects"}),5:L.jsx(h0,{heading:"I am available for work",linkText:"Click here to Contact Me",linkUrl:"/contact"}),5:L.jsx(h0,{heading:"My Achievements",linkText:"Click here to see my Achievements",linkUrl:"/achievements"})};return L.jsxs("div",{children:[g[n]||L.jsx("h1",{children:"Stage not found!"}),a&&L.jsx(mf,{title:"Know Me",onClose:p,fullWidth:!0,children:L.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 bg-gradient-to-r from-gray-900 to-black rounded-xl shadow-lg",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("img",{src:Z7,alt:"Sahaj Shakya",className:"w-16 h-16 md:w-24 md:h-24 rounded-full object-cover"}),L.jsxs("div",{className:"ml-4 text-white",children:[L.jsx("div",{className:"font-semibold text-lg md:text-xl",children:"Sahaj Shakya"}),L.jsxs("div",{className:"flex items-center mt-1 text-sm md:text-base",children:[L.jsx(K7,{className:"mr-2 text-blue-500"}),"saz.shakya@gmail.com"]}),L.jsxs("div",{className:"flex items-center mt-1 text-sm md:text-base",children:[L.jsx(J7,{className:"mr-2 text-green-400"}),"977-9841194900"]})]})]}),L.jsxs("div",{className:"flex items-center justify-center space-x-6 text-white mt-6 md:mt-0",children:[L.jsx("a",{href:"https://github.com/sahajshakya",target:"_blank",rel:"github",className:"hover:scale-110 transition-transform",children:L.jsx(G7,{size:28})}),L.jsx("a",{href:"https://www.linkedin.com/in/sahaj-shakya-98253710a/",target:"_blank",rel:"LinkedIn",className:"hover:scale-110 transition-transform text-blue-400",children:L.jsx(W7,{size:28})}),L.jsxs("a",{href:"https://www.researchgate.net/profile/Sahaj-Shakya",target:"_blank",rel:"research gate",className:"hover:scale-110 transition-transform text-green-500",children:["R",L.jsx("span",{className:"text-lg font-bold",children:"G"})]}),L.jsx("a",{href:"https://www.youtube.com/@KA1SKZ",target:"_blank",rel:"youtube",className:"hover:scale-110 transition-transform text-red-500",children:L.jsx($7,{size:28})}),L.jsx("a",{href:"https://www.instagram.com/kai_loves_to_click/",target:"_blank",rel:"insta",className:"hover:scale-110 transition-transform text-pink-500",children:L.jsx(q7,{size:28})})]})]})})]})},Wj=()=>{const[n,e]=W.useState(!1),[t,r]=W.useState(1),i=()=>{let p,g;return window.innerWidth<480?(p=[40,40,40],g=[30,-10,-340]):window.innerWidth>=480&&window.innerWidth<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[3,3,3],g=[1.2,-3,-13]),[p,g]},s=()=>{let p,g;const x=window.innerWidth;return x<480?(p=[20,20,20],g=[-60,-60,-220]):x>=480&&x<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[.5,.5,.5],g=[-6,3,.7]),[p,g]},o=()=>{let p,g;const x=window.innerWidth;return x<480?(p=[20,20,20],g=[50,-10,-200]):x>=480&&x<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[1,1,1],g=[0,-2.5,-1.2]),[p,g]},[a,l]=i(),[u,c]=s(),[h,f]=o();return L.jsxs("section",{className:"w-full h-screen flex relative",children:[L.jsx("div",{className:"absolute top-28 left-0 right-0 z-10 flex items-center justify-center h-[150px]",children:t&&L.jsx(tCe,{currentStage:t})}),L.jsx(_$,{className:`w-full h-screen bg-transparent ${n?"cursor-grabbing":"cursor-grab"}`,camera:{near:.1,far:1e3},children:L.jsxs(W.Suspense,{fallback:L.jsx(L.Fragment,{}),children:[" ",L.jsx("directionalLight",{position:[1,1,1],intensity:2}),L.jsx("ambientLight",{intensity:2}),L.jsx("hemisphereLight",{skyColor:"#b1e1ff",groundColor:"#000000",intensity:2}),L.jsx(QTe,{planeScale:u,planePosition:c,isRotating:n,rotation:[0,0,0]}),L.jsx(XTe,{isRotating:n}),L.jsx(KTe,{position:l,scale:a,rotation:[.1,4.7077,0],isRotating:n,setIsRotating:e,setCurrentStage:r}),L.jsx(eCe,{robotScale:h,robotPosition:f,isRotating:n,rotation:[0,0,0]})]})})]})};function CP(n,e){return CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},CP(n,e)}function Lx(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,CP(n,e)}var Bx=(function(){function n(){this.listeners=[]}var e=n.prototype;return e.subscribe=function(r){var i=this,s=r||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(o){return o!==s}),i.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},n})(),hA=typeof window>"u";function Vs(){}function nCe(n,e){return typeof n=="function"?n(e):n}function MP(n){return typeof n=="number"&&n>=0&&n!==1/0}function fA(n){return Array.isArray(n)?n:[n]}function W$(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Mb(n,e,t){return JS(n)?typeof e=="function"?er({},t,{queryKey:n,queryFn:e}):er({},e,{queryKey:n}):n}function Qh(n,e,t){return JS(n)?[er({},e,{queryKey:n}),t]:[n||{},e]}function rCe(n,e){if(n===!0&&e===!0||n==null&&e==null)return"all";if(n===!1&&e===!1)return"none";var t=n??!e;return t?"active":"inactive"}function $j(n,e){var t=n.active,r=n.exact,i=n.fetching,s=n.inactive,o=n.predicate,a=n.queryKey,l=n.stale;if(JS(a)){if(r){if(e.queryHash!==nD(a,e.options))return!1}else if(!dA(e.queryKey,a))return!1}var u=rCe(t,s);if(u==="none")return!1;if(u!=="all"){var c=e.isActive();if(u==="active"&&!c||u==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i=="boolean"&&e.isFetching()!==i||o&&!o(e))}function Kj(n,e){var t=n.exact,r=n.fetching,i=n.predicate,s=n.mutationKey;if(JS(s)){if(!e.options.mutationKey)return!1;if(t){if(_p(e.options.mutationKey)!==_p(s))return!1}else if(!dA(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function nD(n,e){var t=(e==null?void 0:e.queryKeyHashFn)||_p;return t(n)}function _p(n){var e=fA(n);return iCe(e)}function iCe(n){return JSON.stringify(n,function(e,t){return RP(t)?Object.keys(t).sort().reduce(function(r,i){return r[i]=t[i],r},{}):t})}function dA(n,e){return $$(fA(n),fA(e))}function $$(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!$$(n[t],e[t])}):!1}function pA(n,e){if(n===e)return n;var t=Array.isArray(n)&&Array.isArray(e);if(t||RP(n)&&RP(e)){for(var r=t?n.length:Object.keys(n).length,i=t?e:Object.keys(e),s=i.length,o=t?[]:{},a=0,l=0;l<s;l++){var u=t?l:i[l];o[u]=pA(n[u],e[u]),o[u]===n[u]&&a++}return r===s&&a===r?n:o}return e}function sCe(n,e){if(n&&!e||e&&!n)return!1;for(var t in n)if(n[t]!==e[t])return!1;return!0}function RP(n){if(!Jj(n))return!1;var e=n.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!Jj(t)||!t.hasOwnProperty("isPrototypeOf"))}function Jj(n){return Object.prototype.toString.call(n)==="[object Object]"}function JS(n){return typeof n=="string"||Array.isArray(n)}function oCe(n){return new Promise(function(e){setTimeout(e,n)})}function Xj(n){Promise.resolve().then(n).catch(function(e){return setTimeout(function(){throw e})})}function K$(){if(typeof AbortController=="function")return new AbortController}var aCe=(function(n){Lx(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(i){var s;if(!hA&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setFocused(a):o.onFocus()})},t.setFocused=function(i){this.focused=i,i&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(i){i()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e})(Bx),o_=new aCe,lCe=(function(n){Lx(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(i){var s;if(!hA&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setOnline(a):o.onOnline()})},t.setOnline=function(i){this.online=i,i&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(i){i()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e})(Bx),Rb=new lCe;function uCe(n){return Math.min(1e3*Math.pow(2,n),3e4)}function mA(n){return typeof(n==null?void 0:n.cancel)=="function"}var J$=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function Ib(n){return n instanceof J$}var X$=function(e){var t=this,r=!1,i,s,o,a;this.abort=e.abort,this.cancel=function(f){return i==null?void 0:i(f)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(f,p){o=f,a=p});var l=function(p){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(p),s==null||s(),o(p))},u=function(p){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(p),s==null||s(),a(p))},c=function(){return new Promise(function(p){s=p,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){s=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},h=function f(){if(!t.isResolved){var p;try{p=e.fn()}catch(g){p=Promise.reject(g)}i=function(x){if(!t.isResolved&&(u(new J$(x)),t.abort==null||t.abort(),mA(p)))try{p.cancel()}catch{}},t.isTransportCancelable=mA(p),Promise.resolve(p).then(l).catch(function(g){var x,_;if(!t.isResolved){var v=(x=e.retry)!=null?x:3,b=(_=e.retryDelay)!=null?_:uCe,E=typeof b=="function"?b(t.failureCount,g):b,S=v===!0||typeof v=="number"&&t.failureCount<v||typeof v=="function"&&v(t.failureCount,g);if(r||!S){u(g);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,g),oCe(E).then(function(){if(!o_.isFocused()||!Rb.isOnline())return c()}).then(function(){r?u(g):f()})}})}};h()},cCe=(function(){function n(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=n.prototype;return e.batch=function(r){var i;this.transactions++;try{i=r()}finally{this.transactions--,this.transactions||this.flush()}return i},e.schedule=function(r){var i=this;this.transactions?this.queue.push(r):Xj(function(){i.notifyFn(r)})},e.batchCalls=function(r){var i=this;return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];i.schedule(function(){r.apply(void 0,o)})}},e.flush=function(){var r=this,i=this.queue;this.queue=[],i.length&&Xj(function(){r.batchNotifyFn(function(){i.forEach(function(s){r.notifyFn(s)})})})},e.setNotifyFunction=function(r){this.notifyFn=r},e.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},n})(),ai=new cCe,Y$=console;function gA(){return Y$}function hCe(n){Y$=n}var fCe=(function(){function n(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=n.prototype;return e.setOptions=function(r){var i;this.options=er({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:300*1e3)},e.setDefaultOptions=function(r){this.defaultOptions=r},e.scheduleGc=function(){var r=this;this.clearGcTimeout(),MP(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(r,i){var s,o,a=this.state.data,l=nCe(r,a);return(s=(o=this.options).isDataEqual)!=null&&s.call(o,a,l)?l=a:this.options.structuralSharing!==!1&&(l=pA(a,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),l},e.setState=function(r,i){this.dispatch({type:"setState",state:r,setStateOptions:i})},e.cancel=function(r){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(r),s?s.then(Vs).catch(Vs):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},e.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!W$(this.state.dataUpdatedAt,r)},e.onFocus=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.onOnline=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},e.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(i){return i!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(r,i){var s=this,o,a,l;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var c=this.observers.find(function(b){return b.options.queryFn});c&&this.setOptions(c.options)}var h=fA(this.queryKey),f=K$(),p={queryKey:h,pageParam:void 0,meta:this.meta};Object.defineProperty(p,"signal",{enumerable:!0,get:function(){if(f)return s.abortSignalConsumed=!0,f.signal}});var g=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(p)):Promise.reject("Missing queryFn")},x={fetchOptions:i,options:this.options,queryKey:h,state:this.state,fetchFn:g,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var _;(_=this.options.behavior)==null||_.onFetch(x)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=x.fetchOptions)==null?void 0:a.meta)){var v;this.dispatch({type:"fetch",meta:(v=x.fetchOptions)==null?void 0:v.meta})}return this.retryer=new X$({fn:x.fetchFn,abort:f==null||(l=f.abort)==null?void 0:l.bind(f),onSuccess:function(E){s.setData(E),s.cache.config.onSuccess==null||s.cache.config.onSuccess(E,s),s.cacheTime===0&&s.optionalRemove()},onError:function(E){Ib(E)&&E.silent||s.dispatch({type:"error",error:E}),Ib(E)||(s.cache.config.onError==null||s.cache.config.onError(E,s),gA().error(E)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(r){var i=this;this.state=this.reducer(this.state,r),ai.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(r)}),i.cache.notify({query:i,type:"queryUpdated",action:r})})},e.getDefaultState=function(r){var i=typeof r.initialData=="function"?r.initialData():r.initialData,s=typeof r.initialData<"u",o=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,a=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:a?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},e.reducer=function(r,i){var s,o;switch(i.type){case"failed":return er({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return er({},r,{isPaused:!0});case"continue":return er({},r,{isPaused:!1});case"fetch":return er({},r,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return er({},r,{data:i.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=i.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=i.error;return Ib(a)&&a.revert&&this.revertState?er({},this.revertState):er({},r,{error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return er({},r,{isInvalidated:!0});case"setState":return er({},r,i.state);default:return r}},n})(),dCe=(function(n){Lx(e,n);function e(r){var i;return i=n.call(this)||this,i.config=r||{},i.queries=[],i.queriesMap={},i}var t=e.prototype;return t.build=function(i,s,o){var a,l=s.queryKey,u=(a=s.queryHash)!=null?a:nD(l,s),c=this.get(u);return c||(c=new fCe({cache:this,queryKey:l,queryHash:u,options:i.defaultQueryOptions(s),state:o,defaultOptions:i.getQueryDefaults(l),meta:s.meta}),this.add(c)),c},t.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},t.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(o){return o!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},t.clear=function(){var i=this;ai.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},t.get=function(i){return this.queriesMap[i]},t.getAll=function(){return this.queries},t.find=function(i,s){var o=Qh(i,s),a=o[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(l){return $j(a,l)})},t.findAll=function(i,s){var o=Qh(i,s),a=o[0];return Object.keys(a).length>0?this.queries.filter(function(l){return $j(a,l)}):this.queries},t.notify=function(i){var s=this;ai.batch(function(){s.listeners.forEach(function(o){o(i)})})},t.onFocus=function(){var i=this;ai.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},t.onOnline=function(){var i=this;ai.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},e})(Bx),pCe=(function(){function n(t){this.options=er({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||mCe(),this.meta=t.meta}var e=n.prototype;return e.setState=function(r){this.dispatch({type:"setState",state:r})},e.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},e.removeObserver=function(r){this.observers=this.observers.filter(function(i){return i!==r})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Vs).catch(Vs)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var r=this,i,s=this.state.status==="loading",o=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(a){a!==r.state.context&&r.dispatch({type:"loading",context:a,variables:r.state.variables})})),o.then(function(){return r.executeMutation()}).then(function(a){i=a,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(i,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(i,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(i,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:i}),i}).catch(function(a){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(a,r.state.variables,r.state.context,r),gA().error(a),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,a,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:a}),a})})},e.executeMutation=function(){var r=this,i;return this.retryer=new X$({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(r){var i=this;this.state=gCe(this.state,r),ai.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(r)}),i.mutationCache.notify(i)})},n})();function mCe(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function gCe(n,e){switch(e.type){case"failed":return er({},n,{failureCount:n.failureCount+1});case"pause":return er({},n,{isPaused:!0});case"continue":return er({},n,{isPaused:!1});case"loading":return er({},n,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return er({},n,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return er({},n,{data:void 0,error:e.error,failureCount:n.failureCount+1,isPaused:!1,status:"error"});case"setState":return er({},n,e.state);default:return n}}var vCe=(function(n){Lx(e,n);function e(r){var i;return i=n.call(this)||this,i.config=r||{},i.mutations=[],i.mutationId=0,i}var t=e.prototype;return t.build=function(i,s,o){var a=new pCe({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:o,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(a),a},t.add=function(i){this.mutations.push(i),this.notify(i)},t.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},t.clear=function(){var i=this;ai.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},t.getAll=function(){return this.mutations},t.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return Kj(i,s)})},t.findAll=function(i){return this.mutations.filter(function(s){return Kj(i,s)})},t.notify=function(i){var s=this;ai.batch(function(){s.listeners.forEach(function(o){o(i)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return ai.batch(function(){return i.reduce(function(s,o){return s.then(function(){return o.continue().catch(Vs)})},Promise.resolve())})},e})(Bx);function yCe(){return{onFetch:function(e){e.fetchFn=function(){var t,r,i,s,o,a,l=(t=e.fetchOptions)==null||(r=t.meta)==null?void 0:r.refetchPage,u=(i=e.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,c=u==null?void 0:u.pageParam,h=(u==null?void 0:u.direction)==="forward",f=(u==null?void 0:u.direction)==="backward",p=((o=e.state.data)==null?void 0:o.pages)||[],g=((a=e.state.data)==null?void 0:a.pageParams)||[],x=K$(),_=x==null?void 0:x.signal,v=g,b=!1,E=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},S=function(J,Z,oe,ae){return v=ae?[Z].concat(v):[].concat(v,[Z]),ae?[oe].concat(J):[].concat(J,[oe])},C=function(J,Z,oe,ae){if(b)return Promise.reject("Cancelled");if(typeof oe>"u"&&!Z&&J.length)return Promise.resolve(J);var Q={queryKey:e.queryKey,signal:_,pageParam:oe,meta:e.meta},ee=E(Q),Y=Promise.resolve(ee).then(function(X){return S(J,oe,X,ae)});if(mA(ee)){var V=Y;V.cancel=ee.cancel}return Y},D;if(!p.length)D=C([]);else if(h){var M=typeof c<"u",P=M?c:Yj(e.options,p);D=C(p,M,P)}else if(f){var O=typeof c<"u",R=O?c:_Ce(e.options,p);D=C(p,O,R,!0)}else(function(){v=[];var F=typeof e.options.getNextPageParam>"u",J=l&&p[0]?l(p[0],0,p):!0;D=J?C([],F,g[0]):Promise.resolve(S([],g[0],p[0]));for(var Z=function(Q){D=D.then(function(ee){var Y=l&&p[Q]?l(p[Q],Q,p):!0;if(Y){var V=F?g[Q]:Yj(e.options,ee);return C(ee,F,V)}return Promise.resolve(S(ee,g[Q],p[Q]))})},oe=1;oe<p.length;oe++)Z(oe)})();var N=D.then(function(F){return{pages:F,pageParams:v}}),U=N;return U.cancel=function(){b=!0,x==null||x.abort(),mA(D)&&D.cancel()},N}}}}function Yj(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function _Ce(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}var xCe=(function(){function n(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new dCe,this.mutationCache=t.mutationCache||new vCe,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=n.prototype;return e.mount=function(){var r=this;this.unsubscribeFocus=o_.subscribe(function(){o_.isFocused()&&Rb.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=Rb.subscribe(function(){o_.isFocused()&&Rb.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},e.unmount=function(){var r,i;(r=this.unsubscribeFocus)==null||r.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},e.isFetching=function(r,i){var s=Qh(r,i),o=s[0];return o.fetching=!0,this.queryCache.findAll(o).length},e.isMutating=function(r){return this.mutationCache.findAll(er({},r,{fetching:!0})).length},e.getQueryData=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state.data},e.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(i){var s=i.queryKey,o=i.state,a=o.data;return[s,a]})},e.setQueryData=function(r,i,s){var o=Mb(r),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,s)},e.setQueriesData=function(r,i,s){var o=this;return ai.batch(function(){return o.getQueryCache().findAll(r).map(function(a){var l=a.queryKey;return[l,o.setQueryData(l,i,s)]})})},e.getQueryState=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state},e.removeQueries=function(r,i){var s=Qh(r,i),o=s[0],a=this.queryCache;ai.batch(function(){a.findAll(o).forEach(function(l){a.remove(l)})})},e.resetQueries=function(r,i,s){var o=this,a=Qh(r,i,s),l=a[0],u=a[1],c=this.queryCache,h=er({},l,{active:!0});return ai.batch(function(){return c.findAll(l).forEach(function(f){f.reset()}),o.refetchQueries(h,u)})},e.cancelQueries=function(r,i,s){var o=this,a=Qh(r,i,s),l=a[0],u=a[1],c=u===void 0?{}:u;typeof c.revert>"u"&&(c.revert=!0);var h=ai.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.cancel(c)})});return Promise.all(h).then(Vs).catch(Vs)},e.invalidateQueries=function(r,i,s){var o,a,l,u=this,c=Qh(r,i,s),h=c[0],f=c[1],p=er({},h,{active:(o=(a=h.refetchActive)!=null?a:h.active)!=null?o:!0,inactive:(l=h.refetchInactive)!=null?l:!1});return ai.batch(function(){return u.queryCache.findAll(h).forEach(function(g){g.invalidate()}),u.refetchQueries(p,f)})},e.refetchQueries=function(r,i,s){var o=this,a=Qh(r,i,s),l=a[0],u=a[1],c=ai.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.fetch(void 0,er({},u,{meta:{refetchPage:l==null?void 0:l.refetchPage}}))})}),h=Promise.all(c).then(Vs);return u!=null&&u.throwOnError||(h=h.catch(Vs)),h},e.fetchQuery=function(r,i,s){var o=Mb(r,i,s),a=this.defaultQueryOptions(o);typeof a.retry>"u"&&(a.retry=!1);var l=this.queryCache.build(this,a);return l.isStaleByTime(a.staleTime)?l.fetch(a):Promise.resolve(l.state.data)},e.prefetchQuery=function(r,i,s){return this.fetchQuery(r,i,s).then(Vs).catch(Vs)},e.fetchInfiniteQuery=function(r,i,s){var o=Mb(r,i,s);return o.behavior=yCe(),this.fetchQuery(o)},e.prefetchInfiniteQuery=function(r,i,s){return this.fetchInfiniteQuery(r,i,s).then(Vs).catch(Vs)},e.cancelMutations=function(){var r=this,i=ai.batch(function(){return r.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(Vs).catch(Vs)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(r){this.defaultOptions=r},e.setQueryDefaults=function(r,i){var s=this.queryDefaults.find(function(o){return _p(r)===_p(o.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:r,defaultOptions:i})},e.getQueryDefaults=function(r){var i;return r?(i=this.queryDefaults.find(function(s){return dA(r,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},e.setMutationDefaults=function(r,i){var s=this.mutationDefaults.find(function(o){return _p(r)===_p(o.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:r,defaultOptions:i})},e.getMutationDefaults=function(r){var i;return r?(i=this.mutationDefaults.find(function(s){return dA(r,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},e.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var i=er({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=nD(i.queryKey,i)),i},e.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},e.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:er({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},n})(),wCe=(function(n){Lx(e,n);function e(r,i){var s;return s=n.call(this)||this,s.client=r,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var t=e.prototype;return t.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},t.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),Qj(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},t.onUnsubscribe=function(){this.listeners.length||this.destroy()},t.shouldFetchOnReconnect=function(){return IP(this.currentQuery,this.options,this.options.refetchOnReconnect)},t.shouldFetchOnWindowFocus=function(){return IP(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},t.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},t.setOptions=function(i,s){var o=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var l=this.hasListeners();l&&Zj(this.currentQuery,a,this.options,o)&&this.executeFetch(),this.updateResult(s),l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var u=this.computeRefetchInterval();l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)},t.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,s);return this.createResult(o,s)},t.getCurrentResult=function(){return this.currentResult},t.trackResult=function(i,s){var o=this,a={},l=function(c){o.trackedProps.includes(c)||o.trackedProps.push(c)};return Object.keys(i).forEach(function(u){Object.defineProperty(a,u,{configurable:!1,enumerable:!0,get:function(){return l(u),i[u]}})}),(s.useErrorBoundary||s.suspense)&&l("error"),a},t.getNextResult=function(i){var s=this;return new Promise(function(o,a){var l=s.subscribe(function(u){u.isFetching||(l(),u.isError&&(i!=null&&i.throwOnError)?a(u.error):o(u))})})},t.getCurrentQuery=function(){return this.currentQuery},t.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},t.refetch=function(i){return this.fetch(er({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},t.fetchOptimistic=function(i){var s=this,o=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,o);return a.fetch().then(function(){return s.createResult(a,o)})},t.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},t.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(Vs)),s},t.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(hA||this.currentResult.isStale||!MP(this.options.staleTime))){var s=W$(this.currentResult.dataUpdatedAt,this.options.staleTime),o=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},o)}},t.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},t.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(hA||this.options.enabled===!1||!MP(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||o_.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},t.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},t.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},t.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},t.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},t.createResult=function(i,s){var o=this.currentQuery,a=this.options,l=this.currentResult,u=this.currentResultState,c=this.currentResultOptions,h=i!==o,f=h?i.state:this.currentQueryInitialState,p=h?this.currentResult:this.previousQueryResult,g=i.state,x=g.dataUpdatedAt,_=g.error,v=g.errorUpdatedAt,b=g.isFetching,E=g.status,S=!1,C=!1,D;if(s.optimisticResults){var M=this.hasListeners(),P=!M&&Qj(i,s),O=M&&Zj(i,o,s,a);(P||O)&&(b=!0,x||(E="loading"))}if(s.keepPreviousData&&!g.dataUpdateCount&&(p!=null&&p.isSuccess)&&E!=="error")D=p.data,x=p.dataUpdatedAt,E=p.status,S=!0;else if(s.select&&typeof g.data<"u")if(l&&g.data===(u==null?void 0:u.data)&&s.select===this.selectFn)D=this.selectResult;else try{this.selectFn=s.select,D=s.select(g.data),s.structuralSharing!==!1&&(D=pA(l==null?void 0:l.data,D)),this.selectResult=D,this.selectError=null}catch(U){gA().error(U),this.selectError=U}else D=g.data;if(typeof s.placeholderData<"u"&&typeof D>"u"&&(E==="loading"||E==="idle")){var R;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))R=l.data;else if(R=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof R<"u")try{R=s.select(R),s.structuralSharing!==!1&&(R=pA(l==null?void 0:l.data,R)),this.selectError=null}catch(U){gA().error(U),this.selectError=U}typeof R<"u"&&(E="success",D=R,C=!0)}this.selectError&&(_=this.selectError,D=this.selectResult,v=Date.now(),E="error");var N={status:E,isLoading:E==="loading",isSuccess:E==="success",isError:E==="error",isIdle:E==="idle",data:D,dataUpdatedAt:x,error:_,errorUpdatedAt:v,failureCount:g.fetchFailureCount,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>f.dataUpdateCount||g.errorUpdateCount>f.errorUpdateCount,isFetching:b,isRefetching:b&&E!=="loading",isLoadingError:E==="error"&&g.dataUpdatedAt===0,isPlaceholderData:C,isPreviousData:S,isRefetchError:E==="error"&&g.dataUpdatedAt!==0,isStale:rD(i,s),refetch:this.refetch,remove:this.remove};return N},t.shouldNotifyListeners=function(i,s){if(!s)return!0;var o=this.options,a=o.notifyOnChangeProps,l=o.notifyOnChangePropsExclusions;if(!a&&!l||a==="tracked"&&!this.trackedProps.length)return!0;var u=a==="tracked"?this.trackedProps:a;return Object.keys(i).some(function(c){var h=c,f=i[h]!==s[h],p=u==null?void 0:u.some(function(x){return x===c}),g=l==null?void 0:l.some(function(x){return x===c});return f&&!g&&(!u||p)})},t.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!sCe(this.currentResult,s)){var o={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(o.listeners=!0),this.notify(er({},o,i))}},t.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},t.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!Ib(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},t.notify=function(i){var s=this;ai.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(o){o(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},e})(Bx);function bCe(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function Qj(n,e){return bCe(n,e)||n.state.dataUpdatedAt>0&&IP(n,e,e.refetchOnMount)}function IP(n,e,t){if(e.enabled!==!1){var r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&rD(n,e)}return!1}function Zj(n,e,t,r){return t.enabled!==!1&&(n!==e||r.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&rD(n,t)}function rD(n,e){return n.isStaleByTime(e.staleTime)}var ECe=YX.unstable_batchedUpdates;ai.setBatchNotifyFunction(ECe);var ACe=console;hCe(ACe);var e5=Qt.createContext(void 0),Q$=Qt.createContext(!1);function Z$(n){return n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=e5),window.ReactQueryClientContext):e5}var eK=function(){var e=Qt.useContext(Z$(Qt.useContext(Q$)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},SCe=function(e){var t=e.client,r=e.contextSharing,i=r===void 0?!1:r,s=e.children;Qt.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var o=Z$(i);return Qt.createElement(Q$.Provider,{value:i},Qt.createElement(o.Provider,{value:t},s))};function TCe(){var n=!1;return{clearReset:function(){n=!1},reset:function(){n=!0},isReset:function(){return n}}}var CCe=Qt.createContext(TCe()),MCe=function(){return Qt.useContext(CCe)};function RCe(n,e,t){return typeof e=="function"?e.apply(void 0,t):typeof e=="boolean"?e:!!n}function ICe(n,e){var t=Qt.useRef(!1),r=Qt.useState(0),i=r[1],s=eK(),o=MCe(),a=s.defaultQueryObserverOptions(n);a.optimisticResults=!0,a.onError&&(a.onError=ai.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=ai.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=ai.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(o.isReset()||(a.retryOnMount=!1));var l=Qt.useState(function(){return new e(s,a)}),u=l[0],c=u.getOptimisticResult(a);if(Qt.useEffect(function(){t.current=!0,o.clearReset();var h=u.subscribe(ai.batchCalls(function(){t.current&&i(function(f){return f+1})}));return u.updateResult(),function(){t.current=!1,h()}},[o,u]),Qt.useEffect(function(){u.setOptions(a,{listeners:!1})},[a,u]),a.suspense&&c.isLoading)throw u.fetchOptimistic(a).then(function(h){var f=h.data;a.onSuccess==null||a.onSuccess(f),a.onSettled==null||a.onSettled(f,null)}).catch(function(h){o.clearReset(),a.onError==null||a.onError(h),a.onSettled==null||a.onSettled(void 0,h)});if(c.isError&&!o.isReset()&&!c.isFetching&&RCe(a.suspense,a.useErrorBoundary,[c.error,u.getCurrentQuery()]))throw c.error;return a.notifyOnChangeProps==="tracked"&&(c=u.trackResult(c,a)),c}function PCe(n,e,t){var r=Mb(n,e,t);return ICe(r,wCe)}const kCe=async n=>{const e=qr(sn,"activeUsers",n),t=await Oa(e);if(t.exists())return t.data();throw new Error("User not found")},OCe=n=>(eK(),PCe(["activeUser",n],()=>kCe(n),{enabled:!!n,retry:!1})),vl=({element:n,roleProps:e})=>{var p;const r=(p=ex().currentUser)==null?void 0:p.uid,{data:i,isLoading:s,isError:o,error:a}=OCe(r);if(s)return L.jsx("div",{children:"Loading..."});if(o)return L.jsxs("div",{children:["Error: ",a==null?void 0:a.message]});const l=localStorage.getItem("authToken"),u=localStorage.getItem("tokenExpiry"),c=new Date().getTime(),h=i==null?void 0:i.token,f=i==null?void 0:i.role;return!l||!u||c>parseInt(u)?(localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user"),L.jsx(Sw,{to:"/login"})):l?h!==l?L.jsx(Sw,{to:"/unauthorized"}):f!==e?L.jsx(Sw,{to:"/unauthorized"}):L.jsx(L.Fragment,{children:n}):L.jsx(Sw,{to:"/login"})},DCe=()=>{const{user:n}=uS();return console.log(n),L.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:L.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md w-full",children:[L.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Unauthorized Access"}),L.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"You do not have permission to view this page."}),L.jsxs("p",{className:"mt-6 text-gray-500",children:["Please ",L.jsx(ua,{to:"/login",className:"text-blue-500 hover:underline",children:"log in"})," with the appropriate credentials."]})]})})},NCe=({children:n})=>{const e=Of();return W.useEffect(()=>{const t=localStorage.getItem("authToken"),r=localStorage.getItem("role"),i=localStorage.getItem("tokenExpiry"),s=new Date().getTime();t&&i&&s<parseInt(i)&&(r==="admin"||r==="doctor"?console.log("Yay"):r==="patient"||r==="employee"?console.log("Yarayar"):e("/login"))},[e]),L.jsx(L.Fragment,{children:n})},LCe=({role:n})=>L.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[L.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-4",children:[n.charAt(0).toUpperCase()+n.slice(1)," Dashboard"]}),L.jsxs("p",{className:"mt-4 text-base sm:text-lg",children:["Welcome to your ",n," dashboard!"]})]}),BCe=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(!1),[i,s]=W.useState({academics:!1,journey:!1,achievements:!1,projects:!1}),o=h=>{e(h)},a=()=>{r(!t)},l=h=>{s(f=>({...Object.keys(f).reduce((p,g)=>(p[g]=g===h?!f[g]:!1,p),{})}))},u=[{name:"academics",label:"Academics"},{name:"journey",label:"Journey"},{name:"projects",label:"Projects"},{name:"achievements",label:"Achievements"}],c=h=>L.jsxs("ul",{className:"ml-4 mt-2 space-y-2",children:[L.jsx("li",{children:L.jsx(ua,{to:`/auth/${h}/create`,className:"block",children:"Create"})}),L.jsx("li",{children:L.jsx(ua,{to:`/auth/${h}/view`,className:"block",children:"View"})})]});return L.jsxs(L.Fragment,{children:[L.jsx(eq,{}),L.jsxs("div",{className:"flex h-screen",children:[L.jsxs("div",{className:`transition-all duration-300 ${t?"w-20 bg-black text-white":"w-64 bg-white text-black"} p-4`,children:[L.jsx("div",{className:"flex justify-between items-center mb-6",children:L.jsx("button",{onClick:a,className:"text-black",children:t?L.jsx(Bve,{className:"text-2xl text-white"}):L.jsx(X7,{className:"text-2xl text-black"})})}),L.jsx("ul",{className:"space-y-6",children:u.map(({name:h,label:f})=>L.jsxs("li",{className:`cursor-pointer ${n===h?"bg-gray-600":"hover:bg-gray-300"} p-3 rounded-lg`,onClick:()=>o(h),children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx(ua,{to:`/auth/${h}/view`,className:`block ${t?"text-center":""}`,children:t?h==="academics"?L.jsx(Gve,{className:"text-xl text-white"}):h==="journey"?L.jsx(Vve,{className:"text-xl text-white"}):h==="achievements"?L.jsx(zve,{className:"text-xl text-white"}):h==="projects"?L.jsx(Hve,{className:"text-xl text-white"}):null:f}),!t&&L.jsx("button",{onClick:p=>{p.stopPropagation(),l(h)},className:"text-blue-600",children:i[h]?L.jsx(Uve,{}):L.jsx(Fve,{})})]}),!t&&i[h]&&c(h)]},h))})]}),L.jsx("div",{className:"flex-1 bg-gray-100 p-6",children:L.jsx(b9,{})})]})]})};class Fx{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const FCe=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},As={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:FCe()},iD=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},UCe=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=iD(n);As.publicKey=t.publicKey,As.blockHeadless=t.blockHeadless,As.storageProvider=t.storageProvider,As.blockList=t.blockList,As.limitRate=t.limitRate,As.origin=t.origin||e},tK=async(n,e,t={})=>{const r=await fetch(As.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),s=new Fx(r.status,i);if(r.ok)return s;throw s},nK=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},jCe=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},rK=n=>n.webdriver||!n.languages||n.languages.length===0,iK=()=>new Fx(451,"Unavailable For Headless Browser"),VCe=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},zCe=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},HCe=(n,e)=>n instanceof FormData?n.get(e):n[e],sK=(n,e)=>{if(zCe(n))return!1;VCe(n.list,n.watchVariable);const t=HCe(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},oK=()=>new Fx(403,"Forbidden"),GCe=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},qCe=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},aK=async(n,e,t)=>{if(!e.throttle||!t)return!1;GCe(e.throttle,e.id);const r=e.id||n;return await qCe(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},lK=()=>new Fx(429,"Too Many Requests"),WCe=async(n,e,t,r)=>{const i=iD(r),s=i.publicKey||As.publicKey,o=i.blockHeadless||As.blockHeadless,a=i.storageProvider||As.storageProvider,l={...As.blockList,...i.blockList},u={...As.limitRate,...i.limitRate};return o&&rK(navigator)?Promise.reject(iK()):(nK(s,n,e),jCe(t),t&&sK(l,t)?Promise.reject(oK()):await aK(location.pathname,u,a)?Promise.reject(lK()):tK("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},$Ce=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},KCe=n=>typeof n=="string"?document.querySelector(n):n,JCe=async(n,e,t,r)=>{const i=iD(r),s=i.publicKey||As.publicKey,o=i.blockHeadless||As.blockHeadless,a=As.storageProvider||i.storageProvider,l={...As.blockList,...i.blockList},u={...As.limitRate,...i.limitRate};if(o&&rK(navigator))return Promise.reject(iK());const c=KCe(t);nK(s,n,e),$Ce(c);const h=new FormData(c);return sK(l,h)?Promise.reject(oK()):await aK(location.pathname,u,a)?Promise.reject(lK()):(h.append("lib_version","4.4.1"),h.append("service_id",n),h.append("template_id",e),h.append("user_id",s),tK("/api/v1.0/email/send-form",h))},XCe={init:UCe,send:WCe,sendForm:JCe,EmailJSResponseStatus:Fx},uK="/assets/fox-W5Giziuq.glb";function YCe({currentAnimation:n,...e}){const t=W.useRef(),{nodes:r,materials:i,animations:s}=Zc(uK),{actions:o}=q$(s,t);return W.useEffect(()=>{Object.values(o).forEach(a=>a.stop()),o[n]&&o[n].play()},[o,n]),L.jsx("group",{ref:t,...e,dispose:null,children:L.jsxs("group",{name:"Sketchfab_Scene",children:[L.jsx("primitive",{object:r.GLTF_created_0_rootJoint}),L.jsx("skinnedMesh",{name:"Object_7",geometry:r.Object_7.geometry,material:i.PaletteMaterial001,skeleton:r.Object_7.skeleton}),L.jsx("skinnedMesh",{name:"Object_8",geometry:r.Object_8.geometry,material:i.PaletteMaterial001,skeleton:r.Object_8.skeleton}),L.jsx("skinnedMesh",{name:"Object_9",geometry:r.Object_9.geometry,material:i.PaletteMaterial001,skeleton:r.Object_9.skeleton}),L.jsx("skinnedMesh",{name:"Object_10",geometry:r.Object_10.geometry,material:i.PaletteMaterial001,skeleton:r.Object_10.skeleton}),L.jsx("skinnedMesh",{name:"Object_11",geometry:r.Object_11.geometry,material:i.PaletteMaterial001,skeleton:r.Object_11.skeleton})]})})}Zc.preload(uK);const cK=()=>{const[n,e]=W.useState(!1),{enqueueSnackbar:t}=Cu(),[r,i]=W.useState("idle"),s=Wv({initialValues:{name:"",email:"",message:""},validationSchema:um({name:Oi().required("Name is required"),email:Oi().email("Invalid email address").required("Email is required"),message:Oi().required("Message is required")}),onSubmit:(o,{resetForm:a})=>{e(!0),XCe.send("service_mjz144k","template_0jgqmyl",{from_name:o.name,to_name:"Sahaj Shakya",from_email:o.email,to_email:"saz.shakya@gmail.com",message:o.message},"t27Scz_UOK7NvN5pz").then(()=>{e(!1),t("Thank you for your message ",{variant:"success"}),a()},l=>{e(!1),console.error(l),t("I didn't receive your message ",{variant:"error"})})}});return L.jsx("div",{className:"min-h-screen px-4 py-8 bg-gradient-to-br from-gray-100 to-gray-200 sm:px-6 lg:px-8",children:L.jsx("div",{className:"mx-auto max-w-7xl",children:L.jsxs("div",{className:"flex flex-col items-center justify-center gap-8 lg:flex-row",children:[L.jsxs(Xt.div,{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg sm:p-8 lg:max-w-lg",initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5},children:[L.jsx("h2",{className:"mb-2 text-2xl font-bold text-center text-gray-800 sm:text-3xl",children:"Get in Touch"}),L.jsx("p",{className:"mb-6 text-sm text-center text-gray-600 sm:text-base",children:"Have a question or want to work together?"}),L.jsxs("form",{onSubmit:s.handleSubmit,className:"w-full space-y-4",children:[L.jsx(tr,{name:"name",type:"text",label:"Your Name",value:s.values.name,onChange:s.handleChange,onBlur:s.handleBlur,error:s.errors.name,touched:s.touched.name??!1}),L.jsx(tr,{name:"email",type:"email",label:"Your Email",value:s.values.email,onChange:s.handleChange,onBlur:s.handleBlur,error:s.errors.email,touched:s.touched.email??!1}),L.jsxs("div",{className:"relative",children:[L.jsx(Xt.textarea,{name:"message",rows:"5",className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 resize-none ${s.touched.message&&s.errors.message?"border-red-500":"border-gray-300"}`,value:s.values.message,onChange:s.handleChange,onBlur:s.handleBlur,placeholder:"Your Message",required:!0}),s.touched.message&&s.errors.message&&L.jsx("p",{className:"mt-2 text-xs text-red-500",children:s.errors.message})]}),L.jsx(Xt.button,{className:`w-full text-white p-3 sm:p-4 rounded-lg transition-all duration-300 font-semibold text-base sm:text-lg ${s.isSubmitting||!s.isValid?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 shadow-md hover:shadow-lg"}`,type:"submit",disabled:s.isSubmitting||!s.isValid,whileHover:{scale:s.isValid?1.02:1},whileTap:{scale:s.isValid?.98:1},children:n?"Sending...":"Send Message"})]})]}),L.jsx(Xt.div,{className:"w-full lg:w-1/2 h-[300px] sm:h-[400px] lg:h-[500px] max-w-md lg:max-w-none",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:L.jsxs(_$,{camera:{position:[0,0,5],fov:75,near:.1,far:1e3},children:[L.jsx("directionalLight",{position:[0,0,1],intensity:2.5}),L.jsx("ambientLight",{intensity:1}),L.jsx("pointLight",{position:[5,10,0],intensity:2}),L.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:2}),L.jsx(W.Suspense,{fallback:L.jsx(V7,{}),children:L.jsx(YCe,{currentAnimation:r,position:[.5,.35,0],rotation:[12.629,-.6,0],scale:[.5,.5,.5]})})]})})]})})})};var XM,t5;function QCe(){if(t5)return XM;t5=1;function n(){this.__data__=[],this.size=0}return XM=n,XM}var YM,n5;function hK(){if(n5)return YM;n5=1;function n(e,t){return e===t||e!==e&&t!==t}return YM=n,YM}var QM,r5;function XS(){if(r5)return QM;r5=1;var n=hK();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return QM=e,QM}var ZM,i5;function ZCe(){if(i5)return ZM;i5=1;var n=XS(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,o=n(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return ZM=r,ZM}var eR,s5;function eMe(){if(s5)return eR;s5=1;var n=XS();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return eR=e,eR}var tR,o5;function tMe(){if(o5)return tR;o5=1;var n=XS();function e(t){return n(this.__data__,t)>-1}return tR=e,tR}var nR,a5;function nMe(){if(a5)return nR;a5=1;var n=XS();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return nR=e,nR}var rR,l5;function YS(){if(l5)return rR;l5=1;var n=QCe(),e=ZCe(),t=eMe(),r=tMe(),i=nMe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,rR=s,rR}var iR,u5;function rMe(){if(u5)return iR;u5=1;var n=YS();function e(){this.__data__=new n,this.size=0}return iR=e,iR}var sR,c5;function iMe(){if(c5)return sR;c5=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return sR=n,sR}var oR,h5;function sMe(){if(h5)return oR;h5=1;function n(e){return this.__data__.get(e)}return oR=n,oR}var aR,f5;function oMe(){if(f5)return aR;f5=1;function n(e){return this.__data__.has(e)}return aR=n,aR}var lR,d5;function fK(){if(d5)return lR;d5=1;var n=typeof of=="object"&&of&&of.Object===Object&&of;return lR=n,lR}var uR,p5;function eh(){if(p5)return uR;p5=1;var n=fK(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return uR=t,uR}var cR,m5;function sD(){if(m5)return cR;m5=1;var n=eh(),e=n.Symbol;return cR=e,cR}var hR,g5;function aMe(){if(g5)return hR;g5=1;var n=sD(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(o){var a=t.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=r.call(o);return u&&(a?o[i]=l:delete o[i]),c}return hR=s,hR}var fR,v5;function lMe(){if(v5)return fR;v5=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return fR=t,fR}var dR,y5;function QS(){if(y5)return dR;y5=1;var n=sD(),e=aMe(),t=lMe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):t(a)}return dR=o,dR}var pR,_5;function dK(){if(_5)return pR;_5=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return pR=n,pR}var mR,x5;function pK(){if(x5)return mR;x5=1;var n=QS(),e=dK(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var l=n(a);return l==r||l==i||l==t||l==s}return mR=o,mR}var gR,w5;function uMe(){if(w5)return gR;w5=1;var n=eh(),e=n["__core-js_shared__"];return gR=e,gR}var vR,b5;function cMe(){if(b5)return vR;b5=1;var n=uMe(),e=(function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function t(r){return!!e&&e in r}return vR=t,vR}var yR,E5;function mK(){if(E5)return yR;E5=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return yR=t,yR}var _R,A5;function hMe(){if(A5)return _R;A5=1;var n=pK(),e=cMe(),t=dK(),r=mK(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!t(f)||e(f))return!1;var p=n(f)?c:s;return p.test(r(f))}return _R=h,_R}var xR,S5;function fMe(){if(S5)return xR;S5=1;function n(e,t){return e==null?void 0:e[t]}return xR=n,xR}var wR,T5;function ty(){if(T5)return wR;T5=1;var n=hMe(),e=fMe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return wR=t,wR}var bR,C5;function oD(){if(C5)return bR;C5=1;var n=ty(),e=eh(),t=n(e,"Map");return bR=t,bR}var ER,M5;function ZS(){if(M5)return ER;M5=1;var n=ty(),e=n(Object,"create");return ER=e,ER}var AR,R5;function dMe(){if(R5)return AR;R5=1;var n=ZS();function e(){this.__data__=n?n(null):{},this.size=0}return AR=e,AR}var SR,I5;function pMe(){if(I5)return SR;I5=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return SR=n,SR}var TR,P5;function mMe(){if(P5)return TR;P5=1;var n=ZS(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var o=this.__data__;if(n){var a=o[s];return a===e?void 0:a}return r.call(o,s)?o[s]:void 0}return TR=i,TR}var CR,k5;function gMe(){if(k5)return CR;k5=1;var n=ZS(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return CR=r,CR}var MR,O5;function vMe(){if(O5)return MR;O5=1;var n=ZS(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return MR=t,MR}var RR,D5;function yMe(){if(D5)return RR;D5=1;var n=dMe(),e=pMe(),t=mMe(),r=gMe(),i=vMe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,RR=s,RR}var IR,N5;function _Me(){if(N5)return IR;N5=1;var n=yMe(),e=YS(),t=oD();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return IR=r,IR}var PR,L5;function xMe(){if(L5)return PR;L5=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return PR=n,PR}var kR,B5;function eT(){if(B5)return kR;B5=1;var n=xMe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return kR=e,kR}var OR,F5;function wMe(){if(F5)return OR;F5=1;var n=eT();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return OR=e,OR}var DR,U5;function bMe(){if(U5)return DR;U5=1;var n=eT();function e(t){return n(this,t).get(t)}return DR=e,DR}var NR,j5;function EMe(){if(j5)return NR;j5=1;var n=eT();function e(t){return n(this,t).has(t)}return NR=e,NR}var LR,V5;function AMe(){if(V5)return LR;V5=1;var n=eT();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return LR=e,LR}var BR,z5;function gK(){if(z5)return BR;z5=1;var n=_Me(),e=wMe(),t=bMe(),r=EMe(),i=AMe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,BR=s,BR}var FR,H5;function SMe(){if(H5)return FR;H5=1;var n=YS(),e=oD(),t=gK(),r=200;function i(s,o){var a=this.__data__;if(a instanceof n){var l=a.__data__;if(!e||l.length<r-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(s,o),this.size=a.size,this}return FR=i,FR}var UR,G5;function TMe(){if(G5)return UR;G5=1;var n=YS(),e=rMe(),t=iMe(),r=sMe(),i=oMe(),s=SMe();function o(a){var l=this.__data__=new n(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,UR=o,UR}var jR,q5;function CMe(){if(q5)return jR;q5=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return jR=e,jR}var VR,W5;function MMe(){if(W5)return VR;W5=1;function n(e){return this.__data__.has(e)}return VR=n,VR}var zR,$5;function RMe(){if($5)return zR;$5=1;var n=gK(),e=CMe(),t=MMe();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new n;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,zR=r,zR}var HR,K5;function IMe(){if(K5)return HR;K5=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return HR=n,HR}var GR,J5;function PMe(){if(J5)return GR;J5=1;function n(e,t){return e.has(t)}return GR=n,GR}var qR,X5;function vK(){if(X5)return qR;X5=1;var n=RMe(),e=IMe(),t=PMe(),r=1,i=2;function s(o,a,l,u,c,h){var f=l&r,p=o.length,g=a.length;if(p!=g&&!(f&&g>p))return!1;var x=h.get(o),_=h.get(a);if(x&&_)return x==a&&_==o;var v=-1,b=!0,E=l&i?new n:void 0;for(h.set(o,a),h.set(a,o);++v<p;){var S=o[v],C=a[v];if(u)var D=f?u(C,S,v,a,o,h):u(S,C,v,o,a,h);if(D!==void 0){if(D)continue;b=!1;break}if(E){if(!e(a,function(M,P){if(!t(E,P)&&(S===M||c(S,M,l,u,h)))return E.push(P)})){b=!1;break}}else if(!(S===C||c(S,C,l,u,h))){b=!1;break}}return h.delete(o),h.delete(a),b}return qR=s,qR}var WR,Y5;function kMe(){if(Y5)return WR;Y5=1;var n=eh(),e=n.Uint8Array;return WR=e,WR}var $R,Q5;function OMe(){if(Q5)return $R;Q5=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return $R=n,$R}var KR,Z5;function DMe(){if(Z5)return KR;Z5=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return KR=n,KR}var JR,eV;function NMe(){if(eV)return JR;eV=1;var n=sD(),e=kMe(),t=hK(),r=vK(),i=OMe(),s=DMe(),o=1,a=2,l="[object Boolean]",u="[object Date]",c="[object Error]",h="[object Map]",f="[object Number]",p="[object RegExp]",g="[object Set]",x="[object String]",_="[object Symbol]",v="[object ArrayBuffer]",b="[object DataView]",E=n?n.prototype:void 0,S=E?E.valueOf:void 0;function C(D,M,P,O,R,N,U){switch(P){case b:if(D.byteLength!=M.byteLength||D.byteOffset!=M.byteOffset)return!1;D=D.buffer,M=M.buffer;case v:return!(D.byteLength!=M.byteLength||!N(new e(D),new e(M)));case l:case u:case f:return t(+D,+M);case c:return D.name==M.name&&D.message==M.message;case p:case x:return D==M+"";case h:var F=i;case g:var J=O&o;if(F||(F=s),D.size!=M.size&&!J)return!1;var Z=U.get(D);if(Z)return Z==M;O|=a,U.set(D,M);var oe=r(F(D),F(M),O,R,N,U);return U.delete(D),oe;case _:if(S)return S.call(D)==S.call(M)}return!1}return JR=C,JR}var XR,tV;function LMe(){if(tV)return XR;tV=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return XR=n,XR}var YR,nV;function aD(){if(nV)return YR;nV=1;var n=Array.isArray;return YR=n,YR}var QR,rV;function BMe(){if(rV)return QR;rV=1;var n=LMe(),e=aD();function t(r,i,s){var o=i(r);return e(r)?o:n(o,s(r))}return QR=t,QR}var ZR,iV;function FMe(){if(iV)return ZR;iV=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}return ZR=n,ZR}var e2,sV;function UMe(){if(sV)return e2;sV=1;function n(){return[]}return e2=n,e2}var t2,oV;function jMe(){if(oV)return t2;oV=1;var n=FMe(),e=UMe(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(a){return r.call(o,a)}))}:e;return t2=s,t2}var n2,aV;function VMe(){if(aV)return n2;aV=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return n2=n,n2}var r2,lV;function tT(){if(lV)return r2;lV=1;function n(e){return e!=null&&typeof e=="object"}return r2=n,r2}var i2,uV;function zMe(){if(uV)return i2;uV=1;var n=QS(),e=tT(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return i2=r,i2}var s2,cV;function HMe(){if(cV)return s2;cV=1;var n=zMe(),e=tT(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n((function(){return arguments})())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return s2=s,s2}var R0={exports:{}},o2,hV;function GMe(){if(hV)return o2;hV=1;function n(){return!1}return o2=n,o2}R0.exports;var fV;function yK(){return fV||(fV=1,(function(n,e){var t=eh(),r=GMe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;n.exports=u})(R0,R0.exports)),R0.exports}var a2,dV;function qMe(){if(dV)return a2;dV=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return a2=t,a2}var l2,pV;function _K(){if(pV)return l2;pV=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return l2=e,l2}var u2,mV;function WMe(){if(mV)return u2;mV=1;var n=QS(),e=_K(),t=tT(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",h="[object Object]",f="[object RegExp]",p="[object Set]",g="[object String]",x="[object WeakMap]",_="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",E="[object Float64Array]",S="[object Int8Array]",C="[object Int16Array]",D="[object Int32Array]",M="[object Uint8Array]",P="[object Uint8ClampedArray]",O="[object Uint16Array]",R="[object Uint32Array]",N={};N[b]=N[E]=N[S]=N[C]=N[D]=N[M]=N[P]=N[O]=N[R]=!0,N[r]=N[i]=N[_]=N[s]=N[v]=N[o]=N[a]=N[l]=N[u]=N[c]=N[h]=N[f]=N[p]=N[g]=N[x]=!1;function U(F){return t(F)&&e(F.length)&&!!N[n(F)]}return u2=U,u2}var c2,gV;function $Me(){if(gV)return c2;gV=1;function n(e){return function(t){return e(t)}}return c2=n,c2}var I0={exports:{}};I0.exports;var vV;function KMe(){return vV||(vV=1,(function(n,e){var t=fK(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=(function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}})();n.exports=a})(I0,I0.exports)),I0.exports}var h2,yV;function xK(){if(yV)return h2;yV=1;var n=WMe(),e=$Me(),t=KMe(),r=t&&t.isTypedArray,i=r?e(r):n;return h2=i,h2}var f2,_V;function JMe(){if(_V)return f2;_V=1;var n=VMe(),e=HMe(),t=aD(),r=yK(),i=qMe(),s=xK(),o=Object.prototype,a=o.hasOwnProperty;function l(u,c){var h=t(u),f=!h&&e(u),p=!h&&!f&&r(u),g=!h&&!f&&!p&&s(u),x=h||f||p||g,_=x?n(u.length,String):[],v=_.length;for(var b in u)(c||a.call(u,b))&&!(x&&(b=="length"||p&&(b=="offset"||b=="parent")||g&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,v)))&&_.push(b);return _}return f2=l,f2}var d2,xV;function XMe(){if(xV)return d2;xV=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return d2=e,d2}var p2,wV;function YMe(){if(wV)return p2;wV=1;function n(e,t){return function(r){return e(t(r))}}return p2=n,p2}var m2,bV;function QMe(){if(bV)return m2;bV=1;var n=YMe(),e=n(Object.keys,Object);return m2=e,m2}var g2,EV;function ZMe(){if(EV)return g2;EV=1;var n=XMe(),e=QMe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return g2=i,g2}var v2,AV;function eRe(){if(AV)return v2;AV=1;var n=pK(),e=_K();function t(r){return r!=null&&e(r.length)&&!n(r)}return v2=t,v2}var y2,SV;function tRe(){if(SV)return y2;SV=1;var n=JMe(),e=ZMe(),t=eRe();function r(i){return t(i)?n(i):e(i)}return y2=r,y2}var _2,TV;function nRe(){if(TV)return _2;TV=1;var n=BMe(),e=jMe(),t=tRe();function r(i){return n(i,t,e)}return _2=r,_2}var x2,CV;function rRe(){if(CV)return x2;CV=1;var n=nRe(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,l,u,c){var h=a&e,f=n(s),p=f.length,g=n(o),x=g.length;if(p!=x&&!h)return!1;for(var _=p;_--;){var v=f[_];if(!(h?v in o:r.call(o,v)))return!1}var b=c.get(s),E=c.get(o);if(b&&E)return b==o&&E==s;var S=!0;c.set(s,o),c.set(o,s);for(var C=h;++_<p;){v=f[_];var D=s[v],M=o[v];if(l)var P=h?l(M,D,v,o,s,c):l(D,M,v,s,o,c);if(!(P===void 0?D===M||u(D,M,a,l,c):P)){S=!1;break}C||(C=v=="constructor")}if(S&&!C){var O=s.constructor,R=o.constructor;O!=R&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof R=="function"&&R instanceof R)&&(S=!1)}return c.delete(s),c.delete(o),S}return x2=i,x2}var w2,MV;function iRe(){if(MV)return w2;MV=1;var n=ty(),e=eh(),t=n(e,"DataView");return w2=t,w2}var b2,RV;function sRe(){if(RV)return b2;RV=1;var n=ty(),e=eh(),t=n(e,"Promise");return b2=t,b2}var E2,IV;function oRe(){if(IV)return E2;IV=1;var n=ty(),e=eh(),t=n(e,"Set");return E2=t,E2}var A2,PV;function aRe(){if(PV)return A2;PV=1;var n=ty(),e=eh(),t=n(e,"WeakMap");return A2=t,A2}var S2,kV;function lRe(){if(kV)return S2;kV=1;var n=iRe(),e=oD(),t=sRe(),r=oRe(),i=aRe(),s=QS(),o=mK(),a="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",h="[object WeakMap]",f="[object DataView]",p=o(n),g=o(e),x=o(t),_=o(r),v=o(i),b=s;return(n&&b(new n(new ArrayBuffer(1)))!=f||e&&b(new e)!=a||t&&b(t.resolve())!=u||r&&b(new r)!=c||i&&b(new i)!=h)&&(b=function(E){var S=s(E),C=S==l?E.constructor:void 0,D=C?o(C):"";if(D)switch(D){case p:return f;case g:return a;case x:return u;case _:return c;case v:return h}return S}),S2=b,S2}var T2,OV;function uRe(){if(OV)return T2;OV=1;var n=TMe(),e=vK(),t=NMe(),r=rRe(),i=lRe(),s=aD(),o=yK(),a=xK(),l=1,u="[object Arguments]",c="[object Array]",h="[object Object]",f=Object.prototype,p=f.hasOwnProperty;function g(x,_,v,b,E,S){var C=s(x),D=s(_),M=C?c:i(x),P=D?c:i(_);M=M==u?h:M,P=P==u?h:P;var O=M==h,R=P==h,N=M==P;if(N&&o(x)){if(!o(_))return!1;C=!0,O=!1}if(N&&!O)return S||(S=new n),C||a(x)?e(x,_,v,b,E,S):t(x,_,M,v,b,E,S);if(!(v&l)){var U=O&&p.call(x,"__wrapped__"),F=R&&p.call(_,"__wrapped__");if(U||F){var J=U?x.value():x,Z=F?_.value():_;return S||(S=new n),E(J,Z,v,b,S)}}return N?(S||(S=new n),r(x,_,v,b,E,S)):!1}return T2=g,T2}var C2,DV;function cRe(){if(DV)return C2;DV=1;var n=uRe(),e=tT();function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,o,t,a)}return C2=t,C2}var M2,NV;function hRe(){if(NV)return M2;NV=1;var n=cRe();function e(t,r){return n(t,r)}return M2=e,M2}var Pb={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var fRe=Pb.exports,LV;function dRe(){return LV||(LV=1,(function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:fRe,function(){return(function(t){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)})([(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),c=i(47),h=i(48),f=i(49),p=i(12),g=i(32),x=i(33),_=i(31),v=i(1),b={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:h.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:f.default,Attributor:{Attribute:p.default,Class:g.default,Style:x.default,Store:_.default}};r.default=b}),(function(t,r,i){var s=this&&this.__extends||(function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var E in b)b.hasOwnProperty(E)&&(v[E]=b[E])};return function(v,b){_(v,b);function E(){this.constructor=v}v.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=(function(_){s(v,_);function v(b){var E=this;return b="[Parchment] "+b,E=_.call(this,b)||this,E.message=b,E.name=E.constructor.name,E}return v})(Error);r.ParchmentError=o;var a={},l={},u={},c={};r.DATA_KEY="__blot";var h;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(_,v){var b=g(_);if(b==null)throw new o("Unable to create "+_+" blot");var E=b,S=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:E.create(v);return new E(S,v)}r.create=f;function p(_,v){return v===void 0&&(v=!1),_==null?null:_[r.DATA_KEY]!=null?_[r.DATA_KEY].blot:v?p(_.parentNode,v):null}r.find=p;function g(_,v){v===void 0&&(v=h.ANY);var b;if(typeof _=="string")b=c[_]||a[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)b=c.text;else if(typeof _=="number")_&h.LEVEL&h.BLOCK?b=c.block:_&h.LEVEL&h.INLINE&&(b=c.inline);else if(_ instanceof HTMLElement){var E=(_.getAttribute("class")||"").split(/\s+/);for(var S in E)if(b=l[E[S]],b)break;b=b||u[_.tagName]}return b==null?null:v&h.LEVEL&b.scope&&v&h.TYPE&b.scope?b:null}r.query=g;function x(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];if(_.length>1)return _.map(function(S){return x(S)});var b=_[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(c[b.blotName||b.attrName]=b,typeof b.keyName=="string")a[b.keyName]=b;else if(b.className!=null&&(l[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(S){return S.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var E=Array.isArray(b.tagName)?b.tagName:[b.tagName];E.forEach(function(S){(u[S]==null||b.className==null)&&(u[S]=b)})}return b}r.register=x}),(function(t,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u="\0",c=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};c.prototype.insert=function(h,f){var p={};return h.length===0?this:(p.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},c.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},c.prototype.retain=function(h,f){if(h<=0)return this;var p={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},c.prototype.push=function(h){var f=this.ops.length,p=this.ops[f-1];if(h=a(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(h),this;if(o(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},c.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},c.prototype.filter=function(h){return this.ops.filter(h)},c.prototype.forEach=function(h){this.ops.forEach(h)},c.prototype.map=function(h){return this.ops.map(h)},c.prototype.partition=function(h){var f=[],p=[];return this.forEach(function(g){var x=h(g)?f:p;x.push(g)}),[f,p]},c.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},c.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},c.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},c.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var p=[],g=l.iterator(this.ops),x=0;x<f&&g.hasNext();){var _;x<h?_=g.next(h-x):(_=g.next(f-x),p.push(_)),x+=l.length(_)}return new c(p)},c.prototype.compose=function(h){var f=l.iterator(this.ops),p=l.iterator(h.ops),g=[],x=p.peek();if(x!=null&&typeof x.retain=="number"&&x.attributes==null){for(var _=x.retain;f.peekType()==="insert"&&f.peekLength()<=_;)_-=f.peekLength(),g.push(f.next());x.retain-_>0&&p.next(x.retain-_)}for(var v=new c(g);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")v.push(p.next());else if(f.peekType()==="delete")v.push(f.next());else{var b=Math.min(f.peekLength(),p.peekLength()),E=f.next(b),S=p.next(b);if(typeof S.retain=="number"){var C={};typeof E.retain=="number"?C.retain=b:C.insert=E.insert;var D=l.attributes.compose(E.attributes,S.attributes,typeof E.retain=="number");if(D&&(C.attributes=D),v.push(C),!p.hasNext()&&o(v.ops[v.ops.length-1],C)){var M=new c(f.rest());return v.concat(M).chop()}}else typeof S.delete=="number"&&typeof E.retain=="number"&&v.push(S)}return v.chop()},c.prototype.concat=function(h){var f=new c(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},c.prototype.diff=function(h,f){if(this.ops===h.ops)return new c;var p=[this,h].map(function(b){return b.map(function(E){if(E.insert!=null)return typeof E.insert=="string"?E.insert:u;var S=b===h?"on":"with";throw new Error("diff() called "+S+" non-document")}).join("")}),g=new c,x=s(p[0],p[1],f),_=l.iterator(this.ops),v=l.iterator(h.ops);return x.forEach(function(b){for(var E=b[1].length;E>0;){var S=0;switch(b[0]){case s.INSERT:S=Math.min(v.peekLength(),E),g.push(v.next(S));break;case s.DELETE:S=Math.min(E,_.peekLength()),_.next(S),g.delete(S);break;case s.EQUAL:S=Math.min(_.peekLength(),v.peekLength(),E);var C=_.next(S),D=v.next(S);o(C.insert,D.insert)?g.retain(S,l.attributes.diff(C.attributes,D.attributes)):g.push(D).delete(S);break}E-=S}}),g.chop()},c.prototype.eachLine=function(h,f){f=f||`
`;for(var p=l.iterator(this.ops),g=new c,x=0;p.hasNext();){if(p.peekType()!=="insert")return;var _=p.peek(),v=l.length(_)-p.peekLength(),b=typeof _.insert=="string"?_.insert.indexOf(f,v)-v:-1;if(b<0)g.push(p.next());else if(b>0)g.push(p.next(b));else{if(h(g,p.next(1).attributes||{},x)===!1)return;x+=1,g=new c}}g.length()>0&&h(g,{},x)},c.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var p=l.iterator(this.ops),g=l.iterator(h.ops),x=new c;p.hasNext()||g.hasNext();)if(p.peekType()==="insert"&&(f||g.peekType()!=="insert"))x.retain(l.length(p.next()));else if(g.peekType()==="insert")x.push(g.next());else{var _=Math.min(p.peekLength(),g.peekLength()),v=p.next(_),b=g.next(_);if(v.delete)continue;b.delete?x.push(b):x.retain(_,l.attributes.transform(v.attributes,b.attributes,f))}return x.chop()},c.prototype.transformPosition=function(h,f){f=!!f;for(var p=l.iterator(this.ops),g=0;p.hasNext()&&g<=h;){var x=p.peekLength(),_=p.peekType();if(p.next(),_==="delete"){h-=Math.min(x,h-g);continue}else _==="insert"&&(g<h||!f)&&(h+=x);g+=x}return h},t.exports=c}),(function(t,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):s.call(p)==="[object Array]"},u=function(p){if(!p||s.call(p)!=="[object Object]")return!1;var g=i.call(p,"constructor"),x=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!x)return!1;var _;for(_ in p);return typeof _>"u"||i.call(p,_)},c=function(p,g){o&&g.name==="__proto__"?o(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},h=function(p,g){if(g==="__proto__")if(i.call(p,g)){if(a)return a(p,g).value}else return;return p[g]};t.exports=function f(){var p,g,x,_,v,b,E=arguments[0],S=1,C=arguments.length,D=!1;for(typeof E=="boolean"&&(D=E,E=arguments[1]||{},S=2),(E==null||typeof E!="object"&&typeof E!="function")&&(E={});S<C;++S)if(p=arguments[S],p!=null)for(g in p)x=h(E,g),_=h(p,g),E!==_&&(D&&_&&(u(_)||(v=l(_)))?(v?(v=!1,b=x&&l(x)?x:[]):b=x&&u(x)?x:{},c(E,{name:g,newValue:f(D,b,_)})):typeof _<"u"&&c(E,{name:g,newValue:_}));return E}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=(function(){function N(U,F){for(var J=0;J<F.length;J++){var Z=F[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,F,J){return F&&N(U.prototype,F),J&&N(U,J),U}})(),o=function N(U,F,J){U===null&&(U=Function.prototype);var Z=Object.getOwnPropertyDescriptor(U,F);if(Z===void 0){var oe=Object.getPrototypeOf(U);return oe===null?void 0:N(oe,F,J)}else{if("value"in Z)return Z.value;var ae=Z.get;return ae===void 0?void 0:ae.call(J)}},a=i(3),l=E(a),u=i(2),c=E(u),h=i(0),f=E(h),p=i(16),g=E(p),x=i(6),_=E(x),v=i(7),b=E(v);function E(N){return N&&N.__esModule?N:{default:N}}function S(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function C(N,U){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:N}function D(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);N.prototype=Object.create(U&&U.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(N,U):N.__proto__=U)}var M=1,P=(function(N){D(U,N);function U(){return S(this,U),C(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return s(U,[{key:"attach",value:function(){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(J,Z){var oe=f.default.query(J,f.default.Scope.BLOCK_ATTRIBUTE);oe!=null&&this.attributes.attribute(oe,Z)}},{key:"formatAt",value:function(J,Z,oe,ae){this.format(oe,ae)}},{key:"insertAt",value:function(J,Z,oe){if(typeof Z=="string"&&Z.endsWith(`
`)){var ae=f.default.create(O.blotName);this.parent.insertBefore(ae,J===0?this:this.next),ae.insertAt(0,Z.slice(0,-1))}else o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,J,Z,oe)}}]),U})(f.default.Embed);P.scope=f.default.Scope.BLOCK_BLOT;var O=(function(N){D(U,N);function U(F){S(this,U);var J=C(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,F));return J.cache={},J}return s(U,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(J,Z){return Z.length()===0?J:J.insert(Z.value(),R(Z))},new c.default).insert(`
`,R(this))),this.cache.delta}},{key:"deleteAt",value:function(J,Z){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"deleteAt",this).call(this,J,Z),this.cache={}}},{key:"formatAt",value:function(J,Z,oe,ae){Z<=0||(f.default.query(oe,f.default.Scope.BLOCK)?J+Z===this.length()&&this.format(oe,ae):o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"formatAt",this).call(this,J,Math.min(Z,this.length()-J-1),oe,ae),this.cache={})}},{key:"insertAt",value:function(J,Z,oe){if(oe!=null)return o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,J,Z,oe);if(Z.length!==0){var ae=Z.split(`
`),Q=ae.shift();Q.length>0&&(J<this.length()-1||this.children.tail==null?o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,Math.min(J,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var ee=this;ae.reduce(function(Y,V){return ee=ee.split(Y,!0),ee.insertAt(0,V),V.length},J+Q.length)}}},{key:"insertBefore",value:function(J,Z){var oe=this.children.head;o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertBefore",this).call(this,J,Z),oe instanceof g.default&&oe.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"length",this).call(this)+M),this.cache.length}},{key:"moveChildren",value:function(J,Z){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"moveChildren",this).call(this,J,Z),this.cache={}}},{key:"optimize",value:function(J){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,J),this.cache={}}},{key:"path",value:function(J){return o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"path",this).call(this,J,!0)}},{key:"removeChild",value:function(J){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"removeChild",this).call(this,J),this.cache={}}},{key:"split",value:function(J){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Z&&(J===0||J>=this.length()-M)){var oe=this.clone();return J===0?(this.parent.insertBefore(oe,this),this):(this.parent.insertBefore(oe,this.next),oe)}else{var ae=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"split",this).call(this,J,Z);return this.cache={},ae}}}]),U})(f.default.Block);O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[_.default,f.default.Embed,b.default];function R(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return N==null||(typeof N.formats=="function"&&(U=(0,l.default)(U,N.formats())),N.parent==null||N.parent.blotName=="scroll"||N.parent.statics.scope!==N.statics.scope)?U:R(N.parent,U)}r.bubbleFormats=R,r.BlockEmbed=P,r.default=O}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},o=(function(){function ee(Y,V){var X=[],re=!0,se=!1,he=void 0;try{for(var te=Y[Symbol.iterator](),ce;!(re=(ce=te.next()).done)&&(X.push(ce.value),!(V&&X.length===V));re=!0);}catch(ve){se=!0,he=ve}finally{try{!re&&te.return&&te.return()}finally{if(se)throw he}}return X}return function(Y,V){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return ee(Y,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function ee(Y,V){for(var X=0;X<V.length;X++){var re=V[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,V,X){return V&&ee(Y.prototype,V),X&&ee(Y,X),Y}})();i(50);var l=i(2),u=R(l),c=i(14),h=R(c),f=i(8),p=R(f),g=i(9),x=R(g),_=i(0),v=R(_),b=i(15),E=R(b),S=i(3),C=R(S),D=i(10),M=R(D),P=i(34),O=R(P);function R(ee){return ee&&ee.__esModule?ee:{default:ee}}function N(ee,Y,V){return Y in ee?Object.defineProperty(ee,Y,{value:V,enumerable:!0,configurable:!0,writable:!0}):ee[Y]=V,ee}function U(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}var F=(0,M.default)("quill"),J=(function(){a(ee,null,[{key:"debug",value:function(V){V===!0&&(V="log"),M.default.level(V)}},{key:"find",value:function(V){return V.__quill||v.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&F.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,X){var re=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var he=V.attrName||V.blotName;typeof he=="string"?this.register("formats/"+he,V,X):Object.keys(V).forEach(function(te){re.register(te,V[te],X)})}else this.imports[V]!=null&&!se&&F.warn("Overwriting "+V+" with",X),this.imports[V]=X,(V.startsWith("blots/")||V.startsWith("formats/"))&&X.blotName!=="abstract"?v.default.register(X):V.startsWith("modules")&&typeof X.register=="function"&&X.register()}}]);function ee(Y){var V=this,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(U(this,ee),this.options=Z(Y,X),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",Y);this.options.debug&&ee.debug(this.options.debug);var re=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new E.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(he){he===p.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(he,te){var ce=V.selection.lastRange,ve=ce&&ce.length===0?ce.index:void 0;oe.call(V,function(){return V.editor.update(null,te,ve)},he)});var se=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+re+"<p><br></p></div>");this.setContents(se),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(ee,[{key:"addContainer",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var re=V;V=document.createElement("div"),V.classList.add(re)}return this.container.insertBefore(V,X),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,X,re){var se=this,he=ae(V,X,re),te=o(he,4);return V=te[0],X=te[1],re=te[3],oe.call(this,function(){return se.editor.deleteText(V,X)},re,V,-1*X)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,X){var re=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return oe.call(this,function(){var he=re.getSelection(!0),te=new u.default;if(he==null)return te;if(v.default.query(V,v.default.Scope.BLOCK))te=re.editor.formatLine(he.index,he.length,N({},V,X));else{if(he.length===0)return re.selection.format(V,X),te;te=re.editor.formatText(he.index,he.length,N({},V,X))}return re.setSelection(he,p.default.sources.SILENT),te},se)}},{key:"formatLine",value:function(V,X,re,se,he){var te=this,ce=void 0,ve=ae(V,X,re,se,he),xe=o(ve,4);return V=xe[0],X=xe[1],ce=xe[2],he=xe[3],oe.call(this,function(){return te.editor.formatLine(V,X,ce)},he,V,0)}},{key:"formatText",value:function(V,X,re,se,he){var te=this,ce=void 0,ve=ae(V,X,re,se,he),xe=o(ve,4);return V=xe[0],X=xe[1],ce=xe[2],he=xe[3],oe.call(this,function(){return te.editor.formatText(V,X,ce)},he,V,0)}},{key:"getBounds",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,re=void 0;typeof V=="number"?re=this.selection.getBounds(V,X):re=this.selection.getBounds(V.index,V.length);var se=this.container.getBoundingClientRect();return{bottom:re.bottom-se.top,height:re.height,left:re.left-se.left,right:re.right-se.left,top:re.top-se.top,width:re.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,re=ae(V,X),se=o(re,2);return V=se[0],X=se[1],this.editor.getContents(V,X)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,X):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,X)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,re=ae(V,X),se=o(re,2);return V=se[0],X=se[1],this.editor.getText(V,X)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,X,re){var se=this,he=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ee.sources.API;return oe.call(this,function(){return se.editor.insertEmbed(V,X,re)},he,V)}},{key:"insertText",value:function(V,X,re,se,he){var te=this,ce=void 0,ve=ae(V,0,re,se,he),xe=o(ve,4);return V=xe[0],ce=xe[2],he=xe[3],oe.call(this,function(){return te.editor.insertText(V,X,ce)},he,V,X.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,X,re){this.clipboard.dangerouslyPasteHTML(V,X,re)}},{key:"removeFormat",value:function(V,X,re){var se=this,he=ae(V,X,re),te=o(he,4);return V=te[0],X=te[1],re=te[3],oe.call(this,function(){return se.editor.removeFormat(V,X)},re,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var X=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return oe.call(this,function(){V=new u.default(V);var se=X.getLength(),he=X.editor.deleteText(0,se),te=X.editor.applyDelta(V),ce=te.ops[te.ops.length-1];ce!=null&&typeof ce.insert=="string"&&ce.insert[ce.insert.length-1]===`
`&&(X.editor.deleteText(X.getLength()-1,1),te.delete(1));var ve=he.compose(te);return ve},re)}},{key:"setSelection",value:function(V,X,re){if(V==null)this.selection.setRange(null,X||ee.sources.API);else{var se=ae(V,X,re),he=o(se,4);V=he[0],X=he[1],re=he[3],this.selection.setRange(new b.Range(V,X),re),re!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,re=new u.default().insert(V);return this.setContents(re,X)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,X=this.scroll.update(V);return this.selection.update(V),X}},{key:"updateContents",value:function(V){var X=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return oe.call(this,function(){return V=new u.default(V),X.editor.applyDelta(V,re)},re,!0)}}]),ee})();J.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},J.events=p.default.events,J.sources=p.default.sources,J.version="1.3.7",J.imports={delta:u.default,parchment:v.default,"core/module":x.default,"core/theme":O.default};function Z(ee,Y){if(Y=(0,C.default)(!0,{container:ee,modules:{clipboard:!0,keyboard:!0,history:!0}},Y),!Y.theme||Y.theme===J.DEFAULTS.theme)Y.theme=O.default;else if(Y.theme=J.import("themes/"+Y.theme),Y.theme==null)throw new Error("Invalid theme "+Y.theme+". Did you register it?");var V=(0,C.default)(!0,{},Y.theme.DEFAULTS);[V,Y].forEach(function(se){se.modules=se.modules||{},Object.keys(se.modules).forEach(function(he){se.modules[he]===!0&&(se.modules[he]={})})});var X=Object.keys(V.modules).concat(Object.keys(Y.modules)),re=X.reduce(function(se,he){var te=J.import("modules/"+he);return te==null?F.error("Cannot load "+he+" module. Are you sure you registered it?"):se[he]=te.DEFAULTS||{},se},{});return Y.modules!=null&&Y.modules.toolbar&&Y.modules.toolbar.constructor!==Object&&(Y.modules.toolbar={container:Y.modules.toolbar}),Y=(0,C.default)(!0,{},J.DEFAULTS,{modules:re},V,Y),["bounds","container","scrollingContainer"].forEach(function(se){typeof Y[se]=="string"&&(Y[se]=document.querySelector(Y[se]))}),Y.modules=Object.keys(Y.modules).reduce(function(se,he){return Y.modules[he]&&(se[he]=Y.modules[he]),se},{}),Y}function oe(ee,Y,V,X){if(this.options.strict&&!this.isEnabled()&&Y===p.default.sources.USER)return new u.default;var re=V==null?null:this.getSelection(),se=this.editor.delta,he=ee();if(re!=null&&(V===!0&&(V=re.index),X==null?re=Q(re,he,Y):X!==0&&(re=Q(re,V,X,Y)),this.setSelection(re,p.default.sources.SILENT)),he.length()>0){var te,ce=[p.default.events.TEXT_CHANGE,he,se,Y];if((te=this.emitter).emit.apply(te,[p.default.events.EDITOR_CHANGE].concat(ce)),Y!==p.default.sources.SILENT){var ve;(ve=this.emitter).emit.apply(ve,ce)}}return he}function ae(ee,Y,V,X,re){var se={};return typeof ee.index=="number"&&typeof ee.length=="number"?typeof Y!="number"?(re=X,X=V,V=Y,Y=ee.length,ee=ee.index):(Y=ee.length,ee=ee.index):typeof Y!="number"&&(re=X,X=V,V=Y,Y=0),(typeof V>"u"?"undefined":s(V))==="object"?(se=V,re=X):typeof V=="string"&&(X!=null?se[V]=X:re=V),re=re||p.default.sources.API,[ee,Y,se,re]}function Q(ee,Y,V,X){if(ee==null)return null;var re=void 0,se=void 0;if(Y instanceof u.default){var he=[ee.index,ee.index+ee.length].map(function(xe){return Y.transformPosition(xe,X!==p.default.sources.USER)}),te=o(he,2);re=te[0],se=te[1]}else{var ce=[ee.index,ee.index+ee.length].map(function(xe){return xe<Y||xe===Y&&X===p.default.sources.USER?xe:V>=0?xe+V:Math.max(Y,xe+V)}),ve=o(ce,2);re=ve[0],se=ve[1]}return new b.Range(re,se-re)}r.expandConfig=Z,r.overload=ae,r.default=J}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,b,E)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(E)}},a=i(7),l=h(a),u=i(0),c=h(u);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function p(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function g(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var x=(function(_){g(v,_);function v(){return f(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"formatAt",value:function(E,S,C,D){if(v.compare(this.statics.blotName,C)<0&&c.default.query(C,c.default.Scope.BLOT)){var M=this.isolate(E,S);D&&M.wrap(C,D)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,E,S,C,D)}},{key:"optimize",value:function(E){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,E),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(E,S){var C=v.order.indexOf(E),D=v.order.indexOf(S);return C>=0||D>=0?C-D:E===S?0:E<S?-1:1}}]),v})(c.default.Inline);x.allowedChildren=[x,c.default.Embed,l.default],x.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){c(p,f);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default.Text);r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function b(E,S){for(var C=0;C<S.length;C++){var D=S[C];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(E,D.key,D)}}return function(E,S,C){return S&&b(E.prototype,S),C&&b(E,C),E}})(),o=function b(E,S,C){E===null&&(E=Function.prototype);var D=Object.getOwnPropertyDescriptor(E,S);if(D===void 0){var M=Object.getPrototypeOf(E);return M===null?void 0:b(M,S,C)}else{if("value"in D)return D.value;var P=D.get;return P===void 0?void 0:P.call(C)}},a=i(54),l=h(a),u=i(10),c=h(u);function h(b){return b&&b.__esModule?b:{default:b}}function f(b,E){if(!(b instanceof E))throw new TypeError("Cannot call a class as a function")}function p(b,E){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:b}function g(b,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);b.prototype=Object.create(E&&E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(b,E):b.__proto__=E)}var x=(0,c.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(b){document.addEventListener(b,function(){for(var E=arguments.length,S=Array(E),C=0;C<E;C++)S[C]=arguments[C];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(D){if(D.__quill&&D.__quill.emitter){var M;(M=D.__quill.emitter).handleDOM.apply(M,S)}})})});var v=(function(b){g(E,b);function E(){f(this,E);var S=p(this,(E.__proto__||Object.getPrototypeOf(E)).call(this));return S.listeners={},S.on("error",x.error),S}return s(E,[{key:"emit",value:function(){x.log.apply(x,arguments),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(C){for(var D=arguments.length,M=Array(D>1?D-1:0),P=1;P<D;P++)M[P-1]=arguments[P];(this.listeners[C.type]||[]).forEach(function(O){var R=O.node,N=O.handler;(C.target===R||R.contains(C.target))&&N.apply(void 0,[C].concat(M))})}},{key:"listenDOM",value:function(C,D,M){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push({node:D,handler:M})}}]),E})(l.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var c,h=arguments.length,f=Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];(c=console)[u].apply(c,f)}}function l(u){return s.reduce(function(c,h){return c[h]=a.bind(console,h,u),c},{})}a.level=l.level=function(u){o=u},r.default=l}),(function(t,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=t.exports=function(f,p,g){return g||(g={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?g.strict?f===p:f==p:h(f,p,g)};function u(f){return f==null}function c(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,p,g){var x,_;if(u(f)||u(p)||f.prototype!==p.prototype)return!1;if(a(f))return a(p)?(f=s.call(f),p=s.call(p),l(f,p,g)):!1;if(c(f)){if(!c(p)||f.length!==p.length)return!1;for(x=0;x<f.length;x++)if(f[x]!==p[x])return!1;return!0}try{var v=o(f),b=o(p)}catch{return!1}if(v.length!=b.length)return!1;for(v.sort(),b.sort(),x=v.length-1;x>=0;x--)if(v[x]!=b[x])return!1;for(x=v.length-1;x>=0;x--)if(_=v[x],!l(f[_],p[_],g))return!1;return typeof f==typeof p}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=(function(){function a(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var h=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|h:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a})();r.default=o}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=(function(){function P(O,R){var N=[],U=!0,F=!1,J=void 0;try{for(var Z=O[Symbol.iterator](),oe;!(U=(oe=Z.next()).done)&&(N.push(oe.value),!(R&&N.length===R));U=!0);}catch(ae){F=!0,J=ae}finally{try{!U&&Z.return&&Z.return()}finally{if(F)throw J}}return N}return function(O,R){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return P(O,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(O,R){for(var N=0;N<R.length;N++){var U=R[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,R,N){return R&&P(O.prototype,R),N&&P(O,N),O}})(),a=function P(O,R,N){O===null&&(O=Function.prototype);var U=Object.getOwnPropertyDescriptor(O,R);if(U===void 0){var F=Object.getPrototypeOf(O);return F===null?void 0:P(F,R,N)}else{if("value"in U)return U.value;var J=U.get;return J===void 0?void 0:J.call(N)}},l=i(2),u=b(l),c=i(0),h=b(c),f=i(4),p=b(f),g=i(6),x=b(g),_=i(7),v=b(_);function b(P){return P&&P.__esModule?P:{default:P}}function E(P,O){if(!(P instanceof O))throw new TypeError("Cannot call a class as a function")}function S(P,O){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:P}function C(P,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);P.prototype=Object.create(O&&O.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(P,O):P.__proto__=O)}var D=(function(P){C(O,P);function O(){return E(this,O),S(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O})(x.default);D.blotName="code",D.tagName="CODE";var M=(function(P){C(O,P);function O(){return E(this,O),S(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"delta",value:function(){var N=this,U=this.domNode.textContent;return U.endsWith(`
`)&&(U=U.slice(0,-1)),U.split(`
`).reduce(function(F,J){return F.insert(J).insert(`
`,N.formats())},new u.default)}},{key:"format",value:function(N,U){if(!(N===this.statics.blotName&&U)){var F=this.descendant(v.default,this.length()-1),J=s(F,1),Z=J[0];Z!=null&&Z.deleteAt(Z.length()-1,1),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,N,U)}}},{key:"formatAt",value:function(N,U,F,J){if(U!==0&&!(h.default.query(F,h.default.Scope.BLOCK)==null||F===this.statics.blotName&&J===this.statics.formats(this.domNode))){var Z=this.newlineIndex(N);if(!(Z<0||Z>=N+U)){var oe=this.newlineIndex(N,!0)+1,ae=Z-oe+1,Q=this.isolate(oe,ae),ee=Q.next;Q.format(F,J),ee instanceof O&&ee.formatAt(0,N-oe+U-ae,F,J)}}}},{key:"insertAt",value:function(N,U,F){if(F==null){var J=this.descendant(v.default,N),Z=s(J,2),oe=Z[0],ae=Z[1];oe.insertAt(ae,U)}}},{key:"length",value:function(){var N=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?N:N+1}},{key:"newlineIndex",value:function(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U)return this.domNode.textContent.slice(0,N).lastIndexOf(`
`);var F=this.domNode.textContent.slice(N).indexOf(`
`);return F>-1?N+F:-1}},{key:"optimize",value:function(N){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,N);var U=this.next;U!=null&&U.prev===this&&U.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===U.statics.formats(U.domNode)&&(U.optimize(N),U.moveChildren(this),U.remove())}},{key:"replace",value:function(N){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,N),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(U){var F=h.default.find(U);F==null?U.parentNode.removeChild(U):F instanceof h.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(N){var U=a(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,N);return U.setAttribute("spellcheck",!1),U}},{key:"formats",value:function(){return!0}}]),O})(p.default);M.blotName="code-block",M.tagName="PRE",M.TAB="  ",r.Code=D,r.default=M}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},o=(function(){function ee(Y,V){var X=[],re=!0,se=!1,he=void 0;try{for(var te=Y[Symbol.iterator](),ce;!(re=(ce=te.next()).done)&&(X.push(ce.value),!(V&&X.length===V));re=!0);}catch(ve){se=!0,he=ve}finally{try{!re&&te.return&&te.return()}finally{if(se)throw he}}return X}return function(Y,V){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return ee(Y,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function ee(Y,V){for(var X=0;X<V.length;X++){var re=V[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,V,X){return V&&ee(Y.prototype,V),X&&ee(Y,X),Y}})(),l=i(2),u=U(l),c=i(20),h=U(c),f=i(0),p=U(f),g=i(13),x=U(g),_=i(24),v=U(_),b=i(4),E=U(b),S=i(16),C=U(S),D=i(21),M=U(D),P=i(11),O=U(P),R=i(3),N=U(R);function U(ee){return ee&&ee.__esModule?ee:{default:ee}}function F(ee,Y,V){return Y in ee?Object.defineProperty(ee,Y,{value:V,enumerable:!0,configurable:!0,writable:!0}):ee[Y]=V,ee}function J(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}var Z=/^[ -~]*$/,oe=(function(){function ee(Y){J(this,ee),this.scroll=Y,this.delta=this.getDelta()}return a(ee,[{key:"applyDelta",value:function(V){var X=this,re=!1;this.scroll.update();var se=this.scroll.length();return this.scroll.batchStart(),V=Q(V),V.reduce(function(he,te){var ce=te.retain||te.delete||te.insert.length||1,ve=te.attributes||{};if(te.insert!=null){if(typeof te.insert=="string"){var xe=te.insert;xe.endsWith(`
`)&&re&&(re=!1,xe=xe.slice(0,-1)),he>=se&&!xe.endsWith(`
`)&&(re=!0),X.scroll.insertAt(he,xe);var Te=X.scroll.line(he),$e=o(Te,2),De=$e[0],Be=$e[1],fe=(0,N.default)({},(0,b.bubbleFormats)(De));if(De instanceof E.default){var it=De.descendant(p.default.Leaf,Be),Je=o(it,1),rt=Je[0];fe=(0,N.default)(fe,(0,b.bubbleFormats)(rt))}ve=h.default.attributes.diff(fe,ve)||{}}else if(s(te.insert)==="object"){var we=Object.keys(te.insert)[0];if(we==null)return he;X.scroll.insertAt(he,we,te.insert[we])}se+=ce}return Object.keys(ve).forEach(function(Ie){X.scroll.formatAt(he,ce,Ie,ve[Ie])}),he+ce},0),V.reduce(function(he,te){return typeof te.delete=="number"?(X.scroll.deleteAt(he,te.delete),he):he+(te.retain||te.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,X){return this.scroll.deleteAt(V,X),this.update(new u.default().retain(V).delete(X))}},{key:"formatLine",value:function(V,X){var re=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(se).forEach(function(he){if(!(re.scroll.whitelist!=null&&!re.scroll.whitelist[he])){var te=re.scroll.lines(V,Math.max(X,1)),ce=X;te.forEach(function(ve){var xe=ve.length();if(!(ve instanceof x.default))ve.format(he,se[he]);else{var Te=V-ve.offset(re.scroll),$e=ve.newlineIndex(Te+ce)-Te+1;ve.formatAt(Te,$e,he,se[he])}ce-=xe})}}),this.scroll.optimize(),this.update(new u.default().retain(V).retain(X,(0,M.default)(se)))}},{key:"formatText",value:function(V,X){var re=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(se).forEach(function(he){re.scroll.formatAt(V,X,he,se[he])}),this.update(new u.default().retain(V).retain(X,(0,M.default)(se)))}},{key:"getContents",value:function(V,X){return this.delta.slice(V,V+X)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,X){return V.concat(X.delta())},new u.default)}},{key:"getFormat",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,re=[],se=[];X===0?this.scroll.path(V).forEach(function(te){var ce=o(te,1),ve=ce[0];ve instanceof E.default?re.push(ve):ve instanceof p.default.Leaf&&se.push(ve)}):(re=this.scroll.lines(V,X),se=this.scroll.descendants(p.default.Leaf,V,X));var he=[re,se].map(function(te){if(te.length===0)return{};for(var ce=(0,b.bubbleFormats)(te.shift());Object.keys(ce).length>0;){var ve=te.shift();if(ve==null)return ce;ce=ae((0,b.bubbleFormats)(ve),ce)}return ce});return N.default.apply(N.default,he)}},{key:"getText",value:function(V,X){return this.getContents(V,X).filter(function(re){return typeof re.insert=="string"}).map(function(re){return re.insert}).join("")}},{key:"insertEmbed",value:function(V,X,re){return this.scroll.insertAt(V,X,re),this.update(new u.default().retain(V).insert(F({},X,re)))}},{key:"insertText",value:function(V,X){var re=this,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return X=X.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,X),Object.keys(se).forEach(function(he){re.scroll.formatAt(V,X.length,he,se[he])}),this.update(new u.default().retain(V).insert(X,(0,M.default)(se)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==E.default.blotName||V.children.length>1?!1:V.children.head instanceof C.default}},{key:"removeFormat",value:function(V,X){var re=this.getText(V,X),se=this.scroll.line(V+X),he=o(se,2),te=he[0],ce=he[1],ve=0,xe=new u.default;te!=null&&(te instanceof x.default?ve=te.newlineIndex(ce)-ce+1:ve=te.length()-ce,xe=te.delta().slice(ce,ce+ve-1).insert(`
`));var Te=this.getContents(V,X+ve),$e=Te.diff(new u.default().insert(re).concat(xe)),De=new u.default().retain(V).concat($e);return this.applyDelta(De)}},{key:"update",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,se=this.delta;if(X.length===1&&X[0].type==="characterData"&&X[0].target.data.match(Z)&&p.default.find(X[0].target)){var he=p.default.find(X[0].target),te=(0,b.bubbleFormats)(he),ce=he.offset(this.scroll),ve=X[0].oldValue.replace(v.default.CONTENTS,""),xe=new u.default().insert(ve),Te=new u.default().insert(he.value()),$e=new u.default().retain(ce).concat(xe.diff(Te,re));V=$e.reduce(function(De,Be){return Be.insert?De.insert(Be.insert,te):De.push(Be)},new u.default),this.delta=se.compose(V)}else this.delta=this.getDelta(),(!V||!(0,O.default)(se.compose(V),this.delta))&&(V=se.diff(this.delta,re));return V}}]),ee})();function ae(ee,Y){return Object.keys(Y).reduce(function(V,X){return ee[X]==null||(Y[X]===ee[X]?V[X]=Y[X]:Array.isArray(Y[X])?Y[X].indexOf(ee[X])<0&&(V[X]=Y[X].concat([ee[X]])):V[X]=[Y[X],ee[X]]),V},{})}function Q(ee){return ee.reduce(function(Y,V){if(V.insert===1){var X=(0,M.default)(V.attributes);return delete X.image,Y.insert({image:V.attributes.image},X)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,M.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var re=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return Y.insert(re,V.attributes)}return Y.push(V)},new u.default)}r.default=oe}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=(function(){function P(O,R){var N=[],U=!0,F=!1,J=void 0;try{for(var Z=O[Symbol.iterator](),oe;!(U=(oe=Z.next()).done)&&(N.push(oe.value),!(R&&N.length===R));U=!0);}catch(ae){F=!0,J=ae}finally{try{!U&&Z.return&&Z.return()}finally{if(F)throw J}}return N}return function(O,R){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return P(O,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(O,R){for(var N=0;N<R.length;N++){var U=R[N];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,R,N){return R&&P(O.prototype,R),N&&P(O,N),O}})(),a=i(0),l=v(a),u=i(21),c=v(u),h=i(11),f=v(h),p=i(8),g=v(p),x=i(10),_=v(x);function v(P){return P&&P.__esModule?P:{default:P}}function b(P){if(Array.isArray(P)){for(var O=0,R=Array(P.length);O<P.length;O++)R[O]=P[O];return R}else return Array.from(P)}function E(P,O){if(!(P instanceof O))throw new TypeError("Cannot call a class as a function")}var S=(0,_.default)("quill:selection"),C=function P(O){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;E(this,P),this.index=O,this.length=R},D=(function(){function P(O,R){var N=this;E(this,P),this.emitter=R,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new C(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){N.mouseDown||setTimeout(N.update.bind(N,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(U,F){U===g.default.events.TEXT_CHANGE&&F.length()>0&&N.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(N.hasFocus()){var U=N.getNativeRange();U!=null&&U.start.node!==N.cursor.textNode&&N.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{N.setNativeRange(U.start.node,U.start.offset,U.end.node,U.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(U,F){if(F.range){var J=F.range,Z=J.startNode,oe=J.startOffset,ae=J.endNode,Q=J.endOffset;N.setNativeRange(Z,oe,ae,Q)}}),this.update(g.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var R=this;this.root.addEventListener("compositionstart",function(){R.composing=!0}),this.root.addEventListener("compositionend",function(){if(R.composing=!1,R.cursor.parent){var N=R.cursor.restore();if(!N)return;setTimeout(function(){R.setNativeRange(N.startNode,N.startOffset,N.endNode,N.endOffset)},1)}})}},{key:"handleDragging",value:function(){var R=this;this.emitter.listenDOM("mousedown",document.body,function(){R.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){R.mouseDown=!1,R.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(R,N){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[R])){this.scroll.update();var U=this.getNativeRange();if(!(U==null||!U.native.collapsed||l.default.query(R,l.default.Scope.BLOCK))){if(U.start.node!==this.cursor.textNode){var F=l.default.find(U.start.node,!1);if(F==null)return;if(F instanceof l.default.Leaf){var J=F.split(U.start.offset);F.parent.insertBefore(this.cursor,J)}else F.insertBefore(this.cursor,U.start.node);this.cursor.attach()}this.cursor.format(R,N),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(R){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=this.scroll.length();R=Math.min(R,U-1),N=Math.min(R+N,U-1)-R;var F=void 0,J=this.scroll.leaf(R),Z=s(J,2),oe=Z[0],ae=Z[1];if(oe==null)return null;var Q=oe.position(ae,!0),ee=s(Q,2);F=ee[0],ae=ee[1];var Y=document.createRange();if(N>0){Y.setStart(F,ae);var V=this.scroll.leaf(R+N),X=s(V,2);if(oe=X[0],ae=X[1],oe==null)return null;var re=oe.position(ae,!0),se=s(re,2);return F=se[0],ae=se[1],Y.setEnd(F,ae),Y.getBoundingClientRect()}else{var he="left",te=void 0;return F instanceof Text?(ae<F.data.length?(Y.setStart(F,ae),Y.setEnd(F,ae+1)):(Y.setStart(F,ae-1),Y.setEnd(F,ae),he="right"),te=Y.getBoundingClientRect()):(te=oe.domNode.getBoundingClientRect(),ae>0&&(he="right")),{bottom:te.top+te.height,height:te.height,left:te[he],right:te[he],top:te.top,width:0}}}},{key:"getNativeRange",value:function(){var R=document.getSelection();if(R==null||R.rangeCount<=0)return null;var N=R.getRangeAt(0);if(N==null)return null;var U=this.normalizeNative(N);return S.info("getNativeRange",U),U}},{key:"getRange",value:function(){var R=this.getNativeRange();if(R==null)return[null,null];var N=this.normalizedToRange(R);return[N,R]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(R){var N=this,U=[[R.start.node,R.start.offset]];R.native.collapsed||U.push([R.end.node,R.end.offset]);var F=U.map(function(oe){var ae=s(oe,2),Q=ae[0],ee=ae[1],Y=l.default.find(Q,!0),V=Y.offset(N.scroll);return ee===0?V:Y instanceof l.default.Container?V+Y.length():V+Y.index(Q,ee)}),J=Math.min(Math.max.apply(Math,b(F)),this.scroll.length()-1),Z=Math.min.apply(Math,[J].concat(b(F)));return new C(Z,J-Z)}},{key:"normalizeNative",value:function(R){if(!M(this.root,R.startContainer)||!R.collapsed&&!M(this.root,R.endContainer))return null;var N={start:{node:R.startContainer,offset:R.startOffset},end:{node:R.endContainer,offset:R.endOffset},native:R};return[N.start,N.end].forEach(function(U){for(var F=U.node,J=U.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>J)F=F.childNodes[J],J=0;else if(F.childNodes.length===J)F=F.lastChild,J=F instanceof Text?F.data.length:F.childNodes.length+1;else break;U.node=F,U.offset=J}),N}},{key:"rangeToNative",value:function(R){var N=this,U=R.collapsed?[R.index]:[R.index,R.index+R.length],F=[],J=this.scroll.length();return U.forEach(function(Z,oe){Z=Math.min(J-1,Z);var ae=void 0,Q=N.scroll.leaf(Z),ee=s(Q,2),Y=ee[0],V=ee[1],X=Y.position(V,oe!==0),re=s(X,2);ae=re[0],V=re[1],F.push(ae,V)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(R){var N=this.lastRange;if(N!=null){var U=this.getBounds(N.index,N.length);if(U!=null){var F=this.scroll.length()-1,J=this.scroll.line(Math.min(N.index,F)),Z=s(J,1),oe=Z[0],ae=oe;if(N.length>0){var Q=this.scroll.line(Math.min(N.index+N.length,F)),ee=s(Q,1);ae=ee[0]}if(!(oe==null||ae==null)){var Y=R.getBoundingClientRect();U.top<Y.top?R.scrollTop-=Y.top-U.top:U.bottom>Y.bottom&&(R.scrollTop+=U.bottom-Y.bottom)}}}}},{key:"setNativeRange",value:function(R,N){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N,J=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(S.info("setNativeRange",R,N,U,F),!(R!=null&&(this.root.parentNode==null||R.parentNode==null||U.parentNode==null))){var Z=document.getSelection();if(Z!=null)if(R!=null){this.hasFocus()||this.root.focus();var oe=(this.getNativeRange()||{}).native;if(oe==null||J||R!==oe.startContainer||N!==oe.startOffset||U!==oe.endContainer||F!==oe.endOffset){R.tagName=="BR"&&(N=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode),U.tagName=="BR"&&(F=[].indexOf.call(U.parentNode.childNodes,U),U=U.parentNode);var ae=document.createRange();ae.setStart(R,N),ae.setEnd(U,F),Z.removeAllRanges(),Z.addRange(ae)}}else Z.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(R){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof N=="string"&&(U=N,N=!1),S.info("setRange",R),R!=null){var F=this.rangeToNative(R);this.setNativeRange.apply(this,b(F).concat([N]))}else this.setNativeRange(null);this.update(U)}},{key:"update",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,N=this.lastRange,U=this.getRange(),F=s(U,2),J=F[0],Z=F[1];if(this.lastRange=J,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(N,this.lastRange)){var oe;!this.composing&&Z!=null&&Z.native.collapsed&&Z.start.node!==this.cursor.textNode&&this.cursor.restore();var ae=[g.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(N),R];if((oe=this.emitter).emit.apply(oe,[g.default.events.EDITOR_CHANGE].concat(ae)),R!==g.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,ae)}}}}]),P})();function M(P,O){try{O.parentNode}catch{return!1}return O instanceof Text&&(O=O.parentNode),P.contains(O)}r.Range=C,r.default=D}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function g(x,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,_,v){return _&&g(x.prototype,_),v&&g(x,v),x}})(),o=function g(x,_,v){x===null&&(x=Function.prototype);var b=Object.getOwnPropertyDescriptor(x,_);if(b===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:g(E,_,v)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(v)}},a=i(0),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,[{key:"insertInto",value:function(v,b){v.children.length===0?o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertInto",this).call(this,v,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),x})(l.default.Embed);p.blotName="break",p.tagName="BR",r.default=p}),(function(t,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)p.hasOwnProperty(g)&&(f[g]=p[g])};return function(f,p){h(f,p);function g(){this.constructor=f}f.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=(function(h){s(f,h);function f(p){var g=h.call(this,p)||this;return g.build(),g}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var x=c(g);p.insertBefore(x,p.children.head||void 0)}catch(_){if(_ instanceof l.ParchmentError)return;throw _}})},f.prototype.deleteAt=function(p,g){if(p===0&&g===this.length())return this.remove();this.children.forEachAt(p,g,function(x,_,v){x.deleteAt(_,v)})},f.prototype.descendant=function(p,g){var x=this.children.find(g),_=x[0],v=x[1];return p.blotName==null&&p(_)||p.blotName!=null&&_ instanceof p?[_,v]:_ instanceof f?_.descendant(p,v):[null,-1]},f.prototype.descendants=function(p,g,x){g===void 0&&(g=0),x===void 0&&(x=Number.MAX_VALUE);var _=[],v=x;return this.children.forEachAt(g,x,function(b,E,S){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&_.push(b),b instanceof f&&(_=_.concat(b.descendants(p,E,v))),v-=S}),_},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(p,g,x,_){this.children.forEachAt(p,g,function(v,b,E){v.formatAt(b,E,x,_)})},f.prototype.insertAt=function(p,g,x){var _=this.children.find(p),v=_[0],b=_[1];if(v)v.insertAt(b,g,x);else{var E=x==null?l.create("text",g):l.create(g,x);this.appendChild(E)}},f.prototype.insertBefore=function(p,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(x){return p instanceof x}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,g)},f.prototype.length=function(){return this.children.reduce(function(p,g){return p+g.length()},0)},f.prototype.moveChildren=function(p,g){this.children.forEach(function(x){p.insertBefore(x,g)})},f.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var g=l.create(this.statics.defaultChild);this.appendChild(g),g.optimize(p)}else this.remove()},f.prototype.path=function(p,g){g===void 0&&(g=!1);var x=this.children.find(p,g),_=x[0],v=x[1],b=[[this,p]];return _ instanceof f?b.concat(_.path(v,g)):(_!=null&&b.push([_,v]),b)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),h.prototype.replace.call(this,p)},f.prototype.split=function(p,g){if(g===void 0&&(g=!1),!g){if(p===0)return this;if(p===this.length())return this.next}var x=this.clone();return this.parent.insertBefore(x,this.next),this.children.forEachAt(p,this.length(),function(_,v,b){_=_.split(v,g),x.appendChild(_)}),x},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,g){var x=this,_=[],v=[];p.forEach(function(b){b.target===x.domNode&&b.type==="childList"&&(_.push.apply(_,b.addedNodes),v.push.apply(v,b.removedNodes))}),v.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var E=l.find(b);E!=null&&(E.domNode.parentNode==null||E.domNode.parentNode===x.domNode)&&E.detach()}}),_.filter(function(b){return b.parentNode==x.domNode}).sort(function(b,E){return b===E?0:b.compareDocumentPosition(E)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var E=null;b.nextSibling!=null&&(E=l.find(b.nextSibling));var S=c(b);(S.next!=E||S.next==null)&&(S.parent!=null&&S.parent.removeChild(x),x.insertBefore(S,E||void 0))})},f})(a.default);function c(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(g){f.domNode.appendChild(g)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=u}),(function(t,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)p.hasOwnProperty(g)&&(f[g]=p[g])};return function(f,p){h(f,p);function g(){this.constructor=f}f.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),c=(function(h){s(f,h);function f(p){var g=h.call(this,p)||this;return g.attributes=new a.default(g.domNode),g}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,g){var x=u.query(p);x instanceof o.default?this.attributes.attribute(x,g):g&&x!=null&&(p!==this.statics.blotName||this.formats()[p]!==g)&&this.replaceWith(p,g)},f.prototype.formats=function(){var p=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(p[this.statics.blotName]=g),p},f.prototype.replaceWith=function(p,g){var x=h.prototype.replaceWith.call(this,p,g);return this.attributes.copy(x),x},f.prototype.update=function(p,g){var x=this;h.prototype.update.call(this,p,g),p.some(function(_){return _.target===x.domNode&&_.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,g){var x=h.prototype.wrap.call(this,p,g);return x instanceof f&&x.statics.scope===this.statics.scope&&this.attributes.move(x),x},f})(l.default);r.default=c}),(function(t,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(h){return!0},c.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},c.prototype.position=function(h,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},c.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},c.scope=a.Scope.INLINE_BLOT,c})(o.default);r.default=l}),(function(t,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,c,h){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var f=o(!0,{},c);h||(f=Object.keys(f).reduce(function(g,x){return f[x]!=null&&(g[x]=f[x]),g},{}));for(var p in u)u[p]!==void 0&&c[p]===void 0&&(f[p]=u[p]);return Object.keys(f).length>0?f:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(f,p){return s(u[p],c[p])||(f[p]=c[p]===void 0?null:c[p]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(u,c,h){if(typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var f=Object.keys(c).reduce(function(p,g){return u[g]===void 0&&(p[g]=c[g]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var h=this.offset,f=a.length(c);if(u>=f-h?(u=f-h,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var p={};return c.attributes&&(p.attributes=c.attributes),typeof c.retain=="number"?p.retain=u:typeof c.insert=="string"?p.insert=c.insert.substr(h,u):p.insert=c.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=c,[h].concat(f)}else return[]},t.exports=a}),(function(t,r){var i=(function(){function s(x,_){return _!=null&&x instanceof _}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(x,_,v,b,E){typeof _=="object"&&(v=_.depth,b=_.prototype,E=_.includeNonEnumerable,_=_.circular);var S=[],C=[],D=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof v>"u"&&(v=1/0);function M(P,O){if(P===null)return null;if(O===0)return P;var R,N;if(typeof P!="object")return P;if(s(P,o))R=new o;else if(s(P,a))R=new a;else if(s(P,l))R=new l(function(Y,V){P.then(function(X){Y(M(X,O-1))},function(X){V(M(X,O-1))})});else if(u.__isArray(P))R=[];else if(u.__isRegExp(P))R=new RegExp(P.source,g(P)),P.lastIndex&&(R.lastIndex=P.lastIndex);else if(u.__isDate(P))R=new Date(P.getTime());else{if(D&&Buffer.isBuffer(P))return Buffer.allocUnsafe?R=Buffer.allocUnsafe(P.length):R=new Buffer(P.length),P.copy(R),R;s(P,Error)?R=Object.create(P):typeof b>"u"?(N=Object.getPrototypeOf(P),R=Object.create(N)):(R=Object.create(b),N=b)}if(_){var U=S.indexOf(P);if(U!=-1)return C[U];S.push(P),C.push(R)}s(P,o)&&P.forEach(function(Y,V){var X=M(V,O-1),re=M(Y,O-1);R.set(X,re)}),s(P,a)&&P.forEach(function(Y){var V=M(Y,O-1);R.add(V)});for(var F in P){var J;N&&(J=Object.getOwnPropertyDescriptor(N,F)),!(J&&J.set==null)&&(R[F]=M(P[F],O-1))}if(Object.getOwnPropertySymbols)for(var Z=Object.getOwnPropertySymbols(P),F=0;F<Z.length;F++){var oe=Z[F],ae=Object.getOwnPropertyDescriptor(P,oe);ae&&!ae.enumerable&&!E||(R[oe]=M(P[oe],O-1),ae.enumerable||Object.defineProperty(R,oe,{enumerable:!1}))}if(E)for(var Q=Object.getOwnPropertyNames(P),F=0;F<Q.length;F++){var ee=Q[F],ae=Object.getOwnPropertyDescriptor(P,ee);ae&&ae.enumerable||(R[ee]=M(P[ee],O-1),Object.defineProperty(R,ee,{enumerable:!1}))}return R}return M(x,v)}u.clonePrototype=function(_){if(_===null)return null;var v=function(){};return v.prototype=_,new v};function c(x){return Object.prototype.toString.call(x)}u.__objToStr=c;function h(x){return typeof x=="object"&&c(x)==="[object Date]"}u.__isDate=h;function f(x){return typeof x=="object"&&c(x)==="[object Array]"}u.__isArray=f;function p(x){return typeof x=="object"&&c(x)==="[object RegExp]"}u.__isRegExp=p;function g(x){var _="";return x.global&&(_+="g"),x.ignoreCase&&(_+="i"),x.multiline&&(_+="m"),_}return u.__getRegExpFlags=g,u})();typeof t=="object"&&t.exports&&(t.exports=i)}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function R(N,U){var F=[],J=!0,Z=!1,oe=void 0;try{for(var ae=N[Symbol.iterator](),Q;!(J=(Q=ae.next()).done)&&(F.push(Q.value),!(U&&F.length===U));J=!0);}catch(ee){Z=!0,oe=ee}finally{try{!J&&ae.return&&ae.return()}finally{if(Z)throw oe}}return F}return function(N,U){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return R(N,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function R(N,U){for(var F=0;F<U.length;F++){var J=U[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,J.key,J)}}return function(N,U,F){return U&&R(N.prototype,U),F&&R(N,F),N}})(),a=function R(N,U,F){N===null&&(N=Function.prototype);var J=Object.getOwnPropertyDescriptor(N,U);if(J===void 0){var Z=Object.getPrototypeOf(N);return Z===null?void 0:R(Z,U,F)}else{if("value"in J)return J.value;var oe=J.get;return oe===void 0?void 0:oe.call(F)}},l=i(0),u=S(l),c=i(8),h=S(c),f=i(4),p=S(f),g=i(16),x=S(g),_=i(13),v=S(_),b=i(25),E=S(b);function S(R){return R&&R.__esModule?R:{default:R}}function C(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function D(R,N){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:R}function M(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}function P(R){return R instanceof p.default||R instanceof f.BlockEmbed}var O=(function(R){M(N,R);function N(U,F){C(this,N);var J=D(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,U));return J.emitter=F.emitter,Array.isArray(F.whitelist)&&(J.whitelist=F.whitelist.reduce(function(Z,oe){return Z[oe]=!0,Z},{})),J.domNode.addEventListener("DOMNodeInserted",function(){}),J.optimize(),J.enable(),J}return o(N,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,J){var Z=this.line(F),oe=s(Z,2),ae=oe[0],Q=oe[1],ee=this.line(F+J),Y=s(ee,1),V=Y[0];if(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"deleteAt",this).call(this,F,J),V!=null&&ae!==V&&Q>0){if(ae instanceof f.BlockEmbed||V instanceof f.BlockEmbed){this.optimize();return}if(ae instanceof v.default){var X=ae.newlineIndex(ae.length(),!0);if(X>-1&&(ae=ae.split(X+1),ae===V)){this.optimize();return}}else if(V instanceof v.default){var re=V.newlineIndex(0);re>-1&&V.split(re+1)}var se=V.children.head instanceof x.default?null:V.children.head;ae.moveChildren(V,se),ae.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,J,Z,oe){this.whitelist!=null&&!this.whitelist[Z]||(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"formatAt",this).call(this,F,J,Z,oe),this.optimize())}},{key:"insertAt",value:function(F,J,Z){if(!(Z!=null&&this.whitelist!=null&&!this.whitelist[J])){if(F>=this.length())if(Z==null||u.default.query(J,u.default.Scope.BLOCK)==null){var oe=u.default.create(this.statics.defaultChild);this.appendChild(oe),Z==null&&J.endsWith(`
`)&&(J=J.slice(0,-1)),oe.insertAt(0,J,Z)}else{var ae=u.default.create(J,Z);this.appendChild(ae)}else a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertAt",this).call(this,F,J,Z);this.optimize()}}},{key:"insertBefore",value:function(F,J){if(F.statics.scope===u.default.Scope.INLINE_BLOT){var Z=u.default.create(this.statics.defaultChild);Z.appendChild(F),F=Z}a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,F,J)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(P,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Z=function oe(ae,Q,ee){var Y=[],V=ee;return ae.children.forEachAt(Q,ee,function(X,re,se){P(X)?Y.push(X):X instanceof u.default.Container&&(Y=Y.concat(oe(X,re,V))),V-=se}),Y};return Z(this,F,J)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,F,J),F.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,F,J))}},{key:"path",value:function(F){return a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var J=h.default.sources.USER;typeof F=="string"&&(J=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,J,F),a(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,J,F)}}}]),N})(u.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[p.default,f.BlockEmbed,E.default],r.default=O}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},o=(function(){function te(ce,ve){var xe=[],Te=!0,$e=!1,De=void 0;try{for(var Be=ce[Symbol.iterator](),fe;!(Te=(fe=Be.next()).done)&&(xe.push(fe.value),!(ve&&xe.length===ve));Te=!0);}catch(it){$e=!0,De=it}finally{try{!Te&&Be.return&&Be.return()}finally{if($e)throw De}}return xe}return function(ce,ve){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return te(ce,ve);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function te(ce,ve){for(var xe=0;xe<ve.length;xe++){var Te=ve[xe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(ce,Te.key,Te)}}return function(ce,ve,xe){return ve&&te(ce.prototype,ve),xe&&te(ce,xe),ce}})(),l=i(21),u=R(l),c=i(11),h=R(c),f=i(3),p=R(f),g=i(2),x=R(g),_=i(20),v=R(_),b=i(0),E=R(b),S=i(5),C=R(S),D=i(10),M=R(D),P=i(9),O=R(P);function R(te){return te&&te.__esModule?te:{default:te}}function N(te,ce,ve){return ce in te?Object.defineProperty(te,ce,{value:ve,enumerable:!0,configurable:!0,writable:!0}):te[ce]=ve,te}function U(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")}function F(te,ce){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:te}function J(te,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ce):te.__proto__=ce)}var Z=(0,M.default)("quill:keyboard"),oe=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",ae=(function(te){J(ce,te),a(ce,null,[{key:"match",value:function(xe,Te){return Te=he(Te),["altKey","ctrlKey","metaKey","shiftKey"].some(function($e){return!!Te[$e]!==xe[$e]&&Te[$e]!==null})?!1:Te.key===(xe.which||xe.keyCode)}}]);function ce(ve,xe){U(this,ce);var Te=F(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this,ve,xe));return Te.bindings={},Object.keys(Te.options.bindings).forEach(function($e){$e==="list autofill"&&ve.scroll.whitelist!=null&&!ve.scroll.whitelist.list||Te.options.bindings[$e]&&Te.addBinding(Te.options.bindings[$e])}),Te.addBinding({key:ce.keys.ENTER,shiftKey:null},X),Te.addBinding({key:ce.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Te.addBinding({key:ce.keys.BACKSPACE},{collapsed:!0},ee),Te.addBinding({key:ce.keys.DELETE},{collapsed:!0},Y)):(Te.addBinding({key:ce.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},ee),Te.addBinding({key:ce.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Y)),Te.addBinding({key:ce.keys.BACKSPACE},{collapsed:!1},V),Te.addBinding({key:ce.keys.DELETE},{collapsed:!1},V),Te.addBinding({key:ce.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},ee),Te.listen(),Te}return a(ce,[{key:"addBinding",value:function(xe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=he(xe);if(De==null||De.key==null)return Z.warn("Attempted to add invalid keyboard binding",De);typeof Te=="function"&&(Te={handler:Te}),typeof $e=="function"&&($e={handler:$e}),De=(0,p.default)(De,Te,$e),this.bindings[De.key]=this.bindings[De.key]||[],this.bindings[De.key].push(De)}},{key:"listen",value:function(){var xe=this;this.quill.root.addEventListener("keydown",function(Te){if(!Te.defaultPrevented){var $e=Te.which||Te.keyCode,De=(xe.bindings[$e]||[]).filter(function(vt){return ce.match(Te,vt)});if(De.length!==0){var Be=xe.quill.getSelection();if(!(Be==null||!xe.quill.hasFocus())){var fe=xe.quill.getLine(Be.index),it=o(fe,2),Je=it[0],rt=it[1],we=xe.quill.getLeaf(Be.index),Ie=o(we,2),Ne=Ie[0],ie=Ie[1],q=Be.length===0?[Ne,ie]:xe.quill.getLeaf(Be.index+Be.length),me=o(q,2),de=me[0],ye=me[1],be=Ne instanceof E.default.Text?Ne.value().slice(0,ie):"",He=de instanceof E.default.Text?de.value().slice(ye):"",qe={collapsed:Be.length===0,empty:Be.length===0&&Je.length()<=1,format:xe.quill.getFormat(Be),offset:rt,prefix:be,suffix:He},lt=De.some(function(vt){if(vt.collapsed!=null&&vt.collapsed!==qe.collapsed||vt.empty!=null&&vt.empty!==qe.empty||vt.offset!=null&&vt.offset!==qe.offset)return!1;if(Array.isArray(vt.format)){if(vt.format.every(function(Ye){return qe.format[Ye]==null}))return!1}else if(s(vt.format)==="object"&&!Object.keys(vt.format).every(function(Ye){return vt.format[Ye]===!0?qe.format[Ye]!=null:vt.format[Ye]===!1?qe.format[Ye]==null:(0,h.default)(vt.format[Ye],qe.format[Ye])}))return!1;return vt.prefix!=null&&!vt.prefix.test(qe.prefix)||vt.suffix!=null&&!vt.suffix.test(qe.suffix)?!1:vt.handler.call(xe,Be,qe)!==!0});lt&&Te.preventDefault()}}}})}}]),ce})(O.default);ae.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},ae.DEFAULTS={bindings:{bold:se("bold"),italic:se("italic"),underline:se("underline"),indent:{key:ae.keys.TAB,format:["blockquote","indent","list"],handler:function(ce,ve){if(ve.collapsed&&ve.offset!==0)return!0;this.quill.format("indent","+1",C.default.sources.USER)}},outdent:{key:ae.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ce,ve){if(ve.collapsed&&ve.offset!==0)return!0;this.quill.format("indent","-1",C.default.sources.USER)}},"outdent backspace":{key:ae.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ce,ve){ve.format.indent!=null?this.quill.format("indent","-1",C.default.sources.USER):ve.format.list!=null&&this.quill.format("list",!1,C.default.sources.USER)}},"indent code-block":re(!0),"outdent code-block":re(!1),"remove tab":{key:ae.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ce){this.quill.deleteText(ce.index-1,1,C.default.sources.USER)}},tab:{key:ae.keys.TAB,handler:function(ce){this.quill.history.cutoff();var ve=new x.default().retain(ce.index).delete(ce.length).insert("	");this.quill.updateContents(ve,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ce.index+1,C.default.sources.SILENT)}},"list empty enter":{key:ae.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ce,ve){this.quill.format("list",!1,C.default.sources.USER),ve.format.indent&&this.quill.format("indent",!1,C.default.sources.USER)}},"checklist enter":{key:ae.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ce){var ve=this.quill.getLine(ce.index),xe=o(ve,2),Te=xe[0],$e=xe[1],De=(0,p.default)({},Te.formats(),{list:"checked"}),Be=new x.default().retain(ce.index).insert(`
`,De).retain(Te.length()-$e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Be,C.default.sources.USER),this.quill.setSelection(ce.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:ae.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ce,ve){var xe=this.quill.getLine(ce.index),Te=o(xe,2),$e=Te[0],De=Te[1],Be=new x.default().retain(ce.index).insert(`
`,ve.format).retain($e.length()-De-1).retain(1,{header:null});this.quill.updateContents(Be,C.default.sources.USER),this.quill.setSelection(ce.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ce,ve){var xe=ve.prefix.length,Te=this.quill.getLine(ce.index),$e=o(Te,2),De=$e[0],Be=$e[1];if(Be>xe)return!0;var fe=void 0;switch(ve.prefix.trim()){case"[]":case"[ ]":fe="unchecked";break;case"[x]":fe="checked";break;case"-":case"*":fe="bullet";break;default:fe="ordered"}this.quill.insertText(ce.index," ",C.default.sources.USER),this.quill.history.cutoff();var it=new x.default().retain(ce.index-Be).delete(xe+1).retain(De.length()-2-Be).retain(1,{list:fe});this.quill.updateContents(it,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ce.index-xe,C.default.sources.SILENT)}},"code exit":{key:ae.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ce){var ve=this.quill.getLine(ce.index),xe=o(ve,2),Te=xe[0],$e=xe[1],De=new x.default().retain(ce.index+Te.length()-$e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(De,C.default.sources.USER)}},"embed left":Q(ae.keys.LEFT,!1),"embed left shift":Q(ae.keys.LEFT,!0),"embed right":Q(ae.keys.RIGHT,!1),"embed right shift":Q(ae.keys.RIGHT,!0)}};function Q(te,ce){var ve,xe=te===ae.keys.LEFT?"prefix":"suffix";return ve={key:te,shiftKey:ce,altKey:null},N(ve,xe,/^$/),N(ve,"handler",function($e){var De=$e.index;te===ae.keys.RIGHT&&(De+=$e.length+1);var Be=this.quill.getLeaf(De),fe=o(Be,1),it=fe[0];return it instanceof E.default.Embed?(te===ae.keys.LEFT?ce?this.quill.setSelection($e.index-1,$e.length+1,C.default.sources.USER):this.quill.setSelection($e.index-1,C.default.sources.USER):ce?this.quill.setSelection($e.index,$e.length+1,C.default.sources.USER):this.quill.setSelection($e.index+$e.length+1,C.default.sources.USER),!1):!0}),ve}function ee(te,ce){if(!(te.index===0||this.quill.getLength()<=1)){var ve=this.quill.getLine(te.index),xe=o(ve,1),Te=xe[0],$e={};if(ce.offset===0){var De=this.quill.getLine(te.index-1),Be=o(De,1),fe=Be[0];if(fe!=null&&fe.length()>1){var it=Te.formats(),Je=this.quill.getFormat(te.index-1,1);$e=v.default.attributes.diff(it,Je)||{}}}var rt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ce.prefix)?2:1;this.quill.deleteText(te.index-rt,rt,C.default.sources.USER),Object.keys($e).length>0&&this.quill.formatLine(te.index-rt,rt,$e,C.default.sources.USER),this.quill.focus()}}function Y(te,ce){var ve=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ce.suffix)?2:1;if(!(te.index>=this.quill.getLength()-ve)){var xe={},Te=0,$e=this.quill.getLine(te.index),De=o($e,1),Be=De[0];if(ce.offset>=Be.length()-1){var fe=this.quill.getLine(te.index+1),it=o(fe,1),Je=it[0];if(Je){var rt=Be.formats(),we=this.quill.getFormat(te.index,1);xe=v.default.attributes.diff(rt,we)||{},Te=Je.length()}}this.quill.deleteText(te.index,ve,C.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(te.index+Te-1,ve,xe,C.default.sources.USER)}}function V(te){var ce=this.quill.getLines(te),ve={};if(ce.length>1){var xe=ce[0].formats(),Te=ce[ce.length-1].formats();ve=v.default.attributes.diff(Te,xe)||{}}this.quill.deleteText(te,C.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(te.index,1,ve,C.default.sources.USER),this.quill.setSelection(te.index,C.default.sources.SILENT),this.quill.focus()}function X(te,ce){var ve=this;te.length>0&&this.quill.scroll.deleteAt(te.index,te.length);var xe=Object.keys(ce.format).reduce(function(Te,$e){return E.default.query($e,E.default.Scope.BLOCK)&&!Array.isArray(ce.format[$e])&&(Te[$e]=ce.format[$e]),Te},{});this.quill.insertText(te.index,`
`,xe,C.default.sources.USER),this.quill.setSelection(te.index+1,C.default.sources.SILENT),this.quill.focus(),Object.keys(ce.format).forEach(function(Te){xe[Te]==null&&(Array.isArray(ce.format[Te])||Te!=="link"&&ve.quill.format(Te,ce.format[Te],C.default.sources.USER))})}function re(te){return{key:ae.keys.TAB,shiftKey:!te,format:{"code-block":!0},handler:function(ve){var xe=E.default.query("code-block"),Te=ve.index,$e=ve.length,De=this.quill.scroll.descendant(xe,Te),Be=o(De,2),fe=Be[0],it=Be[1];if(fe!=null){var Je=this.quill.getIndex(fe),rt=fe.newlineIndex(it,!0)+1,we=fe.newlineIndex(Je+it+$e),Ie=fe.domNode.textContent.slice(rt,we).split(`
`);it=0,Ie.forEach(function(Ne,ie){te?(fe.insertAt(rt+it,xe.TAB),it+=xe.TAB.length,ie===0?Te+=xe.TAB.length:$e+=xe.TAB.length):Ne.startsWith(xe.TAB)&&(fe.deleteAt(rt+it,xe.TAB.length),it-=xe.TAB.length,ie===0?Te-=xe.TAB.length:$e-=xe.TAB.length),it+=Ne.length+1}),this.quill.update(C.default.sources.USER),this.quill.setSelection(Te,$e,C.default.sources.SILENT)}}}}function se(te){return{key:te[0].toUpperCase(),shortKey:!0,handler:function(ve,xe){this.quill.format(te,!xe.format[te],C.default.sources.USER)}}}function he(te){if(typeof te=="string"||typeof te=="number")return he({key:te});if((typeof te>"u"?"undefined":s(te))==="object"&&(te=(0,u.default)(te,!1)),typeof te.key=="string")if(ae.keys[te.key.toUpperCase()]!=null)te.key=ae.keys[te.key.toUpperCase()];else if(te.key.length===1)te.key=te.key.toUpperCase().charCodeAt(0);else return null;return te.shortKey&&(te[oe]=te.shortKey,delete te.shortKey),te}r.default=ae,r.SHORTKEY=oe}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function v(b,E){var S=[],C=!0,D=!1,M=void 0;try{for(var P=b[Symbol.iterator](),O;!(C=(O=P.next()).done)&&(S.push(O.value),!(E&&S.length===E));C=!0);}catch(R){D=!0,M=R}finally{try{!C&&P.return&&P.return()}finally{if(D)throw M}}return S}return function(b,E){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return v(b,E);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function v(b,E,S){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,E);if(C===void 0){var D=Object.getPrototypeOf(b);return D===null?void 0:v(D,E,S)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(S)}},a=(function(){function v(b,E){for(var S=0;S<E.length;S++){var C=E[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,E,S){return E&&v(b.prototype,E),S&&v(b,S),b}})(),l=i(0),u=f(l),c=i(7),h=f(c);function f(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function g(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function x(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var _=(function(v){x(b,v),a(b,null,[{key:"value",value:function(){}}]);function b(E,S){p(this,b);var C=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,E));return C.selection=S,C.textNode=document.createTextNode(b.CONTENTS),C.domNode.appendChild(C.textNode),C._length=0,C}return a(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(S,C){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,S,C);for(var D=this,M=0;D!=null&&D.statics.scope!==u.default.Scope.BLOCK_BLOT;)M+=D.offset(D.parent),D=D.parent;D!=null&&(this._length=b.CONTENTS.length,D.optimize(),D.formatAt(M,b.CONTENTS.length,S,C),this._length=0)}},{key:"index",value:function(S,C){return S===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,S,C)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var S=this.textNode,C=this.selection.getNativeRange(),D=void 0,M=void 0,P=void 0;if(C!=null&&C.start.node===S&&C.end.node===S){var O=[S,C.start.offset,C.end.offset];D=O[0],M=O[1],P=O[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var R=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof h.default?(D=this.next.domNode,this.next.insertAt(0,R),this.textNode.data=b.CONTENTS):(this.textNode.data=R,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),M!=null){var N=[M,P].map(function(F){return Math.max(0,Math.min(D.data.length,F-1))}),U=s(N,2);return M=U[0],P=U[1],{startNode:D,startOffset:M,endNode:D,endOffset:P}}}}},{key:"update",value:function(S,C){var D=this;if(S.some(function(P){return P.type==="characterData"&&P.target===D.textNode})){var M=this.restore();M&&(C.range=M)}}},{key:"value",value:function(){return""}}]),b})(u.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",r.default=_}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,b,E)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(E)}},a=i(0),l=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function c(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function f(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var p=(function(_){f(v,_);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(E){var S=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,E);return S.startsWith("rgb(")?(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+S.split(",").map(function(C){return("00"+parseInt(C).toString(16)).slice(-2)}).join("")):S}}]),v})(l.default.Attributor.Style),g=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),x=new p("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=g,r.ColorStyle=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=(function(){function x(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&x(_.prototype,v),b&&x(_,b),_}})(),o=function x(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:x(S,v,b)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(b)}},a=i(6),l=u(a);function u(x){return x&&x.__esModule?x:{default:x}}function c(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function h(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function f(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var p=(function(x){f(_,x);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"format",value:function(b,E){if(b!==this.statics.blotName||!E)return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,b,E);E=this.constructor.sanitize(E),this.domNode.setAttribute("href",E)}}],[{key:"create",value:function(b){var E=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,b);return b=this.sanitize(b),E.setAttribute("href",b),E.setAttribute("rel","noopener noreferrer"),E.setAttribute("target","_blank"),E}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return g(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),_})(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(x,_){var v=document.createElement("a");v.href=x;var b=v.href.slice(0,v.href.indexOf(":"));return _.indexOf(b)>-1}r.default=p,r.sanitize=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},o=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),a=i(23),l=h(a),u=i(107),c=h(u);function h(_){return _&&_.__esModule?_:{default:_}}function f(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}var p=0;function g(_,v){_.setAttribute(v,_.getAttribute(v)!=="true")}var x=(function(){function _(v){var b=this;f(this,_),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:b.togglePicker();break;case l.default.keys.ESCAPE:b.escape(),E.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var E=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),b.hasAttribute("value")&&S.setAttribute("data-value",b.getAttribute("value")),b.textContent&&S.setAttribute("data-label",b.textContent),S.addEventListener("click",function(){E.selectItem(S,!0)}),S.addEventListener("keydown",function(C){switch(C.keyCode){case l.default.keys.ENTER:E.selectItem(S,!0),C.preventDefault();break;case l.default.keys.ESCAPE:E.escape(),C.preventDefault();break}}),S}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=c.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,E=document.createElement("span");E.classList.add("ql-picker-options"),E.setAttribute("aria-hidden","true"),E.tabIndex="-1",E.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",E.id),this.options=E,[].slice.call(this.select.options).forEach(function(S){var C=b.buildItem(S);E.appendChild(C),S.selected===!0&&b.selectItem(C)}),this.container.appendChild(E)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(E){b.container.setAttribute(E.name,E.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=this.container.querySelector(".ql-selected");if(b!==S&&(S!=null&&S.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),E))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var C=document.createEvent("Event");C.initEvent("change",!0,!0),this.select.dispatchEvent(C)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var E=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(E)}else this.selectItem(null);var S=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),_})();r.default=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=Z(s),a=i(5),l=Z(a),u=i(4),c=Z(u),h=i(16),f=Z(h),p=i(25),g=Z(p),x=i(24),_=Z(x),v=i(35),b=Z(v),E=i(6),S=Z(E),C=i(22),D=Z(C),M=i(7),P=Z(M),O=i(55),R=Z(O),N=i(42),U=Z(N),F=i(23),J=Z(F);function Z(oe){return oe&&oe.__esModule?oe:{default:oe}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":g.default,"blots/cursor":_.default,"blots/embed":b.default,"blots/inline":S.default,"blots/scroll":D.default,"blots/text":P.default,"modules/clipboard":R.default,"modules/history":U.default,"modules/keyboard":J.default}),o.default.register(c.default,f.default,_.default,S.default,D.default,P.default),r.default=l.default}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=(function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},a.prototype.formatAt=function(l,u,c,h){var f=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&h)f.wrap(c,h);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var p=s.create(this.statics.scope);f.wrap(p),p.format(c,h)}},a.prototype.insertAt=function(l,u,c){var h=c==null?s.create("text",u):s.create(u,c),f=this.split(l);this.parent.insertBefore(h,f)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a})();r.default=o}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=(function(){function c(h){this.attributes={},this.domNode=h,this.build()}return c.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},c.prototype.build=function(){var h=this;this.attributes={};var f=s.default.keys(this.domNode),p=o.default.keys(this.domNode),g=a.default.keys(this.domNode);f.concat(p).concat(g).forEach(function(x){var _=l.query(x,l.Scope.ATTRIBUTE);_ instanceof s.default&&(h.attributes[_.attrName]=_)})},c.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(p){var g=f.attributes[p].value(f.domNode);h.format(p,g)})},c.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},c.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=h.attributes[p].value(h.domNode),f},{})},c})();r.default=u}),(function(t,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,c){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(c+"-")===0})}var l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},c.prototype.remove=function(h){var f=a(h,this.keyName);f.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},c.prototype.value=function(h){var f=a(h,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},c})(o.default);r.default=l}),(function(t,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var c=u.split("-"),h=c.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return c[0]+h}var l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[a(this.keyName)]=f,!0):!1},c.prototype.remove=function(h){h.style[a(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},c.prototype.value=function(h){var f=h.style[a(this.keyName)];return this.canAdd(h,f)?f:""},c})(o.default);r.default=l}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}})();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=(function(){function l(u,c){o(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(h){c.modules[h]==null&&c.addModule(h)})}},{key:"addModule",value:function(c){var h=this.quill.constructor.import("modules/"+c);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l})();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function v(b,E){for(var S=0;S<E.length;S++){var C=E[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,E,S){return E&&v(b.prototype,E),S&&v(b,S),b}})(),o=function v(b,E,S){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,E);if(C===void 0){var D=Object.getPrototypeOf(b);return D===null?void 0:v(D,E,S)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(S)}},a=i(0),l=h(a),u=i(7),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function g(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x="\uFEFF",_=(function(v){g(b,v);function b(E){f(this,b);var S=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,E));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(C){S.contentNode.appendChild(C)}),S.leftGuard=document.createTextNode(x),S.rightGuard=document.createTextNode(x),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return s(b,[{key:"index",value:function(S,C){return S===this.leftGuard?0:S===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,S,C)}},{key:"restore",value:function(S){var C=void 0,D=void 0,M=S.data.split(x).join("");if(S===this.leftGuard)if(this.prev instanceof c.default){var P=this.prev.length();this.prev.insertAt(P,M),C={startNode:this.prev.domNode,startOffset:P+M.length}}else D=document.createTextNode(M),this.parent.insertBefore(l.default.create(D),this),C={startNode:D,startOffset:M.length};else S===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,M),C={startNode:this.next.domNode,startOffset:M.length}):(D=document.createTextNode(M),this.parent.insertBefore(l.default.create(D),this.next),C={startNode:D,startOffset:M.length}));return S.data=x,C}},{key:"update",value:function(S,C){var D=this;S.forEach(function(M){if(M.type==="characterData"&&(M.target===D.leftGuard||M.target===D.rightGuard)){var P=D.restore(M.target);P&&(C.range=P)}})}}]),b})(l.default.Embed);r.default=_}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),h=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=c,r.AlignStyle=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(h){return h&&h.__esModule?h:{default:h}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=c}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),h=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=c,r.DirectionStyle=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=(function(){function v(b,E){for(var S=0;S<E.length;S++){var C=E[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,E,S){return E&&v(b.prototype,E),S&&v(b,S),b}})(),o=function v(b,E,S){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,E);if(C===void 0){var D=Object.getPrototypeOf(b);return D===null?void 0:v(D,E,S)}else{if("value"in C)return C.value;var M=C.get;return M===void 0?void 0:M.call(S)}},a=i(0),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function h(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new l.default.Attributor.Class("font","ql-font",p),x=(function(v){f(b,v);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"value",value:function(S){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),b})(l.default.Attributor.Style),_=new x("font","font-family",p);r.FontStyle=_,r.FontClass=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u}),(function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=(function(){function E(S,C){for(var D=0;D<C.length;D++){var M=C[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,C,D){return C&&E(S.prototype,C),D&&E(S,D),S}})(),o=i(0),a=f(o),l=i(5),u=f(l),c=i(9),h=f(c);function f(E){return E&&E.__esModule?E:{default:E}}function p(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function g(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function x(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var _=(function(E){x(S,E);function S(C,D){p(this,S);var M=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,D));return M.lastRecorded=0,M.ignoreChange=!1,M.clear(),M.quill.on(u.default.events.EDITOR_CHANGE,function(P,O,R,N){P!==u.default.events.TEXT_CHANGE||M.ignoreChange||(!M.options.userOnly||N===u.default.sources.USER?M.record(O,R):M.transform(O))}),M.quill.keyboard.addBinding({key:"Z",shortKey:!0},M.undo.bind(M)),M.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},M.redo.bind(M)),/Win/i.test(navigator.platform)&&M.quill.keyboard.addBinding({key:"Y",shortKey:!0},M.redo.bind(M)),M}return s(S,[{key:"change",value:function(D,M){if(this.stack[D].length!==0){var P=this.stack[D].pop();this.stack[M].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[D],u.default.sources.USER),this.ignoreChange=!1;var O=b(P[D]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(D,M){if(D.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(M),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var R=this.stack.undo.pop();P=P.compose(R.undo),D=R.redo.compose(D)}else this.lastRecorded=O;this.stack.undo.push({redo:D,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(D){this.stack.undo.forEach(function(M){M.undo=D.transform(M.undo,!0),M.redo=D.transform(M.redo,!0)}),this.stack.redo.forEach(function(M){M.undo=D.transform(M.undo,!0),M.redo=D.transform(M.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S})(h.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(E){var S=E.ops[E.ops.length-1];return S==null?!1:S.insert!=null?typeof S.insert=="string"&&S.insert.endsWith(`
`):S.attributes!=null?Object.keys(S.attributes).some(function(C){return a.default.query(C,a.default.Scope.BLOCK)!=null}):!1}function b(E){var S=E.reduce(function(D,M){return D+=M.delete||0,D},0),C=E.length()-S;return v(E)&&(C-=1),C}r.default=_,r.getLastChangeIndex=b}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=(function(){function X(re,se){for(var he=0;he<se.length;he++){var te=se[he];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(re,te.key,te)}}return function(re,se,he){return se&&X(re.prototype,se),he&&X(re,he),re}})(),o=function X(re,se,he){re===null&&(re=Function.prototype);var te=Object.getOwnPropertyDescriptor(re,se);if(te===void 0){var ce=Object.getPrototypeOf(re);return ce===null?void 0:X(ce,se,he)}else{if("value"in te)return te.value;var ve=te.get;return ve===void 0?void 0:ve.call(he)}},a=i(3),l=O(a),u=i(2),c=O(u),h=i(8),f=O(h),p=i(23),g=O(p),x=i(34),_=O(x),v=i(59),b=O(v),E=i(60),S=O(E),C=i(28),D=O(C),M=i(61),P=O(M);function O(X){return X&&X.__esModule?X:{default:X}}function R(X,re){if(!(X instanceof re))throw new TypeError("Cannot call a class as a function")}function N(X,re){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:X}function U(X,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);X.prototype=Object.create(re&&re.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(X,re):X.__proto__=re)}var F=[!1,"center","right","justify"],J=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Z=[!1,"serif","monospace"],oe=["1","2","3",!1],ae=["small",!1,"large","huge"],Q=(function(X){U(re,X);function re(se,he){R(this,re);var te=N(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,se,he)),ce=function ve(xe){if(!document.body.contains(se.root))return document.body.removeEventListener("click",ve);te.tooltip!=null&&!te.tooltip.root.contains(xe.target)&&document.activeElement!==te.tooltip.textbox&&!te.quill.hasFocus()&&te.tooltip.hide(),te.pickers!=null&&te.pickers.forEach(function(Te){Te.container.contains(xe.target)||Te.close()})};return se.emitter.listenDOM("click",document.body,ce),te}return s(re,[{key:"addModule",value:function(he){var te=o(re.prototype.__proto__||Object.getPrototypeOf(re.prototype),"addModule",this).call(this,he);return he==="toolbar"&&this.extendToolbar(te),te}},{key:"buildButtons",value:function(he,te){he.forEach(function(ce){var ve=ce.getAttribute("class")||"";ve.split(/\s+/).forEach(function(xe){if(xe.startsWith("ql-")&&(xe=xe.slice(3),te[xe]!=null))if(xe==="direction")ce.innerHTML=te[xe][""]+te[xe].rtl;else if(typeof te[xe]=="string")ce.innerHTML=te[xe];else{var Te=ce.value||"";Te!=null&&te[xe][Te]&&(ce.innerHTML=te[xe][Te])}})})}},{key:"buildPickers",value:function(he,te){var ce=this;this.pickers=he.map(function(xe){if(xe.classList.contains("ql-align"))return xe.querySelector("option")==null&&V(xe,F),new S.default(xe,te.align);if(xe.classList.contains("ql-background")||xe.classList.contains("ql-color")){var Te=xe.classList.contains("ql-background")?"background":"color";return xe.querySelector("option")==null&&V(xe,J,Te==="background"?"#ffffff":"#000000"),new b.default(xe,te[Te])}else return xe.querySelector("option")==null&&(xe.classList.contains("ql-font")?V(xe,Z):xe.classList.contains("ql-header")?V(xe,oe):xe.classList.contains("ql-size")&&V(xe,ae)),new D.default(xe)});var ve=function(){ce.pickers.forEach(function(Te){Te.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,ve)}}]),re})(_.default);Q.DEFAULTS=(0,l.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var re=this,se=this.container.querySelector("input.ql-image[type=file]");se==null&&(se=document.createElement("input"),se.setAttribute("type","file"),se.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),se.classList.add("ql-image"),se.addEventListener("change",function(){if(se.files!=null&&se.files[0]!=null){var he=new FileReader;he.onload=function(te){var ce=re.quill.getSelection(!0);re.quill.updateContents(new c.default().retain(ce.index).delete(ce.length).insert({image:te.target.result}),f.default.sources.USER),re.quill.setSelection(ce.index+1,f.default.sources.SILENT),se.value=""},he.readAsDataURL(se.files[0])}}),this.container.appendChild(se)),se.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var ee=(function(X){U(re,X);function re(se,he){R(this,re);var te=N(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,se,he));return te.textbox=te.root.querySelector('input[type="text"]'),te.listen(),te}return s(re,[{key:"listen",value:function(){var he=this;this.textbox.addEventListener("keydown",function(te){g.default.match(te,"enter")?(he.save(),te.preventDefault()):g.default.match(te,"escape")&&(he.cancel(),te.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),te!=null?this.textbox.value=te:he!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+he)||""),this.root.setAttribute("data-mode",he)}},{key:"restoreFocus",value:function(){var he=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=he}},{key:"save",value:function(){var he=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var te=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",he,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",he,f.default.sources.USER)),this.quill.root.scrollTop=te;break}case"video":he=Y(he);case"formula":{if(!he)break;var ce=this.quill.getSelection(!0);if(ce!=null){var ve=ce.index+ce.length;this.quill.insertEmbed(ve,this.root.getAttribute("data-mode"),he,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ve+1," ",f.default.sources.USER),this.quill.setSelection(ve+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),re})(P.default);function Y(X){var re=X.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||X.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return re?(re[1]||"https")+"://www.youtube.com/embed/"+re[2]+"?showinfo=0":(re=X.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(re[1]||"https")+"://player.vimeo.com/video/"+re[2]+"/":X}function V(X,re){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;re.forEach(function(he){var te=document.createElement("option");he===se?te.setAttribute("selected","selected"):te.setAttribute("value",he),X.appendChild(te)})}r.BaseTooltip=ee,r.default=Q}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var h=u.length();if(a<h||l&&a===h&&(u.next==null||u.next.length()!==0))return[u,a];a-=h}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var c=this.find(a),h=c[0],f=c[1],p,g=a-f,x=this.iterator(h);(p=x())&&g<a+l;){var _=p.length();a>g?u(p,a-g,Math.min(l,g+_-a)):u(p,0,Math.min(_,a+l-g)),g+=_}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,c=this.iterator();u=c();)l=a(l,u);return l},o})();r.default=s}),(function(t,r,i){var s=this&&this.__extends||(function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var g in p)p.hasOwnProperty(g)&&(f[g]=p[g])};return function(f,p){h(f,p);function g(){this.constructor=f}f.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=(function(h){s(f,h);function f(p){var g=h.call(this,p)||this;return g.scroll=g,g.observer=new MutationObserver(function(x){g.update(x)}),g.observer.observe(g.domNode,l),g.attach(),g}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,g){this.update(),p===0&&g===this.length()?this.children.forEach(function(x){x.remove()}):h.prototype.deleteAt.call(this,p,g)},f.prototype.formatAt=function(p,g,x,_){this.update(),h.prototype.formatAt.call(this,p,g,x,_)},f.prototype.insertAt=function(p,g,x){this.update(),h.prototype.insertAt.call(this,p,g,x)},f.prototype.optimize=function(p,g){var x=this;p===void 0&&(p=[]),g===void 0&&(g={}),h.prototype.optimize.call(this,g);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)p.push(_.pop());for(var v=function(C,D){D===void 0&&(D=!0),!(C==null||C===x)&&C.domNode.parentNode!=null&&(C.domNode[a.DATA_KEY].mutations==null&&(C.domNode[a.DATA_KEY].mutations=[]),D&&v(C.parent))},b=function(C){C.domNode[a.DATA_KEY]==null||C.domNode[a.DATA_KEY].mutations==null||(C instanceof o.default&&C.children.forEach(b),C.optimize(g))},E=p,S=0;E.length>0;S+=1){if(S>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(E.forEach(function(C){var D=a.find(C.target,!0);D!=null&&(D.domNode===C.target&&(C.type==="childList"?(v(a.find(C.previousSibling,!1)),[].forEach.call(C.addedNodes,function(M){var P=a.find(M,!1);v(P,!1),P instanceof o.default&&P.children.forEach(function(O){v(O,!1)})})):C.type==="attributes"&&v(D.prev)),v(D))}),this.children.forEach(b),E=[].slice.call(this.observer.takeRecords()),_=E.slice();_.length>0;)p.push(_.pop())}},f.prototype.update=function(p,g){var x=this;g===void 0&&(g={}),p=p||this.observer.takeRecords(),p.map(function(_){var v=a.find(_.target,!0);return v==null?null:v.domNode[a.DATA_KEY].mutations==null?(v.domNode[a.DATA_KEY].mutations=[_],v):(v.domNode[a.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===x||_.domNode[a.DATA_KEY]==null||_.update(_.domNode[a.DATA_KEY].mutations||[],g)}),this.domNode[a.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,g),this.optimize(p,g)},f.blotName="scroll",f.defaultChild="block",f.scope=a.Scope.BLOCK_BLOT,f.tagName="DIV",f})(o.default);r.default=c}),(function(t,r,i){var s=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){c(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,h){if(Object.keys(c).length!==Object.keys(h).length)return!1;for(var f in c)if(c[f]!==h[f])return!1;return!0}var u=(function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return c.formats.call(this,f)},h.prototype.format=function(f,p){var g=this;f===this.statics.blotName&&!p?(this.children.forEach(function(x){x instanceof o.default||(x=x.wrap(h.blotName,!0)),g.attributes.copy(x)}),this.unwrap()):c.prototype.format.call(this,f,p)},h.prototype.formatAt=function(f,p,g,x){if(this.formats()[g]!=null||a.query(g,a.Scope.ATTRIBUTE)){var _=this.isolate(f,p);_.format(g,x)}else c.prototype.formatAt.call(this,f,p,g,x)},h.prototype.optimize=function(f){c.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var g=this.next;g instanceof h&&g.prev===this&&l(p,g.formats())&&(g.moveChildren(this),g.remove())},h.blotName="inline",h.scope=a.Scope.INLINE_BLOT,h.tagName="SPAN",h})(o.default);r.default=u}),(function(t,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=(function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(h){var f=a.query(c.blotName).tagName;if(h.tagName!==f)return u.formats.call(this,h)},c.prototype.format=function(h,f){a.query(h,a.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(c.blotName):u.prototype.format.call(this,h,f))},c.prototype.formatAt=function(h,f,p,g){a.query(p,a.Scope.BLOCK)!=null?this.format(p,g):u.prototype.formatAt.call(this,h,f,p,g)},c.prototype.insertAt=function(h,f,p){if(p==null||a.query(f,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,f,p);else{var g=this.split(h),x=a.create(f,p);g.parent.insertBefore(x,g)}},c.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,f)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c})(o.default);r.default=l}),(function(t,r,i){var s=this&&this.__extends||(function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])};return function(u,c){l(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=(function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,h){l.prototype.formatAt.call(this,0,this.length(),c,h)},u.prototype.formatAt=function(c,h,f,p){c===0&&h===this.length()?this.format(f,p):l.prototype.formatAt.call(this,c,h,f,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(o.default);r.default=a}),(function(t,r,i){var s=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}})();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=(function(u){s(c,u);function c(h){var f=u.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return c.create=function(h){return document.createTextNode(h)},c.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},c.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},c.prototype.index=function(h,f){return this.domNode===h?f:-1},c.prototype.insertAt=function(h,f,p){p==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,f,p)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(h,f){return[this.domNode,h]},c.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var p=a.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},c.prototype.update=function(h,f){var p=this;h.some(function(g){return g.type==="characterData"&&g.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c})(o.default);r.default=l}),(function(t,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var c=u.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,h=arguments[1],f,p=0;p<c;p++)if(f=u[p],l.call(h,f,p,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(t,r){var i=-1,s=1,o=0;function a(S,C,D){if(S==C)return S?[[o,S]]:[];(D<0||S.length<D)&&(D=null);var M=h(S,C),P=S.substring(0,M);S=S.substring(M),C=C.substring(M),M=f(S,C);var O=S.substring(S.length-M);S=S.substring(0,S.length-M),C=C.substring(0,C.length-M);var R=l(S,C);return P&&R.unshift([o,P]),O&&R.push([o,O]),g(R),D!=null&&(R=v(R,D)),R=b(R),R}function l(S,C){var D;if(!S)return[[s,C]];if(!C)return[[i,S]];var M=S.length>C.length?S:C,P=S.length>C.length?C:S,O=M.indexOf(P);if(O!=-1)return D=[[s,M.substring(0,O)],[o,P],[s,M.substring(O+P.length)]],S.length>C.length&&(D[0][0]=D[2][0]=i),D;if(P.length==1)return[[i,S],[s,C]];var R=p(S,C);if(R){var N=R[0],U=R[1],F=R[2],J=R[3],Z=R[4],oe=a(N,F),ae=a(U,J);return oe.concat([[o,Z]],ae)}return u(S,C)}function u(S,C){for(var D=S.length,M=C.length,P=Math.ceil((D+M)/2),O=P,R=2*P,N=new Array(R),U=new Array(R),F=0;F<R;F++)N[F]=-1,U[F]=-1;N[O+1]=0,U[O+1]=0;for(var J=D-M,Z=J%2!=0,oe=0,ae=0,Q=0,ee=0,Y=0;Y<P;Y++){for(var V=-Y+oe;V<=Y-ae;V+=2){var X=O+V,re;V==-Y||V!=Y&&N[X-1]<N[X+1]?re=N[X+1]:re=N[X-1]+1;for(var se=re-V;re<D&&se<M&&S.charAt(re)==C.charAt(se);)re++,se++;if(N[X]=re,re>D)ae+=2;else if(se>M)oe+=2;else if(Z){var he=O+J-V;if(he>=0&&he<R&&U[he]!=-1){var te=D-U[he];if(re>=te)return c(S,C,re,se)}}}for(var ce=-Y+Q;ce<=Y-ee;ce+=2){var he=O+ce,te;ce==-Y||ce!=Y&&U[he-1]<U[he+1]?te=U[he+1]:te=U[he-1]+1;for(var ve=te-ce;te<D&&ve<M&&S.charAt(D-te-1)==C.charAt(M-ve-1);)te++,ve++;if(U[he]=te,te>D)ee+=2;else if(ve>M)Q+=2;else if(!Z){var X=O+J-ce;if(X>=0&&X<R&&N[X]!=-1){var re=N[X],se=O+re-X;if(te=D-te,re>=te)return c(S,C,re,se)}}}}return[[i,S],[s,C]]}function c(S,C,D,M){var P=S.substring(0,D),O=C.substring(0,M),R=S.substring(D),N=C.substring(M),U=a(P,O),F=a(R,N);return U.concat(F)}function h(S,C){if(!S||!C||S.charAt(0)!=C.charAt(0))return 0;for(var D=0,M=Math.min(S.length,C.length),P=M,O=0;D<P;)S.substring(O,P)==C.substring(O,P)?(D=P,O=D):M=P,P=Math.floor((M-D)/2+D);return P}function f(S,C){if(!S||!C||S.charAt(S.length-1)!=C.charAt(C.length-1))return 0;for(var D=0,M=Math.min(S.length,C.length),P=M,O=0;D<P;)S.substring(S.length-P,S.length-O)==C.substring(C.length-P,C.length-O)?(D=P,O=D):M=P,P=Math.floor((M-D)/2+D);return P}function p(S,C){var D=S.length>C.length?S:C,M=S.length>C.length?C:S;if(D.length<4||M.length*2<D.length)return null;function P(ae,Q,ee){for(var Y=ae.substring(ee,ee+Math.floor(ae.length/4)),V=-1,X="",re,se,he,te;(V=Q.indexOf(Y,V+1))!=-1;){var ce=h(ae.substring(ee),Q.substring(V)),ve=f(ae.substring(0,ee),Q.substring(0,V));X.length<ve+ce&&(X=Q.substring(V-ve,V)+Q.substring(V,V+ce),re=ae.substring(0,ee-ve),se=ae.substring(ee+ce),he=Q.substring(0,V-ve),te=Q.substring(V+ce))}return X.length*2>=ae.length?[re,se,he,te,X]:null}var O=P(D,M,Math.ceil(D.length/4)),R=P(D,M,Math.ceil(D.length/2)),N;if(!O&&!R)return null;R?O?N=O[4].length>R[4].length?O:R:N=R:N=O;var U,F,J,Z;S.length>C.length?(U=N[0],F=N[1],J=N[2],Z=N[3]):(J=N[0],Z=N[1],U=N[2],F=N[3]);var oe=N[4];return[U,F,J,Z,oe]}function g(S){S.push([o,""]);for(var C=0,D=0,M=0,P="",O="",R;C<S.length;)switch(S[C][0]){case s:M++,O+=S[C][1],C++;break;case i:D++,P+=S[C][1],C++;break;case o:D+M>1?(D!==0&&M!==0&&(R=h(O,P),R!==0&&(C-D-M>0&&S[C-D-M-1][0]==o?S[C-D-M-1][1]+=O.substring(0,R):(S.splice(0,0,[o,O.substring(0,R)]),C++),O=O.substring(R),P=P.substring(R)),R=f(O,P),R!==0&&(S[C][1]=O.substring(O.length-R)+S[C][1],O=O.substring(0,O.length-R),P=P.substring(0,P.length-R))),D===0?S.splice(C-M,D+M,[s,O]):M===0?S.splice(C-D,D+M,[i,P]):S.splice(C-D-M,D+M,[i,P],[s,O]),C=C-D-M+(D?1:0)+(M?1:0)+1):C!==0&&S[C-1][0]==o?(S[C-1][1]+=S[C][1],S.splice(C,1)):C++,M=0,D=0,P="",O="";break}S[S.length-1][1]===""&&S.pop();var N=!1;for(C=1;C<S.length-1;)S[C-1][0]==o&&S[C+1][0]==o&&(S[C][1].substring(S[C][1].length-S[C-1][1].length)==S[C-1][1]?(S[C][1]=S[C-1][1]+S[C][1].substring(0,S[C][1].length-S[C-1][1].length),S[C+1][1]=S[C-1][1]+S[C+1][1],S.splice(C-1,1),N=!0):S[C][1].substring(0,S[C+1][1].length)==S[C+1][1]&&(S[C-1][1]+=S[C+1][1],S[C][1]=S[C][1].substring(S[C+1][1].length)+S[C+1][1],S.splice(C+1,1),N=!0)),C++;N&&g(S)}var x=a;x.INSERT=s,x.DELETE=i,x.EQUAL=o,t.exports=x;function _(S,C){if(C===0)return[o,S];for(var D=0,M=0;M<S.length;M++){var P=S[M];if(P[0]===i||P[0]===o){var O=D+P[1].length;if(C===O)return[M+1,S];if(C<O){S=S.slice();var R=C-D,N=[P[0],P[1].slice(0,R)],U=[P[0],P[1].slice(R)];return S.splice(M,1,N,U),[M+1,S]}else D=O}}throw new Error("cursor_pos is out of bounds!")}function v(S,C){var D=_(S,C),M=D[1],P=D[0],O=M[P],R=M[P+1];if(O==null)return S;if(O[0]!==o)return S;if(R!=null&&O[1]+R[1]===R[1]+O[1])return M.splice(P,2,R,O),E(M,P,2);if(R!=null&&R[1].indexOf(O[1])===0){M.splice(P,2,[R[0],O[1]],[0,O[1]]);var N=R[1].slice(O[1].length);return N.length>0&&M.splice(P+2,0,[R[0],N]),E(M,P,3)}else return S}function b(S){for(var C=!1,D=function(R){return R.charCodeAt(0)>=56320&&R.charCodeAt(0)<=57343},M=function(R){return R.charCodeAt(R.length-1)>=55296&&R.charCodeAt(R.length-1)<=56319},P=2;P<S.length;P+=1)S[P-2][0]===o&&M(S[P-2][1])&&S[P-1][0]===i&&D(S[P-1][1])&&S[P][0]===s&&D(S[P][1])&&(C=!0,S[P-1][1]=S[P-2][1].slice(-1)+S[P-1][1],S[P][1]=S[P-2][1].slice(-1)+S[P][1],S[P-2][1]=S[P-2][1].slice(0,-1));if(!C)return S;for(var O=[],P=0;P<S.length;P+=1)S[P][1].length>0&&O.push(S[P]);return O}function E(S,C,D){for(var M=C+D-1;M>=0&&M>=C-1;M--)if(M+1<S.length){var P=S[M],O=S[M+1];P[0]===O[1]&&S.splice(M,2,[P[0],P[1]+O[1]])}return S}}),(function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}}),(function(t,r){var i=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";r=t.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}}),(function(t,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,f;if(this._eventsCount===0)return c;for(f in h=this._events)i.call(h,f)&&c.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c,h){var f=s?s+c:c,p=this._events[f];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var g=0,x=p.length,_=new Array(x);g<x;g++)_[g]=p[g].fn;return _},l.prototype.emit=function(c,h,f,p,g,x){var _=s?s+c:c;if(!this._events[_])return!1;var v=this._events[_],b=arguments.length,E,S;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,p),!0;case 5:return v.fn.call(v.context,h,f,p,g),!0;case 6:return v.fn.call(v.context,h,f,p,g,x),!0}for(S=1,E=new Array(b-1);S<b;S++)E[S-1]=arguments[S];v.fn.apply(v.context,E)}else{var C=v.length,D;for(S=0;S<C;S++)switch(v[S].once&&this.removeListener(c,v[S].fn,void 0,!0),b){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,h);break;case 3:v[S].fn.call(v[S].context,h,f);break;case 4:v[S].fn.call(v[S].context,h,f,p);break;default:if(!E)for(D=1,E=new Array(b-1);D<b;D++)E[D-1]=arguments[D];v[S].fn.apply(v[S].context,E)}}return!0},l.prototype.on=function(c,h,f){var p=new a(h,f||this),g=s?s+c:c;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},l.prototype.once=function(c,h,f){var p=new a(h,f||this,!0),g=s?s+c:c;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},l.prototype.removeListener=function(c,h,f,p){var g=s?s+c:c;if(!this._events[g])return this;if(!h)return--this._eventsCount===0?this._events=new o:delete this._events[g],this;var x=this._events[g];if(x.fn)x.fn===h&&(!p||x.once)&&(!f||x.context===f)&&(--this._eventsCount===0?this._events=new o:delete this._events[g]);else{for(var _=0,v=[],b=x.length;_<b;_++)(x[_].fn!==h||p&&!x[_].once||f&&x[_].context!==f)&&v.push(x[_]);v.length?this._events[g]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[g]}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=s?s+c:c,this._events[h]&&(--this._eventsCount===0?this._events=new o:delete this._events[h])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof t<"u"&&(t.exports=l)}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},o=(function(){function we(Ie,Ne){var ie=[],q=!0,me=!1,de=void 0;try{for(var ye=Ie[Symbol.iterator](),be;!(q=(be=ye.next()).done)&&(ie.push(be.value),!(Ne&&ie.length===Ne));q=!0);}catch(He){me=!0,de=He}finally{try{!q&&ye.return&&ye.return()}finally{if(me)throw de}}return ie}return function(Ie,Ne){if(Array.isArray(Ie))return Ie;if(Symbol.iterator in Object(Ie))return we(Ie,Ne);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),a=(function(){function we(Ie,Ne){for(var ie=0;ie<Ne.length;ie++){var q=Ne[ie];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}return function(Ie,Ne,ie){return Ne&&we(Ie.prototype,Ne),ie&&we(Ie,ie),Ie}})(),l=i(3),u=U(l),c=i(2),h=U(c),f=i(0),p=U(f),g=i(5),x=U(g),_=i(10),v=U(_),b=i(9),E=U(b),S=i(36),C=i(37),D=i(13),M=U(D),P=i(26),O=i(38),R=i(39),N=i(40);function U(we){return we&&we.__esModule?we:{default:we}}function F(we,Ie,Ne){return Ie in we?Object.defineProperty(we,Ie,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):we[Ie]=Ne,we}function J(we,Ie){if(!(we instanceof Ie))throw new TypeError("Cannot call a class as a function")}function Z(we,Ie){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie&&(typeof Ie=="object"||typeof Ie=="function")?Ie:we}function oe(we,Ie){if(typeof Ie!="function"&&Ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);we.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Ie):we.__proto__=Ie)}var ae=(0,v.default)("quill:clipboard"),Q="__ql-matcher",ee=[[Node.TEXT_NODE,rt],[Node.TEXT_NODE,fe],["br",$e],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,Te],[Node.ELEMENT_NODE,it],[Node.ELEMENT_NODE,xe],[Node.ELEMENT_NODE,Je],["li",Be],["b",ve.bind(ve,"bold")],["i",ve.bind(ve,"italic")],["style",De]],Y=[S.AlignAttribute,O.DirectionAttribute].reduce(function(we,Ie){return we[Ie.keyName]=Ie,we},{}),V=[S.AlignStyle,C.BackgroundStyle,P.ColorStyle,O.DirectionStyle,R.FontStyle,N.SizeStyle].reduce(function(we,Ie){return we[Ie.keyName]=Ie,we},{}),X=(function(we){oe(Ie,we);function Ie(Ne,ie){J(this,Ie);var q=Z(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,Ne,ie));return q.quill.root.addEventListener("paste",q.onPaste.bind(q)),q.container=q.quill.addContainer("ql-clipboard"),q.container.setAttribute("contenteditable",!0),q.container.setAttribute("tabindex",-1),q.matchers=[],ee.concat(q.options.matchers).forEach(function(me){var de=o(me,2),ye=de[0],be=de[1];!ie.matchVisual&&be===it||q.addMatcher(ye,be)}),q}return a(Ie,[{key:"addMatcher",value:function(ie,q){this.matchers.push([ie,q])}},{key:"convert",value:function(ie){if(typeof ie=="string")return this.container.innerHTML=ie.replace(/\>\r?\n +\</g,"><"),this.convert();var q=this.quill.getFormat(this.quill.selection.savedRange.index);if(q[M.default.blotName]){var me=this.container.innerText;return this.container.innerHTML="",new h.default().insert(me,F({},M.default.blotName,q[M.default.blotName]))}var de=this.prepareMatching(),ye=o(de,2),be=ye[0],He=ye[1],qe=ce(this.container,be,He);return he(qe,`
`)&&qe.ops[qe.ops.length-1].attributes==null&&(qe=qe.compose(new h.default().retain(qe.length()-1).delete(1))),ae.log("convert",this.container.innerHTML,qe),this.container.innerHTML="",qe}},{key:"dangerouslyPasteHTML",value:function(ie,q){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;if(typeof ie=="string")this.quill.setContents(this.convert(ie),q),this.quill.setSelection(0,x.default.sources.SILENT);else{var de=this.convert(q);this.quill.updateContents(new h.default().retain(ie).concat(de),me),this.quill.setSelection(ie+de.length(),x.default.sources.SILENT)}}},{key:"onPaste",value:function(ie){var q=this;if(!(ie.defaultPrevented||!this.quill.isEnabled())){var me=this.quill.getSelection(),de=new h.default().retain(me.index),ye=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(x.default.sources.SILENT),setTimeout(function(){de=de.concat(q.convert()).delete(me.length),q.quill.updateContents(de,x.default.sources.USER),q.quill.setSelection(de.length()-me.length,x.default.sources.SILENT),q.quill.scrollingContainer.scrollTop=ye,q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ie=this,q=[],me=[];return this.matchers.forEach(function(de){var ye=o(de,2),be=ye[0],He=ye[1];switch(be){case Node.TEXT_NODE:me.push(He);break;case Node.ELEMENT_NODE:q.push(He);break;default:[].forEach.call(ie.container.querySelectorAll(be),function(qe){qe[Q]=qe[Q]||[],qe[Q].push(He)});break}}),[q,me]}}]),Ie})(E.default);X.DEFAULTS={matchers:[],matchVisual:!0};function re(we,Ie,Ne){return(typeof Ie>"u"?"undefined":s(Ie))==="object"?Object.keys(Ie).reduce(function(ie,q){return re(ie,q,Ie[q])},we):we.reduce(function(ie,q){return q.attributes&&q.attributes[Ie]?ie.push(q):ie.insert(q.insert,(0,u.default)({},F({},Ie,Ne),q.attributes))},new h.default)}function se(we){if(we.nodeType!==Node.ELEMENT_NODE)return{};var Ie="__ql-computed-style";return we[Ie]||(we[Ie]=window.getComputedStyle(we))}function he(we,Ie){for(var Ne="",ie=we.ops.length-1;ie>=0&&Ne.length<Ie.length;--ie){var q=we.ops[ie];if(typeof q.insert!="string")break;Ne=q.insert+Ne}return Ne.slice(-1*Ie.length)===Ie}function te(we){if(we.childNodes.length===0)return!1;var Ie=se(we);return["block","list-item"].indexOf(Ie.display)>-1}function ce(we,Ie,Ne){return we.nodeType===we.TEXT_NODE?Ne.reduce(function(ie,q){return q(we,ie)},new h.default):we.nodeType===we.ELEMENT_NODE?[].reduce.call(we.childNodes||[],function(ie,q){var me=ce(q,Ie,Ne);return q.nodeType===we.ELEMENT_NODE&&(me=Ie.reduce(function(de,ye){return ye(q,de)},me),me=(q[Q]||[]).reduce(function(de,ye){return ye(q,de)},me)),ie.concat(me)},new h.default):new h.default}function ve(we,Ie,Ne){return re(Ne,we,!0)}function xe(we,Ie){var Ne=p.default.Attributor.Attribute.keys(we),ie=p.default.Attributor.Class.keys(we),q=p.default.Attributor.Style.keys(we),me={};return Ne.concat(ie).concat(q).forEach(function(de){var ye=p.default.query(de,p.default.Scope.ATTRIBUTE);ye!=null&&(me[ye.attrName]=ye.value(we),me[ye.attrName])||(ye=Y[de],ye!=null&&(ye.attrName===de||ye.keyName===de)&&(me[ye.attrName]=ye.value(we)||void 0),ye=V[de],ye!=null&&(ye.attrName===de||ye.keyName===de)&&(ye=V[de],me[ye.attrName]=ye.value(we)||void 0))}),Object.keys(me).length>0&&(Ie=re(Ie,me)),Ie}function Te(we,Ie){var Ne=p.default.query(we);if(Ne==null)return Ie;if(Ne.prototype instanceof p.default.Embed){var ie={},q=Ne.value(we);q!=null&&(ie[Ne.blotName]=q,Ie=new h.default().insert(ie,Ne.formats(we)))}else typeof Ne.formats=="function"&&(Ie=re(Ie,Ne.blotName,Ne.formats(we)));return Ie}function $e(we,Ie){return he(Ie,`
`)||Ie.insert(`
`),Ie}function De(){return new h.default}function Be(we,Ie){var Ne=p.default.query(we);if(Ne==null||Ne.blotName!=="list-item"||!he(Ie,`
`))return Ie;for(var ie=-1,q=we.parentNode;!q.classList.contains("ql-clipboard");)(p.default.query(q)||{}).blotName==="list"&&(ie+=1),q=q.parentNode;return ie<=0?Ie:Ie.compose(new h.default().retain(Ie.length()-1).retain(1,{indent:ie}))}function fe(we,Ie){return he(Ie,`
`)||(te(we)||Ie.length()>0&&we.nextSibling&&te(we.nextSibling))&&Ie.insert(`
`),Ie}function it(we,Ie){if(te(we)&&we.nextElementSibling!=null&&!he(Ie,`

`)){var Ne=we.offsetHeight+parseFloat(se(we).marginTop)+parseFloat(se(we).marginBottom);we.nextElementSibling.offsetTop>we.offsetTop+Ne*1.5&&Ie.insert(`
`)}return Ie}function Je(we,Ie){var Ne={},ie=we.style||{};return ie.fontStyle&&se(we).fontStyle==="italic"&&(Ne.italic=!0),ie.fontWeight&&(se(we).fontWeight.startsWith("bold")||parseInt(se(we).fontWeight)>=700)&&(Ne.bold=!0),Object.keys(Ne).length>0&&(Ie=re(Ie,Ne)),parseFloat(ie.textIndent||0)>0&&(Ie=new h.default().insert("	").concat(Ie)),Ie}function rt(we,Ie){var Ne=we.data;if(we.parentNode.tagName==="O:P")return Ie.insert(Ne.trim());if(Ne.trim().length===0&&we.parentNode.classList.contains("ql-clipboard"))return Ie;if(!se(we.parentNode).whiteSpace.startsWith("pre")){var ie=function(me,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&me?" ":de};Ne=Ne.replace(/\r\n/g," ").replace(/\n/g," "),Ne=Ne.replace(/\s\s+/g,ie.bind(ie,!0)),(we.previousSibling==null&&te(we.parentNode)||we.previousSibling!=null&&te(we.previousSibling))&&(Ne=Ne.replace(/^\s+/,ie.bind(ie,!1))),(we.nextSibling==null&&te(we.parentNode)||we.nextSibling!=null&&te(we.nextSibling))&&(Ne=Ne.replace(/\s+$/,ie.bind(ie,!1)))}return Ie.insert(Ne)}r.default=X,r.matchAttributor=xe,r.matchBlot=Te,r.matchNewline=fe,r.matchSpacing=it,r.matchText=rt}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function g(x,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,_,v){return _&&g(x.prototype,_),v&&g(x,v),x}})(),o=function g(x,_,v){x===null&&(x=Function.prototype);var b=Object.getOwnPropertyDescriptor(x,_);if(b===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:g(E,_,v)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(v)}},a=i(6),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,[{key:"optimize",value:function(v){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),x})(l.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=(function(){function N(U,F){var J=[],Z=!0,oe=!1,ae=void 0;try{for(var Q=U[Symbol.iterator](),ee;!(Z=(ee=Q.next()).done)&&(J.push(ee.value),!(F&&J.length===F));Z=!0);}catch(Y){oe=!0,ae=Y}finally{try{!Z&&Q.return&&Q.return()}finally{if(oe)throw ae}}return J}return function(U,F){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return N(U,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function N(U,F){for(var J=0;J<F.length;J++){var Z=F[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,F,J){return F&&N(U.prototype,F),J&&N(U,J),U}})(),a=i(2),l=v(a),u=i(0),c=v(u),h=i(5),f=v(h),p=i(10),g=v(p),x=i(9),_=v(x);function v(N){return N&&N.__esModule?N:{default:N}}function b(N,U,F){return U in N?Object.defineProperty(N,U,{value:F,enumerable:!0,configurable:!0,writable:!0}):N[U]=F,N}function E(N,U){if(!(N instanceof U))throw new TypeError("Cannot call a class as a function")}function S(N,U){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:N}function C(N,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);N.prototype=Object.create(U&&U.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(N,U):N.__proto__=U)}var D=(0,g.default)("quill:toolbar"),M=(function(N){C(U,N);function U(F,J){E(this,U);var Z=S(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,F,J));if(Array.isArray(Z.options.container)){var oe=document.createElement("div");O(oe,Z.options.container),F.container.parentNode.insertBefore(oe,F.container),Z.container=oe}else typeof Z.options.container=="string"?Z.container=document.querySelector(Z.options.container):Z.container=Z.options.container;if(!(Z.container instanceof HTMLElement)){var ae;return ae=D.error("Container required for toolbar",Z.options),S(Z,ae)}return Z.container.classList.add("ql-toolbar"),Z.controls=[],Z.handlers={},Object.keys(Z.options.handlers).forEach(function(Q){Z.addHandler(Q,Z.options.handlers[Q])}),[].forEach.call(Z.container.querySelectorAll("button, select"),function(Q){Z.attach(Q)}),Z.quill.on(f.default.events.EDITOR_CHANGE,function(Q,ee){Q===f.default.events.SELECTION_CHANGE&&Z.update(ee)}),Z.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Q=Z.quill.selection.getRange(),ee=s(Q,1),Y=ee[0];Z.update(Y)}),Z}return o(U,[{key:"addHandler",value:function(J,Z){this.handlers[J]=Z}},{key:"attach",value:function(J){var Z=this,oe=[].find.call(J.classList,function(Q){return Q.indexOf("ql-")===0});if(oe){if(oe=oe.slice(3),J.tagName==="BUTTON"&&J.setAttribute("type","button"),this.handlers[oe]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[oe]==null){D.warn("ignoring attaching to disabled format",oe,J);return}if(c.default.query(oe)==null){D.warn("ignoring attaching to nonexistent format",oe,J);return}}var ae=J.tagName==="SELECT"?"change":"click";J.addEventListener(ae,function(Q){var ee=void 0;if(J.tagName==="SELECT"){if(J.selectedIndex<0)return;var Y=J.options[J.selectedIndex];Y.hasAttribute("selected")?ee=!1:ee=Y.value||!1}else J.classList.contains("ql-active")?ee=!1:ee=J.value||!J.hasAttribute("value"),Q.preventDefault();Z.quill.focus();var V=Z.quill.selection.getRange(),X=s(V,1),re=X[0];if(Z.handlers[oe]!=null)Z.handlers[oe].call(Z,ee);else if(c.default.query(oe).prototype instanceof c.default.Embed){if(ee=prompt("Enter "+oe),!ee)return;Z.quill.updateContents(new l.default().retain(re.index).delete(re.length).insert(b({},oe,ee)),f.default.sources.USER)}else Z.quill.format(oe,ee,f.default.sources.USER);Z.update(re)}),this.controls.push([oe,J])}}},{key:"update",value:function(J){var Z=J==null?{}:this.quill.getFormat(J);this.controls.forEach(function(oe){var ae=s(oe,2),Q=ae[0],ee=ae[1];if(ee.tagName==="SELECT"){var Y=void 0;if(J==null)Y=null;else if(Z[Q]==null)Y=ee.querySelector("option[selected]");else if(!Array.isArray(Z[Q])){var V=Z[Q];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),Y=ee.querySelector('option[value="'+V+'"]')}Y==null?(ee.value="",ee.selectedIndex=-1):Y.selected=!0}else if(J==null)ee.classList.remove("ql-active");else if(ee.hasAttribute("value")){var X=Z[Q]===ee.getAttribute("value")||Z[Q]!=null&&Z[Q].toString()===ee.getAttribute("value")||Z[Q]==null&&!ee.getAttribute("value");ee.classList.toggle("ql-active",X)}else ee.classList.toggle("ql-active",Z[Q]!=null)})}}]),U})(_.default);M.DEFAULTS={};function P(N,U,F){var J=document.createElement("button");J.setAttribute("type","button"),J.classList.add("ql-"+U),F!=null&&(J.value=F),N.appendChild(J)}function O(N,U){Array.isArray(U[0])||(U=[U]),U.forEach(function(F){var J=document.createElement("span");J.classList.add("ql-formats"),F.forEach(function(Z){if(typeof Z=="string")P(J,Z);else{var oe=Object.keys(Z)[0],ae=Z[oe];Array.isArray(ae)?R(J,oe,ae):P(J,oe,ae)}}),N.appendChild(J)})}function R(N,U,F){var J=document.createElement("select");J.classList.add("ql-"+U),F.forEach(function(Z){var oe=document.createElement("option");Z!==!1?oe.setAttribute("value",Z):oe.setAttribute("selected","selected"),J.appendChild(oe)}),N.appendChild(J)}M.DEFAULTS={container:null,handlers:{clean:function(){var U=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var J=this.quill.getFormat();Object.keys(J).forEach(function(Z){c.default.query(Z,c.default.Scope.INLINE)!=null&&U.quill.format(Z,!1)})}else this.quill.removeFormat(F,f.default.sources.USER)},direction:function(U){var F=this.quill.getFormat().align;U==="rtl"&&F==null?this.quill.format("align","right",f.default.sources.USER):!U&&F==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",U,f.default.sources.USER)},indent:function(U){var F=this.quill.getSelection(),J=this.quill.getFormat(F),Z=parseInt(J.indent||0);if(U==="+1"||U==="-1"){var oe=U==="+1"?1:-1;J.direction==="rtl"&&(oe*=-1),this.quill.format("indent",Z+oe,f.default.sources.USER)}},link:function(U){U===!0&&(U=prompt("Enter link URL:")),this.quill.format("link",U,f.default.sources.USER)},list:function(U){var F=this.quill.getSelection(),J=this.quill.getFormat(F);U==="check"?J.list==="checked"||J.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",U,f.default.sources.USER)}}},r.default=M,r.addControls=O}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function g(x,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,_,v){return _&&g(x.prototype,_),v&&g(x,v),x}})(),o=function g(x,_,v){x===null&&(x=Function.prototype);var b=Object.getOwnPropertyDescriptor(x,_);if(b===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:g(E,_,v)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(v)}},a=i(28),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(_,v){c(this,x);var b=h(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_));return b.label.innerHTML=v,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(E){E.classList.add("ql-primary")}),b}return s(x,[{key:"buildItem",value:function(v){var b=o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"buildItem",this).call(this,v);return b.style.backgroundColor=v.getAttribute("value")||"",b}},{key:"selectItem",value:function(v,b){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,b);var E=this.label.querySelector(".ql-color-label"),S=v&&v.getAttribute("data-value")||"";E&&(E.tagName==="line"?E.style.stroke=S:E.style.fill=S)}}]),x})(l.default);r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function g(x,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,_,v){return _&&g(x.prototype,_),v&&g(x,v),x}})(),o=function g(x,_,v){x===null&&(x=Function.prototype);var b=Object.getOwnPropertyDescriptor(x,_);if(b===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:g(E,_,v)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(v)}},a=i(28),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(_,v){c(this,x);var b=h(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,_));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(E){E.innerHTML=v[E.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return s(x,[{key:"selectItem",value:function(v,b){o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"selectItem",this).call(this,v,b),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),x})(l.default);r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}})();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=(function(){function l(u,c){var h=this;o(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var h=c.left+c.width/2-this.root.offsetWidth/2,f=c.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),x=0;if(g.right>p.right&&(x=p.right-g.right,this.root.style.left=h+x+"px"),g.left<p.left&&(x=p.left-g.left,this.root.style.left=h+x+"px"),g.bottom>p.bottom){var _=g.bottom-g.top,v=c.bottom-c.top+_;this.root.style.top=f-v+"px",this.root.classList.add("ql-flip")}return x}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l})();r.default=a}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function R(N,U){var F=[],J=!0,Z=!1,oe=void 0;try{for(var ae=N[Symbol.iterator](),Q;!(J=(Q=ae.next()).done)&&(F.push(Q.value),!(U&&F.length===U));J=!0);}catch(ee){Z=!0,oe=ee}finally{try{!J&&ae.return&&ae.return()}finally{if(Z)throw oe}}return F}return function(N,U){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return R(N,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function R(N,U,F){N===null&&(N=Function.prototype);var J=Object.getOwnPropertyDescriptor(N,U);if(J===void 0){var Z=Object.getPrototypeOf(N);return Z===null?void 0:R(Z,U,F)}else{if("value"in J)return J.value;var oe=J.get;return oe===void 0?void 0:oe.call(F)}},a=(function(){function R(N,U){for(var F=0;F<U.length;F++){var J=U[F];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,J.key,J)}}return function(N,U,F){return U&&R(N.prototype,U),F&&R(N,F),N}})(),l=i(3),u=E(l),c=i(8),h=E(c),f=i(43),p=E(f),g=i(27),x=E(g),_=i(15),v=i(41),b=E(v);function E(R){return R&&R.__esModule?R:{default:R}}function S(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function C(R,N){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:R}function D(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}var M=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=(function(R){D(N,R);function N(U,F){S(this,N),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=M);var J=C(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,U,F));return J.quill.container.classList.add("ql-snow"),J}return a(N,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),b.default),this.tooltip=new O(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(J,Z){F.handlers.link.call(F,!Z.format.link)})}}]),N})(p.default);P.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(N){if(N){var U=this.quill.getSelection();if(U==null||U.length==0)return;var F=this.quill.getText(U);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var J=this.quill.theme.tooltip;J.edit("link",F)}else this.quill.format("link",!1)}}}}});var O=(function(R){D(N,R);function N(U,F){S(this,N);var J=C(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,U,F));return J.preview=J.root.querySelector("a.ql-preview"),J}return a(N,[{key:"listen",value:function(){var F=this;o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(J){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),J.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(J){if(F.linkRange!=null){var Z=F.linkRange;F.restoreFocus(),F.quill.formatText(Z,"link",!1,h.default.sources.USER),delete F.linkRange}J.preventDefault(),F.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(J,Z,oe){if(J!=null){if(J.length===0&&oe===h.default.sources.USER){var ae=F.quill.scroll.descendant(x.default,J.index),Q=s(ae,2),ee=Q[0],Y=Q[1];if(ee!=null){F.linkRange=new _.Range(J.index-Y,ee.length());var V=x.default.formats(ee.domNode);F.preview.textContent=V,F.preview.setAttribute("href",V),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),N})(f.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=P}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=q(s),a=i(36),l=i(38),u=i(64),c=i(65),h=q(c),f=i(66),p=q(f),g=i(67),x=q(g),_=i(37),v=i(26),b=i(39),E=i(40),S=i(56),C=q(S),D=i(68),M=q(D),P=i(27),O=q(P),R=i(69),N=q(R),U=i(70),F=q(U),J=i(71),Z=q(J),oe=i(72),ae=q(oe),Q=i(73),ee=q(Q),Y=i(13),V=q(Y),X=i(74),re=q(X),se=i(75),he=q(se),te=i(57),ce=q(te),ve=i(41),xe=q(ve),Te=i(28),$e=q(Te),De=i(59),Be=q(De),fe=i(60),it=q(fe),Je=i(61),rt=q(Je),we=i(108),Ie=q(we),Ne=i(62),ie=q(Ne);function q(me){return me&&me.__esModule?me:{default:me}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":E.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":E.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":b.FontClass,"formats/size":E.SizeClass,"formats/blockquote":h.default,"formats/code-block":V.default,"formats/header":p.default,"formats/list":x.default,"formats/bold":C.default,"formats/code":Y.Code,"formats/italic":M.default,"formats/link":O.default,"formats/script":N.default,"formats/strike":F.default,"formats/underline":Z.default,"formats/image":ae.default,"formats/video":ee.default,"formats/list/item":g.ListItem,"modules/formula":re.default,"modules/syntax":he.default,"modules/toolbar":ce.default,"themes/bubble":Ie.default,"themes/snow":ie.default,"ui/icons":xe.default,"ui/picker":$e.default,"ui/icon-picker":it.default,"ui/color-picker":Be.default,"ui/tooltip":rt.default},!0),r.default=o.default}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=(function(){function x(_,v){for(var b=0;b<v.length;b++){var E=v[b];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(_,E.key,E)}}return function(_,v,b){return v&&x(_.prototype,v),b&&x(_,b),_}})(),o=function x(_,v,b){_===null&&(_=Function.prototype);var E=Object.getOwnPropertyDescriptor(_,v);if(E===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:x(S,v,b)}else{if("value"in E)return E.value;var C=E.get;return C===void 0?void 0:C.call(b)}},a=i(0),l=u(a);function u(x){return x&&x.__esModule?x:{default:x}}function c(x,_){if(!(x instanceof _))throw new TypeError("Cannot call a class as a function")}function h(x,_){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:x}function f(x,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);x.prototype=Object.create(_&&_.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(x,_):x.__proto__=_)}var p=(function(x){f(_,x);function _(){return c(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"add",value:function(b,E){if(E==="+1"||E==="-1"){var S=this.value(b)||0;E=E==="+1"?S+1:S-1}return E===0?(this.remove(b),!0):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,b,E)}},{key:"canAdd",value:function(b,E){return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,b,E)||o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,b,parseInt(E))}},{key:"value",value:function(b){return parseInt(o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,b))||void 0}}]),_})(l.default.Attributor.Class),g=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=g}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){c(p,f);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function p(g,x){for(var _=0;_<x.length;_++){var v=x[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,x,_){return x&&p(g.prototype,x),_&&p(g,_),g}})(),o=i(4),a=l(o);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function c(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function h(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var f=(function(p){h(g,p);function g(){return u(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),g})(a.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=(function(){function S(C,D){for(var M=0;M<D.length;M++){var P=D[M];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(C,P.key,P)}}return function(C,D,M){return D&&S(C.prototype,D),M&&S(C,M),C}})(),o=function S(C,D,M){C===null&&(C=Function.prototype);var P=Object.getOwnPropertyDescriptor(C,D);if(P===void 0){var O=Object.getPrototypeOf(C);return O===null?void 0:S(O,D,M)}else{if("value"in P)return P.value;var R=P.get;return R===void 0?void 0:R.call(M)}},a=i(0),l=p(a),u=i(4),c=p(u),h=i(25),f=p(h);function p(S){return S&&S.__esModule?S:{default:S}}function g(S,C,D){return C in S?Object.defineProperty(S,C,{value:D,enumerable:!0,configurable:!0,writable:!0}):S[C]=D,S}function x(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function _(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function v(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var b=(function(S){v(C,S);function C(){return x(this,C),_(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return s(C,[{key:"format",value:function(M,P){M===E.blotName&&!P?this.replaceWith(l.default.create(this.statics.scope)):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,M,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(M,P){return this.parent.isolate(this.offset(this.parent),this.length()),M===this.parent.statics.blotName?(this.parent.replaceWith(M,P),this):(this.parent.unwrap(),o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,M,P))}}],[{key:"formats",value:function(M){return M.tagName===this.tagName?void 0:o(C.__proto__||Object.getPrototypeOf(C),"formats",this).call(this,M)}}]),C})(c.default);b.blotName="list-item",b.tagName="LI";var E=(function(S){v(C,S),s(C,null,[{key:"create",value:function(M){var P=M==="ordered"?"OL":"UL",O=o(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,P);return(M==="checked"||M==="unchecked")&&O.setAttribute("data-checked",M==="checked"),O}},{key:"formats",value:function(M){if(M.tagName==="OL")return"ordered";if(M.tagName==="UL")return M.hasAttribute("data-checked")?M.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function C(D){x(this,C);var M=_(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,D)),P=function(R){if(R.target.parentNode===D){var N=M.statics.formats(D),U=l.default.find(R.target);N==="checked"?U.format("list","unchecked"):N==="unchecked"&&U.format("list","checked")}};return D.addEventListener("touchstart",P),D.addEventListener("mousedown",P),M}return s(C,[{key:"format",value:function(M,P){this.children.length>0&&this.children.tail.format(M,P)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(M,P){if(M instanceof b)o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,M,P);else{var O=P==null?this.length():P.offset(this),R=this.split(O);R.parent.insertBefore(M,R)}}},{key:"optimize",value:function(M){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,M);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(M){if(M.statics.blotName!==this.statics.blotName){var P=l.default.create(this.statics.defaultChild);M.moveChildren(P),this.appendChild(P)}o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,M)}}]),C})(f.default);E.blotName="list",E.scope=l.default.Scope.BLOCK_BLOT,E.tagName=["OL","UL"],E.defaultChild="list-item",E.allowedChildren=[b],r.ListItem=b,r.default=E}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){c(p,f);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function g(x,_){for(var v=0;v<_.length;v++){var b=_[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(x,b.key,b)}}return function(x,_,v){return _&&g(x.prototype,_),v&&g(x,v),x}})(),o=function g(x,_,v){x===null&&(x=Function.prototype);var b=Object.getOwnPropertyDescriptor(x,_);if(b===void 0){var E=Object.getPrototypeOf(x);return E===null?void 0:g(E,_,v)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(v)}},a=i(6),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function h(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function f(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var p=(function(g){f(x,g);function x(){return c(this,x),h(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),x})(l.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){c(p,f);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="strike",h.tagName="S",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(f){return f&&f.__esModule?f:{default:f}}function l(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function u(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function c(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=(function(f){c(p,f);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);h.blotName="underline",h.tagName="U",r.default=h}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,b,E)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(E)}},a=i(0),l=c(a),u=i(27);function c(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function f(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function p(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var g=["alt","height","width"],x=(function(_){p(v,_);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(E,S){g.indexOf(E)>-1?S?this.domNode.setAttribute(E,S):this.domNode.removeAttribute(E):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,E,S)}}],[{key:"create",value:function(E){var S=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,E);return typeof E=="string"&&S.setAttribute("src",this.sanitize(E)),S}},{key:"formats",value:function(E){return g.reduce(function(S,C){return E.hasAttribute(C)&&(S[C]=E.getAttribute(C)),S},{})}},{key:"match",value:function(E){return/\.(jpe?g|gif|png)$/.test(E)||/^data:image\/.+;base64/.test(E)}},{key:"sanitize",value:function(E){return(0,u.sanitize)(E,["http","https","data"])?E:"//:0"}},{key:"value",value:function(E){return E.getAttribute("src")}}]),v})(l.default.Embed);x.blotName="image",x.tagName="IMG",r.default=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=(function(){function _(v,b){for(var E=0;E<b.length;E++){var S=b[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(v,S.key,S)}}return function(v,b,E){return b&&_(v.prototype,b),E&&_(v,E),v}})(),o=function _(v,b,E){v===null&&(v=Function.prototype);var S=Object.getOwnPropertyDescriptor(v,b);if(S===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,b,E)}else{if("value"in S)return S.value;var D=S.get;return D===void 0?void 0:D.call(E)}},a=i(4),l=i(27),u=c(l);function c(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function f(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function p(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var g=["height","width"],x=(function(_){p(v,_);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(E,S){g.indexOf(E)>-1?S?this.domNode.setAttribute(E,S):this.domNode.removeAttribute(E):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,E,S)}}],[{key:"create",value:function(E){var S=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,E);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(E)),S}},{key:"formats",value:function(E){return g.reduce(function(S,C){return E.hasAttribute(C)&&(S[C]=E.getAttribute(C)),S},{})}},{key:"sanitize",value:function(E){return u.default.sanitize(E)}},{key:"value",value:function(E){return E.getAttribute("src")}}]),v})(a.BlockEmbed);x.blotName="video",x.className="ql-video",x.tagName="IFRAME",r.default=x}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=(function(){function E(S,C){for(var D=0;D<C.length;D++){var M=C[D];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(S,M.key,M)}}return function(S,C,D){return C&&E(S.prototype,C),D&&E(S,D),S}})(),o=function E(S,C,D){S===null&&(S=Function.prototype);var M=Object.getOwnPropertyDescriptor(S,C);if(M===void 0){var P=Object.getPrototypeOf(S);return P===null?void 0:E(P,C,D)}else{if("value"in M)return M.value;var O=M.get;return O===void 0?void 0:O.call(D)}},a=i(35),l=p(a),u=i(5),c=p(u),h=i(9),f=p(h);function p(E){return E&&E.__esModule?E:{default:E}}function g(E,S){if(!(E instanceof S))throw new TypeError("Cannot call a class as a function")}function x(E,S){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:E}function _(E,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);E.prototype=Object.create(S&&S.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(E,S):E.__proto__=S)}var v=(function(E){_(S,E);function S(){return g(this,S),x(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return s(S,null,[{key:"create",value:function(D){var M=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,D);return typeof D=="string"&&(window.katex.render(D,M,{throwOnError:!1,errorColor:"#f00"}),M.setAttribute("data-value",D)),M}},{key:"value",value:function(D){return D.getAttribute("data-value")}}]),S})(l.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var b=(function(E){_(S,E),s(S,null,[{key:"register",value:function(){c.default.register(v,!0)}}]);function S(){g(this,S);var C=x(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return C}return S})(f.default);r.FormulaBlot=v,r.default=b}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=(function(){function D(M,P){for(var O=0;O<P.length;O++){var R=P[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,R.key,R)}}return function(M,P,O){return P&&D(M.prototype,P),O&&D(M,O),M}})(),o=function D(M,P,O){M===null&&(M=Function.prototype);var R=Object.getOwnPropertyDescriptor(M,P);if(R===void 0){var N=Object.getPrototypeOf(M);return N===null?void 0:D(N,P,O)}else{if("value"in R)return R.value;var U=R.get;return U===void 0?void 0:U.call(O)}},a=i(0),l=x(a),u=i(5),c=x(u),h=i(9),f=x(h),p=i(13),g=x(p);function x(D){return D&&D.__esModule?D:{default:D}}function _(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function v(D,M){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:D}function b(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(D,M):D.__proto__=M)}var E=(function(D){b(M,D);function M(){return _(this,M),v(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return s(M,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),o(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var R=this.domNode.textContent;this.cachedText!==R&&((R.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=O(R),this.domNode.normalize(),this.attach()),this.cachedText=R)}}]),M})(g.default);E.className="ql-syntax";var S=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),C=(function(D){b(M,D),s(M,null,[{key:"register",value:function(){c.default.register(S,!0),c.default.register(E,!0)}}]);function M(P,O){_(this,M);var R=v(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,P,O));if(typeof R.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var N=null;return R.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(N),N=setTimeout(function(){R.highlight(),N=null},R.options.interval)}),R.highlight(),R}return s(M,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var R=this.quill.getSelection();this.quill.scroll.descendants(E).forEach(function(N){N.highlight(O.options.highlight)}),this.quill.update(c.default.sources.SILENT),R!=null&&this.quill.setSelection(R,c.default.sources.SILENT)}}}]),M})(f.default);C.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(D){var M=window.hljs.highlightAuto(D);return M.value}})(),interval:1e3},r.CodeBlock=E,r.CodeToken=S,r.default=C}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function M(P,O,R){P===null&&(P=Function.prototype);var N=Object.getOwnPropertyDescriptor(P,O);if(N===void 0){var U=Object.getPrototypeOf(P);return U===null?void 0:M(U,O,R)}else{if("value"in N)return N.value;var F=N.get;return F===void 0?void 0:F.call(R)}},o=(function(){function M(P,O){for(var R=0;R<O.length;R++){var N=O[R];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}return function(P,O,R){return O&&M(P.prototype,O),R&&M(P,R),P}})(),a=i(3),l=_(a),u=i(8),c=_(u),h=i(43),f=_(h),p=i(15),g=i(41),x=_(g);function _(M){return M&&M.__esModule?M:{default:M}}function v(M,P){if(!(M instanceof P))throw new TypeError("Cannot call a class as a function")}function b(M,P){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:M}function E(M,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);M.prototype=Object.create(P&&P.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(M,P):M.__proto__=P)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],C=(function(M){E(P,M);function P(O,R){v(this,P),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=S);var N=b(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,O,R));return N.quill.container.classList.add("ql-bubble"),N}return o(P,[{key:"extendToolbar",value:function(R){this.tooltip=new D(this.quill,this.options.bounds),this.tooltip.root.appendChild(R.container),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),x.default)}}]),P})(f.default);C.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var D=(function(M){E(P,M);function P(O,R){v(this,P);var N=b(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,O,R));return N.quill.on(c.default.events.EDITOR_CHANGE,function(U,F,J,Z){if(U===c.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&Z===c.default.sources.USER){N.show(),N.root.style.left="0px",N.root.style.width="",N.root.style.width=N.root.offsetWidth+"px";var oe=N.quill.getLines(F.index,F.length);if(oe.length===1)N.position(N.quill.getBounds(F));else{var ae=oe[oe.length-1],Q=N.quill.getIndex(ae),ee=Math.min(ae.length()-1,F.index+F.length-Q),Y=N.quill.getBounds(new p.Range(Q,ee));N.position(Y)}}else document.activeElement!==N.textbox&&N.quill.hasFocus()&&N.hide()}),N}return o(P,[{key:"listen",value:function(){var R=this;s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){R.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!R.root.classList.contains("ql-hidden")){var N=R.quill.getSelection();N!=null&&R.position(R.quill.getBounds(N))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(R){var N=s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,R),U=this.root.querySelector(".ql-tooltip-arrow");if(U.style.marginLeft="",N===0)return N;U.style.marginLeft=-1*N-U.offsetWidth/2+"px"}}]),P})(h.BaseTooltip);D.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=D,r.default=C}),(function(t,r,i){t.exports=i(63)})]).default})})(Pb)),Pb.exports}var yl,BV;function pRe(){if(BV)return yl;BV=1;var n=yl&&yl.__extends||(function(){var c=function(h,f){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var x in g)g.hasOwnProperty(x)&&(p[x]=g[x])},c(h,f)};return function(h,f){c(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})(),e=yl&&yl.__assign||function(){return e=Object.assign||function(c){for(var h,f=1,p=arguments.length;f<p;f++){h=arguments[f];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(c[g]=h[g])}return c},e.apply(this,arguments)},t=yl&&yl.__spreadArrays||function(){for(var c=0,h=0,f=arguments.length;h<f;h++)c+=arguments[h].length;for(var p=Array(c),g=0,h=0;h<f;h++)for(var x=arguments[h],_=0,v=x.length;_<v;_++,g++)p[g]=x[_];return p},r=yl&&yl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}},i=r(kf()),s=r(GP()),o=r(hRe()),a=r(dRe()),l=(function(c){n(h,c);function h(f){var p=c.call(this,f)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(x,_,v,b){var E,S,C,D;x==="text-change"?(S=(E=p).onEditorChangeText)===null||S===void 0||S.call(E,p.editor.root.innerHTML,_,b,p.unprivilegedEditor):x==="selection-change"&&((D=(C=p).onEditorChangeSelection)===null||D===void 0||D.call(C,_,b,p.unprivilegedEditor))};var g=p.isControlled()?f.value:f.defaultValue;return p.value=g??"",p}return h.prototype.validateProps=function(f){var p;if(i.default.Children.count(f.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(f.children)){var g=i.default.Children.only(f.children);if(((p=g)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&f.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},h.prototype.shouldComponentUpdate=function(f,p){var g=this,x;if(this.validateProps(f),!this.editor||this.state.generation!==p.generation)return!0;if("value"in f){var _=this.getEditorContents(),v=(x=f.value,x??"");this.isEqualValue(v,_)||this.setEditorContents(this.editor,v)}return f.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,f.readOnly),t(this.cleanProps,this.dirtyProps).some(function(b){return!o.default(f[b],g.props[b])})},h.prototype.shouldComponentRegenerate=function(f){var p=this;return this.dirtyProps.some(function(g){return!o.default(f[g],p.props[g])})},h.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},h.prototype.componentWillUnmount=function(){this.destroyEditor()},h.prototype.componentDidUpdate=function(f,p){var g=this;if(this.editor&&this.shouldComponentRegenerate(f)){var x=this.editor.getContents(),_=this.editor.getSelection();this.regenerationSnapshot={delta:x,selection:_},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var v=this.regenerationSnapshot,x=v.delta,b=v.selection;delete this.regenerationSnapshot,this.instantiateEditor();var E=this.editor;E.setContents(x),u(function(){return g.setEditorSelection(E,b)})}},h.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},h.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},h.prototype.isControlled=function(){return"value"in this.props},h.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},h.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},h.prototype.createEditor=function(f,p){var g=new a.default(f,p);return p.tabIndex!=null&&this.setEditorTabIndex(g,p.tabIndex),this.hookEditor(g),g},h.prototype.hookEditor=function(f){this.unprivilegedEditor=this.makeUnprivilegedEditor(f),f.on("editor-change",this.onEditorChange)},h.prototype.unhookEditor=function(f){f.off("editor-change",this.onEditorChange)},h.prototype.getEditorContents=function(){return this.value},h.prototype.getEditorSelection=function(){return this.selection},h.prototype.isDelta=function(f){return f&&f.ops},h.prototype.isEqualValue=function(f,p){return this.isDelta(f)&&this.isDelta(p)?o.default(f.ops,p.ops):o.default(f,p)},h.prototype.setEditorContents=function(f,p){var g=this;this.value=p;var x=this.getEditorSelection();typeof p=="string"?f.setContents(f.clipboard.convert(p)):f.setContents(p),u(function(){return g.setEditorSelection(f,x)})},h.prototype.setEditorSelection=function(f,p){if(this.selection=p,p){var g=f.getLength();p.index=Math.max(0,Math.min(p.index,g-1)),p.length=Math.max(0,Math.min(p.length,g-1-p.index)),f.setSelection(p)}},h.prototype.setEditorTabIndex=function(f,p){var g,x;!((x=(g=f)===null||g===void 0?void 0:g.scroll)===null||x===void 0)&&x.domNode&&(f.scroll.domNode.tabIndex=p)},h.prototype.setEditorReadOnly=function(f,p){p?f.disable():f.enable()},h.prototype.makeUnprivilegedEditor=function(f){var p=f;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},h.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var f=s.default.findDOMNode(this.editingArea);if(!f)throw new Error("Cannot find element for editing area");if(f.nodeType===3)throw new Error("Editing area cannot be a text node");return f},h.prototype.renderEditingArea=function(){var f=this,p=this.props,g=p.children,x=p.preserveWhitespace,_=this.state.generation,v={key:_,ref:function(b){f.editingArea=b}};return i.default.Children.count(g)?i.default.cloneElement(i.default.Children.only(g),v):x?i.default.createElement("pre",e({},v)):i.default.createElement("div",e({},v))},h.prototype.render=function(){var f;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(f=this.props.className,f??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},h.prototype.onEditorChangeText=function(f,p,g,x){var _,v;if(this.editor){var b=this.isDelta(this.value)?x.getContents():x.getHTML();b!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=b,(v=(_=this.props).onChange)===null||v===void 0||v.call(_,f,p,g,x))}},h.prototype.onEditorChangeSelection=function(f,p,g){var x,_,v,b,E,S;if(this.editor){var C=this.getEditorSelection(),D=!C&&f,M=C&&!f;o.default(f,C)||(this.selection=f,(_=(x=this.props).onChangeSelection)===null||_===void 0||_.call(x,f,p,g),D?(b=(v=this.props).onFocus)===null||b===void 0||b.call(v,f,p,g):M&&((S=(E=this.props).onBlur)===null||S===void 0||S.call(E,C,p,g)))}},h.prototype.focus=function(){this.editor&&this.editor.focus()},h.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},h.displayName="React Quill",h.Quill=a.default,h.defaultProps={theme:"snow",modules:{},readOnly:!1},h})(i.default.Component);function u(c){Promise.resolve().then(c)}return yl=l,yl}var mRe=pRe();const gRe=Ll(mRe),Cv=({value:n,onChange:e,name:t,error:r})=>{const[i,s]=W.useState(!1),o=W.useRef(null);return W.useEffect(()=>{s(!0)},[]),i?L.jsxs("div",{className:"mb-6",children:[L.jsx("label",{className:"block text-lg font-medium text-gray-700",children:"Content"}),L.jsx(gRe,{ref:o,value:n||"",onChange:e,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link"],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["blockquote"],[{color:[]},{background:[]}]]},formats:["header","font","list","bold","italic","underline","strike","align","link","indent","direction","blockquote","color","background"],className:"react-quill-editor"}),r&&L.jsx(vge,{name:t,component:"div",className:"text-red-500 text-xs mt-2"})]}):null},vRe=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Mv(n,e,t){const r=yRe(n),{webkitRelativePath:i}=n,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${n.name}`;return typeof r.path!="string"&&FV(r,"path",s),FV(r,"relativePath",s),r}function yRe(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),i=vRe.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}function FV(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const _Re=[".DS_Store","Thumbs.db"];function xRe(n){return Rt(this,void 0,void 0,function*(){return vA(n)&&wRe(n.dataTransfer)?SRe(n.dataTransfer,n.type):bRe(n)?ERe(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?ARe(n):[]})}function wRe(n){return vA(n)}function bRe(n){return vA(n)&&vA(n.target)}function vA(n){return typeof n=="object"&&n!==null}function ERe(n){return PP(n.target.files).map(e=>Mv(e))}function ARe(n){return Rt(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>Mv(t))})}function SRe(n,e){return Rt(this,void 0,void 0,function*(){if(n.items){const t=PP(n.items).filter(i=>i.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(TRe));return UV(wK(r))}return UV(PP(n.files).map(t=>Mv(t)))})}function UV(n){return n.filter(e=>_Re.indexOf(e.name)===-1)}function PP(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function TRe(n){if(typeof n.webkitGetAsEntry!="function")return jV(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?bK(e):jV(n,e)}function wK(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?wK(t):[t]],[])}function jV(n,e){return Rt(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Mv(o)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return Mv(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function CRe(n){return Rt(this,void 0,void 0,function*(){return n.isDirectory?bK(n):MRe(n)})}function bK(n){const e=n.createReader();return new Promise((t,r)=>{const i=[];function s(){e.readEntries(o=>Rt(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(CRe));i.push(a),s()}else try{const a=yield Promise.all(i);t(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function MRe(n){return Rt(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const i=Mv(r,n.fullPath);e(i)},r=>{t(r)})})})}var Z1={},VV;function RRe(){return VV||(VV=1,Z1.__esModule=!0,Z1.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),Z1}var IRe=RRe();const R2=Ll(IRe);function zV(n){return ORe(n)||kRe(n)||AK(n)||PRe()}function PRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kRe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ORe(n){if(Array.isArray(n))return kP(n)}function HV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function GV(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HV(Object(t),!0).forEach(function(r){EK(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function EK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function q_(n,e){return LRe(n)||NRe(n,e)||AK(n,e)||DRe()}function DRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AK(n,e){if(n){if(typeof n=="string")return kP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return kP(n,e)}}function kP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function NRe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function LRe(n){if(Array.isArray(n))return n}var BRe=typeof R2=="function"?R2:R2.default,FRe="file-invalid-type",URe="file-too-large",jRe="file-too-small",VRe="too-many-files",zRe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:FRe,message:"File type must be ".concat(r)}},qV=function(e){return{code:URe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},WV=function(e){return{code:jRe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},HRe={code:VRe,message:"Too many files"};function SK(n,e){var t=n.type==="application/x-moz-file"||BRe(n,e);return[t,t?null:zRe(e)]}function TK(n,e,t){if(op(n.size))if(op(e)&&op(t)){if(n.size>t)return[!1,qV(t)];if(n.size<e)return[!1,WV(e)]}else{if(op(e)&&n.size<e)return[!1,WV(e)];if(op(t)&&n.size>t)return[!1,qV(t)]}return[!0,null]}function op(n){return n!=null}function GRe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles,a=n.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var u=SK(l,t),c=q_(u,1),h=c[0],f=TK(l,r,i),p=q_(f,1),g=p[0],x=a?a(l):null;return h&&g&&!x})}function yA(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function eb(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function $V(n){n.preventDefault()}function qRe(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function WRe(n){return n.indexOf("Edge/")!==-1}function $Re(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return qRe(n)||WRe(n)}function ru(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!yA(r)&&a&&a.apply(void 0,[r].concat(s)),yA(r)})}}function KRe(){return"showOpenFilePicker"in window}function JRe(n){if(op(n)){var e=Object.entries(n).filter(function(t){var r=q_(t,2),i=r[0],s=r[1],o=!0;return CK(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(MK))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(t,r){var i=q_(r,2),s=i[0],o=i[1];return GV(GV({},t),{},EK({},s,o))},{});return[{description:"Files",accept:e}]}return n}function XRe(n){if(op(n))return Object.entries(n).reduce(function(e,t){var r=q_(t,2),i=r[0],s=r[1];return[].concat(zV(e),[i],zV(s))},[]).filter(function(e){return CK(e)||MK(e)}).join(",")}function YRe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function QRe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function CK(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function MK(n){return/^.*\.[\w]+$/.test(n)}var ZRe=["children"],e2e=["open"],t2e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],n2e=["refKey","onChange","onClick"];function r2e(n){return o2e(n)||s2e(n)||RK(n)||i2e()}function i2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function o2e(n){if(Array.isArray(n))return OP(n)}function I2(n,e){return u2e(n)||l2e(n,e)||RK(n,e)||a2e()}function a2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RK(n,e){if(n){if(typeof n=="string")return OP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OP(n,e)}}function OP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function l2e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function u2e(n){if(Array.isArray(n))return n}function KV(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Hr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KV(Object(t),!0).forEach(function(r){DP(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KV(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function DP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _A(n,e){if(n==null)return{};var t=c2e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function c2e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var lD=W.forwardRef(function(n,e){var t=n.children,r=_A(n,ZRe),i=PK(r),s=i.open,o=_A(i,e2e);return W.useImperativeHandle(e,function(){return{open:s}},[s]),Qt.createElement(W.Fragment,null,t(Hr(Hr({},o),{},{open:s})))});lD.displayName="Dropzone";var IK={disabled:!1,getFilesFromEvent:xRe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};lD.defaultProps=IK;lD.propTypes={children:yr.func,accept:yr.objectOf(yr.arrayOf(yr.string)),multiple:yr.bool,preventDropOnDocument:yr.bool,noClick:yr.bool,noKeyboard:yr.bool,noDrag:yr.bool,noDragEventsBubbling:yr.bool,minSize:yr.number,maxSize:yr.number,maxFiles:yr.number,disabled:yr.bool,getFilesFromEvent:yr.func,onFileDialogCancel:yr.func,onFileDialogOpen:yr.func,useFsAccessApi:yr.bool,autoFocus:yr.bool,onDragEnter:yr.func,onDragLeave:yr.func,onDragOver:yr.func,onDrop:yr.func,onDropAccepted:yr.func,onDropRejected:yr.func,onError:yr.func,validator:yr.func};var NP={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function PK(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Hr(Hr({},IK),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,h=e.onDragOver,f=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,x=e.onFileDialogCancel,_=e.onFileDialogOpen,v=e.useFsAccessApi,b=e.autoFocus,E=e.preventDropOnDocument,S=e.noClick,C=e.noKeyboard,D=e.noDrag,M=e.noDragEventsBubbling,P=e.onError,O=e.validator,R=W.useMemo(function(){return XRe(t)},[t]),N=W.useMemo(function(){return JRe(t)},[t]),U=W.useMemo(function(){return typeof _=="function"?_:JV},[_]),F=W.useMemo(function(){return typeof x=="function"?x:JV},[x]),J=W.useRef(null),Z=W.useRef(null),oe=W.useReducer(h2e,NP),ae=I2(oe,2),Q=ae[0],ee=ae[1],Y=Q.isFocused,V=Q.isFileDialogActive,X=W.useRef(typeof window<"u"&&window.isSecureContext&&v&&KRe()),re=function(){!X.current&&V&&setTimeout(function(){if(Z.current){var ye=Z.current.files;ye.length||(ee({type:"closeDialog"}),F())}},300)};W.useEffect(function(){return window.addEventListener("focus",re,!1),function(){window.removeEventListener("focus",re,!1)}},[Z,V,F,X]);var se=W.useRef([]),he=function(ye){J.current&&J.current.contains(ye.target)||(ye.preventDefault(),se.current=[])};W.useEffect(function(){return E&&(document.addEventListener("dragover",$V,!1),document.addEventListener("drop",he,!1)),function(){E&&(document.removeEventListener("dragover",$V),document.removeEventListener("drop",he))}},[J,E]),W.useEffect(function(){return!r&&b&&J.current&&J.current.focus(),function(){}},[J,b,r]);var te=W.useCallback(function(de){P?P(de):console.error(de)},[P]),ce=W.useCallback(function(de){de.preventDefault(),de.persist(),Ne(de),se.current=[].concat(r2e(se.current),[de.target]),eb(de)&&Promise.resolve(i(de)).then(function(ye){if(!(yA(de)&&!M)){var be=ye.length,He=be>0&&GRe({files:ye,accept:R,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:O}),qe=be>0&&!He;ee({isDragAccept:He,isDragReject:qe,isDragActive:!0,type:"setDraggedFiles"}),u&&u(de)}}).catch(function(ye){return te(ye)})},[i,u,te,M,R,o,s,a,l,O]),ve=W.useCallback(function(de){de.preventDefault(),de.persist(),Ne(de);var ye=eb(de);if(ye&&de.dataTransfer)try{de.dataTransfer.dropEffect="copy"}catch{}return ye&&h&&h(de),!1},[h,M]),xe=W.useCallback(function(de){de.preventDefault(),de.persist(),Ne(de);var ye=se.current.filter(function(He){return J.current&&J.current.contains(He)}),be=ye.indexOf(de.target);be!==-1&&ye.splice(be,1),se.current=ye,!(ye.length>0)&&(ee({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),eb(de)&&c&&c(de))},[J,c,M]),Te=W.useCallback(function(de,ye){var be=[],He=[];de.forEach(function(qe){var lt=SK(qe,R),vt=I2(lt,2),Ye=vt[0],yt=vt[1],Ot=TK(qe,o,s),jt=I2(Ot,2),Et=jt[0],on=jt[1],qt=O?O(qe):null;if(Ye&&Et&&!qt)be.push(qe);else{var Rn=[yt,on];qt&&(Rn=Rn.concat(qt)),He.push({file:qe,errors:Rn.filter(function(Ae){return Ae})})}}),(!a&&be.length>1||a&&l>=1&&be.length>l)&&(be.forEach(function(qe){He.push({file:qe,errors:[HRe]})}),be.splice(0)),ee({acceptedFiles:be,fileRejections:He,isDragReject:He.length>0,type:"setFiles"}),f&&f(be,He,ye),He.length>0&&g&&g(He,ye),be.length>0&&p&&p(be,ye)},[ee,a,R,o,s,l,f,p,g,O]),$e=W.useCallback(function(de){de.preventDefault(),de.persist(),Ne(de),se.current=[],eb(de)&&Promise.resolve(i(de)).then(function(ye){yA(de)&&!M||Te(ye,de)}).catch(function(ye){return te(ye)}),ee({type:"reset"})},[i,Te,te,M]),De=W.useCallback(function(){if(X.current){ee({type:"openDialog"}),U();var de={multiple:a,types:N};window.showOpenFilePicker(de).then(function(ye){return i(ye)}).then(function(ye){Te(ye,null),ee({type:"closeDialog"})}).catch(function(ye){YRe(ye)?(F(ye),ee({type:"closeDialog"})):QRe(ye)?(X.current=!1,Z.current?(Z.current.value=null,Z.current.click()):te(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):te(ye)});return}Z.current&&(ee({type:"openDialog"}),U(),Z.current.value=null,Z.current.click())},[ee,U,F,v,Te,te,N,a]),Be=W.useCallback(function(de){!J.current||!J.current.isEqualNode(de.target)||(de.key===" "||de.key==="Enter"||de.keyCode===32||de.keyCode===13)&&(de.preventDefault(),De())},[J,De]),fe=W.useCallback(function(){ee({type:"focus"})},[]),it=W.useCallback(function(){ee({type:"blur"})},[]),Je=W.useCallback(function(){S||($Re()?setTimeout(De,0):De())},[S,De]),rt=function(ye){return r?null:ye},we=function(ye){return C?null:rt(ye)},Ie=function(ye){return D?null:rt(ye)},Ne=function(ye){M&&ye.stopPropagation()},ie=W.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=de.refKey,be=ye===void 0?"ref":ye,He=de.role,qe=de.onKeyDown,lt=de.onFocus,vt=de.onBlur,Ye=de.onClick,yt=de.onDragEnter,Ot=de.onDragOver,jt=de.onDragLeave,Et=de.onDrop,on=_A(de,t2e);return Hr(Hr(DP({onKeyDown:we(ru(qe,Be)),onFocus:we(ru(lt,fe)),onBlur:we(ru(vt,it)),onClick:rt(ru(Ye,Je)),onDragEnter:Ie(ru(yt,ce)),onDragOver:Ie(ru(Ot,ve)),onDragLeave:Ie(ru(jt,xe)),onDrop:Ie(ru(Et,$e)),role:typeof He=="string"&&He!==""?He:"presentation"},be,J),!r&&!C?{tabIndex:0}:{}),on)}},[J,Be,fe,it,Je,ce,ve,xe,$e,C,D,r]),q=W.useCallback(function(de){de.stopPropagation()},[]),me=W.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ye=de.refKey,be=ye===void 0?"ref":ye,He=de.onChange,qe=de.onClick,lt=_A(de,n2e),vt=DP({accept:R,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:rt(ru(He,$e)),onClick:rt(ru(qe,q)),tabIndex:-1},be,Z);return Hr(Hr({},vt),lt)}},[Z,t,a,$e,r]);return Hr(Hr({},Q),{},{isFocused:Y&&!r,getRootProps:ie,getInputProps:me,rootRef:J,inputRef:Z,open:rt(De)})}function h2e(n,e){switch(e.type){case"focus":return Hr(Hr({},n),{},{isFocused:!0});case"blur":return Hr(Hr({},n),{},{isFocused:!1});case"openDialog":return Hr(Hr({},NP),{},{isFileDialogActive:!0});case"closeDialog":return Hr(Hr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Hr(Hr({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Hr(Hr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Hr({},NP);default:return n}}function JV(){}const Rv=({name:n,value:e,setFieldValue:t,error:r,touched:i,onFileRemove:s})=>{const[o,a]=W.useState(e||[]),l=p=>{const g=[...o,...p.map(x=>({file:x,icon:URL.createObjectURL(x),type:"file"}))];a(g),t(n,g)};W.useEffect(()=>{e&&e.length>0&&a(e.map(p=>p.icon?{icon:p.icon,type:"url"}:p))},[e]);const u=p=>p.type==="file"||p.icon?p.icon:null,{getRootProps:c,getInputProps:h}=PK({accept:"image/*",onDrop:l}),f=p=>{const g=o[p],x=o.filter((_,v)=>v!==p);a(x),t(n,x),s&&s(g.icon)};return L.jsxs("div",{className:"space-y-2",children:[L.jsxs("div",{...c(),className:"flex justify-center items-center border-dashed border-2 p-4 rounded-lg border-gray-400 hover:bg-gray-50 cursor-pointer",children:[L.jsx("input",{...h()}),L.jsx(jve,{className:"text-2xl text-gray-600"}),L.jsx("p",{className:"text-sm text-gray-600 ml-2",children:"Drag & Drop or Click to Upload"})]}),r&&i&&L.jsx("p",{className:"text-red-500 text-sm mt-1",children:r}),L.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:o.length>0&&o.map((p,g)=>L.jsxs("div",{className:"relative",children:[p.type==="url"?L.jsx("img",{src:p.icon,alt:`Icon ${g}`,className:"w-24 h-24 object-cover rounded-lg"}):L.jsx("img",{src:u(p),alt:p.file?p.file.name:`Icon ${g}`,className:"w-24 h-24 object-cover rounded-lg"}),L.jsx("button",{onClick:()=>f(g),className:"absolute top-0 right-0 bg-gray-700 text-white rounded-full p-1 text-xs",children:L.jsx(X7,{})})]},g))})]})},Iv=async(n,e)=>{const t=[],r=Date.now();try{for(const i of n){const s=i.file;if(!s||!s.name){console.error("Invalid file detected. Skipping this file.",s);continue}console.log("Uploading file:",s.name);const o=`${e}/${r}-${s.name}`,{data:a,error:l}=await Fp.storage.from("storage").upload(o,s);if(l)throw new Error(`Failed to upload ${s.name}: ${l.message}`);const{data:u,error:c}=Fp.storage.from("storage").getPublicUrl(o);if(c)throw new Error(`Failed to get public URL for ${s.name}: ${c.message}`);console.log("File uploaded successfully. Public URL:",u),t.push(u)}return t}catch(i){return console.error("Error uploading files:",i.message),[]}},Pv=async n=>{try{const e=Array.isArray(n)?n:[n];for(const t of e){if(!t.publicUrl||typeof t.publicUrl!="string")throw new Error('Each object must have a valid "publicUrl" field that is a string');const r=t.publicUrl,i=r.split("/storage/v1/object/public/storage/");if(i.length<2)throw new Error(`Invalid URL format: ${r}`);const s=i[1],{error:o}=await Fp.storage.from("storage").remove([s]);if(o)return console.error("Error deleting file:",o.message),{success:!1,message:o.message}}return{success:!0,message:"Files deleted successfully"}}catch(e){return console.error("Unexpected error:",e),{success:!1,message:e.message}}},f2e=um({title:Oi().required("Title is required"),university_name:Oi().required("University Name is required"),college_name:Oi().required("College Name is required"),icons:HO().min(1,"At least one icon is required"),startDate:gv().required("Start Date is required"),endDate:gv().required("End Date is required"),contents:Oi().required("Content is required"),urlofCompany:Oi().required("URL of Company is required")}),kK=({editData:n,handleEditSuccess:e})=>{var p;const[t,r]=W.useState((n==null?void 0:n.contents)||""),[i,s]=W.useState([]),[o,a]=W.useState(""),{enqueueSnackbar:l}=Cu();console.log("Edit data on academics",n);const u={title:(n==null?void 0:n.title)||"",university_name:(n==null?void 0:n.university_name)||"",college_name:(n==null?void 0:n.college_name)||"",icons:((p=n==null?void 0:n.icons)==null?void 0:p.map(g=>({icon:g.publicUrl})))||[],startDate:(n==null?void 0:n.startDate)||"",endDate:(n==null?void 0:n.endDate)||"",contents:(n==null?void 0:n.contents)||"",focusedField:"",urlofCompany:(n==null?void 0:n.urlofCompany)||""},c=async(g,{setSubmitting:x,resetForm:_,setFieldValue:v})=>{try{let b=[];g.icons&&g.icons.length>0&&(b=await Iv(g.icons,"academics")),b.length===0&&n&&(b=n.icons||[]);const E={title:g.title,university_name:g.university_name,college_name:g.college_name,icons:b,startDate:g.startDate,endDate:g.endDate,contents:t,urlofCompany:g.urlofCompany};n?(await fv(qr(sn,"academics",n.id),E),l("Academic data updated successfully!",{variant:"success"}),v("icons",[])):(await Bp(Jr(sn,"academics"),E),l("Academic data submitted successfully!",{variant:"success"})),v("title",""),v("university_name",""),v("college_name",""),v("icons",[]),v("startDate",""),v("endDate",""),v("contents",""),v("urlofCompany",""),r(""),_(),x(!1),window.location.reload()}catch(b){console.error("Error submitting form:",b),l("Failed to submit academic data. Please try again.",{variant:"error"}),x(!1)}},h=g=>{console.log("URL ontained inside handleFileRemove:",g),f(g)};async function f(g){const x=g.split("/storage/v1/object/public/storage/")[1];console.log(x,"File Path on delete");const{data:_,error:v}=await Fp.storage.from("storage").remove([x]);console.log("data",_),l("Image delete successfully!",{variant:"success"}),v?console.error("Error deleting file:",v):console.log("File deleted successfully from supabase")}return L.jsxs("div",{className:"w-full",children:[L.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 sm:mb-6",children:n?"Edit Academic":"Add Academic"}),L.jsx(oS,{initialValues:u,validationSchema:f2e,onSubmit:c,children:({setFieldValue:g,values:x,touched:_,errors:v,handleBlur:b,handleChange:E})=>L.jsxs(mx,{className:"space-y-4 sm:space-y-6",children:[L.jsx(tr,{name:"title",type:"text",label:"Title",value:x.title,onChange:S=>g("title",S.target.value),onBlur:b,error:v.title,touched:_.title,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(tr,{name:"university_name",type:"text",label:"University Name",value:x.university_name,onChange:S=>g("university_name",S.target.value),onBlur:b,error:v.university_name,touched:_.university_name,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(tr,{name:"college_name",type:"text",label:"College Name",value:x.college_name,onChange:S=>g("college_name",S.target.value),onBlur:b,error:v.college_name,touched:_.college_name,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(Rv,{name:"icons",value:x.icons,setFieldValue:g,error:v.icons,touched:_.icons,onFileRemove:h}),L.jsx(tr,{name:"urlofCompany",type:"text",label:"urlofCompany",value:x.urlofCompany,onChange:S=>g("urlofCompany",S.target.value),onBlur:b,error:v.urlofCompany,touched:_.urlofCompany,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(tr,{name:"startDate",type:"date",label:"Start Date",value:x.startDate,onChange:S=>g("startDate",S.target.value),onBlur:b,error:v.startDate,touched:_.startDate,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(tr,{name:"endDate",type:"date",label:"End Date",value:x.endDate,onChange:S=>g("endDate",S.target.value),onBlur:b,error:v.endDate,touched:_.endDate,focusedField:x.focusedField,setFocusedField:S=>g("focusedField",S)}),L.jsx(Cv,{value:t,onChange:S=>{r(S),g("contents",S)},name:"contents",error:v.contents}),_.contents&&v.contents&&L.jsx("p",{className:"text-red-500 text-sm mt-2",children:v.contents}),L.jsx(Xt.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},d2e=()=>{const[n,e]=W.useState([]);Of();const{enqueueSnackbar:t}=Cu(),[r,i]=W.useState(!1),[s,o]=W.useState(null),[a,l]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const x=(await Js(Jr(sn,"academics"))).docs.map(_=>({id:_.id,..._.data()}));x.sort((_,v)=>{var S,C;const b=(S=_.createdAt)!=null&&S.toDate?_.createdAt.toDate():new Date,E=(C=v.createdAt)!=null&&C.toDate?v.createdAt.toDate():new Date;return b-E}),e(x),l(!1)}catch(g){console.error("Error fetching academics: ",g)}})()},[a]);const u=p=>{const g=n.find(x=>x.id===p);console.log("Edit data on handle Edit",g),o(g),i(!0)},c=()=>{console.log("Edit success"),i(!1),l(!0)},h=async p=>{try{const g=qr(sn,"academics",p);console.log("Document reference:",g);const x=await Oa(g);if(!x.exists()){console.error("Document not found."),t("Academic data not found.",{variant:"error"});return}const _=x.data();console.log("Academic data:",_);const v=_.icons;console.log("File URL:",v);const b=await Pv(v,"academics");console.log("Delete",b),await Tf(qr(sn,"academics",p)),e(n.filter(E=>E.id!==p)),t("Academic data deleted successfully!",{variant:"success"})}catch{t("Failed to delete academic data. Please try again.",{variant:"error"})}},f=()=>{i(!1)};return L.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[L.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold mb-6",children:"Academics"}),L.jsx("div",{className:"hidden md:block overflow-x-auto",children:L.jsxs("table",{className:"w-full table-auto border-collapse",children:[L.jsx("thead",{className:"bg-gray-100",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Title"}),L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"University"}),L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"College"}),L.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Action"})]})}),L.jsx("tbody",{children:n.map(p=>L.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-3",children:p.title}),L.jsx("td",{className:"px-4 py-3",children:p.university_name}),L.jsx("td",{className:"px-4 py-3",children:p.college_name}),L.jsxs("td",{className:"px-4 py-3 text-center",children:[L.jsx("button",{onClick:()=>u(p.id),className:"bg-blue-500 text-white px-3 py-1.5 rounded-md mr-2 hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>h(p.id),className:"bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},p.id))})]})}),L.jsx("div",{className:"md:hidden space-y-4",children:n.map(p=>L.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[L.jsxs("div",{className:"space-y-2 mb-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Title:"}),L.jsx("p",{className:"text-base",children:p.title})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"University:"}),L.jsx("p",{className:"text-base",children:p.university_name})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"College:"}),L.jsx("p",{className:"text-base",children:p.college_name})]})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>u(p.id),className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>h(p.id),className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},p.id))}),r&&L.jsx(mf,{onClose:f,title:s?"Edit Academic":"Add Academic",children:L.jsx("div",{className:"w-full",children:L.jsx(kK,{editData:s,handleEditSuccess:c})})})]})};var kv=function(){return kv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},kv.apply(this,arguments)},p2e={2e3:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2001:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2002:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2003:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2004:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2005:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2006:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2007:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2008:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2009:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2010:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2011:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2012:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2013:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2014:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2015:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2016:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2017:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2018:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2019:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2020:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2021:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2022:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2023:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2024:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2025:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2026:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2027:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2028:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2029:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2030:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2031:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2032:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2033:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2034:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2035:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2036:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2037:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2038:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2039:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2040:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2041:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2042:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2043:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2044:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2045:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2046:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2047:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2048:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2049:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2050:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2051:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2052:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2053:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2054:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2055:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2056:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2057:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2058:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2059:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2060:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2061:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2062:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2063:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2064:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2065:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2066:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2067:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2068:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2069:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2070:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2071:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2072:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2073:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2074:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2075:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2076:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2077:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2078:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2079:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2080:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2081:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2082:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2083:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2084:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2085:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2086:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2087:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2088:{Baisakh:30,Jestha:31,Asar:32,Shrawan:32,Bhadra:30,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2089:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2090:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30}},LP;(function(n){n.np="np",n.en="en"})(LP||(LP={}));var OK=Object.values(p2e).map(function(n){return Object.values(n)}),BP=OK.map(function(n){var e=0;return n.map(function(t){var r=[t,e];return e+=t,r})},[]),FP=0,xA=OK.map(function(n){var e=n.reduce(function(r,i){return r+i},0),t=[e,FP];return FP+=e,t}),wA=33238;if(FP!==wA)throw new Error("Invalid constant initialization for Nepali Date.");var UP=1;function m2e(n){return n-DK}function g2e(n){return n+DK}var DK=2e3,Ac=1,XV=0;function v2e(n,e){for(;e<0;)e+=n;return e%n}var P0={en:{day:{short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},month:{short:["Bai","Jes","Asa","Shr","Bhd","Asw","Kar","Man","Pou","Mag","Fal","Cha"],long:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Aswin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"]},date:["0","1","2","3","4","5","6","7","8","9"]},np:{day:{short:["","","","","","",""],long:["","","","","","",""]},month:{short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},date:["","","","","","","","","",""]}},P2={year:1943,month:3,date:13};function y2e(n,e,t){try{var r=m2e(n),i=xA[r][Ac],s=v2e(12,e),o=Math.floor(e/12),a=xA[r+o][Ac]-i+BP[r+o][s][Ac],l=i+a+t;if(l<UP||l>wA)throw new Error;return l}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function NK(n){if(n<UP||n>wA)throw new Error("The epoch difference is not within the boundaries ".concat(UP," - ").concat(wA));var e=xA.findIndex(function(s){return n>s[Ac]&&n<=s[Ac]+s[XV]}),t=n-xA[e][Ac],r=BP[e].findIndex(function(s){return t>s[Ac]&&t<=s[Ac]+s[XV]}),i=t-BP[e][r][Ac];return{year:g2e(e),month:r,date:i}}function _2e(n,e,t){var r=Math.abs(Date.UTC(n,e,t)-Date.UTC(P2.year,P2.month,P2.date)),i=Math.ceil(r/(1e3*3600*24));return i}function LK(n){var e=new Date(Date.UTC(1943,3,13+n));return{year:e.getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),day:e.getUTCDay()}}function x2e(n){try{var e=y2e(n.year,n.month,n.date),t=NK(e),r=LK(e);return{AD:r,BS:kv(kv({},t),{day:r.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function w2e(n){try{var e=_2e(n.getFullYear(),n.getMonth(),n.getDate()),t=NK(e),r=LK(e);return{AD:r,BS:kv(kv({},t),{day:r.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function $h(n,e){return n.split("").map(function(t){return P0[e].date[parseInt(t,10)]}).join("")}function b2e(n,e,t){return e.replace(/((\\[MDYd])|D{1,2}|M{1,4}|Y{2,4}|d{1,3})/g,function(r,i,s){var o;switch(r){case"D":return $h(n.date.toString(),t);case"DD":return $h(n.date.toString().padStart(2,"0"),t);case"M":return $h((n.month+1).toString(),t);case"MM":return $h((n.month+1).toString().padStart(2,"0"),t);case"MMM":return P0[t].month.short[n.month];case"MMMM":return P0[t].month.long[n.month];case"YY":return $h(n.year.toString().slice(-2),t);case"YYY":return $h(n.year.toString().slice(-3),t);case"YYYY":return $h(n.year.toString(),t);case"d":return $h(((o=n.day)===null||o===void 0?void 0:o.toString())||"0",t);case"dd":return P0[t].day.short[n.day||0];case"ddd":return P0[t].day.long[n.day||0];default:return s.replace("/","")}}).replace(/\\/g,"")}function YV(n){var e=/(\d{4})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})/,t=/(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{4})/,r;if(r=n.match(e),r!==null)return{year:parseInt(r[1],10),month:parseInt(r[3],10)-1,date:parseInt(r[5],10)};if(r=n.match(t),r!==null)return{year:parseInt(r[5],10),month:parseInt(r[3],10)-1,date:parseInt(r[1],10)};throw new Error("Invalid date format")}var qd=Symbol("Date"),k2=Symbol("Day"),Wd=Symbol("Year"),$d=Symbol("MonthIndex"),Kd=Symbol("JsDate"),tb=Symbol("convertToBS()"),Cg=Symbol("convertToAD()"),O2=Symbol("setADBS()"),nb=Symbol("setDayYearMonth()"),BK=(function(){function n(){var e=new Error("Invalid constructor arguments");if(arguments.length===0)this[tb](new Date);else if(arguments.length===1){var t=arguments[0];switch(typeof t){case"number":this[tb](new Date(t));break;case"string":var r=YV(t),i=r.date,s=r.year,o=r.month;this[nb](s,o,i),this[Cg]();break;case"object":if(t instanceof Date)this[tb](t);else throw e;break;default:throw e}}else if(arguments.length<=3)this[nb](arguments[0],arguments[1],arguments[2]),this[Cg]();else throw e}return n.prototype[nb]=function(e,t,r,i){t===void 0&&(t=0),r===void 0&&(r=1),i===void 0&&(i=0),this[Wd]=e,this[$d]=t,this[qd]=r,this[k2]=i},n.prototype.toJsDate=function(){return this[Kd]},n.prototype.getDate=function(){return this[qd]},n.prototype.getYear=function(){return this[Wd]},n.prototype.getDay=function(){return this[k2]},n.prototype.getMonth=function(){return this[$d]},n.prototype.getDateObject=function(){return{BS:this.getBS(),AD:this.getAD()}},n.prototype.getBS=function(){return{year:this[Wd],month:this[$d],date:this[qd],day:this[k2]}},n.prototype.getAD=function(){return{year:this[Kd].getFullYear(),month:this[Kd].getMonth(),date:this[Kd].getDate(),day:this[Kd].getDay()}},n.prototype.setDate=function(e){var t=this[qd];try{this[qd]=e,this[Cg]()}catch(r){throw this[qd]=t,r}},n.prototype.setMonth=function(e){var t=this[$d];try{this[$d]=e,this[Cg]()}catch(r){throw this[$d]=t,r}},n.prototype.setYear=function(e){var t=this[Wd];try{this[Wd]=e,this[Cg]()}catch(r){throw this[Wd]=t,r}},n.prototype.format=function(e,t){return t===void 0&&(t=n.language),b2e(this.getBS(),e,t)},n.parse=function(e){var t=YV(e),r=t.date,i=t.year,s=t.month;return new n(i,s,r)},n.now=function(){return new n},n.fromAD=function(e){return new n(e)},n.prototype[tb]=function(e){var t=w2e(e),r=t.AD,i=t.BS;this[O2](r,i)},n.prototype[O2]=function(e,t){this[nb](t.year,t.month,t.date,t.day),this[Kd]=new Date(e.year,e.month,e.date)},n.prototype[Cg]=function(){var e=x2e({year:this[Wd],month:this[$d],date:this[qd]}),t=e.AD,r=e.BS;this[O2](t,r)},n.prototype.valueOf=function(){return this[Kd].getTime()},n.prototype.toString=function(){return this.format("ddd DD, MMMM YYYY")},n.language=LP.en,n})();const E2e=({selectedYear:n,selectedMonth:e,selectedDate:t,months:r,onDateClick:i})=>{const s=new BK(n,e-1,1),a=(f=>[30,31,30,31,30,31,30,31,30,31,30,30][f-1])(e),l=s.toJsDate().getDay(),u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=[];let h=[];for(let f=0;f<l;f++)h.push(L.jsx("td",{className:"p-2 text-center"},`empty-${f}`));for(let f=1;f<=a;f++){const p=f===t;h.push(L.jsxs("td",{className:`p-2 text-center border border-gray-300 cursor-pointer transition-all
          ${p?"bg-blue-500 text-white":"hover:bg-blue-200"}`,onClick:()=>i(f),children:[f," "]},f)),((f+l)%7===0||f===a)&&(c.push(L.jsx("tr",{children:h},f)),h=[])}return L.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-100 rounded-lg shadow-md",children:[L.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:[r[e-1]," ",n," "]}),L.jsxs("table",{className:"w-full max-w-md bg-white rounded-lg overflow-hidden shadow-sm",children:[L.jsx("thead",{children:L.jsx("tr",{className:"bg-gray-200",children:u.map(f=>L.jsx("th",{className:"p-2 text-center text-sm font-medium text-gray-700",children:f},f))})}),L.jsx("tbody",{children:c})]})]})},rb=["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"];function A2e(){const[n,e]=W.useState(2081),[t,r]=W.useState(1),[i,s]=W.useState(1),o=()=>{const p=new Date,g=p.getFullYear(),x=p.getMonth()+1,_=p.getDate();return{currentYear:g,currentMonth:x,currentDay:_}},{currentYear:a,currentMonth:l,currentDay:u}=o(),c=p=>e(parseInt(p.target.value)),h=p=>r(parseInt(p.target.value)),f=p=>{const g=new Date(p.target.value),x=new BK(g.getFullYear(),g.getMonth(),g.getDate());e(x.getYear()),r(x.getMonth()+1),s(x.getDate())};return L.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[L.jsxs("h1",{className:"text-3xl font-bold mb-8 text-gray-800",children:[rb[t-1]," ",n," "]}),L.jsxs("div",{className:"flex mb-4 space-x-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"year",className:"mr-2 font-medium text-gray-700",children:"Select Year:"}),L.jsx("select",{id:"year",value:n,onChange:c,className:"px-4 py-2 border border-gray-300 rounded-lg",children:Array.from({length:100},(p,g)=>2e3+g).map(p=>L.jsx("option",{value:p,children:p},p))})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"month",className:"mr-2 font-medium text-gray-700",children:"Select Month:"}),L.jsx("select",{id:"month",value:t,onChange:h,className:"px-4 py-2 border border-gray-300 rounded-lg",children:rb.map((p,g)=>L.jsx("option",{value:g+1,children:p},p))})]})]}),L.jsxs("div",{className:"mb-4",children:[L.jsx("label",{htmlFor:"gregorian-date",className:"mr-2 font-medium text-gray-700",children:"Select Date:"}),L.jsx("input",{id:"gregorian-date",type:"date",value:`${a}-${l<10?"0":""}${l}-${u<10?"0":""}${u}`,onChange:f,className:"px-4 py-2 border border-gray-300 rounded-lg"})]}),L.jsx(E2e,{selectedYear:n,selectedMonth:t,selectedDate:i,months:rb,onDateClick:p=>{s(p),console.log(`Selected Date: ${p} - ${rb[t-1]} ${n}`)}})]})}var f0={},D2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var QV;function FK(){return QV||(QV=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(D2)),D2.exports}var ZV;function S2e(){if(ZV)return f0;ZV=1,f0.__esModule=!0,f0.default=void 0;var n=r(kf()),e=r(KS()),t=r(FK());function r(o){return o&&o.__esModule?o:{default:o}}const i=({animate:o=!0,className:a="",layout:l="2-columns",lineColor:u="#FFF",children:c})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",u),n.default.createElement("div",{className:(0,t.default)(a,"vertical-timeline",{"vertical-timeline--animate":o,"vertical-timeline--two-columns":l==="2-columns","vertical-timeline--one-column-left":l==="1-column"||l==="1-column-left","vertical-timeline--one-column-right":l==="1-column-right"})},c));i.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=i;return f0.default=s,f0}var d0={};function jP(){return jP=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jP.apply(this,arguments)}function T2e(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,VP(n,e)}function VP(n,e){return VP=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},VP(n,e)}function C2e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var zP=new Map,ib=new WeakMap,e9=0,UK=void 0;function M2e(n){UK=n}function R2e(n){return n?(ib.has(n)||(e9+=1,ib.set(n,e9.toString())),ib.get(n)):"0"}function I2e(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?R2e(n.root):n[e])}).toString()}function P2e(n){var e=I2e(n),t=zP.get(e);if(!t){var r=new Map,i,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&i.some(function(c){return a.intersectionRatio>=c});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=r.get(a.target))==null||l.forEach(function(c){c(u,a)})})},n);i=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:r},zP.set(e,t)}return t}function uD(n,e,t,r){if(t===void 0&&(t={}),r===void 0&&(r=UK),typeof window.IntersectionObserver>"u"&&r!==void 0){var i=n.getBoundingClientRect();return e(r,{isIntersecting:r,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=P2e(t),o=s.id,a=s.observer,l=s.elements,u=l.get(n)||[];return l.has(n)||l.set(n,u),u.push(e),a.observe(n),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),zP.delete(o))}}var k2e=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function t9(n){return typeof n.children!="function"}var bA=(function(n){T2e(e,n);function e(r){var i;return i=n.call(this,r)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,o){s&&i.props.triggerOnce&&i.unobserve(),t9(i.props)||i.setState({inView:s,entry:o}),i.props.onChange&&i.props.onChange(s,o)},i.state={inView:!!r.initialInView,entry:void 0},i}var t=e.prototype;return t.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,o=i.root,a=i.rootMargin,l=i.trackVisibility,u=i.delay,c=i.fallbackInView;this._unobserveCb=uD(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},c)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!t9(this.props)){var i=this.state,s=i.inView,o=i.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,c=C2e(a,k2e);return W.createElement(u||"div",jP({ref:this.handleNode},c),l)},e})(W.Component);bA.displayName="InView";bA.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function O2e(n){var e=n===void 0?{}:n,t=e.threshold,r=e.delay,i=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,c=e.fallbackInView,h=W.useRef(),f=W.useState({inView:!!u}),p=f[0],g=f[1],x=W.useCallback(function(v){h.current!==void 0&&(h.current(),h.current=void 0),!l&&v&&(h.current=uD(v,function(b,E){g({inView:b,entry:E}),E.isIntersecting&&a&&h.current&&(h.current(),h.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:i,delay:r},c))},[Array.isArray(t)?t.toString():t,o,s,a,l,i,c,r]);W.useEffect(function(){!h.current&&p.entry&&!a&&!l&&g({inView:!!u})});var _=[x,p.inView,p.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const D2e=Object.freeze(Object.defineProperty({__proto__:null,InView:bA,default:bA,defaultFallbackInView:M2e,observe:uD,useInView:O2e},Symbol.toStringTag,{value:"Module"})),N2e=HP(D2e);var n9;function L2e(){if(n9)return d0;n9=1,d0.__esModule=!0,d0.default=void 0;var n=i(kf()),e=i(KS()),t=i(FK()),r=N2e;function i(a){return a&&a.__esModule?a:{default:a}}const s=({children:a="",className:l="",contentArrowStyle:u=null,contentStyle:c=null,date:h="",dateClassName:f="",icon:p=null,iconClassName:g="",iconOnClick:x=null,onTimelineElementClick:_=null,iconStyle:v=null,id:b="",position:E="",style:S=null,textClassName:C="",intersectionObserverProps:D={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:M=!1,shadowSize:P="small"})=>n.default.createElement(r.InView,D,({inView:O,ref:R})=>n.default.createElement("div",{ref:R,id:b,className:(0,t.default)(l,"vertical-timeline-element",{"vertical-timeline-element--left":E==="left","vertical-timeline-element--right":E==="right","vertical-timeline-element--no-children":a===""}),style:S},n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{style:v,onClick:x,className:(0,t.default)(g,"vertical-timeline-element-icon",`shadow-size-${P}`,{"bounce-in":O||M,"is-hidden":!(O||M)})},p),n.default.createElement("div",{style:c,onClick:_,className:(0,t.default)(C,"vertical-timeline-element-content",{"bounce-in":O||M,"is-hidden":!(O||M)})},n.default.createElement("div",{style:u,className:"vertical-timeline-element-content-arrow"}),a,n.default.createElement("span",{className:(0,t.default)(f,"vertical-timeline-element-date")},h)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,shadowSize:e.default.string,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var o=s;return d0.default=o,d0}var N2,r9;function B2e(){return r9||(r9=1,N2={VerticalTimeline:S2e().default,VerticalTimelineElement:L2e().default}),N2}var EA=B2e();const li={paddingX:"sm:px-16 px-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadBlackText:"font-black text-black lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubBlackText:"text-black font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-black font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},Gf=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),Ru=(n,e,t,r)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:r,ease:"easeOut"}}}),F2e=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),cD=(n,e)=>function(){return L.jsxs(Xt.section,{variants:F2e(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${li.padding} max-w-7xl mx-auto relative z-0`,children:[L.jsx("span",{className:"hash-span",id:e,children:""}),L.jsx(n,{})]})},U2e=({education:n})=>{const e=new Date(n.startDate).getFullYear(),t=new Date(n.endDate).getFullYear();return L.jsxs(EA.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#1d1836",color:"#fff",borderBottom:"8px",borderStyle:"solid",borderBottomColor:"#6c5ce7",boxShadow:"0 3px 0 #6c5ce7",padding:"1.5rem",minHeight:"320px"},contentArrowStyle:{borderRight:"7px solid #1d1836"},date:L.jsx("span",{className:"text-base font-semibold sm:text-lg",style:{color:"#1d1836"},children:`${e} - ${t}`}),icon:L.jsx("div",{className:"flex items-center justify-center w-full h-full overflow-hidden bg-white rounded-full",children:L.jsx("img",{src:n.icons[0].publicUrl,alt:n.university_name,className:"w-[80%] h-[80%] object-contain rounded-full"})}),iconStyle:{background:"#fff",boxShadow:"0 0 0 4px #6c5ce7"},children:[L.jsxs("div",{className:"mb-4",children:[L.jsx("h3",{className:"mb-2 text-xl font-bold text-white sm:text-2xl line-clamp-2",children:n.title}),L.jsx("p",{className:"m-0 text-sm font-semibold text-secondary sm:text-base",children:n.university_name})]}),L.jsx("div",{className:"mt-4 overflow-hidden text-xs leading-relaxed tracking-wider text-white-100 sm:text-sm line-clamp-4",dangerouslySetInnerHTML:{__html:n.contents}}),L.jsx("div",{className:"pt-3 mt-4 border-t border-gray-600",children:L.jsx("a",{href:n.urlofCompany||n.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-bold text-blue-400 underline transition-colors duration-300 hover:text-blue-300 sm:text-base",children:n.college_name})})]})},j2e=()=>{const[n,e]=W.useState([]);return W.useEffect(()=>{(async()=>{try{const i=(await Js(Jr(sn,"academics"))).docs.map(s=>({id:s.id,...s.data()}));i.sort((s,o)=>new Date(s.startDate)-new Date(o.startDate)),e(i)}catch(r){console.error("Error fetching academics: ",r)}})()},[]),L.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:`${li.sectionSubText} text-center`,children:"My Education Background"}),L.jsx("h2",{className:`${li.sectionHeadText} text-center`,children:"Education Journey"})]}),L.jsx("div",{className:"flex flex-col mt-12 sm:mt-16 lg:mt-20",children:L.jsx(EA.VerticalTimeline,{lineColor:"#6c5ce7",animate:!0,children:n.map(t=>L.jsx(U2e,{education:t},t.id))})})]})},jK=cD(j2e,"study"),V2e=um({title:Oi().required("Title is required"),office_name:Oi().required("Office Name is required"),designation:Oi().required("Designation is required"),icons:HO().min(1,"At least one icon is required"),startDate:gv().required("Start Date is required"),endDate:gv().optional(),contents:Oi().required("Content is required"),urlofCompany:Oi().required("URL of Company is required")}),VK=({editData:n,handleEditSuccess:e})=>{var h;const[t,r]=W.useState((n==null?void 0:n.contents)||""),[i,s]=W.useState([]),{enqueueSnackbar:o}=Cu(),a={title:(n==null?void 0:n.title)||"",office_name:(n==null?void 0:n.office_name)||"",designation:(n==null?void 0:n.designation)||"",icons:((h=n==null?void 0:n.icons)==null?void 0:h.map(f=>({icon:f.publicUrl})))||[],startDate:(n==null?void 0:n.startDate)||"",endDate:(n==null?void 0:n.endDate)||"",contents:(n==null?void 0:n.contents)||"",focusedField:"",urlofCompany:(n==null?void 0:n.urlofCompany)||""},l=async(f,{setSubmitting:p,resetForm:g,setFieldValue:x})=>{try{let _=[];f.icons&&f.icons.length>0&&(_=await Iv(f.icons,"journey")),_.length===0&&n&&(_=n.icons||[]);const v={title:f.title,office_name:f.office_name,designation:f.designation,icons:_,startDate:f.startDate,endDate:f.endDate,contents:t,urlofCompany:f.urlofCompany,addCreatedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n?(await fv(qr(sn,"journey",n.id),{...v,updatedAt:new Date().toISOString()}),o("Journey data updated successfully!",{variant:"success"}),x("icons",[])):(await Bp(Jr(sn,"journey"),v),o("Journey data submitted successfully!",{variant:"success"})),x("title",""),x("office_name",""),x("designation",""),x("icons",[]),x("startDate",""),x("endDate",""),x("contents",""),x("urlofCompany",""),r(""),g(),p(!1),window.location.reload()}catch(_){console.error("Error submitting form:",_),o("Failed to submit journey data. Please try again.",{variant:"error"}),p(!1)}},u=f=>{console.log("URL obtained inside handleFileRemove:",f),c(f)};async function c(f){const p=f.split("/storage/v1/object/public/storage/")[1];console.log(p,"File Path on delete");const{data:g,error:x}=await Fp.storage.from("storage").remove([p]);console.log("data",g),o("Image deleted successfully!",{variant:"success"}),x?console.error("Error deleting file:",x):console.log("File deleted successfully from Supabase")}return L.jsxs("div",{className:"w-full",children:[L.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 sm:mb-6",children:n?"Edit Journey":"Add Journey"}),L.jsx(oS,{initialValues:a,validationSchema:V2e,onSubmit:l,children:({setFieldValue:f,values:p,touched:g,errors:x,handleBlur:_,handleChange:v})=>L.jsxs(mx,{className:"space-y-4 sm:space-y-6",children:[L.jsx(tr,{name:"title",type:"text",label:"Title",value:p.title,onChange:b=>f("title",b.target.value),onBlur:_,error:x.title,touched:g.title,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(tr,{name:"office_name",type:"text",label:"Office Name",value:p.office_name,onChange:b=>f("office_name",b.target.value),onBlur:_,error:x.office_name,touched:g.office_name,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(tr,{name:"designation",type:"text",label:"Designation",value:p.designation,onChange:b=>f("designation",b.target.value),onBlur:_,error:x.designation,touched:g.designation,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(Rv,{name:"icons",value:p.icons,setFieldValue:f,error:x.icons,touched:g.icons,onFileRemove:u}),L.jsx(tr,{name:"urlofCompany",type:"text",label:"URL of Company",value:p.urlofCompany,onChange:b=>f("urlofCompany",b.target.value),onBlur:_,error:x.urlofCompany,touched:g.urlofCompany,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(tr,{name:"startDate",type:"date",label:"Start Date",value:p.startDate,onChange:b=>f("startDate",b.target.value),onBlur:_,error:x.startDate,touched:g.startDate,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(tr,{name:"endDate",type:"date",label:"End Date",value:p.endDate,onChange:b=>f("endDate",b.target.value),onBlur:_,error:x.endDate,touched:g.endDate,focusedField:p.focusedField,setFocusedField:b=>f("focusedField",b)}),L.jsx(Cv,{value:t,onChange:b=>{r(b),f("contents",b)},name:"contents",error:x.contents}),g.contents&&x.contents&&L.jsx("p",{className:"text-red-500 text-sm mt-2",children:x.contents}),L.jsx(Xt.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},z2e=()=>{const[n,e]=W.useState([]);Of();const{enqueueSnackbar:t}=Cu(),[r,i]=W.useState(!1),[s,o]=W.useState(null),[a,l]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const x=(await Js(Jr(sn,"journey"))).docs.map(_=>({id:_.id,..._.data()}));x.sort((_,v)=>{var S,C;const b=(S=_.createdAt)!=null&&S.toDate?_.createdAt.toDate():new Date,E=(C=v.createdAt)!=null&&C.toDate?v.createdAt.toDate():new Date;return b-E}),e(x),l(!1)}catch(g){console.error("Error fetching journeys: ",g)}})()},[a]);const u=p=>{const g=n.find(x=>x.id===p);console.log("Edit data on handle Edit",g),o(g),i(!0)},c=()=>{console.log("Edit success"),i(!1),l(!0)},h=async p=>{try{const g=qr(sn,"journey",p);console.log("Document reference:",g);const x=await Oa(g);if(!x.exists()){console.error("Document not found."),t("Journey data not found.",{variant:"error"});return}const _=x.data();console.log("Journey data:",_);const v=_.icons;console.log("File URL:",v);const b=await Pv(v,"journey");console.log("Delete",b),await Tf(qr(sn,"journey",p)),e(n.filter(E=>E.id!==p)),t("Journey data deleted successfully!",{variant:"success"})}catch{t("Failed to delete journey data. Please try again.",{variant:"error"})}},f=()=>{i(!1)};return L.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[L.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold mb-6",children:"Journeys"}),L.jsx("div",{className:"hidden md:block overflow-x-auto",children:L.jsxs("table",{className:"w-full table-auto border-collapse",children:[L.jsx("thead",{className:"bg-gray-100",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Title"}),L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Office"}),L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Designation"}),L.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Action"})]})}),L.jsx("tbody",{children:n.map(p=>L.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-3",children:p.title}),L.jsx("td",{className:"px-4 py-3",children:p.office_name}),L.jsx("td",{className:"px-4 py-3",children:p.designation}),L.jsxs("td",{className:"px-4 py-3 text-center",children:[L.jsx("button",{onClick:()=>u(p.id),className:"bg-blue-500 text-white px-3 py-1.5 rounded-md mr-2 hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>h(p.id),className:"bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},p.id))})]})}),L.jsx("div",{className:"md:hidden space-y-4",children:n.map(p=>L.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[L.jsxs("div",{className:"space-y-2 mb-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Title:"}),L.jsx("p",{className:"text-base",children:p.title})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Office:"}),L.jsx("p",{className:"text-base",children:p.office_name})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Designation:"}),L.jsx("p",{className:"text-base",children:p.designation})]})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>u(p.id),className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>h(p.id),className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},p.id))}),r&&L.jsx(mf,{onClose:f,title:s?"Edit Journey":"Add Journey",children:L.jsx("div",{className:"w-full",children:L.jsx(VK,{editData:s,handleEditSuccess:c})})})]})},zK=()=>{const[n,e]=W.useState([]);return W.useEffect(()=>{(async()=>{try{const i=(await Js(Jr(sn,"journey"))).docs.map(s=>({id:s.id,...s.data()}));i.sort((s,o)=>new Date(s.startDate)-new Date(o.startDate)),e(i)}catch(r){console.error("Error fetching journey: ",r)}})()},[]),L.jsxs("section",{className:"max-container px-4 sm:px-6 lg:px-8 py-6",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:`${li.sectionSubText} text-center`,children:"My Journey"}),L.jsx("h2",{className:`${li.sectionHeadText} text-center`,children:"Work Experience"}),L.jsx("p",{className:"text-center text-base sm:text-lg text-gray-600 mt-4 max-w-3xl mx-auto",children:"Here's a glimpse into my career journey, working with incredible teams and growing my skills."})]}),L.jsx("div",{className:"py-8 sm:py-12 lg:py-16",children:L.jsx("div",{className:"mt-8 sm:mt-12 flex",children:L.jsx(EA.VerticalTimeline,{lineColor:"#6c5ce7",animate:!0,children:n.map(t=>{const r=isNaN(new Date(t.endDate).getTime())?"Present":new Date(t.endDate).toLocaleDateString("en-GB",{month:"long",year:"numeric"});return L.jsxs(EA.VerticalTimelineElement,{date:L.jsx("span",{className:"text-base sm:text-lg font-semibold",style:{color:"black"},children:`${new Date(t.startDate).toLocaleDateString("en-GB",{month:"long",year:"numeric"})} - ${r}`}),icon:L.jsx("div",{className:"flex justify-center items-center w-full h-full rounded-full overflow-hidden bg-white",children:L.jsx("img",{src:t.icons[0].publicUrl,alt:t.office_name,className:"w-[80%] h-[80%] object-contain rounded-full"})}),iconStyle:{background:"#fff",boxShadow:"0 0 0 4px #6c5ce7"},contentStyle:{borderBottom:"8px",borderStyle:"solid",borderBottomColor:"#6c5ce7",boxShadow:"0 3px 0 #6c5ce7",background:"#1d1836",color:"#fff",padding:"1.5rem",minHeight:"320px"},contentArrowStyle:{borderRight:"7px solid #1d1836"},children:[L.jsxs("div",{className:"mb-4",children:[L.jsx("h3",{className:"text-white text-xl sm:text-2xl font-bold mb-2 line-clamp-2",children:t.title}),L.jsx("p",{className:"text-gray-300 font-semibold text-sm sm:text-base mb-1",style:{margin:0},children:t.office_name}),L.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:t.designation})]}),L.jsx("div",{className:"my-4 text-white-100 text-xs sm:text-sm leading-relaxed tracking-wider line-clamp-4 overflow-hidden",dangerouslySetInnerHTML:{__html:t.contents}}),L.jsx("div",{className:"mt-4 pt-3 border-t border-gray-600",children:L.jsxs("a",{href:t.urlofCompany,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm sm:text-base font-bold transition-colors duration-300 underline",children:["Visit: ",t.office_name]})})]},t.id||t.office_name)})})})}),L.jsx("hr",{className:"border-slate-200 my-8"})]})},i9=({children:n,className:e})=>L.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md border border-black ${e}`,children:n}),HK=({editData:n})=>{var l;const[e,t]=W.useState((n==null?void 0:n.contents)||""),[r,i]=W.useState([]),{enqueueSnackbar:s}=Cu();console.log("Edit data",n);const o={name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",tags:(n==null?void 0:n.tags)||"",icons:n!=null&&n.icons?[{icon:(l=n==null?void 0:n.icons)==null?void 0:l.publicUrl}]:[],link:(n==null?void 0:n.link)||!1,contents:(n==null?void 0:n.contents)||"",source_code_link:(n==null?void 0:n.source_code_link)||"",info:(n==null?void 0:n.info)||[{project_id:"",icons:[],contents:""}]},a=async(u,{setSubmitting:c,resetForm:h,setFieldValue:f})=>{console.log("Form values",u);try{let p=[];u.icons&&(p=await Iv(u.icons,"projects")),console.log("Uploaded Urls",p);const g={name:u.name,description:u.description,tags:u.tags.map(x=>x),icons:p[0]||"",link:u.link||!0,contents:u.contents,source_code_link:u.source_code_link};if(console.log("Project data",g),n){console.log("HIT EDIT");const x=qr(sn,"projects",n.id);await fv(x,g),s("Project updated successfully!",{variant:"success"})}else{console.log("HIT");const x=await Bp(Jr(sn,"projects"),g);console.log("Project created",x);const _=x.id,v=[];for(let b of u.info){let E=[];b.icons&&(E=await Iv(b.icons,"projects")),v.push({project_id:_,icons:E,contents:b.contents})}await Promise.all(v.map(async b=>{await Bp(Jr(sn,"projectDetails"),b)})),s("Project added successfully!",{variant:"success"})}h(),c(!1)}catch(p){console.error("Error adding project:",p),s("Failed to submit project data. Please try again.",{variant:"error"}),c(!1)}};return L.jsxs("div",{className:"w-full",children:[L.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 sm:mb-6",children:n?"Edit Project":"Add Project"}),L.jsx(oS,{initialValues:o,onSubmit:a,children:({setFieldValue:u,values:c,touched:h,errors:f,handleBlur:p,handleChange:g})=>L.jsxs(mx,{className:"space-y-4 sm:space-y-6",children:[L.jsx(tr,{name:"name",type:"text",label:"Project Name",value:c.name,onChange:x=>u("name",x.target.value),onBlur:p,error:f.name,touched:h.name,setFocusedField:x=>u("focusedField",x)}),L.jsx(tr,{name:"description",type:"text",label:"Description",value:c.description,onChange:x=>u("description",x.target.value),onBlur:p,error:f.description,touched:h.description,setFocusedField:x=>u("focusedField",x)}),L.jsx(i9,{children:L.jsx(fE,{name:"tags",render:x=>L.jsxs("div",{className:"space-y-4",children:[c.tags&&c.tags.length>0?c.tags.map((_,v)=>L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsx("input",{name:`tags[${v}]`,value:_,onChange:b=>u(`tags[${v}]`,b.target.value),onBlur:p,className:"border p-2 rounded"}),L.jsx("button",{type:"button",onClick:()=>x.remove(v),className:"text-red-500 hover:text-red-700",children:"Remove"})]},v)):L.jsx("p",{children:"No tags available"}),L.jsx("button",{type:"button",onClick:()=>x.push(""),className:"mt-2 text-blue-500 hover:text-blue-700",children:"Add Tag"})]})})}),L.jsx(Rv,{name:"icons",value:c.icons,setFieldValue:u,error:f.icons,touched:h.icons}),L.jsx(tr,{name:"source_code_link",type:"url",label:"Source Code Link",value:c.source_code_link,onChange:x=>u("source_code_link",x.target.value),onBlur:p,error:f.source_code_link,touched:h.source_code_link,setFocusedField:x=>u("focusedField",x)}),L.jsx(Cv,{value:e,onChange:x=>{t(x),u("contents",x)},name:"contents",error:f.contents}),!n&&L.jsx(i9,{children:L.jsx(fE,{name:"info",render:x=>L.jsxs("div",{children:[c.info.map((_,v)=>{var b,E,S,C;return L.jsxs("div",{className:"space-y-4",children:[L.jsx(Rv,{name:`info[${v}].icons`,value:_.icons,setFieldValue:u,error:(E=(b=f.info)==null?void 0:b[v])==null?void 0:E.icons,touched:(C=(S=h.info)==null?void 0:S[v])==null?void 0:C.icons}),L.jsx(Cv,{value:_.contents,onChange:D=>{u(`info[${v}].contents`,D)},name:`info[${v}].contents`}),L.jsx("button",{type:"button",onClick:()=>x.remove(v),children:"Remove Info"})]},v)}),L.jsx("button",{type:"button",onClick:()=>x.push({project_id:"",icons:[],contents:""}),children:"Add Info"})]})})}),L.jsx(Xt.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},H2e=()=>{const[n,e]=W.useState([]),{enqueueSnackbar:t}=Cu(),[r,i]=W.useState(!1),[s,o]=W.useState(null);W.useEffect(()=>{(async()=>{try{const f=(await Js(Jr(sn,"projects"))).docs.map(p=>({id:p.id,...p.data()}));e(f)}catch(h){console.error("Error fetching projects: ",h)}})()},[]);const a=c=>{const h=n.find(f=>f.id===c);o(h),i(!0)},l=async c=>{try{const h=qr(sn,"projects",c),p=(await Oa(h)).data();if(!p)throw new Error("Project not found");const{icons:g}=p,x=g==null?void 0:g.publicUrl;if(!x)throw new Error("No public URL found in icons object");const _=Jr(sn,"projectDetails"),b=(await Js(_)).docs.filter(E=>{const S=E.data();return S.project_id&&S.project_id==c});for(const E of b){const S=E.data();if(S&&S.icons){console.log("Detail Data",S);const C=S.icons.map(D=>D.publicUrl);C.length>0&&(console.log("Deleting images for projectDetails document:",E.id),await Pv(C,"projects"))}await Tf(qr(sn,"projectDetails",E.id))}await Pv(x,"projects"),await Tf(h),e(n.filter(E=>E.id!==c)),t("Project deleted successfully!",{variant:"success"})}catch(h){t("Failed to delete project. Please try again.",{variant:"error"}),console.error("Error deleting project:",h)}},u=()=>i(!1);return L.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[L.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold mb-6",children:"Projects"}),L.jsx("div",{className:"hidden md:block overflow-x-auto",children:L.jsxs("table",{className:"w-full table-auto border-collapse",children:[L.jsx("thead",{className:"bg-gray-100",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Project Name"}),L.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Description"}),L.jsx("th",{className:"px-4 py-3 text-center font-semibold",children:"Action"})]})}),L.jsx("tbody",{children:n.map(c=>L.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-3",children:c.name}),L.jsx("td",{className:"px-4 py-3",children:c.description}),L.jsxs("td",{className:"px-4 py-3 text-center",children:[L.jsx("button",{onClick:()=>a(c.id),className:"bg-blue-500 text-white px-3 py-1.5 rounded-md mr-2 hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>l(c.id),className:"bg-red-500 text-white px-3 py-1.5 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},c.id))})]})}),L.jsx("div",{className:"md:hidden space-y-4",children:n.map(c=>L.jsxs("div",{className:"bg-white border rounded-lg p-4 shadow-sm",children:[L.jsxs("div",{className:"space-y-2 mb-4",children:[L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Project Name:"}),L.jsx("p",{className:"text-base",children:c.name})]}),L.jsxs("div",{children:[L.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Description:"}),L.jsx("p",{className:"text-base",children:c.description})]})]}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("button",{onClick:()=>a(c.id),className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),L.jsx("button",{onClick:()=>l(c.id),className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},c.id))}),r&&L.jsx(mf,{onClose:u,title:"Edit Project",children:L.jsx(HK,{editData:s,handleEditSuccess:u})})]})};var G2e=Object.defineProperty,q2e=Object.defineProperties,W2e=Object.getOwnPropertyDescriptors,s9=Object.getOwnPropertySymbols,$2e=Object.prototype.hasOwnProperty,K2e=Object.prototype.propertyIsEnumerable,o9=(n,e,t)=>e in n?G2e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,p0=(n,e)=>{for(var t in e||(e={}))$2e.call(e,t)&&o9(n,t,e[t]);if(s9)for(var t of s9(e))K2e.call(e,t)&&o9(n,t,e[t]);return n},m0=(n,e)=>q2e(n,W2e(e)),nT=class extends W.Component{constructor(n){super(n),this.ref=Qt.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:m0(p0({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:m0(p0({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:m0(p0({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:m0(p0({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,r=Math.min(Math.max(e,0),1),i=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-r*this.settings.max)).toFixed(2),o=(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),a=r*100,l=i*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:m0(p0({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return L.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const GK=({index:n,name:e,description:t,tags:r,image:i,source_code_link:s,icons:o,route:a})=>L.jsx(Xt.div,{variants:Ru("up","spring",n*.5,.75),className:"w-full",children:L.jsx(nT,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl w-full h-[450px] flex flex-col",children:L.jsxs(ua,{to:`/${a}/${n}`,className:"flex flex-col h-full",children:[L.jsxs("div",{className:"relative w-full h-[220px] flex-shrink-0",children:[L.jsx("img",{src:o.publicUrl,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),L.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:L.jsx("div",{onClick:l=>{l.stopPropagation(),window.open(s,"_blank")},className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:L.jsx("img",{src:o.publicURL,alt:"source code",className:"w-[15%] aspect-[3/2] object-contain mix-blend-color-burn rounded-lg"})})})]}),L.jsxs("div",{className:"mt-4 flex-grow",children:[L.jsx("h3",{className:"text-black font-bold text-[20px] line-clamp-2",children:e}),L.jsx("p",{className:"mt-2 text-secondary text-[14px] line-clamp-3",children:t})]}),L.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r&&r.map(l=>L.jsxs("p",{className:"text-[12px] text-[#6c5ce7]",children:["#",l]},`${e}-${l.name}`))})]})})}),qK=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0);return W.useEffect(()=>{(async()=>{const a=(await Js(Jr(sn,"projects"))).docs.map(l=>({id:l.id,...l.data()})).sort((l,u)=>new Date(l.startDate)-new Date(u.startDate));e(a),r(!1)})()},[]),t?L.jsx("p",{children:"Loading..."}):L.jsxs("div",{className:"px-4 sm:px-6 md:px-8 lg:px-10 py-6",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:li.sectionSubText,children:"My work"}),L.jsx("h2",{className:li.sectionHeadText,children:"Projects."})]}),L.jsx(Xt.p,{variants:Ru("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcase my skills and experience through real-world examples of my work. Each project is briefly described with links to code repositories and live demos in it. It reflects my ability to solve complex problems, work with different technologies, and manage projects effectively."}),L.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(i=>L.jsx(GK,{index:i==null?void 0:i.id,...i,route:"projects"},i.id))})]})},a9=({children:n,className:e})=>L.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md border border-black ${e}`,children:n}),WK=({editData:n})=>{var o;const[e,t]=W.useState((n==null?void 0:n.contents)||""),{enqueueSnackbar:r}=Cu(),i={name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",tags:(n==null?void 0:n.tags)||"",icons:n!=null&&n.icons?[{icon:(o=n==null?void 0:n.icons)==null?void 0:o.publicUrl}]:[],link:(n==null?void 0:n.link)||!1,source_code_link:(n==null?void 0:n.source_code_link)||"",contents:(n==null?void 0:n.contents)||"",info:(n==null?void 0:n.info)||[{achievement_id:"",icons:[],contents:""}]},s=async(a,{setSubmitting:l,resetForm:u})=>{try{let c=[];a.icons&&(c=await Iv(a.icons,"achievements"));const h={name:a.name,description:a.description,tags:a.tags.map(f=>f),icons:c[0]||"",link:a.link||!0,contents:a.contents,source_code_link:a.source_code_link};if(n){const f=qr(sn,"achievements",n.id);await fv(f,h),r("Achievement updated successfully!",{variant:"success"})}else{const p=(await Bp(Jr(sn,"achievements"),h)).id,g=[];for(let x of a.info){let _=[];x.icons&&(_=await Iv(x.icons,"achievements")),g.push({achievement_id:p,icons:_,contents:x.contents})}await Promise.all(g.map(async x=>{await Bp(Jr(sn,"achievementDetails"),x)})),r("Achievement added successfully!",{variant:"success"})}u(),l(!1)}catch(c){console.error("Error adding achievement:",c),r("Failed to submit achievement data. Please try again.",{variant:"error"}),l(!1)}};return L.jsxs("div",{className:"container mx-auto p-4",children:[L.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"Edit Achievement":"Add Achievement"}),L.jsx(oS,{initialValues:i,onSubmit:s,children:({setFieldValue:a,values:l,touched:u,errors:c,handleBlur:h})=>L.jsxs(mx,{className:"space-y-6",children:[L.jsx(tr,{name:"name",type:"text",label:"Achievement Name",value:l.name,onChange:f=>a("name",f.target.value),onBlur:h,error:c.name,touched:u.name}),L.jsx(tr,{name:"description",type:"text",label:"Description",value:l.description,onChange:f=>a("description",f.target.value),onBlur:h,error:c.description,touched:u.description}),L.jsx(a9,{children:L.jsx(fE,{name:"tags",render:f=>L.jsxs("div",{className:"space-y-4",children:[l.tags&&l.tags.length>0?l.tags.map((p,g)=>L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsx("input",{name:`tags[${g}]`,value:p,onChange:x=>a(`tags[${g}]`,x.target.value),onBlur:h,className:"border p-2 rounded"}),L.jsx("button",{type:"button",onClick:()=>f.remove(g),className:"text-red-500 hover:text-red-700",children:"Remove"})]},g)):L.jsx("p",{children:"No tags available"}),L.jsx("button",{type:"button",onClick:()=>f.push(""),className:"mt-2 text-blue-500 hover:text-blue-700",children:"Add Tag"})]})})}),L.jsx(Rv,{name:"icons",value:l.icons,setFieldValue:a,error:c.icons,touched:u.icons}),L.jsx(tr,{name:"source_code_link",type:"url",label:"Source Code Link",value:l.source_code_link,onChange:f=>a("source_code_link",f.target.value),onBlur:h,error:c.source_code_link,touched:u.source_code_link,setFocusedField:f=>a("focusedField",f)}),L.jsx(Cv,{value:e,onChange:f=>{t(f),a("contents",f)},name:"contents",error:c.contents}),!n&&L.jsx(a9,{children:L.jsx(fE,{name:"info",render:f=>L.jsxs("div",{children:[l.info.map((p,g)=>{var x,_,v,b;return L.jsxs("div",{className:"space-y-4",children:[L.jsx(Rv,{name:`info[${g}].icons`,value:p.icons,setFieldValue:a,error:(_=(x=c.info)==null?void 0:x[g])==null?void 0:_.icons,touched:(b=(v=u.info)==null?void 0:v[g])==null?void 0:b.icons}),L.jsx(Cv,{value:p.contents,onChange:E=>{a(`info[${g}].contents`,E)},name:`info[${g}].contents`}),L.jsx("button",{type:"button",onClick:()=>f.remove(g),children:"Remove Info"})]},g)}),L.jsx("button",{type:"button",onClick:()=>f.push({achievement_id:"",icons:[],contents:""}),children:"Add Info"})]})})}),L.jsx(Xt.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},J2e=()=>{const[n,e]=W.useState([]),{enqueueSnackbar:t}=Cu(),[r,i]=W.useState(!1),[s,o]=W.useState(null);W.useEffect(()=>{(async()=>{try{const f=(await Js(Jr(sn,"achievements"))).docs.map(p=>({id:p.id,...p.data()}));e(f)}catch(h){console.error("Error fetching achievements: ",h)}})()},[]);const a=c=>{const h=n.find(f=>f.id===c);o(h),i(!0)},l=async c=>{try{const h=doc(sn,"achievements",c),p=(await Oa(h)).data();if(!p)throw new Error("Achievement not found");const{icons:g}=p,x=g==null?void 0:g.publicUrl;if(!x)throw new Error("No public URL found in images object");await Pv(x,"achievements");const _=Jr(sn,"achievementDetails"),b=(await Js(_)).docs.filter(E=>{const S=E.data();return S.achievement_id&&S.achievement_id===c});for(const E of b){const S=E.data();if(S&&S.icons){const C=S.icons.map(D=>D==null?void 0:D.publicUrl);C.length>0&&await Pv(C,"achievements")}await Tf(doc(sn,"achievementDetails",E.id))}await Tf(h),e(n.filter(E=>E.id!==c)),t("Achievement deleted successfully!",{variant:"success"})}catch(h){t("Failed to delete achievement. Please try again.",{variant:"error"}),console.error("Error deleting achievement:",h)}},u=()=>i(!1);return L.jsxs("div",{className:"container mx-auto p-4",children:[L.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Achievements"}),L.jsxs("table",{className:"w-full table-auto",children:[L.jsx("thead",{children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-2 text-left",children:"Achievement Name"}),L.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),L.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),L.jsx("tbody",{children:n.map(c=>L.jsxs("tr",{children:[L.jsx("td",{className:"px-4 py-2",children:c.name}),L.jsx("td",{className:"px-4 py-2",children:c.description}),L.jsxs("td",{className:"px-4 py-2 text-center",children:[L.jsx("button",{onClick:()=>a(c.id),className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",children:"Edit"}),L.jsx("button",{onClick:()=>l(c.id),className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Delete"})]})]},c.id))})]}),r&&L.jsx(mf,{onClose:u,title:"Edit Achievement",children:L.jsx(WK,{editData:s,handleEditSuccess:u})})]})},$K=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0);return W.useEffect(()=>{(async()=>{const a=(await Js(Jr(sn,"achievements"))).docs.map(l=>({id:l.id,...l.data()})).sort((l,u)=>new Date(u.date)-new Date(l.date));e(a),r(!1)})()},[]),t?L.jsx("p",{children:"Loading..."}):L.jsxs("div",{className:"px-4 sm:px-6 md:px-8 lg:px-10 py-6",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:li.sectionSubText,children:"My Achievements"}),L.jsx("h2",{className:li.sectionHeadText,children:"Achievements."})]}),L.jsx(Xt.p,{variants:Ru("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"These achievements showcase milestones and recognitions in my career. Each achievement is briefly described with links to relevant resources."}),L.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((i,s)=>L.jsx(GK,{index:i.id,...i,route:"achievements"},i.id))})]})},X2e=({index:n,name:e,image:t})=>L.jsx(Xt.div,{variants:Ru("up","spring",n*.5,.75),className:"w-full",children:L.jsxs(nT,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl w-full h-[450px] flex flex-col",children:[L.jsx("div",{className:"relative w-full h-[220px] flex-shrink-0",children:L.jsx("img",{src:t,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"})}),L.jsx("div",{className:"mt-4 flex-grow flex items-center justify-center",children:L.jsx("h3",{className:"text-black font-bold text-[20px] text-center line-clamp-6",dangerouslySetInnerHTML:{__html:e}})})]})}),Y2e=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0),{id:i}=_9();return W.useEffect(()=>{(async()=>{const a=(await Js(Jr(sn,"projectDetails"))).docs.map(c=>({id:c.id,...c.data()})),u=(i?a.filter(c=>c.project_id===i):a).sort((c,h)=>new Date(c.startDate)-new Date(h.startDate));e(u),r(!1)})()},[i]),t?L.jsx("p",{children:"Loading..."}):L.jsxs("div",{className:"px-4 sm:px-6 md:px-8 lg:px-10 py-6",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:li.sectionSubText,children:"My work"}),L.jsx("h2",{className:li.sectionHeadText,children:"Projects."})]}),L.jsx(Xt.p,{variants:Ru("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Some Images"}),L.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(s=>{var o;return L.jsx(X2e,{index:s.id,name:s.contents,image:s.icons&&((o=s.icons[0])==null?void 0:o.publicUrl)},s.id)})})]})},Q2e=({index:n,title:e,image:t,description:r})=>L.jsx(Xt.div,{variants:Ru("up","spring",n*.5,.75),className:"w-full",children:L.jsxs(nT,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl w-full h-[450px] flex flex-col",children:[L.jsx("div",{className:"relative w-full h-[220px] flex-shrink-0",children:L.jsx("img",{src:t,alt:"achievement_image",className:"w-full h-full object-cover rounded-2xl"})}),L.jsx("div",{className:"mt-4 flex-grow flex items-center justify-center",children:L.jsx("h3",{className:"text-black font-bold text-[20px] text-center line-clamp-6",dangerouslySetInnerHTML:{__html:e}})})]})}),Z2e=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0),{id:i}=_9();return W.useEffect(()=>{(async()=>{const a=(await Js(Jr(sn,"achievementDetails"))).docs.map(c=>({id:c.id,...c.data()})),u=(i?a.filter(c=>c.achievement_id===i):a).sort((c,h)=>new Date(c.dateAchieved)-new Date(h.dateAchieved));e(u),r(!1)})()},[i]),t?L.jsx("p",{children:"Loading..."}):L.jsxs("div",{className:"px-4 sm:px-6 md:px-8 lg:px-10 py-6",children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:li.sectionSubText,children:"My Achievements"}),L.jsx("h2",{className:li.sectionHeadText,children:"Achievements."})]}),L.jsx(Xt.p,{variants:Ru("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Some Images"}),L.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(s=>{var o;return L.jsx(Q2e,{index:s.id,title:s.contents,description:s.description,image:s.icons&&((o=s.icons[0])==null?void 0:o.publicUrl)},s.id)})})]})};var g0={},v0={},L2,l9;function eIe(){if(l9)return L2;l9=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof of=="object"&&of&&of.Object===Object&&of,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),h=Object.prototype,f=h.toString,p=Math.max,g=Math.min,x=function(){return c.Date.now()};function _(D,M,P){var O,R,N,U,F,J,Z=0,oe=!1,ae=!1,Q=!0;if(typeof D!="function")throw new TypeError(n);M=C(M)||0,b(P)&&(oe=!!P.leading,ae="maxWait"in P,N=ae?p(C(P.maxWait)||0,M):N,Q="trailing"in P?!!P.trailing:Q);function ee(ve){var xe=O,Te=R;return O=R=void 0,Z=ve,U=D.apply(Te,xe),U}function Y(ve){return Z=ve,F=setTimeout(re,M),oe?ee(ve):U}function V(ve){var xe=ve-J,Te=ve-Z,$e=M-xe;return ae?g($e,N-Te):$e}function X(ve){var xe=ve-J,Te=ve-Z;return J===void 0||xe>=M||xe<0||ae&&Te>=N}function re(){var ve=x();if(X(ve))return se(ve);F=setTimeout(re,V(ve))}function se(ve){return F=void 0,Q&&O?ee(ve):(O=R=void 0,U)}function he(){F!==void 0&&clearTimeout(F),Z=0,O=J=R=F=void 0}function te(){return F===void 0?U:se(x())}function ce(){var ve=x(),xe=X(ve);if(O=arguments,R=this,J=ve,xe){if(F===void 0)return Y(J);if(ae)return F=setTimeout(re,M),ee(J)}return F===void 0&&(F=setTimeout(re,M)),U}return ce.cancel=he,ce.flush=te,ce}function v(D,M,P){var O=!0,R=!0;if(typeof D!="function")throw new TypeError(n);return b(P)&&(O="leading"in P?!!P.leading:O,R="trailing"in P?!!P.trailing:R),_(D,M,{leading:O,maxWait:M,trailing:R})}function b(D){var M=typeof D;return!!D&&(M=="object"||M=="function")}function E(D){return!!D&&typeof D=="object"}function S(D){return typeof D=="symbol"||E(D)&&f.call(D)==t}function C(D){if(typeof D=="number")return D;if(S(D))return e;if(b(D)){var M=typeof D.valueOf=="function"?D.valueOf():D;D=b(M)?M+"":M}if(typeof D!="string")return D===0?D:+D;D=D.replace(r,"");var P=s.test(D);return P||o.test(D)?a(D.slice(2),P?2:8):i.test(D)?e:+D}return L2=v,L2}var B2,u9;function tIe(){return u9||(u9=1,B2=function(e,t,r,i){var s=r?r.call(i,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var h=e[c],f=t[c];if(s=r?r.call(i,h,f,c):void 0,s===!1||s===void 0&&h!==f)return!1}return!0}),B2}var c9;function nIe(){if(c9)return v0;c9=1,v0.__esModule=!0,v0.default=void 0;var n=s(kf()),e=i(KS()),t=i(eIe()),r=i(tIe());function i(u){return u&&u.__esModule?u:{default:u}}function s(u){if(u&&u.__esModule)return u;var c={};if(u!=null){for(var h in u)if(Object.prototype.hasOwnProperty.call(u,h)){var f=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(u,h):{};f.get||f.set?Object.defineProperty(c,h,f):c[h]=u[h]}}return c.default=u,c}function o(){return o=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var h=arguments[c];for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&(u[f]=h[f])}return u},o.apply(this,arguments)}function a(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u,u.__proto__=c}var l=(function(u){a(c,u);function c(f){var p;return p=u.call(this,f)||this,p.isVisible=function(g,x,_){var v=g.top,b=g.left,E=g.bottom,S=g.right,C=g.width,D=g.height,M=p.props,P=M.offset,O=M.partialVisibility;if(v+S+E+b===0)return!1;var R=0-P,N=0-P,U=x+P,F=_+P;return O?v+D>=R&&b+C>=N&&E-D<=F&&S-C<=U:v>=R&&b>=N&&E<=F&&S<=U},p.isComponentVisible=function(){setTimeout(function(){if(!(!p.nodeRef||!p.nodeRef.getBoundingClientRect)){var g=document.documentElement,x=p.props.once,_=p.nodeRef.getBoundingClientRect(),v=window.innerWidth||g.clientWidth,b=window.innerHeight||g.clientHeight,E=p.isVisible(_,v,b);E&&x&&p.removeListener(),p.setState({isVisible:E})}},0)},p.setNodeRef=function(g){return p.nodeRef=g},p.ownProps=Object.keys(c.propTypes),p.state={isVisible:!1},p.throttleCb=(0,t.default)(p.isComponentVisible,p.props.throttleInterval),f.nodeRef&&p.setNodeRef(f.nodeRef),p}var h=c.prototype;return h.componentDidMount=function(){this.attachListener(),this.isComponentVisible()},h.componentDidUpdate=function(p){(0,r.default)(this.getChildProps(this.props),this.getChildProps(p))||this.isComponentVisible()},h.componentWillUnmount=function(){this.removeListener()},h.attachListener=function(){window.addEventListener("scroll",this.throttleCb),window.addEventListener("resize",this.throttleCb)},h.removeListener=function(){window.removeEventListener("scroll",this.throttleCb),window.removeEventListener("resize",this.throttleCb)},h.getChildProps=function(p){var g=this;p===void 0&&(p=this.props);var x={};return Object.keys(p).forEach(function(_){g.ownProps.indexOf(_)===-1&&(x[_]=p[_])}),x},h.getChildren=function(){var p=this;return typeof this.props.children=="function"?this.props.children(o({},this.getChildProps(),{isVisible:this.state.isVisible})):n.default.Children.map(this.props.children,function(g){return n.default.cloneElement(g,o({},p.getChildProps(),{isVisible:p.state.isVisible}))})},h.render=function(){var p=this.props,g=p.className,x=p.style,_=p.nodeRef,v=p.tag,b=o({},g&&{className:g},x&&{style:x});return n.default.createElement(v,o({ref:!_&&this.setNodeRef},b),this.getChildren())},c})(n.PureComponent);return v0.default=l,l.propTypes={once:e.default.bool,throttleInterval:function(c,h,f){var p=c[h];return!Number.isInteger(p)||p<0?new Error("The "+h+" prop you provided to "+f+" is not a valid integer >= 0."):null},children:e.default.oneOfType([e.default.func,e.default.element,e.default.arrayOf(e.default.element)]),style:e.default.object,className:e.default.string,offset:e.default.number,partialVisibility:e.default.bool,nodeRef:e.default.object,tag:e.default.string},l.defaultProps={once:!1,throttleInterval:150,offset:0,partialVisibility:!1,tag:"div"},v0}var h9;function rIe(){if(h9)return g0;h9=1,g0.__esModule=!0,g0.default=void 0;var n=e(nIe());function e(r){return r&&r.__esModule?r:{default:r}}var t=n.default;return g0.default=t,g0}var iIe=rIe();const sIe=Ll(iIe),oIe="/assets/github-BUfx7uqA.png",aIe="/assets/tiktak-C7KmBz5i.jpg",lIe="/assets/jobit-Bku9SwYl.png",uIe="/assets/pcb-ROKGr3Bb.jpg",cIe="/assets/bio-B6HV6OOm.jpg",hIe="/assets/kecconf1-sGY50p6W.jpg",fIe="/assets/youtube-U8U-LzKU.png",dIe=[{name:"TikTak Project Using C",description:"My 1st semester project (Tiktactoe) C language, a simple application has been prepared. The Tic-tac-toe is a pencil game for two players, X and O, who takes turns marking the spaces in a 3X3 grid player. ",tags:[{name:"C",color:"blue-text-gradient"},{name:"Array",color:"green-text-gradient"}],image:aIe,source_code_link:"https://github.com/SahajShakya/Tiktaktoe_cProject"},{name:"Bank Management Using C++",description:"The topic for our project is 'Bank Management System'. File handling has been effectively used for each feature of this project. Our Bank Management System can add records, search, modify & delete records. General concepts of if while loops, functions, classes and file has been used to create this program.",tags:[{name:"C++",color:"blue-text-gradient"},{name:"OPP",color:"green-text-gradient"}],image:lIe,source_code_link:"https://github.com/SahajShakya/BankManagemet-C-Project-"},{name:"Density Based Traffic Light",description:"Density Based Automatic Traffic Light Controlled System that helps to control traffics and reduces accidents.",tags:[{name:"Arduino",color:"blue-text-gradient"},{name:"AVR",color:"green-text-gradient"},{name:"Python",color:"pink-text-gradient"},{name:"CNN",color:"pink-text-gradient"}],image:uIe,source_code_link:"https://github.com/SahajShakya/Desnsity-based-Traffic-Control-System-AVR-"},{name:"Bio Robotic Arm",description:"Bio-Robotic arm is project based on a biofeedback mechanical arm that uses a low dimensional input derived from EMG (electromyography) data. ",tags:[{name:"arduino",color:"blue-text-gradient"},{name:"raspberry pi",color:"green-text-gradient"},{name:"EMG< EEG",color:"pink-text-gradient"},{name:"python",color:"blue-text-gradient"},{name:"ANN",color:"green-text-gradient"}],image:cIe,source_code_link:"https://github.com/SahajShakya/Bio-Robotic-Arm",link:!0,icon:fIe},{name:"Thesis: SDN-Loadbalancing-and-DDOS-Detections",description:"This prject reduces the overhead in traffic, classify between traffic and DDoS Attack using SVM, find optimal path using DFS",tags:[{name:"python",color:"blue-text-gradient"},{name:"SVM",color:"green-text-gradient"},{name:"DFS",color:"pink-text-gradient"},{name:"GeneticAlgorithm",color:"blue-text-gradient"},{name:"SDN",color:"green-text-gradient"}],image:hIe,source_code_link:"https://github.com/SahajShakya/SDN-Loadbalancing-and-DDOS-Detections"}],pIe=({index:n,name:e,description:t,tags:r,image:i,source_code_link:s})=>L.jsx(Xt.div,{variants:Ru("up","spring",n*.5,.75),children:L.jsxs(nT,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[L.jsxs("div",{className:"relative w-full h-[230px]",children:[L.jsx("img",{src:i,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),L.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:L.jsx("div",{onClick:()=>window.open(s,"_blank"),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:L.jsx("img",{src:oIe,alt:"source code",className:"w-1/2 h-1/2 object-contain"})})})]}),L.jsxs("div",{className:"mt-5",children:[L.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),L.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t})]}),L.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r.map(o=>L.jsxs("p",{className:`text-[14px] ${o.color}`,children:["#",o.name]},`${e}-${o.name}`))})]})}),mIe=()=>L.jsxs(L.Fragment,{children:[L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:`${li.sectionSubText} `,children:"My work"}),L.jsx("h2",{className:`${li.sectionHeadText}`,children:"Academic Works."})]}),L.jsx("div",{className:"w-full flex",children:L.jsx(Xt.p,{variants:Ru("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcases my research and academic works"})}),L.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:dIe.map((n,e)=>L.jsx(pIe,{index:e,...n},`project-${e}`))})]}),gIe=cD(mIe,"academicworks"),vIe=({index:n,testimonial:e,name:t,designation:r,company:i,image:s})=>L.jsxs(Xt.div,{variants:Ru("","spring",n*.5,.75),className:"flex-none w-full sm:w-[320px] md:w-[400px] lg:w-[500px] bg-black-200 p-10 rounded-3xl mx-2",children:[L.jsx("p",{className:"text-black font-black text-[48px]",children:'"'}),L.jsxs("div",{className:"mt-1",children:[L.jsx("p",{className:"text-black tracking-wider text-[18px]",children:e}),L.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[L.jsxs("div",{className:"flex-1 flex flex-col",children:[L.jsxs("p",{className:"text-black font-medium text-[16px]",children:[L.jsx("span",{className:"blue-text-gradient",children:"@"})," ",t]}),L.jsxs("p",{className:"mt-1 text-secondary text-[12px]",children:[r," of ",i]})]}),L.jsx("img",{src:s,alt:`feedback_by-${t}`,className:"w-10 h-10 rounded-full object-cover"})]})]})]}),yIe=()=>{const[n,e]=W.useState([]);return W.useEffect(()=>{(async()=>{try{const i=(await Js(Jr(sn,"testimonials"))).docs.map(s=>({id:s.id,...s.data()}));e(i)}catch(r){console.error("Error fetching achievements: ",r)}})()},[]),L.jsxs("div",{className:"mt-12 bg-black-100 rounded-[20px]",children:[L.jsx("div",{className:`bg-tertiary rounded-2xl ${li.padding} min-h-[300px]`,children:L.jsxs(Xt.div,{variants:Gf(),children:[L.jsx("p",{className:li.sectionSubText,children:"What others say"}),L.jsx("h2",{className:li.sectionHeadText,children:"Testimonials."})]})}),L.jsx("div",{className:`-mt-20 pb-14 ${li.paddingX} overflow-x-auto scroll-smooth flex gap-7`,children:L.jsx(Xt.div,{animate:{x:["0%","-33.33%","-66.66%","0%"]},transition:{duration:9,ease:"linear",repeat:1/0},className:"flex gap-7",children:n.map((t,r)=>L.jsx(vIe,{index:r,...t},t.name))})})]})},_Ie=cD(yIe,"feedbacks"),xIe=()=>{const[n,e]=W.useState(0),[t,r]=W.useState(!1),[i,s]=W.useState(""),[o,a]=W.useState(100-Math.random()),[l,u]=W.useState(1),c=["Electronics Engineer","Computer Engineer","Web Developer","Teacher","Researcher","Photographer"],h=1e3;W.useEffect(()=>{let p=setInterval(()=>{f()},o);return()=>{clearInterval(p)}},[i]);const f=()=>{let p=n%c.length,g=c[p],x=t?g.substring(0,i.length-1):g.substring(0,i.length+1);s(x),t&&a(_=>_/2),!t&&x===g?(r(!0),u(_=>_-1),a(h)):t&&x===""?(r(!1),e(n+1),u(1),a(20)):u(_=>_+1)};return W.useEffect(()=>{const p=()=>{const g=document.getElementById("intro");if(g){const x=g.getBoundingClientRect();x.top<=window.innerHeight&&x.bottom>=0&&window.history.replaceState(null,"","#intro")}};return window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),L.jsxs("div",{className:"about-me",children:[L.jsx("section",{id:"intro",className:"relative w-full h-screen mx-auto mb-0",children:L.jsxs("div",{className:`absolute inset-0 top-[120px] max-w-7xl mx-auto ${li.paddingX} flex flex-row items-start gap-5`,children:[L.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[L.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915EFF]"}),L.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient"})]}),L.jsxs("div",{children:[L.jsxs("h1",{className:`${li.heroHeadBlackText} text-black`,children:["Hi, I'm ",L.jsx("span",{className:"text-[#915EFF]",children:"Sahaj Shakya"})]}),L.jsx(sIe,{children:({isVisible:p})=>L.jsx("div",{className:p?"animate__animated animate__fadeIn":"",children:L.jsxs("h1",{className:"text-black",children:["I am a"," ",L.jsx("span",{className:"txt-rotate text-black",dataPeriod:"1000","data-rotate":'[ "Electronics Engineer", "Computer Engineer", "Web Developer", "Teacher", "Researcher", "Photographer" ]',children:L.jsx("span",{className:"wrap",children:i})})]})})}),L.jsxs("p",{className:`${li.heroSubBlackText} mt-2 text-white-100`,children:["Bachelors in Electronics and Communication Engineering"," ",L.jsx("br",{className:"sm:block hidden"}),"Masters in Computer Engineering"]})]})]})}),L.jsx("section",{id:"academics",children:L.jsx(jK,{id:"academics"})}),L.jsx(gIe,{id:"academic-works"}),L.jsx($K,{id:"achievements"}),L.jsx(zK,{id:"journey"}),L.jsx(qK,{id:"projects"}),L.jsx(_Ie,{id:"feedbacks"}),L.jsx(cK,{id:"contact"})]})},wIe=()=>{const[n,e]=W.useState(""),{enqueueSnackbar:t}=Cu(),r=Wv({initialValues:{testimonial:"",name:"",designation:"",company:"",image:""},onSubmit:async(i,{resetForm:s})=>{try{await Bp(Jr(sn,"testimonials"),{testimonial:i.testimonial,name:i.name,designation:i.designation,company:i.company,image:i.image}),t("Testimonial added successfully!",{variant:"success"}),s()}catch(o){console.error("Error adding testimonial: ",o),t("There was an error adding the testimonial",{variant:"error"})}}});return L.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8 max-w-2xl",children:[L.jsx(Xt.h2,{className:"text-xl sm:text-2xl font-bold text-center mb-4 sm:mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Add Testimonial"}),L.jsxs("form",{onSubmit:r.handleSubmit,className:"space-y-4 sm:space-y-6",children:[L.jsx(tr,{name:"testimonial",type:"text",label:"Testimonial",value:r.values.testimonial,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.testimonial,touched:r.touched.testimonial,focusedField:n,setFocusedField:e}),L.jsx(tr,{name:"name",type:"text",label:"Name",value:r.values.name,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.name,touched:r.touched.name,focusedField:n,setFocusedField:e}),L.jsx(tr,{name:"designation",type:"text",label:"Designation",value:r.values.designation,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.designation,touched:r.touched.designation,focusedField:n,setFocusedField:e}),L.jsx(tr,{name:"company",type:"text",label:"Company",value:r.values.company,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.company,touched:r.touched.company,focusedField:n,setFocusedField:e}),L.jsx(tr,{name:"image",type:"text",label:"Image URL",value:r.values.image,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.image,touched:r.touched.image,focusedField:n,setFocusedField:e}),L.jsx("button",{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-md mt-4 hover:bg-blue-600 transition-colors",children:"Submit"})]})]})},bIe=()=>{const[n,e]=W.useState({x:50,y:50}),t=i=>{const o=i.currentTarget.getBoundingClientRect(),a=i.clientX,l=i.clientY,u=o.left+o.width/2,c=o.top+o.height/2;if(Math.sqrt(Math.pow(a-u,2)+Math.pow(l-c,2))<150){const f=window.innerWidth-200,p=window.innerHeight-200,g=50,x=50;e({x:Math.random()*(f-g)+g,y:Math.random()*(p-x)+x})}},r=()=>{alert("I am just joking! ")};return W.useEffect(()=>{const i=window.innerWidth-200,s=window.innerHeight-200;e({x:Math.random()*(i-100)+100,y:Math.random()*(s-100)+100})},[]),L.jsx(Xt.button,{style:{position:"absolute",top:`${n.y}px`,left:`${n.x}px`,zIndex:10},onMouseMove:t,onClick:r,className:"px-6 py-3 font-semibold text-white bg-green-500 rounded-lg shadow-lg cursor-pointer hover:shadow-xl",animate:{x:0,y:0},transition:{type:"spring",stiffness:300,damping:20},children:" Earn Money"})},EIe=()=>{const[n,e]=W.useState(!1);return W.useEffect(()=>{const t=()=>{e(window.innerWidth<768)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),L.jsxs("div",{className:"relative flex flex-col items-center justify-center min-h-screen px-4 overflow-hidden bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[L.jsxs(Xt.div,{className:"absolute inset-0 opacity-10",initial:{opacity:0},animate:{opacity:.1},transition:{duration:2},children:[L.jsx("div",{className:"absolute bg-blue-500 rounded-full top-20 left-20 w-72 h-72 blur-3xl"}),L.jsx("div",{className:"absolute bg-purple-500 rounded-full bottom-20 right-20 w-96 h-96 blur-3xl"})]}),L.jsxs(Xt.div,{className:"z-10 mb-8 text-center text-white",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},children:[L.jsx(Xt.h1,{className:"mb-4 font-bold text-transparent text-8xl sm:text-9xl bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text",animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},children:"404"}),L.jsx(Xt.p,{className:"mb-2 text-xl text-gray-300 sm:text-2xl",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Oops! Page Not Found"}),L.jsx(Xt.p,{className:"text-base text-gray-400 sm:text-lg",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"The page you're looking for doesn't exist."})]}),!n&&L.jsxs(L.Fragment,{children:[L.jsx(bIe,{}),L.jsx(Xt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.7},className:"z-20",children:L.jsx(ua,{to:"/",className:"inline-block px-8 py-3 font-semibold text-white transition-all duration-300 bg-blue-500 rounded-lg shadow-lg hover:bg-blue-600 hover:shadow-xl hover:scale-105",children:" Go Back to Homepage"})})]}),n&&L.jsx(Xt.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.7},className:"z-20 mt-6",children:L.jsx(ua,{to:"/",className:"inline-block px-8 py-3 font-semibold text-center text-white transition-all duration-300 bg-blue-500 rounded-lg shadow-lg hover:bg-blue-600",children:" Go Back to Homepage"})})]})},AIe=[{id:1,name:"admin"}],SIe=async()=>{try{for(const n of AIe){const e=qr(sn,"roles",n.name);(await Oa(e)).exists()||await qk(e,{id:n.id,name:n.name})}}catch(n){console.error("Error checking/creating roles:",n)}},TIe=()=>{const[n,e]=W.useState(!0),{user:t}=uS();return W.useEffect(()=>{(async()=>{await SIe(),e(!1)})()},[]),n?L.jsx(V7,{}):L.jsx(j7,{children:L.jsx(VX,{children:L.jsxs(yX,{children:[L.jsxs(br,{path:"/",element:L.jsx(aye,{}),children:[L.jsx(br,{path:"/me",element:L.jsx(xIe,{})}),L.jsx(br,{path:"/",element:t.role?L.jsx(vl,{roleProps:t.role,element:L.jsx(Wj,{})}):L.jsx(Wj,{})}),L.jsx(br,{path:"/contact",element:L.jsx(cK,{})}),L.jsx(br,{path:"/academics",element:L.jsx(jK,{})}),L.jsx(br,{path:"/journey",element:L.jsx(zK,{})}),L.jsx(br,{path:"/projects",element:L.jsx(qK,{})}),L.jsx(br,{path:"/projects/:id",element:L.jsx(Y2e,{})}),L.jsx(br,{path:"/achievements",element:L.jsx($K,{})}),L.jsx(br,{path:"/achievements/:id",element:L.jsx(Z2e,{})}),L.jsx(br,{path:"/calendar",element:L.jsx(A2e,{})})]}),L.jsx(br,{path:"/login",element:L.jsx(NCe,{children:L.jsx(Rve,{})})}),L.jsxs(br,{path:"/",element:L.jsx(BCe,{}),children:[L.jsx(br,{path:"/admin/dashboard",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(LCe,{role:"admin"})})}),L.jsx(br,{path:"/auth/academics/view",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(d2e,{})})}),L.jsx(br,{path:"/auth/academics/create",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(kK,{})})}),L.jsx(br,{path:"/auth/journey/view",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(z2e,{})})}),L.jsx(br,{path:"/auth/journey/create",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(VK,{})})}),L.jsx(br,{path:"/auth/projects/create",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(HK,{})})}),L.jsx(br,{path:"/auth/projects/view",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(H2e,{})})}),L.jsx(br,{path:"/auth/achievements/create",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(WK,{})})}),L.jsx(br,{path:"/auth/achievements/view",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(J2e,{})})}),L.jsx(br,{path:"/auth/testinomial/create",element:L.jsx(vl,{roleProps:"admin",element:L.jsx(wIe,{})})})]}),L.jsx(br,{path:"/unauthorized",element:L.jsx(DCe,{})}),L.jsx(br,{path:"*",element:L.jsx(EIe,{})})]})})})},CIe=new xCe;TJ.createRoot(document.getElementById("root")).render(L.jsx(W.StrictMode,{children:L.jsx(SCe,{client:CIe,children:L.jsx(Cve,{maxSnack:3,children:L.jsx(j7,{children:L.jsx(TIe,{})})})})}))});export default MIe();
