(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var $f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ma(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Z9(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var eT={exports:{}},vv={},tT={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VO;function h$(){if(VO)return In;VO=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function h(V){return V===null||typeof V!="object"?null:(V=f&&V[f]||V["@@iterator"],typeof V=="function"?V:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,w={};function _(V,X,re){this.props=V,this.context=X,this.refs=w,this.updater=re||p}_.prototype.isReactComponent={},_.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},_.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function v(){}v.prototype=_.prototype;function A(V,X,re){this.props=V,this.context=X,this.refs=w,this.updater=re||p}var S=A.prototype=new v;S.constructor=A,g(S,_.prototype),S.isPureReactComponent=!0;var b=Array.isArray,C=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function k(V,X,re){var oe,fe={},te=null,ue=null;if(X!=null)for(oe in X.ref!==void 0&&(ue=X.ref),X.key!==void 0&&(te=""+X.key),X)C.call(X,oe)&&!R.hasOwnProperty(oe)&&(fe[oe]=X[oe]);var ye=arguments.length-2;if(ye===1)fe.children=re;else if(1<ye){for(var xe=Array(ye),Te=0;Te<ye;Te++)xe[Te]=arguments[Te+2];fe.children=xe}if(V&&V.defaultProps)for(oe in ye=V.defaultProps,ye)fe[oe]===void 0&&(fe[oe]=ye[oe]);return{$$typeof:n,type:V,key:te,ref:ue,props:fe,_owner:L.current}}function O(V,X){return{$$typeof:n,type:V.type,key:X,ref:V.ref,props:V.props,_owner:V._owner}}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function D(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(re){return X[re]})}var U=/\/+/g;function F(V,X){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):X.toString(36)}function $(V,X,re,oe,fe){var te=typeof V;(te==="undefined"||te==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(te){case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case n:case e:ue=!0}}if(ue)return ue=V,fe=fe(ue),V=oe===""?"."+F(ue,0):oe,b(fe)?(re="",V!=null&&(re=V.replace(U,"$&/")+"/"),$(fe,X,re,"",function(Te){return Te})):fe!=null&&(M(fe)&&(fe=O(fe,re+(!fe.key||ue&&ue.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+V)),X.push(fe)),1;if(ue=0,oe=oe===""?".":oe+":",b(V))for(var ye=0;ye<V.length;ye++){te=V[ye];var xe=oe+F(te,ye);ue+=$(te,X,re,xe,fe)}else if(xe=h(V),typeof xe=="function")for(V=xe.call(V),ye=0;!(te=V.next()).done;)te=te.value,xe=oe+F(te,ye++),ue+=$(te,X,re,xe,fe);else if(te==="object")throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ue}function Z(V,X,re){if(V==null)return V;var oe=[],fe=0;return $(V,oe,"","",function(te){return X.call(re,te,fe++)}),oe}function se(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(re){(V._status===0||V._status===-1)&&(V._status=1,V._result=re)},function(re){(V._status===0||V._status===-1)&&(V._status=2,V._result=re)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var ce={current:null},Q={transition:null},ee={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:Q,ReactCurrentOwner:L};function Y(){throw Error("act(...) is not supported in production builds of React.")}return In.Children={map:Z,forEach:function(V,X,re){Z(V,function(){X.apply(this,arguments)},re)},count:function(V){var X=0;return Z(V,function(){X++}),X},toArray:function(V){return Z(V,function(X){return X})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},In.Component=_,In.Fragment=t,In.Profiler=i,In.PureComponent=A,In.StrictMode=r,In.Suspense=l,In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,In.act=Y,In.cloneElement=function(V,X,re){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var oe=g({},V.props),fe=V.key,te=V.ref,ue=V._owner;if(X!=null){if(X.ref!==void 0&&(te=X.ref,ue=L.current),X.key!==void 0&&(fe=""+X.key),V.type&&V.type.defaultProps)var ye=V.type.defaultProps;for(xe in X)C.call(X,xe)&&!R.hasOwnProperty(xe)&&(oe[xe]=X[xe]===void 0&&ye!==void 0?ye[xe]:X[xe])}var xe=arguments.length-2;if(xe===1)oe.children=re;else if(1<xe){ye=Array(xe);for(var Te=0;Te<xe;Te++)ye[Te]=arguments[Te+2];oe.children=ye}return{$$typeof:n,type:V.type,key:fe,ref:te,props:oe,_owner:ue}},In.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:s,_context:V},V.Consumer=V},In.createElement=k,In.createFactory=function(V){var X=k.bind(null,V);return X.type=V,X},In.createRef=function(){return{current:null}},In.forwardRef=function(V){return{$$typeof:a,render:V}},In.isValidElement=M,In.lazy=function(V){return{$$typeof:c,_payload:{_status:-1,_result:V},_init:se}},In.memo=function(V,X){return{$$typeof:u,type:V,compare:X===void 0?null:X}},In.startTransition=function(V){var X=Q.transition;Q.transition={};try{V()}finally{Q.transition=X}},In.unstable_act=Y,In.useCallback=function(V,X){return ce.current.useCallback(V,X)},In.useContext=function(V){return ce.current.useContext(V)},In.useDebugValue=function(){},In.useDeferredValue=function(V){return ce.current.useDeferredValue(V)},In.useEffect=function(V,X){return ce.current.useEffect(V,X)},In.useId=function(){return ce.current.useId()},In.useImperativeHandle=function(V,X,re){return ce.current.useImperativeHandle(V,X,re)},In.useInsertionEffect=function(V,X){return ce.current.useInsertionEffect(V,X)},In.useLayoutEffect=function(V,X){return ce.current.useLayoutEffect(V,X)},In.useMemo=function(V,X){return ce.current.useMemo(V,X)},In.useReducer=function(V,X,re){return ce.current.useReducer(V,X,re)},In.useRef=function(V){return ce.current.useRef(V)},In.useState=function(V){return ce.current.useState(V)},In.useSyncExternalStore=function(V,X,re){return ce.current.useSyncExternalStore(V,X,re)},In.useTransition=function(){return ce.current.useTransition()},In.version="18.3.1",In}var zO;function vh(){return zO||(zO=1,tT.exports=h$()),tT.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HO;function d$(){if(HO)return vv;HO=1;var n=vh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,f={},h=null,p=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(f[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)f[c]===void 0&&(f[c]=l[c]);return{$$typeof:e,type:a,key:h,ref:p,props:f,_owner:i.current}}return vv.Fragment=t,vv.jsx=o,vv.jsxs=o,vv}var GO;function p$(){return GO||(GO=1,eT.exports=d$()),eT.exports}var N=p$(),W=vh();const Jt=Ma(W);var r1={},nT={exports:{}},xo={},rT={exports:{}},iT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qO;function m$(){return qO||(qO=1,function(n){function e(Q,ee){var Y=Q.length;Q.push(ee);e:for(;0<Y;){var V=Y-1>>>1,X=Q[V];if(0<i(X,ee))Q[V]=ee,Q[Y]=X,Y=V;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],Y=Q.pop();if(Y!==ee){Q[0]=Y;e:for(var V=0,X=Q.length,re=X>>>1;V<re;){var oe=2*(V+1)-1,fe=Q[oe],te=oe+1,ue=Q[te];if(0>i(fe,Y))te<X&&0>i(ue,fe)?(Q[V]=ue,Q[te]=Y,V=te):(Q[V]=fe,Q[oe]=Y,V=oe);else if(te<X&&0>i(ue,Y))Q[V]=ue,Q[te]=Y,V=te;else break e}}return ee}function i(Q,ee){var Y=Q.sortIndex-ee.sortIndex;return Y!==0?Y:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,p=!1,g=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Q){for(var ee=t(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=Q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function b(Q){if(w=!1,S(Q),!g)if(t(l)!==null)g=!0,se(C);else{var ee=t(u);ee!==null&&ce(b,ee.startTime-Q)}}function C(Q,ee){g=!1,w&&(w=!1,v(k),k=-1),p=!0;var Y=h;try{for(S(ee),f=t(l);f!==null&&(!(f.expirationTime>ee)||Q&&!D());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var X=V(f.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?f.callback=X:f===t(l)&&r(l),S(ee)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var oe=t(u);oe!==null&&ce(b,oe.startTime-ee),re=!1}return re}finally{f=null,h=Y,p=!1}}var L=!1,R=null,k=-1,O=5,M=-1;function D(){return!(n.unstable_now()-M<O)}function U(){if(R!==null){var Q=n.unstable_now();M=Q;var ee=!0;try{ee=R(!0,Q)}finally{ee?F():(L=!1,R=null)}}else L=!1}var F;if(typeof A=="function")F=function(){A(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=U,F=function(){Z.postMessage(null)}}else F=function(){_(U,0)};function se(Q){R=Q,L||(L=!0,F())}function ce(Q,ee){k=_(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,se(C))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var Y=h;h=ee;try{return Q()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=h;h=Q;try{return ee()}finally{h=Y}},n.unstable_scheduleCallback=function(Q,ee,Y){var V=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?V+Y:V):Y=V,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Y+X,Q={id:c++,callback:ee,priorityLevel:Q,startTime:Y,expirationTime:X,sortIndex:-1},Y>V?(Q.sortIndex=Y,e(u,Q),t(l)===null&&Q===t(u)&&(w?(v(k),k=-1):w=!0,ce(b,Y-V))):(Q.sortIndex=X,e(l,Q),g||p||(g=!0,se(C))),Q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Q){var ee=h;return function(){var Y=h;h=ee;try{return Q.apply(this,arguments)}finally{h=Y}}}}(iT)),iT}var WO;function g$(){return WO||(WO=1,rT.exports=m$()),rT.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O;function y$(){if($O)return xo;$O=1;var n=vh(),e=g$();function t(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,E=1;E<arguments.length;E++)m+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function h(d){return l.call(f,d)?!0:l.call(c,d)?!1:u.test(d)?f[d]=!0:(c[d]=!0,!1)}function p(d,m,E,I){if(E!==null&&E.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return I?!1:E!==null?!E.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function g(d,m,E,I){if(m===null||typeof m>"u"||p(d,m,E,I))return!0;if(I)return!1;if(E!==null)switch(E.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function w(d,m,E,I,j,G,ne){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=I,this.attributeNamespace=j,this.mustUseProperty=E,this.propertyName=d,this.type=m,this.sanitizeURL=G,this.removeEmptyString=ne}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){_[d]=new w(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];_[m]=new w(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){_[d]=new w(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){_[d]=new w(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){_[d]=new w(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){_[d]=new w(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){_[d]=new w(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){_[d]=new w(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){_[d]=new w(d,5,!1,d.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(v,A);_[m]=new w(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(v,A);_[m]=new w(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(v,A);_[m]=new w(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){_[d]=new w(d,1,!1,d.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){_[d]=new w(d,1,!1,d.toLowerCase(),null,!0,!0)});function S(d,m,E,I){var j=_.hasOwnProperty(m)?_[m]:null;(j!==null?j.type!==0:I||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(g(m,E,j,I)&&(E=null),I||j===null?h(m)&&(E===null?d.removeAttribute(m):d.setAttribute(m,""+E)):j.mustUseProperty?d[j.propertyName]=E===null?j.type===3?!1:"":E:(m=j.attributeName,I=j.attributeNamespace,E===null?d.removeAttribute(m):(j=j.type,E=j===3||j===4&&E===!0?"":""+E,I?d.setAttributeNS(I,m,E):d.setAttribute(m,E))))}var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),D=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ee(d){return d===null||typeof d!="object"?null:(d=Q&&d[Q]||d["@@iterator"],typeof d=="function"?d:null)}var Y=Object.assign,V;function X(d){if(V===void 0)try{throw Error()}catch(E){var m=E.stack.trim().match(/\n( *(at )?)/);V=m&&m[1]||""}return`
`+V+d}var re=!1;function oe(d,m){if(!d||re)return"";re=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ze){var I=ze}Reflect.construct(d,[],m)}else{try{m.call()}catch(ze){I=ze}d.call(m.prototype)}else{try{throw Error()}catch(ze){I=ze}d()}}catch(ze){if(ze&&I&&typeof ze.stack=="string"){for(var j=ze.stack.split(`
`),G=I.stack.split(`
`),ne=j.length-1,_e=G.length-1;1<=ne&&0<=_e&&j[ne]!==G[_e];)_e--;for(;1<=ne&&0<=_e;ne--,_e--)if(j[ne]!==G[_e]){if(ne!==1||_e!==1)do if(ne--,_e--,0>_e||j[ne]!==G[_e]){var Ee=`
`+j[ne].replace(" at new "," at ");return d.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",d.displayName)),Ee}while(1<=ne&&0<=_e);break}}}finally{re=!1,Error.prepareStackTrace=E}return(d=d?d.displayName||d.name:"")?X(d):""}function fe(d){switch(d.tag){case 5:return X(d.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return d=oe(d.type,!1),d;case 11:return d=oe(d.type.render,!1),d;case 1:return d=oe(d.type,!0),d;default:return""}}function te(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case R:return"Fragment";case L:return"Portal";case O:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case $:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case D:return(d.displayName||"Context")+".Consumer";case M:return(d._context.displayName||"Context")+".Provider";case U:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Z:return m=d.displayName||null,m!==null?m:te(d.type)||"Memo";case se:m=d._payload,d=d._init;try{return te(d(m))}catch{}}return null}function ue(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(m);case 8:return m===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function ye(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function xe(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Te(d){var m=xe(d)?"checked":"value",E=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),I=""+d[m];if(!d.hasOwnProperty(m)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var j=E.get,G=E.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return j.call(this)},set:function(ne){I=""+ne,G.call(this,ne)}}),Object.defineProperty(d,m,{enumerable:E.enumerable}),{getValue:function(){return I},setValue:function(ne){I=""+ne},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function $e(d){d._valueTracker||(d._valueTracker=Te(d))}function De(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var E=m.getValue(),I="";return d&&(I=xe(d)?d.checked?"true":"false":d.value),d=I,d!==E?(m.setValue(d),!0):!1}function Be(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function he(d,m){var E=m.checked;return Y({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??d._wrapperState.initialChecked})}function rt(d,m){var E=m.defaultValue==null?"":m.defaultValue,I=m.checked!=null?m.checked:m.defaultChecked;E=ye(m.value!=null?m.value:E),d._wrapperState={initialChecked:I,initialValue:E,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Je(d,m){m=m.checked,m!=null&&S(d,"checked",m,!1)}function nt(d,m){Je(d,m);var E=ye(m.value),I=m.type;if(E!=null)I==="number"?(E===0&&d.value===""||d.value!=E)&&(d.value=""+E):d.value!==""+E&&(d.value=""+E);else if(I==="submit"||I==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?Pe(d,m.type,E):m.hasOwnProperty("defaultValue")&&Pe(d,m.type,ye(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function we(d,m,E){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var I=m.type;if(!(I!=="submit"&&I!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,E||m===d.value||(d.value=m),d.defaultValue=m}E=d.name,E!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,E!==""&&(d.name=E)}function Pe(d,m,E){(m!=="number"||Be(d.ownerDocument)!==d)&&(E==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+E&&(d.defaultValue=""+E))}var Le=Array.isArray;function ie(d,m,E,I){if(d=d.options,m){m={};for(var j=0;j<E.length;j++)m["$"+E[j]]=!0;for(E=0;E<d.length;E++)j=m.hasOwnProperty("$"+d[E].value),d[E].selected!==j&&(d[E].selected=j),j&&I&&(d[E].defaultSelected=!0)}else{for(E=""+ye(E),m=null,j=0;j<d.length;j++){if(d[j].value===E){d[j].selected=!0,I&&(d[j].defaultSelected=!0);return}m!==null||d[j].disabled||(m=d[j])}m!==null&&(m.selected=!0)}}function q(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return Y({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function me(d,m){var E=m.value;if(E==null){if(E=m.children,m=m.defaultValue,E!=null){if(m!=null)throw Error(t(92));if(Le(E)){if(1<E.length)throw Error(t(93));E=E[0]}m=E}m==null&&(m=""),E=m}d._wrapperState={initialValue:ye(E)}}function de(d,m){var E=ye(m.value),I=ye(m.defaultValue);E!=null&&(E=""+E,E!==d.value&&(d.value=E),m.defaultValue==null&&d.defaultValue!==E&&(d.defaultValue=E)),I!=null&&(d.defaultValue=""+I)}function ve(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function Ae(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?Ae(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var qe,lt=function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,E,I,j){MSApp.execUnsafeLocalFunction(function(){return d(m,E,I,j)})}:d}(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=qe.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function yt(d,m){if(m){var E=d.firstChild;if(E&&E===d.lastChild&&E.nodeType===3){E.nodeValue=m;return}}d.textContent=m}var Ye={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];Object.keys(Ye).forEach(function(d){vt.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),Ye[m]=Ye[d]})});function kt(d,m,E){return m==null||typeof m=="boolean"||m===""?"":E||typeof m!="number"||m===0||Ye.hasOwnProperty(d)&&Ye[d]?(""+m).trim():m+"px"}function Ft(d,m){d=d.style;for(var E in m)if(m.hasOwnProperty(E)){var I=E.indexOf("--")===0,j=kt(E,m[E],I);E==="float"&&(E="cssFloat"),I?d.setProperty(E,j):d[E]=j}}var Et=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(d,m){if(m){if(Et[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Gt(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tn=null;function be(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var mt=null,Ge=null,Xe=null;function _t(d){if(d=Ha(d)){if(typeof mt!="function")throw Error(t(280));var m=d.stateNode;m&&(m=fm(m),mt(d.stateNode,d.type,m))}}function dt(d){Ge?Xe?Xe.push(d):Xe=[d]:Ge=d}function Xt(){if(Ge){var d=Ge,m=Xe;if(Xe=Ge=null,_t(d),m)for(d=0;d<m.length;d++)_t(m[d])}}function Yn(d,m){return d(m)}function Sr(){}var wn=!1;function yi(d,m,E){if(wn)return d(m,E);wn=!0;try{return Yn(d,m,E)}finally{wn=!1,(Ge!==null||Xe!==null)&&(Sr(),Xt())}}function $n(d,m){var E=d.stateNode;if(E===null)return null;var I=fm(E);if(I===null)return null;E=I[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(d=d.type,I=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!I;break e;default:d=!1}if(d)return null;if(E&&typeof E!="function")throw Error(t(231,m,typeof E));return E}var Ia=!1;if(a)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Ia=!1}function qi(d,m,E,I,j,G,ne,_e,Ee){var ze=Array.prototype.slice.call(arguments,3);try{m.apply(E,ze)}catch(it){this.onError(it)}}var $s=!1,ka=null,vi=!1,ia=null,Vc={onError:function(d){$s=!0,ka=d}};function ko(d,m,E,I,j,G,ne,_e,Ee){$s=!1,ka=null,qi.apply(Vc,arguments)}function mu(d,m,E,I,j,G,ne,_e,Ee){if(ko.apply(this,arguments),$s){if($s){var ze=ka;$s=!1,ka=null}else throw Error(t(198));vi||(vi=!0,ia=ze)}}function bs(d){var m=d,E=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,m.flags&4098&&(E=m.return),d=m.return;while(d)}return m.tag===3?E:null}function Oa(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Ks(d){if(bs(d)!==d)throw Error(t(188))}function gu(d){var m=d.alternate;if(!m){if(m=bs(d),m===null)throw Error(t(188));return m!==d?null:d}for(var E=d,I=m;;){var j=E.return;if(j===null)break;var G=j.alternate;if(G===null){if(I=j.return,I!==null){E=I;continue}break}if(j.child===G.child){for(G=j.child;G;){if(G===E)return Ks(j),d;if(G===I)return Ks(j),m;G=G.sibling}throw Error(t(188))}if(E.return!==I.return)E=j,I=G;else{for(var ne=!1,_e=j.child;_e;){if(_e===E){ne=!0,E=j,I=G;break}if(_e===I){ne=!0,I=j,E=G;break}_e=_e.sibling}if(!ne){for(_e=G.child;_e;){if(_e===E){ne=!0,E=G,I=j;break}if(_e===I){ne=!0,I=G,E=j;break}_e=_e.sibling}if(!ne)throw Error(t(189))}}if(E.alternate!==I)throw Error(t(190))}if(E.tag!==3)throw Error(t(188));return E.stateNode.current===E?d:m}function yu(d){return d=gu(d),d!==null?Ml(d):null}function Ml(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=Ml(d);if(m!==null)return m;d=d.sibling}return null}var Rl=e.unstable_scheduleCallback,ae=e.unstable_cancelCallback,Me=e.unstable_shouldYield,je=e.unstable_requestPaint,Oe=e.unstable_now,Re=e.unstable_getCurrentPriorityLevel,et=e.unstable_ImmediatePriority,ht=e.unstable_UserBlockingPriority,gt=e.unstable_NormalPriority,bt=e.unstable_LowPriority,jt=e.unstable_IdlePriority,Lt=null,ut=null;function Pt(d){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Lt,d,void 0,(d.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:an,yn=Math.log,An=Math.LN2;function an(d){return d>>>=0,d===0?32:31-(yn(d)/An|0)|0}var It=64,Mn=4194304;function cn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Jr(d,m){var E=d.pendingLanes;if(E===0)return 0;var I=0,j=d.suspendedLanes,G=d.pingedLanes,ne=E&268435455;if(ne!==0){var _e=ne&~j;_e!==0?I=cn(_e):(G&=ne,G!==0&&(I=cn(G)))}else ne=E&~j,ne!==0?I=cn(ne):G!==0&&(I=cn(G));if(I===0)return 0;if(m!==0&&m!==I&&!(m&j)&&(j=I&-I,G=m&-m,j>=G||j===16&&(G&4194240)!==0))return m;if(I&4&&(I|=E&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=I;0<m;)E=31-zt(m),j=1<<E,I|=d[E],m&=~j;return I}function Oo(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lr(d,m){for(var E=d.suspendedLanes,I=d.pingedLanes,j=d.expirationTimes,G=d.pendingLanes;0<G;){var ne=31-zt(G),_e=1<<ne,Ee=j[ne];Ee===-1?(!(_e&E)||_e&I)&&(j[ne]=Oo(_e,m)):Ee<=m&&(d.expiredLanes|=_e),G&=~_e}}function Xr(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function fn(){var d=It;return It<<=1,!(It&4194240)&&(It=64),d}function Br(d){for(var m=[],E=0;31>E;E++)m.push(d);return m}function Fr(d,m,E){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-zt(m),d[m]=E}function ln(d,m){var E=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var I=d.eventTimes;for(d=d.expirationTimes;0<E;){var j=31-zt(E),G=1<<j;m[j]=0,I[j]=-1,d[j]=-1,E&=~G}}function ur(d,m){var E=d.entangledLanes|=m;for(d=d.entanglements;E;){var I=31-zt(E),j=1<<I;j&m|d[I]&m&&(d[I]|=m),E&=~j}}var hn=0;function Yr(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var vu,zc,$p,Hc,Gc,Da=!1,sa=[],li=null,dn=null,fo=null,oa=new Map,Js=new Map,aa=[],Iy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ur(d,m){switch(d){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":fo=null;break;case"pointerover":case"pointerout":oa.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(m.pointerId)}}function Wi(d,m,E,I,j,G){return d===null||d.nativeEvent!==G?(d={blockedOn:m,domEventName:E,eventSystemFlags:I,nativeEvent:G,targetContainers:[j]},m!==null&&(m=Ha(m),m!==null&&zc(m)),d):(d.eventSystemFlags|=I,m=d.targetContainers,j!==null&&m.indexOf(j)===-1&&m.push(j),d)}function ky(d,m,E,I,j){switch(m){case"focusin":return li=Wi(li,d,m,E,I,j),!0;case"dragenter":return dn=Wi(dn,d,m,E,I,j),!0;case"mouseover":return fo=Wi(fo,d,m,E,I,j),!0;case"pointerover":var G=j.pointerId;return oa.set(G,Wi(oa.get(G)||null,d,m,E,I,j)),!0;case"gotpointercapture":return G=j.pointerId,Js.set(G,Wi(Js.get(G)||null,d,m,E,I,j)),!0}return!1}function qc(d){var m=Bl(d.target);if(m!==null){var E=bs(m);if(E!==null){if(m=E.tag,m===13){if(m=Oa(E),m!==null){d.blockedOn=m,Gc(d.priority,function(){$p(E)});return}}else if(m===3&&E.stateNode.current.memoizedState.isDehydrated){d.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}d.blockedOn=null}function La(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var E=os(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(E===null){E=d.nativeEvent;var I=new E.constructor(E.type,E);Tn=I,E.target.dispatchEvent(I),Tn=null}else return m=Ha(E),m!==null&&zc(m),d.blockedOn=E,!1;m.shift()}return!0}function la(d,m,E){La(d)&&E.delete(m)}function Xs(){Da=!1,li!==null&&La(li)&&(li=null),dn!==null&&La(dn)&&(dn=null),fo!==null&&La(fo)&&(fo=null),oa.forEach(la),Js.forEach(la)}function Do(d,m){d.blockedOn===m&&(d.blockedOn=null,Da||(Da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xs)))}function Lo(d){function m(j){return Do(j,d)}if(0<sa.length){Do(sa[0],d);for(var E=1;E<sa.length;E++){var I=sa[E];I.blockedOn===d&&(I.blockedOn=null)}}for(li!==null&&Do(li,d),dn!==null&&Do(dn,d),fo!==null&&Do(fo,d),oa.forEach(m),Js.forEach(m),E=0;E<aa.length;E++)I=aa[E],I.blockedOn===d&&(I.blockedOn=null);for(;0<aa.length&&(E=aa[0],E.blockedOn===null);)qc(E),E.blockedOn===null&&aa.shift()}var _i=b.ReactCurrentBatchConfig,$i=!0;function sr(d,m,E,I){var j=hn,G=_i.transition;_i.transition=null;try{hn=1,Wc(d,m,E,I)}finally{hn=j,_i.transition=G}}function Ph(d,m,E,I){var j=hn,G=_i.transition;_i.transition=null;try{hn=4,Wc(d,m,E,I)}finally{hn=j,_i.transition=G}}function Wc(d,m,E,I){if($i){var j=os(d,m,E,I);if(j===null)sm(d,m,I,_u,E),Ur(d,I);else if(ky(j,d,m,E,I))I.stopPropagation();else if(Ur(d,I),m&4&&-1<Iy.indexOf(d)){for(;j!==null;){var G=Ha(j);if(G!==null&&vu(G),G=os(d,m,E,I),G===null&&sm(d,m,I,_u,E),G===j)break;j=G}j!==null&&I.stopPropagation()}else sm(d,m,I,null,E)}}var _u=null;function os(d,m,E,I){if(_u=null,d=be(I),d=Bl(d),d!==null)if(m=bs(d),m===null)d=null;else if(E=m.tag,E===13){if(d=Oa(m),d!==null)return d;d=null}else if(E===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return _u=d,null}function Ih(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Re()){case et:return 1;case ht:return 4;case gt:case bt:return 16;case jt:return 536870912;default:return 16}default:return 16}}var Ki=null,$c=null,yr=null;function Pl(){if(yr)return yr;var d,m=$c,E=m.length,I,j="value"in Ki?Ki.value:Ki.textContent,G=j.length;for(d=0;d<E&&m[d]===j[d];d++);var ne=E-d;for(I=1;I<=ne&&m[E-I]===j[G-I];I++);return yr=j.slice(d,1<I?1-I:void 0)}function Na(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function as(){return!0}function xu(){return!1}function ui(d){function m(E,I,j,G,ne){this._reactName=E,this._targetInst=j,this.type=I,this.nativeEvent=G,this.target=ne,this.currentTarget=null;for(var _e in d)d.hasOwnProperty(_e)&&(E=d[_e],this[_e]=E?E(G):G[_e]);return this.isDefaultPrevented=(G.defaultPrevented!=null?G.defaultPrevented:G.returnValue===!1)?as:xu,this.isPropagationStopped=xu,this}return Y(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),m}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Il=ui(ho),po=Y({},ho,{view:0,detail:0}),kl=ui(po),ki,xi,ls,Ba=Y({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ls&&(ls&&d.type==="mousemove"?(ki=d.screenX-ls.screenX,xi=d.screenY-ls.screenY):xi=ki=0,ls=d),ki)},movementY:function(d){return"movementY"in d?d.movementY:xi}}),wu=ui(Ba),Ys=Y({},Ba,{dataTransfer:0}),No=ui(Ys),Fa=Y({},po,{relatedTarget:0}),Au=ui(Fa),Eu=Y({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),ua=ui(Eu),kh=Y({},ho,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),Kc=ui(kh),bu=Y({},ho,{data:0}),Jc=ui(bu),Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ji={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ua(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=Xc[d])?!!m[d]:!1}function us(){return Ua}var T=Y({},po,{key:function(d){if(d.key){var m=Su[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=Na(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ji[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(d){return d.type==="keypress"?Na(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Na(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),H=ui(T),J=Y({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),le=ui(J),ke=Y({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),Ve=ui(ke),at=Y({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),kn=ui(at),Qr=Y({},Ba,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=ui(Qr),Zr=[9,13,27,32],Vn=a&&"CompositionEvent"in window,vr=null;a&&"documentMode"in document&&(vr=document.documentMode);var Pn=a&&"TextEvent"in window&&!vr,Bo=a&&(!Vn||vr&&8<vr&&11>=vr),Xi=" ",Oy=!1;function Dy(d,m){switch(d){case"keyup":return Zr.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Ol=!1;function vx(d,m){switch(d){case"compositionend":return Kp(m);case"keypress":return m.which!==32?null:(Oy=!0,Xi);case"textInput":return d=m.data,d===Xi&&Oy?null:d;default:return null}}function Oh(d,m){if(Ol)return d==="compositionend"||!Vn&&Dy(d,m)?(d=Pl(),yr=$c=Ki=null,Ol=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Bo&&m.locale!=="ko"?null:m.data;default:return null}}var Yc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!Yc[d.type]:m==="textarea"}function Qc(d,m,E,I){dt(I),m=om(m,"onChange"),0<m.length&&(E=new Il("onChange","change",null,E,I),d.push({event:E,listeners:m}))}var Dl=null,Zc=null;function _x(d){rf(d,0)}function ja(d){var m=jr(d);if(De(m))return d}function xx(d,m){if(d==="change")return m}var ef=!1;if(a){var Ss;if(a){var Tu="oninput"in document;if(!Tu){var Cu=document.createElement("div");Cu.setAttribute("oninput","return;"),Tu=typeof Cu.oninput=="function"}Ss=Tu}else Ss=!1;ef=Ss&&(!document.documentMode||9<document.documentMode)}function Fo(){Dl&&(Dl.detachEvent("onpropertychange",Xp),Zc=Dl=null)}function Xp(d){if(d.propertyName==="value"&&ja(Zc)){var m=[];Qc(m,Zc,d,be(d)),yi(_x,m)}}function tf(d,m,E){d==="focusin"?(Fo(),Dl=m,Zc=E,Dl.attachEvent("onpropertychange",Xp)):d==="focusout"&&Fo()}function wx(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return ja(Zc)}function Ly(d,m){if(d==="click")return ja(m)}function Tr(d,m){if(d==="input"||d==="change")return ja(m)}function Yp(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Qs=typeof Object.is=="function"?Object.is:Yp;function Mu(d,m){if(Qs(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var E=Object.keys(d),I=Object.keys(m);if(E.length!==I.length)return!1;for(I=0;I<E.length;I++){var j=E[I];if(!l.call(m,j)||!Qs(d[j],m[j]))return!1}return!0}function Dh(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Zs(d,m){var E=Dh(d);d=0;for(var I;E;){if(E.nodeType===3){if(I=d+E.textContent.length,d<=m&&I>=m)return{node:E,offset:m-d};d=I}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=Dh(E)}}function Ru(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?Ru(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function Cr(){for(var d=window,m=Be();m instanceof d.HTMLIFrameElement;){try{var E=typeof m.contentWindow.location.href=="string"}catch{E=!1}if(E)d=m.contentWindow;else break;m=Be(d.document)}return m}function wi(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function Ai(d){var m=Cr(),E=d.focusedElem,I=d.selectionRange;if(m!==E&&E&&E.ownerDocument&&Ru(E.ownerDocument.documentElement,E)){if(I!==null&&wi(E)){if(m=I.start,d=I.end,d===void 0&&(d=m),"selectionStart"in E)E.selectionStart=m,E.selectionEnd=Math.min(d,E.value.length);else if(d=(m=E.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var j=E.textContent.length,G=Math.min(I.start,j);I=I.end===void 0?G:Math.min(I.end,j),!d.extend&&G>I&&(j=I,I=G,G=j),j=Zs(E,G);var ne=Zs(E,I);j&&ne&&(d.rangeCount!==1||d.anchorNode!==j.node||d.anchorOffset!==j.offset||d.focusNode!==ne.node||d.focusOffset!==ne.offset)&&(m=m.createRange(),m.setStart(j.node,j.offset),d.removeAllRanges(),G>I?(d.addRange(m),d.extend(ne.node,ne.offset)):(m.setEnd(ne.node,ne.offset),d.addRange(m)))}}for(m=[],d=E;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<m.length;E++)d=m[E],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var Qp=a&&"documentMode"in document&&11>=document.documentMode,ca=null,Pu=null,Lh=null,Ei=!1;function Zp(d,m,E){var I=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Ei||ca==null||ca!==Be(I)||(I=ca,"selectionStart"in I&&wi(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Lh&&Mu(Lh,I)||(Lh=I,I=om(Pu,"onSelect"),0<I.length&&(m=new Il("onSelect","select",null,m,E),d.push({event:m,listeners:I}),m.target=ca)))}function nf(d,m){var E={};return E[d.toLowerCase()]=m.toLowerCase(),E["Webkit"+d]="webkit"+m,E["Moz"+d]="moz"+m,E}var Ll={animationend:nf("Animation","AnimationEnd"),animationiteration:nf("Animation","AnimationIteration"),animationstart:nf("Animation","AnimationStart"),transitionend:nf("Transition","TransitionEnd")},Uo={},jo={};a&&(jo=document.createElement("div").style,"AnimationEvent"in window||(delete Ll.animationend.animation,delete Ll.animationiteration.animation,delete Ll.animationstart.animation),"TransitionEvent"in window||delete Ll.transitionend.transition);function fa(d){if(Uo[d])return Uo[d];if(!Ll[d])return d;var m=Ll[d],E;for(E in m)if(m.hasOwnProperty(E)&&E in jo)return Uo[d]=m[E];return d}var Nh=fa("animationend"),Bh=fa("animationiteration"),Ny=fa("animationstart"),By=fa("transitionend"),Fy=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Va(d,m){Fy.set(d,m),s(m,[d])}for(var em=0;em<Uy.length;em++){var Fh=Uy[em],Uh=Fh.toLowerCase(),Ax=Fh[0].toUpperCase()+Fh.slice(1);Va(Uh,"on"+Ax)}Va(Nh,"onAnimationEnd"),Va(Bh,"onAnimationIteration"),Va(Ny,"onAnimationStart"),Va("dblclick","onDoubleClick"),Va("focusin","onFocus"),Va("focusout","onBlur"),Va(By,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function nm(d,m,E){var I=d.type||"unknown-event";d.currentTarget=E,mu(I,m,void 0,d),d.currentTarget=null}function rf(d,m){m=(m&4)!==0;for(var E=0;E<d.length;E++){var I=d[E],j=I.event;I=I.listeners;e:{var G=void 0;if(m)for(var ne=I.length-1;0<=ne;ne--){var _e=I[ne],Ee=_e.instance,ze=_e.currentTarget;if(_e=_e.listener,Ee!==G&&j.isPropagationStopped())break e;nm(j,_e,ze),G=Ee}else for(ne=0;ne<I.length;ne++){if(_e=I[ne],Ee=_e.instance,ze=_e.currentTarget,_e=_e.listener,Ee!==G&&j.isPropagationStopped())break e;nm(j,_e,ze),G=Ee}}}if(vi)throw d=ia,vi=!1,ia=null,d}function cr(d,m){var E=m[Ou];E===void 0&&(E=m[Ou]=new Set);var I=d+"__bubble";E.has(I)||(im(m,d,2,!1),E.add(I))}function rm(d,m,E){var I=0;m&&(I|=4),im(E,d,I,m)}var jh="_reactListening"+Math.random().toString(36).slice(2);function sf(d){if(!d[jh]){d[jh]=!0,r.forEach(function(E){E!=="selectionchange"&&(tm.has(E)||rm(E,!1,d),rm(E,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[jh]||(m[jh]=!0,rm("selectionchange",!1,m))}}function im(d,m,E,I){switch(Ih(m)){case 1:var j=sr;break;case 4:j=Ph;break;default:j=Wc}E=j.bind(null,m,E,d),j=void 0,!Ia||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(j=!0),I?j!==void 0?d.addEventListener(m,E,{capture:!0,passive:j}):d.addEventListener(m,E,!0):j!==void 0?d.addEventListener(m,E,{passive:j}):d.addEventListener(m,E,!1)}function sm(d,m,E,I,j){var G=I;if(!(m&1)&&!(m&2)&&I!==null)e:for(;;){if(I===null)return;var ne=I.tag;if(ne===3||ne===4){var _e=I.stateNode.containerInfo;if(_e===j||_e.nodeType===8&&_e.parentNode===j)break;if(ne===4)for(ne=I.return;ne!==null;){var Ee=ne.tag;if((Ee===3||Ee===4)&&(Ee=ne.stateNode.containerInfo,Ee===j||Ee.nodeType===8&&Ee.parentNode===j))return;ne=ne.return}for(;_e!==null;){if(ne=Bl(_e),ne===null)return;if(Ee=ne.tag,Ee===5||Ee===6){I=G=ne;continue e}_e=_e.parentNode}}I=I.return}yi(function(){var ze=G,it=be(E),ot=[];e:{var tt=Fy.get(d);if(tt!==void 0){var Tt=Il,Ot=d;switch(d){case"keypress":if(Na(E)===0)break e;case"keydown":case"keyup":Tt=H;break;case"focusin":Ot="focus",Tt=Au;break;case"focusout":Ot="blur",Tt=Au;break;case"beforeblur":case"afterblur":Tt=Au;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=No;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Ve;break;case Nh:case Bh:case Ny:Tt=ua;break;case By:Tt=kn;break;case"scroll":Tt=kl;break;case"wheel":Tt=Rn;break;case"copy":case"cut":case"paste":Tt=Kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=le}var Dt=(m&4)!==0,fi=!Dt&&d==="scroll",Ne=Dt?tt!==null?tt+"Capture":null:tt;Dt=[];for(var Se=ze,Fe;Se!==null;){Fe=Se;var ft=Fe.stateNode;if(Fe.tag===5&&ft!==null&&(Fe=ft,Ne!==null&&(ft=$n(Se,Ne),ft!=null&&Dt.push(of(Se,ft,Fe)))),fi)break;Se=Se.return}0<Dt.length&&(tt=new Tt(tt,Ot,null,E,it),ot.push({event:tt,listeners:Dt}))}}if(!(m&7)){e:{if(tt=d==="mouseover"||d==="pointerover",Tt=d==="mouseout"||d==="pointerout",tt&&E!==Tn&&(Ot=E.relatedTarget||E.fromElement)&&(Bl(Ot)||Ot[eo]))break e;if((Tt||tt)&&(tt=it.window===it?it:(tt=it.ownerDocument)?tt.defaultView||tt.parentWindow:window,Tt?(Ot=E.relatedTarget||E.toElement,Tt=ze,Ot=Ot?Bl(Ot):null,Ot!==null&&(fi=bs(Ot),Ot!==fi||Ot.tag!==5&&Ot.tag!==6)&&(Ot=null)):(Tt=null,Ot=ze),Tt!==Ot)){if(Dt=wu,ft="onMouseLeave",Ne="onMouseEnter",Se="mouse",(d==="pointerout"||d==="pointerover")&&(Dt=le,ft="onPointerLeave",Ne="onPointerEnter",Se="pointer"),fi=Tt==null?tt:jr(Tt),Fe=Ot==null?tt:jr(Ot),tt=new Dt(ft,Se+"leave",Tt,E,it),tt.target=fi,tt.relatedTarget=Fe,ft=null,Bl(it)===ze&&(Dt=new Dt(Ne,Se+"enter",Ot,E,it),Dt.target=Fe,Dt.relatedTarget=fi,ft=Dt),fi=ft,Tt&&Ot)t:{for(Dt=Tt,Ne=Ot,Se=0,Fe=Dt;Fe;Fe=Iu(Fe))Se++;for(Fe=0,ft=Ne;ft;ft=Iu(ft))Fe++;for(;0<Se-Fe;)Dt=Iu(Dt),Se--;for(;0<Fe-Se;)Ne=Iu(Ne),Fe--;for(;Se--;){if(Dt===Ne||Ne!==null&&Dt===Ne.alternate)break t;Dt=Iu(Dt),Ne=Iu(Ne)}Dt=null}else Dt=null;Tt!==null&&Ex(ot,tt,Tt,Dt,!1),Ot!==null&&fi!==null&&Ex(ot,fi,Ot,Dt,!0)}}e:{if(tt=ze?jr(ze):window,Tt=tt.nodeName&&tt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&tt.type==="file")var Ut=xx;else if(Jp(tt))if(ef)Ut=Tr;else{Ut=wx;var qt=tf}else(Tt=tt.nodeName)&&Tt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(Ut=Ly);if(Ut&&(Ut=Ut(d,ze))){Qc(ot,Ut,E,it);break e}qt&&qt(d,tt,ze),d==="focusout"&&(qt=tt._wrapperState)&&qt.controlled&&tt.type==="number"&&Pe(tt,"number",tt.value)}switch(qt=ze?jr(ze):window,d){case"focusin":(Jp(qt)||qt.contentEditable==="true")&&(ca=qt,Pu=ze,Lh=null);break;case"focusout":Lh=Pu=ca=null;break;case"mousedown":Ei=!0;break;case"contextmenu":case"mouseup":case"dragend":Ei=!1,Zp(ot,E,it);break;case"selectionchange":if(Qp)break;case"keydown":case"keyup":Zp(ot,E,it)}var Wt;if(Vn)e:{switch(d){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else Ol?Dy(d,E)&&(Zt="onCompositionEnd"):d==="keydown"&&E.keyCode===229&&(Zt="onCompositionStart");Zt&&(Bo&&E.locale!=="ko"&&(Ol||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&Ol&&(Wt=Pl()):(Ki=it,$c="value"in Ki?Ki.value:Ki.textContent,Ol=!0)),qt=om(ze,Zt),0<qt.length&&(Zt=new Jc(Zt,d,null,E,it),ot.push({event:Zt,listeners:qt}),Wt?Zt.data=Wt:(Wt=Kp(E),Wt!==null&&(Zt.data=Wt)))),(Wt=Pn?vx(d,E):Oh(d,E))&&(ze=om(ze,"onBeforeInput"),0<ze.length&&(it=new Jc("onBeforeInput","beforeinput",null,E,it),ot.push({event:it,listeners:ze}),it.data=Wt))}rf(ot,m)})}function of(d,m,E){return{instance:d,listener:m,currentTarget:E}}function om(d,m){for(var E=m+"Capture",I=[];d!==null;){var j=d,G=j.stateNode;j.tag===5&&G!==null&&(j=G,G=$n(d,E),G!=null&&I.unshift(of(d,G,j)),G=$n(d,m),G!=null&&I.push(of(d,G,j))),d=d.return}return I}function Iu(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Ex(d,m,E,I,j){for(var G=m._reactName,ne=[];E!==null&&E!==I;){var _e=E,Ee=_e.alternate,ze=_e.stateNode;if(Ee!==null&&Ee===I)break;_e.tag===5&&ze!==null&&(_e=ze,j?(Ee=$n(E,G),Ee!=null&&ne.unshift(of(E,Ee,_e))):j||(Ee=$n(E,G),Ee!=null&&ne.push(of(E,Ee,_e)))),E=E.return}ne.length!==0&&d.push({event:m,listeners:ne})}var CS=/\r\n?/g,bx=/\u0000|\uFFFD/g;function jy(d){return(typeof d=="string"?d:""+d).replace(CS,`
`).replace(bx,"")}function Vh(d,m,E){if(m=jy(m),jy(d)!==m&&E)throw Error(t(425))}function zh(){}var af=null,Vy=null;function zy(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Hy=typeof setTimeout=="function"?setTimeout:void 0,Gy=typeof clearTimeout=="function"?clearTimeout:void 0,am=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof am<"u"?function(d){return am.resolve(null).then(d).catch(Sx)}:Hy;function Sx(d){setTimeout(function(){throw d})}function lm(d,m){var E=m,I=0;do{var j=E.nextSibling;if(d.removeChild(E),j&&j.nodeType===8)if(E=j.data,E==="/$"){if(I===0){d.removeChild(j),Lo(m);return}I--}else E!=="$"&&E!=="$?"&&E!=="$!"||I++;E=j}while(E);Lo(m)}function za(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function qy(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="$"||E==="$!"||E==="$?"){if(m===0)return d;m--}else E==="/$"&&m++}d=d.previousSibling}return null}var ku=Math.random().toString(36).slice(2),ci="__reactFiber$"+ku,lf="__reactProps$"+ku,eo="__reactContainer$"+ku,Ou="__reactEvents$"+ku,um="__reactListeners$"+ku,cm="__reactHandles$"+ku;function Bl(d){var m=d[ci];if(m)return m;for(var E=d.parentNode;E;){if(m=E[eo]||E[ci]){if(E=m.alternate,m.child!==null||E!==null&&E.child!==null)for(d=qy(d);d!==null;){if(E=d[ci])return E;d=qy(d)}return m}d=E,E=d.parentNode}return null}function Ha(d){return d=d[ci]||d[eo],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function jr(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(t(33))}function fm(d){return d[lf]||null}var Wy=[],bi=-1;function Rr(d){return{current:d}}function fr(d){0>bi||(d.current=Wy[bi],Wy[bi]=null,bi--)}function or(d,m){bi++,Wy[bi]=d.current,d.current=m}var Ga={},Oi=Rr(Ga),cs=Rr(!1),qa=Ga;function Du(d,m){var E=d.type.contextTypes;if(!E)return Ga;var I=d.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===m)return I.__reactInternalMemoizedMaskedChildContext;var j={},G;for(G in E)j[G]=m[G];return I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=j),j}function Yi(d){return d=d.childContextTypes,d!=null}function Hh(){fr(cs),fr(Oi)}function $y(d,m,E){if(Oi.current!==Ga)throw Error(t(168));or(Oi,m),or(cs,E)}function Gh(d,m,E){var I=d.stateNode;if(m=m.childContextTypes,typeof I.getChildContext!="function")return E;I=I.getChildContext();for(var j in I)if(!(j in m))throw Error(t(108,ue(d)||"Unknown",j));return Y({},E,I)}function Lu(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ga,qa=Oi.current,or(Oi,d),or(cs,cs.current),!0}function Ky(d,m,E){var I=d.stateNode;if(!I)throw Error(t(169));E?(d=Gh(d,m,qa),I.__reactInternalMemoizedMergedChildContext=d,fr(cs),fr(Oi),or(Oi,d)):fr(cs),or(cs,E)}var Vo=null,qh=!1,hm=!1;function Wh(d){Vo===null?Vo=[d]:Vo.push(d)}function Tx(d){qh=!0,Wh(d)}function ha(){if(!hm&&Vo!==null){hm=!0;var d=0,m=hn;try{var E=Vo;for(hn=1;d<E.length;d++){var I=E[d];do I=I(!0);while(I!==null)}Vo=null,qh=!1}catch(j){throw Vo!==null&&(Vo=Vo.slice(d+1)),Rl(et,ha),j}finally{hn=m,hm=!1}}return null}var Nu=[],Ts=0,dm=null,pm=0,fs=[],Si=0,Bu=null,pt=1,mo="";function Wa(d,m){Nu[Ts++]=pm,Nu[Ts++]=dm,dm=d,pm=m}function Jy(d,m,E){fs[Si++]=pt,fs[Si++]=mo,fs[Si++]=Bu,Bu=d;var I=pt;d=mo;var j=32-zt(I)-1;I&=~(1<<j),E+=1;var G=32-zt(m)+j;if(30<G){var ne=j-j%5;G=(I&(1<<ne)-1).toString(32),I>>=ne,j-=ne,pt=1<<32-zt(m)+j|E<<j|I,mo=G+d}else pt=1<<G|E<<j|I,mo=d}function Xy(d){d.return!==null&&(Wa(d,1),Jy(d,1,0))}function $a(d){for(;d===dm;)dm=Nu[--Ts],Nu[Ts]=null,pm=Nu[--Ts],Nu[Ts]=null;for(;d===Bu;)Bu=fs[--Si],fs[Si]=null,mo=fs[--Si],fs[Si]=null,pt=fs[--Si],fs[Si]=null}var Di=null,hs=null,pr=!1,go=null;function Yy(d,m){var E=ya(5,null,null,0);E.elementType="DELETED",E.stateNode=m,E.return=d,m=d.deletions,m===null?(d.deletions=[E],d.flags|=16):m.push(E)}function Qy(d,m){switch(d.tag){case 5:var E=d.type;return m=m.nodeType!==1||E.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Di=d,hs=za(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Di=d,hs=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(E=Bu!==null?{id:pt,overflow:mo}:null,d.memoizedState={dehydrated:m,treeContext:E,retryLane:1073741824},E=ya(18,null,null,0),E.stateNode=m,E.return=d,d.child=E,Di=d,hs=null,!0):!1;default:return!1}}function mm(d){return(d.mode&1)!==0&&(d.flags&128)===0}function gm(d){if(pr){var m=hs;if(m){var E=m;if(!Qy(d,m)){if(mm(d))throw Error(t(418));m=za(E.nextSibling);var I=Di;m&&Qy(d,m)?Yy(I,E):(d.flags=d.flags&-4097|2,pr=!1,Di=d)}}else{if(mm(d))throw Error(t(418));d.flags=d.flags&-4097|2,pr=!1,Di=d}}}function ym(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Di=d}function uf(d){if(d!==Di)return!1;if(!pr)return ym(d),pr=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!zy(d.type,d.memoizedProps)),m&&(m=hs)){if(mm(d))throw Zy(),Error(t(418));for(;m;)Yy(d,m),m=za(m.nextSibling)}if(ym(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(t(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var E=d.data;if(E==="/$"){if(m===0){hs=za(d.nextSibling);break e}m--}else E!=="$"&&E!=="$!"&&E!=="$?"||m++}d=d.nextSibling}hs=null}}else hs=Di?za(d.stateNode.nextSibling):null;return!0}function Zy(){for(var d=hs;d;)d=za(d.nextSibling)}function Fl(){hs=Di=null,pr=!1}function cf(d){go===null?go=[d]:go.push(d)}var RS=b.ReactCurrentBatchConfig;function $h(d,m,E){if(d=E.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(t(309));var I=E.stateNode}if(!I)throw Error(t(147,d));var j=I,G=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===G?m.ref:(m=function(ne){var _e=j.refs;ne===null?delete _e[G]:_e[G]=ne},m._stringRef=G,m)}if(typeof d!="string")throw Error(t(284));if(!E._owner)throw Error(t(290,d))}return d}function Kh(d,m){throw d=Object.prototype.toString.call(m),Error(t(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function ev(d){var m=d._init;return m(d._payload)}function tv(d){function m(Ne,Se){if(d){var Fe=Ne.deletions;Fe===null?(Ne.deletions=[Se],Ne.flags|=16):Fe.push(Se)}}function E(Ne,Se){if(!d)return null;for(;Se!==null;)m(Ne,Se),Se=Se.sibling;return null}function I(Ne,Se){for(Ne=new Map;Se!==null;)Se.key!==null?Ne.set(Se.key,Se):Ne.set(Se.index,Se),Se=Se.sibling;return Ne}function j(Ne,Se){return Ne=wf(Ne,Se),Ne.index=0,Ne.sibling=null,Ne}function G(Ne,Se,Fe){return Ne.index=Fe,d?(Fe=Ne.alternate,Fe!==null?(Fe=Fe.index,Fe<Se?(Ne.flags|=2,Se):Fe):(Ne.flags|=2,Se)):(Ne.flags|=1048576,Se)}function ne(Ne){return d&&Ne.alternate===null&&(Ne.flags|=2),Ne}function _e(Ne,Se,Fe,ft){return Se===null||Se.tag!==6?(Se=KS(Fe,Ne.mode,ft),Se.return=Ne,Se):(Se=j(Se,Fe),Se.return=Ne,Se)}function Ee(Ne,Se,Fe,ft){var Ut=Fe.type;return Ut===R?it(Ne,Se,Fe.props.children,ft,Fe.key):Se!==null&&(Se.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===se&&ev(Ut)===Se.type)?(ft=j(Se,Fe.props),ft.ref=$h(Ne,Se,Fe),ft.return=Ne,ft):(ft=Jx(Fe.type,Fe.key,Fe.props,null,Ne.mode,ft),ft.ref=$h(Ne,Se,Fe),ft.return=Ne,ft)}function ze(Ne,Se,Fe,ft){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Fe.containerInfo||Se.stateNode.implementation!==Fe.implementation?(Se=JS(Fe,Ne.mode,ft),Se.return=Ne,Se):(Se=j(Se,Fe.children||[]),Se.return=Ne,Se)}function it(Ne,Se,Fe,ft,Ut){return Se===null||Se.tag!==7?(Se=fd(Fe,Ne.mode,ft,Ut),Se.return=Ne,Se):(Se=j(Se,Fe),Se.return=Ne,Se)}function ot(Ne,Se,Fe){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=KS(""+Se,Ne.mode,Fe),Se.return=Ne,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case C:return Fe=Jx(Se.type,Se.key,Se.props,null,Ne.mode,Fe),Fe.ref=$h(Ne,null,Se),Fe.return=Ne,Fe;case L:return Se=JS(Se,Ne.mode,Fe),Se.return=Ne,Se;case se:var ft=Se._init;return ot(Ne,ft(Se._payload),Fe)}if(Le(Se)||ee(Se))return Se=fd(Se,Ne.mode,Fe,null),Se.return=Ne,Se;Kh(Ne,Se)}return null}function tt(Ne,Se,Fe,ft){var Ut=Se!==null?Se.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Ut!==null?null:_e(Ne,Se,""+Fe,ft);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case C:return Fe.key===Ut?Ee(Ne,Se,Fe,ft):null;case L:return Fe.key===Ut?ze(Ne,Se,Fe,ft):null;case se:return Ut=Fe._init,tt(Ne,Se,Ut(Fe._payload),ft)}if(Le(Fe)||ee(Fe))return Ut!==null?null:it(Ne,Se,Fe,ft,null);Kh(Ne,Fe)}return null}function Tt(Ne,Se,Fe,ft,Ut){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Ne=Ne.get(Fe)||null,_e(Se,Ne,""+ft,Ut);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case C:return Ne=Ne.get(ft.key===null?Fe:ft.key)||null,Ee(Se,Ne,ft,Ut);case L:return Ne=Ne.get(ft.key===null?Fe:ft.key)||null,ze(Se,Ne,ft,Ut);case se:var qt=ft._init;return Tt(Ne,Se,Fe,qt(ft._payload),Ut)}if(Le(ft)||ee(ft))return Ne=Ne.get(Fe)||null,it(Se,Ne,ft,Ut,null);Kh(Se,ft)}return null}function Ot(Ne,Se,Fe,ft){for(var Ut=null,qt=null,Wt=Se,Zt=Se=0,ts=null;Wt!==null&&Zt<Fe.length;Zt++){Wt.index>Zt?(ts=Wt,Wt=null):ts=Wt.sibling;var Qn=tt(Ne,Wt,Fe[Zt],ft);if(Qn===null){Wt===null&&(Wt=ts);break}d&&Wt&&Qn.alternate===null&&m(Ne,Wt),Se=G(Qn,Se,Zt),qt===null?Ut=Qn:qt.sibling=Qn,qt=Qn,Wt=ts}if(Zt===Fe.length)return E(Ne,Wt),pr&&Wa(Ne,Zt),Ut;if(Wt===null){for(;Zt<Fe.length;Zt++)Wt=ot(Ne,Fe[Zt],ft),Wt!==null&&(Se=G(Wt,Se,Zt),qt===null?Ut=Wt:qt.sibling=Wt,qt=Wt);return pr&&Wa(Ne,Zt),Ut}for(Wt=I(Ne,Wt);Zt<Fe.length;Zt++)ts=Tt(Wt,Ne,Zt,Fe[Zt],ft),ts!==null&&(d&&ts.alternate!==null&&Wt.delete(ts.key===null?Zt:ts.key),Se=G(ts,Se,Zt),qt===null?Ut=ts:qt.sibling=ts,qt=ts);return d&&Wt.forEach(function(Af){return m(Ne,Af)}),pr&&Wa(Ne,Zt),Ut}function Dt(Ne,Se,Fe,ft){var Ut=ee(Fe);if(typeof Ut!="function")throw Error(t(150));if(Fe=Ut.call(Fe),Fe==null)throw Error(t(151));for(var qt=Ut=null,Wt=Se,Zt=Se=0,ts=null,Qn=Fe.next();Wt!==null&&!Qn.done;Zt++,Qn=Fe.next()){Wt.index>Zt?(ts=Wt,Wt=null):ts=Wt.sibling;var Af=tt(Ne,Wt,Qn.value,ft);if(Af===null){Wt===null&&(Wt=ts);break}d&&Wt&&Af.alternate===null&&m(Ne,Wt),Se=G(Af,Se,Zt),qt===null?Ut=Af:qt.sibling=Af,qt=Af,Wt=ts}if(Qn.done)return E(Ne,Wt),pr&&Wa(Ne,Zt),Ut;if(Wt===null){for(;!Qn.done;Zt++,Qn=Fe.next())Qn=ot(Ne,Qn.value,ft),Qn!==null&&(Se=G(Qn,Se,Zt),qt===null?Ut=Qn:qt.sibling=Qn,qt=Qn);return pr&&Wa(Ne,Zt),Ut}for(Wt=I(Ne,Wt);!Qn.done;Zt++,Qn=Fe.next())Qn=Tt(Wt,Ne,Zt,Qn.value,ft),Qn!==null&&(d&&Qn.alternate!==null&&Wt.delete(Qn.key===null?Zt:Qn.key),Se=G(Qn,Se,Zt),qt===null?Ut=Qn:qt.sibling=Qn,qt=Qn);return d&&Wt.forEach(function(f$){return m(Ne,f$)}),pr&&Wa(Ne,Zt),Ut}function fi(Ne,Se,Fe,ft){if(typeof Fe=="object"&&Fe!==null&&Fe.type===R&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case C:e:{for(var Ut=Fe.key,qt=Se;qt!==null;){if(qt.key===Ut){if(Ut=Fe.type,Ut===R){if(qt.tag===7){E(Ne,qt.sibling),Se=j(qt,Fe.props.children),Se.return=Ne,Ne=Se;break e}}else if(qt.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===se&&ev(Ut)===qt.type){E(Ne,qt.sibling),Se=j(qt,Fe.props),Se.ref=$h(Ne,qt,Fe),Se.return=Ne,Ne=Se;break e}E(Ne,qt);break}else m(Ne,qt);qt=qt.sibling}Fe.type===R?(Se=fd(Fe.props.children,Ne.mode,ft,Fe.key),Se.return=Ne,Ne=Se):(ft=Jx(Fe.type,Fe.key,Fe.props,null,Ne.mode,ft),ft.ref=$h(Ne,Se,Fe),ft.return=Ne,Ne=ft)}return ne(Ne);case L:e:{for(qt=Fe.key;Se!==null;){if(Se.key===qt)if(Se.tag===4&&Se.stateNode.containerInfo===Fe.containerInfo&&Se.stateNode.implementation===Fe.implementation){E(Ne,Se.sibling),Se=j(Se,Fe.children||[]),Se.return=Ne,Ne=Se;break e}else{E(Ne,Se);break}else m(Ne,Se);Se=Se.sibling}Se=JS(Fe,Ne.mode,ft),Se.return=Ne,Ne=Se}return ne(Ne);case se:return qt=Fe._init,fi(Ne,Se,qt(Fe._payload),ft)}if(Le(Fe))return Ot(Ne,Se,Fe,ft);if(ee(Fe))return Dt(Ne,Se,Fe,ft);Kh(Ne,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Se!==null&&Se.tag===6?(E(Ne,Se.sibling),Se=j(Se,Fe),Se.return=Ne,Ne=Se):(E(Ne,Se),Se=KS(Fe,Ne.mode,ft),Se.return=Ne,Ne=Se),ne(Ne)):E(Ne,Se)}return fi}var Fu=tv(!0),Jh=tv(!1),Uu=Rr(null),ju=null,Ka=null,ff=null;function Vu(){ff=Ka=ju=null}function Xh(d){var m=Uu.current;fr(Uu),d._currentValue=m}function Yh(d,m,E){for(;d!==null;){var I=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,I!==null&&(I.childLanes|=m)):I!==null&&(I.childLanes&m)!==m&&(I.childLanes|=m),d===E)break;d=d.return}}function Ul(d,m){ju=d,ff=Ka=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&m&&(En=!0),d.firstContext=null)}function to(d){var m=d._currentValue;if(ff!==d)if(d={context:d,memoizedValue:m,next:null},Ka===null){if(ju===null)throw Error(t(308));Ka=d,ju.dependencies={lanes:0,firstContext:d}}else Ka=Ka.next=d;return m}var Ja=null;function nv(d){Ja===null?Ja=[d]:Ja.push(d)}function Qh(d,m,E,I){var j=m.interleaved;return j===null?(E.next=E,nv(m)):(E.next=j.next,j.next=E),m.interleaved=E,zo(d,I)}function zo(d,m){d.lanes|=m;var E=d.alternate;for(E!==null&&(E.lanes|=m),E=d,d=d.return;d!==null;)d.childLanes|=m,E=d.alternate,E!==null&&(E.childLanes|=m),E=d,d=d.return;return E.tag===3?E.stateNode:null}var tr=!1;function vn(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vr(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function nr(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function _r(d,m,E){var I=d.updateQueue;if(I===null)return null;if(I=I.shared,Kn&2){var j=I.pending;return j===null?m.next=m:(m.next=j.next,j.next=m),I.pending=m,zo(d,E)}return j=I.interleaved,j===null?(m.next=m,nv(I)):(m.next=j.next,j.next=m),I.interleaved=m,zo(d,E)}function Qi(d,m,E){if(m=m.updateQueue,m!==null&&(m=m.shared,(E&4194240)!==0)){var I=m.lanes;I&=d.pendingLanes,E|=I,m.lanes=E,ur(d,E)}}function zu(d,m){var E=d.updateQueue,I=d.alternate;if(I!==null&&(I=I.updateQueue,E===I)){var j=null,G=null;if(E=E.firstBaseUpdate,E!==null){do{var ne={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};G===null?j=G=ne:G=G.next=ne,E=E.next}while(E!==null);G===null?j=G=m:G=G.next=m}else j=G=m;E={baseState:I.baseState,firstBaseUpdate:j,lastBaseUpdate:G,shared:I.shared,effects:I.effects},d.updateQueue=E;return}d=E.lastBaseUpdate,d===null?E.firstBaseUpdate=m:d.next=m,E.lastBaseUpdate=m}function Pr(d,m,E,I){var j=d.updateQueue;tr=!1;var G=j.firstBaseUpdate,ne=j.lastBaseUpdate,_e=j.shared.pending;if(_e!==null){j.shared.pending=null;var Ee=_e,ze=Ee.next;Ee.next=null,ne===null?G=ze:ne.next=ze,ne=Ee;var it=d.alternate;it!==null&&(it=it.updateQueue,_e=it.lastBaseUpdate,_e!==ne&&(_e===null?it.firstBaseUpdate=ze:_e.next=ze,it.lastBaseUpdate=Ee))}if(G!==null){var ot=j.baseState;ne=0,it=ze=Ee=null,_e=G;do{var tt=_e.lane,Tt=_e.eventTime;if((I&tt)===tt){it!==null&&(it=it.next={eventTime:Tt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var Ot=d,Dt=_e;switch(tt=m,Tt=E,Dt.tag){case 1:if(Ot=Dt.payload,typeof Ot=="function"){ot=Ot.call(Tt,ot,tt);break e}ot=Ot;break e;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Dt.payload,tt=typeof Ot=="function"?Ot.call(Tt,ot,tt):Ot,tt==null)break e;ot=Y({},ot,tt);break e;case 2:tr=!0}}_e.callback!==null&&_e.lane!==0&&(d.flags|=64,tt=j.effects,tt===null?j.effects=[_e]:tt.push(_e))}else Tt={eventTime:Tt,lane:tt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},it===null?(ze=it=Tt,Ee=ot):it=it.next=Tt,ne|=tt;if(_e=_e.next,_e===null){if(_e=j.shared.pending,_e===null)break;tt=_e,_e=tt.next,tt.next=null,j.lastBaseUpdate=tt,j.shared.pending=null}}while(!0);if(it===null&&(Ee=ot),j.baseState=Ee,j.firstBaseUpdate=ze,j.lastBaseUpdate=it,m=j.shared.interleaved,m!==null){j=m;do ne|=j.lane,j=j.next;while(j!==m)}else G===null&&(j.shared.lanes=0);ad|=ne,d.lanes=ne,d.memoizedState=ot}}function hf(d,m,E){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var I=d[m],j=I.callback;if(j!==null){if(I.callback=null,I=E,typeof j!="function")throw Error(t(191,j));j.call(I)}}}var da={},no=Rr(da),Hu=Rr(da),Xa=Rr(da);function ei(d){if(d===da)throw Error(t(174));return d}function Zh(d,m){switch(or(Xa,m),or(Hu,d),or(no,da),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:He(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=He(m,d)}fr(no),or(no,m)}function jl(){fr(no),fr(Hu),fr(Xa)}function Gu(d){ei(Xa.current);var m=ei(no.current),E=He(m,d.type);m!==E&&(or(Hu,d),or(no,E))}function df(d){Hu.current===d&&(fr(no),fr(Hu))}var mr=Rr(0);function Ho(d){for(var m=d;m!==null;){if(m.tag===13){var E=m.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var pf=[];function pa(){for(var d=0;d<pf.length;d++)pf[d]._workInProgressVersionPrimary=null;pf.length=0}var qu=b.ReactCurrentDispatcher,Wu=b.ReactCurrentBatchConfig,Ya=0,hr=null,Ir=null,zn=null,Go=!1,Zi=!1,Vl=0,Cs=0;function Li(){throw Error(t(321))}function ed(d,m){if(m===null)return!1;for(var E=0;E<m.length&&E<d.length;E++)if(!Qs(d[E],m[E]))return!1;return!0}function td(d,m,E,I,j,G){if(Ya=G,hr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,qu.current=d===null||d.memoizedState===null?Ox:Dx,d=E(I,j),Zi){G=0;do{if(Zi=!1,Vl=0,25<=G)throw Error(t(301));G+=1,zn=Ir=null,m.updateQueue=null,qu.current=Lx,d=E(I,j)}while(Zi)}if(qu.current=bm,m=Ir!==null&&Ir.next!==null,Ya=0,zn=Ir=hr=null,Go=!1,m)throw Error(t(300));return d}function rv(){var d=Vl!==0;return Vl=0,d}function Ni(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?hr.memoizedState=zn=d:zn=zn.next=d,zn}function ro(){if(Ir===null){var d=hr.alternate;d=d!==null?d.memoizedState:null}else d=Ir.next;var m=zn===null?hr.memoizedState:zn.next;if(m!==null)zn=m,Ir=d;else{if(d===null)throw Error(t(310));Ir=d,d={memoizedState:Ir.memoizedState,baseState:Ir.baseState,baseQueue:Ir.baseQueue,queue:Ir.queue,next:null},zn===null?hr.memoizedState=zn=d:zn=zn.next=d}return zn}function mf(d,m){return typeof m=="function"?m(d):m}function nd(d){var m=ro(),E=m.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=d;var I=Ir,j=I.baseQueue,G=E.pending;if(G!==null){if(j!==null){var ne=j.next;j.next=G.next,G.next=ne}I.baseQueue=j=G,E.pending=null}if(j!==null){G=j.next,I=I.baseState;var _e=ne=null,Ee=null,ze=G;do{var it=ze.lane;if((Ya&it)===it)Ee!==null&&(Ee=Ee.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),I=ze.hasEagerState?ze.eagerState:d(I,ze.action);else{var ot={lane:it,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};Ee===null?(_e=Ee=ot,ne=I):Ee=Ee.next=ot,hr.lanes|=it,ad|=it}ze=ze.next}while(ze!==null&&ze!==G);Ee===null?ne=I:Ee.next=_e,Qs(I,m.memoizedState)||(En=!0),m.memoizedState=I,m.baseState=ne,m.baseQueue=Ee,E.lastRenderedState=I}if(d=E.interleaved,d!==null){j=d;do G=j.lane,hr.lanes|=G,ad|=G,j=j.next;while(j!==d)}else j===null&&(E.lanes=0);return[m.memoizedState,E.dispatch]}function Qa(d){var m=ro(),E=m.queue;if(E===null)throw Error(t(311));E.lastRenderedReducer=d;var I=E.dispatch,j=E.pending,G=m.memoizedState;if(j!==null){E.pending=null;var ne=j=j.next;do G=d(G,ne.action),ne=ne.next;while(ne!==j);Qs(G,m.memoizedState)||(En=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),E.lastRenderedState=G}return[G,I]}function iv(){}function sv(d,m){var E=hr,I=ro(),j=m(),G=!Qs(I.memoizedState,j);if(G&&(I.memoizedState=j,En=!0),I=I.queue,lv(Cx.bind(null,E,I,d),[d]),I.getSnapshot!==m||G||zn!==null&&zn.memoizedState.tag&1){if(E.flags|=2048,qo(9,rd.bind(null,E,I,j,m),void 0,null),es===null)throw Error(t(349));Ya&30||vm(E,m,j)}return j}function vm(d,m,E){d.flags|=16384,d={getSnapshot:m,value:E},m=hr.updateQueue,m===null?(m={lastEffect:null,stores:null},hr.updateQueue=m,m.stores=[d]):(E=m.stores,E===null?m.stores=[d]:E.push(d))}function rd(d,m,E,I){m.value=E,m.getSnapshot=I,Mx(m)&&ov(d)}function Cx(d,m,E){return E(function(){Mx(m)&&ov(d)})}function Mx(d){var m=d.getSnapshot;d=d.value;try{var E=m();return!Qs(d,E)}catch{return!0}}function ov(d){var m=zo(d,1);m!==null&&rl(m,d,1,-1)}function av(d){var m=Ni();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:d},m.queue=d,d=d.dispatch=$u.bind(null,hr,d),[m.memoizedState,d]}function qo(d,m,E,I){return d={tag:d,create:m,destroy:E,deps:I,next:null},m=hr.updateQueue,m===null?(m={lastEffect:null,stores:null},hr.updateQueue=m,m.lastEffect=d.next=d):(E=m.lastEffect,E===null?m.lastEffect=d.next=d:(I=E.next,E.next=d,d.next=I,m.lastEffect=d)),d}function Rx(){return ro().memoizedState}function ma(d,m,E,I){var j=Ni();hr.flags|=d,j.memoizedState=qo(1|m,E,void 0,I===void 0?null:I)}function id(d,m,E,I){var j=ro();I=I===void 0?null:I;var G=void 0;if(Ir!==null){var ne=Ir.memoizedState;if(G=ne.destroy,I!==null&&ed(I,ne.deps)){j.memoizedState=qo(m,E,G,I);return}}hr.flags|=d,j.memoizedState=qo(1|m,E,G,I)}function ds(d,m){return ma(8390656,8,d,m)}function lv(d,m){return id(2048,8,d,m)}function uv(d,m){return id(4,2,d,m)}function Px(d,m){return id(4,4,d,m)}function Ix(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function cv(d,m,E){return E=E!=null?E.concat([d]):null,id(4,4,Ix.bind(null,m,d),E)}function _m(){}function kx(d,m){var E=ro();m=m===void 0?null:m;var I=E.memoizedState;return I!==null&&m!==null&&ed(m,I[1])?I[0]:(E.memoizedState=[d,m],d)}function io(d,m){var E=ro();m=m===void 0?null:m;var I=E.memoizedState;return I!==null&&m!==null&&ed(m,I[1])?I[0]:(d=d(),E.memoizedState=[d,m],d)}function xm(d,m,E){return Ya&21?(Qs(E,m)||(E=fn(),hr.lanes|=E,ad|=E,d.baseState=!0),m):(d.baseState&&(d.baseState=!1,En=!0),d.memoizedState=E)}function PS(d,m){var E=hn;hn=E!==0&&4>E?E:4,d(!0);var I=Wu.transition;Wu.transition={};try{d(!1),m()}finally{hn=E,Wu.transition=I}}function Za(){return ro().memoizedState}function wm(d,m,E){var I=_f(d);if(E={lane:I,action:E,hasEagerState:!1,eagerState:null,next:null},sd(d))Am(m,E);else if(E=Qh(d,m,E,I),E!==null){var j=oo();rl(E,d,I,j),Em(E,m,I)}}function $u(d,m,E){var I=_f(d),j={lane:I,action:E,hasEagerState:!1,eagerState:null,next:null};if(sd(d))Am(m,j);else{var G=d.alternate;if(d.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var ne=m.lastRenderedState,_e=G(ne,E);if(j.hasEagerState=!0,j.eagerState=_e,Qs(_e,ne)){var Ee=m.interleaved;Ee===null?(j.next=j,nv(m)):(j.next=Ee.next,Ee.next=j),m.interleaved=j;return}}catch{}finally{}E=Qh(d,m,j,I),E!==null&&(j=oo(),rl(E,d,I,j),Em(E,m,I))}}function sd(d){var m=d.alternate;return d===hr||m!==null&&m===hr}function Am(d,m){Zi=Go=!0;var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}function Em(d,m,E){if(E&4194240){var I=m.lanes;I&=d.pendingLanes,E|=I,m.lanes=E,ur(d,E)}}var bm={readContext:to,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},Ox={readContext:to,useCallback:function(d,m){return Ni().memoizedState=[d,m===void 0?null:m],d},useContext:to,useEffect:ds,useImperativeHandle:function(d,m,E){return E=E!=null?E.concat([d]):null,ma(4194308,4,Ix.bind(null,m,d),E)},useLayoutEffect:function(d,m){return ma(4194308,4,d,m)},useInsertionEffect:function(d,m){return ma(4,2,d,m)},useMemo:function(d,m){var E=Ni();return m=m===void 0?null:m,d=d(),E.memoizedState=[d,m],d},useReducer:function(d,m,E){var I=Ni();return m=E!==void 0?E(m):m,I.memoizedState=I.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},I.queue=d,d=d.dispatch=wm.bind(null,hr,d),[I.memoizedState,d]},useRef:function(d){var m=Ni();return d={current:d},m.memoizedState=d},useState:av,useDebugValue:_m,useDeferredValue:function(d){return Ni().memoizedState=d},useTransition:function(){var d=av(!1),m=d[0];return d=PS.bind(null,d[1]),Ni().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,E){var I=hr,j=Ni();if(pr){if(E===void 0)throw Error(t(407));E=E()}else{if(E=m(),es===null)throw Error(t(349));Ya&30||vm(I,m,E)}j.memoizedState=E;var G={value:E,getSnapshot:m};return j.queue=G,ds(Cx.bind(null,I,G,d),[d]),I.flags|=2048,qo(9,rd.bind(null,I,G,E,m),void 0,null),E},useId:function(){var d=Ni(),m=es.identifierPrefix;if(pr){var E=mo,I=pt;E=(I&~(1<<32-zt(I)-1)).toString(32)+E,m=":"+m+"R"+E,E=Vl++,0<E&&(m+="H"+E.toString(32)),m+=":"}else E=Cs++,m=":"+m+"r"+E.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},Dx={readContext:to,useCallback:kx,useContext:to,useEffect:lv,useImperativeHandle:cv,useInsertionEffect:uv,useLayoutEffect:Px,useMemo:io,useReducer:nd,useRef:Rx,useState:function(){return nd(mf)},useDebugValue:_m,useDeferredValue:function(d){var m=ro();return xm(m,Ir.memoizedState,d)},useTransition:function(){var d=nd(mf)[0],m=ro().memoizedState;return[d,m]},useMutableSource:iv,useSyncExternalStore:sv,useId:Za,unstable_isNewReconciler:!1},Lx={readContext:to,useCallback:kx,useContext:to,useEffect:lv,useImperativeHandle:cv,useInsertionEffect:uv,useLayoutEffect:Px,useMemo:io,useReducer:Qa,useRef:Rx,useState:function(){return Qa(mf)},useDebugValue:_m,useDeferredValue:function(d){var m=ro();return Ir===null?m.memoizedState=d:xm(m,Ir.memoizedState,d)},useTransition:function(){var d=Qa(mf)[0],m=ro().memoizedState;return[d,m]},useMutableSource:iv,useSyncExternalStore:sv,useId:Za,unstable_isNewReconciler:!1};function yo(d,m){if(d&&d.defaultProps){m=Y({},m),d=d.defaultProps;for(var E in d)m[E]===void 0&&(m[E]=d[E]);return m}return m}function od(d,m,E,I){m=d.memoizedState,E=E(I,m),E=E==null?m:Y({},m,E),d.memoizedState=E,d.lanes===0&&(d.updateQueue.baseState=E)}var Sm={isMounted:function(d){return(d=d._reactInternals)?bs(d)===d:!1},enqueueSetState:function(d,m,E){d=d._reactInternals;var I=oo(),j=_f(d),G=nr(I,j);G.payload=m,E!=null&&(G.callback=E),m=_r(d,G,j),m!==null&&(rl(m,d,j,I),Qi(m,d,j))},enqueueReplaceState:function(d,m,E){d=d._reactInternals;var I=oo(),j=_f(d),G=nr(I,j);G.tag=1,G.payload=m,E!=null&&(G.callback=E),m=_r(d,G,j),m!==null&&(rl(m,d,j,I),Qi(m,d,j))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var E=oo(),I=_f(d),j=nr(E,I);j.tag=2,m!=null&&(j.callback=m),m=_r(d,j,I),m!==null&&(rl(m,d,I,E),Qi(m,d,I))}};function Nx(d,m,E,I,j,G,ne){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(I,G,ne):m.prototype&&m.prototype.isPureReactComponent?!Mu(E,I)||!Mu(j,G):!0}function y(d,m,E){var I=!1,j=Ga,G=m.contextType;return typeof G=="object"&&G!==null?G=to(G):(j=Yi(m)?qa:Oi.current,I=m.contextTypes,G=(I=I!=null)?Du(d,j):Ga),m=new m(E,G),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Sm,d.stateNode=m,m._reactInternals=d,I&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=j,d.__reactInternalMemoizedMaskedChildContext=G),m}function x(d,m,E,I){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(E,I),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(E,I),m.state!==d&&Sm.enqueueReplaceState(m,m.state,null)}function P(d,m,E,I){var j=d.stateNode;j.props=E,j.state=d.memoizedState,j.refs={},vn(d);var G=m.contextType;typeof G=="object"&&G!==null?j.context=to(G):(G=Yi(m)?qa:Oi.current,j.context=Du(d,G)),j.state=d.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(od(d,m,G,E),j.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(m=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),m!==j.state&&Sm.enqueueReplaceState(j,j.state,null),Pr(d,E,j,I),j.state=d.memoizedState),typeof j.componentDidMount=="function"&&(d.flags|=4194308)}function B(d,m){try{var E="",I=m;do E+=fe(I),I=I.return;while(I);var j=E}catch(G){j=`
Error generating stack: `+G.message+`
`+G.stack}return{value:d,source:m,stack:j,digest:null}}function z(d,m,E){return{value:d,source:null,stack:E??null,digest:m??null}}function K(d,m){try{console.error(m.value)}catch(E){setTimeout(function(){throw E})}}var ge=typeof WeakMap=="function"?WeakMap:Map;function Ce(d,m,E){E=nr(-1,E),E.tag=3,E.payload={element:null};var I=m.value;return E.callback=function(){Hx||(Hx=!0,jS=I),K(d,m)},E}function Ke(d,m,E){E=nr(-1,E),E.tag=3;var I=d.type.getDerivedStateFromError;if(typeof I=="function"){var j=m.value;E.payload=function(){return I(j)},E.callback=function(){K(d,m)}}var G=d.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(E.callback=function(){K(d,m),typeof I!="function"&&(yf===null?yf=new Set([this]):yf.add(this));var ne=m.stack;this.componentDidCatch(m.value,{componentStack:ne!==null?ne:""})}),E}function ct(d,m,E){var I=d.pingCache;if(I===null){I=d.pingCache=new ge;var j=new Set;I.set(m,j)}else j=I.get(m),j===void 0&&(j=new Set,I.set(m,j));j.has(E)||(j.add(E),d=t$.bind(null,d,m,E),m.then(d,d))}function Ct(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function rn(d,m,E,I,j){return d.mode&1?(d.flags|=65536,d.lanes=j,d):(d===m?d.flags|=65536:(d.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(m=nr(-1,1),m.tag=2,_r(E,m,1))),E.lanes|=1),d)}var Ht=b.ReactCurrentOwner,En=!1;function St(d,m,E,I){m.child=d===null?Jh(m,null,E,I):Fu(m,d.child,E,I)}function Bi(d,m,E,I,j){E=E.render;var G=m.ref;return Ul(m,j),I=td(d,m,E,I,G,j),E=rv(),d!==null&&!En?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,Ku(d,m,j)):(pr&&E&&Xy(m),m.flags|=1,St(d,m,I,j),m.child)}function so(d,m,E,I,j){if(d===null){var G=E.type;return typeof G=="function"&&!$S(G)&&G.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(m.tag=15,m.type=G,Ue(d,m,G,I,j)):(d=Jx(E.type,null,I,m,m.mode,j),d.ref=m.ref,d.return=m,m.child=d)}if(G=d.child,!(d.lanes&j)){var ne=G.memoizedProps;if(E=E.compare,E=E!==null?E:Mu,E(ne,I)&&d.ref===m.ref)return Ku(d,m,j)}return m.flags|=1,d=wf(G,I),d.ref=m.ref,d.return=m,m.child=d}function Ue(d,m,E,I,j){if(d!==null){var G=d.memoizedProps;if(Mu(G,I)&&d.ref===m.ref)if(En=!1,m.pendingProps=I=G,(d.lanes&j)!==0)d.flags&131072&&(En=!0);else return m.lanes=d.lanes,Ku(d,m,j)}return xt(d,m,E,I,j)}function Ie(d,m,E){var I=m.pendingProps,j=I.children,G=d!==null?d.memoizedState:null;if(I.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},or(Cm,Wo),Wo|=E;else{if(!(E&1073741824))return d=G!==null?G.baseLanes|E:E,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,or(Cm,Wo),Wo|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=G!==null?G.baseLanes:E,or(Cm,Wo),Wo|=I}else G!==null?(I=G.baseLanes|E,m.memoizedState=null):I=E,or(Cm,Wo),Wo|=I;return St(d,m,j,E),m.child}function We(d,m){var E=m.ref;(d===null&&E!==null||d!==null&&d.ref!==E)&&(m.flags|=512,m.flags|=2097152)}function xt(d,m,E,I,j){var G=Yi(E)?qa:Oi.current;return G=Du(m,G),Ul(m,j),E=td(d,m,E,I,G,j),I=rv(),d!==null&&!En?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~j,Ku(d,m,j)):(pr&&I&&Xy(m),m.flags|=1,St(d,m,E,j),m.child)}function Nt(d,m,E,I,j){if(Yi(E)){var G=!0;Lu(m)}else G=!1;if(Ul(m,j),m.stateNode===null)Fx(d,m),y(m,E,I),P(m,E,I,j),I=!0;else if(d===null){var ne=m.stateNode,_e=m.memoizedProps;ne.props=_e;var Ee=ne.context,ze=E.contextType;typeof ze=="object"&&ze!==null?ze=to(ze):(ze=Yi(E)?qa:Oi.current,ze=Du(m,ze));var it=E.getDerivedStateFromProps,ot=typeof it=="function"||typeof ne.getSnapshotBeforeUpdate=="function";ot||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(_e!==I||Ee!==ze)&&x(m,ne,I,ze),tr=!1;var tt=m.memoizedState;ne.state=tt,Pr(m,I,ne,j),Ee=m.memoizedState,_e!==I||tt!==Ee||cs.current||tr?(typeof it=="function"&&(od(m,E,it,I),Ee=m.memoizedState),(_e=tr||Nx(m,E,_e,I,tt,Ee,ze))?(ot||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(m.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=I,m.memoizedState=Ee),ne.props=I,ne.state=Ee,ne.context=ze,I=_e):(typeof ne.componentDidMount=="function"&&(m.flags|=4194308),I=!1)}else{ne=m.stateNode,Vr(d,m),_e=m.memoizedProps,ze=m.type===m.elementType?_e:yo(m.type,_e),ne.props=ze,ot=m.pendingProps,tt=ne.context,Ee=E.contextType,typeof Ee=="object"&&Ee!==null?Ee=to(Ee):(Ee=Yi(E)?qa:Oi.current,Ee=Du(m,Ee));var Tt=E.getDerivedStateFromProps;(it=typeof Tt=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(_e!==ot||tt!==Ee)&&x(m,ne,I,Ee),tr=!1,tt=m.memoizedState,ne.state=tt,Pr(m,I,ne,j);var Ot=m.memoizedState;_e!==ot||tt!==Ot||cs.current||tr?(typeof Tt=="function"&&(od(m,E,Tt,I),Ot=m.memoizedState),(ze=tr||Nx(m,E,ze,I,tt,Ot,Ee)||!1)?(it||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(I,Ot,Ee),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(I,Ot,Ee)),typeof ne.componentDidUpdate=="function"&&(m.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof ne.componentDidUpdate!="function"||_e===d.memoizedProps&&tt===d.memoizedState||(m.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||_e===d.memoizedProps&&tt===d.memoizedState||(m.flags|=1024),m.memoizedProps=I,m.memoizedState=Ot),ne.props=I,ne.state=Ot,ne.context=Ee,I=ze):(typeof ne.componentDidUpdate!="function"||_e===d.memoizedProps&&tt===d.memoizedState||(m.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||_e===d.memoizedProps&&tt===d.memoizedState||(m.flags|=1024),I=!1)}return pn(d,m,E,I,G,j)}function pn(d,m,E,I,j,G){We(d,m);var ne=(m.flags&128)!==0;if(!I&&!ne)return j&&Ky(m,E,!1),Ku(d,m,G);I=m.stateNode,Ht.current=m;var _e=ne&&typeof E.getDerivedStateFromError!="function"?null:I.render();return m.flags|=1,d!==null&&ne?(m.child=Fu(m,d.child,null,G),m.child=Fu(m,null,_e,G)):St(d,m,_e,G),m.memoizedState=I.state,j&&Ky(m,E,!0),m.child}function sn(d){var m=d.stateNode;m.pendingContext?$y(d,m.pendingContext,m.pendingContext!==m.context):m.context&&$y(d,m.context,!1),Zh(d,m.containerInfo)}function Fn(d,m,E,I,j){return Fl(),cf(j),m.flags|=256,St(d,m,E,I),m.child}var ti={dehydrated:null,treeContext:null,retryLane:0};function Ln(d){return{baseLanes:d,cachePool:null,transitions:null}}function el(d,m,E){var I=m.pendingProps,j=mr.current,G=!1,ne=(m.flags&128)!==0,_e;if((_e=ne)||(_e=d!==null&&d.memoizedState===null?!1:(j&2)!==0),_e?(G=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(j|=1),or(mr,j&1),d===null)return gm(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(m.mode&1?d.data==="$!"?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(ne=I.children,d=I.fallback,G?(I=m.mode,G=m.child,ne={mode:"hidden",children:ne},!(I&1)&&G!==null?(G.childLanes=0,G.pendingProps=ne):G=Xx(ne,I,0,null),d=fd(d,I,E,null),G.return=m,d.return=m,G.sibling=d,m.child=G,m.child.memoizedState=Ln(E),m.memoizedState=ti,d):fv(m,ne));if(j=d.memoizedState,j!==null&&(_e=j.dehydrated,_e!==null))return HW(d,m,ne,I,_e,j,E);if(G){G=I.fallback,ne=m.mode,j=d.child,_e=j.sibling;var Ee={mode:"hidden",children:I.children};return!(ne&1)&&m.child!==j?(I=m.child,I.childLanes=0,I.pendingProps=Ee,m.deletions=null):(I=wf(j,Ee),I.subtreeFlags=j.subtreeFlags&14680064),_e!==null?G=wf(_e,G):(G=fd(G,ne,E,null),G.flags|=2),G.return=m,I.return=m,I.sibling=G,m.child=I,I=G,G=m.child,ne=d.child.memoizedState,ne=ne===null?Ln(E):{baseLanes:ne.baseLanes|E,cachePool:null,transitions:ne.transitions},G.memoizedState=ne,G.childLanes=d.childLanes&~E,m.memoizedState=ti,I}return G=d.child,d=G.sibling,I=wf(G,{mode:"visible",children:I.children}),!(m.mode&1)&&(I.lanes=E),I.return=m,I.sibling=null,d!==null&&(E=m.deletions,E===null?(m.deletions=[d],m.flags|=16):E.push(d)),m.child=I,m.memoizedState=null,I}function fv(d,m){return m=Xx({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function Bx(d,m,E,I){return I!==null&&cf(I),Fu(m,d.child,null,E),d=fv(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function HW(d,m,E,I,j,G,ne){if(E)return m.flags&256?(m.flags&=-257,I=z(Error(t(422))),Bx(d,m,ne,I)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(G=I.fallback,j=m.mode,I=Xx({mode:"visible",children:I.children},j,0,null),G=fd(G,j,ne,null),G.flags|=2,I.return=m,G.return=m,I.sibling=G,m.child=I,m.mode&1&&Fu(m,d.child,null,ne),m.child.memoizedState=Ln(ne),m.memoizedState=ti,G);if(!(m.mode&1))return Bx(d,m,ne,null);if(j.data==="$!"){if(I=j.nextSibling&&j.nextSibling.dataset,I)var _e=I.dgst;return I=_e,G=Error(t(419)),I=z(G,I,void 0),Bx(d,m,ne,I)}if(_e=(ne&d.childLanes)!==0,En||_e){if(I=es,I!==null){switch(ne&-ne){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(I.suspendedLanes|ne)?0:j,j!==0&&j!==G.retryLane&&(G.retryLane=j,zo(d,j),rl(I,d,j,-1))}return WS(),I=z(Error(t(421))),Bx(d,m,ne,I)}return j.data==="$?"?(m.flags|=128,m.child=d.child,m=n$.bind(null,d),j._reactRetry=m,null):(d=G.treeContext,hs=za(j.nextSibling),Di=m,pr=!0,go=null,d!==null&&(fs[Si++]=pt,fs[Si++]=mo,fs[Si++]=Bu,pt=d.id,mo=d.overflow,Bu=m),m=fv(m,I.children),m.flags|=4096,m)}function cO(d,m,E){d.lanes|=m;var I=d.alternate;I!==null&&(I.lanes|=m),Yh(d.return,m,E)}function IS(d,m,E,I,j){var G=d.memoizedState;G===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:I,tail:E,tailMode:j}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=I,G.tail=E,G.tailMode=j)}function fO(d,m,E){var I=m.pendingProps,j=I.revealOrder,G=I.tail;if(St(d,m,I.children,E),I=mr.current,I&2)I=I&1|2,m.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&cO(d,E,m);else if(d.tag===19)cO(d,E,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}I&=1}if(or(mr,I),!(m.mode&1))m.memoizedState=null;else switch(j){case"forwards":for(E=m.child,j=null;E!==null;)d=E.alternate,d!==null&&Ho(d)===null&&(j=E),E=E.sibling;E=j,E===null?(j=m.child,m.child=null):(j=E.sibling,E.sibling=null),IS(m,!1,j,E,G);break;case"backwards":for(E=null,j=m.child,m.child=null;j!==null;){if(d=j.alternate,d!==null&&Ho(d)===null){m.child=j;break}d=j.sibling,j.sibling=E,E=j,j=d}IS(m,!0,E,null,G);break;case"together":IS(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Fx(d,m){!(m.mode&1)&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function Ku(d,m,E){if(d!==null&&(m.dependencies=d.dependencies),ad|=m.lanes,!(E&m.childLanes))return null;if(d!==null&&m.child!==d.child)throw Error(t(153));if(m.child!==null){for(d=m.child,E=wf(d,d.pendingProps),m.child=E,E.return=m;d.sibling!==null;)d=d.sibling,E=E.sibling=wf(d,d.pendingProps),E.return=m;E.sibling=null}return m.child}function GW(d,m,E){switch(m.tag){case 3:sn(m),Fl();break;case 5:Gu(m);break;case 1:Yi(m.type)&&Lu(m);break;case 4:Zh(m,m.stateNode.containerInfo);break;case 10:var I=m.type._context,j=m.memoizedProps.value;or(Uu,I._currentValue),I._currentValue=j;break;case 13:if(I=m.memoizedState,I!==null)return I.dehydrated!==null?(or(mr,mr.current&1),m.flags|=128,null):E&m.child.childLanes?el(d,m,E):(or(mr,mr.current&1),d=Ku(d,m,E),d!==null?d.sibling:null);or(mr,mr.current&1);break;case 19:if(I=(E&m.childLanes)!==0,d.flags&128){if(I)return fO(d,m,E);m.flags|=128}if(j=m.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),or(mr,mr.current),I)break;return null;case 22:case 23:return m.lanes=0,Ie(d,m,E)}return Ku(d,m,E)}var hO,kS,dO,pO;hO=function(d,m){for(var E=m.child;E!==null;){if(E.tag===5||E.tag===6)d.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},kS=function(){},dO=function(d,m,E,I){var j=d.memoizedProps;if(j!==I){d=m.stateNode,ei(no.current);var G=null;switch(E){case"input":j=he(d,j),I=he(d,I),G=[];break;case"select":j=Y({},j,{value:void 0}),I=Y({},I,{value:void 0}),G=[];break;case"textarea":j=q(d,j),I=q(d,I),G=[];break;default:typeof j.onClick!="function"&&typeof I.onClick=="function"&&(d.onclick=zh)}nn(E,I);var ne;E=null;for(ze in j)if(!I.hasOwnProperty(ze)&&j.hasOwnProperty(ze)&&j[ze]!=null)if(ze==="style"){var _e=j[ze];for(ne in _e)_e.hasOwnProperty(ne)&&(E||(E={}),E[ne]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(i.hasOwnProperty(ze)?G||(G=[]):(G=G||[]).push(ze,null));for(ze in I){var Ee=I[ze];if(_e=j!=null?j[ze]:void 0,I.hasOwnProperty(ze)&&Ee!==_e&&(Ee!=null||_e!=null))if(ze==="style")if(_e){for(ne in _e)!_e.hasOwnProperty(ne)||Ee&&Ee.hasOwnProperty(ne)||(E||(E={}),E[ne]="");for(ne in Ee)Ee.hasOwnProperty(ne)&&_e[ne]!==Ee[ne]&&(E||(E={}),E[ne]=Ee[ne])}else E||(G||(G=[]),G.push(ze,E)),E=Ee;else ze==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,_e=_e?_e.__html:void 0,Ee!=null&&_e!==Ee&&(G=G||[]).push(ze,Ee)):ze==="children"?typeof Ee!="string"&&typeof Ee!="number"||(G=G||[]).push(ze,""+Ee):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(i.hasOwnProperty(ze)?(Ee!=null&&ze==="onScroll"&&cr("scroll",d),G||_e===Ee||(G=[])):(G=G||[]).push(ze,Ee))}E&&(G=G||[]).push("style",E);var ze=G;(m.updateQueue=ze)&&(m.flags|=4)}},pO=function(d,m,E,I){E!==I&&(m.flags|=4)};function hv(d,m){if(!pr)switch(d.tailMode){case"hidden":m=d.tail;for(var E=null;m!==null;)m.alternate!==null&&(E=m),m=m.sibling;E===null?d.tail=null:E.sibling=null;break;case"collapsed":E=d.tail;for(var I=null;E!==null;)E.alternate!==null&&(I=E),E=E.sibling;I===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:I.sibling=null}}function Ms(d){var m=d.alternate!==null&&d.alternate.child===d.child,E=0,I=0;if(m)for(var j=d.child;j!==null;)E|=j.lanes|j.childLanes,I|=j.subtreeFlags&14680064,I|=j.flags&14680064,j.return=d,j=j.sibling;else for(j=d.child;j!==null;)E|=j.lanes|j.childLanes,I|=j.subtreeFlags,I|=j.flags,j.return=d,j=j.sibling;return d.subtreeFlags|=I,d.childLanes=E,m}function qW(d,m,E){var I=m.pendingProps;switch($a(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ms(m),null;case 1:return Yi(m.type)&&Hh(),Ms(m),null;case 3:return I=m.stateNode,jl(),fr(cs),fr(Oi),pa(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(d===null||d.child===null)&&(uf(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,go!==null&&(HS(go),go=null))),kS(d,m),Ms(m),null;case 5:df(m);var j=ei(Xa.current);if(E=m.type,d!==null&&m.stateNode!=null)dO(d,m,E,I,j),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!I){if(m.stateNode===null)throw Error(t(166));return Ms(m),null}if(d=ei(no.current),uf(m)){I=m.stateNode,E=m.type;var G=m.memoizedProps;switch(I[ci]=m,I[lf]=G,d=(m.mode&1)!==0,E){case"dialog":cr("cancel",I),cr("close",I);break;case"iframe":case"object":case"embed":cr("load",I);break;case"video":case"audio":for(j=0;j<Nl.length;j++)cr(Nl[j],I);break;case"source":cr("error",I);break;case"img":case"image":case"link":cr("error",I),cr("load",I);break;case"details":cr("toggle",I);break;case"input":rt(I,G),cr("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!G.multiple},cr("invalid",I);break;case"textarea":me(I,G),cr("invalid",I)}nn(E,G),j=null;for(var ne in G)if(G.hasOwnProperty(ne)){var _e=G[ne];ne==="children"?typeof _e=="string"?I.textContent!==_e&&(G.suppressHydrationWarning!==!0&&Vh(I.textContent,_e,d),j=["children",_e]):typeof _e=="number"&&I.textContent!==""+_e&&(G.suppressHydrationWarning!==!0&&Vh(I.textContent,_e,d),j=["children",""+_e]):i.hasOwnProperty(ne)&&_e!=null&&ne==="onScroll"&&cr("scroll",I)}switch(E){case"input":$e(I),we(I,G,!0);break;case"textarea":$e(I),ve(I);break;case"select":case"option":break;default:typeof G.onClick=="function"&&(I.onclick=zh)}I=j,m.updateQueue=I,I!==null&&(m.flags|=4)}else{ne=j.nodeType===9?j:j.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=Ae(E)),d==="http://www.w3.org/1999/xhtml"?E==="script"?(d=ne.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof I.is=="string"?d=ne.createElement(E,{is:I.is}):(d=ne.createElement(E),E==="select"&&(ne=d,I.multiple?ne.multiple=!0:I.size&&(ne.size=I.size))):d=ne.createElementNS(d,E),d[ci]=m,d[lf]=I,hO(d,m,!1,!1),m.stateNode=d;e:{switch(ne=Gt(E,I),E){case"dialog":cr("cancel",d),cr("close",d),j=I;break;case"iframe":case"object":case"embed":cr("load",d),j=I;break;case"video":case"audio":for(j=0;j<Nl.length;j++)cr(Nl[j],d);j=I;break;case"source":cr("error",d),j=I;break;case"img":case"image":case"link":cr("error",d),cr("load",d),j=I;break;case"details":cr("toggle",d),j=I;break;case"input":rt(d,I),j=he(d,I),cr("invalid",d);break;case"option":j=I;break;case"select":d._wrapperState={wasMultiple:!!I.multiple},j=Y({},I,{value:void 0}),cr("invalid",d);break;case"textarea":me(d,I),j=q(d,I),cr("invalid",d);break;default:j=I}nn(E,j),_e=j;for(G in _e)if(_e.hasOwnProperty(G)){var Ee=_e[G];G==="style"?Ft(d,Ee):G==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,Ee!=null&&lt(d,Ee)):G==="children"?typeof Ee=="string"?(E!=="textarea"||Ee!=="")&&yt(d,Ee):typeof Ee=="number"&&yt(d,""+Ee):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?Ee!=null&&G==="onScroll"&&cr("scroll",d):Ee!=null&&S(d,G,Ee,ne))}switch(E){case"input":$e(d),we(d,I,!1);break;case"textarea":$e(d),ve(d);break;case"option":I.value!=null&&d.setAttribute("value",""+ye(I.value));break;case"select":d.multiple=!!I.multiple,G=I.value,G!=null?ie(d,!!I.multiple,G,!1):I.defaultValue!=null&&ie(d,!!I.multiple,I.defaultValue,!0);break;default:typeof j.onClick=="function"&&(d.onclick=zh)}switch(E){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ms(m),null;case 6:if(d&&m.stateNode!=null)pO(d,m,d.memoizedProps,I);else{if(typeof I!="string"&&m.stateNode===null)throw Error(t(166));if(E=ei(Xa.current),ei(no.current),uf(m)){if(I=m.stateNode,E=m.memoizedProps,I[ci]=m,(G=I.nodeValue!==E)&&(d=Di,d!==null))switch(d.tag){case 3:Vh(I.nodeValue,E,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Vh(I.nodeValue,E,(d.mode&1)!==0)}G&&(m.flags|=4)}else I=(E.nodeType===9?E:E.ownerDocument).createTextNode(I),I[ci]=m,m.stateNode=I}return Ms(m),null;case 13:if(fr(mr),I=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(pr&&hs!==null&&m.mode&1&&!(m.flags&128))Zy(),Fl(),m.flags|=98560,G=!1;else if(G=uf(m),I!==null&&I.dehydrated!==null){if(d===null){if(!G)throw Error(t(318));if(G=m.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(t(317));G[ci]=m}else Fl(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;Ms(m),G=!1}else go!==null&&(HS(go),go=null),G=!0;if(!G)return m.flags&65536?m:null}return m.flags&128?(m.lanes=E,m):(I=I!==null,I!==(d!==null&&d.memoizedState!==null)&&I&&(m.child.flags|=8192,m.mode&1&&(d===null||mr.current&1?Fi===0&&(Fi=3):WS())),m.updateQueue!==null&&(m.flags|=4),Ms(m),null);case 4:return jl(),kS(d,m),d===null&&sf(m.stateNode.containerInfo),Ms(m),null;case 10:return Xh(m.type._context),Ms(m),null;case 17:return Yi(m.type)&&Hh(),Ms(m),null;case 19:if(fr(mr),G=m.memoizedState,G===null)return Ms(m),null;if(I=(m.flags&128)!==0,ne=G.rendering,ne===null)if(I)hv(G,!1);else{if(Fi!==0||d!==null&&d.flags&128)for(d=m.child;d!==null;){if(ne=Ho(d),ne!==null){for(m.flags|=128,hv(G,!1),I=ne.updateQueue,I!==null&&(m.updateQueue=I,m.flags|=4),m.subtreeFlags=0,I=E,E=m.child;E!==null;)G=E,d=I,G.flags&=14680066,ne=G.alternate,ne===null?(G.childLanes=0,G.lanes=d,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=ne.childLanes,G.lanes=ne.lanes,G.child=ne.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=ne.memoizedProps,G.memoizedState=ne.memoizedState,G.updateQueue=ne.updateQueue,G.type=ne.type,d=ne.dependencies,G.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),E=E.sibling;return or(mr,mr.current&1|2),m.child}d=d.sibling}G.tail!==null&&Oe()>Mm&&(m.flags|=128,I=!0,hv(G,!1),m.lanes=4194304)}else{if(!I)if(d=Ho(ne),d!==null){if(m.flags|=128,I=!0,E=d.updateQueue,E!==null&&(m.updateQueue=E,m.flags|=4),hv(G,!0),G.tail===null&&G.tailMode==="hidden"&&!ne.alternate&&!pr)return Ms(m),null}else 2*Oe()-G.renderingStartTime>Mm&&E!==1073741824&&(m.flags|=128,I=!0,hv(G,!1),m.lanes=4194304);G.isBackwards?(ne.sibling=m.child,m.child=ne):(E=G.last,E!==null?E.sibling=ne:m.child=ne,G.last=ne)}return G.tail!==null?(m=G.tail,G.rendering=m,G.tail=m.sibling,G.renderingStartTime=Oe(),m.sibling=null,E=mr.current,or(mr,I?E&1|2:E&1),m):(Ms(m),null);case 22:case 23:return qS(),I=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==I&&(m.flags|=8192),I&&m.mode&1?Wo&1073741824&&(Ms(m),m.subtreeFlags&6&&(m.flags|=8192)):Ms(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function WW(d,m){switch($a(m),m.tag){case 1:return Yi(m.type)&&Hh(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return jl(),fr(cs),fr(Oi),pa(),d=m.flags,d&65536&&!(d&128)?(m.flags=d&-65537|128,m):null;case 5:return df(m),null;case 13:if(fr(mr),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(t(340));Fl()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return fr(mr),null;case 4:return jl(),null;case 10:return Xh(m.type._context),null;case 22:case 23:return qS(),null;case 24:return null;default:return null}}var Ux=!1,Rs=!1,$W=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Tm(d,m){var E=d.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(I){ni(d,m,I)}else E.current=null}function OS(d,m,E){try{E()}catch(I){ni(d,m,I)}}var mO=!1;function KW(d,m){if(af=$i,d=Cr(),wi(d)){if("selectionStart"in d)var E={start:d.selectionStart,end:d.selectionEnd};else e:{E=(E=d.ownerDocument)&&E.defaultView||window;var I=E.getSelection&&E.getSelection();if(I&&I.rangeCount!==0){E=I.anchorNode;var j=I.anchorOffset,G=I.focusNode;I=I.focusOffset;try{E.nodeType,G.nodeType}catch{E=null;break e}var ne=0,_e=-1,Ee=-1,ze=0,it=0,ot=d,tt=null;t:for(;;){for(var Tt;ot!==E||j!==0&&ot.nodeType!==3||(_e=ne+j),ot!==G||I!==0&&ot.nodeType!==3||(Ee=ne+I),ot.nodeType===3&&(ne+=ot.nodeValue.length),(Tt=ot.firstChild)!==null;)tt=ot,ot=Tt;for(;;){if(ot===d)break t;if(tt===E&&++ze===j&&(_e=ne),tt===G&&++it===I&&(Ee=ne),(Tt=ot.nextSibling)!==null)break;ot=tt,tt=ot.parentNode}ot=Tt}E=_e===-1||Ee===-1?null:{start:_e,end:Ee}}else E=null}E=E||{start:0,end:0}}else E=null;for(Vy={focusedElem:d,selectionRange:E},$i=!1,Rt=m;Rt!==null;)if(m=Rt,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,Rt=d;else for(;Rt!==null;){m=Rt;try{var Ot=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Ot!==null){var Dt=Ot.memoizedProps,fi=Ot.memoizedState,Ne=m.stateNode,Se=Ne.getSnapshotBeforeUpdate(m.elementType===m.type?Dt:yo(m.type,Dt),fi);Ne.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Fe=m.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ft){ni(m,m.return,ft)}if(d=m.sibling,d!==null){d.return=m.return,Rt=d;break}Rt=m.return}return Ot=mO,mO=!1,Ot}function dv(d,m,E){var I=m.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var j=I=I.next;do{if((j.tag&d)===d){var G=j.destroy;j.destroy=void 0,G!==void 0&&OS(m,E,G)}j=j.next}while(j!==I)}}function jx(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&d)===d){var I=E.create;E.destroy=I()}E=E.next}while(E!==m)}}function DS(d){var m=d.ref;if(m!==null){var E=d.stateNode;switch(d.tag){case 5:d=E;break;default:d=E}typeof m=="function"?m(d):m.current=d}}function gO(d){var m=d.alternate;m!==null&&(d.alternate=null,gO(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[ci],delete m[lf],delete m[Ou],delete m[um],delete m[cm])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function yO(d){return d.tag===5||d.tag===3||d.tag===4}function vO(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||yO(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function LS(d,m,E){var I=d.tag;if(I===5||I===6)d=d.stateNode,m?E.nodeType===8?E.parentNode.insertBefore(d,m):E.insertBefore(d,m):(E.nodeType===8?(m=E.parentNode,m.insertBefore(d,E)):(m=E,m.appendChild(d)),E=E._reactRootContainer,E!=null||m.onclick!==null||(m.onclick=zh));else if(I!==4&&(d=d.child,d!==null))for(LS(d,m,E),d=d.sibling;d!==null;)LS(d,m,E),d=d.sibling}function NS(d,m,E){var I=d.tag;if(I===5||I===6)d=d.stateNode,m?E.insertBefore(d,m):E.appendChild(d);else if(I!==4&&(d=d.child,d!==null))for(NS(d,m,E),d=d.sibling;d!==null;)NS(d,m,E),d=d.sibling}var ps=null,tl=!1;function gf(d,m,E){for(E=E.child;E!==null;)_O(d,m,E),E=E.sibling}function _O(d,m,E){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Lt,E)}catch{}switch(E.tag){case 5:Rs||Tm(E,m);case 6:var I=ps,j=tl;ps=null,gf(d,m,E),ps=I,tl=j,ps!==null&&(tl?(d=ps,E=E.stateNode,d.nodeType===8?d.parentNode.removeChild(E):d.removeChild(E)):ps.removeChild(E.stateNode));break;case 18:ps!==null&&(tl?(d=ps,E=E.stateNode,d.nodeType===8?lm(d.parentNode,E):d.nodeType===1&&lm(d,E),Lo(d)):lm(ps,E.stateNode));break;case 4:I=ps,j=tl,ps=E.stateNode.containerInfo,tl=!0,gf(d,m,E),ps=I,tl=j;break;case 0:case 11:case 14:case 15:if(!Rs&&(I=E.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){j=I=I.next;do{var G=j,ne=G.destroy;G=G.tag,ne!==void 0&&(G&2||G&4)&&OS(E,m,ne),j=j.next}while(j!==I)}gf(d,m,E);break;case 1:if(!Rs&&(Tm(E,m),I=E.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=E.memoizedProps,I.state=E.memoizedState,I.componentWillUnmount()}catch(_e){ni(E,m,_e)}gf(d,m,E);break;case 21:gf(d,m,E);break;case 22:E.mode&1?(Rs=(I=Rs)||E.memoizedState!==null,gf(d,m,E),Rs=I):gf(d,m,E);break;default:gf(d,m,E)}}function xO(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var E=d.stateNode;E===null&&(E=d.stateNode=new $W),m.forEach(function(I){var j=r$.bind(null,d,I);E.has(I)||(E.add(I),I.then(j,j))})}}function nl(d,m){var E=m.deletions;if(E!==null)for(var I=0;I<E.length;I++){var j=E[I];try{var G=d,ne=m,_e=ne;e:for(;_e!==null;){switch(_e.tag){case 5:ps=_e.stateNode,tl=!1;break e;case 3:ps=_e.stateNode.containerInfo,tl=!0;break e;case 4:ps=_e.stateNode.containerInfo,tl=!0;break e}_e=_e.return}if(ps===null)throw Error(t(160));_O(G,ne,j),ps=null,tl=!1;var Ee=j.alternate;Ee!==null&&(Ee.return=null),j.return=null}catch(ze){ni(j,m,ze)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)wO(m,d),m=m.sibling}function wO(d,m){var E=d.alternate,I=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(nl(m,d),zl(d),I&4){try{dv(3,d,d.return),jx(3,d)}catch(Dt){ni(d,d.return,Dt)}try{dv(5,d,d.return)}catch(Dt){ni(d,d.return,Dt)}}break;case 1:nl(m,d),zl(d),I&512&&E!==null&&Tm(E,E.return);break;case 5:if(nl(m,d),zl(d),I&512&&E!==null&&Tm(E,E.return),d.flags&32){var j=d.stateNode;try{yt(j,"")}catch(Dt){ni(d,d.return,Dt)}}if(I&4&&(j=d.stateNode,j!=null)){var G=d.memoizedProps,ne=E!==null?E.memoizedProps:G,_e=d.type,Ee=d.updateQueue;if(d.updateQueue=null,Ee!==null)try{_e==="input"&&G.type==="radio"&&G.name!=null&&Je(j,G),Gt(_e,ne);var ze=Gt(_e,G);for(ne=0;ne<Ee.length;ne+=2){var it=Ee[ne],ot=Ee[ne+1];it==="style"?Ft(j,ot):it==="dangerouslySetInnerHTML"?lt(j,ot):it==="children"?yt(j,ot):S(j,it,ot,ze)}switch(_e){case"input":nt(j,G);break;case"textarea":de(j,G);break;case"select":var tt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!G.multiple;var Tt=G.value;Tt!=null?ie(j,!!G.multiple,Tt,!1):tt!==!!G.multiple&&(G.defaultValue!=null?ie(j,!!G.multiple,G.defaultValue,!0):ie(j,!!G.multiple,G.multiple?[]:"",!1))}j[lf]=G}catch(Dt){ni(d,d.return,Dt)}}break;case 6:if(nl(m,d),zl(d),I&4){if(d.stateNode===null)throw Error(t(162));j=d.stateNode,G=d.memoizedProps;try{j.nodeValue=G}catch(Dt){ni(d,d.return,Dt)}}break;case 3:if(nl(m,d),zl(d),I&4&&E!==null&&E.memoizedState.isDehydrated)try{Lo(m.containerInfo)}catch(Dt){ni(d,d.return,Dt)}break;case 4:nl(m,d),zl(d);break;case 13:nl(m,d),zl(d),j=d.child,j.flags&8192&&(G=j.memoizedState!==null,j.stateNode.isHidden=G,!G||j.alternate!==null&&j.alternate.memoizedState!==null||(US=Oe())),I&4&&xO(d);break;case 22:if(it=E!==null&&E.memoizedState!==null,d.mode&1?(Rs=(ze=Rs)||it,nl(m,d),Rs=ze):nl(m,d),zl(d),I&8192){if(ze=d.memoizedState!==null,(d.stateNode.isHidden=ze)&&!it&&d.mode&1)for(Rt=d,it=d.child;it!==null;){for(ot=Rt=it;Rt!==null;){switch(tt=Rt,Tt=tt.child,tt.tag){case 0:case 11:case 14:case 15:dv(4,tt,tt.return);break;case 1:Tm(tt,tt.return);var Ot=tt.stateNode;if(typeof Ot.componentWillUnmount=="function"){I=tt,E=tt.return;try{m=I,Ot.props=m.memoizedProps,Ot.state=m.memoizedState,Ot.componentWillUnmount()}catch(Dt){ni(I,E,Dt)}}break;case 5:Tm(tt,tt.return);break;case 22:if(tt.memoizedState!==null){bO(ot);continue}}Tt!==null?(Tt.return=tt,Rt=Tt):bO(ot)}it=it.sibling}e:for(it=null,ot=d;;){if(ot.tag===5){if(it===null){it=ot;try{j=ot.stateNode,ze?(G=j.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none"):(_e=ot.stateNode,Ee=ot.memoizedProps.style,ne=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null,_e.style.display=kt("display",ne))}catch(Dt){ni(d,d.return,Dt)}}}else if(ot.tag===6){if(it===null)try{ot.stateNode.nodeValue=ze?"":ot.memoizedProps}catch(Dt){ni(d,d.return,Dt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===d)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===d)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===d)break e;it===ot&&(it=null),ot=ot.return}it===ot&&(it=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:nl(m,d),zl(d),I&4&&xO(d);break;case 21:break;default:nl(m,d),zl(d)}}function zl(d){var m=d.flags;if(m&2){try{e:{for(var E=d.return;E!==null;){if(yO(E)){var I=E;break e}E=E.return}throw Error(t(160))}switch(I.tag){case 5:var j=I.stateNode;I.flags&32&&(yt(j,""),I.flags&=-33);var G=vO(d);NS(d,G,j);break;case 3:case 4:var ne=I.stateNode.containerInfo,_e=vO(d);LS(d,_e,ne);break;default:throw Error(t(161))}}catch(Ee){ni(d,d.return,Ee)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function JW(d,m,E){Rt=d,AO(d)}function AO(d,m,E){for(var I=(d.mode&1)!==0;Rt!==null;){var j=Rt,G=j.child;if(j.tag===22&&I){var ne=j.memoizedState!==null||Ux;if(!ne){var _e=j.alternate,Ee=_e!==null&&_e.memoizedState!==null||Rs;_e=Ux;var ze=Rs;if(Ux=ne,(Rs=Ee)&&!ze)for(Rt=j;Rt!==null;)ne=Rt,Ee=ne.child,ne.tag===22&&ne.memoizedState!==null?SO(j):Ee!==null?(Ee.return=ne,Rt=Ee):SO(j);for(;G!==null;)Rt=G,AO(G),G=G.sibling;Rt=j,Ux=_e,Rs=ze}EO(d)}else j.subtreeFlags&8772&&G!==null?(G.return=j,Rt=G):EO(d)}}function EO(d){for(;Rt!==null;){var m=Rt;if(m.flags&8772){var E=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:Rs||jx(5,m);break;case 1:var I=m.stateNode;if(m.flags&4&&!Rs)if(E===null)I.componentDidMount();else{var j=m.elementType===m.type?E.memoizedProps:yo(m.type,E.memoizedProps);I.componentDidUpdate(j,E.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var G=m.updateQueue;G!==null&&hf(m,G,I);break;case 3:var ne=m.updateQueue;if(ne!==null){if(E=null,m.child!==null)switch(m.child.tag){case 5:E=m.child.stateNode;break;case 1:E=m.child.stateNode}hf(m,ne,E)}break;case 5:var _e=m.stateNode;if(E===null&&m.flags&4){E=_e;var Ee=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":Ee.autoFocus&&E.focus();break;case"img":Ee.src&&(E.src=Ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var ze=m.alternate;if(ze!==null){var it=ze.memoizedState;if(it!==null){var ot=it.dehydrated;ot!==null&&Lo(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Rs||m.flags&512&&DS(m)}catch(tt){ni(m,m.return,tt)}}if(m===d){Rt=null;break}if(E=m.sibling,E!==null){E.return=m.return,Rt=E;break}Rt=m.return}}function bO(d){for(;Rt!==null;){var m=Rt;if(m===d){Rt=null;break}var E=m.sibling;if(E!==null){E.return=m.return,Rt=E;break}Rt=m.return}}function SO(d){for(;Rt!==null;){var m=Rt;try{switch(m.tag){case 0:case 11:case 15:var E=m.return;try{jx(4,m)}catch(Ee){ni(m,E,Ee)}break;case 1:var I=m.stateNode;if(typeof I.componentDidMount=="function"){var j=m.return;try{I.componentDidMount()}catch(Ee){ni(m,j,Ee)}}var G=m.return;try{DS(m)}catch(Ee){ni(m,G,Ee)}break;case 5:var ne=m.return;try{DS(m)}catch(Ee){ni(m,ne,Ee)}}}catch(Ee){ni(m,m.return,Ee)}if(m===d){Rt=null;break}var _e=m.sibling;if(_e!==null){_e.return=m.return,Rt=_e;break}Rt=m.return}}var XW=Math.ceil,Vx=b.ReactCurrentDispatcher,BS=b.ReactCurrentOwner,ga=b.ReactCurrentBatchConfig,Kn=0,es=null,Ti=null,ms=0,Wo=0,Cm=Rr(0),Fi=0,pv=null,ad=0,zx=0,FS=0,mv=null,vo=null,US=0,Mm=1/0,Ju=null,Hx=!1,jS=null,yf=null,Gx=!1,vf=null,qx=0,gv=0,VS=null,Wx=-1,$x=0;function oo(){return Kn&6?Oe():Wx!==-1?Wx:Wx=Oe()}function _f(d){return d.mode&1?Kn&2&&ms!==0?ms&-ms:RS.transition!==null?($x===0&&($x=fn()),$x):(d=hn,d!==0||(d=window.event,d=d===void 0?16:Ih(d.type)),d):1}function rl(d,m,E,I){if(50<gv)throw gv=0,VS=null,Error(t(185));Fr(d,E,I),(!(Kn&2)||d!==es)&&(d===es&&(!(Kn&2)&&(zx|=E),Fi===4&&xf(d,ms)),_o(d,I),E===1&&Kn===0&&!(m.mode&1)&&(Mm=Oe()+500,qh&&ha()))}function _o(d,m){var E=d.callbackNode;lr(d,m);var I=Jr(d,d===es?ms:0);if(I===0)E!==null&&ae(E),d.callbackNode=null,d.callbackPriority=0;else if(m=I&-I,d.callbackPriority!==m){if(E!=null&&ae(E),m===1)d.tag===0?Tx(CO.bind(null,d)):Wh(CO.bind(null,d)),MS(function(){!(Kn&6)&&ha()}),E=null;else{switch(Yr(I)){case 1:E=et;break;case 4:E=ht;break;case 16:E=gt;break;case 536870912:E=jt;break;default:E=gt}E=LO(E,TO.bind(null,d))}d.callbackPriority=m,d.callbackNode=E}}function TO(d,m){if(Wx=-1,$x=0,Kn&6)throw Error(t(327));var E=d.callbackNode;if(Rm()&&d.callbackNode!==E)return null;var I=Jr(d,d===es?ms:0);if(I===0)return null;if(I&30||I&d.expiredLanes||m)m=Kx(d,I);else{m=I;var j=Kn;Kn|=2;var G=RO();(es!==d||ms!==m)&&(Ju=null,Mm=Oe()+500,ud(d,m));do try{ZW();break}catch(_e){MO(d,_e)}while(!0);Vu(),Vx.current=G,Kn=j,Ti!==null?m=0:(es=null,ms=0,m=Fi)}if(m!==0){if(m===2&&(j=Xr(d),j!==0&&(I=j,m=zS(d,j))),m===1)throw E=pv,ud(d,0),xf(d,I),_o(d,Oe()),E;if(m===6)xf(d,I);else{if(j=d.current.alternate,!(I&30)&&!YW(j)&&(m=Kx(d,I),m===2&&(G=Xr(d),G!==0&&(I=G,m=zS(d,G))),m===1))throw E=pv,ud(d,0),xf(d,I),_o(d,Oe()),E;switch(d.finishedWork=j,d.finishedLanes=I,m){case 0:case 1:throw Error(t(345));case 2:cd(d,vo,Ju);break;case 3:if(xf(d,I),(I&130023424)===I&&(m=US+500-Oe(),10<m)){if(Jr(d,0)!==0)break;if(j=d.suspendedLanes,(j&I)!==I){oo(),d.pingedLanes|=d.suspendedLanes&j;break}d.timeoutHandle=Hy(cd.bind(null,d,vo,Ju),m);break}cd(d,vo,Ju);break;case 4:if(xf(d,I),(I&4194240)===I)break;for(m=d.eventTimes,j=-1;0<I;){var ne=31-zt(I);G=1<<ne,ne=m[ne],ne>j&&(j=ne),I&=~G}if(I=j,I=Oe()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*XW(I/1960))-I,10<I){d.timeoutHandle=Hy(cd.bind(null,d,vo,Ju),I);break}cd(d,vo,Ju);break;case 5:cd(d,vo,Ju);break;default:throw Error(t(329))}}}return _o(d,Oe()),d.callbackNode===E?TO.bind(null,d):null}function zS(d,m){var E=mv;return d.current.memoizedState.isDehydrated&&(ud(d,m).flags|=256),d=Kx(d,m),d!==2&&(m=vo,vo=E,m!==null&&HS(m)),d}function HS(d){vo===null?vo=d:vo.push.apply(vo,d)}function YW(d){for(var m=d;;){if(m.flags&16384){var E=m.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var I=0;I<E.length;I++){var j=E[I],G=j.getSnapshot;j=j.value;try{if(!Qs(G(),j))return!1}catch{return!1}}}if(E=m.child,m.subtreeFlags&16384&&E!==null)E.return=m,m=E;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function xf(d,m){for(m&=~FS,m&=~zx,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var E=31-zt(m),I=1<<E;d[E]=-1,m&=~I}}function CO(d){if(Kn&6)throw Error(t(327));Rm();var m=Jr(d,0);if(!(m&1))return _o(d,Oe()),null;var E=Kx(d,m);if(d.tag!==0&&E===2){var I=Xr(d);I!==0&&(m=I,E=zS(d,I))}if(E===1)throw E=pv,ud(d,0),xf(d,m),_o(d,Oe()),E;if(E===6)throw Error(t(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,cd(d,vo,Ju),_o(d,Oe()),null}function GS(d,m){var E=Kn;Kn|=1;try{return d(m)}finally{Kn=E,Kn===0&&(Mm=Oe()+500,qh&&ha())}}function ld(d){vf!==null&&vf.tag===0&&!(Kn&6)&&Rm();var m=Kn;Kn|=1;var E=ga.transition,I=hn;try{if(ga.transition=null,hn=1,d)return d()}finally{hn=I,ga.transition=E,Kn=m,!(Kn&6)&&ha()}}function qS(){Wo=Cm.current,fr(Cm)}function ud(d,m){d.finishedWork=null,d.finishedLanes=0;var E=d.timeoutHandle;if(E!==-1&&(d.timeoutHandle=-1,Gy(E)),Ti!==null)for(E=Ti.return;E!==null;){var I=E;switch($a(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Hh();break;case 3:jl(),fr(cs),fr(Oi),pa();break;case 5:df(I);break;case 4:jl();break;case 13:fr(mr);break;case 19:fr(mr);break;case 10:Xh(I.type._context);break;case 22:case 23:qS()}E=E.return}if(es=d,Ti=d=wf(d.current,null),ms=Wo=m,Fi=0,pv=null,FS=zx=ad=0,vo=mv=null,Ja!==null){for(m=0;m<Ja.length;m++)if(E=Ja[m],I=E.interleaved,I!==null){E.interleaved=null;var j=I.next,G=E.pending;if(G!==null){var ne=G.next;G.next=j,I.next=ne}E.pending=I}Ja=null}return d}function MO(d,m){do{var E=Ti;try{if(Vu(),qu.current=bm,Go){for(var I=hr.memoizedState;I!==null;){var j=I.queue;j!==null&&(j.pending=null),I=I.next}Go=!1}if(Ya=0,zn=Ir=hr=null,Zi=!1,Vl=0,BS.current=null,E===null||E.return===null){Fi=1,pv=m,Ti=null;break}e:{var G=d,ne=E.return,_e=E,Ee=m;if(m=ms,_e.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var ze=Ee,it=_e,ot=it.tag;if(!(it.mode&1)&&(ot===0||ot===11||ot===15)){var tt=it.alternate;tt?(it.updateQueue=tt.updateQueue,it.memoizedState=tt.memoizedState,it.lanes=tt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Tt=Ct(ne);if(Tt!==null){Tt.flags&=-257,rn(Tt,ne,_e,G,m),Tt.mode&1&&ct(G,ze,m),m=Tt,Ee=ze;var Ot=m.updateQueue;if(Ot===null){var Dt=new Set;Dt.add(Ee),m.updateQueue=Dt}else Ot.add(Ee);break e}else{if(!(m&1)){ct(G,ze,m),WS();break e}Ee=Error(t(426))}}else if(pr&&_e.mode&1){var fi=Ct(ne);if(fi!==null){!(fi.flags&65536)&&(fi.flags|=256),rn(fi,ne,_e,G,m),cf(B(Ee,_e));break e}}G=Ee=B(Ee,_e),Fi!==4&&(Fi=2),mv===null?mv=[G]:mv.push(G),G=ne;do{switch(G.tag){case 3:G.flags|=65536,m&=-m,G.lanes|=m;var Ne=Ce(G,Ee,m);zu(G,Ne);break e;case 1:_e=Ee;var Se=G.type,Fe=G.stateNode;if(!(G.flags&128)&&(typeof Se.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(yf===null||!yf.has(Fe)))){G.flags|=65536,m&=-m,G.lanes|=m;var ft=Ke(G,_e,m);zu(G,ft);break e}}G=G.return}while(G!==null)}IO(E)}catch(Ut){m=Ut,Ti===E&&E!==null&&(Ti=E=E.return);continue}break}while(!0)}function RO(){var d=Vx.current;return Vx.current=bm,d===null?bm:d}function WS(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),es===null||!(ad&268435455)&&!(zx&268435455)||xf(es,ms)}function Kx(d,m){var E=Kn;Kn|=2;var I=RO();(es!==d||ms!==m)&&(Ju=null,ud(d,m));do try{QW();break}catch(j){MO(d,j)}while(!0);if(Vu(),Kn=E,Vx.current=I,Ti!==null)throw Error(t(261));return es=null,ms=0,Fi}function QW(){for(;Ti!==null;)PO(Ti)}function ZW(){for(;Ti!==null&&!Me();)PO(Ti)}function PO(d){var m=DO(d.alternate,d,Wo);d.memoizedProps=d.pendingProps,m===null?IO(d):Ti=m,BS.current=null}function IO(d){var m=d;do{var E=m.alternate;if(d=m.return,m.flags&32768){if(E=WW(E,m),E!==null){E.flags&=32767,Ti=E;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Fi=6,Ti=null;return}}else if(E=qW(E,m,Wo),E!==null){Ti=E;return}if(m=m.sibling,m!==null){Ti=m;return}Ti=m=d}while(m!==null);Fi===0&&(Fi=5)}function cd(d,m,E){var I=hn,j=ga.transition;try{ga.transition=null,hn=1,e$(d,m,E,I)}finally{ga.transition=j,hn=I}return null}function e$(d,m,E,I){do Rm();while(vf!==null);if(Kn&6)throw Error(t(327));E=d.finishedWork;var j=d.finishedLanes;if(E===null)return null;if(d.finishedWork=null,d.finishedLanes=0,E===d.current)throw Error(t(177));d.callbackNode=null,d.callbackPriority=0;var G=E.lanes|E.childLanes;if(ln(d,G),d===es&&(Ti=es=null,ms=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Gx||(Gx=!0,LO(gt,function(){return Rm(),null})),G=(E.flags&15990)!==0,E.subtreeFlags&15990||G){G=ga.transition,ga.transition=null;var ne=hn;hn=1;var _e=Kn;Kn|=4,BS.current=null,KW(d,E),wO(E,d),Ai(Vy),$i=!!af,Vy=af=null,d.current=E,JW(E),je(),Kn=_e,hn=ne,ga.transition=G}else d.current=E;if(Gx&&(Gx=!1,vf=d,qx=j),G=d.pendingLanes,G===0&&(yf=null),Pt(E.stateNode),_o(d,Oe()),m!==null)for(I=d.onRecoverableError,E=0;E<m.length;E++)j=m[E],I(j.value,{componentStack:j.stack,digest:j.digest});if(Hx)throw Hx=!1,d=jS,jS=null,d;return qx&1&&d.tag!==0&&Rm(),G=d.pendingLanes,G&1?d===VS?gv++:(gv=0,VS=d):gv=0,ha(),null}function Rm(){if(vf!==null){var d=Yr(qx),m=ga.transition,E=hn;try{if(ga.transition=null,hn=16>d?16:d,vf===null)var I=!1;else{if(d=vf,vf=null,qx=0,Kn&6)throw Error(t(331));var j=Kn;for(Kn|=4,Rt=d.current;Rt!==null;){var G=Rt,ne=G.child;if(Rt.flags&16){var _e=G.deletions;if(_e!==null){for(var Ee=0;Ee<_e.length;Ee++){var ze=_e[Ee];for(Rt=ze;Rt!==null;){var it=Rt;switch(it.tag){case 0:case 11:case 15:dv(8,it,G)}var ot=it.child;if(ot!==null)ot.return=it,Rt=ot;else for(;Rt!==null;){it=Rt;var tt=it.sibling,Tt=it.return;if(gO(it),it===ze){Rt=null;break}if(tt!==null){tt.return=Tt,Rt=tt;break}Rt=Tt}}}var Ot=G.alternate;if(Ot!==null){var Dt=Ot.child;if(Dt!==null){Ot.child=null;do{var fi=Dt.sibling;Dt.sibling=null,Dt=fi}while(Dt!==null)}}Rt=G}}if(G.subtreeFlags&2064&&ne!==null)ne.return=G,Rt=ne;else e:for(;Rt!==null;){if(G=Rt,G.flags&2048)switch(G.tag){case 0:case 11:case 15:dv(9,G,G.return)}var Ne=G.sibling;if(Ne!==null){Ne.return=G.return,Rt=Ne;break e}Rt=G.return}}var Se=d.current;for(Rt=Se;Rt!==null;){ne=Rt;var Fe=ne.child;if(ne.subtreeFlags&2064&&Fe!==null)Fe.return=ne,Rt=Fe;else e:for(ne=Se;Rt!==null;){if(_e=Rt,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:jx(9,_e)}}catch(Ut){ni(_e,_e.return,Ut)}if(_e===ne){Rt=null;break e}var ft=_e.sibling;if(ft!==null){ft.return=_e.return,Rt=ft;break e}Rt=_e.return}}if(Kn=j,ha(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Lt,d)}catch{}I=!0}return I}finally{hn=E,ga.transition=m}}return!1}function kO(d,m,E){m=B(E,m),m=Ce(d,m,1),d=_r(d,m,1),m=oo(),d!==null&&(Fr(d,1,m),_o(d,m))}function ni(d,m,E){if(d.tag===3)kO(d,d,E);else for(;m!==null;){if(m.tag===3){kO(m,d,E);break}else if(m.tag===1){var I=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(yf===null||!yf.has(I))){d=B(E,d),d=Ke(m,d,1),m=_r(m,d,1),d=oo(),m!==null&&(Fr(m,1,d),_o(m,d));break}}m=m.return}}function t$(d,m,E){var I=d.pingCache;I!==null&&I.delete(m),m=oo(),d.pingedLanes|=d.suspendedLanes&E,es===d&&(ms&E)===E&&(Fi===4||Fi===3&&(ms&130023424)===ms&&500>Oe()-US?ud(d,0):FS|=E),_o(d,m)}function OO(d,m){m===0&&(d.mode&1?(m=Mn,Mn<<=1,!(Mn&130023424)&&(Mn=4194304)):m=1);var E=oo();d=zo(d,m),d!==null&&(Fr(d,m,E),_o(d,E))}function n$(d){var m=d.memoizedState,E=0;m!==null&&(E=m.retryLane),OO(d,E)}function r$(d,m){var E=0;switch(d.tag){case 13:var I=d.stateNode,j=d.memoizedState;j!==null&&(E=j.retryLane);break;case 19:I=d.stateNode;break;default:throw Error(t(314))}I!==null&&I.delete(m),OO(d,E)}var DO;DO=function(d,m,E){if(d!==null)if(d.memoizedProps!==m.pendingProps||cs.current)En=!0;else{if(!(d.lanes&E)&&!(m.flags&128))return En=!1,GW(d,m,E);En=!!(d.flags&131072)}else En=!1,pr&&m.flags&1048576&&Jy(m,pm,m.index);switch(m.lanes=0,m.tag){case 2:var I=m.type;Fx(d,m),d=m.pendingProps;var j=Du(m,Oi.current);Ul(m,E),j=td(null,m,I,d,j,E);var G=rv();return m.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Yi(I)?(G=!0,Lu(m)):G=!1,m.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,vn(m),j.updater=Sm,m.stateNode=j,j._reactInternals=m,P(m,I,d,E),m=pn(null,m,I,!0,G,E)):(m.tag=0,pr&&G&&Xy(m),St(null,m,j,E),m=m.child),m;case 16:I=m.elementType;e:{switch(Fx(d,m),d=m.pendingProps,j=I._init,I=j(I._payload),m.type=I,j=m.tag=s$(I),d=yo(I,d),j){case 0:m=xt(null,m,I,d,E);break e;case 1:m=Nt(null,m,I,d,E);break e;case 11:m=Bi(null,m,I,d,E);break e;case 14:m=so(null,m,I,yo(I.type,d),E);break e}throw Error(t(306,I,""))}return m;case 0:return I=m.type,j=m.pendingProps,j=m.elementType===I?j:yo(I,j),xt(d,m,I,j,E);case 1:return I=m.type,j=m.pendingProps,j=m.elementType===I?j:yo(I,j),Nt(d,m,I,j,E);case 3:e:{if(sn(m),d===null)throw Error(t(387));I=m.pendingProps,G=m.memoizedState,j=G.element,Vr(d,m),Pr(m,I,null,E);var ne=m.memoizedState;if(I=ne.element,G.isDehydrated)if(G={element:I,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){j=B(Error(t(423)),m),m=Fn(d,m,I,E,j);break e}else if(I!==j){j=B(Error(t(424)),m),m=Fn(d,m,I,E,j);break e}else for(hs=za(m.stateNode.containerInfo.firstChild),Di=m,pr=!0,go=null,E=Jh(m,null,I,E),m.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(Fl(),I===j){m=Ku(d,m,E);break e}St(d,m,I,E)}m=m.child}return m;case 5:return Gu(m),d===null&&gm(m),I=m.type,j=m.pendingProps,G=d!==null?d.memoizedProps:null,ne=j.children,zy(I,j)?ne=null:G!==null&&zy(I,G)&&(m.flags|=32),We(d,m),St(d,m,ne,E),m.child;case 6:return d===null&&gm(m),null;case 13:return el(d,m,E);case 4:return Zh(m,m.stateNode.containerInfo),I=m.pendingProps,d===null?m.child=Fu(m,null,I,E):St(d,m,I,E),m.child;case 11:return I=m.type,j=m.pendingProps,j=m.elementType===I?j:yo(I,j),Bi(d,m,I,j,E);case 7:return St(d,m,m.pendingProps,E),m.child;case 8:return St(d,m,m.pendingProps.children,E),m.child;case 12:return St(d,m,m.pendingProps.children,E),m.child;case 10:e:{if(I=m.type._context,j=m.pendingProps,G=m.memoizedProps,ne=j.value,or(Uu,I._currentValue),I._currentValue=ne,G!==null)if(Qs(G.value,ne)){if(G.children===j.children&&!cs.current){m=Ku(d,m,E);break e}}else for(G=m.child,G!==null&&(G.return=m);G!==null;){var _e=G.dependencies;if(_e!==null){ne=G.child;for(var Ee=_e.firstContext;Ee!==null;){if(Ee.context===I){if(G.tag===1){Ee=nr(-1,E&-E),Ee.tag=2;var ze=G.updateQueue;if(ze!==null){ze=ze.shared;var it=ze.pending;it===null?Ee.next=Ee:(Ee.next=it.next,it.next=Ee),ze.pending=Ee}}G.lanes|=E,Ee=G.alternate,Ee!==null&&(Ee.lanes|=E),Yh(G.return,E,m),_e.lanes|=E;break}Ee=Ee.next}}else if(G.tag===10)ne=G.type===m.type?null:G.child;else if(G.tag===18){if(ne=G.return,ne===null)throw Error(t(341));ne.lanes|=E,_e=ne.alternate,_e!==null&&(_e.lanes|=E),Yh(ne,E,m),ne=G.sibling}else ne=G.child;if(ne!==null)ne.return=G;else for(ne=G;ne!==null;){if(ne===m){ne=null;break}if(G=ne.sibling,G!==null){G.return=ne.return,ne=G;break}ne=ne.return}G=ne}St(d,m,j.children,E),m=m.child}return m;case 9:return j=m.type,I=m.pendingProps.children,Ul(m,E),j=to(j),I=I(j),m.flags|=1,St(d,m,I,E),m.child;case 14:return I=m.type,j=yo(I,m.pendingProps),j=yo(I.type,j),so(d,m,I,j,E);case 15:return Ue(d,m,m.type,m.pendingProps,E);case 17:return I=m.type,j=m.pendingProps,j=m.elementType===I?j:yo(I,j),Fx(d,m),m.tag=1,Yi(I)?(d=!0,Lu(m)):d=!1,Ul(m,E),y(m,I,j),P(m,I,j,E),pn(null,m,I,!0,d,E);case 19:return fO(d,m,E);case 22:return Ie(d,m,E)}throw Error(t(156,m.tag))};function LO(d,m){return Rl(d,m)}function i$(d,m,E,I){this.tag=d,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ya(d,m,E,I){return new i$(d,m,E,I)}function $S(d){return d=d.prototype,!(!d||!d.isReactComponent)}function s$(d){if(typeof d=="function")return $S(d)?1:0;if(d!=null){if(d=d.$$typeof,d===U)return 11;if(d===Z)return 14}return 2}function wf(d,m){var E=d.alternate;return E===null?(E=ya(d.tag,m,d.key,d.mode),E.elementType=d.elementType,E.type=d.type,E.stateNode=d.stateNode,E.alternate=d,d.alternate=E):(E.pendingProps=m,E.type=d.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=d.flags&14680064,E.childLanes=d.childLanes,E.lanes=d.lanes,E.child=d.child,E.memoizedProps=d.memoizedProps,E.memoizedState=d.memoizedState,E.updateQueue=d.updateQueue,m=d.dependencies,E.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},E.sibling=d.sibling,E.index=d.index,E.ref=d.ref,E}function Jx(d,m,E,I,j,G){var ne=2;if(I=d,typeof d=="function")$S(d)&&(ne=1);else if(typeof d=="string")ne=5;else e:switch(d){case R:return fd(E.children,j,G,m);case k:ne=8,j|=8;break;case O:return d=ya(12,E,m,j|2),d.elementType=O,d.lanes=G,d;case F:return d=ya(13,E,m,j),d.elementType=F,d.lanes=G,d;case $:return d=ya(19,E,m,j),d.elementType=$,d.lanes=G,d;case ce:return Xx(E,j,G,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case M:ne=10;break e;case D:ne=9;break e;case U:ne=11;break e;case Z:ne=14;break e;case se:ne=16,I=null;break e}throw Error(t(130,d==null?d:typeof d,""))}return m=ya(ne,E,m,j),m.elementType=d,m.type=I,m.lanes=G,m}function fd(d,m,E,I){return d=ya(7,d,I,m),d.lanes=E,d}function Xx(d,m,E,I){return d=ya(22,d,I,m),d.elementType=ce,d.lanes=E,d.stateNode={isHidden:!1},d}function KS(d,m,E){return d=ya(6,d,null,m),d.lanes=E,d}function JS(d,m,E){return m=ya(4,d.children!==null?d.children:[],d.key,m),m.lanes=E,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function o$(d,m,E,I,j){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=I,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function XS(d,m,E,I,j,G,ne,_e,Ee){return d=new o$(d,m,E,_e,Ee),m===1?(m=1,G===!0&&(m|=8)):m=0,G=ya(3,null,null,m),d.current=G,G.stateNode=d,G.memoizedState={element:I,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},vn(G),d}function a$(d,m,E){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:I==null?null:""+I,children:d,containerInfo:m,implementation:E}}function NO(d){if(!d)return Ga;d=d._reactInternals;e:{if(bs(d)!==d||d.tag!==1)throw Error(t(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Yi(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(d.tag===1){var E=d.type;if(Yi(E))return Gh(d,E,m)}return m}function BO(d,m,E,I,j,G,ne,_e,Ee){return d=XS(E,I,!0,d,j,G,ne,_e,Ee),d.context=NO(null),E=d.current,I=oo(),j=_f(E),G=nr(I,j),G.callback=m??null,_r(E,G,j),d.current.lanes=j,Fr(d,j,I),_o(d,I),d}function Yx(d,m,E,I){var j=m.current,G=oo(),ne=_f(j);return E=NO(E),m.context===null?m.context=E:m.pendingContext=E,m=nr(G,ne),m.payload={element:d},I=I===void 0?null:I,I!==null&&(m.callback=I),d=_r(j,m,ne),d!==null&&(rl(d,j,ne,G),Qi(d,j,ne)),ne}function Qx(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function FO(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var E=d.retryLane;d.retryLane=E!==0&&E<m?E:m}}function YS(d,m){FO(d,m),(d=d.alternate)&&FO(d,m)}var UO=typeof reportError=="function"?reportError:function(d){console.error(d)};function QS(d){this._internalRoot=d}Zx.prototype.render=QS.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(t(409));Yx(d,m,null,null)},Zx.prototype.unmount=QS.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;ld(function(){Yx(null,d,null,null)}),m[eo]=null}};function Zx(d){this._internalRoot=d}Zx.prototype.unstable_scheduleHydration=function(d){if(d){var m=Hc();d={blockedOn:null,target:d,priority:m};for(var E=0;E<aa.length&&m!==0&&m<aa[E].priority;E++);aa.splice(E,0,d),E===0&&qc(d)}};function ZS(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function e1(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function jO(){}function l$(d,m,E,I,j){if(j){if(typeof I=="function"){var G=I;I=function(){var ze=Qx(ne);G.call(ze)}}var ne=BO(m,I,d,0,null,!1,!1,"",jO);return d._reactRootContainer=ne,d[eo]=ne.current,sf(d.nodeType===8?d.parentNode:d),ld(),ne}for(;j=d.lastChild;)d.removeChild(j);if(typeof I=="function"){var _e=I;I=function(){var ze=Qx(Ee);_e.call(ze)}}var Ee=XS(d,0,!1,null,null,!1,!1,"",jO);return d._reactRootContainer=Ee,d[eo]=Ee.current,sf(d.nodeType===8?d.parentNode:d),ld(function(){Yx(m,Ee,E,I)}),Ee}function t1(d,m,E,I,j){var G=E._reactRootContainer;if(G){var ne=G;if(typeof j=="function"){var _e=j;j=function(){var Ee=Qx(ne);_e.call(Ee)}}Yx(m,ne,d,j)}else ne=l$(E,m,d,j,I);return Qx(ne)}vu=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var E=cn(m.pendingLanes);E!==0&&(ur(m,E|1),_o(m,Oe()),!(Kn&6)&&(Mm=Oe()+500,ha()))}break;case 13:ld(function(){var I=zo(d,1);if(I!==null){var j=oo();rl(I,d,1,j)}}),YS(d,1)}},zc=function(d){if(d.tag===13){var m=zo(d,134217728);if(m!==null){var E=oo();rl(m,d,134217728,E)}YS(d,134217728)}},$p=function(d){if(d.tag===13){var m=_f(d),E=zo(d,m);if(E!==null){var I=oo();rl(E,d,m,I)}YS(d,m)}},Hc=function(){return hn},Gc=function(d,m){var E=hn;try{return hn=d,m()}finally{hn=E}},mt=function(d,m,E){switch(m){case"input":if(nt(d,E),m=E.name,E.type==="radio"&&m!=null){for(E=d;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<E.length;m++){var I=E[m];if(I!==d&&I.form===d.form){var j=fm(I);if(!j)throw Error(t(90));De(I),nt(I,j)}}}break;case"textarea":de(d,E);break;case"select":m=E.value,m!=null&&ie(d,!!E.multiple,m,!1)}},Yn=GS,Sr=ld;var u$={usingClientEntryPoint:!1,Events:[Ha,jr,fm,dt,Xt,GS]},yv={findFiberByHostInstance:Bl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c$={bundleType:yv.bundleType,version:yv.version,rendererPackageName:yv.rendererPackageName,rendererConfig:yv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=yu(d),d===null?null:d.stateNode},findFiberByHostInstance:yv.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var n1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!n1.isDisabled&&n1.supportsFiber)try{Lt=n1.inject(c$),ut=n1}catch{}}return xo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u$,xo.createPortal=function(d,m){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZS(m))throw Error(t(200));return a$(d,m,null,E)},xo.createRoot=function(d,m){if(!ZS(d))throw Error(t(299));var E=!1,I="",j=UO;return m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(j=m.onRecoverableError)),m=XS(d,1,!1,null,null,E,!1,I,j),d[eo]=m.current,sf(d.nodeType===8?d.parentNode:d),new QS(m)},xo.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(t(188)):(d=Object.keys(d).join(","),Error(t(268,d)));return d=yu(m),d=d===null?null:d.stateNode,d},xo.flushSync=function(d){return ld(d)},xo.hydrate=function(d,m,E){if(!e1(m))throw Error(t(200));return t1(null,d,m,!0,E)},xo.hydrateRoot=function(d,m,E){if(!ZS(d))throw Error(t(405));var I=E!=null&&E.hydratedSources||null,j=!1,G="",ne=UO;if(E!=null&&(E.unstable_strictMode===!0&&(j=!0),E.identifierPrefix!==void 0&&(G=E.identifierPrefix),E.onRecoverableError!==void 0&&(ne=E.onRecoverableError)),m=BO(m,null,d,1,E??null,j,!1,G,ne),d[eo]=m.current,sf(d),I)for(d=0;d<I.length;d++)E=I[d],j=E._getVersion,j=j(E._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[E,j]:m.mutableSourceEagerHydrationData.push(E,j);return new Zx(m)},xo.render=function(d,m,E){if(!e1(m))throw Error(t(200));return t1(null,d,m,!1,E)},xo.unmountComponentAtNode=function(d){if(!e1(d))throw Error(t(40));return d._reactRootContainer?(ld(function(){t1(null,null,d,!1,function(){d._reactRootContainer=null,d[eo]=null})}),!0):!1},xo.unstable_batchedUpdates=GS,xo.unstable_renderSubtreeIntoContainer=function(d,m,E,I){if(!e1(E))throw Error(t(200));if(d==null||d._reactInternals===void 0)throw Error(t(38));return t1(d,m,E,!1,I)},xo.version="18.3.1-next-f1338f8080-20240426",xo}var KO;function KP(){if(KO)return nT.exports;KO=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),nT.exports=y$(),nT.exports}var JO;function v$(){if(JO)return r1;JO=1;var n=KP();return r1.createRoot=n.createRoot,r1.hydrateRoot=n.hydrateRoot,r1}var _$=v$(),_v={},XO;function x$(){if(XO)return _v;XO=1,Object.defineProperty(_v,"__esModule",{value:!0}),_v.parse=o,_v.serialize=u;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,p){const g=new s,w=h.length;if(w<2)return g;const _=(p==null?void 0:p.decode)||c;let v=0;do{const A=h.indexOf("=",v);if(A===-1)break;const S=h.indexOf(";",v),b=S===-1?w:S;if(A>b){v=h.lastIndexOf(";",A-1)+1;continue}const C=a(h,v,A),L=l(h,A,C),R=h.slice(C,L);if(g[R]===void 0){let k=a(h,A+1,b),O=l(h,b,k);const M=_(h.slice(k,O));g[R]=M}v=b+1}while(v<w);return g}function a(h,p,g){do{const w=h.charCodeAt(p);if(w!==32&&w!==9)return p}while(++p<g);return g}function l(h,p,g){for(;p>g;){const w=h.charCodeAt(--p);if(w!==32&&w!==9)return p+1}return g}function u(h,p,g){const w=(g==null?void 0:g.encode)||encodeURIComponent;if(!n.test(h))throw new TypeError(`argument name is invalid: ${h}`);const _=w(p);if(!e.test(_))throw new TypeError(`argument val is invalid: ${p}`);let v=h+"="+_;if(!g)return v;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);v+="; Max-Age="+g.maxAge}if(g.domain){if(!t.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);v+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);v+="; Path="+g.path}if(g.expires){if(!f(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);v+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(v+="; HttpOnly"),g.secure&&(v+="; Secure"),g.partitioned&&(v+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return v}function c(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function f(h){return i.call(h)==="[object Date]"}return _v}x$();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var YO="popstate";function w$(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return tR("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:q_(i)}return E$(e,t,null,n)}function Lr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function yl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A$(){return Math.random().toString(36).substring(2,10)}function QO(n,e){return{usr:n.state,key:n.key,idx:e}}function tR(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?cy(e):e,state:t,key:e&&e.key||r||A$()}}function q_({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function cy(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function E$(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let _=c(),v=_==null?null:_-u;u=_,l&&l({action:a,location:w.location,delta:v})}function h(_,v){a="PUSH";let A=tR(w.location,_,v);u=c()+1;let S=QO(A,u),b=w.createHref(A);try{o.pushState(S,"",b)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(b)}s&&l&&l({action:a,location:w.location,delta:1})}function p(_,v){a="REPLACE";let A=tR(w.location,_,v);u=c();let S=QO(A,u),b=w.createHref(A);o.replaceState(S,"",b),s&&l&&l({action:a,location:w.location,delta:0})}function g(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof _=="string"?_:q_(_);return A=A.replace(/ $/,"%20"),Lr(v,`No window.location.(origin|href) available to create URL for href: ${A}`),new URL(A,v)}let w={get action(){return a},get location(){return n(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(YO,f),l=_,()=>{i.removeEventListener(YO,f),l=null}},createHref(_){return e(i,_)},createURL:g,encodeLocation(_){let v=g(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(_){return o.go(_)}};return w}function e5(n,e,t="/"){return b$(n,e,t,!1)}function b$(n,e,t,r){let i=typeof e=="string"?cy(e):e,s=sh(i.pathname||"/",t);if(s==null)return null;let o=t5(n);S$(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=N$(s);a=D$(o[l],u,r)}return a}function t5(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Lr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=yc([r,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(Lr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),t5(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:k$(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of n5(s.path))i(s,o,l)}),e}function n5(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=n5(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function S$(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:O$(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var T$=/^:[\w-]+$/,C$=3,M$=2,R$=1,P$=10,I$=-2,ZO=n=>n==="*";function k$(n,e){let t=n.split("/"),r=t.length;return t.some(ZO)&&(r+=I$),e&&(r+=M$),t.filter(i=>!ZO(i)).reduce((i,s)=>i+(T$.test(s)?C$:s===""?R$:P$),r)}function O$(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function D$(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",f=oA({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=oA({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:yc([s,f.pathname]),pathnameBase:j$(yc([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=yc([s,f.pathnameBase]))}return o}function oA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=L$(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:f},h)=>{if(c==="*"){let g=a[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function L$(n,e=!1,t=!0){yl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function N$(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function sh(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function B$(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?cy(n):n;return{pathname:t?t.startsWith("/")?t:F$(t,e):e,search:V$(r),hash:z$(i)}}function F$(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function sT(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function U$(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function JP(n){let e=U$(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function XP(n,e,t,r=!1){let i;typeof n=="string"?i=cy(n):(i={...n},Lr(!i.pathname||!i.pathname.includes("?"),sT("?","pathname","search",i)),Lr(!i.pathname||!i.pathname.includes("#"),sT("#","pathname","hash",i)),Lr(!i.search||!i.search.includes("#"),sT("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=B$(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var yc=n=>n.join("/").replace(/\/\/+/g,"/"),j$=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),V$=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,z$=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function H$(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var r5=["POST","PUT","PATCH","DELETE"];new Set(r5);var G$=["GET",...r5];new Set(G$);var fy=W.createContext(null);fy.displayName="DataRouter";var $E=W.createContext(null);$E.displayName="DataRouterState";var i5=W.createContext({isTransitioning:!1});i5.displayName="ViewTransition";var q$=W.createContext(new Map);q$.displayName="Fetchers";var W$=W.createContext(null);W$.displayName="Await";var El=W.createContext(null);El.displayName="Navigation";var T0=W.createContext(null);T0.displayName="Location";var Ra=W.createContext({outlet:null,matches:[],isDataRoute:!1});Ra.displayName="Route";var YP=W.createContext(null);YP.displayName="RouteError";function $$(n,{relative:e}={}){Lr(hy(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=W.useContext(El),{hash:i,pathname:s,search:o}=C0(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:yc([t,s])),r.createHref({pathname:a,search:o,hash:i})}function hy(){return W.useContext(T0)!=null}function Nc(){return Lr(hy(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(T0).location}var s5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o5(n){W.useContext(El).static||W.useLayoutEffect(n)}function _h(){let{isDataRoute:n}=W.useContext(Ra);return n?lK():K$()}function K$(){Lr(hy(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(fy),{basename:e,navigator:t}=W.useContext(El),{matches:r}=W.useContext(Ra),{pathname:i}=Nc(),s=JSON.stringify(JP(r)),o=W.useRef(!1);return o5(()=>{o.current=!0}),W.useCallback((l,u={})=>{if(yl(o.current,s5),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=XP(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:yc([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,s,i,n])}var J$=W.createContext(null);function X$(n){let e=W.useContext(Ra).outlet;return e&&W.createElement(J$.Provider,{value:n},e)}function a5(){let{matches:n}=W.useContext(Ra),e=n[n.length-1];return e?e.params:{}}function C0(n,{relative:e}={}){let{matches:t}=W.useContext(Ra),{pathname:r}=Nc(),i=JSON.stringify(JP(t));return W.useMemo(()=>XP(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Y$(n,e){return l5(n,e)}function l5(n,e,t,r){var v;Lr(hy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=W.useContext(El),{matches:s}=W.useContext(Ra),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let A=c&&c.path||"";u5(l,!c||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let f=Nc(),h;if(e){let A=typeof e=="string"?cy(e):e;Lr(u==="/"||((v=A.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${A.pathname}" was given in the \`location\` prop.`),h=A}else h=f;let p=h.pathname||"/",g=p;if(u!=="/"){let A=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let w=e5(n,{pathname:g});yl(c||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),yl(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=nK(w&&w.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:yc([u,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:yc([u,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,t,r);return e&&_?W.createElement(T0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},_):_}function Q$(){let n=aK(),e=H$(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:s},"ErrorBoundary")," or"," ",W.createElement("code",{style:s},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,o)}var Z$=W.createElement(Q$,null),eK=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?W.createElement(Ra.Provider,{value:this.props.routeContext},W.createElement(YP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tK({routeContext:n,match:e,children:t}){let r=W.useContext(fy);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Ra.Provider,{value:n},t)}function nK(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Lr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:f}=t,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let f,h=!1,p=null,g=null;t&&(f=s&&u.route.id?s[u.route.id]:void 0,p=u.route.errorElement||Z$,o&&(a<0&&c===0?(u5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):a===c&&(h=!0,g=u.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,c+1)),_=()=>{let v;return f?v=p:h?v=g:u.route.Component?v=W.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=l,W.createElement(tK,{match:u,routeContext:{outlet:l,matches:w,isDataRoute:t!=null},children:v})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?W.createElement(eK,{location:t.location,revalidation:t.revalidation,component:p,error:f,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}function QP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rK(n){let e=W.useContext(fy);return Lr(e,QP(n)),e}function iK(n){let e=W.useContext($E);return Lr(e,QP(n)),e}function sK(n){let e=W.useContext(Ra);return Lr(e,QP(n)),e}function ZP(n){let e=sK(n),t=e.matches[e.matches.length-1];return Lr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oK(){return ZP("useRouteId")}function aK(){var r;let n=W.useContext(YP),e=iK("useRouteError"),t=ZP("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function lK(){let{router:n}=rK("useNavigate"),e=ZP("useNavigate"),t=W.useRef(!1);return o5(()=>{t.current=!0}),W.useCallback(async(i,s={})=>{yl(t.current,s5),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var eD={};function u5(n,e,t){!e&&!eD[n]&&(eD[n]=!0,yl(!1,t))}W.memo(uK);function uK({routes:n,future:e,state:t}){return l5(n,void 0,t,e)}function i1({to:n,replace:e,state:t,relative:r}){Lr(hy(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=W.useContext(El);yl(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=W.useContext(Ra),{pathname:o}=Nc(),a=_h(),l=XP(n,JP(s),o,r==="path"),u=JSON.stringify(l);return W.useEffect(()=>{a(JSON.parse(u),{replace:e,state:t,relative:r})},[a,u,r,e,t]),null}function c5(n){return X$(n.context)}function xr(n){Lr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cK({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Lr(!hy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=W.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=cy(t));let{pathname:l="/",search:u="",hash:c="",state:f=null,key:h="default"}=t,p=W.useMemo(()=>{let g=sh(l,o);return g==null?null:{location:{pathname:g,search:u,hash:c,state:f,key:h},navigationType:r}},[o,l,u,c,f,h,r]);return yl(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:W.createElement(El.Provider,{value:a},W.createElement(T0.Provider,{children:e,value:p}))}function fK({children:n,location:e}){return Y$(nR(n),e)}function nR(n,e=[]){let t=[];return W.Children.forEach(n,(r,i)=>{if(!W.isValidElement(r))return;let s=[...e,i];if(r.type===W.Fragment){t.push.apply(t,nR(r.props.children,s));return}Lr(r.type===xr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=nR(r.props.children,s)),t.push(o)}),t}var Dw="get",Lw="application/x-www-form-urlencoded";function KE(n){return n!=null&&typeof n.tagName=="string"}function hK(n){return KE(n)&&n.tagName.toLowerCase()==="button"}function dK(n){return KE(n)&&n.tagName.toLowerCase()==="form"}function pK(n){return KE(n)&&n.tagName.toLowerCase()==="input"}function mK(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function gK(n,e){return n.button===0&&(!e||e==="_self")&&!mK(n)}var s1=null;function yK(){if(s1===null)try{new FormData(document.createElement("form"),0),s1=!1}catch{s1=!0}return s1}var vK=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oT(n){return n!=null&&!vK.has(n)?(yl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lw}"`),null):n}function _K(n,e){let t,r,i,s,o;if(dK(n)){let a=n.getAttribute("action");r=a?sh(a,e):null,t=n.getAttribute("method")||Dw,i=oT(n.getAttribute("enctype"))||Lw,s=new FormData(n)}else if(hK(n)||pK(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?sh(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Dw,i=oT(n.getAttribute("formenctype"))||oT(a.getAttribute("enctype"))||Lw,s=new FormData(a,n),!yK()){let{name:u,type:c,value:f}=n;if(c==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(KE(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Dw,r=null,i=Lw,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function eI(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function xK(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wK(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function AK(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await xK(s,t);return o.links?o.links():[]}return[]}));return TK(r.flat(1).filter(wK).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function tD(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var f;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function EK(n,e){return bK(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function bK(n){return[...new Set(n)]}function SK(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function TK(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let s=JSON.stringify(SK(i));return t.has(s)||(t.add(s),r.push({key:s,link:i})),r},[])}function CK(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function MK(){let n=W.useContext(fy);return eI(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RK(){let n=W.useContext($E);return eI(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var tI=W.createContext(void 0);tI.displayName="FrameworkContext";function f5(){let n=W.useContext(tI);return eI(n,"You must render this element inside a <HydratedRouter> element"),n}function PK(n,e){let t=W.useContext(tI),[r,i]=W.useState(!1),[s,o]=W.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:f}=e,h=W.useRef(null);W.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let w=v=>{v.forEach(A=>{o(A.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return h.current&&_.observe(h.current),()=>{_.disconnect()}}},[n]),W.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let p=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,h,{}]:[s,h,{onFocus:xv(a,p),onBlur:xv(l,g),onMouseEnter:xv(u,p),onMouseLeave:xv(c,g),onTouchStart:xv(f,p)}]:[!1,h,{}]}function xv(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function IK({page:n,...e}){let{router:t}=MK(),r=W.useMemo(()=>e5(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?W.createElement(OK,{page:n,matches:r,...e}):null}function kK(n){let{manifest:e,routeModules:t}=f5(),[r,i]=W.useState([]);return W.useEffect(()=>{let s=!1;return AK(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function OK({page:n,matches:e,...t}){let r=Nc(),{manifest:i,routeModules:s}=f5(),{loaderData:o,matches:a}=RK(),l=W.useMemo(()=>tD(n,e,a,i,r,"data"),[n,e,a,i,r]),u=W.useMemo(()=>tD(n,e,a,i,r,"assets"),[n,e,a,i,r]),c=W.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let p=new Set,g=!1;if(e.forEach(_=>{var A;let v=i.routes[_.route.id];!v||!v.hasLoader||(!l.some(S=>S.route.id===_.route.id)&&_.route.id in o&&((A=s[_.route.id])!=null&&A.shouldRevalidate)||v.hasClientLoader?g=!0:p.add(_.route.id))}),p.size===0)return[];let w=CK(n);return g&&p.size>0&&w.searchParams.set("_routes",e.filter(_=>p.has(_.route.id)).map(_=>_.route.id).join(",")),[w.pathname+w.search]},[o,r,i,l,e,n,s]),f=W.useMemo(()=>EK(u,i),[u,i]),h=kK(u);return W.createElement(W.Fragment,null,c.map(p=>W.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),f.map(p=>W.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),h.map(({key:p,link:g})=>W.createElement("link",{key:p,...g})))}function DK(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var h5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{h5&&(window.__reactRouterVersion="7.1.3")}catch{}function LK({basename:n,children:e,window:t}){let r=W.useRef();r.current==null&&(r.current=w$({window:t,v5Compat:!0}));let i=r.current,[s,o]=W.useState({action:i.action,location:i.location}),a=W.useCallback(l=>{W.startTransition(()=>o(l))},[o]);return W.useLayoutEffect(()=>i.listen(a),[i,a]),W.createElement(cK,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var d5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ta=W.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f,...h},p){let{basename:g}=W.useContext(El),w=typeof u=="string"&&d5.test(u),_,v=!1;if(typeof u=="string"&&w&&(_=u,h5))try{let O=new URL(window.location.href),M=u.startsWith("//")?new URL(O.protocol+u):new URL(u),D=sh(M.pathname,g);M.origin===O.origin&&D!=null?u=D+M.search+M.hash:v=!0}catch{yl(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=$$(u,{relative:i}),[S,b,C]=PK(r,h),L=UK(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:f});function R(O){e&&e(O),O.defaultPrevented||L(O)}let k=W.createElement("a",{...h,...C,href:_||A,onClick:v||s?e:R,ref:DK(p,b),target:l,"data-discover":!w&&t==="render"?"true":void 0});return S&&!w?W.createElement(W.Fragment,null,k,W.createElement(IK,{page:A})):k});Ta.displayName="Link";var NK=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let f=C0(o,{relative:u.relative}),h=Nc(),p=W.useContext($E),{navigator:g,basename:w}=W.useContext(El),_=p!=null&&GK(f)&&a===!0,v=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,A=h.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(A=A.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&w&&(S=sh(S,w)||S);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let C=A===v||!i&&A.startsWith(v)&&A.charAt(b)==="/",L=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),R={isActive:C,isPending:L,isTransitioning:_},k=C?e:void 0,O;typeof r=="function"?O=r(R):O=[r,C?"active":null,L?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let M=typeof s=="function"?s(R):s;return W.createElement(Ta,{...u,"aria-current":k,className:O,ref:c,style:M,to:o,viewTransition:a},typeof l=="function"?l(R):l)});NK.displayName="NavLink";var BK=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=Dw,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:f,...h},p)=>{let g=zK(),w=HK(a,{relative:u}),_=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&d5.test(a),A=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let b=S.nativeEvent.submitter,C=(b==null?void 0:b.getAttribute("formmethod"))||o;g(b||S.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:f})};return W.createElement("form",{ref:p,method:_,action:w,onSubmit:r?l:A,...h,"data-discover":!v&&n==="render"?"true":void 0})});BK.displayName="Form";function FK(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p5(n){let e=W.useContext(fy);return Lr(e,FK(n)),e}function UK(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=_h(),l=Nc(),u=C0(n,{relative:s});return W.useCallback(c=>{if(gK(c,e)){c.preventDefault();let f=t!==void 0?t:q_(l)===q_(u);a(n,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}var jK=0,VK=()=>`__${String(++jK)}__`;function zK(){let{router:n}=p5("useSubmit"),{basename:e}=W.useContext(El),t=oK();return W.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=_K(r,e);if(i.navigate===!1){let c=i.fetcherKey||VK();await n.fetch(c,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function HK(n,{relative:e}={}){let{basename:t}=W.useContext(El),r=W.useContext(Ra);Lr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...C0(n||".",{relative:e})},o=Nc();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:yc([t,s.pathname])),q_(s)}function GK(n,e={}){let t=W.useContext(i5);Lr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=p5("useViewTransitionState"),i=C0(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=sh(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=sh(t.nextLocation.pathname,r)||t.nextLocation.pathname;return oA(i.pathname,o)!=null||oA(i.pathname,s)!=null}new TextEncoder;var m5=KP();const qK=Ma(m5);var nD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},WK=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],a=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},y5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,a=o?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let h=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(h=64)),r.push(t[c],t[f],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(g5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new $K;const h=s<<2|a>>4;if(r.push(h),u!==64){const p=a<<4&240|u>>2;if(r.push(p),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KK=function(n){const e=g5(n);return y5.encodeByteArray(e,!0)},aA=function(n){return KK(n).replace(/\./g,"")},v5=function(n){try{return y5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XK=()=>JK().__FIREBASE_DEFAULTS__,YK=()=>{if(typeof process>"u"||typeof nD>"u")return;const n=nD.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&v5(n[1]);return e&&JSON.parse(e)},JE=()=>{try{return XK()||YK()||QK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_5=n=>{var e,t;return(t=(e=JE())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},x5=n=>{const e=_5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},w5=()=>{var n;return(n=JE())===null||n===void 0?void 0:n.config},A5=n=>{var e;return(e=JE())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZK=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[aA(JSON.stringify(t)),aA(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eJ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hs())}function tJ(){var n;const e=(n=JE())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nJ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rJ(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iJ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sJ(){const n=Hs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oJ(){return!tJ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aJ(){try{return typeof indexedDB=="object"}catch{return!1}}function lJ(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJ="FirebaseError";class cu extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uJ,Object.setPrototypeOf(this,cu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M0.prototype.create)}}class M0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?cJ(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new cu(i,a,r)}}function cJ(n,e){return n.replace(fJ,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const fJ=/\{\$([^}]+)}/g;function hJ(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lA(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(rD(s)&&rD(o)){if(!lA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function rD(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function n_(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function r_(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dJ(n,e){const t=new pJ(n,e);return t.subscribe.bind(t)}class pJ{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mJ(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=aT),i.error===void 0&&(i.error=aT),i.complete===void 0&&(i.complete=aT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mJ(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function aT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n){return n&&n._delegate?n._delegate:n}class oh{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gJ=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ZK;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vJ(e))try{this.getOrInitializeService({instanceIdentifier:Od})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Od){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Od){return this.instances.has(e)}getOptions(e=Od){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yJ(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Od){return this.component?this.component.multipleInstances?e:Od:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yJ(n){return n===Od?void 0:n}function vJ(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gJ(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nn||(Nn={}));const xJ={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},wJ=Nn.INFO,AJ={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},EJ=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=AJ[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nI{constructor(e){this.name=e,this._logLevel=wJ,this._logHandler=EJ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xJ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const bJ=(n,e)=>e.some(t=>n instanceof t);let iD,sD;function SJ(){return iD||(iD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TJ(){return sD||(sD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b5=new WeakMap,rR=new WeakMap,S5=new WeakMap,lT=new WeakMap,rI=new WeakMap;function CJ(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Yf(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&b5.set(t,n)}).catch(()=>{}),rI.set(e,n),e}function MJ(n){if(rR.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});rR.set(n,e)}let iR={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rR.get(n);if(e==="objectStoreNames")return n.objectStoreNames||S5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yf(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RJ(n){iR=n(iR)}function PJ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(uT(this),e,...t);return S5.set(r,e.sort?e.sort():[e]),Yf(r)}:TJ().includes(n)?function(...e){return n.apply(uT(this),e),Yf(b5.get(this))}:function(...e){return Yf(n.apply(uT(this),e))}}function IJ(n){return typeof n=="function"?PJ(n):(n instanceof IDBTransaction&&MJ(n),bJ(n,SJ())?new Proxy(n,iR):n)}function Yf(n){if(n instanceof IDBRequest)return CJ(n);if(lT.has(n))return lT.get(n);const e=IJ(n);return e!==n&&(lT.set(n,e),rI.set(e,n)),e}const uT=n=>rI.get(n);function kJ(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(n,e),a=Yf(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Yf(o.result),l.oldVersion,l.newVersion,Yf(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const OJ=["get","getKey","getAll","getAllKeys","count"],DJ=["put","add","delete","clear"],cT=new Map;function oD(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cT.get(e))return cT.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=DJ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OJ.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&l.done]))[0]};return cT.set(e,s),s}RJ(n=>({...n,get:(e,t,r)=>oD(e,t)||n.get(e,t,r),has:(e,t)=>!!oD(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NJ(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function NJ(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sR="@firebase/app",aD="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new nI("@firebase/app"),BJ="@firebase/app-compat",FJ="@firebase/analytics-compat",UJ="@firebase/analytics",jJ="@firebase/app-check-compat",VJ="@firebase/app-check",zJ="@firebase/auth",HJ="@firebase/auth-compat",GJ="@firebase/database",qJ="@firebase/data-connect",WJ="@firebase/database-compat",$J="@firebase/functions",KJ="@firebase/functions-compat",JJ="@firebase/installations",XJ="@firebase/installations-compat",YJ="@firebase/messaging",QJ="@firebase/messaging-compat",ZJ="@firebase/performance",eX="@firebase/performance-compat",tX="@firebase/remote-config",nX="@firebase/remote-config-compat",rX="@firebase/storage",iX="@firebase/storage-compat",sX="@firebase/firestore",oX="@firebase/vertexai",aX="@firebase/firestore-compat",lX="firebase",uX="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="[DEFAULT]",cX={[sR]:"fire-core",[BJ]:"fire-core-compat",[UJ]:"fire-analytics",[FJ]:"fire-analytics-compat",[VJ]:"fire-app-check",[jJ]:"fire-app-check-compat",[zJ]:"fire-auth",[HJ]:"fire-auth-compat",[GJ]:"fire-rtdb",[qJ]:"fire-data-connect",[WJ]:"fire-rtdb-compat",[$J]:"fire-fn",[KJ]:"fire-fn-compat",[JJ]:"fire-iid",[XJ]:"fire-iid-compat",[YJ]:"fire-fcm",[QJ]:"fire-fcm-compat",[ZJ]:"fire-perf",[eX]:"fire-perf-compat",[tX]:"fire-rc",[nX]:"fire-rc-compat",[rX]:"fire-gcs",[iX]:"fire-gcs-compat",[sX]:"fire-fst",[aX]:"fire-fst-compat",[oX]:"fire-vertex","fire-js":"fire-js",[lX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map,fX=new Map,aR=new Map;function lD(n,e){try{n.container.addComponent(e)}catch(t){Cc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function cp(n){const e=n.name;if(aR.has(e))return Cc.debug(`There were multiple attempts to register component ${e}.`),!1;aR.set(e,n);for(const t of uA.values())lD(t,n);for(const t of fX.values())lD(t,n);return!0}function XE(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $l(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qf=new M0("app","Firebase",hX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=uX;function T5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:oR,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qf.create("bad-app-name",{appName:String(i)});if(t||(t=w5()),!t)throw Qf.create("no-options");const s=uA.get(i);if(s){if(lA(t,s.options)&&lA(r,s.config))return s;throw Qf.create("duplicate-app",{appName:i})}const o=new _J(i);for(const l of aR.values())o.addComponent(l);const a=new dX(t,r,o);return uA.set(i,a),a}function iI(n=oR){const e=uA.get(n);if(!e&&n===oR&&w5())return T5();if(!e)throw Qf.create("no-app",{appName:n});return e}function Kl(n,e,t){var r;let i=(r=cX[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cc.warn(a.join(" "));return}cp(new oh(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pX="firebase-heartbeat-database",mX=1,W_="firebase-heartbeat-store";let fT=null;function C5(){return fT||(fT=kJ(pX,mX,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(W_)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qf.create("idb-open",{originalErrorMessage:n.message})})),fT}async function gX(n){try{const t=(await C5()).transaction(W_),r=await t.objectStore(W_).get(M5(n));return await t.done,r}catch(e){if(e instanceof cu)Cc.warn(e.message);else{const t=Qf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cc.warn(t.message)}}}async function uD(n,e){try{const r=(await C5()).transaction(W_,"readwrite");await r.objectStore(W_).put(e,M5(n)),await r.done}catch(t){if(t instanceof cu)Cc.warn(t.message);else{const r=Qf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cc.warn(r.message)}}}function M5(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yX=1024,vX=30*24*60*60*1e3;class _X{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wX(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=cD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vX}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Cc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cD(),{heartbeatsToSend:r,unsentEntries:i}=xX(this._heartbeatsCache.heartbeats),s=aA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Cc.warn(t),""}}}function cD(){return new Date().toISOString().substring(0,10)}function xX(n,e=yX){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),fD(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class wX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aJ()?lJ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gX(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return uD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return uD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function fD(n){return aA(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(n){cp(new oh("platform-logger",e=>new LJ(e),"PRIVATE")),cp(new oh("heartbeat",e=>new _X(e),"PRIVATE")),Kl(sR,aD,n),Kl(sR,aD,"esm2017"),Kl("fire-js","")}AX("");function sI(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Rp(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function R5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EX=R5,P5=new M0("auth","Firebase",R5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new nI("@firebase/auth");function bX(n,...e){cA.logLevel<=Nn.WARN&&cA.warn(`Auth (${Mp}): ${n}`,...e)}function Nw(n,...e){cA.logLevel<=Nn.ERROR&&cA.error(`Auth (${Mp}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n,...e){throw oI(n,...e)}function Jl(n,...e){return oI(n,...e)}function I5(n,e,t){const r=Object.assign(Object.assign({},EX()),{[e]:t});return new M0("auth","Firebase",r).create(e,{appName:n.name})}function vc(n){return I5(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oI(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return P5.create(n,...e)}function Qt(n,e,...t){if(!n)throw oI(e,...t)}function hc(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nw(e),new Error(e)}function Mc(n,e){n||hc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SX(){return hD()==="http:"||hD()==="https:"}function hD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SX()||rJ()||"connection"in navigator)?navigator.onLine:!0}function CX(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mc(t>e,"Short delay should be less than long delay!"),this.isMobile=eJ()||iJ()}get(){return TX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e){Mc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RX=new P0(3e4,6e4);function Bc(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function bl(n,e,t,r,i={}){return O5(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=R0(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:l},s);return nJ()||(u.referrerPolicy="no-referrer"),k5.fetch()(D5(n,n.config.apiHost,t,a),u)})}async function O5(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},MX),e);try{const i=new IX(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw o1(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw o1(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw o1(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw o1(n,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw I5(n,c,u);vl(n,c)}}catch(i){if(i instanceof cu)throw i;vl(n,"network-request-failed",{message:String(i)})}}async function I0(n,e,t,r,i={}){const s=await bl(n,e,t,r,i);return"mfaPendingCredential"in s&&vl(n,"multi-factor-auth-required",{_serverResponse:s}),s}function D5(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?aI(n.config,i):`${n.config.apiScheme}://${i}`}function PX(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jl(this.auth,"network-request-failed")),RX.get())})}}function o1(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Jl(n,e,r);return i.customData._tokenResponse=t,i}function dD(n){return n!==void 0&&n.enterprise!==void 0}class kX{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PX(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OX(n,e){return bl(n,"GET","/v2/recaptchaConfig",Bc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DX(n,e){return bl(n,"POST","/v1/accounts:delete",e)}async function L5(n,e){return bl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function N5(n,e=!1){const t=Pi(n),r=await t.getIdToken(e),i=lI(r);Qt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:__(hT(i.auth_time)),issuedAtTime:__(hT(i.iat)),expirationTime:__(hT(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hT(n){return Number(n)*1e3}function lI(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Nw("JWT malformed, contained fewer than 3 sections"),null;try{const i=v5(t);return i?JSON.parse(i):(Nw("Failed to decode base64 JWT payload"),null)}catch(i){return Nw("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function pD(n){const e=lI(n);return Qt(e,"internal-error"),Qt(typeof e.exp<"u","internal-error"),Qt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof cu&&LX(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=__(this.lastLoginAt),this.creationTime=__(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n){var e;const t=n.auth,r=await n.getIdToken(),i=await fp(n,L5(t,{idToken:r}));Qt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?B5(s.providerUserInfo):[],a=FX(n.providerData,o),l=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uR(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,f)}async function BX(n){const e=Pi(n);await fA(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FX(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function B5(n){return n.map(e=>{var{providerId:t}=e,r=sI(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UX(n,e){const t=await O5(n,{},async()=>{const r=R0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=D5(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",k5.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jX(n,e){return bl(n,"POST","/v2/accounts:revokeToken",Bc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qt(e.idToken,"internal-error"),Qt(typeof e.idToken<"u","internal-error"),Qt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qt(e.length!==0,"internal-error");const t=pD(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await UX(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Eg;return r&&(Qt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Qt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Qt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eg,this.toJSON())}_performRefresh(){return hc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(n,e){Qt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dc{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=sI(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uR(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await fp(this,this.stsTokenManager.getToken(this.auth,e));return Qt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return N5(this,e)}reload(){return BX(this)}_assign(e){this!==e&&(Qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await fA(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($l(this.auth.app))return Promise.reject(vc(this.auth));const e=await this.getIdToken();return await fp(this,DX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,l,u,c;const f=(r=t.displayName)!==null&&r!==void 0?r:void 0,h=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=t.photoURL)!==null&&o!==void 0?o:void 0,w=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=t.createdAt)!==null&&u!==void 0?u:void 0,A=(c=t.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:S,emailVerified:b,isAnonymous:C,providerData:L,stsTokenManager:R}=t;Qt(S&&R,e,"internal-error");const k=Eg.fromJSON(this.name,R);Qt(typeof S=="string",e,"internal-error"),Ef(f,e.name),Ef(h,e.name),Qt(typeof b=="boolean",e,"internal-error"),Qt(typeof C=="boolean",e,"internal-error"),Ef(p,e.name),Ef(g,e.name),Ef(w,e.name),Ef(_,e.name),Ef(v,e.name),Ef(A,e.name);const O=new dc({uid:S,auth:e,email:h,emailVerified:b,displayName:f,isAnonymous:C,photoURL:g,phoneNumber:p,tenantId:w,stsTokenManager:k,createdAt:v,lastLoginAt:A});return L&&Array.isArray(L)&&(O.providerData=L.map(M=>Object.assign({},M))),_&&(O._redirectEventId=_),O}static async _fromIdTokenResponse(e,t,r=!1){const i=new Eg;i.updateFromServerResponse(t);const s=new dc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fA(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Qt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?B5(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Eg;a.updateFromIdToken(r);const l=new dc({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new uR(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Map;function pc(n){Mc(n instanceof Function,"Expected a class definition");let e=mD.get(n);return e?(Mc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mD.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}F5.type="NONE";const gD=F5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(n,e,t){return`firebase:${n}:${e}:${t}`}class bg{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Bw(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bw("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bg(pc(gD),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||pc(gD);const o=Bw(r,e.config.apiKey,e.name);let a=null;for(const u of t)try{const c=await u._get(o);if(c){const f=dc._fromJSON(e,c);u!==s&&(a=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bg(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new bg(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G5(e))return"Blackberry";if(q5(e))return"Webos";if(j5(e))return"Safari";if((e.includes("chrome/")||V5(e))&&!e.includes("edge/"))return"Chrome";if(H5(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function U5(n=Hs()){return/firefox\//i.test(n)}function j5(n=Hs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function V5(n=Hs()){return/crios\//i.test(n)}function z5(n=Hs()){return/iemobile/i.test(n)}function H5(n=Hs()){return/android/i.test(n)}function G5(n=Hs()){return/blackberry/i.test(n)}function q5(n=Hs()){return/webos/i.test(n)}function uI(n=Hs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function VX(n=Hs()){var e;return uI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zX(){return sJ()&&document.documentMode===10}function W5(n=Hs()){return uI(n)||H5(n)||q5(n)||G5(n)||/windows phone/i.test(n)||z5(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(n,e=[]){let t;switch(n){case"Browser":t=yD(Hs());break;case"Worker":t=`${yD(Hs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GX(n,e={}){return bl(n,"GET","/v2/passwordPolicy",Bc(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=6;class WX{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:qX,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $X{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vD(this),this.idTokenSubscription=new vD(this),this.beforeStateQueue=new HX(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pc(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await bg.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await L5(this,{idToken:e}),r=await dc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($l(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await fA(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($l(this.app))return Promise.reject(vc(this));const t=e?Pi(e):null;return t&&Qt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $l(this.app)?Promise.reject(vc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $l(this.app)?Promise.reject(vc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GX(this),t=new WX(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new M0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pc(e)||this._popupRedirectResolver;Qt(t,this,"argument-error"),this.redirectPersistenceManager=await bg.create(this,[pc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&bX(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pp(n){return Pi(n)}class vD{constructor(e){this.auth=e,this.observer=null,this.addObserver=dJ(t=>this.observer=t)}get next(){return Qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KX(n){YE=n}function K5(n){return YE.loadJS(n)}function JX(){return YE.recaptchaEnterpriseScript}function XX(){return YE.gapiScript}function YX(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class QX{constructor(){this.enterprise=new ZX}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZX{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eY="recaptcha-enterprise",J5="NO_RECAPTCHA";class tY{constructor(e){this.type=eY,this.auth=Pp(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{OX(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new kX(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;dD(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(J5)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QX().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&dD(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=JX();l.length!==0&&(l+=a),K5(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function _D(n,e,t,r=!1,i=!1){const s=new tY(n);let o;if(i)o=J5;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function cR(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await _D(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _D(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nY(n,e){const t=XE(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(lA(s,e??{}))return i;vl(i,"already-initialized")}return t.initialize({options:e})}function rY(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(pc);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iY(n,e,t){const r=Pp(n);Qt(r._canInitEmulator,r,"emulator-config-failed"),Qt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=X5(e),{host:o,port:a}=sY(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),oY()}function X5(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sY(n){const e=X5(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xD(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xD(o)}}}function xD(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oY(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hc("not implemented")}_getIdTokenResponse(e){return hc("not implemented")}_linkToIdToken(e,t){return hc("not implemented")}_getReauthenticationResolver(e){return hc("not implemented")}}async function aY(n,e){return bl(n,"POST","/v1/accounts:update",e)}async function lY(n,e){return bl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uY(n,e){return I0(n,"POST","/v1/accounts:signInWithPassword",Bc(n,e))}async function cY(n,e){return bl(n,"POST","/v1/accounts:sendOobCode",Bc(n,e))}async function fY(n,e){return cY(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hY(n,e){return I0(n,"POST","/v1/accounts:signInWithEmailLink",Bc(n,e))}async function dY(n,e){return I0(n,"POST","/v1/accounts:signInWithEmailLink",Bc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_ extends cI{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new $_(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new $_(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cR(e,t,"signInWithPassword",uY);case"emailLink":return hY(e,{email:this._email,oobCode:this._password});default:vl(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cR(e,r,"signUpPassword",lY);case"emailLink":return dY(e,{idToken:t,email:this._email,oobCode:this._password});default:vl(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sg(n,e){return I0(n,"POST","/v1/accounts:signInWithIdp",Bc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pY="http://localhost";class hp extends cI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hp(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=sI(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new hp(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Sg(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Sg(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Sg(e,t)}buildRequest(){const e={requestUri:pY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=R0(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gY(n){const e=n_(r_(n)).link,t=e?n_(r_(e)).deep_link_id:null,r=n_(r_(n)).deep_link_id;return(r?n_(r_(r)).link:null)||r||t||e||n}class fI{constructor(e){var t,r,i,s,o,a;const l=n_(r_(e)),u=(t=l.apiKey)!==null&&t!==void 0?t:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,f=mY((i=l.mode)!==null&&i!==void 0?i:null);Qt(u&&c&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=gY(e);try{return new fI(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.providerId=Ip.PROVIDER_ID}static credential(e,t){return $_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=fI.parseLink(t);return Qt(r,"argument-error"),$_._fromEmailAndCode(e,r.code,r.tenantId)}}Ip.PROVIDER_ID="password";Ip.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ip.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends Y5{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends k0{constructor(){super("facebook.com")}static credential(e){return hp._fromParams({providerId:Vf.PROVIDER_ID,signInMethod:Vf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vf.credentialFromTaggedObject(e)}static credentialFromError(e){return Vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vf.credential(e.oauthAccessToken)}catch{return null}}}Vf.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vf.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends k0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hp._fromParams({providerId:zf.PROVIDER_ID,signInMethod:zf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zf.credentialFromTaggedObject(e)}static credentialFromError(e){return zf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zf.credential(t,r)}catch{return null}}}zf.GOOGLE_SIGN_IN_METHOD="google.com";zf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends k0{constructor(){super("github.com")}static credential(e){return hp._fromParams({providerId:Hf.PROVIDER_ID,signInMethod:Hf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hf.credentialFromTaggedObject(e)}static credentialFromError(e){return Hf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hf.credential(e.oauthAccessToken)}catch{return null}}}Hf.GITHUB_SIGN_IN_METHOD="github.com";Hf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf extends k0{constructor(){super("twitter.com")}static credential(e,t){return hp._fromParams({providerId:Gf.PROVIDER_ID,signInMethod:Gf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gf.credentialFromTaggedObject(e)}static credentialFromError(e){return Gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Gf.credential(t,r)}catch{return null}}}Gf.TWITTER_SIGN_IN_METHOD="twitter.com";Gf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yY(n,e){return I0(n,"POST","/v1/accounts:signUp",Bc(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await dc._fromIdTokenResponse(e,r,i),o=wD(r);return new dp({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=wD(r);return new dp({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function wD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA extends cu{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hA.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new hA(e,t,r,i)}}function Q5(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hA._fromErrorAndOperation(n,s,e,r):s})}async function vY(n,e,t=!1){const r=await fp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return dp._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z5(n,e,t=!1){const{auth:r}=n;if($l(r.app))return Promise.reject(vc(r));const i="reauthenticate";try{const s=await fp(n,Q5(r,i,e,n),t);Qt(s.idToken,r,"internal-error");const o=lI(s.idToken);Qt(o,r,"internal-error");const{sub:a}=o;return Qt(n.uid===a,r,"user-mismatch"),dp._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vl(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n,e,t=!1){if($l(n.app))return Promise.reject(vc(n));const r="signIn",i=await Q5(n,r,e),s=await dp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function _Y(n,e){return eV(Pp(n),e)}async function xY(n,e){return Z5(Pi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n){const e=Pp(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wY(n,e,t){if($l(n.app))return Promise.reject(vc(n));const r=Pp(n),o=await cR(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yY).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tV(n),l}),a=await dp._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function AY(n,e,t){return $l(n.app)?Promise.reject(vc(n)):_Y(Pi(n),Ip.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tV(n),r})}async function EY(n,e){const t=Pi(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:s}=await fY(t.auth,i);s!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bY(n,e){return bl(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Pi(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await fp(r,bY(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function SY(n,e){return TY(Pi(n),null,e)}async function TY(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(s.password=t);const o=await fp(n,aY(r,s));await n._updateTokensIfNecessary(o,!0)}function CY(n,e,t,r){return Pi(n).onIdTokenChanged(e,t,r)}function MY(n,e,t){return Pi(n).beforeAuthStateChanged(e,t)}const dA="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dA,"1"),this.storage.removeItem(dA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RY=1e3,PY=10;class iV extends rV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);zX()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PY):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}iV.type="LOCAL";const IY=iV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV extends rV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sV.type="SESSION";const oV=sV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kY(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new QE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(t.origin,s)),l=await kY(a);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}QE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=hI("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(){return window}function DY(n){Xl().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){return typeof Xl().WorkerGlobalScope<"u"&&typeof Xl().importScripts=="function"}async function LY(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NY(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BY(){return aV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firebaseLocalStorageDb",FY=1,pA="firebaseLocalStorage",uV="fbase_key";class O0{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ZE(n,e){return n.transaction([pA],e?"readwrite":"readonly").objectStore(pA)}function UY(){const n=indexedDB.deleteDatabase(lV);return new O0(n).toPromise()}function fR(){const n=indexedDB.open(lV,FY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(pA,{keyPath:uV})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(pA)?e(r):(r.close(),await UY(),e(await fR()))})})}async function AD(n,e,t){const r=ZE(n,!0).put({[uV]:e,value:t});return new O0(r).toPromise()}async function jY(n,e){const t=ZE(n,!1).get(e),r=await new O0(t).toPromise();return r===void 0?null:r.value}function ED(n,e){const t=ZE(n,!0).delete(e);return new O0(t).toPromise()}const VY=800,zY=3;class cV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fR(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zY)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=QE._getInstance(BY()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await LY(),!this.activeServiceWorker)return;this.sender=new OY(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NY()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fR();return await AD(e,dA,"1"),await ED(e,dA),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>AD(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jY(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ED(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ZE(i,!1).getAll();return new O0(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cV.type="LOCAL";const HY=cV;new P0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GY(n,e){return e?pc(e):(Qt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI extends cI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Sg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Sg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qY(n){return eV(n.auth,new dI(n),n.bypassAuthState)}function WY(n){const{auth:e,user:t}=n;return Qt(t,e,"internal-error"),Z5(t,new dI(n),n.bypassAuthState)}async function $Y(n){const{auth:e,user:t}=n;return Qt(t,e,"internal-error"),vY(t,new dI(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qY;case"linkViaPopup":case"linkViaRedirect":return $Y;case"reauthViaPopup":case"reauthViaRedirect":return WY;default:vl(this.auth,"internal-error")}}resolve(e){Mc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=new P0(2e3,1e4);class hg extends fV{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,hg.currentPopupAction&&hg.currentPopupAction.cancel(),hg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qt(e,this.auth,"internal-error"),e}async onExecution(){Mc(this.filter.length===1,"Popup operations only handle one event");const e=hI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KY.get())};e()}}hg.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY="pendingRedirect",Fw=new Map;class XY extends fV{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Fw.get(this.auth._key());if(!e){try{const r=await YY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Fw.set(this.auth._key(),e)}return this.bypassAuthState||Fw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YY(n,e){const t=eQ(e),r=ZY(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function QY(n,e){Fw.set(n._key(),e)}function ZY(n){return pc(n._redirectPersistence)}function eQ(n){return Bw(JY,n.config.apiKey,n.name)}async function tQ(n,e,t=!1){if($l(n.app))return Promise.reject(vc(n));const r=Pp(n),i=GY(r,e),o=await new XY(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ=10*60*1e3;class rQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iQ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hV(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Jl(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(bD(e))}saveEventToCache(e){this.cachedEventUids.add(bD(e)),this.lastProcessedEventTime=Date.now()}}function bD(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hV({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iQ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hV(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sQ(n,e={}){return bl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aQ=/^https?/;async function lQ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sQ(n);for(const t of e)try{if(uQ(t))return}catch{}vl(n,"unauthorized-domain")}function uQ(n){const e=lR(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!aQ.test(t))return!1;if(oQ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cQ=new P0(3e4,6e4);function SD(){const n=Xl().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fQ(n){return new Promise((e,t)=>{var r,i,s;function o(){SD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SD(),t(Jl(n,"network-request-failed"))},timeout:cQ.get()})}if(!((i=(r=Xl().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xl().gapi)===null||s===void 0)&&s.load)o();else{const a=YX("iframefcb");return Xl()[a]=()=>{gapi.load?o():t(Jl(n,"network-request-failed"))},K5(`${XX()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Uw=null,e})}let Uw=null;function hQ(n){return Uw=Uw||fQ(n),Uw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dQ=new P0(5e3,15e3),pQ="__/auth/iframe",mQ="emulator/auth/iframe",gQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vQ(n){const e=n.config;Qt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?aI(e,mQ):`https://${n.config.authDomain}/${pQ}`,r={apiKey:e.apiKey,appName:n.name,v:Mp},i=yQ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${R0(r).slice(1)}`}async function _Q(n){const e=await hQ(n),t=Xl().gapi;return Qt(t,n,"internal-error"),e.open({where:document.body,url:vQ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gQ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jl(n,"network-request-failed"),a=Xl().setTimeout(()=>{s(o)},dQ.get());function l(){Xl().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wQ=500,AQ=600,EQ="_blank",bQ="http://localhost";class TD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SQ(n,e,t,r=wQ,i=AQ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xQ),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Hs().toLowerCase();t&&(a=V5(u)?EQ:t),U5(u)&&(e=e||bQ,l.scrollbars="yes");const c=Object.entries(l).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(VX(u)&&a!=="_self")return TQ(e||"",a),new TD(null);const f=window.open(e||"",a,c);Qt(f,n,"popup-blocked");try{f.focus()}catch{}return new TD(f)}function TQ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQ="__/auth/handler",MQ="emulator/auth/handler",RQ=encodeURIComponent("fac");async function CD(n,e,t,r,i,s){Qt(n.config.authDomain,n,"auth-domain-config-required"),Qt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mp,eventId:i};if(e instanceof Y5){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",hJ(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(e instanceof k0){const c=e.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await n._getAppCheckToken(),u=l?`#${RQ}=${encodeURIComponent(l)}`:"";return`${PQ(n)}?${R0(a).slice(1)}${u}`}function PQ({config:n}){return n.emulator?aI(n,MQ):`https://${n.authDomain}/${CQ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="webStorageSupport";class IQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oV,this._completeRedirectFn=tQ,this._overrideRedirectResult=QY}async _openPopup(e,t,r,i){var s;Mc((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await CD(e,t,r,lR(),i);return SQ(e,o,hI())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await CD(e,t,r,lR(),i);return DY(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Mc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _Q(e),r=new rQ(e);return t.register("authEvent",i=>(Qt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dT,{type:dT},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[dT];o!==void 0&&t(!!o),vl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lQ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return W5()||j5()||uI()}}const kQ=IQ;var MD="@firebase/auth",RD="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LQ(n){cp(new oh("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Qt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$5(n)},u=new $X(r,i,s,l);return rY(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cp(new oh("auth-internal",e=>{const t=Pp(e.getProvider("auth").getImmediate());return(r=>new OQ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kl(MD,RD,DQ(n)),Kl(MD,RD,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQ=5*60,BQ=A5("authIdTokenMaxAge")||NQ;let PD=null;const FQ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BQ)return;const i=t==null?void 0:t.token;PD!==i&&(PD=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function D0(n=iI()){const e=XE(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nY(n,{popupRedirectResolver:kQ,persistence:[HY,IY,oV]}),r=A5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=FQ(s.toString());MY(t,o,()=>o(t.currentUser)),CY(t,a=>o(a))}}const i=_5("auth");return i&&iY(t,`http://${i}`),t}function UQ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KX({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Jl("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",UQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LQ("Browser");var jQ="firebase",VQ="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kl(jQ,VQ,"app");var ID=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zf,dV;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,k){function O(){}O.prototype=k.prototype,R.D=k.prototype,R.prototype=new O,R.prototype.constructor=R,R.C=function(M,D,U){for(var F=Array(arguments.length-2),$=2;$<arguments.length;$++)F[$-2]=arguments[$];return k.prototype[D].apply(M,F)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,k,O){O||(O=0);var M=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)M[D]=k.charCodeAt(O++)|k.charCodeAt(O++)<<8|k.charCodeAt(O++)<<16|k.charCodeAt(O++)<<24;else for(D=0;16>D;++D)M[D]=k[O++]|k[O++]<<8|k[O++]<<16|k[O++]<<24;k=R.g[0],O=R.g[1],D=R.g[2];var U=R.g[3],F=k+(U^O&(D^U))+M[0]+3614090360&4294967295;k=O+(F<<7&4294967295|F>>>25),F=U+(D^k&(O^D))+M[1]+3905402710&4294967295,U=k+(F<<12&4294967295|F>>>20),F=D+(O^U&(k^O))+M[2]+606105819&4294967295,D=U+(F<<17&4294967295|F>>>15),F=O+(k^D&(U^k))+M[3]+3250441966&4294967295,O=D+(F<<22&4294967295|F>>>10),F=k+(U^O&(D^U))+M[4]+4118548399&4294967295,k=O+(F<<7&4294967295|F>>>25),F=U+(D^k&(O^D))+M[5]+1200080426&4294967295,U=k+(F<<12&4294967295|F>>>20),F=D+(O^U&(k^O))+M[6]+2821735955&4294967295,D=U+(F<<17&4294967295|F>>>15),F=O+(k^D&(U^k))+M[7]+4249261313&4294967295,O=D+(F<<22&4294967295|F>>>10),F=k+(U^O&(D^U))+M[8]+1770035416&4294967295,k=O+(F<<7&4294967295|F>>>25),F=U+(D^k&(O^D))+M[9]+2336552879&4294967295,U=k+(F<<12&4294967295|F>>>20),F=D+(O^U&(k^O))+M[10]+4294925233&4294967295,D=U+(F<<17&4294967295|F>>>15),F=O+(k^D&(U^k))+M[11]+2304563134&4294967295,O=D+(F<<22&4294967295|F>>>10),F=k+(U^O&(D^U))+M[12]+1804603682&4294967295,k=O+(F<<7&4294967295|F>>>25),F=U+(D^k&(O^D))+M[13]+4254626195&4294967295,U=k+(F<<12&4294967295|F>>>20),F=D+(O^U&(k^O))+M[14]+2792965006&4294967295,D=U+(F<<17&4294967295|F>>>15),F=O+(k^D&(U^k))+M[15]+1236535329&4294967295,O=D+(F<<22&4294967295|F>>>10),F=k+(D^U&(O^D))+M[1]+4129170786&4294967295,k=O+(F<<5&4294967295|F>>>27),F=U+(O^D&(k^O))+M[6]+3225465664&4294967295,U=k+(F<<9&4294967295|F>>>23),F=D+(k^O&(U^k))+M[11]+643717713&4294967295,D=U+(F<<14&4294967295|F>>>18),F=O+(U^k&(D^U))+M[0]+3921069994&4294967295,O=D+(F<<20&4294967295|F>>>12),F=k+(D^U&(O^D))+M[5]+3593408605&4294967295,k=O+(F<<5&4294967295|F>>>27),F=U+(O^D&(k^O))+M[10]+38016083&4294967295,U=k+(F<<9&4294967295|F>>>23),F=D+(k^O&(U^k))+M[15]+3634488961&4294967295,D=U+(F<<14&4294967295|F>>>18),F=O+(U^k&(D^U))+M[4]+3889429448&4294967295,O=D+(F<<20&4294967295|F>>>12),F=k+(D^U&(O^D))+M[9]+568446438&4294967295,k=O+(F<<5&4294967295|F>>>27),F=U+(O^D&(k^O))+M[14]+3275163606&4294967295,U=k+(F<<9&4294967295|F>>>23),F=D+(k^O&(U^k))+M[3]+4107603335&4294967295,D=U+(F<<14&4294967295|F>>>18),F=O+(U^k&(D^U))+M[8]+1163531501&4294967295,O=D+(F<<20&4294967295|F>>>12),F=k+(D^U&(O^D))+M[13]+2850285829&4294967295,k=O+(F<<5&4294967295|F>>>27),F=U+(O^D&(k^O))+M[2]+4243563512&4294967295,U=k+(F<<9&4294967295|F>>>23),F=D+(k^O&(U^k))+M[7]+1735328473&4294967295,D=U+(F<<14&4294967295|F>>>18),F=O+(U^k&(D^U))+M[12]+2368359562&4294967295,O=D+(F<<20&4294967295|F>>>12),F=k+(O^D^U)+M[5]+4294588738&4294967295,k=O+(F<<4&4294967295|F>>>28),F=U+(k^O^D)+M[8]+2272392833&4294967295,U=k+(F<<11&4294967295|F>>>21),F=D+(U^k^O)+M[11]+1839030562&4294967295,D=U+(F<<16&4294967295|F>>>16),F=O+(D^U^k)+M[14]+4259657740&4294967295,O=D+(F<<23&4294967295|F>>>9),F=k+(O^D^U)+M[1]+2763975236&4294967295,k=O+(F<<4&4294967295|F>>>28),F=U+(k^O^D)+M[4]+1272893353&4294967295,U=k+(F<<11&4294967295|F>>>21),F=D+(U^k^O)+M[7]+4139469664&4294967295,D=U+(F<<16&4294967295|F>>>16),F=O+(D^U^k)+M[10]+3200236656&4294967295,O=D+(F<<23&4294967295|F>>>9),F=k+(O^D^U)+M[13]+681279174&4294967295,k=O+(F<<4&4294967295|F>>>28),F=U+(k^O^D)+M[0]+3936430074&4294967295,U=k+(F<<11&4294967295|F>>>21),F=D+(U^k^O)+M[3]+3572445317&4294967295,D=U+(F<<16&4294967295|F>>>16),F=O+(D^U^k)+M[6]+76029189&4294967295,O=D+(F<<23&4294967295|F>>>9),F=k+(O^D^U)+M[9]+3654602809&4294967295,k=O+(F<<4&4294967295|F>>>28),F=U+(k^O^D)+M[12]+3873151461&4294967295,U=k+(F<<11&4294967295|F>>>21),F=D+(U^k^O)+M[15]+530742520&4294967295,D=U+(F<<16&4294967295|F>>>16),F=O+(D^U^k)+M[2]+3299628645&4294967295,O=D+(F<<23&4294967295|F>>>9),F=k+(D^(O|~U))+M[0]+4096336452&4294967295,k=O+(F<<6&4294967295|F>>>26),F=U+(O^(k|~D))+M[7]+1126891415&4294967295,U=k+(F<<10&4294967295|F>>>22),F=D+(k^(U|~O))+M[14]+2878612391&4294967295,D=U+(F<<15&4294967295|F>>>17),F=O+(U^(D|~k))+M[5]+4237533241&4294967295,O=D+(F<<21&4294967295|F>>>11),F=k+(D^(O|~U))+M[12]+1700485571&4294967295,k=O+(F<<6&4294967295|F>>>26),F=U+(O^(k|~D))+M[3]+2399980690&4294967295,U=k+(F<<10&4294967295|F>>>22),F=D+(k^(U|~O))+M[10]+4293915773&4294967295,D=U+(F<<15&4294967295|F>>>17),F=O+(U^(D|~k))+M[1]+2240044497&4294967295,O=D+(F<<21&4294967295|F>>>11),F=k+(D^(O|~U))+M[8]+1873313359&4294967295,k=O+(F<<6&4294967295|F>>>26),F=U+(O^(k|~D))+M[15]+4264355552&4294967295,U=k+(F<<10&4294967295|F>>>22),F=D+(k^(U|~O))+M[6]+2734768916&4294967295,D=U+(F<<15&4294967295|F>>>17),F=O+(U^(D|~k))+M[13]+1309151649&4294967295,O=D+(F<<21&4294967295|F>>>11),F=k+(D^(O|~U))+M[4]+4149444226&4294967295,k=O+(F<<6&4294967295|F>>>26),F=U+(O^(k|~D))+M[11]+3174756917&4294967295,U=k+(F<<10&4294967295|F>>>22),F=D+(k^(U|~O))+M[2]+718787259&4294967295,D=U+(F<<15&4294967295|F>>>17),F=O+(U^(D|~k))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+k&4294967295,R.g[1]=R.g[1]+(D+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+U&4294967295}r.prototype.u=function(R,k){k===void 0&&(k=R.length);for(var O=k-this.blockSize,M=this.B,D=this.h,U=0;U<k;){if(D==0)for(;U<=O;)i(this,R,U),U+=this.blockSize;if(typeof R=="string"){for(;U<k;)if(M[D++]=R.charCodeAt(U++),D==this.blockSize){i(this,M),D=0;break}}else for(;U<k;)if(M[D++]=R[U++],D==this.blockSize){i(this,M),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var k=1;k<R.length-8;++k)R[k]=0;var O=8*this.o;for(k=R.length-8;k<R.length;++k)R[k]=O&255,O/=256;for(this.u(R),R=Array(16),k=O=0;4>k;++k)for(var M=0;32>M;M+=8)R[O++]=this.g[k]>>>M&255;return R};function s(R,k){var O=a;return Object.prototype.hasOwnProperty.call(O,R)?O[R]:O[R]=k(R)}function o(R,k){this.h=k;for(var O=[],M=!0,D=R.length-1;0<=D;D--){var U=R[D]|0;M&&U==k||(O[D]=U,M=!1)}this.g=O}var a={};function l(R){return-128<=R&&128>R?s(R,function(k){return new o([k|0],0>k?-1:0)}):new o([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return _(u(-R));for(var k=[],O=1,M=0;R>=O;M++)k[M]=R/O|0,O*=4294967296;return new o(k,0)}function c(R,k){if(R.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(R.charAt(0)=="-")return _(c(R.substring(1),k));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(k,8)),M=f,D=0;D<R.length;D+=8){var U=Math.min(8,R.length-D),F=parseInt(R.substring(D,D+U),k);8>U?(U=u(Math.pow(k,U)),M=M.j(U).add(u(F))):(M=M.j(O),M=M.add(u(F)))}return M}var f=l(0),h=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(w(this))return-_(this).m();for(var R=0,k=1,O=0;O<this.g.length;O++){var M=this.i(O);R+=(0<=M?M:4294967296+M)*k,k*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(g(this))return"0";if(w(this))return"-"+_(this).toString(R);for(var k=u(Math.pow(R,6)),O=this,M="";;){var D=b(O,k).g;O=v(O,D.j(k));var U=((0<O.g.length?O.g[0]:O.h)>>>0).toString(R);if(O=D,g(O))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function g(R){if(R.h!=0)return!1;for(var k=0;k<R.g.length;k++)if(R.g[k]!=0)return!1;return!0}function w(R){return R.h==-1}n.l=function(R){return R=v(this,R),w(R)?-1:g(R)?0:1};function _(R){for(var k=R.g.length,O=[],M=0;M<k;M++)O[M]=~R.g[M];return new o(O,~R.h).add(h)}n.abs=function(){return w(this)?_(this):this},n.add=function(R){for(var k=Math.max(this.g.length,R.g.length),O=[],M=0,D=0;D<=k;D++){var U=M+(this.i(D)&65535)+(R.i(D)&65535),F=(U>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);M=F>>>16,U&=65535,F&=65535,O[D]=F<<16|U}return new o(O,O[O.length-1]&-2147483648?-1:0)};function v(R,k){return R.add(_(k))}n.j=function(R){if(g(this)||g(R))return f;if(w(this))return w(R)?_(this).j(_(R)):_(_(this).j(R));if(w(R))return _(this.j(_(R)));if(0>this.l(p)&&0>R.l(p))return u(this.m()*R.m());for(var k=this.g.length+R.g.length,O=[],M=0;M<2*k;M++)O[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<R.g.length;D++){var U=this.i(M)>>>16,F=this.i(M)&65535,$=R.i(D)>>>16,Z=R.i(D)&65535;O[2*M+2*D]+=F*Z,A(O,2*M+2*D),O[2*M+2*D+1]+=U*Z,A(O,2*M+2*D+1),O[2*M+2*D+1]+=F*$,A(O,2*M+2*D+1),O[2*M+2*D+2]+=U*$,A(O,2*M+2*D+2)}for(M=0;M<k;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=k;M<2*k;M++)O[M]=0;return new o(O,0)};function A(R,k){for(;(R[k]&65535)!=R[k];)R[k+1]+=R[k]>>>16,R[k]&=65535,k++}function S(R,k){this.g=R,this.h=k}function b(R,k){if(g(k))throw Error("division by zero");if(g(R))return new S(f,f);if(w(R))return k=b(_(R),k),new S(_(k.g),_(k.h));if(w(k))return k=b(R,_(k)),new S(_(k.g),k.h);if(30<R.g.length){if(w(R)||w(k))throw Error("slowDivide_ only works with positive integers.");for(var O=h,M=k;0>=M.l(R);)O=C(O),M=C(M);var D=L(O,1),U=L(M,1);for(M=L(M,2),O=L(O,2);!g(M);){var F=U.add(M);0>=F.l(R)&&(D=D.add(O),U=F),M=L(M,1),O=L(O,1)}return k=v(R,D.j(k)),new S(D,k)}for(D=f;0<=R.l(k);){for(O=Math.max(1,Math.floor(R.m()/k.m())),M=Math.ceil(Math.log(O)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=u(O),F=U.j(k);w(F)||0<F.l(R);)O-=M,U=u(O),F=U.j(k);g(U)&&(U=h),D=D.add(U),R=v(R,F)}return new S(D,R)}n.A=function(R){return b(this,R).h},n.and=function(R){for(var k=Math.max(this.g.length,R.g.length),O=[],M=0;M<k;M++)O[M]=this.i(M)&R.i(M);return new o(O,this.h&R.h)},n.or=function(R){for(var k=Math.max(this.g.length,R.g.length),O=[],M=0;M<k;M++)O[M]=this.i(M)|R.i(M);return new o(O,this.h|R.h)},n.xor=function(R){for(var k=Math.max(this.g.length,R.g.length),O=[],M=0;M<k;M++)O[M]=this.i(M)^R.i(M);return new o(O,this.h^R.h)};function C(R){for(var k=R.g.length+1,O=[],M=0;M<k;M++)O[M]=R.i(M)<<1|R.i(M-1)>>>31;return new o(O,R.h)}function L(R,k){var O=k>>5;k%=32;for(var M=R.g.length-O,D=[],U=0;U<M;U++)D[U]=0<k?R.i(U+O)>>>k|R.i(U+O+1)<<32-k:R.i(U+O);return new o(D,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,dV=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Zf=o}).apply(typeof ID<"u"?ID:typeof self<"u"?self:typeof window<"u"?window:{});var a1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pV,i_,mV,jw,hR,gV,yV,vV;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,H,J){return T==Array.prototype||T==Object.prototype||(T[H]=J.value),T};function t(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof a1=="object"&&a1];for(var H=0;H<T.length;++H){var J=T[H];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var r=t(this);function i(T,H){if(H)e:{var J=r;T=T.split(".");for(var le=0;le<T.length-1;le++){var ke=T[le];if(!(ke in J))break e;J=J[ke]}T=T[T.length-1],le=J[T],H=H(le),H!=le&&H!=null&&e(J,T,{configurable:!0,writable:!0,value:H})}}function s(T,H){T instanceof String&&(T+="");var J=0,le=!1,ke={next:function(){if(!le&&J<T.length){var Ve=J++;return{value:H(Ve,T[Ve]),done:!1}}return le=!0,{done:!0,value:void 0}}};return ke[Symbol.iterator]=function(){return ke},ke}i("Array.prototype.values",function(T){return T||function(){return s(this,function(H,J){return J})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(T){var H=typeof T;return H=H!="object"?H:T?Array.isArray(T)?"array":H:"null",H=="array"||H=="object"&&typeof T.length=="number"}function u(T){var H=typeof T;return H=="object"&&T!=null||H=="function"}function c(T,H,J){return T.call.apply(T.bind,arguments)}function f(T,H,J){if(!T)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var ke=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ke,le),T.apply(H,ke)}}return function(){return T.apply(H,arguments)}}function h(T,H,J){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,h.apply(null,arguments)}function p(T,H){var J=Array.prototype.slice.call(arguments,1);return function(){var le=J.slice();return le.push.apply(le,arguments),T.apply(this,le)}}function g(T,H){function J(){}J.prototype=H.prototype,T.aa=H.prototype,T.prototype=new J,T.prototype.constructor=T,T.Qb=function(le,ke,Ve){for(var at=Array(arguments.length-2),kn=2;kn<arguments.length;kn++)at[kn-2]=arguments[kn];return H.prototype[ke].apply(le,at)}}function w(T){const H=T.length;if(0<H){const J=Array(H);for(let le=0;le<H;le++)J[le]=T[le];return J}return[]}function _(T,H){for(let J=1;J<arguments.length;J++){const le=arguments[J];if(l(le)){const ke=T.length||0,Ve=le.length||0;T.length=ke+Ve;for(let at=0;at<Ve;at++)T[ke+at]=le[at]}else T.push(le)}}class v{constructor(H,J){this.i=H,this.j=J,this.h=0,this.g=null}get(){let H;return 0<this.h?(this.h--,H=this.g,this.g=H.next,H.next=null):H=this.i(),H}}function A(T){return/^[\s\xa0]*$/.test(T)}function S(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function b(T){return b[" "](T),T}b[" "]=function(){};var C=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(T,H,J){for(const le in T)H.call(J,T[le],le,T)}function R(T,H){for(const J in T)H.call(void 0,T[J],J,T)}function k(T){const H={};for(const J in T)H[J]=T[J];return H}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(T,H){let J,le;for(let ke=1;ke<arguments.length;ke++){le=arguments[ke];for(J in le)T[J]=le[J];for(let Ve=0;Ve<O.length;Ve++)J=O[Ve],Object.prototype.hasOwnProperty.call(le,J)&&(T[J]=le[J])}}function D(T){var H=1;T=T.split(":");const J=[];for(;0<H&&T.length;)J.push(T.shift()),H--;return T.length&&J.push(T.join(":")),J}function U(T){a.setTimeout(()=>{throw T},0)}function F(){var T=ee;let H=null;return T.g&&(H=T.g,T.g=T.g.next,T.g||(T.h=null),H.next=null),H}class ${constructor(){this.h=this.g=null}add(H,J){const le=Z.get();le.set(H,J),this.h?this.h.next=le:this.g=le,this.h=le}}var Z=new v(()=>new se,T=>T.reset());class se{constructor(){this.next=this.g=this.h=null}set(H,J){this.h=H,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,Q=!1,ee=new $,Y=()=>{const T=a.Promise.resolve(void 0);ce=()=>{T.then(V)}};var V=()=>{for(var T;T=F();){try{T.h.call(T.g)}catch(J){U(J)}var H=Z;H.j(T),100>H.h&&(H.h++,T.next=H.g,H.g=T)}Q=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(T,H){this.type=T,this.g=this.target=H,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,H=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const J=()=>{};a.addEventListener("test",J,H),a.removeEventListener("test",J,H)}catch{}return T}();function fe(T,H){if(re.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var J=this.type=T.type,le=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=H,H=T.relatedTarget){if(C){e:{try{b(H.nodeName);var ke=!0;break e}catch{}ke=!1}ke||(H=null)}}else J=="mouseover"?H=T.fromElement:J=="mouseout"&&(H=T.toElement);this.relatedTarget=H,le?(this.clientX=le.clientX!==void 0?le.clientX:le.pageX,this.clientY=le.clientY!==void 0?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:te[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&fe.aa.h.call(this)}}g(fe,re);var te={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),ye=0;function xe(T,H,J,le,ke){this.listener=T,this.proxy=null,this.src=H,this.type=J,this.capture=!!le,this.ha=ke,this.key=++ye,this.da=this.fa=!1}function Te(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function $e(T){this.src=T,this.g={},this.h=0}$e.prototype.add=function(T,H,J,le,ke){var Ve=T.toString();T=this.g[Ve],T||(T=this.g[Ve]=[],this.h++);var at=Be(T,H,le,ke);return-1<at?(H=T[at],J||(H.fa=!1)):(H=new xe(H,this.src,Ve,!!le,ke),H.fa=J,T.push(H)),H};function De(T,H){var J=H.type;if(J in T.g){var le=T.g[J],ke=Array.prototype.indexOf.call(le,H,void 0),Ve;(Ve=0<=ke)&&Array.prototype.splice.call(le,ke,1),Ve&&(Te(H),T.g[J].length==0&&(delete T.g[J],T.h--))}}function Be(T,H,J,le){for(var ke=0;ke<T.length;++ke){var Ve=T[ke];if(!Ve.da&&Ve.listener==H&&Ve.capture==!!J&&Ve.ha==le)return ke}return-1}var he="closure_lm_"+(1e6*Math.random()|0),rt={};function Je(T,H,J,le,ke){if(Array.isArray(H)){for(var Ve=0;Ve<H.length;Ve++)Je(T,H[Ve],J,le,ke);return null}return J=ve(J),T&&T[ue]?T.K(H,J,u(le)?!!le.capture:!1,ke):nt(T,H,J,!1,le,ke)}function nt(T,H,J,le,ke,Ve){if(!H)throw Error("Invalid event type");var at=u(ke)?!!ke.capture:!!ke,kn=me(T);if(kn||(T[he]=kn=new $e(T)),J=kn.add(H,J,le,at,Ve),J.proxy)return J;if(le=we(),J.proxy=le,le.src=T,le.listener=J,T.addEventListener)oe||(ke=at),ke===void 0&&(ke=!1),T.addEventListener(H.toString(),le,ke);else if(T.attachEvent)T.attachEvent(ie(H.toString()),le);else if(T.addListener&&T.removeListener)T.addListener(le);else throw Error("addEventListener and attachEvent are unavailable.");return J}function we(){function T(J){return H.call(T.src,T.listener,J)}const H=q;return T}function Pe(T,H,J,le,ke){if(Array.isArray(H))for(var Ve=0;Ve<H.length;Ve++)Pe(T,H[Ve],J,le,ke);else le=u(le)?!!le.capture:!!le,J=ve(J),T&&T[ue]?(T=T.i,H=String(H).toString(),H in T.g&&(Ve=T.g[H],J=Be(Ve,J,le,ke),-1<J&&(Te(Ve[J]),Array.prototype.splice.call(Ve,J,1),Ve.length==0&&(delete T.g[H],T.h--)))):T&&(T=me(T))&&(H=T.g[H.toString()],T=-1,H&&(T=Be(H,J,le,ke)),(J=-1<T?H[T]:null)&&Le(J))}function Le(T){if(typeof T!="number"&&T&&!T.da){var H=T.src;if(H&&H[ue])De(H.i,T);else{var J=T.type,le=T.proxy;H.removeEventListener?H.removeEventListener(J,le,T.capture):H.detachEvent?H.detachEvent(ie(J),le):H.addListener&&H.removeListener&&H.removeListener(le),(J=me(H))?(De(J,T),J.h==0&&(J.src=null,H[he]=null)):Te(T)}}}function ie(T){return T in rt?rt[T]:rt[T]="on"+T}function q(T,H){if(T.da)T=!0;else{H=new fe(H,this);var J=T.listener,le=T.ha||T.src;T.fa&&Le(T),T=J.call(le,H)}return T}function me(T){return T=T[he],T instanceof $e?T:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function ve(T){return typeof T=="function"?T:(T[de]||(T[de]=function(H){return T.handleEvent(H)}),T[de])}function Ae(){X.call(this),this.i=new $e(this),this.M=this,this.F=null}g(Ae,X),Ae.prototype[ue]=!0,Ae.prototype.removeEventListener=function(T,H,J,le){Pe(this,T,H,J,le)};function He(T,H){var J,le=T.F;if(le)for(J=[];le;le=le.F)J.push(le);if(T=T.M,le=H.type||H,typeof H=="string")H=new re(H,T);else if(H instanceof re)H.target=H.target||T;else{var ke=H;H=new re(le,T),M(H,ke)}if(ke=!0,J)for(var Ve=J.length-1;0<=Ve;Ve--){var at=H.g=J[Ve];ke=qe(at,le,!0,H)&&ke}if(at=H.g=T,ke=qe(at,le,!0,H)&&ke,ke=qe(at,le,!1,H)&&ke,J)for(Ve=0;Ve<J.length;Ve++)at=H.g=J[Ve],ke=qe(at,le,!1,H)&&ke}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var T=this.i,H;for(H in T.g){for(var J=T.g[H],le=0;le<J.length;le++)Te(J[le]);delete T.g[H],T.h--}}this.F=null},Ae.prototype.K=function(T,H,J,le){return this.i.add(String(T),H,!1,J,le)},Ae.prototype.L=function(T,H,J,le){return this.i.add(String(T),H,!0,J,le)};function qe(T,H,J,le){if(H=T.i.g[String(H)],!H)return!0;H=H.concat();for(var ke=!0,Ve=0;Ve<H.length;++Ve){var at=H[Ve];if(at&&!at.da&&at.capture==J){var kn=at.listener,Qr=at.ha||at.src;at.fa&&De(T.i,at),ke=kn.call(Qr,le)!==!1&&ke}}return ke&&!le.defaultPrevented}function lt(T,H,J){if(typeof T=="function")J&&(T=h(T,J));else if(T&&typeof T.handleEvent=="function")T=h(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(H)?-1:a.setTimeout(T,H||0)}function yt(T){T.g=lt(()=>{T.g=null,T.i&&(T.i=!1,yt(T))},T.l);const H=T.h;T.h=null,T.m.apply(null,H)}class Ye extends X{constructor(H,J){super(),this.m=H,this.l=J,this.h=null,this.i=!1,this.g=null}j(H){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vt(T){X.call(this),this.h=T,this.g={}}g(vt,X);var kt=[];function Ft(T){L(T.g,function(H,J){this.g.hasOwnProperty(J)&&Le(H)},T),T.g={}}vt.prototype.N=function(){vt.aa.N.call(this),Ft(this)},vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=a.JSON.stringify,nn=a.JSON.parse,Gt=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function Tn(){}Tn.prototype.h=null;function be(T){return T.h||(T.h=T.i())}function mt(){}var Ge={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xe(){re.call(this,"d")}g(Xe,re);function _t(){re.call(this,"c")}g(_t,re);var dt={},Xt=null;function Yn(){return Xt=Xt||new Ae}dt.La="serverreachability";function Sr(T){re.call(this,dt.La,T)}g(Sr,re);function wn(T){const H=Yn();He(H,new Sr(H))}dt.STAT_EVENT="statevent";function yi(T,H){re.call(this,dt.STAT_EVENT,T),this.stat=H}g(yi,re);function $n(T){const H=Yn();He(H,new yi(H,T))}dt.Ma="timingevent";function Ia(T,H){re.call(this,dt.Ma,T),this.size=H}g(Ia,re);function Es(T,H){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},H)}function qi(){this.g=!0}qi.prototype.xa=function(){this.g=!1};function $s(T,H,J,le,ke,Ve){T.info(function(){if(T.g)if(Ve)for(var at="",kn=Ve.split("&"),Qr=0;Qr<kn.length;Qr++){var Rn=kn[Qr].split("=");if(1<Rn.length){var Zr=Rn[0];Rn=Rn[1];var Vn=Zr.split("_");at=2<=Vn.length&&Vn[1]=="type"?at+(Zr+"="+Rn+"&"):at+(Zr+"=redacted&")}}else at=null;else at=Ve;return"XMLHTTP REQ ("+le+") [attempt "+ke+"]: "+H+`
`+J+`
`+at})}function ka(T,H,J,le,ke,Ve,at){T.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+ke+"]: "+H+`
`+J+`
`+Ve+" "+at})}function vi(T,H,J,le){T.info(function(){return"XMLHTTP TEXT ("+H+"): "+Vc(T,J)+(le?" "+le:"")})}function ia(T,H){T.info(function(){return"TIMEOUT: "+H})}qi.prototype.info=function(){};function Vc(T,H){if(!T.g)return H;if(!H)return null;try{var J=JSON.parse(H);if(J){for(T=0;T<J.length;T++)if(Array.isArray(J[T])){var le=J[T];if(!(2>le.length)){var ke=le[1];if(Array.isArray(ke)&&!(1>ke.length)){var Ve=ke[0];if(Ve!="noop"&&Ve!="stop"&&Ve!="close")for(var at=1;at<ke.length;at++)ke[at]=""}}}}return Et(J)}catch{return H}}var ko={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function Oa(){}g(Oa,Tn),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},bs=new Oa;function Ks(T,H,J,le){this.j=T,this.i=H,this.l=J,this.R=le||1,this.U=new vt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gu}function gu(){this.i=null,this.g="",this.h=!1}var yu={},Ml={};function Rl(T,H,J){T.L=1,T.v=ur(Xr(H)),T.m=J,T.P=!0,ae(T,null)}function ae(T,H){T.F=Date.now(),Oe(T),T.A=Xr(T.v);var J=T.A,le=T.R;Array.isArray(le)||(le=[String(le)]),oa(J.i,"t",le),T.C=0,J=T.j.J,T.h=new gu,T.g=bu(T.j,J?H:null,!T.m),0<T.O&&(T.M=new Ye(h(T.Y,T,T.g),T.O)),H=T.U,J=T.g,le=T.ca;var ke="readystatechange";Array.isArray(ke)||(ke&&(kt[0]=ke.toString()),ke=kt);for(var Ve=0;Ve<ke.length;Ve++){var at=Je(J,ke[Ve],le||H.handleEvent,!1,H.h||H);if(!at)break;H.g[at.key]=at}H=T.H?k(T.H):{},T.m?(T.u||(T.u="POST"),H["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,H)):(T.u="GET",T.g.ea(T.A,T.u,null,H)),wn(),$s(T.i,T.u,T.A,T.l,T.R,T.m)}Ks.prototype.ca=function(T){T=T.target;const H=this.M;H&&yr(T)==3?H.j():this.Y(T)},Ks.prototype.Y=function(T){try{if(T==this.g)e:{const Vn=yr(this.g);var H=this.g.Ba();const vr=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||Pl(this.g)))){this.J||Vn!=4||H==7||(H==8||0>=vr?wn(3):wn(2)),et(this);var J=this.g.Z();this.X=J;t:if(Me(this)){var le=Pl(this.g);T="";var ke=le.length,Ve=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),ht(this);var at="";break t}this.h.i=new a.TextDecoder}for(H=0;H<ke;H++)this.h.h=!0,T+=this.h.i.decode(le[H],{stream:!(Ve&&H==ke-1)});le.length=0,this.h.g+=T,this.C=0,at=this.h.g}else at=this.g.oa();if(this.o=J==200,ka(this.i,this.u,this.A,this.l,this.R,Vn,J),this.o){if(this.T&&!this.K){t:{if(this.g){var kn,Qr=this.g;if((kn=Qr.g?Qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(kn)){var Rn=kn;break t}}Rn=null}if(J=Rn)vi(this.i,this.l,J,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bt(this,J);else{this.o=!1,this.s=3,$n(12),gt(this),ht(this);break e}}if(this.P){J=!0;let Pn;for(;!this.J&&this.C<at.length;)if(Pn=je(this,at),Pn==Ml){Vn==4&&(this.s=4,$n(14),J=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==yu){this.s=4,$n(15),vi(this.i,this.l,at,"[Invalid Chunk]"),J=!1;break}else vi(this.i,this.l,Pn,null),bt(this,Pn);if(Me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||at.length!=0||this.h.h||(this.s=1,$n(16),J=!1),this.o=this.o&&J,!J)vi(this.i,this.l,at,"[Invalid Chunked Response]"),gt(this),ht(this);else if(0<at.length&&!this.W){this.W=!0;var Zr=this.j;Zr.g==this&&Zr.ba&&!Zr.M&&(Zr.j.info("Great, no buffering proxy detected. Bytes received: "+at.length),Ys(Zr),Zr.M=!0,$n(11))}}else vi(this.i,this.l,at,null),bt(this,at);Vn==4&&gt(this),this.o&&!this.J&&(Vn==4?Au(this.j,this):(this.o=!1,Oe(this)))}else Na(this.g),J==400&&0<at.indexOf("Unknown SID")?(this.s=3,$n(12)):(this.s=0,$n(13)),gt(this),ht(this)}}}catch{}finally{}};function Me(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function je(T,H){var J=T.C,le=H.indexOf(`
`,J);return le==-1?Ml:(J=Number(H.substring(J,le)),isNaN(J)?yu:(le+=1,le+J>H.length?Ml:(H=H.slice(le,le+J),T.C=le+J,H)))}Ks.prototype.cancel=function(){this.J=!0,gt(this)};function Oe(T){T.S=Date.now()+T.I,Re(T,T.I)}function Re(T,H){if(T.B!=null)throw Error("WatchDog timer not null");T.B=Es(h(T.ba,T),H)}function et(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Ks.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(ia(this.i,this.A),this.L!=2&&(wn(),$n(17)),gt(this),this.s=2,ht(this)):Re(this,this.S-T)};function ht(T){T.j.G==0||T.J||Au(T.j,T)}function gt(T){et(T);var H=T.M;H&&typeof H.ma=="function"&&H.ma(),T.M=null,Ft(T.U),T.g&&(H=T.g,T.g=null,H.abort(),H.ma())}function bt(T,H){try{var J=T.j;if(J.G!=0&&(J.g==T||zt(J.h,T))){if(!T.K&&zt(J.h,T)&&J.G==3){try{var le=J.Da.g.parse(H)}catch{le=null}if(Array.isArray(le)&&le.length==3){var ke=le;if(ke[0]==0){e:if(!J.u){if(J.g)if(J.g.F+3e3<T.F)Fa(J),ho(J);else break e;wu(J),$n(18)}}else J.za=ke[1],0<J.za-J.T&&37500>ke[2]&&J.F&&J.v==0&&!J.C&&(J.C=Es(h(J.Za,J),6e3));if(1>=Pt(J.h)&&J.ca){try{J.ca()}catch{}J.ca=void 0}}else ua(J,11)}else if((T.K||J.g==T)&&Fa(J),!A(H))for(ke=J.Da.g.parse(H),H=0;H<ke.length;H++){let Rn=ke[H];if(J.T=Rn[0],Rn=Rn[1],J.G==2)if(Rn[0]=="c"){J.K=Rn[1],J.ia=Rn[2];const Zr=Rn[3];Zr!=null&&(J.la=Zr,J.j.info("VER="+J.la));const Vn=Rn[4];Vn!=null&&(J.Aa=Vn,J.j.info("SVER="+J.Aa));const vr=Rn[5];vr!=null&&typeof vr=="number"&&0<vr&&(le=1.5*vr,J.L=le,J.j.info("backChannelRequestTimeoutMs_="+le)),le=J;const Pn=T.g;if(Pn){const Bo=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var Ve=le.h;Ve.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(Ve.j=Ve.l,Ve.g=new Set,Ve.h&&(yn(Ve,Ve.h),Ve.h=null))}if(le.D){const Xi=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xi&&(le.ya=Xi,ln(le.I,le.D,Xi))}}J.G=3,J.l&&J.l.ua(),J.ba&&(J.R=Date.now()-T.F,J.j.info("Handshake RTT: "+J.R+"ms")),le=J;var at=T;if(le.qa=Kc(le,le.J?le.ia:null,le.W),at.K){An(le.h,at);var kn=at,Qr=le.L;Qr&&(kn.I=Qr),kn.B&&(et(kn),Oe(kn)),le.g=at}else Ba(le);0<J.i.length&&po(J)}else Rn[0]!="stop"&&Rn[0]!="close"||ua(J,7);else J.G==3&&(Rn[0]=="stop"||Rn[0]=="close"?Rn[0]=="stop"?ua(J,7):ui(J):Rn[0]!="noop"&&J.l&&J.l.ta(Rn),J.v=0)}}wn(4)}catch{}}var jt=class{constructor(T,H){this.g=T,this.map=H}};function Lt(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function Pt(T){return T.h?1:T.g?T.g.size:0}function zt(T,H){return T.h?T.h==H:T.g?T.g.has(H):!1}function yn(T,H){T.g?T.g.add(H):T.h=H}function An(T,H){T.h&&T.h==H?T.h=null:T.g&&T.g.has(H)&&T.g.delete(H)}Lt.prototype.cancel=function(){if(this.i=an(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function an(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let H=T.i;for(const J of T.g.values())H=H.concat(J.D);return H}return w(T.i)}function It(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var H=[],J=T.length,le=0;le<J;le++)H.push(T[le]);return H}H=[],J=0;for(le in T)H[J++]=T[le];return H}function Mn(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var H=[];T=T.length;for(var J=0;J<T;J++)H.push(J);return H}H=[],J=0;for(const le in T)H[J++]=le;return H}}}function cn(T,H){if(T.forEach&&typeof T.forEach=="function")T.forEach(H,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,H,void 0);else for(var J=Mn(T),le=It(T),ke=le.length,Ve=0;Ve<ke;Ve++)H.call(void 0,le[Ve],J&&J[Ve],T)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oo(T,H){if(T){T=T.split("&");for(var J=0;J<T.length;J++){var le=T[J].indexOf("="),ke=null;if(0<=le){var Ve=T[J].substring(0,le);ke=T[J].substring(le+1)}else Ve=T[J];H(Ve,ke?decodeURIComponent(ke.replace(/\+/g," ")):"")}}}function lr(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof lr){this.h=T.h,fn(this,T.j),this.o=T.o,this.g=T.g,Br(this,T.s),this.l=T.l;var H=T.i,J=new sa;J.i=H.i,H.g&&(J.g=new Map(H.g),J.h=H.h),Fr(this,J),this.m=T.m}else T&&(H=String(T).match(Jr))?(this.h=!1,fn(this,H[1]||"",!0),this.o=hn(H[2]||""),this.g=hn(H[3]||"",!0),Br(this,H[4]),this.l=hn(H[5]||"",!0),Fr(this,H[6]||"",!0),this.m=hn(H[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}lr.prototype.toString=function(){var T=[],H=this.j;H&&T.push(Yr(H,zc,!0),":");var J=this.g;return(J||H=="file")&&(T.push("//"),(H=this.o)&&T.push(Yr(H,zc,!0),"@"),T.push(encodeURIComponent(String(J)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.s,J!=null&&T.push(":",String(J))),(J=this.l)&&(this.g&&J.charAt(0)!="/"&&T.push("/"),T.push(Yr(J,J.charAt(0)=="/"?Hc:$p,!0))),(J=this.i.toString())&&T.push("?",J),(J=this.m)&&T.push("#",Yr(J,Da)),T.join("")};function Xr(T){return new lr(T)}function fn(T,H,J){T.j=J?hn(H,!0):H,T.j&&(T.j=T.j.replace(/:$/,""))}function Br(T,H){if(H){if(H=Number(H),isNaN(H)||0>H)throw Error("Bad port number "+H);T.s=H}else T.s=null}function Fr(T,H,J){H instanceof sa?(T.i=H,aa(T.i,T.h)):(J||(H=Yr(H,Gc)),T.i=new sa(H,T.h))}function ln(T,H,J){T.i.set(H,J)}function ur(T){return ln(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function hn(T,H){return T?H?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function Yr(T,H,J){return typeof T=="string"?(T=encodeURI(T).replace(H,vu),J&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function vu(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var zc=/[#\/\?@]/g,$p=/[#\?:]/g,Hc=/[#\?]/g,Gc=/[#\?@]/g,Da=/#/g;function sa(T,H){this.h=this.g=null,this.i=T||null,this.j=!!H}function li(T){T.g||(T.g=new Map,T.h=0,T.i&&Oo(T.i,function(H,J){T.add(decodeURIComponent(H.replace(/\+/g," ")),J)}))}n=sa.prototype,n.add=function(T,H){li(this),this.i=null,T=Js(this,T);var J=this.g.get(T);return J||this.g.set(T,J=[]),J.push(H),this.h+=1,this};function dn(T,H){li(T),H=Js(T,H),T.g.has(H)&&(T.i=null,T.h-=T.g.get(H).length,T.g.delete(H))}function fo(T,H){return li(T),H=Js(T,H),T.g.has(H)}n.forEach=function(T,H){li(this),this.g.forEach(function(J,le){J.forEach(function(ke){T.call(H,ke,le,this)},this)},this)},n.na=function(){li(this);const T=Array.from(this.g.values()),H=Array.from(this.g.keys()),J=[];for(let le=0;le<H.length;le++){const ke=T[le];for(let Ve=0;Ve<ke.length;Ve++)J.push(H[le])}return J},n.V=function(T){li(this);let H=[];if(typeof T=="string")fo(this,T)&&(H=H.concat(this.g.get(Js(this,T))));else{T=Array.from(this.g.values());for(let J=0;J<T.length;J++)H=H.concat(T[J])}return H},n.set=function(T,H){return li(this),this.i=null,T=Js(this,T),fo(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[H]),this.h+=1,this},n.get=function(T,H){return T?(T=this.V(T),0<T.length?String(T[0]):H):H};function oa(T,H,J){dn(T,H),0<J.length&&(T.i=null,T.g.set(Js(T,H),w(J)),T.h+=J.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],H=Array.from(this.g.keys());for(var J=0;J<H.length;J++){var le=H[J];const Ve=encodeURIComponent(String(le)),at=this.V(le);for(le=0;le<at.length;le++){var ke=Ve;at[le]!==""&&(ke+="="+encodeURIComponent(String(at[le]))),T.push(ke)}}return this.i=T.join("&")};function Js(T,H){return H=String(H),T.j&&(H=H.toLowerCase()),H}function aa(T,H){H&&!T.j&&(li(T),T.i=null,T.g.forEach(function(J,le){var ke=le.toLowerCase();le!=ke&&(dn(this,le),oa(this,ke,J))},T)),T.j=H}function Iy(T,H){const J=new qi;if(a.Image){const le=new Image;le.onload=p(Wi,J,"TestLoadImage: loaded",!0,H,le),le.onerror=p(Wi,J,"TestLoadImage: error",!1,H,le),le.onabort=p(Wi,J,"TestLoadImage: abort",!1,H,le),le.ontimeout=p(Wi,J,"TestLoadImage: timeout",!1,H,le),a.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=T}else H(!1)}function Ur(T,H){const J=new qi,le=new AbortController,ke=setTimeout(()=>{le.abort(),Wi(J,"TestPingServer: timeout",!1,H)},1e4);fetch(T,{signal:le.signal}).then(Ve=>{clearTimeout(ke),Ve.ok?Wi(J,"TestPingServer: ok",!0,H):Wi(J,"TestPingServer: server error",!1,H)}).catch(()=>{clearTimeout(ke),Wi(J,"TestPingServer: error",!1,H)})}function Wi(T,H,J,le,ke){try{ke&&(ke.onload=null,ke.onerror=null,ke.onabort=null,ke.ontimeout=null),le(J)}catch{}}function ky(){this.g=new Gt}function qc(T,H,J){const le=J||"";try{cn(T,function(ke,Ve){let at=ke;u(ke)&&(at=Et(ke)),H.push(le+Ve+"="+encodeURIComponent(at))})}catch(ke){throw H.push(le+"type="+encodeURIComponent("_badmap")),ke}}function La(T){this.l=T.Ub||null,this.j=T.eb||!1}g(La,Tn),La.prototype.g=function(){return new la(this.l,this.j)},La.prototype.i=function(T){return function(){return T}}({});function la(T,H){Ae.call(this),this.D=T,this.o=H,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(la,Ae),n=la.prototype,n.open=function(T,H){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=H,this.readyState=1,Lo(this)},n.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const H={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(H.body=T),(this.D||a).fetch(new Request(this.A,H)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},n.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xs(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xs(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}n.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var H=T.value?T.value:new Uint8Array(0);(H=this.v.decode(H,{stream:!T.done}))&&(this.response=this.responseText+=H)}T.done?Do(this):Lo(this),this.readyState==3&&Xs(this)}},n.Ra=function(T){this.g&&(this.response=this.responseText=T,Do(this))},n.Qa=function(T){this.g&&(this.response=T,Do(this))},n.ga=function(){this.g&&Do(this)};function Do(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Lo(T)}n.setRequestHeader=function(T,H){this.u.append(T,H)},n.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],H=this.h.entries();for(var J=H.next();!J.done;)J=J.value,T.push(J[0]+": "+J[1]),J=H.next();return T.join(`\r
`)};function Lo(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function _i(T){let H="";return L(T,function(J,le){H+=le,H+=":",H+=J,H+=`\r
`}),H}function $i(T,H,J){e:{for(le in J){var le=!1;break e}le=!0}le||(J=_i(J),typeof T=="string"?J!=null&&encodeURIComponent(String(J)):ln(T,H,J))}function sr(T){Ae.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(sr,Ae);var Ph=/^https?$/i,Wc=["POST","PUT"];n=sr.prototype,n.Ha=function(T){this.J=T},n.ea=function(T,H,J,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);H=H?H.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?be(this.o):be(bs),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(H,String(T),!0),this.B=!1}catch(Ve){_u(this,Ve);return}if(T=J||"",J=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var ke in le)J.set(ke,le[ke]);else if(typeof le.keys=="function"&&typeof le.get=="function")for(const Ve of le.keys())J.set(Ve,le.get(Ve));else throw Error("Unknown input type for opt_headers: "+String(le));le=Array.from(J.keys()).find(Ve=>Ve.toLowerCase()=="content-type"),ke=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wc,H,void 0))||le||ke||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ve,at]of J)this.g.setRequestHeader(Ve,at);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$c(this),this.u=!0,this.g.send(T),this.u=!1}catch(Ve){_u(this,Ve)}};function _u(T,H){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=H,T.m=5,os(T),Ki(T)}function os(T){T.A||(T.A=!0,He(T,"complete"),He(T,"error"))}n.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,He(this,"complete"),He(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),sr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ih(this):this.bb())},n.bb=function(){Ih(this)};function Ih(T){if(T.h&&typeof o<"u"&&(!T.v[1]||yr(T)!=4||T.Z()!=2)){if(T.u&&yr(T)==4)lt(T.Ea,0,T);else if(He(T,"readystatechange"),yr(T)==4){T.h=!1;try{const at=T.Z();e:switch(at){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var H=!0;break e;default:H=!1}var J;if(!(J=H)){var le;if(le=at===0){var ke=String(T.D).match(Jr)[1]||null;!ke&&a.self&&a.self.location&&(ke=a.self.location.protocol.slice(0,-1)),le=!Ph.test(ke?ke.toLowerCase():"")}J=le}if(J)He(T,"complete"),He(T,"success");else{T.m=6;try{var Ve=2<yr(T)?T.g.statusText:""}catch{Ve=""}T.l=Ve+" ["+T.Z()+"]",os(T)}}finally{Ki(T)}}}}function Ki(T,H){if(T.g){$c(T);const J=T.g,le=T.v[0]?()=>{}:null;T.g=null,T.v=null,H||He(T,"ready");try{J.onreadystatechange=le}catch{}}}function $c(T){T.I&&(a.clearTimeout(T.I),T.I=null)}n.isActive=function(){return!!this.g};function yr(T){return T.g?T.g.readyState:0}n.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(T){if(this.g){var H=this.g.responseText;return T&&H.indexOf(T)==0&&(H=H.substring(T.length)),nn(H)}};function Pl(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function Na(T){const H={};T=(T.g&&2<=yr(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let le=0;le<T.length;le++){if(A(T[le]))continue;var J=D(T[le]);const ke=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Ve=H[ke]||[];H[ke]=Ve,Ve.push(J)}R(H,function(le){return le.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(T,H,J){return J&&J.internalChannelParams&&J.internalChannelParams[T]||H}function xu(T){this.Aa=0,this.i=[],this.j=new qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=as("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=as("baseRetryDelayMs",5e3,T),this.cb=as("retryDelaySeedMs",1e4,T),this.Wa=as("forwardChannelMaxRetries",2,T),this.wa=as("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Lt(T&&T.concurrentRequestLimit),this.Da=new ky,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xu.prototype,n.la=8,n.G=1,n.connect=function(T,H,J,le){$n(0),this.W=T,this.H=H||{},J&&le!==void 0&&(this.H.OSID=J,this.H.OAID=le),this.F=this.X,this.I=Kc(this,null,this.W),po(this)};function ui(T){if(Il(T),T.G==3){var H=T.U++,J=Xr(T.I);if(ln(J,"SID",T.K),ln(J,"RID",H),ln(J,"TYPE","terminate"),xi(T,J),H=new Ks(T,T.j,H),H.L=2,H.v=ur(Xr(J)),J=!1,a.navigator&&a.navigator.sendBeacon)try{J=a.navigator.sendBeacon(H.v.toString(),"")}catch{}!J&&a.Image&&(new Image().src=H.v,J=!0),J||(H.g=bu(H.j,null),H.g.ea(H.v)),H.F=Date.now(),Oe(H)}kh(T)}function ho(T){T.g&&(Ys(T),T.g.cancel(),T.g=null)}function Il(T){ho(T),T.u&&(a.clearTimeout(T.u),T.u=null),Fa(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function po(T){if(!ut(T.h)&&!T.s){T.s=!0;var H=T.Ga;ce||Y(),Q||(ce(),Q=!0),ee.add(H,T),T.B=0}}function kl(T,H){return Pt(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=H.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=Es(h(T.Ga,T,H),Eu(T,T.B)),T.B++,!0)}n.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const ke=new Ks(this,this.j,T);let Ve=this.o;if(this.S&&(Ve?(Ve=k(Ve),M(Ve,this.S)):Ve=this.S),this.m!==null||this.O||(ke.H=Ve,Ve=null),this.P)e:{for(var H=0,J=0;J<this.i.length;J++){t:{var le=this.i[J];if("__data__"in le.map&&(le=le.map.__data__,typeof le=="string")){le=le.length;break t}le=void 0}if(le===void 0)break;if(H+=le,4096<H){H=J;break e}if(H===4096||J===this.i.length-1){H=J+1;break e}}H=1e3}else H=1e3;H=ls(this,ke,H),J=Xr(this.I),ln(J,"RID",T),ln(J,"CVER",22),this.D&&ln(J,"X-HTTP-Session-Id",this.D),xi(this,J),Ve&&(this.O?H="headers="+encodeURIComponent(String(_i(Ve)))+"&"+H:this.m&&$i(J,this.m,Ve)),yn(this.h,ke),this.Ua&&ln(J,"TYPE","init"),this.P?(ln(J,"$req",H),ln(J,"SID","null"),ke.T=!0,Rl(ke,J,null)):Rl(ke,J,H),this.G=2}}else this.G==3&&(T?ki(this,T):this.i.length==0||ut(this.h)||ki(this))};function ki(T,H){var J;H?J=H.l:J=T.U++;const le=Xr(T.I);ln(le,"SID",T.K),ln(le,"RID",J),ln(le,"AID",T.T),xi(T,le),T.m&&T.o&&$i(le,T.m,T.o),J=new Ks(T,T.j,J,T.B+1),T.m===null&&(J.H=T.o),H&&(T.i=H.D.concat(T.i)),H=ls(T,J,1e3),J.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),yn(T.h,J),Rl(J,le,H)}function xi(T,H){T.H&&L(T.H,function(J,le){ln(H,le,J)}),T.l&&cn({},function(J,le){ln(H,le,J)})}function ls(T,H,J){J=Math.min(T.i.length,J);var le=T.l?h(T.l.Na,T.l,T):null;e:{var ke=T.i;let Ve=-1;for(;;){const at=["count="+J];Ve==-1?0<J?(Ve=ke[0].g,at.push("ofs="+Ve)):Ve=0:at.push("ofs="+Ve);let kn=!0;for(let Qr=0;Qr<J;Qr++){let Rn=ke[Qr].g;const Zr=ke[Qr].map;if(Rn-=Ve,0>Rn)Ve=Math.max(0,ke[Qr].g-100),kn=!1;else try{qc(Zr,at,"req"+Rn+"_")}catch{le&&le(Zr)}}if(kn){le=at.join("&");break e}}}return T=T.i.splice(0,J),H.D=T,le}function Ba(T){if(!T.g&&!T.u){T.Y=1;var H=T.Fa;ce||Y(),Q||(ce(),Q=!0),ee.add(H,T),T.v=0}}function wu(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=Es(h(T.Fa,T),Eu(T,T.v)),T.v++,!0)}n.Fa=function(){if(this.u=null,No(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=Es(h(this.ab,this),T)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$n(10),ho(this),No(this))};function Ys(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function No(T){T.g=new Ks(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var H=Xr(T.qa);ln(H,"RID","rpc"),ln(H,"SID",T.K),ln(H,"AID",T.T),ln(H,"CI",T.F?"0":"1"),!T.F&&T.ja&&ln(H,"TO",T.ja),ln(H,"TYPE","xmlhttp"),xi(T,H),T.m&&T.o&&$i(H,T.m,T.o),T.L&&(T.g.I=T.L);var J=T.g;T=T.ia,J.L=1,J.v=ur(Xr(H)),J.m=null,J.P=!0,ae(J,T)}n.Za=function(){this.C!=null&&(this.C=null,ho(this),wu(this),$n(19))};function Fa(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function Au(T,H){var J=null;if(T.g==H){Fa(T),Ys(T),T.g=null;var le=2}else if(zt(T.h,H))J=H.D,An(T.h,H),le=1;else return;if(T.G!=0){if(H.o)if(le==1){J=H.m?H.m.length:0,H=Date.now()-H.F;var ke=T.B;le=Yn(),He(le,new Ia(le,J)),po(T)}else Ba(T);else if(ke=H.s,ke==3||ke==0&&0<H.X||!(le==1&&kl(T,H)||le==2&&wu(T)))switch(J&&0<J.length&&(H=T.h,H.i=H.i.concat(J)),ke){case 1:ua(T,5);break;case 4:ua(T,10);break;case 3:ua(T,6);break;default:ua(T,2)}}}function Eu(T,H){let J=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(J*=2),J*H}function ua(T,H){if(T.j.info("Error code "+H),H==2){var J=h(T.fb,T),le=T.Xa;const ke=!le;le=new lr(le||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fn(le,"https"),ur(le),ke?Iy(le.toString(),J):Ur(le.toString(),J)}else $n(2);T.G=0,T.l&&T.l.sa(H),kh(T),Il(T)}n.fb=function(T){T?(this.j.info("Successfully pinged google.com"),$n(2)):(this.j.info("Failed to ping google.com"),$n(1))};function kh(T){if(T.G=0,T.ka=[],T.l){const H=an(T.h);(H.length!=0||T.i.length!=0)&&(_(T.ka,H),_(T.ka,T.i),T.h.i.length=0,w(T.i),T.i.length=0),T.l.ra()}}function Kc(T,H,J){var le=J instanceof lr?Xr(J):new lr(J);if(le.g!="")H&&(le.g=H+"."+le.g),Br(le,le.s);else{var ke=a.location;le=ke.protocol,H=H?H+"."+ke.hostname:ke.hostname,ke=+ke.port;var Ve=new lr(null);le&&fn(Ve,le),H&&(Ve.g=H),ke&&Br(Ve,ke),J&&(Ve.l=J),le=Ve}return J=T.D,H=T.ya,J&&H&&ln(le,J,H),ln(le,"VER",T.la),xi(T,le),le}function bu(T,H,J){if(H&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return H=T.Ca&&!T.pa?new sr(new La({eb:J})):new sr(T.pa),H.Ha(T.J),H}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}n=Jc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Su(){}Su.prototype.g=function(T,H){return new Ji(T,H)};function Ji(T,H){Ae.call(this),this.g=new xu(H),this.l=T,this.h=H&&H.messageUrlParams||null,T=H&&H.messageHeaders||null,H&&H.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=H&&H.initMessageHeaders||null,H&&H.messageContentType&&(T?T["X-WebChannel-Content-Type"]=H.messageContentType:T={"X-WebChannel-Content-Type":H.messageContentType}),H&&H.va&&(T?T["X-WebChannel-Client-Profile"]=H.va:T={"X-WebChannel-Client-Profile":H.va}),this.g.S=T,(T=H&&H.Sb)&&!A(T)&&(this.g.m=T),this.v=H&&H.supportsCrossDomainXhr||!1,this.u=H&&H.sendRawJson||!1,(H=H&&H.httpSessionIdParam)&&!A(H)&&(this.g.D=H,T=this.h,T!==null&&H in T&&(T=this.h,H in T&&delete T[H])),this.j=new us(this)}g(Ji,Ae),Ji.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ji.prototype.close=function(){ui(this.g)},Ji.prototype.o=function(T){var H=this.g;if(typeof T=="string"){var J={};J.__data__=T,T=J}else this.u&&(J={},J.__data__=Et(T),T=J);H.i.push(new jt(H.Ya++,T)),H.G==3&&po(H)},Ji.prototype.N=function(){this.g.l=null,delete this.j,ui(this.g),delete this.g,Ji.aa.N.call(this)};function Xc(T){Xe.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var H=T.__sm__;if(H){e:{for(const J in H){T=J;break e}T=void 0}(this.i=T)&&(T=this.i,H=H!==null&&T in H?H[T]:void 0),this.data=H}else this.data=T}g(Xc,Xe);function Ua(){_t.call(this),this.status=1}g(Ua,_t);function us(T){this.g=T}g(us,Jc),us.prototype.ua=function(){He(this.g,"a")},us.prototype.ta=function(T){He(this.g,new Xc(T))},us.prototype.sa=function(T){He(this.g,new Ua)},us.prototype.ra=function(){He(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,Ji.prototype.send=Ji.prototype.o,Ji.prototype.open=Ji.prototype.m,Ji.prototype.close=Ji.prototype.close,vV=function(){return new Su},yV=function(){return Yn()},gV=dt,hR={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,jw=ko,mu.COMPLETE="complete",mV=mu,mt.EventType=Ge,Ge.OPEN="a",Ge.CLOSE="b",Ge.ERROR="c",Ge.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,i_=mt,sr.prototype.listenOnce=sr.prototype.L,sr.prototype.getLastError=sr.prototype.Ka,sr.prototype.getLastErrorCode=sr.prototype.Ba,sr.prototype.getStatus=sr.prototype.Z,sr.prototype.getResponseJson=sr.prototype.Oa,sr.prototype.getResponseText=sr.prototype.oa,sr.prototype.send=sr.prototype.ea,sr.prototype.setWithCredentials=sr.prototype.Ha,pV=sr}).apply(typeof a1<"u"?a1:typeof self<"u"?self:typeof window<"u"?window:{});const kD="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bs.UNAUTHENTICATED=new Bs(null),Bs.GOOGLE_CREDENTIALS=new Bs("google-credentials-uid"),Bs.FIRST_PARTY=new Bs("first-party-uid"),Bs.MOCK_USER=new Bs("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=new nI("@firebase/firestore");function sg(){return pp.logLevel}function Mt(n,...e){if(pp.logLevel<=Nn.DEBUG){const t=e.map(pI);pp.debug(`Firestore (${dy}): ${n}`,...t)}}function Rc(n,...e){if(pp.logLevel<=Nn.ERROR){const t=e.map(pI);pp.error(`Firestore (${dy}): ${n}`,...t)}}function kg(n,...e){if(pp.logLevel<=Nn.WARN){const t=e.map(pI);pp.warn(`Firestore (${dy}): ${n}`,...t)}}function pI(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n="Unexpected state"){const e=`FIRESTORE (${dy}) INTERNAL ASSERTION FAILED: `+n;throw Rc(e),new Error(e)}function ir(n,e){n||tn()}function gn(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Vt extends cu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bs.UNAUTHENTICATED))}shutdown(){}}class HQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class GQ{constructor(e){this.t=e,this.currentUser=Bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ir(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new _c;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _c,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _c)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ir(typeof r.accessToken=="string"),new _V(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ir(e===null||typeof e=="string"),new Bs(e)}}class qQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Bs.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class WQ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new qQ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $Q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ir(this.o===void 0);const r=s=>{s.error!=null&&Mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Mt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ir(typeof t.token=="string"),this.R=t.token,new $Q(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function jn(n,e){return n<e?-1:n>e?1:0}function Og(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{static now(){return Dr.fromMillis(Date.now())}static fromDate(e){return Dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Dr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Vt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Vt(st.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Vt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Vt(st.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jn(this.nanoseconds,e.nanoseconds):jn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{static fromTimestamp(e){return new un(e)}static min(){return new un(new Dr(0,0))}static max(){return new un(new Dr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,r){t===void 0?t=0:t>e.length&&tn(),r===void 0?r=e.length-t:r>e.length-t&&tn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ql.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ql?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=ql.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const r=ql.isNumericId(e),i=ql.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ql.extractNumericId(e).compare(ql.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zf.fromString(e.substring(4,e.length-2))}}class Or extends ql{construct(e,t,r){return new Or(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Vt(st.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Or(t)}static emptyPath(){return new Or([])}}const XQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xs extends ql{construct(e,t,r){return new xs(e,t,r)}static isValidIdentifier(e){return XQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xs(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Vt(st.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Vt(st.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Vt(st.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Vt(st.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xs(t)}static emptyPath(){return new xs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.path=e}static fromPath(e){return new $t(Or.fromString(e))}static fromName(e){return new $t(Or.fromString(e).popFirst(5))}static empty(){return new $t(Or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Or.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new Or(e.slice()))}}function YQ(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=un.fromTimestamp(r===1e9?new Dr(t+1,0):new Dr(t,r));return new ah(i,$t.empty(),e)}function QQ(n){return new ah(n.readTime,n.key,-1)}class ah{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ah(un.min(),$t.empty(),-1)}static max(){return new ah(un.max(),$t.empty(),-1)}}function ZQ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$t.comparator(n.documentKey,e.documentKey),t!==0?t:jn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(n){if(n.code!==st.FAILED_PRECONDITION||n.message!==eZ)throw n;Mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Qe?t:Qe.resolve(t)}catch(t){return Qe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Qe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Qe.reject(t)}static resolve(e){return new Qe((t,r)=>{t(e)})}static reject(e){return new Qe((t,r)=>{r(e)})}static waitFor(e){return new Qe((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=Qe.resolve(!1);for(const r of e)t=t.next(i=>i?Qe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Qe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,t){return new Qe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function nZ(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function my(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}eb.oe=-1;function tb(n){return n==null}function mA(n){return n===0&&1/n==-1/0}function rZ(n){return typeof n=="number"&&Number.isInteger(n)&&!mA(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=OD(e)),e=sZ(n.get(t),e);return OD(e)}function sZ(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function OD(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){this.comparator=e,this.root=t||vs.EMPTY}insert(e,t){return new $r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vs.BLACK,null,null))}remove(e){return new $r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new l1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new l1(this.root,e,this.comparator,!1)}getReverseIterator(){return new l1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new l1(this.root,e,this.comparator,!0)}}class l1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vs{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??vs.RED,this.left=i??vs.EMPTY,this.right=s??vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new vs(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return vs.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}vs.EMPTY=null,vs.RED=!0,vs.BLACK=!1;vs.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(e,t,r,i,s){return this}insert(e,t,r){return new vs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e,this.data=new $r(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new LD(this.data.getIterator())}getIteratorFrom(e){return new LD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vi(this.comparator);return t.data=e,t}}class LD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.fields=e,e.sort(xs.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new Vi(xs.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Og(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AV("Invalid base64 string: "+s):s}}(e);return new As(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new As(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}As.EMPTY_BYTE_STRING=new As("");const oZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(n){if(ir(!!n),typeof n=="string"){let e=0;const t=oZ.exec(n);if(ir(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pi(n.seconds),nanos:pi(n.nanos)}}function pi(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function uh(n){return typeof n=="string"?As.fromBase64String(n):As.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function nb(n){const e=n.mapValue.fields.__previous_value__;return mI(e)?nb(e):e}function K_(n){const e=lh(n.mapValue.fields.__local_write_time__.timestampValue);return new Dr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e,t,r,i,s,o,a,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class J_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new J_("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof J_&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ch(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mI(n)?4:uZ(n)?9007199254740991:lZ(n)?10:11:tn()}function su(n,e){if(n===e)return!0;const t=ch(n);if(t!==ch(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return K_(n).isEqual(K_(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=lh(i.timestampValue),a=lh(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return uh(i.bytesValue).isEqual(uh(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return pi(i.geoPointValue.latitude)===pi(s.geoPointValue.latitude)&&pi(i.geoPointValue.longitude)===pi(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return pi(i.integerValue)===pi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=pi(i.doubleValue),a=pi(s.doubleValue);return o===a?mA(o)===mA(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Og(n.arrayValue.values||[],e.arrayValue.values||[],su);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(DD(o)!==DD(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!su(o[l],a[l])))return!1;return!0}(n,e);default:return tn()}}function X_(n,e){return(n.values||[]).find(t=>su(t,e))!==void 0}function Dg(n,e){if(n===e)return 0;const t=ch(n),r=ch(e);if(t!==r)return jn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=pi(s.integerValue||s.doubleValue),l=pi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return ND(n.timestampValue,e.timestampValue);case 4:return ND(K_(n),K_(e));case 5:return jn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=uh(s),l=uh(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=jn(a[u],l[u]);if(c!==0)return c}return jn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=jn(pi(s.latitude),pi(o.latitude));return a!==0?a:jn(pi(s.longitude),pi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return BD(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const f=s.fields||{},h=o.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,w=jn(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return w!==0?w:BD(p,g)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===u1.mapValue&&o===u1.mapValue)return 0;if(s===u1.mapValue)return 1;if(o===u1.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const h=jn(l[f],c[f]);if(h!==0)return h;const p=Dg(a[l[f]],u[c[f]]);if(p!==0)return p}return jn(l.length,c.length)}(n.mapValue,e.mapValue);default:throw tn()}}function ND(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return jn(n,e);const t=lh(n),r=lh(e),i=jn(t.seconds,r.seconds);return i!==0?i:jn(t.nanos,r.nanos)}function BD(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Dg(t[i],r[i]);if(s)return s}return jn(t.length,r.length)}function Lg(n){return dR(n)}function dR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=lh(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return uh(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $t.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=dR(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dR(t.fields[o])}`;return i+"}"}(n.mapValue):tn()}function Vw(n){switch(ch(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nb(n);return e?16+Vw(e):16;case 5:return 2*n.stringValue.length;case 6:return uh(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Vw(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return xh(r.fields,(s,o)=>{i+=s.length+Vw(o)}),i}(n.mapValue);default:throw tn()}}function pR(n){return!!n&&"integerValue"in n}function gI(n){return!!n&&"arrayValue"in n}function FD(n){return!!n&&"nullValue"in n}function UD(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zw(n){return!!n&&"mapValue"in n}function lZ(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function x_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return xh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=x_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=x_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uZ(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.value=e}static empty(){return new Mo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=x_(t)}setAll(e){let t=xs.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=x_(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());zw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return su(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];zw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xh(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mo(x_(this.value))}}function EV(n){const e=[];return xh(n.fields,(t,r)=>{const i=new xs([t]);if(zw(r)){const s=EV(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fs(e,0,un.min(),un.min(),un.min(),Mo.empty(),0)}static newFoundDocument(e,t,r,i){return new Fs(e,1,t,un.min(),r,i,0)}static newNoDocument(e,t){return new Fs(e,2,t,un.min(),un.min(),Mo.empty(),0)}static newUnknownDocument(e,t){return new Fs(e,3,t,un.min(),un.min(),Mo.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(un.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.position=e,this.inclusive=t}}function jD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=$t.comparator($t.fromName(o.referenceValue),t.key):r=Dg(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VD(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!su(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t="asc"){this.field=e,this.dir=t}}function cZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{}class ji extends bV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hZ(e,t,r):t==="array-contains"?new mZ(e,r):t==="in"?new gZ(e,r):t==="not-in"?new yZ(e,r):t==="array-contains-any"?new vZ(e,r):new ji(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dZ(e,r):new pZ(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Dg(t,this.value)):t!==null&&ch(this.value)===ch(t)&&this.matchesComparison(Dg(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ou extends bV{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ou(e,t)}matches(e){return SV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function SV(n){return n.op==="and"}function TV(n){return fZ(n)&&SV(n)}function fZ(n){for(const e of n.filters)if(e instanceof ou)return!1;return!0}function mR(n){if(n instanceof ji)return n.field.canonicalString()+n.op.toString()+Lg(n.value);if(TV(n))return n.filters.map(e=>mR(e)).join(",");{const e=n.filters.map(t=>mR(t)).join(",");return`${n.op}(${e})`}}function CV(n,e){return n instanceof ji?function(r,i){return i instanceof ji&&r.op===i.op&&r.field.isEqual(i.field)&&su(r.value,i.value)}(n,e):n instanceof ou?function(r,i){return i instanceof ou&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CV(o,i.filters[a]),!0):!1}(n,e):void tn()}function MV(n){return n instanceof ji?function(t){return`${t.field.canonicalString()} ${t.op} ${Lg(t.value)}`}(n):n instanceof ou?function(t){return t.op.toString()+" {"+t.getFilters().map(MV).join(" ,")+"}"}(n):"Filter"}class hZ extends ji{constructor(e,t,r){super(e,t,r),this.key=$t.fromName(r.referenceValue)}matches(e){const t=$t.comparator(e.key,this.key);return this.matchesComparison(t)}}class dZ extends ji{constructor(e,t){super(e,"in",t),this.keys=RV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pZ extends ji{constructor(e,t){super(e,"not-in",t),this.keys=RV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$t.fromName(r.referenceValue))}class mZ extends ji{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gI(t)&&X_(t.arrayValue,this.value)}}class gZ extends ji{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&X_(this.value.arrayValue,t)}}class yZ extends ji{constructor(e,t){super(e,"not-in",t)}matches(e){if(X_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!X_(this.value.arrayValue,t)}}class vZ extends ji{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>X_(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function zD(n,e=null,t=[],r=[],i=null,s=null,o=null){return new _Z(n,e,t,r,i,s,o)}function yI(n){const e=gn(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lg(r)).join(",")),e.ue=t}return e.ue}function vI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VD(n.startAt,e.startAt)&&VD(n.endAt,e.endAt)}function gR(n){return $t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xZ(n,e,t,r,i,s,o,a){return new rb(n,e,t,r,i,s,o,a)}function _I(n){return new rb(n)}function HD(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wZ(n){return n.collectionGroup!==null}function w_(n){const e=gn(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vi(xs.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new yA(s,r))}),t.has(xs.keyField().canonicalString())||e.ce.push(new yA(xs.keyField(),r))}return e.ce}function Yl(n){const e=gn(n);return e.le||(e.le=AZ(e,w_(n))),e.le}function AZ(n,e){if(n.limitType==="F")return zD(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new yA(i.field,s)});const t=n.endAt?new gA(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gA(n.startAt.position,n.startAt.inclusive):null;return zD(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function yR(n,e,t){return new rb(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ib(n,e){return vI(Yl(n),Yl(e))&&n.limitType===e.limitType}function PV(n){return`${yI(Yl(n))}|lt:${n.limitType}`}function og(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>MV(i)).join(", ")}]`),tb(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Lg(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Lg(i)).join(",")),`Target(${r})`}(Yl(n))}; limitType=${n.limitType})`}function sb(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$t.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of w_(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=jD(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,w_(r),i)||r.endAt&&!function(o,a,l){const u=jD(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,w_(r),i))}(n,e)}function EZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function IV(n){return(e,t)=>{let r=!1;for(const i of w_(n)){const s=bZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bZ(n,e,t){const r=n.field.isKeyField()?$t.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Dg(l,u):tn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xh(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ=new $r($t.comparator);function Pc(){return SZ}const kV=new $r($t.comparator);function s_(...n){let e=kV;for(const t of n)e=e.insert(t.key,t);return e}function OV(n){let e=kV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qd(){return A_()}function DV(){return A_()}function A_(){return new kp(n=>n.toString(),(n,e)=>n.isEqual(e))}const TZ=new $r($t.comparator),CZ=new Vi($t.comparator);function Bn(...n){let e=CZ;for(const t of n)e=e.add(t);return e}const MZ=new Vi(jn);function RZ(){return MZ}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mA(e)?"-0":e}}function LV(n){return{integerValue:""+n}}function PZ(n,e){return rZ(e)?LV(e):xI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this._=void 0}}function IZ(n,e,t){return n instanceof vA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mI(s)&&(s=nb(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Y_?BV(n,e):n instanceof Q_?FV(n,e):function(i,s){const o=NV(i,s),a=GD(o)+GD(i.Pe);return pR(o)&&pR(i.Pe)?LV(a):xI(i.serializer,a)}(n,e)}function kZ(n,e,t){return n instanceof Y_?BV(n,e):n instanceof Q_?FV(n,e):t}function NV(n,e){return n instanceof _A?function(r){return pR(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class vA extends ob{}class Y_ extends ob{constructor(e){super(),this.elements=e}}function BV(n,e){const t=UV(e);for(const r of n.elements)t.some(i=>su(i,r))||t.push(r);return{arrayValue:{values:t}}}class Q_ extends ob{constructor(e){super(),this.elements=e}}function FV(n,e){let t=UV(e);for(const r of n.elements)t=t.filter(i=>!su(i,r));return{arrayValue:{values:t}}}class _A extends ob{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function GD(n){return pi(n.integerValue||n.doubleValue)}function UV(n){return gI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function OZ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Y_&&i instanceof Y_||r instanceof Q_&&i instanceof Q_?Og(r.elements,i.elements,su):r instanceof _A&&i instanceof _A?su(r.Pe,i.Pe):r instanceof vA&&i instanceof vA}(n.transform,e.transform)}class DZ{constructor(e,t){this.version=e,this.transformResults=t}}class Ca{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ca}static exists(e){return new Ca(void 0,e)}static updateTime(e){return new Ca(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hw(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}let ab=class{};function jV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wI(n.key,Ca.none()):new L0(n.key,n.data,Ca.none());{const t=n.data,r=Mo.empty();let i=new Vi(xs.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new wh(n.key,r,new Xo(i.toArray()),Ca.none())}}function LZ(n,e,t){n instanceof L0?function(i,s,o){const a=i.value.clone(),l=WD(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof wh?function(i,s,o){if(!Hw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=WD(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(VV(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function E_(n,e,t,r){return n instanceof L0?function(s,o,a,l){if(!Hw(s.precondition,o))return a;const u=s.value.clone(),c=$D(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof wh?function(s,o,a,l){if(!Hw(s.precondition,o))return a;const u=$D(s.fieldTransforms,l,o),c=o.data;return c.setAll(VV(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Hw(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function NZ(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=NV(r.transform,i||null);s!=null&&(t===null&&(t=Mo.empty()),t.set(r.field,s))}return t||null}function qD(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Og(r,i,(s,o)=>OZ(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class L0 extends ab{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wh extends ab{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function WD(n,e,t){const r=new Map;ir(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kZ(o,a,t[i]))}return r}function $D(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,IZ(s,o,e))}return r}class wI extends ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BZ extends ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&LZ(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=E_(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=E_(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=DV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=jV(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(un.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&Og(this.mutations,e.mutations,(t,r)=>qD(t,r))&&Og(this.baseMutations,e.baseMutations,(t,r)=>qD(t,r))}}class AI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ir(e.mutations.length===r.length);let i=function(){return TZ}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new AI(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi,Hn;function VZ(n){switch(n){default:return tn();case st.CANCELLED:case st.UNKNOWN:case st.DEADLINE_EXCEEDED:case st.RESOURCE_EXHAUSTED:case st.INTERNAL:case st.UNAVAILABLE:case st.UNAUTHENTICATED:return!1;case st.INVALID_ARGUMENT:case st.NOT_FOUND:case st.ALREADY_EXISTS:case st.PERMISSION_DENIED:case st.FAILED_PRECONDITION:case st.ABORTED:case st.OUT_OF_RANGE:case st.UNIMPLEMENTED:case st.DATA_LOSS:return!0}}function zV(n){if(n===void 0)return Rc("GRPC error has no .code"),st.UNKNOWN;switch(n){case Mi.OK:return st.OK;case Mi.CANCELLED:return st.CANCELLED;case Mi.UNKNOWN:return st.UNKNOWN;case Mi.DEADLINE_EXCEEDED:return st.DEADLINE_EXCEEDED;case Mi.RESOURCE_EXHAUSTED:return st.RESOURCE_EXHAUSTED;case Mi.INTERNAL:return st.INTERNAL;case Mi.UNAVAILABLE:return st.UNAVAILABLE;case Mi.UNAUTHENTICATED:return st.UNAUTHENTICATED;case Mi.INVALID_ARGUMENT:return st.INVALID_ARGUMENT;case Mi.NOT_FOUND:return st.NOT_FOUND;case Mi.ALREADY_EXISTS:return st.ALREADY_EXISTS;case Mi.PERMISSION_DENIED:return st.PERMISSION_DENIED;case Mi.FAILED_PRECONDITION:return st.FAILED_PRECONDITION;case Mi.ABORTED:return st.ABORTED;case Mi.OUT_OF_RANGE:return st.OUT_OF_RANGE;case Mi.UNIMPLEMENTED:return st.UNIMPLEMENTED;case Mi.DATA_LOSS:return st.DATA_LOSS;default:return tn()}}(Hn=Mi||(Mi={}))[Hn.OK=0]="OK",Hn[Hn.CANCELLED=1]="CANCELLED",Hn[Hn.UNKNOWN=2]="UNKNOWN",Hn[Hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hn[Hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hn[Hn.NOT_FOUND=5]="NOT_FOUND",Hn[Hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hn[Hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hn[Hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hn[Hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hn[Hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hn[Hn.ABORTED=10]="ABORTED",Hn[Hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hn[Hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hn[Hn.INTERNAL=13]="INTERNAL",Hn[Hn.UNAVAILABLE=14]="UNAVAILABLE",Hn[Hn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zZ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=new Zf([4294967295,4294967295],0);function KD(n){const e=zZ().encode(n),t=new dV;return t.update(e),new Uint8Array(t.digest())}function JD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zf([t,r],0),new Zf([i,s],0)]}class EI{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new o_(`Invalid padding: ${t}`);if(r<0)throw new o_(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new o_(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new o_(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Zf.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Zf.fromNumber(r)));return i.compare(HZ)===1&&(i=new Zf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=KD(e),[r,i]=JD(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new EI(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=KD(e),[r,i]=JD(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class o_ extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,N0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new lb(un.min(),i,new $r(jn),Pc(),Bn())}}class N0{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new N0(r,t,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class HV{constructor(e,t){this.targetId=e,this.me=t}}class GV{constructor(e,t,r=As.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XD{constructor(){this.fe=0,this.ge=YD(),this.pe=As.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Bn(),t=Bn(),r=Bn();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tn()}}),new N0(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=YD()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ir(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GZ{constructor(e){this.Be=e,this.Le=new Map,this.ke=Pc(),this.qe=c1(),this.Qe=c1(),this.Ke=new $r(jn)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:tn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(gR(s))if(r===0){const o=new $t(s.path);this.We(t,o,Fs.newNoDocument(o,un.min()))}else ir(r===1);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=uh(r).toUint8Array()}catch(l){if(l instanceof AV)return kg("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new EI(o,i,s)}catch(l){return kg(l instanceof o_?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Be.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&gR(a.target)){const l=new $t(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Fs.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Bn();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new lb(e,t,this.Ke,this.ke,r);return this.ke=Pc(),this.qe=c1(),this.Qe=c1(),this.Ke=new $r(jn),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new XD,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Vi(jn),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Vi(jn),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Mt("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new XD),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function c1(){return new $r($t.comparator)}function YD(){return new $r($t.comparator)}const qZ={asc:"ASCENDING",desc:"DESCENDING"},WZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$Z={and:"AND",or:"OR"};class KZ{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vR(n,e){return n.useProto3Json||tb(e)?e:{value:e}}function xA(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JZ(n,e){return xA(n,e.toTimestamp())}function Ql(n){return ir(!!n),un.fromTimestamp(function(t){const r=lh(t);return new Dr(r.seconds,r.nanos)}(n))}function bI(n,e){return _R(n,e).canonicalString()}function _R(n,e){const t=function(i){return new Or(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function WV(n){const e=Or.fromString(n);return ir(YV(e)),e}function xR(n,e){return bI(n.databaseId,e.path)}function pT(n,e){const t=WV(e);if(t.get(1)!==n.databaseId.projectId)throw new Vt(st.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Vt(st.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $t(KV(t))}function $V(n,e){return bI(n.databaseId,e)}function XZ(n){const e=WV(n);return e.length===4?Or.emptyPath():KV(e)}function wR(n){return new Or(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KV(n){return ir(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function QD(n,e,t){return{name:xR(n,e),fields:t.value.mapValue.fields}}function YZ(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:tn()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(ir(c===void 0||typeof c=="string"),As.fromBase64String(c||"")):(ir(c===void 0||c instanceof Buffer||c instanceof Uint8Array),As.fromUint8Array(c||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?st.UNKNOWN:zV(u.code);return new Vt(c,u.message||"")}(o);t=new GV(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pT(n,r.document.name),s=Ql(r.document.updateTime),o=r.document.createTime?Ql(r.document.createTime):un.min(),a=new Mo({mapValue:{fields:r.document.fields}}),l=Fs.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];t=new Gw(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pT(n,r.document),s=r.readTime?Ql(r.readTime):un.min(),o=Fs.newNoDocument(i,s),a=r.removedTargetIds||[];t=new Gw([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pT(n,r.document),s=r.removedTargetIds||[];t=new Gw([],s,i,null)}else{if(!("filter"in e))return tn();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jZ(i,s),a=r.targetId;t=new HV(a,o)}}return t}function QZ(n,e){let t;if(e instanceof L0)t={update:QD(n,e.key,e.value)};else if(e instanceof wI)t={delete:xR(n,e.key)};else if(e instanceof wh)t={update:QD(n,e.key,e.data),updateMask:aee(e.fieldMask)};else{if(!(e instanceof BZ))return tn();t={verify:xR(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof vA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Y_)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Q_)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _A)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw tn()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JZ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:tn()}(n,e.precondition)),t}function ZZ(n,e){return n&&n.length>0?(ir(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Ql(i.updateTime):Ql(s);return o.isEqual(un.min())&&(o=Ql(s)),new DZ(o,i.transformResults||[])}(t,e))):[]}function eee(n,e){return{documents:[$V(n,e.path)]}}function tee(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$V(n,i);const s=function(u){if(u.length!==0)return XV(ou.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(h){return{field:ag(h.field),direction:iee(h.dir)}}(c))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=vR(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:t,parent:i}}function nee(n){let e=XZ(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ir(r===1);const c=t.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];t.where&&(s=function(f){const h=JV(f);return h instanceof ou&&TV(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(h=>function(g){return new yA(lg(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,tb(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new gA(p,h)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new gA(p,h)}(t.endAt)),xZ(e,i,o,s,a,"F",l,u)}function ree(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JV(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=lg(t.unaryFilter.field);return ji.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lg(t.unaryFilter.field);return ji.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lg(t.unaryFilter.field);return ji.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lg(t.unaryFilter.field);return ji.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}(n):n.fieldFilter!==void 0?function(t){return ji.create(lg(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ou.create(t.compositeFilter.filters.map(r=>JV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tn()}}(t.compositeFilter.op))}(n):tn()}function iee(n){return qZ[n]}function see(n){return WZ[n]}function oee(n){return $Z[n]}function ag(n){return{fieldPath:n.canonicalString()}}function lg(n){return xs.fromServerFormat(n.fieldPath)}function XV(n){return n instanceof ji?function(t){if(t.op==="=="){if(UD(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NAN"}};if(FD(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(UD(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NOT_NAN"}};if(FD(t.value))return{unaryFilter:{field:ag(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ag(t.field),op:see(t.op),value:t.value}}}(n):n instanceof ou?function(t){const r=t.getFilters().map(i=>XV(i));return r.length===1?r[0]:{compositeFilter:{op:oee(t.op),filters:r}}}(n):tn()}function aee(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function YV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,i,s=un.min(),o=un.min(),a=As.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Kf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lee{constructor(e){this.ht=e}}function uee(n){const e=nee({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yR(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cee{constructor(){this.ln=new fee}addToCollectionParentIndex(e,t){return this.ln.add(t),Qe.resolve()}getCollectionParents(e,t){return Qe.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Qe.resolve()}deleteFieldIndex(e,t){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,t){return Qe.resolve()}getDocumentsMatchingTarget(e,t){return Qe.resolve(null)}getIndexType(e,t){return Qe.resolve(0)}getFieldIndexes(e,t){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,t){return Qe.resolve(ah.min())}getMinOffsetFromCollectionGroup(e,t){return Qe.resolve(ah.min())}updateCollectionGroup(e,t,r){return Qe.resolve()}updateIndexEntries(e,t){return Qe.resolve()}}class fee{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vi(Or.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vi(Or.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class So{static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(41943040,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ng(0)}static Qn(){return new Ng(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL([n,e],[t,r]){const i=jn(n,t);return i===0?jn(e,r):i}class hee{constructor(e){this.Gn=e,this.buffer=new Vi(eL),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dee{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Mt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){my(t)?Mt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await py(t)}await this.Yn(3e5)})}}class pee{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Qe.resolve(eb.oe);const r=new hee(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Mt("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(ZD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZD):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),sg()<=Nn.DEBUG&&Mt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function mee(n,e){return new pee(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gee{constructor(){this.changes=new kp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Qe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yee{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&E_(r.mutation,i,Xo.empty(),Dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bn()){const i=qd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=s_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=qd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Pc();const o=A_(),a=function(){return A_()}();return t.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof wh)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),E_(c.mutation,u,c.mutation.getFieldMask(),Dr.now())):o.set(u.key,Xo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),t.forEach((u,c)=>{var f;return a.set(u,new yee(c,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const r=A_();let i=new $r((o,a)=>o-a),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=t.get(l);if(u===null)return;let c=r.get(l)||Xo.empty();c=a.applyToLocalView(u,c),r.set(l,c);const f=(i.get(a.batchId)||Bn()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,f=DV();c.forEach(h=>{if(!s.has(h)){const p=jV(t.get(h),r.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return $t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wZ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Qe.resolve(qd());let a=-1,l=s;return o.next(u=>Qe.forEach(u,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{l=l.insert(c,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Bn())).next(c=>({batchId:a,changes:OV(c)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $t(t)).next(r=>{let i=s_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=s_();return this.indexManager.getCollectionParents(e,s).next(a=>Qe.forEach(a,l=>{const u=function(f,h){return new rb(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((f,h)=>{o=o.insert(f,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Fs.newInvalidDocument(c)))});let a=s_();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&E_(c.mutation,u,Xo.empty(),Dr.now()),sb(t,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ee{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Qe.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ql(i.createTime)}}(t)),Qe.resolve()}getNamedQuery(e,t){return Qe.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:uee(i.bundledQuery),readTime:Ql(i.readTime)}}(t)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xee{constructor(){this.overlays=new $r($t.comparator),this.dr=new Map}getOverlay(e,t){return Qe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qd();return Qe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),Qe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),Qe.resolve()}getOverlaysForCollection(e,t,r){const i=qd(),s=t.length+1,o=new $t(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Qe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new $r((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=qd(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=qd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return Qe.resolve(a)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new UZ(t,r));let s=this.dr.get(t);s===void 0&&(s=Bn(),this.dr.set(t,s)),this.dr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(){this.sessionToken=As.EMPTY_BYTE_STRING}getSessionToken(e){return Qe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Er=new Vi(is.Ar),this.Rr=new Vi(is.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){const r=new is(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new is(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new $t(new Or([])),r=new is(t,e),i=new is(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new $t(new Or([])),r=new is(t,e),i=new is(t,e+1);let s=Bn();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new is(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class is{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return $t.comparator(e.key,t.key)||jn(e.br,t.br)}static Vr(e,t){return jn(e.br,t.br)||$t.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Vi(is.Ar)}checkEmpty(e){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new FZ(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new is(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(e,t){return Qe.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new is(t,0),i=new is(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vi(jn);return t.forEach(i=>{const s=new is(i,0),o=new is(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),Qe.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;$t.isDocumentKey(s)||(s=s.child(""));const o=new is(new $t(s),0);let a=new Vi(jn);return this.vr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.br)),!0)},o),Qe.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ir(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return Qe.forEach(t.mutations,i=>{const s=new is(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){const r=new is(t,0),i=this.vr.firstAfterOrEqual(r);return Qe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Qe.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eee{constructor(e){this.Nr=e,this.docs=function(){return new $r($t.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Qe.resolve(r?r.document.mutableCopy():Fs.newInvalidDocument(t))}getEntries(e,t){let r=Pc();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Fs.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Pc();const o=t.path,a=new $t(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ZQ(QQ(c),r)<=0||(i.has(c.key)||sb(t,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){tn()}Br(e,t){return Qe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bee(this)}getSize(e){return Qe.resolve(this.size)}}class bee extends gee{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),Qe.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{constructor(e){this.persistence=e,this.Lr=new kp(t=>yI(t),vI),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.kr=0,this.qr=new SI,this.targetCount=0,this.Qr=Ng.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),Qe.resolve()}Un(e){this.Lr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new Ng(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Qe.resolve()}updateTargetData(e,t){return this.Un(t),Qe.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Lr.get(t)||null;return Qe.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),Qe.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Qe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return Qe.resolve(r)}containsKey(e,t){return Qe.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t){this.Kr={},this.overlays={},this.$r=new eb(0),this.Ur=!1,this.Ur=!0,this.Wr=new wee,this.referenceDelegate=e(this),this.Gr=new See(this),this.indexManager=new cee,this.remoteDocumentCache=function(i){return new Eee(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new lee(t),this.jr=new _ee(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xee,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new Aee(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Mt("MemoryPersistence","Starting transaction:",e);const i=new Tee(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return Qe.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class Tee extends tZ{constructor(e){super(),this.currentSequenceNumber=e}}class TI{constructor(e){this.persistence=e,this.Zr=new SI,this.Xr=null}static ei(e){return new TI(e)}get ti(){if(this.Xr)return this.Xr;throw tn()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),Qe.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Qe.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.ti,r=>{const i=$t.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,un.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Qe.or([()=>Qe.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class wA{constructor(e,t){this.persistence=e,this.ri=new kp(r=>iZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mee(this,t)}static ei(e,t){return new wA(e,t)}Hr(){}Jr(e){return Qe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return Qe.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?Qe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(e,o=>this.ir(e,o,t).next(a=>{a||(r++,s.removeEntry(o,un.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Qe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Qe.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),Qe.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Qe.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vw(e.data.value)),t}ir(e,t,r){return Qe.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return Qe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Bn(),i=Bn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new CI(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cee{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return oJ()?8:nZ(Hs())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Cee;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(sg()<=Nn.DEBUG&&Mt("QueryEngine","SDK will not create cache indexes for query:",og(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Qe.resolve()):(sg()<=Nn.DEBUG&&Mt("QueryEngine","Query:",og(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(sg()<=Nn.DEBUG&&Mt("QueryEngine","The SDK decides to create cache indexes for query:",og(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yl(t))):Qe.resolve())}Xi(e,t){if(HD(t))return Qe.resolve(null);let r=Yl(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=yR(t,null,"F"),r=Yl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Bn(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.rs(t,a);return this.ss(t,u,o,l.readTime)?this.Xi(e,yR(t,null,"F")):this.os(e,u,t,l)}))})))}es(e,t,r,i){return HD(t)||i.isEqual(un.min())?Qe.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?Qe.resolve(null):(sg()<=Nn.DEBUG&&Mt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),og(t)),this.os(e,o,t,YQ(i,-1)).next(a=>a))})}rs(e,t){let r=new Vi(IV(e));return t.forEach((i,s)=>{sb(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return sg()<=Nn.DEBUG&&Mt("QueryEngine","Using full collection scan to execute query:",og(t)),this.Zi.getDocumentsMatchingQuery(e,t,ah.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new $r(jn),this.cs=new kp(s=>yI(s),vI),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vee(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function Pee(n,e,t,r){return new Ree(n,e,t,r)}async function ZV(n,e){const t=gn(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Bn();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function Iee(n,e){const t=gn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const f=u.batch,h=f.keys();let p=Qe.resolve();return h.forEach(g=>{p=p.next(()=>c.getEntry(l,g)).next(w=>{const _=u.docVersions.get(g);ir(_!==null),w.version.compareTo(_)<0&&(f.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),c.addEntry(w)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Bn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function e6(n){const e=gn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function kee(n,e){const t=gn(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const a=[];e.targetChanges.forEach((c,f)=>{const h=i.get(f);if(!h)return;a.push(t.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(s,c.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(As.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(f,p),function(w,_,v){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,p,c)&&a.push(t.Gr.updateTargetData(s,p))});let l=Pc(),u=Bn();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Oee(s,o,e.documentUpdates).next(c=>{l=c.Is,u=c.ds})),!r.isEqual(un.min())){const c=t.Gr.getLastRemoteSnapshotVersion(s).next(f=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(t.us=i,s))}function Oee(n,e,t){let r=Bn(),i=Bn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Pc();return t.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(un.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Mt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Is:o,ds:i}})}function Dee(n,e){const t=gn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Lee(n,e){const t=gn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,Qe.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new Kf(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function AR(n,e,t){const r=gn(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!my(o))throw o;Mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function tL(n,e,t){const r=gn(n);let i=un.min(),s=Bn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const f=gn(l),h=f.cs.get(c);return h!==void 0?Qe.resolve(f.us.get(h)):f.Gr.getTargetData(u,c)}(r,o,Yl(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:un.min(),t?s:Bn())).next(a=>(Nee(r,EZ(e),a),{documents:a,Es:s})))}function Nee(n,e,t){let r=n.ls.get(e)||un.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}class nL{constructor(){this.activeTargetIds=RZ()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bee{constructor(){this._o=new nL,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new nL,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fee{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1=null;function mT(){return f1===null?f1=function(){return 268435456+Math.round(2147483648*Math.random())}():f1++,"0x"+f1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jee{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="WebChannelConnection";class Vee extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const a=mT(),l=this.No(t,r.toUriEncodedString());Mt("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(u,s,o),this.Lo(t,l,u,i).then(c=>(Mt("RestConnection",`Received RPC '${t}' ${a}: `,c),c),c=>{throw kg("RestConnection",`RPC '${t}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}ko(t,r,i,s,o,a){return this.Oo(t,r,i,s,o)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dy}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){const i=Uee[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){const s=mT();return new Promise((o,a)=>{const l=new pV;l.setWithCredentials(!0),l.listenOnce(mV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case jw.NO_ERROR:const c=l.getResponseJson();Mt(Ps,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case jw.TIMEOUT:Mt(Ps,`RPC '${e}' ${s} timed out`),a(new Vt(st.DEADLINE_EXCEEDED,"Request time out"));break;case jw.HTTP_ERROR:const f=l.getStatus();if(Mt(Ps,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(st).indexOf(v)>=0?v:st.UNKNOWN}(p.status);a(new Vt(g,p.message))}else a(new Vt(st.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Vt(st.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{Mt(Ps,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Mt(Ps,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",u,r,15)})}qo(e,t,r){const i=mT(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vV(),a=yV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Bo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Mt(Ps,`Creating RPC '${e}' stream ${i}: ${c}`,l);const f=o.createWebChannel(c,l);let h=!1,p=!1;const g=new jee({Eo:_=>{p?Mt(Ps,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(Mt(Ps,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Mt(Ps,`RPC '${e}' stream ${i} sending:`,_),f.send(_))},Ao:()=>f.close()}),w=(_,v,A)=>{_.listen(v,S=>{try{A(S)}catch(b){setTimeout(()=>{throw b},0)}})};return w(f,i_.EventType.OPEN,()=>{p||(Mt(Ps,`RPC '${e}' stream ${i} transport opened.`),g.So())}),w(f,i_.EventType.CLOSE,()=>{p||(p=!0,Mt(Ps,`RPC '${e}' stream ${i} transport closed`),g.Do())}),w(f,i_.EventType.ERROR,_=>{p||(p=!0,kg(Ps,`RPC '${e}' stream ${i} transport errored:`,_),g.Do(new Vt(st.UNAVAILABLE,"The operation could not be completed")))}),w(f,i_.EventType.MESSAGE,_=>{var v;if(!p){const A=_.data[0];ir(!!A);const S=A,b=(S==null?void 0:S.error)||((v=S[0])===null||v===void 0?void 0:v.error);if(b){Mt(Ps,`RPC '${e}' stream ${i} received error:`,b);const C=b.status;let L=function(O){const M=Mi[O];if(M!==void 0)return zV(M)}(C),R=b.message;L===void 0&&(L=st.INTERNAL,R="Unknown error status: "+C+" with message "+b.message),p=!0,g.Do(new Vt(L,R)),f.close()}else Mt(Ps,`RPC '${e}' stream ${i} received:`,A),g.vo(A)}}),w(a,gV.STAT_EVENT,_=>{_.stat===hR.PROXY?Mt(Ps,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===hR.NOPROXY&&Mt(Ps,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.bo()},0),g}}function gT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(n){return new KZ(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Mt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new t6(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===st.RESOURCE_EXHAUSTED?(Rc(t.toString()),Rc("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===st.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new Vt(st.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return Mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zee extends n6{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=YZ(this.serializer,e),r=function(s){if(!("targetChange"in s))return un.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?un.min():o.readTime?Ql(o.readTime):un.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=wR(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=gR(l)?{documents:eee(s,l)}:{query:tee(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qV(s,o.resumeToken);const u=vR(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(un.min())>0){a.readTime=xA(s,o.snapshotVersion.toTimestamp());const u=vR(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=ree(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=wR(this.serializer),t.removeTarget=e,this.c_(t)}}class Hee extends n6{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return ir(!!e.streamToken),this.lastStreamToken=e.streamToken,ir(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ir(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=ZZ(e.writeResults,e.commitTime),r=Ql(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=wR(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>QZ(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Vt(st.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,_R(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Vt(st.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,_R(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===st.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Vt(st.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class qee{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Rc(t),this.C_=!1):Mt("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wee{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Op(this)&&(Mt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=gn(l);u.k_.add(4),await B0(u),u.K_.set("Unknown"),u.k_.delete(4),await cb(u)}(this))})}),this.K_=new qee(r,i)}}async function cb(n){if(Op(n))for(const e of n.q_)await e(!0)}async function B0(n){for(const e of n.q_)await e(!1)}function r6(n,e){const t=gn(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),II(t)?PI(t):gy(t).s_()&&RI(t,e))}function MI(n,e){const t=gn(n),r=gy(t);t.L_.delete(e),r.s_()&&i6(t,e),t.L_.size===0&&(r.s_()?r.a_():Op(t)&&t.K_.set("Unknown"))}function RI(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(un.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gy(n).V_(e)}function i6(n,e){n.U_.xe(e),gy(n).m_(e)}function PI(n){n.U_=new GZ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),gy(n).start(),n.K_.F_()}function II(n){return Op(n)&&!gy(n).i_()&&n.L_.size>0}function Op(n){return gn(n).k_.size===0}function s6(n){n.U_=void 0}async function $ee(n){n.K_.set("Online")}async function Kee(n){n.L_.forEach((e,t)=>{RI(n,e)})}async function Jee(n,e){s6(n),II(n)?(n.K_.O_(e),PI(n)):n.K_.set("Unknown")}async function Xee(n,e,t){if(n.K_.set("Online"),e instanceof GV&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(n,e)}catch(r){Mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await AA(n,r)}else if(e instanceof Gw?n.U_.$e(e):e instanceof HV?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(un.min()))try{const r=await e6(n.localStore);t.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.L_.get(u);c&&s.L_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.L_.get(l);if(!c)return;s.L_.set(l,c.withResumeToken(As.EMPTY_BYTE_STRING,c.snapshotVersion)),i6(s,l);const f=new Kf(c.target,l,u,c.sequenceNumber);RI(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){Mt("RemoteStore","Failed to raise snapshot:",r),await AA(n,r)}}async function AA(n,e,t){if(!my(e))throw e;n.k_.add(1),await B0(n),n.K_.set("Offline"),t||(t=()=>e6(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Mt("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await cb(n)})}function o6(n,e){return e().catch(t=>AA(n,t,e))}async function fb(n){const e=gn(n),t=fh(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;Yee(e);)try{const i=await Dee(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,Qee(e,i)}catch(i){await AA(e,i)}a6(e)&&l6(e)}function Yee(n){return Op(n)&&n.B_.length<10}function Qee(n,e){n.B_.push(e);const t=fh(n);t.s_()&&t.f_&&t.g_(e.mutations)}function a6(n){return Op(n)&&!fh(n).i_()&&n.B_.length>0}function l6(n){fh(n).start()}async function Zee(n){fh(n).w_()}async function ete(n){const e=fh(n);for(const t of n.B_)e.g_(t.mutations)}async function tte(n,e,t){const r=n.B_.shift(),i=AI.from(r,e,t);await o6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await fb(n)}async function nte(n,e){e&&fh(n).f_&&await async function(r,i){if(function(o){return VZ(o)&&o!==st.ABORTED}(i.code)){const s=r.B_.shift();fh(r).__(),await o6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fb(r)}}(n,e),a6(n)&&l6(n)}async function iL(n,e){const t=gn(n);t.asyncQueue.verifyOperationInProgress(),Mt("RemoteStore","RemoteStore received new credentials");const r=Op(t);t.k_.add(3),await B0(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await cb(t)}async function rte(n,e){const t=gn(n);e?(t.k_.delete(2),await cb(t)):e||(t.k_.add(2),await B0(t),t.K_.set("Unknown"))}function gy(n){return n.W_||(n.W_=function(t,r,i){const s=gn(t);return s.b_(),new zee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:$ee.bind(null,n),mo:Kee.bind(null,n),po:Jee.bind(null,n),R_:Xee.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),II(n)?PI(n):n.K_.set("Unknown")):(await n.W_.stop(),s6(n))})),n.W_}function fh(n){return n.G_||(n.G_=function(t,r,i){const s=gn(t);return s.b_(),new Hee(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Zee.bind(null,n),po:nte.bind(null,n),p_:ete.bind(null,n),y_:tte.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await fb(n)):(await n.G_.stop(),n.B_.length>0&&(Mt("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _c,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new kI(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Vt(st.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function OI(n,e){if(Rc("AsyncQueue",`${e}: ${n}`),my(n))return new Vt(st.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{static emptySet(e){return new Tg(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||$t.comparator(t.key,r.key):(t,r)=>$t.comparator(t.key,r.key),this.keyedMap=s_(),this.sortedSet=new $r(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Tg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.z_=new $r($t.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):tn():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bg{constructor(e,t,r,i,s,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Bg(e,t,Tg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ib(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class ste{constructor(){this.queries=oL(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=gn(t),s=i.queries;i.queries=oL(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Vt(st.ABORTED,"Firestore shutting down"))}}function oL(){return new kp(n=>PV(n),ib)}async function u6(n,e){const t=gn(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new ite,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await t.onListen(i,!0);break;case 1:s.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const a=OI(o,`Initialization of query '${og(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&DI(t)}async function c6(n,e){const t=gn(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ote(n,e){const t=gn(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&DI(t)}function ate(n,e,t){const r=gn(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function DI(n){n.X_.forEach(e=>{e.next()})}var ER,aL;(aL=ER||(ER={})).na="default",aL.Cache="cache";class f6{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Bg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ER.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.key=e}}class d6{constructor(e){this.key=e}}class lte{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Bn(),this.mutatedKeys=Bn(),this.Va=IV(e),this.ma=new Tg(this.Va)}get fa(){return this.Ea}ga(e,t){const r=t?t.pa:new sL,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const h=i.get(c),p=sb(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),w=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let _=!1;h&&p?h.data.isEqual(p.data)?g!==w&&(r.track({type:3,doc:p}),_=!0):this.ya(h,p)||(r.track({type:2,doc:p}),_=!0,(l&&this.Va(p,l)>0||u&&this.Va(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),_=!0):h&&!p&&(r.track({type:1,doc:h}),_=!0,(l||u)&&(a=!0)),_&&(p?(o=o.add(p),s=w?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((c,f)=>function(p,g){const w=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return w(p)-w(g)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=t&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,u=l!==this.Aa;return this.Aa=l,o.length!==0||u?{snapshot:new Bg(this.query,e.ma,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sL,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Bn(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new d6(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new h6(r))}),t}va(e){this.Ea=e.Es,this.Ra=Bn();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Bg.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ute{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cte{constructor(e){this.key=e,this.Fa=!1}}class fte{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new kp(a=>PV(a),ib),this.Oa=new Map,this.Na=new Set,this.Ba=new $r($t.comparator),this.La=new Map,this.ka=new SI,this.qa={},this.Qa=new Map,this.Ka=Ng.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function hte(n,e,t=!0){const r=_6(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await p6(r,e,t,!0),i}async function dte(n,e){const t=_6(n);await p6(t,e,!0,!1)}async function p6(n,e,t,r){const i=await Lee(n.localStore,Yl(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=await pte(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&r6(n.remoteStore,i),a}async function pte(n,e,t,r,i){n.Ua=(f,h,p)=>async function(w,_,v,A){let S=_.view.ga(v);S.ss&&(S=await tL(w.localStore,_.query,!1).then(({documents:R})=>_.view.ga(R,S)));const b=A&&A.targetChanges.get(_.targetId),C=A&&A.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(S,w.isPrimaryClient,b,C);return uL(w,_.targetId,L.ba),L.snapshot}(n,f,h,p);const s=await tL(n.localStore,e,!0),o=new lte(e,s.Es),a=o.ga(s.documents),l=N0.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,l);uL(n,t,u.ba);const c=new ute(e,t,o);return n.xa.set(e,c),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),u.snapshot}async function mte(n,e,t){const r=gn(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!ib(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await AR(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&MI(r.remoteStore,i.targetId),bR(r,i.targetId)}).catch(py)):(bR(r,i.targetId),await AR(r.localStore,i.targetId,!0))}async function gte(n,e){const t=gn(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),MI(t.remoteStore,r.targetId))}async function yte(n,e,t){const r=bte(n);try{const i=await function(o,a){const l=gn(o),u=Dr.now(),c=a.reduce((p,g)=>p.add(g.key),Bn());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Pc(),w=Bn();return l.hs.getEntries(p,c).next(_=>{g=_,g.forEach((v,A)=>{A.isValidDocument()||(w=w.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(_=>{f=_;const v=[];for(const A of a){const S=NZ(A,f.get(A.key).overlayedDocument);S!=null&&v.push(new wh(A.key,S,EV(S.value.mapValue),Ca.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,v,a)}).next(_=>{h=_;const v=_.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(p,_.batchId,v)})}).then(()=>({batchId:h.batchId,changes:OV(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.qa[o.currentUser.toKey()];u||(u=new $r(jn)),u=u.insert(a,l),o.qa[o.currentUser.toKey()]=u}(r,i.batchId,t),await F0(r,i.changes),await fb(r.remoteStore)}catch(i){const s=OI(i,"Failed to persist write");t.reject(s)}}async function m6(n,e){const t=gn(n);try{const r=await kee(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.La.get(s);o&&(ir(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ir(o.Fa):i.removedDocuments.size>0&&(ir(o.Fa),o.Fa=!1))}),await F0(t,r,e)}catch(r){await py(r)}}function lL(n,e,t){const r=gn(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=gn(o);l.onlineState=a;let u=!1;l.queries.forEach((c,f)=>{for(const h of f.J_)h.ea(a)&&(u=!0)}),u&&DI(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vte(n,e,t){const r=gn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.La.get(e),s=i&&i.key;if(s){let o=new $r($t.comparator);o=o.insert(s,Fs.newNoDocument(s,un.min()));const a=Bn().add(s),l=new lb(un.min(),new Map,new $r(jn),o,a);await m6(r,l),r.Ba=r.Ba.remove(s),r.La.delete(e),LI(r)}else await AR(r.localStore,e,!1).then(()=>bR(r,e,t)).catch(py)}async function _te(n,e){const t=gn(n),r=e.batch.batchId;try{const i=await Iee(t.localStore,e);y6(t,r,null),g6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await F0(t,i)}catch(i){await py(i)}}async function xte(n,e,t){const r=gn(n);try{const i=await function(o,a){const l=gn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(ir(f!==null),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);y6(r,e,t),g6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await F0(r,i)}catch(i){await py(i)}}function g6(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function y6(n,e,t){const r=gn(n);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function bR(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||v6(n,r)})}function v6(n,e){n.Na.delete(e.path.canonicalString());const t=n.Ba.get(e);t!==null&&(MI(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),LI(n))}function uL(n,e,t){for(const r of t)r instanceof h6?(n.ka.addReference(r.key,e),wte(n,r)):r instanceof d6?(Mt("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||v6(n,r.key)):tn()}function wte(n,e){const t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(Mt("SyncEngine","New document in limbo: "+t),n.Na.add(r),LI(n))}function LI(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new $t(Or.fromString(e)),r=n.Ka.next();n.La.set(r,new cte(t)),n.Ba=n.Ba.insert(t,r),r6(n.remoteStore,new Kf(Yl(_I(t.path)),r,"TargetPurposeLimboResolution",eb.oe))}}async function F0(n,e,t){const r=gn(n),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,t).then(u=>{var c;if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:(c=t==null?void 0:t.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=CI.zi(l.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,u){const c=gn(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(u,h=>Qe.forEach(h.Wi,p=>c.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Qe.forEach(h.Gi,p=>c.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!my(f))throw f;Mt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=c.us.get(h),g=p.snapshotVersion,w=p.withLastLimboFreeSnapshotVersion(g);c.us=c.us.insert(h,w)}}}(r.localStore,s))}async function Ate(n,e){const t=gn(n);if(!t.currentUser.isEqual(e)){Mt("SyncEngine","User change. New user:",e.toKey());const r=await ZV(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Vt(st.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await F0(t,r.Ts)}}function Ete(n,e){const t=gn(n),r=t.La.get(e);if(r&&r.Fa)return Bn().add(r.key);{let i=Bn();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const a=t.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function _6(n){const e=gn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=m6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ete.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vte.bind(null,e),e.Ma.R_=ote.bind(null,e.eventManager),e.Ma.Wa=ate.bind(null,e.eventManager),e}function bte(n){const e=gn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_te.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xte.bind(null,e),e}class EA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ub(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return Pee(this.persistence,new Mee,e.initialUser,this.serializer)}ja(e){return new QV(TI.ei,this.serializer)}za(e){return new Bee}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}EA.provider={build:()=>new EA};class Ste extends EA{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){ir(this.persistence.referenceDelegate instanceof wA);const r=this.persistence.referenceDelegate.garbageCollector;return new dee(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new QV(r=>wA.ei(r,t),this.serializer)}}class SR{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lL(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ate.bind(null,this.syncEngine),await rte(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ste}()}createDatastore(e){const t=ub(e.databaseInfo.databaseId),r=function(s){return new Vee(s)}(e.databaseInfo);return function(s,o,a,l){return new Gee(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new Wee(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>lL(this.syncEngine,t,0),function(){return rL.p()?new rL:new Fee}())}createSyncEngine(e,t){return function(i,s,o,a,l,u,c){const f=new fte(i,s,o,a,l,u);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=gn(i);Mt("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await B0(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}SR.provider={build:()=>new SR};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Rc("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bs.UNAUTHENTICATED,this.clientId=xV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Mt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Mt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _c;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=OI(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yT(n,e){n.asyncQueue.verifyOperationInProgress(),Mt("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ZV(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cL(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Cte(n);Mt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>iL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>iL(e.remoteStore,i)),n._onlineComponents=e}async function Cte(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Mt("FirestoreClient","Using user provided OfflineComponentProvider");try{await yT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===st.FAILED_PRECONDITION||i.code===st.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;kg("Error using user provided cache. Falling back to memory cache: "+t),await yT(n,new EA)}}else Mt("FirestoreClient","Using default OfflineComponentProvider"),await yT(n,new Ste(void 0));return n._offlineComponents}async function w6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Mt("FirestoreClient","Using user provided OnlineComponentProvider"),await cL(n,n._uninitializedComponentsProvider._online)):(Mt("FirestoreClient","Using default OnlineComponentProvider"),await cL(n,new SR))),n._onlineComponents}function Mte(n){return w6(n).then(e=>e.syncEngine)}async function A6(n){const e=await w6(n),t=e.eventManager;return t.onListen=hte.bind(null,e.syncEngine),t.onUnlisten=mte.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dte.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gte.bind(null,e.syncEngine),t}function Rte(n,e,t={}){const r=new _c;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new x6({next:h=>{c.eu(),o.enqueueAndForget(()=>c6(s,f));const p=h.docs.has(a);!p&&h.fromCache?u.reject(new Vt(st.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Vt(st.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new f6(_I(a.path),c,{includeMetadataChanges:!0,ua:!0});return u6(s,f)}(await A6(n),n.asyncQueue,e,t,r)),r.promise}function Pte(n,e,t={}){const r=new _c;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new x6({next:h=>{c.eu(),o.enqueueAndForget(()=>c6(s,f)),h.fromCache&&l.source==="server"?u.reject(new Vt(st.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new f6(a,c,{includeMetadataChanges:!0,ua:!0});return u6(s,f)}(await A6(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(n,e,t){if(!t)throw new Vt(st.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ite(n,e,t,r){if(e===!0&&r===!0)throw new Vt(st.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function hL(n){if(!$t.isDocumentKey(n))throw new Vt(st.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dL(n){if($t.isDocumentKey(n))throw new Vt(st.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":tn()}function _l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Vt(st.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NI(n);throw new Vt(st.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Vt(st.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Vt(st.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ite("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=E6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Vt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Vt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Vt(st.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pL({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Vt(st.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Vt(st.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pL(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zQ;switch(r.type){case"firstParty":return new WQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Vt(st.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fL.get(t);r&&(Mt("ComponentProvider","Removing Datastore"),fL.delete(t),r.terminate())}(this),Promise.resolve()}}function kte(n,e,t,r={}){var i;const s=(n=_l(n,hb))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&kg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Bs.MOCK_USER;else{a=E5(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Vt(st.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Bs(u)}n._authCredentials=new HQ(new _V(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S6=class T6{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new T6(this.firestore,e,this._query)}};class Io{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Io(this.firestore,e,this._key)}}class eh extends S6{constructor(e,t,r){super(e,t,_I(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Io(this.firestore,null,new $t(e))}withConverter(e){return new eh(this.firestore,e,this._path)}}function Kr(n,e,...t){if(n=Pi(n),b6("collection","path",e),n instanceof hb){const r=Or.fromString(e,...t);return dL(r),new eh(n,null,r)}{if(!(n instanceof Io||n instanceof eh))throw new Vt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Or.fromString(e,...t));return dL(r),new eh(n.firestore,null,r)}}function Hr(n,e,...t){if(n=Pi(n),arguments.length===1&&(e=xV.newId()),b6("doc","path",e),n instanceof hb){const r=Or.fromString(e,...t);return hL(r),new Io(n,null,new $t(r))}{if(!(n instanceof Io||n instanceof eh))throw new Vt(st.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Or.fromString(e,...t));return hL(r),new Io(n.firestore,n instanceof eh?n.converter:null,new $t(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new t6(this,"async_queue_retry"),this.fu=()=>{const r=gT();r&&Mt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=gT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const t=gT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const t=new _c;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!my(e))throw e;Mt("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rc("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=kI.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&tn()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.Eu.indexOf(e);this.Eu.splice(t,1)}}class Dp extends hb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mL,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mL(e),this._firestoreClient=void 0,await e}}}function Ote(n,e){const t=typeof n=="object"?n:iI(),r=typeof n=="string"?n:"(default)",i=XE(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=x5("firestore");s&&kte(i,...s)}return i}function BI(n){if(n._terminated)throw new Vt(st.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Dte(n),n._firestoreClient}function Dte(n){var e,t,r;const i=n._freezeSettings(),s=function(a,l,u,c){return new aZ(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,E6(c.experimentalLongPollingOptions),c.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Tte(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fg(As.fromBase64String(e))}catch(t){throw new Vt(st.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fg(As.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Vt(st.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Vt(st.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Vt(st.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jn(this._lat,e._lat)||jn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lte=/^__.*__$/;class Nte{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wh(e,this.data,this.fieldMask,t,this.fieldTransforms):new L0(e,this.data,t,this.fieldTransforms)}}class C6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function M6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class VI{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new VI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return bA(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(M6(this.Mu)&&Lte.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Bte{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ub(e)}$u(e,t,r,i=!1){return new VI({Mu:e,methodName:t,Ku:r,path:xs.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zI(n){const e=n._freezeSettings(),t=ub(n._databaseId);return new Bte(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R6(n,e,t,r,i,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,e,t,i);HI("Data must be an object, but it was:",o,r);const a=P6(r,o);let l,u;if(s.merge)l=new Xo(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const h=TR(e,f,t);if(!o.contains(h))throw new Vt(st.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);k6(c,h)||c.push(h)}l=new Xo(c),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new Nte(new Mo(a),l,u)}class pb extends FI{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pb}}function Fte(n,e,t,r){const i=n.$u(1,e,t);HI("Data must be an object, but it was:",i,r);const s=[],o=Mo.empty();xh(r,(l,u)=>{const c=GI(e,l,t);u=Pi(u);const f=i.Lu(c);if(u instanceof pb)s.push(c);else{const h=mb(u,f);h!=null&&(s.push(c),o.set(c,h))}});const a=new Xo(s);return new C6(o,a,i.fieldTransforms)}function Ute(n,e,t,r,i,s){const o=n.$u(1,e,t),a=[TR(e,r,t)],l=[i];if(s.length%2!=0)throw new Vt(st.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(TR(e,s[h])),l.push(s[h+1]);const u=[],c=Mo.empty();for(let h=a.length-1;h>=0;--h)if(!k6(u,a[h])){const p=a[h];let g=l[h];g=Pi(g);const w=o.Lu(p);if(g instanceof pb)u.push(p);else{const _=mb(g,w);_!=null&&(u.push(p),c.set(p,_))}}const f=new Xo(u);return new C6(c,f,o.fieldTransforms)}function mb(n,e){if(I6(n=Pi(n)))return HI("Unsupported field value:",e,n),P6(n,e);if(n instanceof FI)return function(r,i){if(!M6(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=mb(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Pi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Dr.fromDate(r);return{timestampValue:xA(i.serializer,s)}}if(r instanceof Dr){const s=new Dr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xA(i.serializer,s)}}if(r instanceof UI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fg)return{bytesValue:qV(i.serializer,r._byteString)};if(r instanceof Io){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jI)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return xI(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${NI(r)}`)}(n,e)}function P6(n,e){const t={};return wV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xh(n,(r,i)=>{const s=mb(i,e.Ou(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function I6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dr||n instanceof UI||n instanceof Fg||n instanceof Io||n instanceof FI||n instanceof jI)}function HI(n,e,t){if(!I6(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=NI(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function TR(n,e,t){if((e=Pi(e))instanceof db)return e._internalPath;if(typeof e=="string")return GI(n,e);throw bA("Field path arguments must be of type string or ",n,!1,void 0,t)}const jte=new RegExp("[~\\*/\\[\\]]");function GI(n,e,t){if(e.search(jte)>=0)throw bA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new db(...e.split("."))._internalPath}catch{throw bA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bA(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Vt(st.INVALID_ARGUMENT,a+n+l)}function k6(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Io(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(D6("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Vte extends O6{data(){return super.data()}}function D6(n,e){return typeof e=="string"?GI(n,e):e instanceof db?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zte(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Vt(st.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hte{convertValue(e,t="none"){switch(ch(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(uh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>pi(o.doubleValue));return new jI(s)}convertGeoPoint(e){return new UI(pi(e.latitude),pi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(K_(e));default:return null}}convertTimestamp(e){const t=lh(e);return new Dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Or.fromString(e);ir(YV(r));const i=new J_(r.get(1),r.get(3)),s=new $t(r.popFirst(5));return i.isEqual(t)||Rc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N6 extends O6{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(D6("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qw extends N6{data(e={}){return super.data(e)}}class Gte{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new a_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qw(this._firestore,this._userDataWriter,r.key,r,new a_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Vt(st.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new a_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qw(i._firestore,i._userDataWriter,a.doc.key,a.doc,new a_(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:qte(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(n){n=_l(n,Io);const e=_l(n.firestore,Dp);return Rte(BI(e),n._key).then(t=>Wte(e,n,t))}class B6 extends Hte{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Io(this.firestore,null,t)}}function Gs(n){n=_l(n,S6);const e=_l(n.firestore,Dp),t=BI(e),r=new B6(e);return zte(n._query),Pte(t,n._query).then(i=>new Gte(e,r,n,i))}function qI(n,e,t){n=_l(n,Io);const r=_l(n.firestore,Dp),i=L6(n.converter,e);return gb(r,[R6(zI(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ca.none())])}function Ug(n,e,t,...r){n=_l(n,Io);const i=_l(n.firestore,Dp),s=zI(i);let o;return o=typeof(e=Pi(e))=="string"||e instanceof db?Ute(s,"updateDoc",n._key,e,t,r):Fte(s,"updateDoc",n._key,e),gb(i,[o.toMutation(n._key,Ca.exists(!0))])}function hh(n){return gb(_l(n.firestore,Dp),[new wI(n._key,Ca.none())])}function mp(n,e){const t=_l(n.firestore,Dp),r=Hr(n),i=L6(n.converter,e);return gb(t,[R6(zI(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ca.exists(!1))]).then(()=>r)}function gb(n,e){return function(r,i){const s=new _c;return r.asyncQueue.enqueueAndForget(async()=>yte(await Mte(r),i,s)),s.promise}(BI(n),e)}function Wte(n,e,t){const r=t.docs.get(e._key),i=new B6(n);return new N6(n,i,e._key,r,new a_(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){dy=i})(Mp),cp(new oh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Dp(new GQ(r.getProvider("auth-internal")),new KQ(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Vt(st.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new J_(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kl(kD,"4.7.6",e),Kl(kD,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="firebasestorage.googleapis.com",$te="storageBucket",Kte=2*60*1e3,Jte=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah=class U6 extends cu{constructor(e,t,r=0){super(vT(e),`Firebase Storage: ${t} (${vT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,U6.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var au;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(au||(au={}));function vT(n){return"storage/"+n}function Xte(){const n="An unknown error occurred, please check the error payload for server response.";return new Ah(au.UNKNOWN,n)}function Yte(){return new Ah(au.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qte(){return new Ah(au.CANCELED,"User canceled the upload/download.")}function Zte(n){return new Ah(au.INVALID_URL,"Invalid URL '"+n+"'.")}function ene(n){return new Ah(au.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gL(n){return new Ah(au.INVALID_ARGUMENT,n)}function j6(){return new Ah(au.APP_DELETED,"The Firebase app was deleted.")}function tne(n){return new Ah(au.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=pl.makeFromUrl(e,t)}catch{return new pl(e,"")}if(r.path==="")return r;throw ene(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(b){b.path_=decodeURIComponent(b.path)}const c="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${c}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},w=t===F6?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",v=new RegExp(`^https?://${w}/${i}/${_}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:p,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let b=0;b<S.length;b++){const C=S[b],L=C.regex.exec(e);if(L){const R=L[C.indices.bucket];let k=L[C.indices.path];k||(k=""),r=new pl(R,k),C.postModify(r);break}}if(r==null)throw Zte(e);return r}}class nne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rne(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(..._){u||(u=!0,e.apply(null,_))}function f(_){i=setTimeout(()=>{i=null,n(p,l())},_)}function h(){s&&clearTimeout(s)}function p(_,...v){if(u){h();return}if(_){h(),c.call(null,_,...v);return}if(l()||o){h(),c.call(null,_,...v);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let g=!1;function w(_){g||(g=!0,h(),!u&&(i!==null?(_||(a=2),clearTimeout(i),f(0)):_||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,w(!0)},t),w}function ine(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sne(n){return n!==void 0}function yL(n,e,t,r){if(r<e)throw gL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw gL(`Invalid value for '${n}'. Expected ${t} or less.`)}function one(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var SA;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(SA||(SA={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ane(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lne{constructor(e,t,r,i,s,o,a,l,u,c,f,h=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=f,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new h1(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===SA.NO_ERROR,l=s.getStatus();if(!a||ane(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===SA.ABORT;r(!1,new h1(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new h1(u,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());sne(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Xte();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?j6():Qte();o(l)}else{const l=Yte();o(l)}};this.canceled_?t(!1,new h1(!1,null,!0)):this.backoffId_=rne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ine(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class h1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function une(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function cne(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function fne(n,e){e&&(n["X-Firebase-GMPID"]=e)}function hne(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function dne(n,e,t,r,i,s,o=!0){const a=one(n.urlParams),l=n.url+a,u=Object.assign({},n.headers);return fne(u,e),une(u,t),cne(u,s),hne(u,r),new lne(l,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pne(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function mne(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gne=class CR{constructor(e,t){this._service=e,t instanceof pl?this._location=t:this._location=pl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new CR(e,t)}get root(){const e=new pl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mne(this._location.path)}get storage(){return this._service}get parent(){const e=pne(this._location.path);if(e===null)return null;const t=new pl(this._location.bucket,e);return new CR(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tne(e)}};function vL(n,e){const t=e==null?void 0:e[$te];return t==null?null:pl.makeFromBucketSpec(t,n)}function yne(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:E5(i,n.app.options.projectId))}class vne{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=F6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Kte,this._maxUploadRetryTime=Jte,this._requests=new Set,i!=null?this._bucket=pl.makeFromBucketSpec(i,this._host):this._bucket=vL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pl.makeFromBucketSpec(this._url,e):this._bucket=vL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gne(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new nne(j6());{const o=dne(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const _L="@firebase/storage",xL="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="storage";function _ne(n=iI(),e){n=Pi(n);const r=XE(n,V6).getImmediate({identifier:e}),i=x5("storage");return i&&xne(r,...i),r}function xne(n,e,t,r={}){yne(n,e,t,r)}function wne(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new vne(t,r,i,e,Mp)}function Ane(){cp(new oh(V6,wne,"PUBLIC").setMultipleInstances(!0)),Kl(_L,xL,""),Kl(_L,xL,"esm2017")}Ane();const Ene={apiKey:"AIzaSyC9C7-V8BDscp9IZj5O3u9YE4L7FvM9wu8",authDomain:"sahajshakya-12643.firebaseapp.com",projectId:"sahajshakya-12643",storageBucket:"sahajshakya-12643.firebasestorage.app",messagingSenderId:"719600661086",appId:"1:719600661086:web:fc4ae3968d123782e77acf",measurementId:"G-THGG2PYM9D"},WI=T5(Ene),ac=D0(WI),en=Ote(WI);_ne(WI);const bne="modulepreload",Sne=function(n){return"/"+n},wL={},jg=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=Sne(l),l in wL)return;wL[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":bne,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Tne=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jg(async()=>{const{default:r}=await Promise.resolve().then(()=>yy);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class $I extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Cne extends $I{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mne extends $I{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rne extends $I{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var MR;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(MR||(MR={}));var Pne=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class Ine{constructor(e,{headers:t={},customFetch:r,region:i=MR.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=Tne(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Pne(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(g=>{throw new Cne(g)}),f=c.headers.get("x-relay-error");if(f&&f==="true")throw new Mne(c);if(!c.ok)throw new Rne(c);let h=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield c.json():h==="application/octet-stream"?p=yield c.blob():h==="text/event-stream"?p=c:h==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var gs={},wv={},Av={},Ev={},bv={},Sv={},kne=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vg=kne();const One=Vg.fetch,z6=Vg.fetch.bind(Vg),H6=Vg.Headers,Dne=Vg.Request,Lne=Vg.Response,yy=Object.freeze(Object.defineProperty({__proto__:null,Headers:H6,Request:Dne,Response:Lne,default:z6,fetch:One},Symbol.toStringTag,{value:"Module"})),Nne=Z9(yy);var d1={},AL;function G6(){if(AL)return d1;AL=1,Object.defineProperty(d1,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return d1.default=n,d1}var EL;function q6(){if(EL)return Sv;EL=1;var n=Sv.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Sv,"__esModule",{value:!0});const e=n(Nne),t=n(G6());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,f,h;let p=null,g=null,w=null,_=u.status,v=u.statusText;if(u.ok){if(this.method!=="HEAD"){const C=await u.text();C===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=C:g=JSON.parse(C))}const S=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),b=(f=u.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");S&&b&&b.length>1&&(w=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,_=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const S=await u.text();try{p=JSON.parse(S),Array.isArray(p)&&u.status===404&&(g=[],p=null,_=200,v="OK")}catch{u.status===404&&S===""?(_=204,v="No Content"):p={message:S}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,_=200,v="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:g,count:w,status:_,statusText:v}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,f,h;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}}return Sv.default=r,Sv}var bL;function W6(){if(bL)return bv;bL=1;var n=bv.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bv,"__esModule",{value:!0});const e=n(q6());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const f=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`,u==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return bv.default=t,bv}var SL;function KI(){if(SL)return Ev;SL=1;var n=Ev.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ev,"__esModule",{value:!0});const e=n(W6());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${u}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Ev.default=t,Ev}var TL;function $6(){if(TL)return Av;TL=1;var n=Av.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Av,"__esModule",{value:!0});const e=n(KI());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const u=i.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(u.length>0){const c=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Av.default=t,Av}var Tv={},Cv={},CL;function Bne(){return CL||(CL=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.version=void 0,Cv.version="0.0.0-automated"),Cv}var ML;function Fne(){if(ML)return Tv;ML=1,Object.defineProperty(Tv,"__esModule",{value:!0}),Tv.DEFAULT_HEADERS=void 0;const n=Bne();return Tv.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Tv}var RL;function Une(){if(RL)return wv;RL=1;var n=wv.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wv,"__esModule",{value:!0});const e=n($6()),t=n(KI()),r=Fne();class i{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let f;const h=new URL(`${this.url}/rpc/${o}`);let p;l||u?(f=l?"HEAD":"GET",Object.entries(a).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{h.searchParams.append(w,_)})):(f="POST",p=a);const g=Object.assign({},this.headers);return c&&(g.Prefer=`count=${c}`),new t.default({method:f,url:h,headers:g,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return wv.default=i,wv}var PL;function jne(){if(PL)return gs;PL=1;var n=gs.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(gs,"__esModule",{value:!0}),gs.PostgrestError=gs.PostgrestBuilder=gs.PostgrestTransformBuilder=gs.PostgrestFilterBuilder=gs.PostgrestQueryBuilder=gs.PostgrestClient=void 0;const e=n(Une());gs.PostgrestClient=e.default;const t=n($6());gs.PostgrestQueryBuilder=t.default;const r=n(KI());gs.PostgrestFilterBuilder=r.default;const i=n(W6());gs.PostgrestTransformBuilder=i.default;const s=n(q6());gs.PostgrestBuilder=s.default;const o=n(G6());return gs.PostgrestError=o.default,gs.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},gs}var Vne=jne();const zne=Ma(Vne),{PostgrestClient:Hne,PostgrestQueryBuilder:NMe,PostgrestFilterBuilder:BMe,PostgrestTransformBuilder:FMe,PostgrestBuilder:UMe,PostgrestError:jMe}=zne,Gne="2.11.2",qne={"X-Client-Info":`realtime-js/${Gne}`},Wne="1.0.0",K6=1e4,$ne=1e3;var Cg;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Cg||(Cg={}));var Jo;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Jo||(Jo={}));var fl;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(fl||(fl={}));var RR;(function(n){n.websocket="websocket"})(RR||(RR={}));var Vd;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Vd||(Vd={}));class Kne{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class J6{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var wr;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(wr||(wr={}));const IL=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=Jne(o,n,e,i),s),{})},Jne=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?X6(s,o):PR(o)},X6=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Zne(e,t)}switch(n){case wr.bool:return Xne(e);case wr.float4:case wr.float8:case wr.int2:case wr.int4:case wr.int8:case wr.numeric:case wr.oid:return Yne(e);case wr.json:case wr.jsonb:return Qne(e);case wr.timestamp:return ere(e);case wr.abstime:case wr.date:case wr.daterange:case wr.int4range:case wr.int8range:case wr.money:case wr.reltime:case wr.text:case wr.time:case wr.timestamptz:case wr.timetz:case wr.tsrange:case wr.tstzrange:return PR(e);default:return PR(e)}},PR=n=>n,Xne=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Yne=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Qne=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Zne=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>X6(e,a))}return n},ere=n=>typeof n=="string"?n.replace(" ","T"):n,Y6=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class _T{constructor(e,t,r={},i=K6){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kL;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(kL||(kL={}));class b_{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=b_.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=b_.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=b_.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const f=s[u];if(f){const h=c.map(_=>_.presence_ref),p=f.map(_=>_.presence_ref),g=c.filter(_=>p.indexOf(_.presence_ref)<0),w=f.filter(_=>h.indexOf(_.presence_ref)<0);g.length>0&&(a[u]=g),w.length>0&&(l[u]=w)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const f=e[a].map(p=>p.presence_ref),h=c.filter(p=>f.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var OL;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(OL||(OL={}));var DL;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(DL||(DL={}));var sc;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(sc||(sc={}));class JI{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Jo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new _T(this,fl.join,this.params,this.timeout),this.rejoinTimer=new J6(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jo.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Jo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fl.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new b_(this),this.broadcastEndpointURL=Y6(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(sc.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(sc.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var f;if(this.socket.setAuth(),c===void 0){e==null||e(sc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,g=[];for(let w=0;w<p;w++){const _=h[w],{filter:{event:v,schema:A,table:S,filter:b}}=_,C=c&&c[w];if(C&&C.event===v&&C.schema===A&&C.table===S&&C.filter===b)g.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),e==null||e(sc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(sc.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(sc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(sc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Jo.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fl.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new _T(this,fl.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _T(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=fl;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var g,w,_;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(w=p.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(p=>p.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var g,w,_,v,A,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const b=p.id,C=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((w=t.ids)===null||w===void 0?void 0:w.includes(b))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const b=(A=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return b==="*"||b===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:w,table:_,commit_timestamp:v,type:A,errors:S}=g;h=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:v,eventType:A,new:{},old:{},errors:S}),this._getPayloadRecords(g))}p.callback(h,r)})}_isClosed(){return this.state===Jo.closed}_isJoined(){return this.state===Jo.joined}_isJoining(){return this.state===Jo.joining}_isLeaving(){return this.state===Jo.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&JI.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fl.close,{},e)}_onError(e){this._on(fl.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jo.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=IL(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=IL(e.columns,e.old_record)),t}}const tre=()=>{},nre=typeof WebSocket<"u",rre=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ire{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=qne,this.params={},this.timeout=K6,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=tre,this.conn=null,this.sendBuffer=[],this.serializer=new Kne,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>jg(async()=>{const{default:l}=await Promise.resolve().then(()=>yy);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${RR.websocket}`,this.httpEndpoint=Y6(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new J6(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(nre){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new sre(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),jg(async()=>{const{default:e}=await import("./browser-M3FPMEkp.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wne}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cg.connecting:return Vd.Connecting;case Cg.open:return Vd.Open;case Cg.closing:return Vd.Closing;default:return Vd.Closed}}isConnected(){return this.connectionState()===Vd.Open}channel(e,t={config:{}}){const r=new JI(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(fl.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close($ne,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fl.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([rre],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class sre{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Cg.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class XI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function rs(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class ore extends XI{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class IR extends XI{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var are=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Q6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jg(async()=>{const{default:r}=await Promise.resolve().then(()=>yy);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},lre=()=>are(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jg(()=>Promise.resolve().then(()=>yy),void 0)).Response:Response}),kR=n=>{if(Array.isArray(n))return n.map(t=>kR(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=kR(r)}),e};var Lp=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const xT=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ure=(n,e,t)=>Lp(void 0,void 0,void 0,function*(){const r=yield lre();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{e(new ore(xT(i),n.status||500))}).catch(i=>{e(new IR(xT(i),i))}):e(new IR(xT(n),n))}),cre=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function U0(n,e,t,r,i,s){return Lp(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,cre(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ure(l,a,r))})})}function TA(n,e,t,r){return Lp(this,void 0,void 0,function*(){return U0(n,"GET",e,t,r)})}function Bf(n,e,t,r,i){return Lp(this,void 0,void 0,function*(){return U0(n,"POST",e,r,i,t)})}function fre(n,e,t,r,i){return Lp(this,void 0,void 0,function*(){return U0(n,"PUT",e,r,i,t)})}function hre(n,e,t,r){return Lp(this,void 0,void 0,function*(){return U0(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Z6(n,e,t,r,i){return Lp(this,void 0,void 0,function*(){return U0(n,"DELETE",e,r,i,t)})}var wo=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const dre={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},LL={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pre{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Q6(i)}uploadOrUpdate(e,t,r,i){return wo(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},LL),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(rs(s))return{data:null,error:s};throw s}})}upload(e,t,r){return wo(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return wo(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:LL.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),h=yield f.json();return f.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(rs(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return wo(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield Bf(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new XI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(rs(r))return{data:null,error:r};throw r}})}update(e,t,r){return wo(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return wo(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(rs(i))return{data:null,error:i};throw i}})}copy(e,t,r){return wo(this,void 0,void 0,function*(){try{return{data:{path:(yield Bf(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(rs(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return wo(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Bf(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(rs(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return wo(this,void 0,void 0,function*(){try{const i=yield Bf(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(rs(i))return{data:null,error:i};throw i}})}download(e,t){return wo(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield TA(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(rs(a))return{data:null,error:a};throw a}})}info(e){return wo(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield TA(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:kR(r),error:null}}catch(r){if(rs(r))return{data:null,error:r};throw r}})}exists(e){return wo(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield hre(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(rs(r)&&r instanceof IR){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return wo(this,void 0,void 0,function*(){try{return{data:yield Z6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}})}list(e,t,r){return wo(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},dre),t),{prefix:e||""});return{data:yield Bf(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(rs(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const mre="2.7.1",gre={"X-Client-Info":`storage-js/${mre}`};var Pm=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class yre{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},gre),t),this.fetch=Q6(r)}listBuckets(){return Pm(this,void 0,void 0,function*(){try{return{data:yield TA(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(rs(e))return{data:null,error:e};throw e}})}getBucket(e){return Pm(this,void 0,void 0,function*(){try{return{data:yield TA(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Pm(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rs(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Pm(this,void 0,void 0,function*(){try{return{data:yield fre(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(rs(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Pm(this,void 0,void 0,function*(){try{return{data:yield Bf(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Pm(this,void 0,void 0,function*(){try{return{data:yield Z6(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(rs(t))return{data:null,error:t};throw t}})}}class vre extends yre{constructor(e,t={},r){super(e,t,r)}from(e){return new pre(this.url,this.headers,e,this.fetch)}}const _re="2.48.1";let l_="";typeof Deno<"u"?l_="deno":typeof document<"u"?l_="web":typeof navigator<"u"&&navigator.product==="ReactNative"?l_="react-native":l_="node";const xre={"X-Client-Info":`supabase-js-${l_}/${_re}`},wre={headers:xre},Are={schema:"public"},Ere={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bre={};var Sre=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};const Tre=n=>{let e;return n?e=n:typeof fetch>"u"?e=z6:e=fetch,(...t)=>e(...t)},Cre=()=>typeof Headers>"u"?H6:Headers,Mre=(n,e,t)=>{const r=Tre(t),i=Cre();return(s,o)=>Sre(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var Rre=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};function Pre(n){return n.replace(/\/$/,"")}function Ire(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s),accessToken:()=>Rre(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const ez="2.67.3",kre="http://localhost:9999",Ore="supabase.auth.token",Dre={"X-Client-Info":`gotrue-js/${ez}`},NL=10,OR="X-Supabase-Api-Version",tz={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Lre(n){return Math.round(Date.now()/1e3)+n}function Nre(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Gl=()=>typeof window<"u"&&typeof document<"u",hd={tested:!1,writable:!1},S_=()=>{if(!Gl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hd.tested)return hd.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),hd.tested=!0,hd.writable=!0}catch{hd.tested=!0,hd.writable=!1}return hd.writable};function Bre(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const nz=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jg(async()=>{const{default:r}=await Promise.resolve().then(()=>yy);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Fre=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",rz=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},p1=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},m1=async(n,e)=>{await n.removeItem(e)};function Ure(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)o=e.indexOf(n.charAt(c++)),a=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),u!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class yb{constructor(){this.promise=new yb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}yb.promiseConstructor=Promise;function BL(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Ure(r))}async function jre(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Vre(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function zre(n){return("0"+n.toString(16)).substr(-2)}function Hre(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,zre).join("")}async function Gre(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function qre(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wre(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Gre(n);return qre(t)}async function Im(n,e,t=!1){const r=Hre();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await rz(n,`${e}-code-verifier`,i);const s=await Wre(r);return[s,r===s?"plain":"s256"]}const $re=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Kre(n){const e=n.headers.get(OR);if(!e||!e.match($re))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class YI extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Cn(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Jre extends YI{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Xre(n){return Cn(n)&&n.name==="AuthApiError"}class iz extends YI{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Np extends YI{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Df extends Np{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yre(n){return Cn(n)&&n.name==="AuthSessionMissingError"}class wT extends Np{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class g1 extends Np{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class y1 extends Np{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Qre(n){return Cn(n)&&n.name==="AuthImplicitGrantRedirectError"}class FL extends Np{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DR extends Np{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function AT(n){return Cn(n)&&n.name==="AuthRetryableFetchError"}class UL extends Np{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Zre=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const Dd=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),eie=[502,503,504];async function jL(n){var e;if(!Fre(n))throw new DR(Dd(n),0);if(eie.includes(n.status))throw new DR(Dd(n),n.status);let t;try{t=await n.json()}catch(s){throw new iz(Dd(s),s)}let r;const i=Kre(n);if(i&&i.getTime()>=tz["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new UL(Dd(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Df}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new UL(Dd(t),n.status,t.weak_password.reasons);throw new Jre(Dd(t),n.status||500,r)}const tie=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Un(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[OR]||(s[OR]=tz["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await nie(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function nie(n,e,t,r,i,s){const o=tie(e,r,i,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new DR(Dd(l),0)}if(a.ok||await jL(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await jL(l)}}function Lf(n){var e;let t=null;oie(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Lre(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function VL(n){const e=Lf(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function qf(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function rie(n){return{data:n,error:null}}function iie(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=Zre(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function sie(n){return n}function oie(n){return n.access_token&&n.refresh_token&&n.expires_in}var aie=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class lie{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=nz(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Un(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Cn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Un(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qf})}catch(r){if(Cn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=aie(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Un(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:iie,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Cn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Un(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qf})}catch(t){if(Cn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await Un(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:sie});if(c.error)throw c.error;const f=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Cn(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Un(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qf})}catch(t){if(Cn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Un(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qf})}catch(r){if(Cn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Un(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qf})}catch(r){if(Cn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Un(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(Cn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Un(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Cn(t))return{data:null,error:t};throw t}}}const uie={getItem:n=>S_()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{S_()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{S_()&&globalThis.localStorage.removeItem(n)}};function zL(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function cie(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const km={debug:!!(globalThis&&S_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sz extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fie extends sz{}async function hie(n,e,t){km.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),km.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){km.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{km.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw km.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new fie(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(km.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}cie();const die={url:kre,storageKey:Ore,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Dre,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Mv=30*1e3,HL=3;async function GL(n,e,t){return await t()}class Z_{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Z_.nextInstanceID,Z_.nextInstanceID+=1,this.instanceID>0&&Gl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},die),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lie({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=nz(i.fetch),this.lock=i.lock||GL,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Gl()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=hie:this.lock=GL,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:S_()?this.storage=uie:(this.memoryStorage={},this.storage=zL(this.memoryStorage)):(this.memoryStorage={},this.storage=zL(this.memoryStorage)),Gl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ez}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Bre(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Gl()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Qre(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Cn(t)?{error:t}:{error:new iz("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await Un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Lf}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Cn(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:c,password:f,options:h}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Im(this.storage,this.storageKey)),s=await Un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Lf})}else if("phone"in e){const{phone:c,password:f,options:h}=e;s=await Un(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Lf})}else throw new g1("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Cn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VL})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Un(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:VL})}else throw new g1("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wT}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(Cn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await p1(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:o}=await Un(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Lf});if(await m1(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new wT}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Cn(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await Un(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Lf}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wT}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(Cn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Im(this.storage,this.storageKey));const{error:f}=await Un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await Un(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new g1("You must provide either an email or phone number.")}catch(a){if(Cn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Un(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Lf});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Cn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Im(this.storage,this.storageKey)),await Un(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:rie})}catch(s){if(Cn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Df;const{error:i}=await Un(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Cn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Un(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Un(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new g1("You must provide either an email or phone number and a type")}catch(t){if(Cn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await p1(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qf}):await this._useSession(async t=>{var r,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Df}:await Un(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:qf})})}catch(t){if(Cn(t))return Yre(t)&&(await this._removeSession(),await m1(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Df;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Im(this.storage,this.storageKey));const{data:u,error:c}=await Un(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:qf});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Cn(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return BL(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Df;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=BL(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Cn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Df;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Cn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Gl())throw new y1("No browser detected.");if(e.error||e.error_description||e.error_code)throw new y1(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new FL("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new y1("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new FL("No code detected.");const{data:A,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new y1("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(a);let h=c+f;l&&(h=parseInt(l));const p=h-c;p*1e3<=Mv&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;c-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,c):c-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,c);const{data:w,error:_}=await this._getUser(s);if(_)throw _;const v={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(Cn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await p1(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Xre(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await m1(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Nre(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Im(this.storage,this.storageKey,!0));try{return await Un(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Cn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Cn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,c;const{data:f,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Un(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Gl()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Cn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)throw o;return await Un(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(Cn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Vre(async i=>(i>0&&await jre(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Un(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lf})),(i,s)=>{const o=200*Math.pow(2,i);return s&&AT(s)&&Date.now()+o-r<Mv})}catch(r){if(this._debug(t,"error",r),Cn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Gl()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await p1(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+NL;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${NL}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),AT(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Df;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new yb;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Df;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Cn(s)){const o={session:null,error:s};return AT(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rz(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await m1(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mv);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Mv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Mv}ms, refresh threshold is ${HL} ticks`),i<=HL&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sz)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Im(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Un(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Cn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Un(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Cn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Un(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Cn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Un(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Cn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Z_.nextInstanceID=0;const pie=Z_;class mie extends pie{constructor(e){super(e)}}var gie=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(n,e||[])).next())})};class yie{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=Pre(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Are,realtime:bre,auth:Object.assign(Object.assign({},Ere),{storageKey:l}),global:wre},c=Ire(r??{},u);this.storageKey=(i=c.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=c.auth)!==null&&o!==void 0?o:{},this.headers,c.global.fetch),this.fetch=Mre(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new Hne(`${a}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Ine(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vre(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return gie(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,c){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mie({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ire(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vie=(n,e,t)=>new yie(n,e,t),_ie="https://gpkzyfbdjociuubltyjg.supabase.co",xie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdwa3p5ZmJkam9jaXV1Ymx0eWpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc5NzE1MzgsImV4cCI6MjA1MzU0NzUzOH0.zTF4wtV898IEsnO_Ub8uQMqlGur5RHTMujtgxy_RcLY",gp=vie(_ie,xie),wie=async n=>{try{const e=Hr(en,"users",n),t=await Ea(e);if(t.exists()){const r=t.data(),i=r==null?void 0:r.role;if(!i)return{role:null,roleId:null};const o=(await Eie("roles")).find(a=>a.id===i);return o?{role:o.name||null,roleId:i}:{role:null,roleId:null}}else return{role:null,roleId:null}}catch(e){return console.error("Error fetching user role:",e),{role:null,roleId:null}}},Aie=async(n,e,t,r,i)=>{await qI(Hr(en,"activeUsers",n),{id:n,name:e,email:t,role:r,token:i,ActiveTime:Dr.now(),isLoggedIn:!0})};async function Eie(n){try{const e=Kr(en,n),t=await Gs(e),r=[];return t.forEach(i=>{r.push({id:i.id,...i.data()})}),r}catch(e){return console.error("Error fetching documents: ",e),[]}}const oz=()=>{const[n,e]=W.useState(null),[t,r]=W.useState(null),i=async(l,u,c,f="patient")=>{try{const h=await wY(ac,l,u);await nV(h.user,{displayName:c}),await h.user;const p=h.user.uid,g=Hr(en,"roles",f),w=await Ea(g);if(!w.exists())throw new Error(`Role '${f}' does not exist in the roles collection.`);const _=w.data(),v=_==null?void 0:_.id;await qI(Hr(en,"users",p),{id:p,name:c,email:l,role:v,createdAt:Dr.now(),updatedAt:Dr.now(),lastLogin:Dr.now(),isLoggedIn:!1}),await EY(h.user)}catch(h){throw r(h.message),h}},s=async(l,u)=>{try{const c=await AY(ac,l,u),{data:f,error:h}=await gp.auth.signInWithPassword({email:l,password:u});if(console.log(f,"Login with Supabase"),h)throw new Error(h.message);e(c.user);const p=c.user.uid,g=Hr(en,"users",p);return(await Ea(g)).exists()&&await Ug(g,{isLoggedIn:!0}),c}catch(c){throw r(c.message),c}},o=async l=>{const u=Hr(en,"users",l),c=await Ea(u);return c.exists()?c.data():null};async function a(l){try{console.log("Logout called inside Custom Auth",l);const u=Hr(en,"users",l);(await Ea(u)).exists()?(await Ug(u,{isLoggedIn:!1,lastLogin:Dr.now()}),console.log(`User ${l} is now inactive.`)):console.log(`User with id ${l} not found.`);const f=Hr(en,"activeUsers",l),h=await Ea(f);if(h.exists()){const p=h.data();try{p&&(await hh(Hr(en,"activeUsers",l)),console.log(`Field with userId ${l} deleted from activeUsers.`)),await hh(Hr(en,"activeUsers",l)),console.log(`Field with userId ${l} deleted from activeUsers.`)}catch(g){throw new Error("Error deleting field from activeUsers: "+g)}}else console.log("No data found in activeUsers document.");await ac.signOut(),await gp.auth.signOut(),e(null),console.log(`User ${l} logged out successfully.`)}catch(u){console.error("Error during logout:",u)}}return{user:n,error:t,register:i,login:s,getUserData:o,ActiveUser:Aie,logout:a}},QI=W.createContext({});function j0(n){const e=W.useRef(null);return e.current===null&&(e.current=n()),e.current}const vb=W.createContext(null),_b=W.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class bie extends W.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Sie({children:n,isPresent:e,anchorX:t}){const r=W.useId(),i=W.useRef(null),s=W.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=W.useContext(_b);return W.useInsertionEffect(()=>{const{width:a,height:l,top:u,left:c,right:f}=s.current;if(e||!i.current||!a||!l)return;const h=t==="left"?`left: ${c}`:`right: ${f}`;i.current.dataset.motionPopId=r;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            ${h}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),N.jsx(bie,{isPresent:e,childRef:i,sizeRef:s,children:W.cloneElement(n,{ref:i})})}const Tie=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a})=>{const l=j0(Cie),u=W.useId(),c=W.useCallback(h=>{l.set(h,!0);for(const p of l.values())if(!p)return;r&&r()},[l,r]),f=W.useMemo(()=>({id:u,initial:e,isPresent:t,custom:i,onExitComplete:c,register:h=>(l.set(h,!1),()=>l.delete(h))}),s?[Math.random(),c]:[t,c]);return W.useMemo(()=>{l.forEach((h,p)=>l.set(p,!1))},[t]),W.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),o==="popLayout"&&(n=N.jsx(Sie,{isPresent:t,anchorX:a,children:n})),N.jsx(vb.Provider,{value:f,children:n})};function Cie(){return new Map}function az(n=!0){const e=W.useContext(vb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=W.useId();W.useEffect(()=>{n&&i(s)},[n]);const o=W.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,o]:[!0]}const v1=n=>n.key||"";function qL(n){const e=[];return W.Children.forEach(n,t=>{W.isValidElement(t)&&e.push(t)}),e}const ZI=typeof window<"u",ek=ZI?W.useLayoutEffect:W.useEffect,Mie=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left"})=>{const[l,u]=az(o),c=W.useMemo(()=>qL(n),[n]),f=o&&!l?[]:c.map(v1),h=W.useRef(!0),p=W.useRef(c),g=j0(()=>new Map),[w,_]=W.useState(c),[v,A]=W.useState(c);ek(()=>{h.current=!1,p.current=c;for(let C=0;C<v.length;C++){const L=v1(v[C]);f.includes(L)?g.delete(L):g.get(L)!==!0&&g.set(L,!1)}},[v,f.length,f.join("-")]);const S=[];if(c!==w){let C=[...c];for(let L=0;L<v.length;L++){const R=v[L],k=v1(R);f.includes(k)||(C.splice(L,0,R),S.push(R))}s==="wait"&&S.length&&(C=S),A(qL(C)),_(c);return}const{forceRender:b}=W.useContext(QI);return N.jsx(N.Fragment,{children:v.map(C=>{const L=v1(C),R=o&&!l?!1:c===v||f.includes(L),k=()=>{if(g.has(L))g.set(L,!0);else return;let O=!0;g.forEach(M=>{M||(O=!1)}),O&&(b==null||b(),A(p.current),o&&(u==null||u()),r&&r())};return N.jsx(Tie,{isPresent:R,initial:!h.current||t?void 0:!1,custom:R?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:R?void 0:k,anchorX:a,children:C},L)})})},Zo=n=>n;let LR=Zo;function tk(n){let e;return()=>(e===void 0&&(e=n()),e)}const zg=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},xc=n=>n*1e3,wc=n=>n/1e3,Rie={skipAnimations:!1,useManualTiming:!1};function Pie(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),n()),u(o)}const l={schedule:(u,c=!1,f=!1)=>{const p=f&&r?e:t;return c&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const _1=["read","resolveKeyframes","update","preRender","render","postRender"],Iie=40;function lz(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=_1.reduce((v,A)=>(v[A]=Pie(s),v),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:f,postRender:h}=o,p=()=>{const v=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,Iie),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),f.process(i),h.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},g=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:_1.reduce((v,A)=>{const S=o[A];return v[A]=(b,C=!1,L=!1)=>(t||g(),S.schedule(b,C,L)),v},{}),cancel:v=>{for(let A=0;A<_1.length;A++)o[_1[A]].cancel(v)},state:i,steps:o}}const{schedule:br,cancel:Ic,state:ys,steps:ET}=lz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zo,!0),uz=W.createContext({strict:!1}),WL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hg={};for(const n in WL)Hg[n]={isEnabled:e=>WL[n].some(t=>!!e[t])};function kie(n){for(const e in n)Hg[e]={...Hg[e],...n[e]}}const Oie=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function CA(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Oie.has(n)}let cz=n=>!CA(n);function Die(n){n&&(cz=e=>e.startsWith("on")?!CA(e):n(e))}try{Die(require("@emotion/is-prop-valid").default)}catch{}function Lie(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(cz(i)||t===!0&&CA(i)||!e&&!CA(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Nie(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const xb=W.createContext({});function e0(n){return typeof n=="string"||Array.isArray(n)}function wb(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const nk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rk=["initial",...nk];function Ab(n){return wb(n.animate)||rk.some(e=>e0(n[e]))}function fz(n){return!!(Ab(n)||n.variants)}function Bie(n,e){if(Ab(n)){const{initial:t,animate:r}=n;return{initial:t===!1||e0(t)?t:void 0,animate:e0(r)?r:void 0}}return n.inherit!==!1?e:{}}function Fie(n){const{initial:e,animate:t}=Bie(n,W.useContext(xb));return W.useMemo(()=>({initial:e,animate:t}),[$L(e),$L(t)])}function $L(n){return Array.isArray(n)?n.join(" "):n}const Uie=Symbol.for("motionComponentSymbol");function dg(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function jie(n,e,t){return W.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):dg(t)&&(t.current=r))},[e])}const ik=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vie="framerAppearId",hz="data-"+ik(Vie),{schedule:sk,cancel:VMe}=lz(queueMicrotask,!1),dz=W.createContext({});function zie(n,e,t,r,i){var s,o;const{visualElement:a}=W.useContext(xb),l=W.useContext(uz),u=W.useContext(vb),c=W.useContext(_b).reducedMotion,f=W.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,p=W.useContext(dz);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Hie(f.current,t,i,p);const g=W.useRef(!1);W.useInsertionEffect(()=>{h&&g.current&&h.update(t,u)});const w=t[hz],_=W.useRef(!!w&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,w))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,w)));return ek(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),sk.render(h.render),_.current&&h.animationState&&h.animationState.animateChanges())}),W.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,w)}),_.current=!1))}),h}function Hie(n,e,t,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:pz(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&dg(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function pz(n){if(n)return n.options.allowProjection!==!1?n.projection:pz(n.parent)}function Gie({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,o;n&&kie(n);function a(u,c){let f;const h={...W.useContext(_b),...u,layoutId:qie(u)},{isStatic:p}=h,g=Fie(u),w=r(u,p);if(!p&&ZI){Wie();const _=$ie(h);f=_.MeasureLayout,g.visualElement=zie(i,w,h,e,_.ProjectionNode)}return N.jsxs(xb.Provider,{value:g,children:[f&&g.visualElement?N.jsx(f,{visualElement:g.visualElement,...h}):null,t(i,u,jie(w,g.visualElement,c),w,p,g.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=W.forwardRef(a);return l[Uie]=i,l}function qie({layoutId:n}){const e=W.useContext(QI).id;return e&&n!==void 0?e+"-"+n:n}function Wie(n,e){W.useContext(uz).strict}function $ie(n){const{drag:e,layout:t}=Hg;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Kie=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ok(n){return typeof n!="string"||n.includes("-")?!1:!!(Kie.indexOf(n)>-1||/[A-Z]/u.test(n))}function KL(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ak(n,e,t,r){if(typeof e=="function"){const[i,s]=KL(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=KL(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const NR=n=>Array.isArray(n),Jie=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Xie=n=>NR(n)?n[n.length-1]||0:n,Us=n=>!!(n&&n.getVelocity);function Ww(n){const e=Us(n)?n.get():n;return Jie(e)?e.toValue():e}function Yie({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const o={latestValues:Qie(r,i,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:r,current:a,...o}),o.onUpdate=a=>t(a)),o}const mz=n=>(e,t)=>{const r=W.useContext(xb),i=W.useContext(vb),s=()=>Yie(n,e,r,i);return t?s():j0(s)};function Qie(n,e,t,r){const i={},s=r(n,{});for(const h in s)i[h]=Ww(s[h]);let{initial:o,animate:a}=n;const l=Ab(n),u=fz(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=t?t.initial===!1:!1;c=c||o===!1;const f=c?a:o;if(f&&typeof f!="boolean"&&!wb(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const g=ak(n,h[p]);if(g){const{transitionEnd:w,transition:_,...v}=g;for(const A in v){let S=v[A];if(Array.isArray(S)){const b=c?S.length-1:0;S=S[b]}S!==null&&(i[A]=S)}for(const A in w)i[A]=w[A]}}}return i}const vy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bp=new Set(vy),gz=n=>e=>typeof e=="string"&&e.startsWith(n),lk=gz("--"),Zie=gz("var(--"),uk=n=>Zie(n)?ese.test(n.split("/*")[0].trim()):!1,ese=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yz=(n,e)=>e&&typeof n=="number"?e.transform(n):n,kc=(n,e,t)=>t>e?e:t<n?n:t,_y={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},t0={..._y,transform:n=>kc(0,1,n)},x1={..._y,default:1},V0=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Nf=V0("deg"),Zl=V0("%"),Yt=V0("px"),tse=V0("vh"),nse=V0("vw"),JL={...Zl,parse:n=>Zl.parse(n)/100,transform:n=>Zl.transform(n*100)},rse={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,backgroundPositionX:Yt,backgroundPositionY:Yt},ise={rotate:Nf,rotateX:Nf,rotateY:Nf,rotateZ:Nf,scale:x1,scaleX:x1,scaleY:x1,scaleZ:x1,skew:Nf,skewX:Nf,skewY:Nf,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:t0,originX:JL,originY:JL,originZ:Yt},XL={..._y,transform:Math.round},ck={...rse,...ise,zIndex:XL,size:Yt,fillOpacity:t0,strokeOpacity:t0,numOctaves:XL},sse={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ose=vy.length;function ase(n,e,t){let r="",i=!0;for(let s=0;s<ose;s++){const o=vy[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const u=yz(a,ck[o]);if(!l){i=!1;const c=sse[o]||o;r+=`${c}(${u}) `}t&&(e[o]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function fk(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const u=e[l];if(Bp.has(l)){o=!0;continue}else if(lk(l)){i[l]=u;continue}else{const c=yz(u,ck[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||t?r.transform=ase(e,n.transform,t):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const lse={offset:"stroke-dashoffset",array:"stroke-dasharray"},use={offset:"strokeDashoffset",array:"strokeDasharray"};function cse(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?lse:use;n[s.offset]=Yt.transform(-r);const o=Yt.transform(e),a=Yt.transform(t);n[s.array]=`${o} ${a}`}function YL(n,e,t){return typeof n=="string"?n:Yt.transform(e+t*n)}function fse(n,e,t){const r=YL(e,n.x,n.width),i=YL(t,n.y,n.height);return`${r} ${i}`}function hk(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,f){if(fk(n,u,f),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:p,dimensions:g}=n;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=fse(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),o!==void 0&&cse(h,o,a,l,!1)}const dk=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),vz=()=>({...dk(),attrs:{}}),pk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function _z(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const xz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wz(n,e,t,r){_z(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(xz.has(i)?i:ik(i),e.attrs[i])}const n0={};function hse(n){for(const e in n)n0[e]=n[e],lk(e)&&(n0[e].isCSSVariable=!0)}function Az(n,{layout:e,layoutId:t}){return Bp.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!n0[n]||n==="opacity")}function mk(n,e,t){var r;const{style:i}=n,s={};for(const o in i)(Us(i[o])||e.style&&Us(e.style[o])||Az(o,n)||((r=t==null?void 0:t.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Ez(n,e,t){const r=mk(n,e,t);for(const i in n)if(Us(n[i])||Us(e[i])){const s=vy.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function dse(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const QL=["x","y","width","height","cx","cy","r"],pse={useVisualState:mz({scrapeMotionValuesFromProps:Ez,createRenderState:vz,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in i)if(Bp.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<QL.length;a++){const l=QL[a];n[l]!==e[l]&&(o=!0)}o&&br.read(()=>{dse(t,r),br.render(()=>{hk(r,i,pk(t.tagName),n.transformTemplate),wz(t,r)})})}})},mse={useVisualState:mz({scrapeMotionValuesFromProps:mk,createRenderState:dk})};function bz(n,e,t){for(const r in e)!Us(e[r])&&!Az(r,t)&&(n[r]=e[r])}function gse({transformTemplate:n},e){return W.useMemo(()=>{const t=dk();return fk(t,e,n),Object.assign({},t.vars,t.style)},[e])}function yse(n,e){const t=n.style||{},r={};return bz(r,t,n),Object.assign(r,gse(n,e)),r}function vse(n,e){const t={},r=yse(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function _se(n,e,t,r){const i=W.useMemo(()=>{const s=vz();return hk(s,e,pk(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};bz(s,n.style,n),i.style={...s,...i.style}}return i}function xse(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(ok(t)?_se:vse)(r,s,o,t),u=Lie(r,typeof t=="string",n),c=t!==W.Fragment?{...u,...l,ref:i}:{},{children:f}=r,h=W.useMemo(()=>Us(f)?f.get():f,[f]);return W.createElement(t,{...c,children:h})}}function wse(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...ok(r)?pse:mse,preloadedFeatures:n,useRender:xse(i),createVisualElement:e,Component:r};return Gie(o)}}function Sz(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function Eb(n,e,t){const r=n.getProps();return ak(r,e,t!==void 0?t:r.custom,n)}const Ase=tk(()=>window.ScrollTimeline!==void 0);class Ese{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Ase()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class bse extends Ese{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function gk(n,e){return n?n[e]||n.default||n:void 0}const BR=2e4;function Tz(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<BR;)e+=t,r=n.next(e);return e>=BR?1/0:e}function yk(n){return typeof n=="function"}function ZL(n,e){n.timeline=e,n.onfinish=null}const vk=n=>Array.isArray(n)&&typeof n[0]=="number",Sse={linearEasing:void 0};function Tse(n,e){const t=tk(n);return()=>{var r;return(r=Sse[e])!==null&&r!==void 0?r:t()}}const MA=Tse(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cz=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(zg(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Mz(n){return!!(typeof n=="function"&&MA()||!n||typeof n=="string"&&(n in FR||MA())||vk(n)||Array.isArray(n)&&n.every(Mz))}const u_=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,FR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:u_([0,.65,.55,1]),circOut:u_([.55,0,1,.45]),backIn:u_([.31,.01,.66,-.59]),backOut:u_([.33,1.53,.69,.99])};function Rz(n,e){if(n)return typeof n=="function"&&MA()?Cz(n,e):vk(n)?u_(n):Array.isArray(n)?n.map(t=>Rz(t,e)||FR.easeOut):FR[n]}const ul={x:!1,y:!1};function Pz(){return ul.x||ul.y}function Cse(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function Iz(n,e){const t=Cse(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function eN(n){return!(n.pointerType==="touch"||Pz())}function Mse(n,e,t={}){const[r,i,s]=Iz(n,t),o=a=>{if(!eN(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=f=>{eN(f)&&(u(f),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const kz=(n,e)=>e?n===e?!0:kz(n,e.parentElement):!1,_k=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Rse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Pse(n){return Rse.has(n.tagName)||n.tabIndex!==-1}const c_=new WeakSet;function tN(n){return e=>{e.key==="Enter"&&n(e)}}function bT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ise=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=tN(()=>{if(c_.has(t))return;bT(t,"down");const i=tN(()=>{bT(t,"up")}),s=()=>bT(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function nN(n){return _k(n)&&!Pz()}function kse(n,e,t={}){const[r,i,s]=Iz(n,t),o=a=>{const l=a.currentTarget;if(!nN(a)||c_.has(l))return;c_.add(l);const u=e(l,a),c=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!nN(p)||!c_.has(l))&&(c_.delete(l),typeof u=="function"&&u(p,{success:g}))},f=p=>{c(p,t.useGlobalTarget||kz(l,p.target))},h=p=>{c(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!Pse(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",u=>Ise(u,i),i)}),s}function Ose(n){return n==="x"||n==="y"?ul[n]?null:(ul[n]=!0,()=>{ul[n]=!1}):ul.x||ul.y?null:(ul.x=ul.y=!0,()=>{ul.x=ul.y=!1})}const Oz=new Set(["width","height","top","left","right","bottom",...vy]);let $w;function Dse(){$w=void 0}const eu={now:()=>($w===void 0&&eu.set(ys.isProcessing||Rie.useManualTiming?ys.timestamp:performance.now()),$w),set:n=>{$w=n,queueMicrotask(Dse)}};function xk(n,e){n.indexOf(e)===-1&&n.push(e)}function wk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Ak{constructor(){this.subscriptions=[]}add(e){return xk(this.subscriptions,e),()=>wk(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Dz(n,e){return e?n*(1e3/e):0}const rN=30,Lse=n=>!isNaN(parseFloat(n)),T_={current:void 0};class Nse{constructor(e,t={}){this.version="12.0.5",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=eu.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=eu.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Lse(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Ak);const r=this.events[e].add(t);return e==="change"?()=>{r(),br.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return T_.current&&T_.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=eu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>rN)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,rN);return Dz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gg(n,e){return new Nse(n,e)}function Bse(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Gg(t))}function Fse(n,e){const t=Eb(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const o in s){const a=Xie(s[o]);Bse(n,o,a)}}function Use(n){return!!(Us(n)&&n.add)}function UR(n,e){const t=n.getValue("willChange");if(Use(t))return t.add(e)}function Lz(n){return n.props[hz]}const Nz=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,jse=1e-7,Vse=12;function zse(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=Nz(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>jse&&++a<Vse);return o}function z0(n,e,t,r){if(n===e&&t===r)return Zo;const i=s=>zse(s,0,1,n,t);return s=>s===0||s===1?s:Nz(i(s),e,r)}const Bz=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Fz=n=>e=>1-n(1-e),Uz=z0(.33,1.53,.69,.99),Ek=Fz(Uz),jz=Bz(Ek),Vz=n=>(n*=2)<1?.5*Ek(n):.5*(2-Math.pow(2,-10*(n-1))),bk=n=>1-Math.sin(Math.acos(n)),zz=Fz(bk),Hz=Bz(bk),Gz=n=>/^0[^.\s]+$/u.test(n);function Hse(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Gz(n):!0}const C_=n=>Math.round(n*1e5)/1e5,Sk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gse(n){return n==null}const qse=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tk=(n,e)=>t=>!!(typeof t=="string"&&qse.test(t)&&t.startsWith(n)||e&&!Gse(t)&&Object.prototype.hasOwnProperty.call(t,e)),qz=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Sk);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Wse=n=>kc(0,255,n),ST={..._y,transform:n=>Math.round(Wse(n))},Wd={test:Tk("rgb","red"),parse:qz("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ST.transform(n)+", "+ST.transform(e)+", "+ST.transform(t)+", "+C_(t0.transform(r))+")"};function $se(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jR={test:Tk("#"),parse:$se,transform:Wd.transform},pg={test:Tk("hsl","hue"),parse:qz("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Zl.transform(C_(e))+", "+Zl.transform(C_(t))+", "+C_(t0.transform(r))+")"},Ds={test:n=>Wd.test(n)||jR.test(n)||pg.test(n),parse:n=>Wd.test(n)?Wd.parse(n):pg.test(n)?pg.parse(n):jR.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Wd.transform(n):pg.transform(n)},Kse=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Jse(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Sk))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Kse))===null||t===void 0?void 0:t.length)||0)>0}const Wz="number",$z="color",Xse="var",Yse="var(",iN="${}",Qse=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function r0(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Qse,l=>(Ds.test(l)?(r.color.push(s),i.push($z),t.push(Ds.parse(l))):l.startsWith(Yse)?(r.var.push(s),i.push(Xse),t.push(l)):(r.number.push(s),i.push(Wz),t.push(parseFloat(l))),++s,iN)).split(iN);return{values:t,split:a,indexes:r,types:i}}function Kz(n){return r0(n).values}function Jz(n){const{split:e,types:t}=r0(n),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=t[o];a===Wz?s+=C_(i[o]):a===$z?s+=Ds.transform(i[o]):s+=i[o]}return s}}const Zse=n=>typeof n=="number"?0:n;function eoe(n){const e=Kz(n);return Jz(n)(e.map(Zse))}const dh={test:Jse,parse:Kz,createTransformer:Jz,getAnimatableNone:eoe},toe=new Set(["brightness","contrast","saturate","opacity"]);function noe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Sk)||[];if(!r)return n;const i=t.replace(r,"");let s=toe.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const roe=/\b([a-z-]*)\(.*?\)/gu,VR={...dh,getAnimatableNone:n=>{const e=n.match(roe);return e?e.map(noe).join(" "):n}},ioe={...ck,color:Ds,backgroundColor:Ds,outlineColor:Ds,fill:Ds,stroke:Ds,borderColor:Ds,borderTopColor:Ds,borderRightColor:Ds,borderBottomColor:Ds,borderLeftColor:Ds,filter:VR,WebkitFilter:VR},Ck=n=>ioe[n];function Xz(n,e){let t=Ck(n);return t!==VR&&(t=dh),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const soe=new Set(["auto","none","0"]);function ooe(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!soe.has(s)&&r0(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=Xz(t,i)}const sN=n=>n===_y||n===Yt,oN=(n,e)=>parseFloat(n.split(", ")[e]),aN=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return oN(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?oN(s[1],n):0}},aoe=new Set(["x","y","z"]),loe=vy.filter(n=>!aoe.has(n));function uoe(n){const e=[];return loe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const qg={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:aN(4,13),y:aN(5,14)};qg.translateX=qg.x;qg.translateY=qg.y;const np=new Set;let zR=!1,HR=!1;function Yz(){if(HR){const n=Array.from(np).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=uoe(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}HR=!1,zR=!1,np.forEach(n=>n.complete()),np.clear()}function Qz(){np.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(HR=!0)})}function coe(){Qz(),Yz()}class Mk{constructor(e,t,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(np.add(this),zR||(zR=!0,br.read(Qz),br.resolveKeyframes(Yz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),np.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,np.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Zz=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),foe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hoe(n){const e=foe.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function e8(n,e,t=1){const[r,i]=hoe(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Zz(o)?parseFloat(o):o}return uk(i)?e8(i,e,t+1):i}const t8=n=>e=>e.test(n),doe={test:n=>n==="auto",parse:n=>n},n8=[_y,Yt,Zl,Nf,nse,tse,doe],lN=n=>n8.find(t8(n));class r8 extends Mk{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),uk(u))){const c=e8(u,t.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Oz.has(r)||e.length!==2)return;const[i,s]=e,o=lN(i),a=lN(s);if(o!==a)if(sN(o)&&sN(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Hse(e[i])&&r.push(i);r.length&&ooe(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qg[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=qg[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const uN=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(dh.test(n)||n==="0")&&!n.startsWith("url("));function poe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function moe(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=uN(i,e),a=uN(s,e);return!o||!a?!1:poe(n)||(t==="spring"||yk(t))&&r}const goe=n=>n!==null;function bb(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(goe),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const yoe=40;class i8{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=eu.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yoe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&coe(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=eu.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!moe(e,r,i,s))if(o)this.options.duration=0;else{l&&l(bb(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,t);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Gr=(n,e,t)=>n+(e-n)*t;function TT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function voe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=TT(l,a,n+1/3),s=TT(l,a,n),o=TT(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function RA(n,e){return t=>t>0?e:n}const CT=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},_oe=[jR,Wd,pg],xoe=n=>_oe.find(e=>e.test(n));function cN(n){const e=xoe(n);if(!e)return!1;let t=e.parse(n);return e===pg&&(t=voe(t)),t}const fN=(n,e)=>{const t=cN(n),r=cN(e);if(!t||!r)return RA(n,e);const i={...t};return s=>(i.red=CT(t.red,r.red,s),i.green=CT(t.green,r.green,s),i.blue=CT(t.blue,r.blue,s),i.alpha=Gr(t.alpha,r.alpha,s),Wd.transform(i))},woe=(n,e)=>t=>e(n(t)),H0=(...n)=>n.reduce(woe),GR=new Set(["none","hidden"]);function Aoe(n,e){return GR.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Eoe(n,e){return t=>Gr(n,e,t)}function Rk(n){return typeof n=="number"?Eoe:typeof n=="string"?uk(n)?RA:Ds.test(n)?fN:Toe:Array.isArray(n)?s8:typeof n=="object"?Ds.test(n)?fN:boe:RA}function s8(n,e){const t=[...n],r=t.length,i=n.map((s,o)=>Rk(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}}function boe(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=Rk(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Soe(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][i[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;r[s]=l,i[o]++}return r}const Toe=(n,e)=>{const t=dh.createTransformer(e),r=r0(n),i=r0(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?GR.has(n)&&!i.values.length||GR.has(e)&&!r.values.length?Aoe(n,e):H0(s8(Soe(r,i),i.values),t):RA(n,e)};function o8(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Gr(n,e,t):Rk(n)(n,e)}const Coe=5;function a8(n,e,t){const r=Math.max(e-Coe,0);return Dz(t-n(r),e-r)}const si={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hN=.001;function Moe({duration:n=si.duration,bounce:e=si.bounce,velocity:t=si.velocity,mass:r=si.mass}){let i,s,o=1-e;o=kc(si.minDamping,si.maxDamping,o),n=kc(si.minDuration,si.maxDuration,wc(n)),o<1?(i=u=>{const c=u*o,f=c*n,h=c-t,p=qR(u,o),g=Math.exp(-f);return hN-h/p*g},s=u=>{const f=u*o*n,h=f*t+t,p=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-f),w=qR(Math.pow(u,2),o);return(-i(u)+hN>0?-1:1)*((h-p)*g)/w}):(i=u=>{const c=Math.exp(-u*n),f=(u-t)*n+1;return-.001+c*f},s=u=>{const c=Math.exp(-u*n),f=(t-u)*(n*n);return c*f});const a=5/n,l=Poe(i,s,a);if(n=xc(n),isNaN(l))return{stiffness:si.stiffness,damping:si.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const Roe=12;function Poe(n,e,t){let r=t;for(let i=1;i<Roe;i++)r=r-n(r)/e(r);return r}function qR(n,e){return n*Math.sqrt(1-e*e)}const Ioe=["duration","bounce"],koe=["stiffness","damping","mass"];function dN(n,e){return e.some(t=>n[t]!==void 0)}function Ooe(n){let e={velocity:si.velocity,stiffness:si.stiffness,damping:si.damping,mass:si.mass,isResolvedFromDuration:!1,...n};if(!dN(n,koe)&&dN(n,Ioe))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*kc(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:si.mass,stiffness:i,damping:s}}else{const t=Moe(n);e={...e,...t,mass:si.mass},e.isResolvedFromDuration=!0}return e}function l8(n=si.visualDuration,e=si.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:f,velocity:h,isResolvedFromDuration:p}=Ooe({...t,velocity:-wc(t.velocity||0)}),g=h||0,w=u/(2*Math.sqrt(l*c)),_=o-s,v=wc(Math.sqrt(l/c)),A=Math.abs(_)<5;r||(r=A?si.restSpeed.granular:si.restSpeed.default),i||(i=A?si.restDelta.granular:si.restDelta.default);let S;if(w<1){const C=qR(v,w);S=L=>{const R=Math.exp(-w*v*L);return o-R*((g+w*v*_)/C*Math.sin(C*L)+_*Math.cos(C*L))}}else if(w===1)S=C=>o-Math.exp(-v*C)*(_+(g+v*_)*C);else{const C=v*Math.sqrt(w*w-1);S=L=>{const R=Math.exp(-w*v*L),k=Math.min(C*L,300);return o-R*((g+w*v*_)*Math.sinh(k)+C*_*Math.cosh(k))/C}}const b={calculatedDuration:p&&f||null,next:C=>{const L=S(C);if(p)a.done=C>=f;else{let R=0;w<1&&(R=C===0?xc(g):a8(S,C,L));const k=Math.abs(R)<=r,O=Math.abs(o-L)<=i;a.done=k&&O}return a.value=a.done?o:L,a},toString:()=>{const C=Math.min(Tz(b),BR),L=Cz(R=>b.next(C*R).value,C,30);return C+"ms "+L}};return b}function pN({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const f=n[0],h={done:!1,value:f},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let w=t*e;const _=f+w,v=o===void 0?_:o(_);v!==_&&(w=v-f);const A=k=>-w*Math.exp(-k/r),S=k=>v+A(k),b=k=>{const O=A(k),M=S(k);h.done=Math.abs(O)<=u,h.value=h.done?v:M};let C,L;const R=k=>{p(h.value)&&(C=k,L=l8({keyframes:[h.value,g(h.value)],velocity:a8(S,k,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return R(0),{calculatedDuration:null,next:k=>{let O=!1;return!L&&C===void 0&&(O=!0,b(k),R(k)),C!==void 0&&k>=C?L.next(k-C):(!O&&b(k),h)}}}const Doe=z0(.42,0,1,1),Loe=z0(0,0,.58,1),u8=z0(.42,0,.58,1),Noe=n=>Array.isArray(n)&&typeof n[0]!="number",mN={linear:Zo,easeIn:Doe,easeInOut:u8,easeOut:Loe,circIn:bk,circInOut:Hz,circOut:zz,backIn:Ek,backInOut:jz,backOut:Uz,anticipate:Vz},gN=n=>{if(vk(n)){LR(n.length===4);const[e,t,r,i]=n;return z0(e,t,r,i)}else if(typeof n=="string")return LR(mN[n]!==void 0),mN[n];return n};function Boe(n,e,t){const r=[],i=t||o8,s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Zo:e;a=H0(l,a)}r.push(a)}return r}function c8(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(LR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=Boe(e,r,i),l=a.length,u=c=>{if(o&&c<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(c<n[f+1]);f++);const h=zg(n[f],n[f+1],c);return a[f](h)};return t?c=>u(kc(n[0],n[s-1],c)):u}function Foe(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=zg(0,e,r);n.push(Gr(t,1,i))}}function Uoe(n){const e=[0];return Foe(e,n.length-1),e}function joe(n,e){return n.map(t=>t*e)}function Voe(n,e){return n.map(()=>e||u8).splice(0,n.length-1)}function PA({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Noe(r)?r.map(gN):gN(r),s={done:!1,value:e[0]},o=joe(t&&t.length===e.length?t:Uoe(e),n),a=c8(o,e,{ease:Array.isArray(i)?i:Voe(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const zoe=n=>{const e=({timestamp:t})=>n(t);return{start:()=>br.update(e,!0),stop:()=>Ic(e),now:()=>ys.isProcessing?ys.timestamp:eu.now()}},Hoe={decay:pN,inertia:pN,tween:PA,keyframes:PA,spring:l8},Goe=n=>n/100;class Pk extends i8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Mk,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=yk(t)?t:Hoe[t]||PA;let l,u;a!==PA&&typeof e[0]!="number"&&(l=H0(Goe,o8(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Tz(c));const{calculatedDuration:f}=c,h=f+i,p=h*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:g,repeatDelay:w,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),A=this.speed>=0?v<0:v>c;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let S=this.currentTime,b=s;if(p){const k=Math.min(this.currentTime,c)/f;let O=Math.floor(k),M=k%1;!M&&k>=1&&(M=1),M===1&&O--,O=Math.min(O,p+1),!!(O%2)&&(g==="reverse"?(M=1-M,w&&(M-=w/f)):g==="mirror"&&(b=o)),S=kc(0,1,M)*f}const C=A?{done:!1,value:l[0]}:b.next(S);a&&(C.value=a(C.value));let{done:L}=C;!A&&u!==null&&(L=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return R&&i!==void 0&&(C.value=bb(l,this.options,i)),_&&_(C.value),R&&this.finish(),C}get duration(){const{resolved:e}=this;return e?wc(e.calculatedDuration):0}get time(){return wc(this.currentTime)}set time(e){e=xc(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=wc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=zoe,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qoe=new Set(["opacity","clipPath","filter","transform"]);function Woe(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const c=Rz(a,i);return Array.isArray(c)&&(u.easing=c),n.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const $oe=tk(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IA=10,Koe=2e4;function Joe(n){return yk(n.type)||n.type==="spring"||!Mz(n.ease)}function Xoe(n,e){const t=new Pk({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Koe;)r=t.sample(s),i.push(r.value),s+=IA;return{times:void 0,keyframes:i,duration:s-IA,ease:"linear"}}const f8={anticipate:Vz,backInOut:jz,circInOut:Hz};function Yoe(n){return n in f8}class yN extends i8{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new r8(s,(o,a)=>this.onKeyframesResolved(o,a),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:u}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&MA()&&Yoe(s)&&(s=f8[s]),Joe(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:g,...w}=this.options,_=Xoe(e,w);e=_.keyframes,e.length===1&&(e[1]=e[0]),r=_.duration,i=_.times,s=_.ease,o="keyframes"}const c=Woe(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return c.startTime=u??this.calcStartTime(),this.pendingTimeline?(ZL(c,this.pendingTimeline),this.pendingTimeline=void 0):c.onfinish=()=>{const{onComplete:f}=this.options;a.set(bb(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:c,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return wc(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return wc(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=xc(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Zo;const{animation:r}=t;ZL(r,e)}return Zo}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:f,element:h,...p}=this.options,g=new Pk({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),w=xc(this.time);u.setWithVelocity(g.sample(w-IA).value,g.sample(w).value,IA)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return $oe()&&r&&qoe.has(r)&&!l&&!u&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Qoe={type:"spring",stiffness:500,damping:25,restSpeed:10},Zoe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),eae={type:"keyframes",duration:.8},tae={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nae=(n,{keyframes:e})=>e.length>2?eae:Bp.has(n)?n.startsWith("scale")?Zoe(e[1]):Qoe:tae;function rae({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const Ik=(n,e,t,r={},i,s)=>o=>{const a=gk(r,n)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-xc(l);let c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:i};rae(a)||(c={...c,...nae(n,c)}),c.duration&&(c.duration=xc(c.duration)),c.repeatDelay&&(c.repeatDelay=xc(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=bb(c.keyframes,a);if(h!==void 0)return br.update(()=>{c.onUpdate(h),c.onComplete()}),new bse([])}return!s&&yN.supports(c)?new yN(c):new Pk(c)};function iae({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function h8(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&n.animationState&&n.animationState.getState()[i];for(const f in l){const h=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||c&&iae(c,f))continue;const g={delay:t,...gk(o||{},f)};let w=!1;if(window.MotionHandoffAnimation){const v=Lz(n);if(v){const A=window.MotionHandoffAnimation(v,f,br);A!==null&&(g.startTime=A,w=!0)}}UR(n,f),h.start(Ik(f,h,p,n.shouldReduceMotion&&Oz.has(f)?{type:!1}:g,n,w));const _=h.animation;_&&u.push(_)}return a&&Promise.all(u).then(()=>{br.update(()=>{a&&Fse(n,a)})}),u}function WR(n,e,t={}){var r;const i=Eb(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const o=i?()=>Promise.all(h8(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=s;return sae(n,e,c+u,f,h,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(t.delay)])}function sae(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(n.variantChildren).sort(oae).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(WR(u,e,{...s,delay:t+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function oae(n,e){return n.sortNodePosition(e)}function aae(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>WR(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=WR(n,e,t);else{const i=typeof e=="function"?Eb(n,e,t.custom):e;r=Promise.all(h8(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const lae=rk.length;function d8(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?d8(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<lae;t++){const r=rk[t],i=n.props[r];(e0(i)||i===!1)&&(e[r]=i)}return e}const uae=[...nk].reverse(),cae=nk.length;function fae(n){return e=>Promise.all(e.map(({animation:t,options:r})=>aae(n,t,r)))}function hae(n){let e=fae(n),t=vN(),r=!0;const i=l=>(u,c)=>{var f;const h=Eb(n,c,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...w}=h;u={...u,...w,...g}}return u};function s(l){e=l(n)}function o(l){const{props:u}=n,c=d8(n.parent)||{},f=[],h=new Set;let p={},g=1/0;for(let _=0;_<cae;_++){const v=uae[_],A=t[v],S=u[v]!==void 0?u[v]:c[v],b=e0(S),C=v===l?A.isActive:null;C===!1&&(g=_);let L=S===c[v]&&S!==u[v]&&b;if(L&&r&&n.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...p},!A.isActive&&C===null||!S&&!A.prevProp||wb(S)||typeof S=="boolean")continue;const R=dae(A.prevProp,S);let k=R||v===l&&A.isActive&&!L&&b||_>g&&b,O=!1;const M=Array.isArray(S)?S:[S];let D=M.reduce(i(v),{});C===!1&&(D={});const{prevResolvedValues:U={}}=A,F={...U,...D},$=ce=>{k=!0,h.has(ce)&&(O=!0,h.delete(ce)),A.needsAnimating[ce]=!0;const Q=n.getValue(ce);Q&&(Q.liveStyle=!1)};for(const ce in F){const Q=D[ce],ee=U[ce];if(p.hasOwnProperty(ce))continue;let Y=!1;NR(Q)&&NR(ee)?Y=!Sz(Q,ee):Y=Q!==ee,Y?Q!=null?$(ce):h.add(ce):Q!==void 0&&h.has(ce)?$(ce):A.protectedKeys[ce]=!0}A.prevProp=S,A.prevResolvedValues=D,A.isActive&&(p={...p,...D}),r&&n.blockInitialAnimation&&(k=!1),k&&(!(L&&R)||O)&&f.push(...M.map(ce=>({animation:ce,options:{type:v}})))}if(h.size){const _={};h.forEach(v=>{const A=n.getBaseTarget(v),S=n.getValue(v);S&&(S.liveStyle=!0),_[v]=A??null}),f.push({animation:_})}let w=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(f):Promise.resolve()}function a(l,u){var c;if(t[l].isActive===u)return Promise.resolve();(c=n.variantChildren)===null||c===void 0||c.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const f=o(l);for(const h in t)t[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=vN(),r=!0}}}function dae(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Sz(e,n):!1}function dd(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vN(){return{animate:dd(!0),whileInView:dd(),whileHover:dd(),whileTap:dd(),whileDrag:dd(),whileFocus:dd(),exit:dd()}}class Eh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pae extends Eh{constructor(e){super(e),e.animationState||(e.animationState=hae(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mae=0;class gae extends Eh{constructor(){super(...arguments),this.id=mae++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yae={animation:{Feature:pae},exit:{Feature:gae}};function i0(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function G0(n){return{point:{x:n.pageX,y:n.pageY}}}const vae=n=>e=>_k(e)&&n(e,G0(e));function M_(n,e,t,r){return i0(n,e,vae(t),r)}const _N=(n,e)=>Math.abs(n-e);function _ae(n,e){const t=_N(n.x,e.x),r=_N(n.y,e.y);return Math.sqrt(t**2+r**2)}class p8{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=RT(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=_ae(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:g}=f,{timestamp:w}=ys;this.history.push({...g,timestamp:w});const{onStart:_,onMove:v}=this.handlers;h||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=MT(h,this.transformPagePoint),br.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=RT(f.type==="pointercancel"?this.lastMoveEventInfo:MT(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,_),g&&g(f,_)},!_k(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=G0(e),a=MT(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=ys;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,RT(a,this.history)),this.removeListeners=H0(M_(this.contextWindow,"pointermove",this.handlePointerMove),M_(this.contextWindow,"pointerup",this.handlePointerUp),M_(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ic(this.updatePoint)}}function MT(n,e){return e?{point:e(n.point)}:n}function xN(n,e){return{x:n.x-e.x,y:n.y-e.y}}function RT({point:n},e){return{point:n,delta:xN(n,m8(e)),offset:xN(n,xae(e)),velocity:wae(e,.1)}}function xae(n){return n[0]}function m8(n){return n[n.length-1]}function wae(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=m8(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>xc(e)));)t--;if(!r)return{x:0,y:0};const s=wc(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const g8=1e-4,Aae=1-g8,Eae=1+g8,y8=.01,bae=0-y8,Sae=0+y8;function ta(n){return n.max-n.min}function Tae(n,e,t){return Math.abs(n-e)<=t}function wN(n,e,t,r=.5){n.origin=r,n.originPoint=Gr(e.min,e.max,n.origin),n.scale=ta(t)/ta(e),n.translate=Gr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Aae&&n.scale<=Eae||isNaN(n.scale))&&(n.scale=1),(n.translate>=bae&&n.translate<=Sae||isNaN(n.translate))&&(n.translate=0)}function R_(n,e,t,r){wN(n.x,e.x,t.x,r?r.originX:void 0),wN(n.y,e.y,t.y,r?r.originY:void 0)}function AN(n,e,t){n.min=t.min+e.min,n.max=n.min+ta(e)}function Cae(n,e,t){AN(n.x,e.x,t.x),AN(n.y,e.y,t.y)}function EN(n,e,t){n.min=e.min-t.min,n.max=n.min+ta(e)}function P_(n,e,t){EN(n.x,e.x,t.x),EN(n.y,e.y,t.y)}function Mae(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Gr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Gr(t,n,r.max):Math.min(n,t)),n}function bN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Rae(n,{top:e,left:t,bottom:r,right:i}){return{x:bN(n.x,t,i),y:bN(n.y,e,r)}}function SN(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Pae(n,e){return{x:SN(n.x,e.x),y:SN(n.y,e.y)}}function Iae(n,e){let t=.5;const r=ta(n),i=ta(e);return i>r?t=zg(e.min,e.max-r,n.min):r>i&&(t=zg(n.min,n.max-i,e.min)),kc(0,1,t)}function kae(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const $R=.35;function Oae(n=$R){return n===!1?n=0:n===!0&&(n=$R),{x:TN(n,"left","right"),y:TN(n,"top","bottom")}}function TN(n,e,t){return{min:CN(n,e),max:CN(n,t)}}function CN(n,e){return typeof n=="number"?n:n[e]||0}const MN=()=>({translate:0,scale:1,origin:0,originPoint:0}),mg=()=>({x:MN(),y:MN()}),RN=()=>({min:0,max:0}),di=()=>({x:RN(),y:RN()});function wa(n){return[n("x"),n("y")]}function v8({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Dae({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Lae(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function PT(n){return n===void 0||n===1}function KR({scale:n,scaleX:e,scaleY:t}){return!PT(n)||!PT(e)||!PT(t)}function Ld(n){return KR(n)||_8(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function _8(n){return PN(n.x)||PN(n.y)}function PN(n){return n&&n!=="0%"}function kA(n,e,t){const r=n-t,i=e*r;return t+i}function IN(n,e,t,r,i){return i!==void 0&&(n=kA(n,i,r)),kA(n,t,r)+e}function JR(n,e=0,t=1,r,i){n.min=IN(n.min,e,t,r,i),n.max=IN(n.max,e,t,r,i)}function x8(n,{x:e,y:t}){JR(n.x,e.translate,e.scale,e.originPoint),JR(n.y,t.translate,t.scale,t.originPoint)}const kN=.999999999999,ON=1.0000000000001;function Nae(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&yg(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,x8(n,o)),r&&Ld(s.latestValues)&&yg(n,s.latestValues))}e.x<ON&&e.x>kN&&(e.x=1),e.y<ON&&e.y>kN&&(e.y=1)}function gg(n,e){n.min=n.min+e,n.max=n.max+e}function DN(n,e,t,r,i=.5){const s=Gr(n.min,n.max,i);JR(n,e,t,s,r)}function yg(n,e){DN(n.x,e.x,e.scaleX,e.scale,e.originX),DN(n.y,e.y,e.scaleY,e.scale,e.originY)}function w8(n,e){return v8(Lae(n.getBoundingClientRect(),e))}function Bae(n,e,t){const r=w8(n,t),{scroll:i}=e;return i&&(gg(r.x,i.offset.x),gg(r.y,i.offset.y)),r}const A8=({current:n})=>n?n.ownerDocument.defaultView:null,Fae=new WeakMap;class Uae{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=di(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(G0(c).point)},s=(c,f)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ose(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wa(_=>{let v=this.getAxisMotionValue(_).get()||0;if(Zl.test(v)){const{projection:A}=this.visualElement;if(A&&A.layout){const S=A.layout.layoutBox[_];S&&(v=ta(S)*(parseFloat(v)/100))}}this.originPoint[_]=v}),g&&br.postRender(()=>g(c,f)),UR(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(c,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:w}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:_}=f;if(p&&this.currentDirection===null){this.currentDirection=jae(_),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),w&&w(c,f)},a=(c,f)=>this.stop(c,f),l=()=>wa(c=>{var f;return this.getAnimationState(c)==="paused"&&((f=this.getAxisMotionValue(c).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new p8(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:A8(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&br.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!w1(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Mae(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&dg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Rae(i.layoutBox,t):this.constraints=!1,this.elastic=Oae(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&wa(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kae(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!dg(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Bae(r,i.root,this.visualElement.getTransformPagePoint());let o=Pae(i.layout.layoutBox,s);if(t){const a=t(Dae(o));this.hasMutatedConstraints=!!a,a&&(o=v8(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=wa(c=>{if(!w1(c,t,this.currentDirection))return;let f=l[c]||{};o&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[c]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(c,g)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return UR(this.visualElement,e),r.start(Ik(e,r,0,t,this.visualElement,!1))}stopAnimation(){wa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){wa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){wa(t=>{const{drag:r}=this.getProps();if(!w1(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-Gr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!dg(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wa(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Iae({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wa(o=>{if(!w1(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Gr(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;Fae.set(this.visualElement,this);const e=this.visualElement.current,t=M_(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();dg(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),br.read(r);const o=i0(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(wa(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=l[c].translate,f.set(f.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=$R,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function w1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function jae(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Vae extends Eh{constructor(e){super(e),this.removeGroupControls=Zo,this.removeListeners=Zo,this.controls=new Uae(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zo}unmount(){this.removeGroupControls(),this.removeListeners()}}const LN=n=>(e,t)=>{n&&br.postRender(()=>n(e,t))};class zae extends Eh{constructor(){super(...arguments),this.removePointerDownListener=Zo}onPointerDown(e){this.session=new p8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LN(e),onStart:LN(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&br.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=M_(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Kw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function NN(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rv={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Yt.test(n))n=parseFloat(n);else return n;const t=NN(n,e.target.x),r=NN(n,e.target.y);return`${t}% ${r}%`}},Hae={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=dh.parse(n);if(i.length>5)return r;const s=dh.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Gr(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class Gae extends W.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hse(qae),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Kw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||br.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),sk.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function E8(n){const[e,t]=az(),r=W.useContext(QI);return N.jsx(Gae,{...n,layoutGroup:r,switchLayoutGroup:W.useContext(dz),isPresent:e,safeToRemove:t})}const qae={borderRadius:{...Rv,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rv,borderTopRightRadius:Rv,borderBottomLeftRadius:Rv,borderBottomRightRadius:Rv,boxShadow:Hae};function Wae(n,e,t){const r=Us(n)?n:Gg(n);return r.start(Ik("",r,e,t)),r.animation}function $ae(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Kae=(n,e)=>n.depth-e.depth;class Jae{constructor(){this.children=[],this.isDirty=!1}add(e){xk(this.children,e),this.isDirty=!0}remove(e){wk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Kae),this.isDirty=!1,this.children.forEach(e)}}function Xae(n,e){const t=eu.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(Ic(r),n(s-e))};return br.read(r,!0),()=>Ic(r)}const b8=["TopLeft","TopRight","BottomLeft","BottomRight"],Yae=b8.length,BN=n=>typeof n=="string"?parseFloat(n):n,FN=n=>typeof n=="number"||Yt.test(n);function Qae(n,e,t,r,i,s){i?(n.opacity=Gr(0,t.opacity!==void 0?t.opacity:1,Zae(r)),n.opacityExit=Gr(e.opacity!==void 0?e.opacity:1,0,ele(r))):s&&(n.opacity=Gr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<Yae;o++){const a=`border${b8[o]}Radius`;let l=UN(e,a),u=UN(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||FN(l)===FN(u)?(n[a]=Math.max(Gr(BN(l),BN(u),r),0),(Zl.test(u)||Zl.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=Gr(e.rotate||0,t.rotate||0,r))}function UN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Zae=S8(0,.5,zz),ele=S8(.5,.95,Zo);function S8(n,e,t){return r=>r<n?0:r>e?1:t(zg(n,e,r))}function jN(n,e){n.min=e.min,n.max=e.max}function va(n,e){jN(n.x,e.x),jN(n.y,e.y)}function VN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function zN(n,e,t,r,i){return n-=e,n=kA(n,1/t,r),i!==void 0&&(n=kA(n,1/i,r)),n}function tle(n,e=0,t=1,r=.5,i,s=n,o=n){if(Zl.test(e)&&(e=parseFloat(e),e=Gr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Gr(s.min,s.max,r);n===s&&(a-=e),n.min=zN(n.min,e,t,a,i),n.max=zN(n.max,e,t,a,i)}function HN(n,e,[t,r,i],s,o){tle(n,e[t],e[r],e[i],e.scale,s,o)}const nle=["x","scaleX","originX"],rle=["y","scaleY","originY"];function GN(n,e,t,r){HN(n.x,e,nle,t?t.x:void 0,r?r.x:void 0),HN(n.y,e,rle,t?t.y:void 0,r?r.y:void 0)}function qN(n){return n.translate===0&&n.scale===1}function T8(n){return qN(n.x)&&qN(n.y)}function WN(n,e){return n.min===e.min&&n.max===e.max}function ile(n,e){return WN(n.x,e.x)&&WN(n.y,e.y)}function $N(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function C8(n,e){return $N(n.x,e.x)&&$N(n.y,e.y)}function KN(n){return ta(n.x)/ta(n.y)}function JN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class sle{constructor(){this.members=[]}add(e){xk(this.members,e),e.scheduleRender()}remove(e){if(wk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ole(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:f,rotateY:h,skewX:p,skewY:g}=t;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Nd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},f_=typeof window<"u"&&window.MotionDebug!==void 0,IT=["","X","Y","Z"],ale={visibility:"hidden"},XN=1e3;let lle=0;function kT(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function M8(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Lz(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",br,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&M8(r)}function R8({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=lle++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,f_&&(Nd.totalNodes=Nd.resolvedTargetDeltas=Nd.recalculatedProjection=0),this.nodes.forEach(fle),this.nodes.forEach(gle),this.nodes.forEach(yle),this.nodes.forEach(hle),f_&&window.MotionDebug.record(Nd)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jae)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ak),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=$ae(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let f;const h=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Xae(h,250),Kw.hasAnimatedSinceResize&&(Kw.hasAnimatedSinceResize=!1,this.nodes.forEach(QN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||c.getDefaultTransition()||Ale,{onLayoutAnimationStart:_,onLayoutAnimationComplete:v}=c.getProps(),A=!this.targetLayout||!C8(this.targetLayout,g),S=!h&&p;if(this.options.layoutRoot||this.resumeFrom||S||h&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const b={...gk(w,"layout"),onPlay:_,onComplete:v};(c.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else h||QN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ic(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vle),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YN);return}this.isUpdating||this.nodes.forEach(ple),this.isUpdating=!1,this.nodes.forEach(mle),this.nodes.forEach(ule),this.nodes.forEach(cle),this.clearAllSnapshots();const a=eu.now();ys.delta=kc(0,1e3/60,a-ys.timestamp),ys.timestamp=a,ys.isProcessing=!0,ET.update.process(ys),ET.preRender.process(ys),ET.render.process(ys),ys.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dle),this.sharedNodes.forEach(_le)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,br.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){br.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!T8(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||Ld(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Ele(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return di();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ble))){const{scroll:c}=this.root;c&&(gg(l.x,c.offset.x),gg(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=di();if(va(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&va(l,o),gg(l.x,f.offset.x),gg(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=di();va(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&yg(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ld(c.latestValues)&&yg(l,c.latestValues)}return Ld(this.latestValues)&&yg(l,this.latestValues),l}removeTransform(o){const a=di();va(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ld(u.latestValues))continue;KR(u.latestValues)&&u.updateSnapshot();const c=di(),f=u.measurePageBox();va(c,f),GN(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ld(this.latestValues)&&GN(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ys.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=ys.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),P_(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=di(),this.targetWithTransforms=di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Cae(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):va(this.target,this.layout.layoutBox),x8(this.target,this.targetDelta)):va(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=di(),this.relativeTargetOrigin=di(),P_(this.relativeTargetOrigin,this.target,p.target),va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}f_&&Nd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||KR(this.parent.latestValues)||_8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ys.timestamp&&(u=!1),u)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;va(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Nae(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=di());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(VN(this.prevProjectionDelta.x,this.projectionDelta.x),VN(this.prevProjectionDelta.y,this.projectionDelta.y)),R_(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!JN(this.projectionDelta.x,this.prevProjectionDelta.x)||!JN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),f_&&Nd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mg(),this.projectionDelta=mg(),this.projectionDeltaWithTransform=mg()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},f=mg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=di(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,w=p!==g,_=this.getStack(),v=!_||_.members.length<=1,A=!!(w&&!v&&this.options.crossfade===!0&&!this.path.some(wle));this.animationProgress=0;let S;this.mixTargetDelta=b=>{const C=b/1e3;ZN(f.x,o.x,C),ZN(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(P_(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xle(this.relativeTarget,this.relativeTargetOrigin,h,C),S&&ile(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=di()),va(S,this.relativeTarget)),w&&(this.animationValues=c,Qae(c,u,this.latestValues,C,A,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ic(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=br.update(()=>{Kw.hasAnimatedSinceResize=!0,this.currentAnimation=Wae(0,XN,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&P8(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||di();const f=ta(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=ta(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}va(a,l),yg(a,c),R_(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sle),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&kT("z",o,u,this.animationValues);for(let c=0;c<IT.length;c++)kT(`rotate${IT[c]}`,o,u,this.animationValues),kT(`skew${IT[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ale;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ww(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ww(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ld(this.latestValues)&&(w.transform=c?c({},""):"none",this.hasProjected=!1),w}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=ole(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in n0){if(h[w]===void 0)continue;const{correct:_,applyTo:v,isCSSVariable:A}=n0[w],S=u.transform==="none"?h[w]:_(h[w],f);if(v){const b=v.length;for(let C=0;C<b;C++)u[v[C]]=S}else A?this.options.visualElement.renderState.vars[w]=S:u[w]=S}return this.options.layoutId&&(u.pointerEvents=f===this?Ww(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(YN),this.root.sharedNodes.clear()}}}function ule(n){n.updateLayout()}function cle(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?wa(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=ta(h);h.min=r[f].min,h.max=h.min+p}):P8(s,t.layoutBox,r)&&wa(f=>{const h=o?t.measuredBox[f]:t.layoutBox[f],p=ta(r[f]);h.max=h.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+p)});const a=mg();R_(a,r,t.layoutBox);const l=mg();o?R_(l,n.applyTransform(i,!0),t.measuredBox):R_(l,r,t.layoutBox);const u=!T8(a);let c=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const g=di();P_(g,t.layoutBox,h.layoutBox);const w=di();P_(w,r,p.layoutBox),C8(g,w)||(c=!0),f.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=g,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function fle(n){f_&&Nd.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function hle(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function dle(n){n.clearSnapshot()}function YN(n){n.clearMeasurements()}function ple(n){n.isLayoutDirty=!1}function mle(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function QN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function gle(n){n.resolveTargetDelta()}function yle(n){n.calcProjection()}function vle(n){n.resetSkewAndRotation()}function _le(n){n.removeLeadSnapshot()}function ZN(n,e,t){n.translate=Gr(e.translate,0,t),n.scale=Gr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function eB(n,e,t,r){n.min=Gr(e.min,t.min,r),n.max=Gr(e.max,t.max,r)}function xle(n,e,t,r){eB(n.x,e.x,t.x,r),eB(n.y,e.y,t.y,r)}function wle(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Ale={duration:.45,ease:[.4,0,.1,1]},tB=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),nB=tB("applewebkit/")&&!tB("chrome/")?Math.round:Zo;function rB(n){n.min=nB(n.min),n.max=nB(n.max)}function Ele(n){rB(n.x),rB(n.y)}function P8(n,e,t){return n==="position"||n==="preserve-aspect"&&!Tae(KN(e),KN(t),.2)}function ble(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Sle=R8({attachResizeListener:(n,e)=>i0(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),OT={current:void 0},I8=R8({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!OT.current){const n=new Sle({});n.mount(window),n.setOptions({layoutScroll:!0}),OT.current=n}return OT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Tle={pan:{Feature:zae},drag:{Feature:Vae,ProjectionNode:I8,MeasureLayout:E8}};function iB(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&br.postRender(()=>s(e,G0(e)))}class Cle extends Eh{mount(){const{current:e}=this.node;e&&(this.unmount=Mse(e,(t,r)=>(iB(this.node,r,"Start"),i=>iB(this.node,i,"End"))))}unmount(){}}class Mle extends Eh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=H0(i0(this.node.current,"focus",()=>this.onFocus()),i0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sB(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&br.postRender(()=>s(e,G0(e)))}class Rle extends Eh{mount(){const{current:e}=this.node;e&&(this.unmount=kse(e,(t,r)=>(sB(this.node,r,"Start"),(i,{success:s})=>sB(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const XR=new WeakMap,DT=new WeakMap,Ple=n=>{const e=XR.get(n.target);e&&e(n)},Ile=n=>{n.forEach(Ple)};function kle({root:n,...e}){const t=n||document;DT.has(t)||DT.set(t,{});const r=DT.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Ile,{root:n,...e})),r[i]}function Ole(n,e,t){const r=kle(e);return XR.set(n,t),r.observe(n),()=>{XR.delete(n),r.unobserve(n)}}const Dle={some:0,all:1};class Lle extends Eh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Dle[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=u?c:f;h&&h(l)};return Ole(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Nle(e,t))&&this.startObserver()}unmount(){}}function Nle({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Ble={inView:{Feature:Lle},tap:{Feature:Rle},focus:{Feature:Mle},hover:{Feature:Cle}},Fle={layout:{ProjectionNode:I8,MeasureLayout:E8}},YR={current:null},k8={current:!1};function Ule(){if(k8.current=!0,!!ZI)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>YR.current=n.matches;n.addListener(e),e()}else YR.current=!1}const jle=[...n8,Ds,dh],Vle=n=>jle.find(t8(n)),oB=new WeakMap;function zle(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Us(i))n.addValue(r,i);else if(Us(s))n.addValue(r,Gg(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const o=n.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(r);n.addValue(r,Gg(o!==void 0?o:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const aB=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Hle{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=eu.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,br.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:c}=o;this.onUpdate=c,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Ab(t),this.isVariantNode=fz(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in h){const g=h[p];l[p]!==void 0&&Us(g)&&g.set(l[p],!1)}}mount(e){this.current=e,oB.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),k8.current||Ule(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:YR.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oB.delete(this.current),this.projection&&this.projection.unmount(),Ic(this.notifyUpdate),Ic(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bp.has(e),i=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&br.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hg){const t=Hg[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):di()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<aB.length;r++){const i=aB[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=zle(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Gg(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Zz(i)||Gz(i))?i=parseFloat(i):!Vle(i)&&dh.test(t)&&(i=Xz(e,t)),this.setBaseTarget(e,Us(i)?i.get():i)),Us(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=ak(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Us(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Ak),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class O8 extends Hle{constructor(){super(...arguments),this.KeyframeResolver=r8}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Us(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Gle(n){return window.getComputedStyle(n)}class qle extends O8{constructor(){super(...arguments),this.type="html",this.renderInstance=_z}readValueFromInstance(e,t){if(Bp.has(t)){const r=Ck(t);return r&&r.default||0}else{const r=Gle(e),i=(lk(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return w8(e,t)}build(e,t,r){fk(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return mk(e,t,r)}}class Wle extends O8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=di}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Bp.has(t)){const r=Ck(t);return r&&r.default||0}return t=xz.has(t)?t:ik(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Ez(e,t,r)}build(e,t,r){hk(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){wz(e,t,r,i)}mount(e){this.isSVGTag=pk(e.tagName),super.mount(e)}}const $le=(n,e)=>ok(n)?new Wle(e):new qle(e,{allowProjection:n!==W.Fragment}),Kle=wse({...yae,...Ble,...Tle,...Fle},$le),on=Nie(Kle);function s0(n){const e=j0(()=>Gg(n)),{isStatic:t}=W.useContext(_b);if(t){const[,r]=W.useState(n);W.useEffect(()=>e.on("change",r),[])}return e}function D8(n,e){const t=s0(e()),r=()=>t.set(e());return r(),ek(()=>{const i=()=>br.preRender(r,!1,!0),s=n.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),Ic(r)}}),t}const Jle=n=>n&&typeof n=="object"&&n.mix,Xle=n=>Jle(n)?n.mix:void 0;function Yle(...n){const e=!Array.isArray(n[0]),t=e?0:-1,r=n[0+t],i=n[1+t],s=n[2+t],o=n[3+t],a=c8(i,s,{mixer:Xle(s[0]),...o});return e?a(r):a}function Qle(n){T_.current=[],n();const e=D8(T_.current,n);return T_.current=void 0,e}function OA(n,e,t,r){if(typeof n=="function")return Qle(n);const i=typeof e=="function"?e:Yle(e,t,r);return Array.isArray(n)?lB(n,i):lB([n],([s])=>i(s))}function lB(n,e){const t=j0(()=>[]);return D8(n,()=>{t.length=0;const r=n.length;for(let i=0;i<r;i++)t[i]=n[i].get();return e(t)})}var Zle=function(e){return eue(e)&&!tue(e)};function eue(n){return!!n&&typeof n=="object"}function tue(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||iue(n)}var nue=typeof Symbol=="function"&&Symbol.for,rue=nue?Symbol.for("react.element"):60103;function iue(n){return n.$$typeof===rue}function sue(n){return Array.isArray(n)?[]:{}}function DA(n,e){return e.clone!==!1&&e.isMergeableObject(n)?o0(sue(n),n,e):n}function oue(n,e,t){return n.concat(e).map(function(r){return DA(r,t)})}function aue(n,e,t){var r={};return t.isMergeableObject(n)&&Object.keys(n).forEach(function(i){r[i]=DA(n[i],t)}),Object.keys(e).forEach(function(i){!t.isMergeableObject(e[i])||!n[i]?r[i]=DA(e[i],t):r[i]=o0(n[i],e[i],t)}),r}function o0(n,e,t){t=t||{},t.arrayMerge=t.arrayMerge||oue,t.isMergeableObject=t.isMergeableObject||Zle;var r=Array.isArray(e),i=Array.isArray(n),s=r===i;return s?r?t.arrayMerge(n,e,t):aue(n,e,t):DA(e,t)}o0.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,i){return o0(r,i,t)},{})};var QR=o0,L8=typeof global=="object"&&global&&global.Object===Object&&global,lue=typeof self=="object"&&self&&self.Object===Object&&self,fu=L8||lue||Function("return this")(),ph=fu.Symbol,N8=Object.prototype,uue=N8.hasOwnProperty,cue=N8.toString,Pv=ph?ph.toStringTag:void 0;function fue(n){var e=uue.call(n,Pv),t=n[Pv];try{n[Pv]=void 0;var r=!0}catch{}var i=cue.call(n);return r&&(e?n[Pv]=t:delete n[Pv]),i}var hue=Object.prototype,due=hue.toString;function pue(n){return due.call(n)}var mue="[object Null]",gue="[object Undefined]",uB=ph?ph.toStringTag:void 0;function Fp(n){return n==null?n===void 0?gue:mue:uB&&uB in Object(n)?fue(n):pue(n)}function B8(n,e){return function(t){return n(e(t))}}var kk=B8(Object.getPrototypeOf,Object);function Up(n){return n!=null&&typeof n=="object"}var yue="[object Object]",vue=Function.prototype,_ue=Object.prototype,F8=vue.toString,xue=_ue.hasOwnProperty,wue=F8.call(Object);function cB(n){if(!Up(n)||Fp(n)!=yue)return!1;var e=kk(n);if(e===null)return!0;var t=xue.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&F8.call(t)==wue}function Aue(){this.__data__=[],this.size=0}function U8(n,e){return n===e||n!==n&&e!==e}function Sb(n,e){for(var t=n.length;t--;)if(U8(n[t][0],e))return t;return-1}var Eue=Array.prototype,bue=Eue.splice;function Sue(n){var e=this.__data__,t=Sb(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():bue.call(e,t,1),--this.size,!0}function Tue(n){var e=this.__data__,t=Sb(e,n);return t<0?void 0:e[t][1]}function Cue(n){return Sb(this.__data__,n)>-1}function Mue(n,e){var t=this.__data__,r=Sb(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Fc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Fc.prototype.clear=Aue;Fc.prototype.delete=Sue;Fc.prototype.get=Tue;Fc.prototype.has=Cue;Fc.prototype.set=Mue;function Rue(){this.__data__=new Fc,this.size=0}function Pue(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function Iue(n){return this.__data__.get(n)}function kue(n){return this.__data__.has(n)}function q0(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Oue="[object AsyncFunction]",Due="[object Function]",Lue="[object GeneratorFunction]",Nue="[object Proxy]";function j8(n){if(!q0(n))return!1;var e=Fp(n);return e==Due||e==Lue||e==Oue||e==Nue}var LT=fu["__core-js_shared__"],fB=function(){var n=/[^.]+$/.exec(LT&&LT.keys&&LT.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Bue(n){return!!fB&&fB in n}var Fue=Function.prototype,Uue=Fue.toString;function jp(n){if(n!=null){try{return Uue.call(n)}catch{}try{return n+""}catch{}}return""}var jue=/[\\^$.*+?()[\]{}|]/g,Vue=/^\[object .+?Constructor\]$/,zue=Function.prototype,Hue=Object.prototype,Gue=zue.toString,que=Hue.hasOwnProperty,Wue=RegExp("^"+Gue.call(que).replace(jue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $ue(n){if(!q0(n)||Bue(n))return!1;var e=j8(n)?Wue:Vue;return e.test(jp(n))}function Kue(n,e){return n==null?void 0:n[e]}function Vp(n,e){var t=Kue(n,e);return $ue(t)?t:void 0}var a0=Vp(fu,"Map"),l0=Vp(Object,"create");function Jue(){this.__data__=l0?l0(null):{},this.size=0}function Xue(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Yue="__lodash_hash_undefined__",Que=Object.prototype,Zue=Que.hasOwnProperty;function ece(n){var e=this.__data__;if(l0){var t=e[n];return t===Yue?void 0:t}return Zue.call(e,n)?e[n]:void 0}var tce=Object.prototype,nce=tce.hasOwnProperty;function rce(n){var e=this.__data__;return l0?e[n]!==void 0:nce.call(e,n)}var ice="__lodash_hash_undefined__";function sce(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=l0&&e===void 0?ice:e,this}function yp(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}yp.prototype.clear=Jue;yp.prototype.delete=Xue;yp.prototype.get=ece;yp.prototype.has=rce;yp.prototype.set=sce;function oce(){this.size=0,this.__data__={hash:new yp,map:new(a0||Fc),string:new yp}}function ace(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Tb(n,e){var t=n.__data__;return ace(e)?t[typeof e=="string"?"string":"hash"]:t.map}function lce(n){var e=Tb(this,n).delete(n);return this.size-=e?1:0,e}function uce(n){return Tb(this,n).get(n)}function cce(n){return Tb(this,n).has(n)}function fce(n,e){var t=Tb(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function bh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bh.prototype.clear=oce;bh.prototype.delete=lce;bh.prototype.get=uce;bh.prototype.has=cce;bh.prototype.set=fce;var hce=200;function dce(n,e){var t=this.__data__;if(t instanceof Fc){var r=t.__data__;if(!a0||r.length<hce-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new bh(r)}return t.set(n,e),this.size=t.size,this}function xy(n){var e=this.__data__=new Fc(n);this.size=e.size}xy.prototype.clear=Rue;xy.prototype.delete=Pue;xy.prototype.get=Iue;xy.prototype.has=kue;xy.prototype.set=dce;function pce(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var hB=function(){try{var n=Vp(Object,"defineProperty");return n({},"",{}),n}catch{}}();function V8(n,e,t){e=="__proto__"&&hB?hB(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var mce=Object.prototype,gce=mce.hasOwnProperty;function z8(n,e,t){var r=n[e];(!(gce.call(n,e)&&U8(r,t))||t===void 0&&!(e in n))&&V8(n,e,t)}function Cb(n,e,t,r){var i=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),i?V8(t,a,l):z8(t,a,l)}return t}function yce(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var vce="[object Arguments]";function dB(n){return Up(n)&&Fp(n)==vce}var H8=Object.prototype,_ce=H8.hasOwnProperty,xce=H8.propertyIsEnumerable,wce=dB(function(){return arguments}())?dB:function(n){return Up(n)&&_ce.call(n,"callee")&&!xce.call(n,"callee")},W0=Array.isArray;function Ace(){return!1}var G8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pB=G8&&typeof module=="object"&&module&&!module.nodeType&&module,Ece=pB&&pB.exports===G8,mB=Ece?fu.Buffer:void 0,bce=mB?mB.isBuffer:void 0,q8=bce||Ace,Sce=9007199254740991,Tce=/^(?:0|[1-9]\d*)$/;function Cce(n,e){var t=typeof n;return e=e??Sce,!!e&&(t=="number"||t!="symbol"&&Tce.test(n))&&n>-1&&n%1==0&&n<e}var Mce=9007199254740991;function W8(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Mce}var Rce="[object Arguments]",Pce="[object Array]",Ice="[object Boolean]",kce="[object Date]",Oce="[object Error]",Dce="[object Function]",Lce="[object Map]",Nce="[object Number]",Bce="[object Object]",Fce="[object RegExp]",Uce="[object Set]",jce="[object String]",Vce="[object WeakMap]",zce="[object ArrayBuffer]",Hce="[object DataView]",Gce="[object Float32Array]",qce="[object Float64Array]",Wce="[object Int8Array]",$ce="[object Int16Array]",Kce="[object Int32Array]",Jce="[object Uint8Array]",Xce="[object Uint8ClampedArray]",Yce="[object Uint16Array]",Qce="[object Uint32Array]",Mr={};Mr[Gce]=Mr[qce]=Mr[Wce]=Mr[$ce]=Mr[Kce]=Mr[Jce]=Mr[Xce]=Mr[Yce]=Mr[Qce]=!0;Mr[Rce]=Mr[Pce]=Mr[zce]=Mr[Ice]=Mr[Hce]=Mr[kce]=Mr[Oce]=Mr[Dce]=Mr[Lce]=Mr[Nce]=Mr[Bce]=Mr[Fce]=Mr[Uce]=Mr[jce]=Mr[Vce]=!1;function Zce(n){return Up(n)&&W8(n.length)&&!!Mr[Fp(n)]}function Ok(n){return function(e){return n(e)}}var $8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,I_=$8&&typeof module=="object"&&module&&!module.nodeType&&module,efe=I_&&I_.exports===$8,NT=efe&&L8.process,Wg=function(){try{var n=I_&&I_.require&&I_.require("util").types;return n||NT&&NT.binding&&NT.binding("util")}catch{}}(),gB=Wg&&Wg.isTypedArray,tfe=gB?Ok(gB):Zce,nfe=Object.prototype,rfe=nfe.hasOwnProperty;function K8(n,e){var t=W0(n),r=!t&&wce(n),i=!t&&!r&&q8(n),s=!t&&!r&&!i&&tfe(n),o=t||r||i||s,a=o?yce(n.length,String):[],l=a.length;for(var u in n)(e||rfe.call(n,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Cce(u,l)))&&a.push(u);return a}var ife=Object.prototype;function Dk(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||ife;return n===t}var sfe=B8(Object.keys,Object),ofe=Object.prototype,afe=ofe.hasOwnProperty;function lfe(n){if(!Dk(n))return sfe(n);var e=[];for(var t in Object(n))afe.call(n,t)&&t!="constructor"&&e.push(t);return e}function J8(n){return n!=null&&W8(n.length)&&!j8(n)}function Lk(n){return J8(n)?K8(n):lfe(n)}function ufe(n,e){return n&&Cb(e,Lk(e),n)}function cfe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ffe=Object.prototype,hfe=ffe.hasOwnProperty;function dfe(n){if(!q0(n))return cfe(n);var e=Dk(n),t=[];for(var r in n)r=="constructor"&&(e||!hfe.call(n,r))||t.push(r);return t}function Nk(n){return J8(n)?K8(n,!0):dfe(n)}function pfe(n,e){return n&&Cb(e,Nk(e),n)}var X8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yB=X8&&typeof module=="object"&&module&&!module.nodeType&&module,mfe=yB&&yB.exports===X8,vB=mfe?fu.Buffer:void 0,_B=vB?vB.allocUnsafe:void 0;function gfe(n,e){if(e)return n.slice();var t=n.length,r=_B?_B(t):new n.constructor(t);return n.copy(r),r}function Y8(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}function yfe(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}function Q8(){return[]}var vfe=Object.prototype,_fe=vfe.propertyIsEnumerable,xB=Object.getOwnPropertySymbols,Bk=xB?function(n){return n==null?[]:(n=Object(n),yfe(xB(n),function(e){return _fe.call(n,e)}))}:Q8;function xfe(n,e){return Cb(n,Bk(n),e)}function Z8(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var wfe=Object.getOwnPropertySymbols,eH=wfe?function(n){for(var e=[];n;)Z8(e,Bk(n)),n=kk(n);return e}:Q8;function Afe(n,e){return Cb(n,eH(n),e)}function tH(n,e,t){var r=e(n);return W0(n)?r:Z8(r,t(n))}function Efe(n){return tH(n,Lk,Bk)}function bfe(n){return tH(n,Nk,eH)}var ZR=Vp(fu,"DataView"),eP=Vp(fu,"Promise"),tP=Vp(fu,"Set"),nP=Vp(fu,"WeakMap"),wB="[object Map]",Sfe="[object Object]",AB="[object Promise]",EB="[object Set]",bB="[object WeakMap]",SB="[object DataView]",Tfe=jp(ZR),Cfe=jp(a0),Mfe=jp(eP),Rfe=jp(tP),Pfe=jp(nP),lc=Fp;(ZR&&lc(new ZR(new ArrayBuffer(1)))!=SB||a0&&lc(new a0)!=wB||eP&&lc(eP.resolve())!=AB||tP&&lc(new tP)!=EB||nP&&lc(new nP)!=bB)&&(lc=function(n){var e=Fp(n),t=e==Sfe?n.constructor:void 0,r=t?jp(t):"";if(r)switch(r){case Tfe:return SB;case Cfe:return wB;case Mfe:return AB;case Rfe:return EB;case Pfe:return bB}return e});var Ife=Object.prototype,kfe=Ife.hasOwnProperty;function Ofe(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&kfe.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var TB=fu.Uint8Array;function Fk(n){var e=new n.constructor(n.byteLength);return new TB(e).set(new TB(n)),e}function Dfe(n,e){var t=e?Fk(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Lfe=/\w*$/;function Nfe(n){var e=new n.constructor(n.source,Lfe.exec(n));return e.lastIndex=n.lastIndex,e}var CB=ph?ph.prototype:void 0,MB=CB?CB.valueOf:void 0;function Bfe(n){return MB?Object(MB.call(n)):{}}function Ffe(n,e){var t=e?Fk(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Ufe="[object Boolean]",jfe="[object Date]",Vfe="[object Map]",zfe="[object Number]",Hfe="[object RegExp]",Gfe="[object Set]",qfe="[object String]",Wfe="[object Symbol]",$fe="[object ArrayBuffer]",Kfe="[object DataView]",Jfe="[object Float32Array]",Xfe="[object Float64Array]",Yfe="[object Int8Array]",Qfe="[object Int16Array]",Zfe="[object Int32Array]",ehe="[object Uint8Array]",the="[object Uint8ClampedArray]",nhe="[object Uint16Array]",rhe="[object Uint32Array]";function ihe(n,e,t){var r=n.constructor;switch(e){case $fe:return Fk(n);case Ufe:case jfe:return new r(+n);case Kfe:return Dfe(n,t);case Jfe:case Xfe:case Yfe:case Qfe:case Zfe:case ehe:case the:case nhe:case rhe:return Ffe(n,t);case Vfe:return new r;case zfe:case qfe:return new r(n);case Hfe:return Nfe(n);case Gfe:return new r;case Wfe:return Bfe(n)}}var RB=Object.create,she=function(){function n(){}return function(e){if(!q0(e))return{};if(RB)return RB(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function ohe(n){return typeof n.constructor=="function"&&!Dk(n)?she(kk(n)):{}}var ahe="[object Map]";function lhe(n){return Up(n)&&lc(n)==ahe}var PB=Wg&&Wg.isMap,uhe=PB?Ok(PB):lhe,che="[object Set]";function fhe(n){return Up(n)&&lc(n)==che}var IB=Wg&&Wg.isSet,hhe=IB?Ok(IB):fhe,dhe=1,phe=2,mhe=4,nH="[object Arguments]",ghe="[object Array]",yhe="[object Boolean]",vhe="[object Date]",_he="[object Error]",rH="[object Function]",xhe="[object GeneratorFunction]",whe="[object Map]",Ahe="[object Number]",iH="[object Object]",Ehe="[object RegExp]",bhe="[object Set]",She="[object String]",The="[object Symbol]",Che="[object WeakMap]",Mhe="[object ArrayBuffer]",Rhe="[object DataView]",Phe="[object Float32Array]",Ihe="[object Float64Array]",khe="[object Int8Array]",Ohe="[object Int16Array]",Dhe="[object Int32Array]",Lhe="[object Uint8Array]",Nhe="[object Uint8ClampedArray]",Bhe="[object Uint16Array]",Fhe="[object Uint32Array]",Ar={};Ar[nH]=Ar[ghe]=Ar[Mhe]=Ar[Rhe]=Ar[yhe]=Ar[vhe]=Ar[Phe]=Ar[Ihe]=Ar[khe]=Ar[Ohe]=Ar[Dhe]=Ar[whe]=Ar[Ahe]=Ar[iH]=Ar[Ehe]=Ar[bhe]=Ar[She]=Ar[The]=Ar[Lhe]=Ar[Nhe]=Ar[Bhe]=Ar[Fhe]=!0;Ar[_he]=Ar[rH]=Ar[Che]=!1;function k_(n,e,t,r,i,s){var o,a=e&dhe,l=e&phe,u=e&mhe;if(o!==void 0)return o;if(!q0(n))return n;var c=W0(n);if(c){if(o=Ofe(n),!a)return Y8(n,o)}else{var f=lc(n),h=f==rH||f==xhe;if(q8(n))return gfe(n,a);if(f==iH||f==nH||h&&!i){if(o=l||h?{}:ohe(n),!a)return l?Afe(n,pfe(o,n)):xfe(n,ufe(o,n))}else{if(!Ar[f])return i?n:{};o=ihe(n,f,a)}}s||(s=new xy);var p=s.get(n);if(p)return p;s.set(n,o),hhe(n)?n.forEach(function(_){o.add(k_(_,e,t,_,n,s))}):uhe(n)&&n.forEach(function(_,v){o.set(v,k_(_,e,t,v,n,s))});var g=u?l?bfe:Efe:l?Nk:Lk,w=c?void 0:g(n);return pce(w||n,function(_,v){w&&(v=_,_=n[v]),z8(o,v,k_(_,e,t,v,n,s))}),o}var Uhe=1,jhe=4;function h_(n){return k_(n,Uhe|jhe)}var BT,kB;function Vhe(){if(kB)return BT;kB=1;var n=Array.isArray,e=Object.keys,t=Object.prototype.hasOwnProperty,r=typeof Element<"u";function i(s,o){if(s===o)return!0;if(s&&o&&typeof s=="object"&&typeof o=="object"){var a=n(s),l=n(o),u,c,f;if(a&&l){if(c=s.length,c!=o.length)return!1;for(u=c;u--!==0;)if(!i(s[u],o[u]))return!1;return!0}if(a!=l)return!1;var h=s instanceof Date,p=o instanceof Date;if(h!=p)return!1;if(h&&p)return s.getTime()==o.getTime();var g=s instanceof RegExp,w=o instanceof RegExp;if(g!=w)return!1;if(g&&w)return s.toString()==o.toString();var _=e(s);if(c=_.length,c!==e(o).length)return!1;for(u=c;u--!==0;)if(!t.call(o,_[u]))return!1;if(r&&s instanceof Element&&o instanceof Element)return s===o;for(u=c;u--!==0;)if(f=_[u],!(f==="_owner"&&s.$$typeof)&&!i(s[f],o[f]))return!1;return!0}return s!==s&&o!==o}return BT=function(o,a){try{return i(o,a)}catch(l){if(l.message&&l.message.match(/stack|recursion/i)||l.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",l.name,l.message),!1;throw l}},BT}var zhe=Vhe();const Ff=Ma(zhe);var Hhe=4;function OB(n){return k_(n,Hhe)}function sH(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var Ghe="[object Symbol]";function Uk(n){return typeof n=="symbol"||Up(n)&&Fp(n)==Ghe}var qhe="Expected a function";function jk(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(qhe);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=n.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(jk.Cache||bh),t}jk.Cache=bh;var Whe=500;function $he(n){var e=jk(n,function(r){return t.size===Whe&&t.clear(),r}),t=e.cache;return e}var Khe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jhe=/\\(\\)?/g,Xhe=$he(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Khe,function(t,r,i,s){e.push(i?s.replace(Jhe,"$1"):r||t)}),e});function Yhe(n){if(typeof n=="string"||Uk(n))return n;var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}var DB=ph?ph.prototype:void 0,LB=DB?DB.toString:void 0;function oH(n){if(typeof n=="string")return n;if(W0(n))return sH(n,oH)+"";if(Uk(n))return LB?LB.call(n):"";var e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Qhe(n){return n==null?"":oH(n)}function aH(n){return W0(n)?sH(n,Yhe):Uk(n)?[n]:Y8(Xhe(Qhe(n)))}var FT={exports:{}},rr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NB;function Zhe(){if(NB)return rr;NB=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,u=n?Symbol.for("react.concurrent_mode"):60111,c=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,w=n?Symbol.for("react.block"):60121,_=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,A=n?Symbol.for("react.scope"):60119;function S(C){if(typeof C=="object"&&C!==null){var L=C.$$typeof;switch(L){case e:switch(C=C.type,C){case l:case u:case r:case s:case i:case f:return C;default:switch(C=C&&C.$$typeof,C){case a:case c:case g:case p:case o:return C;default:return L}}case t:return L}}}function b(C){return S(C)===u}return rr.AsyncMode=l,rr.ConcurrentMode=u,rr.ContextConsumer=a,rr.ContextProvider=o,rr.Element=e,rr.ForwardRef=c,rr.Fragment=r,rr.Lazy=g,rr.Memo=p,rr.Portal=t,rr.Profiler=s,rr.StrictMode=i,rr.Suspense=f,rr.isAsyncMode=function(C){return b(C)||S(C)===l},rr.isConcurrentMode=b,rr.isContextConsumer=function(C){return S(C)===a},rr.isContextProvider=function(C){return S(C)===o},rr.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},rr.isForwardRef=function(C){return S(C)===c},rr.isFragment=function(C){return S(C)===r},rr.isLazy=function(C){return S(C)===g},rr.isMemo=function(C){return S(C)===p},rr.isPortal=function(C){return S(C)===t},rr.isProfiler=function(C){return S(C)===s},rr.isStrictMode=function(C){return S(C)===i},rr.isSuspense=function(C){return S(C)===f},rr.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===u||C===s||C===i||C===f||C===h||typeof C=="object"&&C!==null&&(C.$$typeof===g||C.$$typeof===p||C.$$typeof===o||C.$$typeof===a||C.$$typeof===c||C.$$typeof===_||C.$$typeof===v||C.$$typeof===A||C.$$typeof===w)},rr.typeOf=S,rr}var BB;function ede(){return BB||(BB=1,FT.exports=Zhe()),FT.exports}var UT,FB;function tde(){if(FB)return UT;FB=1;var n=ede(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=r,s[n.Memo]=i;function o(g){return n.isMemo(g)?i:s[g.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;function p(g,w,_){if(typeof w!="string"){if(h){var v=f(w);v&&v!==h&&p(g,v,_)}var A=l(w);u&&(A=A.concat(u(w)));for(var S=o(g),b=o(w),C=0;C<A.length;++C){var L=A[C];if(!t[L]&&!(_&&_[L])&&!(b&&b[L])&&!(S&&S[L])){var R=c(w,L);try{a(g,L,R)}catch{}}}}return g}return UT=p,UT}var nde=tde();const rde=Ma(nde);function ii(){return ii=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ii.apply(this,arguments)}function lH(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function Mb(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function UB(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var Rb=W.createContext(void 0);Rb.displayName="FormikContext";var ide=Rb.Provider,sde=Rb.Consumer;function ode(){var n=W.useContext(Rb);return n}var jB=function(e){return Array.isArray(e)&&e.length===0},Ls=function(e){return typeof e=="function"},$0=function(e){return e!==null&&typeof e=="object"},ade=function(e){return String(Math.floor(Number(e)))===e},jT=function(e){return Object.prototype.toString.call(e)==="[object String]"},uH=function(e){return W.Children.count(e)===0},VT=function(e){return $0(e)&&Ls(e.then)};function kr(n,e,t,r){r===void 0&&(r=0);for(var i=aH(e);n&&r<i.length;)n=n[i[r++]];return r!==i.length&&!n||n===void 0?t:n}function tu(n,e,t){for(var r=OB(n),i=r,s=0,o=aH(e);s<o.length-1;s++){var a=o[s],l=kr(n,o.slice(0,s+1));if(l&&($0(l)||Array.isArray(l)))i=i[a]=OB(l);else{var u=o[s+1];i=i[a]=ade(u)&&Number(u)>=0?[]:{}}}return(s===0?n:i)[o[s]]===t?n:(t===void 0?delete i[o[s]]:i[o[s]]=t,s===0&&t===void 0&&delete r[o[s]],r)}function cH(n,e,t,r){t===void 0&&(t=new WeakMap),r===void 0&&(r={});for(var i=0,s=Object.keys(n);i<s.length;i++){var o=s[i],a=n[o];$0(a)?t.get(a)||(t.set(a,!0),r[o]=Array.isArray(a)?[]:{},cH(a,e,t,r[o])):r[o]=e}return r}function lde(n,e){switch(e.type){case"SET_VALUES":return ii({},n,{values:e.payload});case"SET_TOUCHED":return ii({},n,{touched:e.payload});case"SET_ERRORS":return Ff(n.errors,e.payload)?n:ii({},n,{errors:e.payload});case"SET_STATUS":return ii({},n,{status:e.payload});case"SET_ISSUBMITTING":return ii({},n,{isSubmitting:e.payload});case"SET_ISVALIDATING":return ii({},n,{isValidating:e.payload});case"SET_FIELD_VALUE":return ii({},n,{values:tu(n.values,e.payload.field,e.payload.value)});case"SET_FIELD_TOUCHED":return ii({},n,{touched:tu(n.touched,e.payload.field,e.payload.value)});case"SET_FIELD_ERROR":return ii({},n,{errors:tu(n.errors,e.payload.field,e.payload.value)});case"RESET_FORM":return ii({},n,e.payload);case"SET_FORMIK_STATE":return e.payload(n);case"SUBMIT_ATTEMPT":return ii({},n,{touched:cH(n.values,!0),isSubmitting:!0,submitCount:n.submitCount+1});case"SUBMIT_FAILURE":return ii({},n,{isSubmitting:!1});case"SUBMIT_SUCCESS":return ii({},n,{isSubmitting:!1});default:return n}}var pd={},A1={};function wy(n){var e=n.validateOnChange,t=e===void 0?!0:e,r=n.validateOnBlur,i=r===void 0?!0:r,s=n.validateOnMount,o=s===void 0?!1:s,a=n.isInitialValid,l=n.enableReinitialize,u=l===void 0?!1:l,c=n.onSubmit,f=Mb(n,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=ii({validateOnChange:t,validateOnBlur:i,validateOnMount:o,onSubmit:c},f),p=W.useRef(h.initialValues),g=W.useRef(h.initialErrors||pd),w=W.useRef(h.initialTouched||A1),_=W.useRef(h.initialStatus),v=W.useRef(!1),A=W.useRef({});W.useEffect(function(){return v.current=!0,function(){v.current=!1}},[]);var S=W.useState(0),b=S[1],C=W.useRef({values:h_(h.initialValues),errors:h_(h.initialErrors)||pd,touched:h_(h.initialTouched)||A1,status:h_(h.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),L=C.current,R=W.useCallback(function(q){var me=C.current;C.current=lde(me,q),me!==C.current&&b(function(de){return de+1})},[]),k=W.useCallback(function(q,me){return new Promise(function(de,ve){var Ae=h.validate(q,me);Ae==null?de(pd):VT(Ae)?Ae.then(function(He){de(He||pd)},function(He){ve(He)}):de(Ae)})},[h.validate]),O=W.useCallback(function(q,me){var de=h.validationSchema,ve=Ls(de)?de(me):de,Ae=me&&ve.validateAt?ve.validateAt(me,q):cde(q,ve);return new Promise(function(He,qe){Ae.then(function(){He(pd)},function(lt){lt.name==="ValidationError"?He(ude(lt)):qe(lt)})})},[h.validationSchema]),M=W.useCallback(function(q,me){return new Promise(function(de){return de(A.current[q].validate(me))})},[]),D=W.useCallback(function(q){var me=Object.keys(A.current).filter(function(ve){return Ls(A.current[ve].validate)}),de=me.length>0?me.map(function(ve){return M(ve,kr(q,ve))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(de).then(function(ve){return ve.reduce(function(Ae,He,qe){return He==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||He&&(Ae=tu(Ae,me[qe],He)),Ae},{})})},[M]),U=W.useCallback(function(q){return Promise.all([D(q),h.validationSchema?O(q):{},h.validate?k(q):{}]).then(function(me){var de=me[0],ve=me[1],Ae=me[2],He=QR.all([de,ve,Ae],{arrayMerge:fde});return He})},[h.validate,h.validationSchema,D,k,O]),F=_a(function(q){return q===void 0&&(q=L.values),R({type:"SET_ISVALIDATING",payload:!0}),U(q).then(function(me){return v.current&&(R({type:"SET_ISVALIDATING",payload:!1}),R({type:"SET_ERRORS",payload:me})),me})});W.useEffect(function(){o&&v.current===!0&&Ff(p.current,h.initialValues)&&F(p.current)},[o,F]);var $=W.useCallback(function(q){var me=q&&q.values?q.values:p.current,de=q&&q.errors?q.errors:g.current?g.current:h.initialErrors||{},ve=q&&q.touched?q.touched:w.current?w.current:h.initialTouched||{},Ae=q&&q.status?q.status:_.current?_.current:h.initialStatus;p.current=me,g.current=de,w.current=ve,_.current=Ae;var He=function(){R({type:"RESET_FORM",payload:{isSubmitting:!!q&&!!q.isSubmitting,errors:de,touched:ve,status:Ae,values:me,isValidating:!!q&&!!q.isValidating,submitCount:q&&q.submitCount&&typeof q.submitCount=="number"?q.submitCount:0}})};if(h.onReset){var qe=h.onReset(L.values,Be);VT(qe)?qe.then(He):He()}else He()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);W.useEffect(function(){v.current===!0&&!Ff(p.current,h.initialValues)&&u&&(p.current=h.initialValues,$(),o&&F(p.current))},[u,h.initialValues,$,o,F]),W.useEffect(function(){u&&v.current===!0&&!Ff(g.current,h.initialErrors)&&(g.current=h.initialErrors||pd,R({type:"SET_ERRORS",payload:h.initialErrors||pd}))},[u,h.initialErrors]),W.useEffect(function(){u&&v.current===!0&&!Ff(w.current,h.initialTouched)&&(w.current=h.initialTouched||A1,R({type:"SET_TOUCHED",payload:h.initialTouched||A1}))},[u,h.initialTouched]),W.useEffect(function(){u&&v.current===!0&&!Ff(_.current,h.initialStatus)&&(_.current=h.initialStatus,R({type:"SET_STATUS",payload:h.initialStatus}))},[u,h.initialStatus,h.initialTouched]);var Z=_a(function(q){if(A.current[q]&&Ls(A.current[q].validate)){var me=kr(L.values,q),de=A.current[q].validate(me);return VT(de)?(R({type:"SET_ISVALIDATING",payload:!0}),de.then(function(ve){return ve}).then(function(ve){R({type:"SET_FIELD_ERROR",payload:{field:q,value:ve}}),R({type:"SET_ISVALIDATING",payload:!1})})):(R({type:"SET_FIELD_ERROR",payload:{field:q,value:de}}),Promise.resolve(de))}else if(h.validationSchema)return R({type:"SET_ISVALIDATING",payload:!0}),O(L.values,q).then(function(ve){return ve}).then(function(ve){R({type:"SET_FIELD_ERROR",payload:{field:q,value:kr(ve,q)}}),R({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),se=W.useCallback(function(q,me){var de=me.validate;A.current[q]={validate:de}},[]),ce=W.useCallback(function(q){delete A.current[q]},[]),Q=_a(function(q,me){R({type:"SET_TOUCHED",payload:q});var de=me===void 0?i:me;return de?F(L.values):Promise.resolve()}),ee=W.useCallback(function(q){R({type:"SET_ERRORS",payload:q})},[]),Y=_a(function(q,me){var de=Ls(q)?q(L.values):q;R({type:"SET_VALUES",payload:de});var ve=me===void 0?t:me;return ve?F(de):Promise.resolve()}),V=W.useCallback(function(q,me){R({type:"SET_FIELD_ERROR",payload:{field:q,value:me}})},[]),X=_a(function(q,me,de){R({type:"SET_FIELD_VALUE",payload:{field:q,value:me}});var ve=de===void 0?t:de;return ve?F(tu(L.values,q,me)):Promise.resolve()}),re=W.useCallback(function(q,me){var de=me,ve=q,Ae;if(!jT(q)){q.persist&&q.persist();var He=q.target?q.target:q.currentTarget,qe=He.type,lt=He.name,yt=He.id,Ye=He.value,vt=He.checked;He.outerHTML;var kt=He.options,Ft=He.multiple;de=me||lt||yt,ve=/number|range/.test(qe)?(Ae=parseFloat(Ye),isNaN(Ae)?"":Ae):/checkbox/.test(qe)?dde(kr(L.values,de),vt,Ye):kt&&Ft?hde(kt):Ye}de&&X(de,ve)},[X,L.values]),oe=_a(function(q){if(jT(q))return function(me){return re(me,q)};re(q)}),fe=_a(function(q,me,de){me===void 0&&(me=!0),R({type:"SET_FIELD_TOUCHED",payload:{field:q,value:me}});var ve=de===void 0?i:de;return ve?F(L.values):Promise.resolve()}),te=W.useCallback(function(q,me){q.persist&&q.persist();var de=q.target,ve=de.name,Ae=de.id;de.outerHTML;var He=me||ve||Ae;fe(He,!0)},[fe]),ue=_a(function(q){if(jT(q))return function(me){return te(me,q)};te(q)}),ye=W.useCallback(function(q){Ls(q)?R({type:"SET_FORMIK_STATE",payload:q}):R({type:"SET_FORMIK_STATE",payload:function(){return q}})},[]),xe=W.useCallback(function(q){R({type:"SET_STATUS",payload:q})},[]),Te=W.useCallback(function(q){R({type:"SET_ISSUBMITTING",payload:q})},[]),$e=_a(function(){return R({type:"SUBMIT_ATTEMPT"}),F().then(function(q){var me=q instanceof Error,de=!me&&Object.keys(q).length===0;if(de){var ve;try{if(ve=he(),ve===void 0)return}catch(Ae){throw Ae}return Promise.resolve(ve).then(function(Ae){return v.current&&R({type:"SUBMIT_SUCCESS"}),Ae}).catch(function(Ae){if(v.current)throw R({type:"SUBMIT_FAILURE"}),Ae})}else if(v.current&&(R({type:"SUBMIT_FAILURE"}),me))throw q})}),De=_a(function(q){q&&q.preventDefault&&Ls(q.preventDefault)&&q.preventDefault(),q&&q.stopPropagation&&Ls(q.stopPropagation)&&q.stopPropagation(),$e().catch(function(me){console.warn("Warning: An unhandled error was caught from submitForm()",me)})}),Be={resetForm:$,validateForm:F,validateField:Z,setErrors:ee,setFieldError:V,setFieldTouched:fe,setFieldValue:X,setStatus:xe,setSubmitting:Te,setTouched:Q,setValues:Y,setFormikState:ye,submitForm:$e},he=_a(function(){return c(L.values,Be)}),rt=_a(function(q){q&&q.preventDefault&&Ls(q.preventDefault)&&q.preventDefault(),q&&q.stopPropagation&&Ls(q.stopPropagation)&&q.stopPropagation(),$()}),Je=W.useCallback(function(q){return{value:kr(L.values,q),error:kr(L.errors,q),touched:!!kr(L.touched,q),initialValue:kr(p.current,q),initialTouched:!!kr(w.current,q),initialError:kr(g.current,q)}},[L.errors,L.touched,L.values]),nt=W.useCallback(function(q){return{setValue:function(de,ve){return X(q,de,ve)},setTouched:function(de,ve){return fe(q,de,ve)},setError:function(de){return V(q,de)}}},[X,fe,V]),we=W.useCallback(function(q){var me=$0(q),de=me?q.name:q,ve=kr(L.values,de),Ae={name:de,value:ve,onChange:oe,onBlur:ue};if(me){var He=q.type,qe=q.value,lt=q.as,yt=q.multiple;He==="checkbox"?qe===void 0?Ae.checked=!!ve:(Ae.checked=!!(Array.isArray(ve)&&~ve.indexOf(qe)),Ae.value=qe):He==="radio"?(Ae.checked=ve===qe,Ae.value=qe):lt==="select"&&yt&&(Ae.value=Ae.value||[],Ae.multiple=!0)}return Ae},[ue,oe,L.values]),Pe=W.useMemo(function(){return!Ff(p.current,L.values)},[p.current,L.values]),Le=W.useMemo(function(){return typeof a<"u"?Pe?L.errors&&Object.keys(L.errors).length===0:a!==!1&&Ls(a)?a(h):a:L.errors&&Object.keys(L.errors).length===0},[a,Pe,L.errors,h]),ie=ii({},L,{initialValues:p.current,initialErrors:g.current,initialTouched:w.current,initialStatus:_.current,handleBlur:ue,handleChange:oe,handleReset:rt,handleSubmit:De,resetForm:$,setErrors:ee,setFormikState:ye,setFieldTouched:fe,setFieldValue:X,setFieldError:V,setStatus:xe,setSubmitting:Te,setTouched:Q,setValues:Y,submitForm:$e,validateForm:F,validateField:Z,isValid:Le,dirty:Pe,unregisterField:ce,registerField:se,getFieldProps:we,getFieldMeta:Je,getFieldHelpers:nt,validateOnBlur:i,validateOnChange:t,validateOnMount:o});return ie}function Pb(n){var e=wy(n),t=n.component,r=n.children,i=n.render,s=n.innerRef;return W.useImperativeHandle(s,function(){return e}),W.createElement(ide,{value:e},t?W.createElement(t,e):i?i(e):r?Ls(r)?r(e):uH(r)?null:W.Children.only(r):null)}function ude(n){var e={};if(n.inner){if(n.inner.length===0)return tu(e,n.path,n.message);for(var i=n.inner,t=Array.isArray(i),r=0,i=t?i:i[Symbol.iterator]();;){var s;if(t){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var o=s;kr(e,o.path)||(e=tu(e,o.path,o.message))}}return e}function cde(n,e,t,r){t===void 0&&(t=!1);var i=rP(n);return e[t?"validateSync":"validate"](i,{abortEarly:!1,context:i})}function rP(n){var e=Array.isArray(n)?[]:{};for(var t in n)if(Object.prototype.hasOwnProperty.call(n,t)){var r=String(t);Array.isArray(n[r])===!0?e[r]=n[r].map(function(i){return Array.isArray(i)===!0||cB(i)?rP(i):i!==""?i:void 0}):cB(n[r])?e[r]=rP(n[r]):e[r]=n[r]!==""?n[r]:void 0}return e}function fde(n,e,t){var r=n.slice();return e.forEach(function(s,o){if(typeof r[o]>"u"){var a=t.clone!==!1,l=a&&t.isMergeableObject(s);r[o]=l?QR(Array.isArray(s)?[]:{},s,t):s}else t.isMergeableObject(s)?r[o]=QR(n[o],s,t):n.indexOf(s)===-1&&r.push(s)}),r}function hde(n){return Array.from(n).filter(function(e){return e.selected}).map(function(e){return e.value})}function dde(n,e,t){if(typeof n=="boolean")return!!e;var r=[],i=!1,s=-1;if(Array.isArray(n))r=n,s=n.indexOf(t),i=s>=0;else if(!t||t=="true"||t=="false")return!!e;return e&&t&&!i?r.concat(t):i?r.slice(0,s).concat(r.slice(s+1)):r}var pde=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?W.useLayoutEffect:W.useEffect;function _a(n){var e=W.useRef(n);return pde(function(){e.current=n}),W.useCallback(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.current.apply(void 0,r)},[])}var K0=W.forwardRef(function(n,e){var t=n.action,r=Mb(n,["action"]),i=t??"#",s=ode(),o=s.handleReset,a=s.handleSubmit;return W.createElement("form",ii({onSubmit:a,ref:e,onReset:o,action:i},r))});K0.displayName="Form";function fH(n){var e=function(i){return W.createElement(sde,null,function(s){return W.createElement(n,ii({},i,{formik:s}))})},t=n.displayName||n.name||n.constructor&&n.constructor.name||"Component";return e.WrappedComponent=n,e.displayName="FormikConnect("+t+")",rde(e,n)}var mde=function(e,t,r){var i=vp(e),s=i[t];return i.splice(t,1),i.splice(r,0,s),i},gde=function(e,t,r){var i=vp(e),s=i[t];return i[t]=i[r],i[r]=s,i},zT=function(e,t,r){var i=vp(e);return i.splice(t,0,r),i},yde=function(e,t,r){var i=vp(e);return i[t]=r,i},vp=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map(function(r){return parseInt(r)}).reduce(function(r,i){return i>r?i:r},0);return Array.from(ii({},e,{length:t+1}))}else return[]},VB=function(e,t){var r=typeof e=="function"?e:t;return function(i){if(Array.isArray(i)||$0(i)){var s=vp(i);return r(s)}return i}},hH=function(n){lH(e,n);function e(r){var i;return i=n.call(this,r)||this,i.updateArrayField=function(s,o,a){var l=i.props,u=l.name,c=l.formik.setFormikState;c(function(f){var h=VB(a,s),p=VB(o,s),g=tu(f.values,u,s(kr(f.values,u))),w=a?h(kr(f.errors,u)):void 0,_=o?p(kr(f.touched,u)):void 0;return jB(w)&&(w=void 0),jB(_)&&(_=void 0),ii({},f,{values:g,errors:a?tu(f.errors,u,w):f.errors,touched:o?tu(f.touched,u,_):f.touched})})},i.push=function(s){return i.updateArrayField(function(o){return[].concat(vp(o),[h_(s)])},!1,!1)},i.handlePush=function(s){return function(){return i.push(s)}},i.swap=function(s,o){return i.updateArrayField(function(a){return gde(a,s,o)},!0,!0)},i.handleSwap=function(s,o){return function(){return i.swap(s,o)}},i.move=function(s,o){return i.updateArrayField(function(a){return mde(a,s,o)},!0,!0)},i.handleMove=function(s,o){return function(){return i.move(s,o)}},i.insert=function(s,o){return i.updateArrayField(function(a){return zT(a,s,o)},function(a){return zT(a,s,null)},function(a){return zT(a,s,null)})},i.handleInsert=function(s,o){return function(){return i.insert(s,o)}},i.replace=function(s,o){return i.updateArrayField(function(a){return yde(a,s,o)},!1,!1)},i.handleReplace=function(s,o){return function(){return i.replace(s,o)}},i.unshift=function(s){var o=-1;return i.updateArrayField(function(a){var l=a?[s].concat(a):[s];return o=l.length,l},function(a){return a?[null].concat(a):[null]},function(a){return a?[null].concat(a):[null]}),o},i.handleUnshift=function(s){return function(){return i.unshift(s)}},i.handleRemove=function(s){return function(){return i.remove(s)}},i.handlePop=function(){return function(){return i.pop()}},i.remove=i.remove.bind(UB(i)),i.pop=i.pop.bind(UB(i)),i}var t=e.prototype;return t.componentDidUpdate=function(i){this.props.validateOnChange&&this.props.formik.validateOnChange&&!Ff(kr(i.formik.values,i.name),kr(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},t.remove=function(i){var s;return this.updateArrayField(function(o){var a=o?vp(o):[];return s||(s=a[i]),Ls(a.splice)&&a.splice(i,1),Ls(a.every)&&a.every(function(l){return l===void 0})?[]:a},!0,!0),s},t.pop=function(){var i;return this.updateArrayField(function(s){var o=s.slice();return i||(i=o&&o.pop&&o.pop()),o},!0,!0),i},t.render=function(){var i={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},s=this.props,o=s.component,a=s.render,l=s.children,u=s.name,c=s.formik,f=Mb(c,["validate","validationSchema"]),h=ii({},i,{form:f,name:u});return o?W.createElement(o,h):a?a(h):l?typeof l=="function"?l(h):uH(l)?null:W.Children.only(l):null},e}(W.Component);hH.defaultProps={validateOnChange:!0};var LA=fH(hH),vde=function(n){lH(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.shouldComponentUpdate=function(i){return kr(this.props.formik.errors,this.props.name)!==kr(i.formik.errors,this.props.name)||kr(this.props.formik.touched,this.props.name)!==kr(i.formik.touched,this.props.name)||Object.keys(this.props).length!==Object.keys(i).length},t.render=function(){var i=this.props,s=i.component,o=i.formik,a=i.render,l=i.children,u=i.name,c=Mb(i,["component","formik","render","children","name"]),f=kr(o.touched,u),h=kr(o.errors,u);return f&&h?a?Ls(a)?a(h):null:l?Ls(l)?l(h):null:s?W.createElement(s,c,h):h:null},e}(W.Component),_de=fH(vde),HT,zB;function xde(){if(zB)return HT;zB=1;function n(v){this._maxSize=v,this.clear()}n.prototype.clear=function(){this._size=0,this._values=Object.create(null)},n.prototype.get=function(v){return this._values[v]},n.prototype.set=function(v,A){return this._size>=this._maxSize&&this.clear(),v in this._values||this._size++,this._values[v]=A};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,t=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,s=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,a=new n(o),l=new n(o),u=new n(o);HT={Cache:n,split:f,normalizePath:c,setter:function(v){var A=c(v);return l.get(v)||l.set(v,function(b,C){for(var L=0,R=A.length,k=b;L<R-1;){var O=A[L];if(O==="__proto__"||O==="constructor"||O==="prototype")return b;k=k[A[L++]]}k[A[L]]=C})},getter:function(v,A){var S=c(v);return u.get(v)||u.set(v,function(C){for(var L=0,R=S.length;L<R;)if(C!=null||!A)C=C[S[L++]];else return;return C})},join:function(v){return v.reduce(function(A,S){return A+(p(S)||t.test(S)?"["+S+"]":(A?".":"")+S)},"")},forEach:function(v,A,S){h(Array.isArray(v)?v:f(v),A,S)}};function c(v){return a.get(v)||a.set(v,f(v).map(function(A){return A.replace(s,"$2")}))}function f(v){return v.match(e)||[""]}function h(v,A,S){var b=v.length,C,L,R,k;for(L=0;L<b;L++)C=v[L],C&&(_(C)&&(C='"'+C+'"'),k=p(C),R=!k&&/^\d+$/.test(C),A.call(S,C,k,R,L,v))}function p(v){return typeof v=="string"&&v&&["'",'"'].indexOf(v.charAt(0))!==-1}function g(v){return v.match(r)&&!v.match(t)}function w(v){return i.test(v)}function _(v){return!p(v)&&(g(v)||w(v))}return HT}var rp=xde(),GT,HB;function wde(){if(HB)return GT;HB=1;const n=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=c=>c.match(n)||[],t=c=>c[0].toUpperCase()+c.slice(1),r=(c,f)=>e(c).join(f).toLowerCase(),i=c=>e(c).reduce((f,h)=>`${f}${f?h[0].toUpperCase()+h.slice(1).toLowerCase():h.toLowerCase()}`,"");return GT={words:e,upperFirst:t,camelCase:i,pascalCase:c=>t(i(c)),snakeCase:c=>r(c,"_"),kebabCase:c=>r(c,"-"),sentenceCase:c=>t(r(c," ")),titleCase:c=>e(c).map(t).join(" ")},GT}var qT=wde(),E1={exports:{}},GB;function Ade(){if(GB)return E1.exports;GB=1,E1.exports=function(i){return n(e(i),i)},E1.exports.array=n;function n(i,s){var o=i.length,a=new Array(o),l={},u=o,c=t(s),f=r(i);for(s.forEach(function(p){if(!f.has(p[0])||!f.has(p[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});u--;)l[u]||h(i[u],u,new Set);return a;function h(p,g,w){if(w.has(p)){var _;try{_=", node was:"+JSON.stringify(p)}catch{_=""}throw new Error("Cyclic dependency"+_)}if(!f.has(p))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(p));if(!l[g]){l[g]=!0;var v=c.get(p)||new Set;if(v=Array.from(v),g=v.length){w.add(p);do{var A=v[--g];h(A,f.get(A),w)}while(g);w.delete(p)}a[--o]=p}}}function e(i){for(var s=new Set,o=0,a=i.length;o<a;o++){var l=i[o];s.add(l[0]),s.add(l[1])}return Array.from(s)}function t(i){for(var s=new Map,o=0,a=i.length;o<a;o++){var l=i[o];s.has(l[0])||s.set(l[0],new Set),s.has(l[1])||s.set(l[1],new Set),s.get(l[0]).add(l[1])}return s}function r(i){for(var s=new Map,o=0,a=i.length;o<a;o++)s.set(i[o],o);return s}return E1.exports}var Ede=Ade();const bde=Ma(Ede),Sde=Object.prototype.toString,Tde=Error.prototype.toString,Cde=RegExp.prototype.toString,Mde=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Rde=/^Symbol\((.*)\)(.*)$/;function Pde(n){return n!=+n?"NaN":n===0&&1/n<0?"-0":""+n}function qB(n,e=!1){if(n==null||n===!0||n===!1)return""+n;const t=typeof n;if(t==="number")return Pde(n);if(t==="string")return e?`"${n}"`:n;if(t==="function")return"[Function "+(n.name||"anonymous")+"]";if(t==="symbol")return Mde.call(n).replace(Rde,"Symbol($1)");const r=Sde.call(n).slice(8,-1);return r==="Date"?isNaN(n.getTime())?""+n:n.toISOString(n):r==="Error"||n instanceof Error?"["+Tde.call(n)+"]":r==="RegExp"?Cde.call(n):null}function Ac(n,e){let t=qB(n,e);return t!==null?t:JSON.stringify(n,function(r,i){let s=qB(this[r],e);return s!==null?s:i},2)}function dH(n){return n==null?[]:[].concat(n)}let pH,mH,gH,Ide=/\$\{\s*(\w+)\s*\}/g;pH=Symbol.toStringTag;class WB{constructor(e,t,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[pH]="Error",this.name="ValidationError",this.value=t,this.path=r,this.type=i,this.errors=[],this.inner=[],dH(e).forEach(s=>{if(Co.isError(s)){this.errors.push(...s.errors);const o=s.inner.length?s.inner:[s];this.inner.push(...o)}else this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}mH=Symbol.hasInstance;gH=Symbol.toStringTag;class Co extends Error{static formatError(e,t){const r=t.label||t.path||"this";return t=Object.assign({},t,{path:r,originalPath:t.path}),typeof e=="string"?e.replace(Ide,(i,s)=>Ac(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,r,i,s){const o=new WB(e,t,r,i);if(s)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[gH]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Co)}static[mH](e){return WB[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Wl={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:n,type:e,value:t,originalValue:r})=>{const i=r!=null&&r!==t?` (cast from the value \`${Ac(r,!0)}\`).`:".";return e!=="mixed"?`${n} must be a \`${e}\` type, but the final value was: \`${Ac(t,!0)}\``+i:`${n} must match the configured type. The validated value was: \`${Ac(t,!0)}\``+i}},Eo={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},kde={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},iP={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Ode={isValue:"${path} field must be ${value}"},Jw={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Xw={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Dde={notType:n=>{const{path:e,value:t,spec:r}=n,i=r.types.length;if(Array.isArray(t)){if(t.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${t.length} for value: \`${Ac(t,!0)}\``;if(t.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${t.length} for value: \`${Ac(t,!0)}\``}return Co.formatError(Wl.notType,n)}};Object.assign(Object.create(null),{mixed:Wl,string:Eo,number:kde,date:iP,object:Jw,array:Xw,boolean:Ode,tuple:Dde});const Ib=n=>n&&n.__isYupSchema__;class NA{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:s}=t,o=typeof r=="function"?r:(...a)=>a.every(l=>l===r);return new NA(e,(a,l)=>{var u;let c=o(...a)?i:s;return(u=c==null?void 0:c(l))!=null?u:l})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let r=this.refs.map(s=>s.getValue(t==null?void 0:t.value,t==null?void 0:t.parent,t==null?void 0:t.context)),i=this.fn(r,e,t);if(i===void 0||i===e)return e;if(!Ib(i))throw new TypeError("conditions must return a schema object");return i.resolve(t)}}const b1={context:"$",value:"."};function Lde(n,e){return new Sh(n,e)}class Sh{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===b1.context,this.isValue=this.key[0]===b1.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?b1.context:this.isValue?b1.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&rp.getter(this.path,!0),this.map=t.map}getValue(e,t,r){let i=this.isContext?r:this.isValue?e:t;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,t){return this.getValue(e,t==null?void 0:t.parent,t==null?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Sh.prototype.__isYupRef=!0;const $d=n=>n==null;function Om(n){function e({value:t,path:r="",options:i,originalValue:s,schema:o},a,l){const{name:u,test:c,params:f,message:h,skipAbsent:p}=n;let{parent:g,context:w,abortEarly:_=o.spec.abortEarly,disableStackTrace:v=o.spec.disableStackTrace}=i;function A(D){return Sh.isRef(D)?D.getValue(t,g,w):D}function S(D={}){const U=Object.assign({value:t,originalValue:s,label:o.spec.label,path:D.path||r,spec:o.spec,disableStackTrace:D.disableStackTrace||v},f,D.params);for(const $ of Object.keys(U))U[$]=A(U[$]);const F=new Co(Co.formatError(D.message||h,U),t,U.path,D.type||u,U.disableStackTrace);return F.params=U,F}const b=_?a:l;let C={path:r,parent:g,type:u,from:i.from,createError:S,resolve:A,options:i,originalValue:s,schema:o};const L=D=>{Co.isError(D)?b(D):D?l(null):b(S())},R=D=>{Co.isError(D)?b(D):a(D)};if(p&&$d(t))return L(!0);let O;try{var M;if(O=c.call(C,t,C),typeof((M=O)==null?void 0:M.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${C.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(O).then(L,R)}}catch(D){R(D);return}L(O)}return e.OPTIONS=n,e}function Nde(n,e,t,r=t){let i,s,o;return e?(rp.forEach(e,(a,l,u)=>{let c=l?a.slice(1,a.length-1):a;n=n.resolve({context:r,parent:i,value:t});let f=n.type==="tuple",h=u?parseInt(c,10):0;if(n.innerType||f){if(f&&!u)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(t&&h>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);i=t,t=t&&t[h],n=f?n.spec.types[h]:n.innerType}if(!u){if(!n.fields||!n.fields[c])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${n.type}")`);i=t,t=t&&t[c],n=n.fields[c]}s=c,o=l?"["+a+"]":"."+a}),{schema:n,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:n}}class BA extends Set{describe(){const e=[];for(const t of this.values())e.push(Sh.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const r of this.values())t.push(e(r));return t}clone(){return new BA(this.values())}merge(e,t){const r=this.clone();return e.forEach(i=>r.add(i)),t.forEach(i=>r.delete(i)),r}}function vg(n,e=new Map){if(Ib(n)||!n||typeof n!="object")return n;if(e.has(n))return e.get(n);let t;if(n instanceof Date)t=new Date(n.getTime()),e.set(n,t);else if(n instanceof RegExp)t=new RegExp(n),e.set(n,t);else if(Array.isArray(n)){t=new Array(n.length),e.set(n,t);for(let r=0;r<n.length;r++)t[r]=vg(n[r],e)}else if(n instanceof Map){t=new Map,e.set(n,t);for(const[r,i]of n.entries())t.set(r,vg(i,e))}else if(n instanceof Set){t=new Set,e.set(n,t);for(const r of n)t.add(vg(r,e))}else if(n instanceof Object){t={},e.set(n,t);for(const[r,i]of Object.entries(n))t[r]=vg(i,e)}else throw Error(`Unable to clone ${n}`);return t}class xl{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new BA,this._blacklist=new BA,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Wl.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=vg(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=t,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,r=e.clone();const i=Object.assign({},t.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},t.internalTests,r.internalTests),r._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),r.tests=t.tests,r.exclusiveTests=t.exclusiveTests,r.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),r.transforms=[...t.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let r=t.conditions;t=t.clone(),t.conditions=[],t=r.reduce((i,s)=>s.resolve(i,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,r,i,s;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(s=e.disableStackTrace)!=null?s:this.spec.disableStackTrace})}cast(e,t={}){let r=this.resolve(Object.assign({value:e},t)),i=t.assert==="ignore-optionality",s=r._cast(e,t);if(t.assert!==!1&&!r.isType(s)){if(i&&$d(s))return s;let o=Ac(e),a=Ac(s);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return s}_cast(e,t){let r=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this),e);return r===void 0&&(r=this.getDefault(t)),r}_validate(e,t={},r,i){let{path:s,originalValue:o=e,strict:a=this.spec.strict}=t,l=e;a||(l=this._cast(l,Object.assign({assert:!1},t)));let u=[];for(let c of Object.values(this.internalTests))c&&u.push(c);this.runTests({path:s,value:l,originalValue:o,options:t,tests:u},r,c=>{if(c.length)return i(c,l);this.runTests({path:s,value:l,originalValue:o,options:t,tests:this.tests},r,i)})}runTests(e,t,r){let i=!1,{tests:s,value:o,originalValue:a,path:l,options:u}=e,c=w=>{i||(i=!0,t(w,o))},f=w=>{i||(i=!0,r(w,o))},h=s.length,p=[];if(!h)return f([]);let g={value:o,originalValue:a,path:l,options:u,schema:this};for(let w=0;w<s.length;w++){const _=s[w];_(g,c,function(A){A&&(Array.isArray(A)?p.push(...A):p.push(A)),--h<=0&&f(p)})}}asNestedTest({key:e,index:t,parent:r,parentPath:i,originalParent:s,options:o}){const a=e??t;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const l=typeof a=="number";let u=r[a];const c=Object.assign({},o,{strict:!0,parent:r,value:u,originalValue:s[a],key:void 0,[l?"index":"key"]:a,path:l||a.includes(".")?`${i||""}[${l?a:`"${a}"`}]`:(i?`${i}.`:"")+e});return(f,h,p)=>this.resolve(c)._validate(u,c,h,p)}validate(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s=(r=t==null?void 0:t.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((o,a)=>i._validate(e,t,(l,u)=>{Co.isError(l)&&(l.value=u),a(l)},(l,u)=>{l.length?a(new Co(l,u,void 0,void 0,s)):o(u)}))}validateSync(e,t){var r;let i=this.resolve(Object.assign({},t,{value:e})),s,o=(r=t==null?void 0:t.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},t,{sync:!0}),(a,l)=>{throw Co.isError(a)&&(a.value=l),a},(a,l)=>{if(a.length)throw new Co(a,e,void 0,void 0,o);s=l}),s}isValid(e,t){return this.validate(e,t).then(()=>!0,r=>{if(Co.isError(r))return!1;throw r})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(r){if(Co.isError(r))return!1;throw r}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):vg(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const r=this.clone({nullable:e});return r.internalTests.nullable=Om({message:t,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,t){const r=this.clone({optional:e});return r.internalTests.optionality=Om({message:t,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=Wl.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Wl.notNull){return this.nullability(!1,e)}required(e=Wl.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=Wl.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Om(t),s=t.exclusive||t.name&&r.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(r.exclusiveTests[t.name]=!!t.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===t.name&&(s||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let r=this.clone(),i=dH(e).map(s=>new Sh(s));return i.forEach(s=>{s.isSibling&&r.deps.push(s.key)}),r.conditions.push(typeof t=="function"?new NA(i,t):NA.fromOptions(i,t)),r}typeError(e){let t=this.clone();return t.internalTests.typeError=Om({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Wl.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Om({message:t,name:"oneOf",skipAbsent:!0,test(i){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),r}notOneOf(e,t=Wl.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Om({message:t,name:"notOneOf",test(i){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:s,nullable:o}=t.spec;return{meta:i,label:r,optional:s,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(l=>({name:l.OPTIONS.name,params:l.OPTIONS.params})).filter((l,u,c)=>c.findIndex(f=>f.name===l.name)===u)}}}xl.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])xl.prototype[`${n}At`]=function(e,t,r={}){const{parent:i,parentPath:s,schema:o}=Nde(this,e,t,r.context);return o[n](i&&i[s],Object.assign({},r,{parent:i,path:e}))};for(const n of["equals","is"])xl.prototype[n]=xl.prototype.oneOf;for(const n of["not","nope"])xl.prototype[n]=xl.prototype.notOneOf;const Bde=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Fde(n){const e=sP(n);if(!e)return Date.parse?Date.parse(n):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function sP(n){var e,t;const r=Bde.exec(n);return r?{year:Xu(r[1]),month:Xu(r[2],1)-1,day:Xu(r[3],1),hour:Xu(r[4]),minute:Xu(r[5]),second:Xu(r[6]),millisecond:r[7]?Xu(r[7].substring(0,3)):0,precision:(e=(t=r[7])==null?void 0:t.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Xu(r[10]),minuteOffset:Xu(r[11])}:null}function Xu(n,e=0){return Number(n)||e}let Ude=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jde=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Vde=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,zde="^\\d{4}-\\d{2}-\\d{2}",Hde="\\d{2}:\\d{2}:\\d{2}",Gde="(([+-]\\d{2}(:?\\d{2})?)|Z)",qde=new RegExp(`${zde}T${Hde}(\\.\\d+)?${Gde}$`),Wde=n=>$d(n)||n===n.trim(),$de={}.toString();function Ri(){return new yH}class yH extends xl{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const i=e!=null&&e.toString?e.toString():e;return i===$de?e:i})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Wl.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=Eo.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t=Eo.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t=Eo.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,t){let r=!1,i,s;return t&&(typeof t=="object"?{excludeEmptyString:r=!1,message:i,name:s}=t:i=t),this.test({name:s||"matches",message:i||Eo.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Eo.email){return this.matches(Ude,{name:"email",message:e,excludeEmptyString:!0})}url(e=Eo.url){return this.matches(jde,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Eo.uuid){return this.matches(Vde,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",r,i;return e&&(typeof e=="object"?{message:t="",allowOffset:r=!1,precision:i=void 0}=e:t=e),this.matches(qde,{name:"datetime",message:t||Eo.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||Eo.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:s=>{if(!s||r)return!0;const o=sP(s);return o?!!o.z:!1}}).test({name:"datetime_precision",message:t||Eo.datetime_precision,params:{precision:i},skipAbsent:!0,test:s=>{if(!s||i==null)return!0;const o=sP(s);return o?o.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Eo.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:Wde})}lowercase(e=Eo.lowercase){return this.transform(t=>$d(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>$d(t)||t===t.toLowerCase()})}uppercase(e=Eo.uppercase){return this.transform(t=>$d(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>$d(t)||t===t.toUpperCase()})}}Ri.prototype=yH.prototype;let vH=new Date(""),Kde=n=>Object.prototype.toString.call(n)==="[object Date]";function $g(){return new J0}class J0 extends xl{constructor(){super({type:"date",check(e){return Kde(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=Fde(e),isNaN(e)?J0.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let r;if(Sh.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,t=iP.min){let r=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,t=iP.max){let r=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}J0.INVALID_DATE=vH;$g.prototype=J0.prototype;$g.INVALID_DATE=vH;function Jde(n,e=[]){let t=[],r=new Set,i=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let l=rp.split(o)[0];r.add(l),i.has(`${a}-${l}`)||t.push([a,l])}for(const o of Object.keys(n)){let a=n[o];r.add(o),Sh.isRef(a)&&a.isSibling?s(a.path,o):Ib(a)&&"deps"in a&&a.deps.forEach(l=>s(l,o))}return bde.array(Array.from(r),t).reverse()}function $B(n,e){let t=1/0;return n.some((r,i)=>{var s;if((s=e.path)!=null&&s.includes(r))return t=i,!0}),t}function _H(n){return(e,t)=>$B(n,e)-$B(n,t)}const xH=(n,e,t)=>{if(typeof n!="string")return n;let r=n;try{r=JSON.parse(n)}catch{}return t.isType(r)?r:n};function Yw(n){if("fields"in n){const e={};for(const[t,r]of Object.entries(n.fields))e[t]=Yw(r);return n.setFields(e)}if(n.type==="array"){const e=n.optional();return e.innerType&&(e.innerType=Yw(e.innerType)),e}return n.type==="tuple"?n.optional().clone({types:n.spec.types.map(Yw)}):"optional"in n?n.optional():n}const Xde=(n,e)=>{const t=[...rp.normalizePath(e)];if(t.length===1)return t[0]in n;let r=t.pop(),i=rp.getter(rp.join(t),!0)(n);return!!(i&&r in i)};let KB=n=>Object.prototype.toString.call(n)==="[object Object]";function JB(n,e){let t=Object.keys(n.fields);return Object.keys(e).filter(r=>t.indexOf(r)===-1)}const Yde=_H([]);function zp(n){return new wH(n)}class wH extends xl{constructor(e){super({type:"object",check(t){return KB(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=Yde,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var r;let i=super._cast(e,t);if(i===void 0)return this.getDefault(t);if(!this._typeCheck(i))return i;let s=this.fields,o=(r=t.stripUnknown)!=null?r:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(i).filter(f=>!this._nodes.includes(f))),l={},u=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const f of a){let h=s[f],p=f in i;if(h){let g,w=i[f];u.path=(t.path?`${t.path}.`:"")+f,h=h.resolve({value:w,context:t.context,parent:l});let _=h instanceof xl?h.spec:void 0,v=_==null?void 0:_.strict;if(_!=null&&_.strip){c=c||f in i;continue}g=!t.__validating||!v?h.cast(i[f],u):i[f],g!==void 0&&(l[f]=g)}else p&&!o&&(l[f]=i[f]);(p!==f in l||l[f]!==i[f])&&(c=!0)}return c?l:i}_validate(e,t={},r,i){let{from:s=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,super._validate(e,t,r,(l,u)=>{if(!a||!KB(u)){i(l,u);return}o=o||u;let c=[];for(let f of this._nodes){let h=this.fields[f];!h||Sh.isRef(h)||c.push(h.asNestedTest({options:t,key:f,parent:u,parentPath:t.path,originalParent:o}))}this.runTests({tests:c,value:u,originalValue:o,options:t},r,f=>{i(f.sort(this._sortErrors).concat(l),u)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),r=t.fields;for(let[i,s]of Object.entries(this.fields)){const o=r[i];r[i]=o===void 0?s:o}return t.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(r=>{var i;const s=this.fields[r];let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),t[r]=s&&"getDefault"in s?s.getDefault(o):void 0}),t}setFields(e,t){let r=this.clone();return r.fields=e,r._nodes=Jde(e,t),r._sortErrors=_H(Object.keys(e)),t&&(r._excludedEdges=t),r}shape(e,t=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),i=[...r._excludedEdges,...t]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[t,r]of Object.entries(this.fields))e[t]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Yw(this)}pick(e){const t={};for(const r of e)this.fields[r]&&(t[r]=this.fields[r]);return this.setFields(t,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const t=[];for(const r of Object.keys(this.fields))e.includes(r)||t.push(r);return this.pick(t)}from(e,t,r){let i=rp.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return Xde(s,e)&&(o=Object.assign({},s),r||delete o[e],o[t]=i(s)),o})}json(){return this.transform(xH)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Jw.exact,test(t){if(t==null)return!0;const r=JB(this.schema,t);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=Jw.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:t,test(i){if(i==null)return!0;const s=JB(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,t=Jw.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const r={};for(const i of Object.keys(t))r[e(i)]=t[i];return r})}camelCase(){return this.transformKeys(qT.camelCase)}snakeCase(){return this.transformKeys(qT.snakeCase)}constantCase(){return this.transformKeys(e=>qT.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[s,o]of Object.entries(t.fields)){var i;let a=e;(i=a)!=null&&i.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[s]})),r.fields[s]=o.describe(a)}return r}}zp.prototype=wH.prototype;function Vk(n){return new AH(n)}class AH extends xl{constructor(e){super({type:"array",spec:{types:e},check(t){return Array.isArray(t)}}),this.innerType=void 0,this.innerType=e}_cast(e,t){const r=super._cast(e,t);if(!this._typeCheck(r)||!this.innerType)return r;let i=!1;const s=r.map((o,a)=>{const l=this.innerType.cast(o,Object.assign({},t,{path:`${t.path||""}[${a}]`}));return l!==o&&(i=!0),l});return i?s:r}_validate(e,t={},r,i){var s;let o=this.innerType,a=(s=t.recursive)!=null?s:this.spec.recursive;t.originalValue!=null&&t.originalValue,super._validate(e,t,r,(l,u)=>{var c;if(!a||!o||!this._typeCheck(u)){i(l,u);return}let f=new Array(u.length);for(let p=0;p<u.length;p++){var h;f[p]=o.asNestedTest({options:t,index:p,parent:u,parentPath:t.path,originalParent:(h=t.originalValue)!=null?h:e})}this.runTests({value:u,tests:f,originalValue:(c=t.originalValue)!=null?c:e,options:t},r,p=>i(p.concat(l),u))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(xH)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!Ib(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+Ac(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e,t=Xw.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,t){return t=t||Xw.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,t){return t=t||Xw.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:t==null?[]:[].concat(t))}compact(e){let t=e?(r,i,s)=>!e(r,i,s):r=>!!r;return this.transform(r=>r!=null?r.filter(t):r)}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);if(t.innerType){var i;let s=e;(i=s)!=null&&i.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[0]})),r.innerType=t.innerType.describe(s)}return r}}Vk.prototype=AH.prototype;const er=({name:n,type:e,label:t,value:r,onChange:i,onBlur:s,error:o,touched:a,focusedField:l,setFocusedField:u})=>{const c=l===n||r&&r.length>0;return N.jsxs("div",{className:"relative mb-6",children:[N.jsx(on.label,{htmlFor:n,className:`absolute left-3 transition-all duration-300 ${c?"top-0 text-sm text-blue-500":"top-1/4 transform -translate-y-1/4 text-gray-500"}`,children:t}),N.jsx(on.input,{type:e,id:n,name:n,className:`w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${a&&o?"border-red-500":"border-gray-300"}`,value:r,onChange:i,onBlur:s,onFocus:()=>u(n)}),a&&o&&N.jsx("p",{className:"text-red-500 text-xs mt-2",children:o})]})};function EH(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=EH(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function Hp(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=EH(n))&&(r&&(r+=" "),r+=e);return r}let Qde={data:""},Zde=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Qde,epe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tpe=/\/\*[^]*?\*\/|  +/g,XB=/\n+/g,zd=(n,e)=>{let t="",r="",i="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":r+=s[1]=="f"?zd(o,s):s+"{"+zd(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=zd(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=zd.p?zd.p(s,o):s+":"+o+";")}return t+(e&&i?e+"{"+i+"}":i)+r},Yu={},bH=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+bH(n[t]);return e}return n},npe=(n,e,t,r,i)=>{let s=bH(n),o=Yu[s]||(Yu[s]=(l=>{let u=0,c=11;for(;u<l.length;)c=101*c+l.charCodeAt(u++)>>>0;return"go"+c})(s));if(!Yu[o]){let l=s!==n?n:(u=>{let c,f,h=[{}];for(;c=epe.exec(u.replace(tpe,""));)c[4]?h.shift():c[3]?(f=c[3].replace(XB," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][c[1]]=c[2].replace(XB," ").trim();return h[0]})(n);Yu[o]=zd(i?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&Yu.g?Yu.g:null;return t&&(Yu.g=Yu[o]),((l,u,c,f)=>{f?u.data=u.data.replace(f,l):u.data.indexOf(l)===-1&&(u.data=c?l+u.data:u.data+l)})(Yu[o],e,r,a),o},rpe=(n,e,t)=>n.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":zd(a,""):a===!1?"":a}return r+i+(o??"")},"");function zk(n){let e=this||{},t=n.call?n(e.p):n;return npe(t.unshift?t.raw?rpe(t,[].slice.call(arguments,1),e.p):t.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):t,Zde(e.target),e.g,e.o,e.k)}zk.bind({g:1});zk.bind({k:1});function ipe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function SH(n,e,t){return e&&ipe(n.prototype,e),n}function dr(){return dr=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dr.apply(this,arguments)}function TH(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function X0(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function YB(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}var QB=function(){return""},CH=Jt.createContext({enqueueSnackbar:QB,closeSnackbar:QB}),Bd={downXs:"@media (max-width:599.95px)",upSm:"@media (min-width:600px)"},ZB=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Hk=function(e){return""+ZB(e.vertical)+ZB(e.horizontal)},S1=function(e){return!!e||e===0},T1="unmounted",Dm="exited",Lm="entering",Iv="entered",eF="exiting",Gk=function(n){TH(e,n);function e(r){var i;i=n.call(this,r)||this;var s=r.appear,o;return i.appearStatus=null,r.in?s?(o=Dm,i.appearStatus=Lm):o=Iv:r.unmountOnExit||r.mountOnEnter?o=T1:o=Dm,i.state={status:o},i.nextCallback=null,i}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===T1?{status:Dm}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Lm&&o!==Iv&&(s=Lm):(o===Lm||o===Iv)&&(s=eF)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s=i,o=i;return i!=null&&typeof i!="number"&&typeof i!="string"&&(o=i.exit,s=i.enter),{exit:o,enter:s}},t.updateStatus=function(i,s){i===void 0&&(i=!1),s!==null?(this.cancelNextCallback(),s===Lm?this.performEnter(i):this.performExit()):this.props.unmountOnExit&&this.state.status===Dm&&this.setState({status:T1})},t.performEnter=function(i){var s=this,o=this.props.enter,a=i,l=this.getTimeouts();if(!i&&!o){this.safeSetState({status:Iv},function(){s.props.onEntered&&s.props.onEntered(s.node,a)});return}this.props.onEnter&&this.props.onEnter(this.node,a),this.safeSetState({status:Lm},function(){s.props.onEntering&&s.props.onEntering(s.node,a),s.onTransitionEnd(l.enter,function(){s.safeSetState({status:Iv},function(){s.props.onEntered&&s.props.onEntered(s.node,a)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts();if(!s){this.safeSetState({status:Dm},function(){i.props.onExited&&i.props.onExited(i.node)});return}this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:eF},function(){i.props.onExiting&&i.props.onExiting(i.node),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Dm},function(){i.props.onExited&&i.props.onExited(i.node)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(){o&&(o=!1,s.nextCallback=null,i())},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=i==null&&!this.props.addEndListener;if(!this.node||o){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===T1)return null;var s=this.props,o=s.children,a=X0(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o(i,a)},SH(e,[{key:"node",get:function(){var i,s=(i=this.props.nodeRef)===null||i===void 0?void 0:i.current;if(!s)throw new Error("notistack - Custom snackbar is not refForwarding");return s}}]),e}(Jt.Component);function Nm(){}Gk.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Nm,onEntering:Nm,onEntered:Nm,onExit:Nm,onExiting:Nm,onExited:Nm};function tF(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function oP(n,e){return W.useMemo(function(){return n==null&&e==null?null:function(t){tF(n,t),tF(e,t)}},[n,e])}function FA(n){var e=n.timeout,t=n.style,r=t===void 0?{}:t,i=n.mode;return{duration:typeof e=="object"?e[i]||0:e,easing:r.transitionTimingFunction,delay:r.transitionDelay}}var aP={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},MH=function(e){e.scrollTop=e.scrollTop},nF=function(e){return Math.round(e)+"ms"};function _g(n,e){n===void 0&&(n=["all"]);var t=e||{},r=t.duration,i=r===void 0?300:r,s=t.easing,o=s===void 0?aP.easeInOut:s,a=t.delay,l=a===void 0?0:a,u=Array.isArray(n)?n:[n];return u.map(function(c){var f=typeof i=="string"?i:nF(i),h=typeof l=="string"?l:nF(l);return c+" "+f+" "+o+" "+h}).join(",")}function spe(n){return n&&n.ownerDocument||document}function RH(n){var e=spe(n);return e.defaultView||window}function ope(n,e){e===void 0&&(e=166);var t;function r(){for(var i=this,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=function(){n.apply(i,o)};clearTimeout(t),t=setTimeout(l,e)}return r.clear=function(){clearTimeout(t)},r}function ape(n,e){var t=e.getBoundingClientRect(),r=RH(e),i;if(e.fakeTransform)i=e.fakeTransform;else{var s=r.getComputedStyle(e);i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var o=0,a=0;if(i&&i!=="none"&&typeof i=="string"){var l=i.split("(")[1].split(")")[0].split(",");o=parseInt(l[4],10),a=parseInt(l[5],10)}switch(n){case"left":return"translateX("+(r.innerWidth+o-t.left)+"px)";case"right":return"translateX(-"+(t.left+t.width-o)+"px)";case"up":return"translateY("+(r.innerHeight+a-t.top)+"px)";default:return"translateY(-"+(t.top+t.height-a)+"px)"}}function C1(n,e){if(e){var t=ape(n,e);t&&(e.style.webkitTransform=t,e.style.transform=t)}}var PH=W.forwardRef(function(n,e){var t=n.children,r=n.direction,i=r===void 0?"down":r,s=n.in,o=n.style,a=n.timeout,l=a===void 0?0:a,u=n.onEnter,c=n.onEntered,f=n.onExit,h=n.onExited,p=X0(n,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),g=W.useRef(null),w=oP(t.ref,g),_=oP(w,e),v=function(R,k){C1(i,R),MH(R),u&&u(R,k)},A=function(R){var k=(o==null?void 0:o.transitionTimingFunction)||aP.easeOut,O=FA({timeout:l,mode:"enter",style:dr({},o,{transitionTimingFunction:k})});R.style.webkitTransition=_g("-webkit-transform",O),R.style.transition=_g("transform",O),R.style.webkitTransform="none",R.style.transform="none"},S=function(R){var k=(o==null?void 0:o.transitionTimingFunction)||aP.sharp,O=FA({timeout:l,mode:"exit",style:dr({},o,{transitionTimingFunction:k})});R.style.webkitTransition=_g("-webkit-transform",O),R.style.transition=_g("transform",O),C1(i,R),f&&f(R)},b=function(R){R.style.webkitTransition="",R.style.transition="",h&&h(R)},C=W.useCallback(function(){g.current&&C1(i,g.current)},[i]);return W.useEffect(function(){if(!(s||i==="down"||i==="right")){var L=ope(function(){g.current&&C1(i,g.current)}),R=RH(g.current);return R.addEventListener("resize",L),function(){L.clear(),R.removeEventListener("resize",L)}}},[i,s]),W.useEffect(function(){s||C()},[s,C]),W.createElement(Gk,Object.assign({appear:!0,nodeRef:g,onEnter:v,onEntered:c,onEntering:A,onExit:S,onExited:b,in:s,timeout:l},p),function(L,R){return W.cloneElement(t,dr({ref:_,style:dr({visibility:L==="exited"&&!s?"hidden":void 0},o,{},t.props.style)},R))})});PH.displayName="Slide";var kb=function(e){return Jt.createElement("svg",Object.assign({viewBox:"0 0 24 24",focusable:"false",style:{fontSize:20,marginInlineEnd:8,userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0}},e))},lpe=function(){return Jt.createElement(kb,null,Jt.createElement("path",{d:`M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41
        10.59L10 14.17L17.59 6.58L19 8L10 17Z`}))},upe=function(){return Jt.createElement(kb,null,Jt.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},cpe=function(){return Jt.createElement(kb,null,Jt.createElement("path",{d:`M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,
        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,
        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z`}))},fpe=function(){return Jt.createElement(kb,null,Jt.createElement("path",{d:`M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,
        0 22,12A10,10 0 0,0 12,2Z`}))},hpe={default:void 0,success:Jt.createElement(lpe,null),warning:Jt.createElement(upe,null),error:Jt.createElement(cpe,null),info:Jt.createElement(fpe,null)},ip={maxSnack:3,persist:!1,hideIconVariant:!1,disableWindowBlurListener:!1,variant:"default",autoHideDuration:5e3,iconVariant:hpe,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:PH,transitionDuration:{enter:225,exit:195}},dpe=function(e,t){var r=function(s){return typeof s=="number"||s===null};return r(e)?e:r(t)?t:ip.autoHideDuration},ppe=function(e,t){var r=function(s,o){return o.some(function(a){return typeof s===a})};return r(e,["string","number"])?e:r(e,["object"])?dr({},ip.transitionDuration,{},r(t,["object"])&&t,{},e):r(t,["string","number"])?t:r(t,["object"])?dr({},ip.transitionDuration,{},t):ip.transitionDuration},mpe=function(e,t){return function(r,i){return i===void 0&&(i=!1),i?dr({},ip[r],{},t[r],{},e[r]):r==="autoHideDuration"?dpe(e.autoHideDuration,t.autoHideDuration):r==="transitionDuration"?ppe(e.transitionDuration,t.transitionDuration):e[r]||t[r]||ip[r]}};function Y0(n){return Object.entries(n).reduce(function(e,t){var r,i=t[0],s=t[1];return dr({},e,(r={},r[i]=zk(s),r))},{})}var Kg={SnackbarContainer:"notistack-SnackbarContainer",Snackbar:"notistack-Snackbar",CollapseWrapper:"notistack-CollapseWrapper",MuiContent:"notistack-MuiContent",MuiContentVariant:function(e){return"notistack-MuiContent-"+e}},rF=Y0({root:{height:0},entered:{height:"auto"}}),WT="0px",$T=175,IH=W.forwardRef(function(n,e){var t=n.children,r=n.in,i=n.onExited,s=W.useRef(null),o=W.useRef(null),a=oP(e,o),l=function(){return s.current?s.current.clientHeight:0},u=function(w){w.style.height=WT},c=function(w){var _=l(),v=FA({timeout:$T,mode:"enter"}),A=v.duration,S=v.easing;w.style.transitionDuration=typeof A=="string"?A:A+"ms",w.style.height=_+"px",w.style.transitionTimingFunction=S||""},f=function(w){w.style.height="auto"},h=function(w){w.style.height=l()+"px"},p=function(w){MH(w);var _=FA({timeout:$T,mode:"exit"}),v=_.duration,A=_.easing;w.style.transitionDuration=typeof v=="string"?v:v+"ms",w.style.height=WT,w.style.transitionTimingFunction=A||""};return W.createElement(Gk,{in:r,unmountOnExit:!0,onEnter:u,onEntered:f,onEntering:c,onExit:h,onExited:i,onExiting:p,nodeRef:o,timeout:$T},function(g,w){return W.createElement("div",Object.assign({ref:a,className:Hp(rF.root,g==="entered"&&rF.entered),style:dr({pointerEvents:"all",overflow:"hidden",minHeight:WT,transition:_g("height")},g==="entered"&&{overflow:"visible"},{},g==="exited"&&!r&&{visibility:"hidden"})},w),W.createElement("div",{ref:s,className:Kg.CollapseWrapper,style:{display:"flex",width:"100%"}},t))})});IH.displayName="Collapse";var iF={right:"left",left:"right",bottom:"up",top:"down"},gpe=function(e){return e.horizontal!=="center"?iF[e.horizontal]:iF[e.vertical]},ype=function(e){return"anchorOrigin"+Hk(e)},vpe=function(e){e===void 0&&(e={});var t={containerRoot:!0,containerAnchorOriginTopCenter:!0,containerAnchorOriginBottomCenter:!0,containerAnchorOriginTopRight:!0,containerAnchorOriginBottomRight:!0,containerAnchorOriginTopLeft:!0,containerAnchorOriginBottomLeft:!0};return Object.keys(e).filter(function(r){return!t[r]}).reduce(function(r,i){var s;return dr({},r,(s={},s[i]=e[i],s))},{})},_pe=function(){};function O_(n,e){return n.reduce(function(t,r){return r==null?t:function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];var l=[].concat(o);e&&l.indexOf(e)===-1&&l.push(e),t.apply(this,l),r.apply(this,l)}},_pe)}var xpe=typeof window<"u"?W.useLayoutEffect:W.useEffect;function sF(n){var e=W.useRef(n);return xpe(function(){e.current=n}),W.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var kH=W.forwardRef(function(n,e){var t=n.children,r=n.className,i=n.autoHideDuration,s=n.disableWindowBlurListener,o=s===void 0?!1:s,a=n.onClose,l=n.id,u=n.open,c=n.SnackbarProps,f=c===void 0?{}:c,h=W.useRef(),p=sF(function(){a&&a.apply(void 0,arguments)}),g=sF(function(S){!a||S==null||(h.current&&clearTimeout(h.current),h.current=setTimeout(function(){p(null,"timeout",l)},S))});W.useEffect(function(){return u&&g(i),function(){h.current&&clearTimeout(h.current)}},[u,i,g]);var w=function(){h.current&&clearTimeout(h.current)},_=W.useCallback(function(){i!=null&&g(i*.5)},[i,g]),v=function(b){f.onMouseEnter&&f.onMouseEnter(b),w()},A=function(b){f.onMouseLeave&&f.onMouseLeave(b),_()};return W.useEffect(function(){if(!o&&u)return window.addEventListener("focus",_),window.addEventListener("blur",w),function(){window.removeEventListener("focus",_),window.removeEventListener("blur",w)}},[o,_,u]),W.createElement("div",Object.assign({ref:e},f,{className:Hp(Kg.Snackbar,r),onMouseEnter:v,onMouseLeave:A}),t)});kH.displayName="Snackbar";var KT,wpe=Y0({root:(KT={display:"flex",flexWrap:"wrap",flexGrow:1},KT[Bd.upSm]={flexGrow:"initial",minWidth:"288px"},KT)}),OH=W.forwardRef(function(n,e){var t=n.className,r=X0(n,["className"]);return Jt.createElement("div",Object.assign({ref:e,className:Hp(wpe.root,t)},r))});OH.displayName="SnackbarContent";var kv=Y0({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:8*2.5+"px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),oF="notistack-snackbar",DH=W.forwardRef(function(n,e){var t=n.id,r=n.message,i=n.action,s=n.iconVariant,o=n.variant,a=n.hideIconVariant,l=n.style,u=n.className,c=s[o],f=i;return typeof f=="function"&&(f=f(t)),Jt.createElement(OH,{ref:e,role:"alert","aria-describedby":oF,style:l,className:Hp(Kg.MuiContent,Kg.MuiContentVariant(o),kv.root,kv[o],u,!a&&c&&kv.lessPadding)},Jt.createElement("div",{id:oF,className:kv.message},a?null:c,r),f&&Jt.createElement("div",{className:kv.action},f))});DH.displayName="MaterialDesignContent";var Ape=W.memo(DH),Epe=Y0({wrappedRoot:{width:"100%",position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0,minWidth:"288px"}}),bpe=function(e){var t=W.useRef(),r=W.useState(!0),i=r[0],s=r[1],o=O_([e.snack.onClose,e.onClose]),a=function(){e.snack.requestClose&&o(null,"instructed",e.snack.id)},l=W.useCallback(function(){t.current=setTimeout(function(){s(function(O){return!O})},125)},[]);W.useEffect(function(){return function(){t.current&&clearTimeout(t.current)}},[]);var u=e.snack,c=e.classes,f=e.Component,h=f===void 0?Ape:f,p=W.useMemo(function(){return vpe(c)},[c]),g=u.open,w=u.SnackbarProps,_=u.TransitionComponent,v=u.TransitionProps,A=u.transitionDuration,S=u.disableWindowBlurListener,b=u.content,C=X0(u,["open","SnackbarProps","TransitionComponent","TransitionProps","transitionDuration","disableWindowBlurListener","content","entered","requestClose","onEnter","onEntered","onExit","onExited"]),L=dr({direction:gpe(C.anchorOrigin),timeout:A},v),R=b;typeof R=="function"&&(R=R(C.id,C.message));var k=["onEnter","onEntered","onExit","onExited"].reduce(function(O,M){var D;return dr({},O,(D={},D[M]=O_([e.snack[M],e[M]],C.id),D))},{});return Jt.createElement(IH,{in:i,onExited:k.onExited},Jt.createElement(kH,{open:g,id:C.id,disableWindowBlurListener:S,autoHideDuration:C.autoHideDuration,className:Hp(Epe.wrappedRoot,p.root,p[ype(C.anchorOrigin)]),SnackbarProps:w,onClose:o},Jt.createElement(_,Object.assign({},L,{appear:!0,in:g,onExit:k.onExit,onExited:l,onEnter:k.onEnter,onEntered:O_([k.onEntered,a],C.id)}),R||Jt.createElement(h,Object.assign({},C)))))},Ov,JT,M1,R1,XT,Qu={view:{default:20,dense:4},snackbar:{default:6,dense:2}},aF="."+Kg.CollapseWrapper,YT=16,P1=Y0({root:(Ov={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:_g(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"},Ov[aF]={padding:Qu.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},Ov.maxWidth="calc(100% - "+Qu.view.default*2+"px)",Ov[Bd.downXs]={width:"100%",maxWidth:"calc(100% - "+YT*2+"px)"},Ov),rootDense:(JT={},JT[aF]={padding:Qu.snackbar.dense+"px 0px"},JT),top:{top:Qu.view.default-Qu.snackbar.default+"px",flexDirection:"column"},bottom:{bottom:Qu.view.default-Qu.snackbar.default+"px",flexDirection:"column-reverse"},left:(M1={left:Qu.view.default+"px"},M1[Bd.upSm]={alignItems:"flex-start"},M1[Bd.downXs]={left:YT+"px"},M1),right:(R1={right:Qu.view.default+"px"},R1[Bd.upSm]={alignItems:"flex-end"},R1[Bd.downXs]={right:YT+"px"},R1),center:(XT={left:"50%",transform:"translateX(-50%)"},XT[Bd.upSm]={alignItems:"center"},XT)}),Spe=function(e){var t=e.classes,r=t===void 0?{}:t,i=e.anchorOrigin,s=e.dense,o=e.children,a=Hp(Kg.SnackbarContainer,P1[i.vertical],P1[i.horizontal],P1.root,r.containerRoot,r["containerAnchorOrigin"+Hk(i)],s&&P1.rootDense);return Jt.createElement("div",{className:a},o)},Tpe=W.memo(Spe),lF=function(e){var t=typeof e=="string"||W.isValidElement(e);return!t},th,Cpe=function(n){TH(e,n);function e(r){var i;return i=n.call(this,r)||this,i.enqueueSnackbar=function(s,o){if(o===void 0&&(o={}),s==null)throw new Error("enqueueSnackbar called with invalid argument");var a=lF(s)?s:o,l=lF(s)?s.message:s,u=a.key,c=a.preventDuplicate,f=X0(a,["key","preventDuplicate"]),h=S1(u),p=h?u:new Date().getTime()+Math.random(),g=mpe(f,i.props),w=dr({id:p},f,{message:l,open:!0,entered:!1,requestClose:!1,persist:g("persist"),action:g("action"),content:g("content"),variant:g("variant"),anchorOrigin:g("anchorOrigin"),disableWindowBlurListener:g("disableWindowBlurListener"),autoHideDuration:g("autoHideDuration"),hideIconVariant:g("hideIconVariant"),TransitionComponent:g("TransitionComponent"),transitionDuration:g("transitionDuration"),TransitionProps:g("TransitionProps",!0),iconVariant:g("iconVariant",!0),style:g("style",!0),SnackbarProps:g("SnackbarProps",!0),className:Hp(i.props.className,f.className)});return w.persist&&(w.autoHideDuration=void 0),i.setState(function(_){if(c===void 0&&i.props.preventDuplicate||c){var v=function(C){return h?C.id===p:C.message===l},A=_.queue.findIndex(v)>-1,S=_.snacks.findIndex(v)>-1;if(A||S)return _}return i.handleDisplaySnack(dr({},_,{queue:[].concat(_.queue,[w])}))}),p},i.handleDisplaySnack=function(s){var o=s.snacks;return o.length>=i.maxSnack?i.handleDismissOldest(s):i.processQueue(s)},i.processQueue=function(s){var o=s.queue,a=s.snacks;return o.length>0?dr({},s,{snacks:[].concat(a,[o[0]]),queue:o.slice(1,o.length)}):s},i.handleDismissOldest=function(s){if(s.snacks.some(function(c){return!c.open||c.requestClose}))return s;var o=!1,a=!1,l=s.snacks.reduce(function(c,f){return c+(f.open&&f.persist?1:0)},0);l===i.maxSnack&&(a=!0);var u=s.snacks.map(function(c){return!o&&(!c.persist||a)?(o=!0,c.entered?(c.onClose&&c.onClose(null,"maxsnack",c.id),i.props.onClose&&i.props.onClose(null,"maxsnack",c.id),dr({},c,{open:!1})):dr({},c,{requestClose:!0})):dr({},c)});return dr({},s,{snacks:u})},i.handleEnteredSnack=function(s,o,a){if(!S1(a))throw new Error("handleEnteredSnack Cannot be called with undefined key");i.setState(function(l){var u=l.snacks;return{snacks:u.map(function(c){return c.id===a?dr({},c,{entered:!0}):dr({},c)})}})},i.handleCloseSnack=function(s,o,a){i.props.onClose&&i.props.onClose(s,o,a);var l=a===void 0;i.setState(function(u){var c=u.snacks,f=u.queue;return{snacks:c.map(function(h){return!l&&h.id!==a?dr({},h):h.entered?dr({},h,{open:!1}):dr({},h,{requestClose:!0})}),queue:f.filter(function(h){return h.id!==a})}})},i.closeSnackbar=function(s){var o=i.state.snacks.find(function(a){return a.id===s});S1(s)&&o&&o.onClose&&o.onClose(null,"instructed",s),i.handleCloseSnack(null,"instructed",s)},i.handleExitedSnack=function(s,o){if(!S1(o))throw new Error("handleExitedSnack Cannot be called with undefined key");i.setState(function(a){var l=i.processQueue(dr({},a,{snacks:a.snacks.filter(function(u){return u.id!==o})}));return l.queue.length===0?l:i.handleDismissOldest(l)})},th=i.enqueueSnackbar,i.closeSnackbar,i.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:i.enqueueSnackbar.bind(YB(i)),closeSnackbar:i.closeSnackbar.bind(YB(i))}},i}var t=e.prototype;return t.render=function(){var i=this,s=this.state.contextValue,o=this.props,a=o.domRoot,l=o.children,u=o.dense,c=u===void 0?!1:u,f=o.Components,h=f===void 0?{}:f,p=o.classes,g=this.state.snacks.reduce(function(_,v){var A,S=Hk(v.anchorOrigin),b=_[S]||[];return dr({},_,(A={},A[S]=[].concat(b,[v]),A))},{}),w=Object.keys(g).map(function(_){var v=g[_],A=v[0];return Jt.createElement(Tpe,{key:_,dense:c,anchorOrigin:A.anchorOrigin,classes:p},v.map(function(S){return Jt.createElement(bpe,{key:S.id,snack:S,classes:p,Component:h[S.variant],onClose:i.handleCloseSnack,onEnter:i.props.onEnter,onExit:i.props.onExit,onExited:O_([i.handleExitedSnack,i.props.onExited],S.id),onEntered:O_([i.handleEnteredSnack,i.props.onEntered],S.id)})}))});return Jt.createElement(CH.Provider,{value:s},l,a?m5.createPortal(w,a):w)},SH(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||ip.maxSnack}}]),e}(W.Component),hu=function(){return W.useContext(CH)};const LH=W.createContext(void 0),Ob=()=>{const n=W.useContext(LH);if(!n)throw new Error("useUser must be used within a UserProvider");return n},NH=({children:n})=>{const[e,t]=W.useState({name:"",email:"",roleId:"",role:""}),{logout:r}=oz();W.useEffect(()=>{const o=localStorage.getItem("user");o&&t(JSON.parse(o))},[]);const i=o=>{t(o),localStorage.setItem("user",JSON.stringify(o))},s=()=>{var a;const o=D0();console.log((a=o.currentUser)==null?void 0:a.uid),localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("refreshToken"),i({name:"",email:"",roleId:"",role:""}),localStorage.removeItem("user"),console.log("Logout called inside Context"),o.currentUser&&(console.log("Logout called inside Context if block"),r(o.currentUser.uid))};return N.jsx(LH.Provider,{value:{user:e,addData:i,handleLogout:s},children:n})},Mpe=({role:n,routeName:e})=>{const t=_h();return W.useEffect(()=>{const r=localStorage.getItem("user"),i=r?JSON.parse(r).role:null;if(!i)t("/login");else if(i==="admin"){const s=e?`/admin/${e}`:"/admin/dashboard";t(s)}else t(i==="patient"?"/":i==="doctor"?`/doctor/${e}`:i==="employee"?`/employee/${e}`:"/access-denied")},[n,e,t]),null},Rpe=()=>{const{login:n,error:e,ActiveUser:t}=oz(),[r,i]=W.useState(null),[s,o]=W.useState(!1),[a,l]=W.useState(!1),u=_h(),{addData:c,user:f}=Ob(),h=zp({email:Ri().email("Invalid email format").required("Email is required").matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Invalid email format"),password:Ri().min(6,"Password must be at least 6 characters").required("Password is required")}),p=wy({initialValues:{email:"",password:""},validationSchema:h,onSubmit:async w=>{var A,S,b;const{email:_,password:v}=w;try{const C=await n(_,v);if(console.log("User details",C),ac.currentUser)if(!ac.currentUser.emailVerified)o(!0),th("Email not verified",{variant:"error"}),p.setFieldValue("password","");else{const L=await ac.currentUser.getIdToken();localStorage.setItem("authToken",L);const R=new Date().getTime()+30*60*1e3;localStorage.setItem("tokenExpiry",R.toString());const k=await ac.currentUser.getIdTokenResult();localStorage.setItem("refreshToken",k.token);const M=(await ac.currentUser.getIdTokenResult()).claims.admin||!1,{role:D,roleId:U}=await wie(ac.currentUser.uid);if((!D||!U)&&!M)throw new Error("Unable to fetch user role or roleId");const F=M?"admin":D,Z={email:_,role:F||"",roleId:M?"1":U||"",name:((A=C==null?void 0:C.user)==null?void 0:A.displayName)||""};c(Z),th("Login successful!",{variant:"success"}),p.resetForm(),t((S=C.user)==null?void 0:S.uid,((b=C.user)==null?void 0:b.displayName)||"",_,F||"",L)}}catch(C){p.setFieldValue("password",""),console.log("Formik hit",p.values),th(`Error: ${C}`,{variant:"error"})}}}),g=()=>{u("/")};return N.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:[N.jsxs(on.div,{className:"bg-white p-6 rounded-lg shadow-lg w-96",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},children:[N.jsx("h2",{className:"text-xl font-bold mb-4 text-center cursor-pointer",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:g,children:a?"Back to Home":"Login"}),e&&N.jsx("p",{className:"text-red-500 mb-4 text-center",children:e}),s&&N.jsx("p",{className:"text-red-500 mb-4 text-center",children:"Your email is not verified. Please verify your email to proceed."}),N.jsxs("form",{onSubmit:p.handleSubmit,children:[N.jsx(er,{name:"email",type:"email",label:"Email",value:p.values.email,onChange:p.handleChange,onBlur:p.handleBlur,error:p.errors.email,touched:p.touched.email??!1,focusedField:r,setFocusedField:i}),N.jsx(er,{name:"password",type:"password",label:"Password",value:p.values.password,onChange:p.handleChange,onBlur:p.handleBlur,error:p.errors.password,touched:p.touched.password??!1,focusedField:r,setFocusedField:i}),N.jsx(on.button,{className:`w-full text-white p-3 rounded-lg transition-all duration-300 ${p.isSubmitting||!p.isValid?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,type:"submit",disabled:p.isSubmitting||!p.isValid,whileHover:{scale:1.05},children:"Login"})]}),N.jsx(on.div,{className:"mt-4 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}})]}),f&&N.jsx(Mpe,{role:f.role||"",routeName:"dashboard"})]})},BH=()=>{const[n,e]=W.useState(0);return W.useEffect(()=>{let t;const r=()=>{e(i=>i>=100?(cancelAnimationFrame(t),100):i+1),t=requestAnimationFrame(r)};return t=requestAnimationFrame(r),()=>cancelAnimationFrame(t)},[]),N.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[N.jsx("div",{className:"relative mb-4",children:N.jsx("div",{className:"w-40 h-40 border-8 border-t-8 border-blue-500 rounded-full animate-smooth-spin"})}),N.jsx("div",{className:"w-64 h-2 bg-gray-200 rounded-full",children:N.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${n}%`}})})]})};var FH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},uF=Jt.createContext&&Jt.createContext(FH),Ppe=["attr","size","title"];function Ipe(n,e){if(n==null)return{};var t=kpe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function kpe(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function UA(){return UA=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},UA.apply(this,arguments)}function cF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function jA(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cF(Object(t),!0).forEach(function(r){Ope(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Ope(n,e,t){return e=Dpe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Dpe(n){var e=Lpe(n,"string");return typeof e=="symbol"?e:e+""}function Lpe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function UH(n){return n&&n.map((e,t)=>Jt.createElement(e.tag,jA({key:t},e.attr),UH(e.child)))}function Ii(n){return e=>Jt.createElement(Npe,UA({attr:jA({},n.attr)},e),UH(n.child))}function Npe(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=Ipe(n,Ppe),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Jt.createElement("svg",UA({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:jA(jA({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Jt.createElement("title",null,s),n.children)};return uF!==void 0?Jt.createElement(uF.Consumer,null,t=>e(t)):e(FH)}function jH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function VH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function zH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function HH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function Bpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function Fpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(n)}function Upe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(n)}function jpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"},child:[]}]})(n)}function Vpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(n)}function GH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function zpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function qH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(n)}function Hpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function WH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Gpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function $H(n){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function qpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function Wpe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(n)}function $pe(n){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(n)}function KH(n){return Ii({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const Kpe=({tabs:n,token:e})=>{const[t,r]=W.useState(!1),[i,s]=W.useState(!1),[o,a]=W.useState(null),l=W.useRef(null);W.useEffect(()=>{const h=()=>r(window.innerWidth<=768);return h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[]),W.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&s(!1)};return i?document.addEventListener("mousedown",h):document.removeEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[i]);const u=()=>{s(!i)},c=h=>{t&&a(o===h?null:h)},f=t&&e===null?[...n,{name:"Login",hasDropdown:!1,linkTo:"/login"}]:n;return N.jsxs("div",{className:"pt-1 pb-5 relative",children:[N.jsxs("div",{className:"flex justify-between items-center w-full",children:[N.jsx("div",{className:"flex-1"}),t&&N.jsx("button",{onClick:u,className:"p-2 text-gray-600 lg:hidden","aria-label":"Toggle Menu",children:i?N.jsx(KH,{size:24}):N.jsx(Wpe,{size:24})})]}),!t&&N.jsx(Xpe,{tabs:f,isMobile:t,token:e}),t&&i&&N.jsx("div",{className:"absolute inset-0 z-50 p-4",ref:l,children:N.jsx(Jpe,{tabs:f,token:e,openDropdown:o,handleDropdownToggle:c,setMenuOpen:s})})]})},Jpe=({tabs:n,token:e,openDropdown:t,handleDropdownToggle:r,setMenuOpen:i})=>N.jsxs("ul",{className:"flex flex-col items-start mt-4 bg w-auto w-[250px] rounded-lg shadow-lg bg-white absolute right-0 top-0 z-50",children:[N.jsx("button",{onClick:()=>i(!1),className:"absolute top-0 right-0 p-2 text-gray-600","aria-label":"Close Menu",children:N.jsx(KH,{size:24})}),n.map((s,o)=>{var a;return N.jsxs("li",{className:"text-center text-black text-lg relative",children:[s.linkTo?N.jsx(Ta,{to:s.linkTo,className:"block py-2 px-4",children:s.name}):N.jsxs("span",{className:"block py-2 px-4 cursor-pointer flex",onClick:()=>r(o),children:[s.name,s.hasDropdown&&N.jsx("span",{className:"ml-2 text-sm",children:t===o?N.jsx(qpe,{}):N.jsx($H,{})})]}),s.hasDropdown&&t===o&&N.jsx(on.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"absolute right-0 mt-2 w-60 bg-white shadow-lg rounded-md z-20",children:N.jsx("ul",{children:(a=s.dropdownOptions)==null?void 0:a.map((l,u)=>N.jsx("li",{children:N.jsx(Ta,{to:l.to,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:l.label})},u))})})]},o)})]}),Xpe=({tabs:n,isMobile:e,token:t})=>{const[r,i]=W.useState(null),[s,o]=W.useState(null),a=l=>{i(val)};return N.jsx("ul",{className:`relative mx-auto flex w-full max-w-5xl justify-around rounded-full border-2 border-black bg-white p-1 ${e?"hidden":""}`,children:n.map((l,u)=>N.jsx(Ype,{tab:u+1,setHovered:o,hovered:s,hasDropdown:l.hasDropdown,handleSetSelected:a,selected:r,linkTo:l.linkTo,dropdownOptions:l.dropdownOptions??[],children:l.name},u))})},Ype=({children:n,tab:e,setHovered:t,hovered:r,hasDropdown:i,handleSetSelected:s,selected:o,linkTo:a,dropdownOptions:l})=>{const u=()=>{t(e)},c=()=>{t(null)};return N.jsxs("li",{onMouseEnter:u,onMouseLeave:c,onClick:()=>s(e),className:`relative z-10 block cursor-pointer px-3 py-1.5 text-xs uppercase md:px-5 md:py-3 md:text-base ${r===e||o===e?"text-red-500 bg-gray-200 rounded-full":"text-black"}`,children:[a?N.jsx(Ta,{to:a,className:"block",children:n}):N.jsx("span",{children:n}),i&&N.jsxs(on.div,{initial:{opacity:0,y:-10},animate:{opacity:r===e?1:0,y:r===e?0:-10},transition:{duration:.3},className:"absolute left-0 mt-2 w-60 bg-white shadow-lg rounded-md z-20",children:[N.jsx("div",{className:"bg-black text-white px-4 py-2 text-lg font-semibold",children:n}),N.jsx("ul",{children:l.map((f,h)=>N.jsx("li",{children:N.jsx(Ta,{to:f.to,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-300",children:f.label})},h))})]}),i&&N.jsx($H,{className:"ml-2 inline-block text-sm text-gray-600",size:14})]})},fF=(n,e,t,r)=>{const i=e-n,s=r-t;return o=>t+((o-n)/i*s||0)},Qpe=(n,e,t,r)=>{const i=n.getBoundingClientRect(),s=e.clientX-i.left,o=e.clientY-i.top,a=fF(0,i.width,-1,1)(s),l=fF(0,i.height,-1,1)(o);t.set(a*10),r.set(l*10)},Zpe=({path:n,name:e,isActive:t,location:r,logo:i})=>{const s=s0(0),o=s0(0),a=OA(s,u=>u*.5),l=OA(o,u=>u*.5);return N.jsx(on.li,{onPointerMove:u=>{const c=u.currentTarget;Qpe(c,u,s,o)},onPointerLeave:()=>{s.set(0),o.set(0)},style:{x:s,y:o},children:N.jsx(on.div,{className:`relative inline-block w-full max-w-5xl py-2 px-4 text-sm transition-all duration-500 ease-out ${t?"bg-slate-300":""}`,children:N.jsxs("a",{href:n,target:"_blank",className:"text-2xl relative",children:[N.jsx(on.span,{style:{x:a,y:l},className:"z-10 relative",children:i?N.jsx("img",{src:i,alt:"Logo",className:"h-6 w-6 object-contain"}):N.jsx("div",{className:"py-2 px-4 text-xl pt-2 flex justify-around rounded-full border-2 border-black bg-white",children:e})}),t&&N.jsx(on.div,{transition:{type:"spring"},layoutId:"underline",className:"absolute w-full h-full rounded-md left-0 bottom-0 bg-blue-300"})]})})})},nh=({title:n,onClose:e,children:t,fullWidth:r=!1})=>N.jsx("div",{className:"flex items-center justify-center bg-gray-500 bg-opacity-50 z-50 absolute top-21 left-0 w-full h-full ",children:N.jsxs("div",{className:`bg-white p-6 rounded-md z-100 shadow-lg ${r?"w-full":"w-96"} max-w-4xl mx-4`,children:[N.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[N.jsx("div",{className:"text-xl font-semibold",children:n}),N.jsx("button",{onClick:e,className:"text-xl font-semibold text-gray-700 hover:text-gray-900",children:""})]}),N.jsx("div",{className:"mt-4 max-h-[calc(100vh-160px)] overflow-y",children:N.jsx("div",{className:"space-y-6",children:t})})]})}),eme=({setDropdownVisible:n,handleOpenModal:e})=>N.jsxs("ul",{className:"w-56",children:[" ",N.jsx("li",{className:"py-1",children:N.jsx("button",{onClick:()=>{n(!1),e("update")},className:"block text-sm hover:underline w-full text-left",children:"Update Profile"})}),N.jsx("li",{className:"py-1",children:N.jsx("button",{onClick:()=>{n(!1),e("updatePassword")},className:"block text-sm hover:underline w-full text-left",children:"Update Password"})}),N.jsx("li",{className:"py-1",children:N.jsx("button",{onClick:()=>{n(!1),e("logout")},className:"block text-sm hover:underline w-full text-left",children:"Logout"})})]}),tme=({children:n,href:e,setDropdownVisible:t,handleOpenModal:r})=>{const[i,s]=W.useState(!1),o=i;return N.jsxs("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),className:"relative w-fit h-fit",children:[N.jsxs("a",{href:e,className:"relative text-white",children:[n,N.jsx("span",{style:{transform:o?"scaleX(1)":"scaleX(0)"},className:"absolute -bottom-2 -left-2 -right-2 h-1 origin-left scale-x-0 rounded-full bg-indigo-300 transition-transform duration-300 ease-out"})]}),N.jsx(Mie,{children:o&&N.jsxs(on.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:15},style:{translateX:"-50%"},transition:{duration:.3,ease:"easeOut"},className:"absolute left-1/2 top-12 bg-white text-black shadow-lg rounded-md py-2 px-4",children:[N.jsx("div",{className:"absolute -top-6 left-0 right-0 h-6 bg-transparent"}),N.jsx("div",{className:"absolute left-1/2 top-0 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rotate-45 bg-white"}),N.jsx(eme,{setDropdownVisible:t,handleOpenModal:r})]})})]})},nme=({handleCloseModal:n})=>{var c;const[e,t]=W.useState({name:""}),[r,i]=W.useState(null),[s,o]=W.useState(!1),a=D0(),l=(c=a.currentUser)==null?void 0:c.uid;W.useEffect(()=>{l&&N5(a.currentUser).then(f=>{f.claims.admin?t({name:a.currentUser.displayName||""}):console.log("User is not an admin.")}).catch(f=>{console.error("Error fetching token result:",f)})},[l]);const u=wy({enableReinitialize:!0,initialValues:{name:(e==null?void 0:e.name)||""},validationSchema:zp({name:Ri().required("Name is required")}),onSubmit:async f=>{if(l){o(!0);try{a.currentUser&&(await nV(a.currentUser,{displayName:f.name}),th("Profile updated successfully!",{variant:"success"}),n())}catch{th("Update failed. Please try again.",{variant:"error"})}finally{o(!1)}}}});return e?N.jsx("div",{className:"p-6",children:N.jsxs("form",{onSubmit:u.handleSubmit,children:[N.jsx(er,{name:"name",type:"text",label:"Name",value:u.values.name,onChange:u.handleChange,onBlur:u.handleBlur,error:u.errors.name,touched:u.touched.name||!1,focusedField:r,setFocusedField:i}),N.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md",disabled:s,children:s?"Updating...":"Update Profile"})]})}):N.jsx("div",{children:"Loading..."})},rme=({handleCloseModal:n})=>{const[e,t]=W.useState(!1),[r,i]=W.useState(null),o=D0().currentUser,a=wy({initialValues:{password:"",newPassword:"",confirmPassword:""},validationSchema:zp({password:Ri().required("Current password is required").min(6,"Password must be at least 6 characters"),newPassword:Ri().required("New password is required").min(6,"Password must be at least 6 characters"),confirmPassword:Ri().oneOf([Lde("newPassword"),void 0],"Passwords must match").required("Confirm Password is required")}),onSubmit:async l=>{if(o){t(!0);try{const u=Ip.credential(o.email||"",l.password);await xY(o,u),await SY(o,l.newPassword),th("Password updated successfully!",{variant:"success"}),n()}catch(u){th(String(u),{variant:"error"})}finally{t(!1)}}}});return N.jsx("div",{className:"p-6",children:N.jsxs("form",{onSubmit:a.handleSubmit,children:[N.jsx(er,{name:"password",type:"password",label:"Current Password",value:a.values.password,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.password,touched:a.touched.password||!1,focusedField:r,setFocusedField:i}),N.jsx(er,{name:"newPassword",type:"password",label:"New Password",value:a.values.newPassword,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.newPassword,touched:a.touched.newPassword||!1,focusedField:r,setFocusedField:i}),N.jsx(er,{name:"confirmPassword",type:"password",label:"Confirm New Password",value:a.values.confirmPassword,onChange:a.handleChange,onBlur:a.handleBlur,error:a.errors.confirmPassword,touched:a.touched.confirmPassword||!1,focusedField:r,setFocusedField:i}),N.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white p-2 rounded-md",disabled:e,children:e?"Updating...":"Update Password"})]})})},ime=({token:n,path:e,pathName:t,logo:r})=>{const i=Nc(),[s,o]=W.useState(null),[a,l]=W.useState(!1),[u,c]=W.useState(!1),{handleLogout:f}=Ob(),h=_h(),p=_=>{o(_),l(!1)},g=()=>{o(null)},w=()=>{console.log("Logout called inside NavElement"),f(),h("/login"),g()};return N.jsxs("nav",{className:"p-8",children:[N.jsx("ul",{className:"flex gap-12",children:n?N.jsx(N.Fragment,{children:N.jsx(tme,{href:"#",setDropdownVisible:l,handleOpenModal:p,children:N.jsx($pe,{size:24,className:"cursor-pointer text-gray-600"})})}):N.jsx(Zpe,{path:Array.isArray(e)?e[0]:e,name:t,isActive:i.pathname===(Array.isArray(e)?e[0]:e),location:i.pathname,logo:r})}),s==="update"&&N.jsx(nh,{title:"Update Profile",onClose:()=>{u||(g(),c(!1))},children:N.jsx(nme,{handleCloseModal:g,isCounting:u,setIsCounting:c})}),s==="updatePassword"&&N.jsx(nh,{title:"Update Password",onClose:g,children:N.jsx(rme,{handleCloseModal:g})}),s==="logout"&&N.jsx(nh,{title:"Logout",onClose:g,children:N.jsxs(N.Fragment,{children:[N.jsx("p",{children:"Are you sure you want to logout"}),N.jsxs("div",{className:"flex justify-center gap-4",children:[N.jsx("button",{onClick:w,className:"mt-4 p-2 bg-blue-500 text-white rounded-md w-20",children:"Yes"}),N.jsx("button",{onClick:g,className:"mt-4 p-2 bg-red-500 text-white rounded-md w-20",children:"No"})]})]})})]})},JH="/assets/mypic-Rbpf1Nzz.png",sme="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFHElEQVR4nO2aX2iXVRjHP6u1/UT7s2lNKiizm5qVEERBkRdlq7C0m3DpRf+wG01mF0H0PyrMK8mQxKCgILrLVIystIhZNpOicmZU0yyTqOXWptUbD31feHj3/n9/v63CLxz24z3Pec55zjnP3zM4jv8v2oH5wDPARuBL4GdgVM1+f6E+o7kZaONfghqwGHgT+BMICrY/gC3AIqB1IgSYBKwAvneLGgHeBh7UyVygHT9JrU3frO8h4B2NCccfAHq0OeOCG4F9bgEfAXcBp5bgdRpwN7DT8fsKuJ4GwnZqrZvwY2BuHfl3Absc/zWNOJ3pWrhNMAQsBU6s9yT8w/NeYNiddke9mM/QcQeyOrNoPC4G9mjOvVpDJZzuGH4ITGP80Aa8r7n36VaUQs1dpw+AyYw/JgO97pqV0pm17jqZs8uDJmBVCX/i21/SwRBT3a0wA1DYxIaKnVcnWoCXKwoRqMXpTGgAzLrldnahn/A7k4aT5d2rLH5/iiCG5U75c12x+5yfyGNiOyIOLWw7FL7cADyt000Sog84K0OQZuAT9ZtQqai5sCOPs5vpTLNvWxWWeFwOHImh3QBMEU2QIgjy+OHppcZmi5yFyMKlwA8JO3xZwphlEbpXI6ceZAjS5Cxpd9riwntusVMargUGU6xO0h22XTzoaDe5vmvcd/udhCWi2ZxE0K6weiQjAOxWfpF0349l6NazjvZH991fUfud5ihHNU/sOueLiYXiSVihHc+yQOek8Ljd0f3mvmeZYI93RXNTXGfoyCyfKIpZkUXETiBc7eh2lRTkEdGsjOvcqE5LQYuiFrFIr6TQXuXoHispyAJn8cagX52WxZXB8xE9SYoIlopmIBL6FBGkUzRWFxiDw+q02KYMztDiwoV8pm8eZ4vmkMIOSgoyTTQ/xXWGlshiprKYGcnyDkrnuuXdfwG+ER0VBGkVzUijBDGcID17Tnc4GoOZI42DP83vqghS9Wol4daI7ljMlBR+DEiIripXq6qyJ+GOyIk8UQeenWnK/kYF85uGM+X4vDAvVqyQLBCf19McohXP6gELHy5SkrYpRpnfK5B5FnKIYYhiFcCysJziKWC3QplvVRK1zPGlmDC+V4lcUWzT+HlJwVgYNFoFsAgsSHxcY49qp86PoTP9+zQizJMF52p3QeMpSURbxNzKmHlhOcJrGjeYkov4tHirE2SwYLHvnpgUYAxuE5Glrnlxp1vUAznHTHJW0tp5BTatT2MWphHWVBU3wutyMg8ZBzlOI2kDLixY3RnI8wzRI+K+HEfeFEmyriA/rtSYIzkVvllGJFDKnImay9asoJyFMCKw9ij5sVhjXshJ3yP6PUUehcJqxXBMlBrFeifIUEos5dGiIsKhnNX22cDvmqPwU8YatwNp8df0SHFtULtn1ikOZpbfkhC2wDyF9L3ivZoSqKksFDqutCK2lf23R/zDkHLrdXr8XK+i3VFlkHlOYorGBPpb+p2xw+1Gb8bJmOLPUfi+U5GpOa1fga8V0t+fUZiInkQoRH9MklYYM5wwds0uofGY7eY0Ic6tF+MOd82GVXtNyiuqoFn6FSr2jnqcRJzOhAYgUEG5Xq+vTXJ2ux3/1Y1+e+9yxx7IjC4p+V8M7YqdfHTQX+fX4szTWR4xu6MKrx9W4tMp49CiNlUloltEsy0SFVjYsWyi/gOiVRWSzUoBgoLtmAqDCydKgKSMcJ5ykQ16ezzs/qnGfn+u9HSlaBPziePgP46/AUH2PEaHIlMJAAAAAElFTkSuQmCC",XH=()=>{const[n,e]=W.useState([]),[t,r]=W.useState([]);W.useEffect(()=>{(async()=>{const u=(await Gs(Kr(en,"projects"))).docs.map(c=>({id:c.id,...c.data()})).sort((c,f)=>new Date(c.startDate)-new Date(f.startDate));e(u)})()},[]),W.useEffect(()=>{(async()=>{const u=(await Gs(Kr(en,"achievements"))).docs.map(c=>({id:c.id,...c.data()})).sort((c,f)=>new Date(c.startDate)-new Date(f.startDate));r(u)})()},[]);const i=localStorage.getItem("authToken"),s=[{name:"Home",hasDropdown:!1,linkTo:"/"},{name:"Projects",hasDropdown:!0,dropdownOptions:[{label:n.length>0?n[2].name:"Loading...",to:n.length>0?`/projects/${n[2].id}`:"/"},{label:n.length>0?n[1].name:"Loading...",to:n.length>0?`/projects/${n[1].id}`:"/"},{label:"Show All",to:"/projects"}]},{name:"Achievements",hasDropdown:!0,dropdownOptions:[{label:t.length>0?t[0].name:"Loading...",to:t.length>0?`/achievements/${t[0].id}`:"/"},{label:t.length>0?t[1].name:"Loading...",to:t.length>0?`/achievements/${t[1].id}`:"/"},{label:"Show All",to:"/achievements"}]},{name:"Publications",hasDropdown:!1,linkTo:"https://scholar.google.com/citations?user=TyG1JqoAAAAJ&hl=en"},{name:"About Me",hasDropdown:!1,linkTo:"/me"},{name:"Contact",hasDropdown:!1,linkTo:"/contact"}];return console.log(t),N.jsxs(on.div,{className:"flex items-center justify-between h-[20px] px-4 md:px-8 mt-20",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[N.jsxs("div",{className:"flex justify-center mb-10 flex-col items-center",children:[N.jsxs("div",{className:"flex items-center justify-content-center mt-0",children:[N.jsx("img",{src:JH,alt:"Sahaj Shakya",className:"w-10 h-8 md:w-2- md:h-10 rounded-full object-cover mt-6"}),N.jsxs("div",{className:"ml-4 text-white align-content-center align-item-center",children:[N.jsx("div",{className:"font-semibold text-lg md:text-xl text-black",children:"Sahaj Shakya"}),N.jsxs("div",{className:"flex items-center text-sm md:text-base",children:[N.jsx(GH,{className:"mr-2 text-blue-500"}),N.jsx("h3",{className:"text-blue-700",children:"saz.shakya@gmail.com"})]}),N.jsxs("div",{className:"flex items-center text-sm md:text-base",children:[N.jsx(qH,{className:"mr-2 text-green-400"}),N.jsx("h3",{className:"text-green-700",children:"977-9841194900"})]})]})]}),N.jsxs("div",{className:"flex-row gap-1 md:gap-1 hidden md:flex",children:[N.jsx(Bm,{path:"https://github.com/sahajshakya",logo:N.jsx(jH,{size:28}),name:"GitHub"}),N.jsx(Bm,{path:"https://www.linkedin.com/in/sahaj-shakya-98253710a/",logo:N.jsx(zH,{size:28}),name:"LinkedIn"}),N.jsx(Bm,{path:"https://www.researchgate.net/profile/Sahaj-Shakya",logo:N.jsx("span",{className:"text-lg font-bold",children:"RG"}),name:"ResearchGate"}),N.jsx(Bm,{path:"https://scholar.google.com/citations?user=TyG1JqoAAAAJ&hl=en",logo:N.jsx("img",{src:sme,alt:"Google Scholar",className:"w-6 h-6"}),name:"Google Scholar"}),N.jsx(Bm,{path:"https://www.youtube.com/@KA1SKZ",logo:N.jsx(HH,{size:28}),name:"YouTube"}),N.jsx(Bm,{path:"https://www.instagram.com/kai_loves_to_click/",logo:N.jsx(VH,{size:28}),name:"Instagram"})]})]}),N.jsx("div",{className:"flex-1 mx-8 z-50",children:N.jsx(Kpe,{tabs:s,token:i})}),N.jsx("div",{className:"flex gap-5 hidden md:flex",children:N.jsx(ime,{token:i,path:"https://engineeringstudymaterials.com/",pathName:"Materials"})})]})},Bm=({path:n,logo:e,name:t})=>{const r=s0(0),i=s0(0),s=OA(r,a=>a*.5),o=OA(i,a=>a*.5);return N.jsx(on.div,{className:"relative inline-block",onPointerMove:a=>{const l=a.currentTarget;ome(l,a,r,i)},onPointerLeave:()=>{r.set(0),i.set(0)},style:{x:r,y:i},children:N.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-gray-300",children:N.jsx(on.span,{className:"z-10 relative flex items-center justify-center w-12 h-12 rounded-full bg-gray-700 hover:scale-110 transition-transform",style:{x:s,y:o},children:e})})})},hF=(n,e,t,r)=>{const i=e-n,s=r-t;return o=>t+((o-n)/i*s||0)},ome=(n,e,t,r)=>{const i=n.getBoundingClientRect(),s=e.clientX-i.left,o=e.clientY-i.top,a=hF(0,i.width,-1,1)(s),l=hF(0,i.height,-1,1)(o);t.set(a*10),r.set(l*10)},ame=()=>N.jsxs("div",{className:"bg-gray-200",children:[N.jsx(XH,{}),N.jsx("div",{className:"mt-10",children:N.jsx(c5,{})})]});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Q0="172",lme={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ume={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},YH=0,lP=1,QH=2,cme=3,ZH=0,Db=1,D_=2,cl=3,lu=0,co=1,dl=2,Ec=0,sp=1,uP=2,cP=3,fP=4,eG=5,Wf=100,tG=101,nG=102,rG=103,iG=104,sG=200,oG=201,aG=202,lG=203,VA=204,zA=205,uG=206,cG=207,fG=208,hG=209,dG=210,pG=211,mG=212,gG=213,yG=214,HA=0,GA=1,qA=2,_p=3,WA=4,$A=5,KA=6,JA=7,Z0=0,vG=1,_G=2,nu=0,xG=1,wG=2,AG=3,qk=4,EG=5,bG=6,SG=7,hP="attached",TG="detached",Lb=300,Oc=301,mh=302,u0=303,c0=304,Ay=306,gh=1e3,Yo=1001,Jg=1002,ss=1003,Nb=1004,fme=1004,Kd=1005,hme=1005,mi=1006,Mg=1007,dme=1007,Sa=1008,pme=1008,wl=1009,Wk=1010,$k=1011,Xg=1012,Bb=1013,Dc=1014,Po=1015,Ey=1016,Fb=1017,Ub=1018,xp=1020,Kk=35902,Jk=1021,Xk=1022,js=1023,Yk=1024,Qk=1025,op=1026,wp=1027,jb=1028,ex=1029,Zk=1030,Vb=1031,mme=1032,zb=1033,L_=33776,N_=33777,B_=33778,F_=33779,XA=35840,YA=35841,QA=35842,ZA=35843,eE=36196,tE=37492,nE=37496,rE=37808,iE=37809,sE=37810,oE=37811,aE=37812,lE=37813,uE=37814,cE=37815,fE=37816,hE=37817,dE=37818,pE=37819,mE=37820,gE=37821,U_=36492,yE=36494,vE=36495,e3=36283,_E=36284,xE=36285,wE=36286,CG=2200,MG=2201,RG=2202,Yg=2300,Qg=2301,Qw=2302,Jd=2400,Xd=2401,f0=2402,Hb=2500,t3=2501,PG=0,n3=1,AE=2,IG=3200,kG=3201,gme=3202,yme=3203,Th=0,OG=1,cc="",To="srgb",Ap="srgb-linear",h0="linear",ar="srgb",vme=0,Fd=7680,_me=7681,xme=7682,wme=7683,Ame=34055,Eme=34056,bme=5386,Sme=512,Tme=513,Cme=514,Mme=515,Rme=516,Pme=517,Ime=518,dP=519,DG=512,LG=513,NG=514,r3=515,BG=516,FG=517,UG=518,jG=519,d0=35044,kme=35048,Ome=35040,Dme=35045,Lme=35049,Nme=35041,Bme=35046,Fme=35050,Ume=35042,jme="100",pP="300 es",ml=2e3,p0=2001;class du{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Is=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let dF=1234567;const ap=Math.PI/180,Zg=180/Math.PI;function ea(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Is[n&255]+Is[n>>8&255]+Is[n>>16&255]+Is[n>>24&255]+"-"+Is[e&255]+Is[e>>8&255]+"-"+Is[e>>16&15|64]+Is[e>>24&255]+"-"+Is[t&63|128]+Is[t>>8&255]+"-"+Is[t>>16&255]+Is[t>>24&255]+Is[r&255]+Is[r>>8&255]+Is[r>>16&255]+Is[r>>24&255]).toLowerCase()}function mn(n,e,t){return Math.max(e,Math.min(t,n))}function i3(n,e){return(n%e+e)%e}function Vme(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function zme(n,e,t){return n!==e?(t-n)/(e-n):0}function j_(n,e,t){return(1-t)*n+t*e}function Hme(n,e,t,r){return j_(n,e,1-Math.exp(-t*r))}function Gme(n,e=1){return e-Math.abs(i3(n,e*2)-e)}function qme(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Wme(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function $me(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Kme(n,e){return n+Math.random()*(e-n)}function Jme(n){return n*(.5-Math.random())}function Xme(n){n!==void 0&&(dF=n);let e=dF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Yme(n){return n*ap}function Qme(n){return n*Zg}function Zme(n){return(n&n-1)===0&&n!==0}function ege(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tge(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function nge(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),h=o((e-r)/2),p=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*f,l*h,a*u);break;case"YZY":n.set(l*h,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*h,a*c,a*u);break;case"XZX":n.set(a*c,l*g,l*p,a*u);break;case"YXY":n.set(l*p,a*c,l*g,a*u);break;case"ZYZ":n.set(l*g,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function uo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const VG={DEG2RAD:ap,RAD2DEG:Zg,generateUUID:ea,clamp:mn,euclideanModulo:i3,mapLinear:Vme,inverseLerp:zme,lerp:j_,damp:Hme,pingpong:Gme,smoothstep:qme,smootherstep:Wme,randInt:$me,randFloat:Kme,randFloatSpread:Jme,seededRandom:Xme,degToRad:Yme,radToDeg:Qme,isPowerOfTwo:Zme,ceilPowerOfTwo:ege,floorPowerOfTwo:tge,setQuaternionFromProperEuler:nge,normalize:bn,denormalize:uo};class Ze{constructor(e=0,t=0){Ze.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class _n{constructor(e,t,r,i,s,o,a,l,u){_n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],h=r[2],p=r[5],g=r[8],w=i[0],_=i[3],v=i[6],A=i[1],S=i[4],b=i[7],C=i[2],L=i[5],R=i[8];return s[0]=o*w+a*A+l*C,s[3]=o*_+a*S+l*L,s[6]=o*v+a*b+l*R,s[1]=u*w+c*A+f*C,s[4]=u*_+c*S+f*L,s[7]=u*v+c*b+f*R,s[2]=h*w+p*A+g*C,s[5]=h*_+p*S+g*L,s[8]=h*v+p*b+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,h=a*l-c*s,p=u*s-o*l,g=t*f+r*h+i*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/g;return e[0]=f*w,e[1]=(i*u-c*r)*w,e[2]=(a*r-i*o)*w,e[3]=h*w,e[4]=(c*t-i*l)*w,e[5]=(i*s-a*t)*w,e[6]=p*w,e[7]=(r*l-u*t)*w,e[8]=(o*t-r*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(QT.makeScale(e,t)),this}rotate(e){return this.premultiply(QT.makeRotation(-e)),this}translate(e,t){return this.premultiply(QT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const QT=new _n;function zG(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const rge={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xg(n,e){return new rge[n](e)}function m0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function HG(){const n=m0("canvas");return n.style.display="block",n}const pF={};function ug(n){n in pF||(pF[n]=!0,console.warn(n))}function ige(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function sge(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function oge(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const mF=new _n().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),gF=new _n().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function age(){const n={enabled:!0,workingColorSpace:Ap,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===ar&&(i.r=bc(i.r),i.g=bc(i.g),i.b=bc(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===ar&&(i.r=Rg(i.r),i.g=Rg(i.g),i.b=Rg(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===cc?h0:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[Ap]:{primaries:e,whitePoint:r,transfer:h0,toXYZ:mF,fromXYZ:gF,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:To},outputColorSpaceConfig:{drawingBufferColorSpace:To}},[To]:{primaries:e,whitePoint:r,transfer:ar,toXYZ:mF,fromXYZ:gF,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:To}}}),n}const qn=age();function bc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Rg(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Fm;class GG{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Fm===void 0&&(Fm=m0("canvas")),Fm.width=e.width,Fm.height=e.height;const r=Fm.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Fm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=m0("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=bc(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(bc(t[r]/255)*255):t[r]=bc(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let lge=0;class Yd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:lge++}),this.uuid=ea(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(ZT(i[o].image)):s.push(ZT(i[o]))}else s=ZT(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function ZT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?GG.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let uge=0;class Nr extends du{constructor(e=Nr.DEFAULT_IMAGE,t=Nr.DEFAULT_MAPPING,r=Yo,i=Yo,s=mi,o=Sa,a=js,l=wl,u=Nr.DEFAULT_ANISOTROPY,c=cc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uge++}),this.uuid=ea(),this.name="",this.source=new Yd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ze(0,0),this.repeat=new Ze(1,1),this.center=new Ze(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Lb)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case gh:e.x=e.x-Math.floor(e.x);break;case Yo:e.x=e.x<0?0:1;break;case Jg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case gh:e.y=e.y-Math.floor(e.y);break;case Yo:e.y=e.y<0?0:1;break;case Jg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Nr.DEFAULT_IMAGE=null;Nr.DEFAULT_MAPPING=Lb;Nr.DEFAULT_ANISOTROPY=1;class Jn{constructor(e=0,t=0,r=0,i=1){Jn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],p=l[5],g=l[9],w=l[2],_=l[6],v=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-w)<.01&&Math.abs(g-_)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+w)<.1&&Math.abs(g+_)<.1&&Math.abs(u+p+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,b=(p+1)/2,C=(v+1)/2,L=(c+h)/4,R=(f+w)/4,k=(g+_)/4;return S>b&&S>C?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=L/r,s=R/r):b>C?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=L/i,s=k/i):C<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(C),r=R/s,i=k/s),this.set(r,i,s,t),this}let A=Math.sqrt((_-g)*(_-g)+(f-w)*(f-w)+(h-c)*(h-c));return Math.abs(A)<.001&&(A=1),this.x=(_-g)/A,this.y=(f-w)/A,this.z=(h-c)/A,this.w=Math.acos((u+p+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this.w=mn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this.w=mn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Gb extends du{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:mi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Nr(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Yd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uu extends Gb{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class tx extends Nr{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ss,this.minFilter=ss,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cge extends uu{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new tx(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class qb extends Nr{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ss,this.minFilter=ss,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fge extends uu{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new qb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Vs{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const h=s[o+0],p=s[o+1],g=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=g,e[t+3]=w;return}if(f!==w||l!==h||u!==p||c!==g){let _=1-a;const v=l*h+u*p+c*g+f*w,A=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const C=Math.sqrt(S),L=Math.atan2(C,v*A);_=Math.sin(_*L)/C,a=Math.sin(a*L)/C}const b=a*A;if(l=l*_+h*b,u=u*_+p*b,c=c*_+g*b,f=f*_+w*b,_===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=C,u*=C,c*=C,f*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],h=s[o+1],p=s[o+2],g=s[o+3];return e[t]=a*g+c*f+l*p-u*h,e[t+1]=l*g+c*h+u*f-a*p,e[t+2]=u*g+c*p+a*h-l*f,e[t+3]=c*g-a*f-l*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),h=l(r/2),p=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=h*c*f+u*p*g,this._y=u*p*f-h*c*g,this._z=u*c*g+h*p*f,this._w=u*c*f-h*p*g;break;case"YXZ":this._x=h*c*f+u*p*g,this._y=u*p*f-h*c*g,this._z=u*c*g-h*p*f,this._w=u*c*f+h*p*g;break;case"ZXY":this._x=h*c*f-u*p*g,this._y=u*p*f+h*c*g,this._z=u*c*g+h*p*f,this._w=u*c*f-h*p*g;break;case"ZYX":this._x=h*c*f-u*p*g,this._y=u*p*f+h*c*g,this._z=u*c*g-h*p*f,this._w=u*c*f+h*p*g;break;case"YZX":this._x=h*c*f+u*p*g,this._y=u*p*f+h*c*g,this._z=u*c*g-h*p*f,this._w=u*c*f-h*p*g;break;case"XZY":this._x=h*c*f-u*p*g,this._y=u*p*f-h*c*g,this._z=u*c*g+h*p*f,this._w=u*c*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],h=r+a+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(c-l)*p,this._y=(s-u)*p,this._z=(o-i)*p}else if(r>a&&r>f){const p=2*Math.sqrt(1+r-a-f);this._w=(c-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+u)/p}else if(a>f){const p=2*Math.sqrt(1+a-r-f);this._w=(s-u)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+f-r-a);this._w=(o-i)/p,this._x=(s+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*r+t*this._x,this._y=p*i+t*this._y,this._z=p*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class pe{constructor(e=0,t=0,r=0){pe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*i-a*r),c=2*(a*t-s*i),f=2*(s*r-o*t);return this.x=t+l*u+o*f-a*c,this.y=r+l*c+a*u-s*f,this.z=i+l*f+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=mn(this.x,e.x,t.x),this.y=mn(this.y,e.y,t.y),this.z=mn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=mn(this.x,e,t),this.y=mn(this.y,e,t),this.z=mn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return eC.copy(this).projectOnVector(e),this.sub(eC)}reflect(e){return this.sub(eC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eC=new pe,yF=new Vs;class zs{constructor(e=new pe(1/0,1/0,1/0),t=new pe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(il.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(il.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=il.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,il):il.fromBufferAttribute(s,o),il.applyMatrix4(e.matrixWorld),this.expandByPoint(il);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),I1.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),I1.copy(r.boundingBox)),I1.applyMatrix4(e.matrixWorld),this.union(I1)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,il),il.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dv),k1.subVectors(this.max,Dv),Um.subVectors(e.a,Dv),jm.subVectors(e.b,Dv),Vm.subVectors(e.c,Dv),bf.subVectors(jm,Um),Sf.subVectors(Vm,jm),md.subVectors(Um,Vm);let t=[0,-bf.z,bf.y,0,-Sf.z,Sf.y,0,-md.z,md.y,bf.z,0,-bf.x,Sf.z,0,-Sf.x,md.z,0,-md.x,-bf.y,bf.x,0,-Sf.y,Sf.x,0,-md.y,md.x,0];return!tC(t,Um,jm,Vm,k1)||(t=[1,0,0,0,1,0,0,0,1],!tC(t,Um,jm,Vm,k1))?!1:(O1.crossVectors(bf,Sf),t=[O1.x,O1.y,O1.z],tC(t,Um,jm,Vm,k1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,il).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(il).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Zu=[new pe,new pe,new pe,new pe,new pe,new pe,new pe,new pe],il=new pe,I1=new zs,Um=new pe,jm=new pe,Vm=new pe,bf=new pe,Sf=new pe,md=new pe,Dv=new pe,k1=new pe,O1=new pe,gd=new pe;function tC(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){gd.fromArray(n,s);const a=i.x*Math.abs(gd.x)+i.y*Math.abs(gd.y)+i.z*Math.abs(gd.z),l=e.dot(gd),u=t.dot(gd),c=r.dot(gd);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const hge=new zs,Lv=new pe,nC=new pe;class ws{constructor(e=new pe,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):hge.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lv.subVectors(e,this.center);const t=Lv.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Lv,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(nC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lv.copy(e.center).add(nC)),this.expandByPoint(Lv.copy(e.center).sub(nC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ec=new pe,rC=new pe,D1=new pe,Tf=new pe,iC=new pe,L1=new pe,sC=new pe;class by{constructor(e=new pe,t=new pe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ec)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ec.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ec.copy(this.origin).addScaledVector(this.direction,t),ec.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){rC.copy(e).add(t).multiplyScalar(.5),D1.copy(t).sub(e).normalize(),Tf.copy(this.origin).sub(rC);const s=e.distanceTo(t)*.5,o=-this.direction.dot(D1),a=Tf.dot(this.direction),l=-Tf.dot(D1),u=Tf.lengthSq(),c=Math.abs(1-o*o);let f,h,p,g;if(c>0)if(f=o*l-a,h=o*a-l,g=s*c,f>=0)if(h>=-g)if(h<=g){const w=1/c;f*=w,h*=w,p=f*(f+o*h+2*a)+h*(o*f+h+2*l)+u}else h=s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+u;else h=-s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+u;else h<=-g?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+u):h<=g?(f=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+u):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),p=-f*f+h*(h+2*l)+u);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),p=-f*f+h*(h+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,f),i&&i.copy(rC).addScaledVector(D1,h),p}intersectSphere(e,t){ec.subVectors(e.center,this.origin);const r=ec.dot(this.direction),i=ec.dot(ec)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ec)!==null}intersectTriangle(e,t,r,i,s){iC.subVectors(t,e),L1.subVectors(r,e),sC.crossVectors(iC,L1);let o=this.direction.dot(sC),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Tf.subVectors(this.origin,e);const l=a*this.direction.dot(L1.crossVectors(Tf,L1));if(l<0)return null;const u=a*this.direction.dot(iC.cross(Tf));if(u<0||l+u>o)return null;const c=-a*Tf.dot(sC);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Kt{constructor(e,t,r,i,s,o,a,l,u,c,f,h,p,g,w,_){Kt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,f,h,p,g,w,_)}set(e,t,r,i,s,o,a,l,u,c,f,h,p,g,w,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=u,v[6]=c,v[10]=f,v[14]=h,v[3]=p,v[7]=g,v[11]=w,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Kt().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/zm.setFromMatrixColumn(e,0).length(),s=1/zm.setFromMatrixColumn(e,1).length(),o=1/zm.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*c,p=o*f,g=a*c,w=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=p+g*u,t[5]=h-w*u,t[9]=-a*l,t[2]=w-h*u,t[6]=g+p*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,p=l*f,g=u*c,w=u*f;t[0]=h+w*a,t[4]=g*a-p,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=p*a-g,t[6]=w+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,p=l*f,g=u*c,w=u*f;t[0]=h-w*a,t[4]=-o*f,t[8]=g+p*a,t[1]=p+g*a,t[5]=o*c,t[9]=w-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,p=o*f,g=a*c,w=a*f;t[0]=l*c,t[4]=g*u-p,t[8]=h*u+w,t[1]=l*f,t[5]=w*u+h,t[9]=p*u-g,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*u,g=a*l,w=a*u;t[0]=l*c,t[4]=w-h*f,t[8]=g*f+p,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=p*f+g,t[10]=h-w*f}else if(e.order==="XZY"){const h=o*l,p=o*u,g=a*l,w=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=h*f+w,t[5]=o*c,t[9]=p*f-g,t[2]=g*f-p,t[6]=a*c,t[10]=w*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dge,e,pge)}lookAt(e,t,r){const i=this.elements;return $o.subVectors(e,t),$o.lengthSq()===0&&($o.z=1),$o.normalize(),Cf.crossVectors(r,$o),Cf.lengthSq()===0&&(Math.abs(r.z)===1?$o.x+=1e-4:$o.z+=1e-4,$o.normalize(),Cf.crossVectors(r,$o)),Cf.normalize(),N1.crossVectors($o,Cf),i[0]=Cf.x,i[4]=N1.x,i[8]=$o.x,i[1]=Cf.y,i[5]=N1.y,i[9]=$o.y,i[2]=Cf.z,i[6]=N1.z,i[10]=$o.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],h=r[9],p=r[13],g=r[2],w=r[6],_=r[10],v=r[14],A=r[3],S=r[7],b=r[11],C=r[15],L=i[0],R=i[4],k=i[8],O=i[12],M=i[1],D=i[5],U=i[9],F=i[13],$=i[2],Z=i[6],se=i[10],ce=i[14],Q=i[3],ee=i[7],Y=i[11],V=i[15];return s[0]=o*L+a*M+l*$+u*Q,s[4]=o*R+a*D+l*Z+u*ee,s[8]=o*k+a*U+l*se+u*Y,s[12]=o*O+a*F+l*ce+u*V,s[1]=c*L+f*M+h*$+p*Q,s[5]=c*R+f*D+h*Z+p*ee,s[9]=c*k+f*U+h*se+p*Y,s[13]=c*O+f*F+h*ce+p*V,s[2]=g*L+w*M+_*$+v*Q,s[6]=g*R+w*D+_*Z+v*ee,s[10]=g*k+w*U+_*se+v*Y,s[14]=g*O+w*F+_*ce+v*V,s[3]=A*L+S*M+b*$+C*Q,s[7]=A*R+S*D+b*Z+C*ee,s[11]=A*k+S*U+b*se+C*Y,s[15]=A*O+S*F+b*ce+C*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],p=e[14],g=e[3],w=e[7],_=e[11],v=e[15];return g*(+s*l*f-i*u*f-s*a*h+r*u*h+i*a*p-r*l*p)+w*(+t*l*p-t*u*h+s*o*h-i*o*p+i*u*c-s*l*c)+_*(+t*u*f-t*a*p-s*o*f+r*o*p+s*a*c-r*u*c)+v*(-i*a*c-t*l*f+t*a*h+i*o*f-r*o*h+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],p=e[11],g=e[12],w=e[13],_=e[14],v=e[15],A=f*_*u-w*h*u+w*l*p-a*_*p-f*l*v+a*h*v,S=g*h*u-c*_*u-g*l*p+o*_*p+c*l*v-o*h*v,b=c*w*u-g*f*u+g*a*p-o*w*p-c*a*v+o*f*v,C=g*f*l-c*w*l-g*a*h+o*w*h+c*a*_-o*f*_,L=t*A+r*S+i*b+s*C;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/L;return e[0]=A*R,e[1]=(w*h*s-f*_*s-w*i*p+r*_*p+f*i*v-r*h*v)*R,e[2]=(a*_*s-w*l*s+w*i*u-r*_*u-a*i*v+r*l*v)*R,e[3]=(f*l*s-a*h*s-f*i*u+r*h*u+a*i*p-r*l*p)*R,e[4]=S*R,e[5]=(c*_*s-g*h*s+g*i*p-t*_*p-c*i*v+t*h*v)*R,e[6]=(g*l*s-o*_*s-g*i*u+t*_*u+o*i*v-t*l*v)*R,e[7]=(o*h*s-c*l*s+c*i*u-t*h*u-o*i*p+t*l*p)*R,e[8]=b*R,e[9]=(g*f*s-c*w*s-g*r*p+t*w*p+c*r*v-t*f*v)*R,e[10]=(o*w*s-g*a*s+g*r*u-t*w*u-o*r*v+t*a*v)*R,e[11]=(c*a*s-o*f*s-c*r*u+t*f*u+o*r*p-t*a*p)*R,e[12]=C*R,e[13]=(c*w*i-g*f*i+g*r*h-t*w*h-c*r*_+t*f*_)*R,e[14]=(g*a*i-o*w*i-g*r*l+t*w*l+o*r*_-t*a*_)*R,e[15]=(o*f*i-c*a*i+c*r*l-t*f*l-o*r*h+t*a*h)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,h=s*u,p=s*c,g=s*f,w=o*c,_=o*f,v=a*f,A=l*u,S=l*c,b=l*f,C=r.x,L=r.y,R=r.z;return i[0]=(1-(w+v))*C,i[1]=(p+b)*C,i[2]=(g-S)*C,i[3]=0,i[4]=(p-b)*L,i[5]=(1-(h+v))*L,i[6]=(_+A)*L,i[7]=0,i[8]=(g+S)*R,i[9]=(_-A)*R,i[10]=(1-(h+w))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=zm.set(i[0],i[1],i[2]).length();const o=zm.set(i[4],i[5],i[6]).length(),a=zm.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],sl.copy(this);const u=1/s,c=1/o,f=1/a;return sl.elements[0]*=u,sl.elements[1]*=u,sl.elements[2]*=u,sl.elements[4]*=c,sl.elements[5]*=c,sl.elements[6]*=c,sl.elements[8]*=f,sl.elements[9]*=f,sl.elements[10]*=f,t.setFromRotationMatrix(sl),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=ml){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),f=(t+e)/(t-e),h=(r+i)/(r-i);let p,g;if(a===ml)p=-(o+s)/(o-s),g=-2*o*s/(o-s);else if(a===p0)p=-o/(o-s),g=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=ml){const l=this.elements,u=1/(t-e),c=1/(r-i),f=1/(o-s),h=(t+e)*u,p=(r+i)*c;let g,w;if(a===ml)g=(o+s)*f,w=-2*f;else if(a===p0)g=s*f,w=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=w,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const zm=new pe,sl=new Kt,dge=new pe(0,0,0),pge=new pe(1,1,1),Cf=new pe,N1=new pe,$o=new pe,vF=new Kt,_F=new Vs;class na{constructor(e=0,t=0,r=0,i=na.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-mn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return vF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(vF,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return _F.setFromEuler(this),this.setFromQuaternion(_F,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}na.DEFAULT_ORDER="XYZ";class lp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let mge=0;const xF=new pe,Hm=new Vs,tc=new Kt,B1=new pe,Nv=new pe,gge=new pe,yge=new Vs,wF=new pe(1,0,0),AF=new pe(0,1,0),EF=new pe(0,0,1),bF={type:"added"},vge={type:"removed"},Gm={type:"childadded",child:null},oC={type:"childremoved",child:null};class Dn extends du{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mge++}),this.uuid=ea(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DEFAULT_UP.clone();const e=new pe,t=new na,r=new Vs,i=new pe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Kt},normalMatrix:{value:new _n}}),this.matrix=new Kt,this.matrixWorld=new Kt,this.matrixAutoUpdate=Dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hm.setFromAxisAngle(e,t),this.quaternion.multiply(Hm),this}rotateOnWorldAxis(e,t){return Hm.setFromAxisAngle(e,t),this.quaternion.premultiply(Hm),this}rotateX(e){return this.rotateOnAxis(wF,e)}rotateY(e){return this.rotateOnAxis(AF,e)}rotateZ(e){return this.rotateOnAxis(EF,e)}translateOnAxis(e,t){return xF.copy(e).applyQuaternion(this.quaternion),this.position.add(xF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(wF,e)}translateY(e){return this.translateOnAxis(AF,e)}translateZ(e){return this.translateOnAxis(EF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?B1.copy(e):B1.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Nv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tc.lookAt(Nv,B1,this.up):tc.lookAt(B1,Nv,this.up),this.quaternion.setFromRotationMatrix(tc),i&&(tc.extractRotation(i.matrixWorld),Hm.setFromRotationMatrix(tc),this.quaternion.premultiply(Hm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bF),Gm.child=e,this.dispatchEvent(Gm),Gm.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(vge),oC.child=e,this.dispatchEvent(oC),oC.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),tc.multiply(e.parent.matrixWorld)),e.applyMatrix4(tc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bF),Gm.child=e,this.dispatchEvent(Gm),Gm.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nv,e,gge),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Nv,yge,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),p=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Dn.DEFAULT_UP=new pe(0,1,0);Dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ol=new pe,nc=new pe,aC=new pe,rc=new pe,qm=new pe,Wm=new pe,SF=new pe,lC=new pe,uC=new pe,cC=new pe,fC=new Jn,hC=new Jn,dC=new Jn;class Ro{constructor(e=new pe,t=new pe,r=new pe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),ol.subVectors(e,t),i.cross(ol);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){ol.subVectors(i,t),nc.subVectors(r,t),aC.subVectors(e,t);const o=ol.dot(ol),a=ol.dot(nc),l=ol.dot(aC),u=nc.dot(nc),c=nc.dot(aC),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const h=1/f,p=(u*l-a*c)*h,g=(o*c-a*l)*h;return s.set(1-p-g,g,p)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,rc)===null?!1:rc.x>=0&&rc.y>=0&&rc.x+rc.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,rc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,rc.x),l.addScaledVector(o,rc.y),l.addScaledVector(a,rc.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return fC.setScalar(0),hC.setScalar(0),dC.setScalar(0),fC.fromBufferAttribute(e,t),hC.fromBufferAttribute(e,r),dC.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(fC,s.x),o.addScaledVector(hC,s.y),o.addScaledVector(dC,s.z),o}static isFrontFacing(e,t,r,i){return ol.subVectors(r,t),nc.subVectors(e,t),ol.cross(nc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ol.subVectors(this.c,this.b),nc.subVectors(this.a,this.b),ol.cross(nc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ro.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ro.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return Ro.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Ro.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ro.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;qm.subVectors(i,r),Wm.subVectors(s,r),lC.subVectors(e,r);const l=qm.dot(lC),u=Wm.dot(lC);if(l<=0&&u<=0)return t.copy(r);uC.subVectors(e,i);const c=qm.dot(uC),f=Wm.dot(uC);if(c>=0&&f<=c)return t.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(qm,o);cC.subVectors(e,s);const p=qm.dot(cC),g=Wm.dot(cC);if(g>=0&&p<=g)return t.copy(s);const w=p*u-l*g;if(w<=0&&u>=0&&g<=0)return a=u/(u-g),t.copy(r).addScaledVector(Wm,a);const _=c*g-p*f;if(_<=0&&f-c>=0&&p-g>=0)return SF.subVectors(s,i),a=(f-c)/(f-c+(p-g)),t.copy(i).addScaledVector(SF,a);const v=1/(_+w+h);return o=w*v,a=h*v,t.copy(r).addScaledVector(qm,o).addScaledVector(Wm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mf={h:0,s:0,l:0},F1={h:0,s:0,l:0};function pC(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class At{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=To){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qn.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=qn.workingColorSpace){return this.r=e,this.g=t,this.b=r,qn.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=qn.workingColorSpace){if(e=i3(e,1),t=mn(t,0,1),r=mn(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=pC(o,s,e+1/3),this.g=pC(o,s,e),this.b=pC(o,s,e-1/3)}return qn.toWorkingColorSpace(this,i),this}setStyle(e,t=To){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=To){const r=qG[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=bc(e.r),this.g=bc(e.g),this.b=bc(e.b),this}copyLinearToSRGB(e){return this.r=Rg(e.r),this.g=Rg(e.g),this.b=Rg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=To){return qn.fromWorkingColorSpace(ks.copy(this),e),Math.round(mn(ks.r*255,0,255))*65536+Math.round(mn(ks.g*255,0,255))*256+Math.round(mn(ks.b*255,0,255))}getHexString(e=To){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qn.workingColorSpace){qn.fromWorkingColorSpace(ks.copy(this),t);const r=ks.r,i=ks.g,s=ks.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case r:l=(i-s)/f+(i<s?6:0);break;case i:l=(s-r)/f+2;break;case s:l=(r-i)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=qn.workingColorSpace){return qn.fromWorkingColorSpace(ks.copy(this),t),e.r=ks.r,e.g=ks.g,e.b=ks.b,e}getStyle(e=To){qn.fromWorkingColorSpace(ks.copy(this),e);const t=ks.r,r=ks.g,i=ks.b;return e!==To?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Mf),this.setHSL(Mf.h+e,Mf.s+t,Mf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Mf),e.getHSL(F1);const r=j_(Mf.h,F1.h,t),i=j_(Mf.s,F1.s,t),s=j_(Mf.l,F1.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ks=new At;At.NAMES=qG;let _ge=0;class zi extends du{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_ge++}),this.uuid=ea(),this.name="",this.type="Material",this.blending=sp,this.side=lu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=VA,this.blendDst=zA,this.blendEquation=Wf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new At(0,0,0),this.blendAlpha=0,this.depthFunc=_p,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=dP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fd,this.stencilZFail=Fd,this.stencilZPass=Fd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==sp&&(r.blending=this.blending),this.side!==lu&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==VA&&(r.blendSrc=this.blendSrc),this.blendDst!==zA&&(r.blendDst=this.blendDst),this.blendEquation!==Wf&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==_p&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==dP&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Fd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Fd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Qo extends zi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.combine=Z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const fc=xge();function xge(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function bo(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=mn(n,-65504,65504),fc.floatView[0]=n;const e=fc.uint32View[0],t=e>>23&511;return fc.baseTable[t]+((e&8388607)>>fc.shiftTable[t])}function d_(n){const e=n>>10;return fc.uint32View[0]=fc.mantissaTable[fc.offsetTable[e]+(n&1023)]+fc.exponentTable[e],fc.floatView[0]}const wge={toHalfFloat:bo,fromHalfFloat:d_},Ci=new pe,U1=new Ze;class Xn{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=d0,this.updateRanges=[],this.gpuType=Po,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)U1.fromBufferAttribute(this,t),U1.applyMatrix3(e),this.setXY(t,U1.x,U1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix3(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ci.fromBufferAttribute(this,t),Ci.applyMatrix4(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ci.fromBufferAttribute(this,t),Ci.applyNormalMatrix(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ci.fromBufferAttribute(this,t),Ci.transformDirection(e),this.setXYZ(t,Ci.x,Ci.y,Ci.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=uo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=bn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=uo(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=uo(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=uo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=uo(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array),s=bn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==d0&&(e.usage=this.usage),e}}class Age extends Xn{constructor(e,t,r){super(new Int8Array(e),t,r)}}class Ege extends Xn{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class bge extends Xn{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class Sge extends Xn{constructor(e,t,r){super(new Int16Array(e),t,r)}}class s3 extends Xn{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Tge extends Xn{constructor(e,t,r){super(new Int32Array(e),t,r)}}class o3 extends Xn{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Cge extends Xn{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=d_(this.array[e*this.itemSize]);return this.normalized&&(t=uo(t,this.array)),t}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize]=bo(t),this}getY(e){let t=d_(this.array[e*this.itemSize+1]);return this.normalized&&(t=uo(t,this.array)),t}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+1]=bo(t),this}getZ(e){let t=d_(this.array[e*this.itemSize+2]);return this.normalized&&(t=uo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+2]=bo(t),this}getW(e){let t=d_(this.array[e*this.itemSize+3]);return this.normalized&&(t=uo(t,this.array)),t}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.array[e*this.itemSize+3]=bo(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array)),this.array[e+0]=bo(t),this.array[e+1]=bo(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.array[e+0]=bo(t),this.array[e+1]=bo(r),this.array[e+2]=bo(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array),s=bn(s,this.array)),this.array[e+0]=bo(t),this.array[e+1]=bo(r),this.array[e+2]=bo(i),this.array[e+3]=bo(s),this}}class Bt extends Xn{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Mge=0;const xa=new Kt,mC=new Dn,$m=new pe,Ko=new zs,Bv=new zs,ns=new pe;class xn extends du{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mge++}),this.uuid=ea(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zG(e)?o3:s3)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new _n().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return xa.makeRotationFromQuaternion(e),this.applyMatrix4(xa),this}rotateX(e){return xa.makeRotationX(e),this.applyMatrix4(xa),this}rotateY(e){return xa.makeRotationY(e),this.applyMatrix4(xa),this}rotateZ(e){return xa.makeRotationZ(e),this.applyMatrix4(xa),this}translate(e,t,r){return xa.makeTranslation(e,t,r),this.applyMatrix4(xa),this}scale(e,t,r){return xa.makeScale(e,t,r),this.applyMatrix4(xa),this}lookAt(e){return mC.lookAt(e),mC.updateMatrix(),this.applyMatrix4(mC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($m).negate(),this.translate($m.x,$m.y,$m.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Bt(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new pe(-1/0,-1/0,-1/0),new pe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ko.setFromBufferAttribute(s),this.morphTargetsRelative?(ns.addVectors(this.boundingBox.min,Ko.min),this.boundingBox.expandByPoint(ns),ns.addVectors(this.boundingBox.max,Ko.max),this.boundingBox.expandByPoint(ns)):(this.boundingBox.expandByPoint(Ko.min),this.boundingBox.expandByPoint(Ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ws);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new pe,1/0);return}if(e){const r=this.boundingSphere.center;if(Ko.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Bv.setFromBufferAttribute(a),this.morphTargetsRelative?(ns.addVectors(Ko.min,Bv.min),Ko.expandByPoint(ns),ns.addVectors(Ko.max,Bv.max),Ko.expandByPoint(ns)):(Ko.expandByPoint(Bv.min),Ko.expandByPoint(Bv.max))}Ko.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)ns.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(ns));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)ns.fromBufferAttribute(a,u),l&&($m.fromBufferAttribute(e,u),ns.add($m)),i=Math.max(i,r.distanceToSquared(ns))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let k=0;k<r.count;k++)a[k]=new pe,l[k]=new pe;const u=new pe,c=new pe,f=new pe,h=new Ze,p=new Ze,g=new Ze,w=new pe,_=new pe;function v(k,O,M){u.fromBufferAttribute(r,k),c.fromBufferAttribute(r,O),f.fromBufferAttribute(r,M),h.fromBufferAttribute(s,k),p.fromBufferAttribute(s,O),g.fromBufferAttribute(s,M),c.sub(u),f.sub(u),p.sub(h),g.sub(h);const D=1/(p.x*g.y-g.x*p.y);isFinite(D)&&(w.copy(c).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(D),_.copy(f).multiplyScalar(p.x).addScaledVector(c,-g.x).multiplyScalar(D),a[k].add(w),a[O].add(w),a[M].add(w),l[k].add(_),l[O].add(_),l[M].add(_))}let A=this.groups;A.length===0&&(A=[{start:0,count:e.count}]);for(let k=0,O=A.length;k<O;++k){const M=A[k],D=M.start,U=M.count;for(let F=D,$=D+U;F<$;F+=3)v(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const S=new pe,b=new pe,C=new pe,L=new pe;function R(k){C.fromBufferAttribute(i,k),L.copy(C);const O=a[k];S.copy(O),S.sub(C.multiplyScalar(C.dot(O))).normalize(),b.crossVectors(L,O);const D=b.dot(l[k])<0?-1:1;o.setXYZW(k,S.x,S.y,S.z,D)}for(let k=0,O=A.length;k<O;++k){const M=A[k],D=M.start,U=M.count;for(let F=D,$=D+U;F<$;F+=3)R(e.getX(F+0)),R(e.getX(F+1)),R(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xn(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new pe,s=new pe,o=new pe,a=new pe,l=new pe,u=new pe,c=new pe,f=new pe;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),w=e.getX(h+1),_=e.getX(h+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,_),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,w),u.fromBufferAttribute(r,_),a.add(c),l.add(c),u.add(c),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(_,u.x,u.y,u.z)}else for(let h=0,p=t.count;h<p;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ns.fromBufferAttribute(e,t),ns.normalize(),e.setXYZ(t,ns.x,ns.y,ns.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,h=new u.constructor(l.length*c);let p=0,g=0;for(let w=0,_=l.length;w<_;w++){a.isInterleavedBufferAttribute?p=l[w]*a.data.stride+a.offset:p=l[w]*c;for(let v=0;v<c;v++)h[g++]=u[p++]}return new Xn(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new xn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const h=u[c],p=e(h,r);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];c.push(p.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let h=0,p=f.length;h<p;h++)c.push(f[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TF=new Kt,yd=new by,j1=new ws,CF=new pe,V1=new pe,z1=new pe,H1=new pe,gC=new pe,G1=new pe,MF=new pe,q1=new pe;class gi extends Dn{constructor(e=new xn,t=new Qo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){G1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(gC.fromBufferAttribute(f,e),o?G1.addScaledVector(gC,c):G1.addScaledVector(gC.sub(t),c))}t.add(G1)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),j1.copy(r.boundingSphere),j1.applyMatrix4(s),yd.copy(e.ray).recast(e.near),!(j1.containsPoint(yd.origin)===!1&&(yd.intersectSphere(j1,CF)===null||yd.origin.distanceToSquared(CF)>(e.far-e.near)**2))&&(TF.copy(s).invert(),yd.copy(e.ray).applyMatrix4(TF),!(r.boundingBox!==null&&yd.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,yd)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,f=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let g=0,w=h.length;g<w;g++){const _=h[g],v=o[_.materialIndex],A=Math.max(_.start,p.start),S=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let b=A,C=S;b<C;b+=3){const L=a.getX(b),R=a.getX(b+1),k=a.getX(b+2);i=W1(this,v,e,r,u,c,f,L,R,k),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),w=Math.min(a.count,p.start+p.count);for(let _=g,v=w;_<v;_+=3){const A=a.getX(_),S=a.getX(_+1),b=a.getX(_+2);i=W1(this,o,e,r,u,c,f,A,S,b),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let g=0,w=h.length;g<w;g++){const _=h[g],v=o[_.materialIndex],A=Math.max(_.start,p.start),S=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let b=A,C=S;b<C;b+=3){const L=b,R=b+1,k=b+2;i=W1(this,v,e,r,u,c,f,L,R,k),i&&(i.faceIndex=Math.floor(b/3),i.face.materialIndex=_.materialIndex,t.push(i))}}else{const g=Math.max(0,p.start),w=Math.min(l.count,p.start+p.count);for(let _=g,v=w;_<v;_+=3){const A=_,S=_+1,b=_+2;i=W1(this,o,e,r,u,c,f,A,S,b),i&&(i.faceIndex=Math.floor(_/3),t.push(i))}}}}function Rge(n,e,t,r,i,s,o,a){let l;if(e.side===co?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===lu,a),l===null)return null;q1.copy(a),q1.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(q1);return u<t.near||u>t.far?null:{distance:u,point:q1.clone(),object:n}}function W1(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,V1),n.getVertexPosition(l,z1),n.getVertexPosition(u,H1);const c=Rge(n,e,t,r,V1,z1,H1,MF);if(c){const f=new pe;Ro.getBarycoord(MF,V1,z1,H1,f),i&&(c.uv=Ro.getInterpolatedAttribute(i,a,l,u,f,new Ze)),s&&(c.uv1=Ro.getInterpolatedAttribute(s,a,l,u,f,new Ze)),o&&(c.normal=Ro.getInterpolatedAttribute(o,a,l,u,f,new pe),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new pe,materialIndex:0};Ro.getNormal(V1,z1,H1,h.normal),c.face=h,c.barycoord=f}return c}class Gp extends xn{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Bt(u,3)),this.setAttribute("normal",new Bt(c,3)),this.setAttribute("uv",new Bt(f,2));function g(w,_,v,A,S,b,C,L,R,k,O){const M=b/R,D=C/k,U=b/2,F=C/2,$=L/2,Z=R+1,se=k+1;let ce=0,Q=0;const ee=new pe;for(let Y=0;Y<se;Y++){const V=Y*D-F;for(let X=0;X<Z;X++){const re=X*M-U;ee[w]=re*A,ee[_]=V*S,ee[v]=$,u.push(ee.x,ee.y,ee.z),ee[w]=0,ee[_]=0,ee[v]=L>0?1:-1,c.push(ee.x,ee.y,ee.z),f.push(X/R),f.push(1-Y/k),ce+=1}}for(let Y=0;Y<k;Y++)for(let V=0;V<R;V++){const X=h+V+Z*Y,re=h+V+Z*(Y+1),oe=h+(V+1)+Z*(Y+1),fe=h+(V+1)+Z*Y;l.push(X,re,fe),l.push(re,oe,fe),Q+=6}a.addGroup(p,Q,O),p+=Q,h+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gp(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ey(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function lo(n){const e={};for(let t=0;t<n.length;t++){const r=ey(n[t]);for(const i in r)e[i]=r[i]}return e}function Pge(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function WG(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qn.workingColorSpace}const $G={clone:ey,merge:lo};var Ige=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kge=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Al extends zi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ige,this.fragmentShader=kge,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ey(e.uniforms),this.uniformsGroups=Pge(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class nx extends Dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Kt,this.projectionMatrix=new Kt,this.projectionMatrixInverse=new Kt,this.coordinateSystem=ml}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Rf=new pe,RF=new Ze,PF=new Ze;class Ui extends nx{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ap*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zg*2*Math.atan(Math.tan(ap*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Rf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Rf.x,Rf.y).multiplyScalar(-e/Rf.z),Rf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Rf.x,Rf.y).multiplyScalar(-e/Rf.z)}getViewSize(e,t){return this.getViewBounds(e,RF,PF),t.subVectors(PF,RF)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ap*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Km=-90,Jm=1;class KG extends Dn{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ui(Km,Jm,e,t);i.layers=this.layers,this.add(i);const s=new Ui(Km,Jm,e,t);s.layers=this.layers,this.add(s);const o=new Ui(Km,Jm,e,t);o.layers=this.layers,this.add(o);const a=new Ui(Km,Jm,e,t);a.layers=this.layers,this.add(a);const l=new Ui(Km,Jm,e,t);l.layers=this.layers,this.add(l);const u=new Ui(Km,Jm,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===ml)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===p0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(f,h,p),e.xr.enabled=g,r.texture.needsPMREMUpdate=!0}}class rx extends Nr{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Oc,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class JG extends uu{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new rx(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:mi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Gp(5,5,5),s=new Al({name:"CubemapFromEquirect",uniforms:ey(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:co,blending:Ec});s.uniforms.tEquirect.value=t;const o=new gi(i,s),a=t.minFilter;return t.minFilter===Sa&&(t.minFilter=mi),new KG(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class Wb{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new At(e),this.density=t}clone(){return new Wb(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $b{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new At(e),this.near=t,this.far=r}clone(){return new $b(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class a3 extends Dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new na,this.environmentIntensity=1,this.environmentRotation=new na,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ix{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=d0,this.updateRanges=[],this.version=0,this.uuid=ea()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ea()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ao=new pe;class yh{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ao.fromBufferAttribute(this,t),ao.applyMatrix4(e),this.setXYZ(t,ao.x,ao.y,ao.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ao.fromBufferAttribute(this,t),ao.applyNormalMatrix(e),this.setXYZ(t,ao.x,ao.y,ao.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ao.fromBufferAttribute(this,t),ao.transformDirection(e),this.setXYZ(t,ao.x,ao.y,ao.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=uo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=bn(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=uo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=uo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=uo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=uo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bn(t,this.array),r=bn(r,this.array),i=bn(i,this.array),s=bn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class l3 extends zi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Xm;const Fv=new pe,Ym=new pe,Qm=new pe,Zm=new Ze,Uv=new Ze,XG=new Kt,$1=new pe,jv=new pe,K1=new pe,IF=new Ze,yC=new Ze,kF=new Ze;class YG extends Dn{constructor(e=new l3){if(super(),this.isSprite=!0,this.type="Sprite",Xm===void 0){Xm=new xn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ix(t,5);Xm.setIndex([0,1,2,0,2,3]),Xm.setAttribute("position",new yh(r,3,0,!1)),Xm.setAttribute("uv",new yh(r,2,3,!1))}this.geometry=Xm,this.material=e,this.center=new Ze(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ym.setFromMatrixScale(this.matrixWorld),XG.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Qm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ym.multiplyScalar(-Qm.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;J1($1.set(-.5,-.5,0),Qm,o,Ym,i,s),J1(jv.set(.5,-.5,0),Qm,o,Ym,i,s),J1(K1.set(.5,.5,0),Qm,o,Ym,i,s),IF.set(0,0),yC.set(1,0),kF.set(1,1);let a=e.ray.intersectTriangle($1,jv,K1,!1,Fv);if(a===null&&(J1(jv.set(-.5,.5,0),Qm,o,Ym,i,s),yC.set(0,1),a=e.ray.intersectTriangle($1,K1,jv,!1,Fv),a===null))return;const l=e.ray.origin.distanceTo(Fv);l<e.near||l>e.far||t.push({distance:l,point:Fv.clone(),uv:Ro.getInterpolation(Fv,$1,jv,K1,IF,yC,kF,new Ze),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function J1(n,e,t,r,i,s){Zm.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Uv.x=s*Zm.x-i*Zm.y,Uv.y=i*Zm.x+s*Zm.y):Uv.copy(Zm),n.copy(e),n.x+=Uv.x,n.y+=Uv.y,n.applyMatrix4(XG)}const X1=new pe,OF=new pe;class QG extends Dn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){const i=t.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){X1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(X1);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){X1.setFromMatrixPosition(e.matrixWorld),OF.setFromMatrixPosition(this.matrixWorld);const r=X1.distanceTo(OF)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const DF=new pe,LF=new Jn,NF=new Jn,Oge=new pe,BF=new Kt,Y1=new pe,vC=new ws,FF=new Kt,_C=new by;class u3 extends gi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hP,this.bindMatrix=new Kt,this.bindMatrixInverse=new Kt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new zs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Y1),this.boundingBox.expandByPoint(Y1)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ws),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,Y1),this.boundingSphere.expandByPoint(Y1)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vC.copy(this.boundingSphere),vC.applyMatrix4(i),e.ray.intersectsSphere(vC)!==!1&&(FF.copy(i).invert(),_C.copy(e.ray).applyMatrix4(FF),!(this.boundingBox!==null&&_C.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,_C)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Jn,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===hP?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===TG?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;LF.fromBufferAttribute(i.attributes.skinIndex,e),NF.fromBufferAttribute(i.attributes.skinWeight,e),DF.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=NF.getComponent(s);if(o!==0){const a=LF.getComponent(s);BF.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Oge.copy(DF).applyMatrix4(BF),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Kb extends Dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ru extends Nr{constructor(e=null,t=1,r=1,i,s,o,a,l,u=ss,c=ss,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const UF=new Kt,Dge=new Kt;class sx{constructor(e=[],t=[]){this.uuid=ea(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Kt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Kt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Dge;UF.multiplyMatrices(a,t[s]),UF.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new sx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new ru(t,e,e,js,Po);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Kb),this.bones.push(o),this.boneInverses.push(new Kt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Ep extends Xn{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const eg=new Kt,jF=new Kt,Q1=[],VF=new zs,Lge=new Kt,Vv=new gi,zv=new ws;class c3 extends gi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ep(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Lge)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new zs),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,eg),VF.copy(e.boundingBox).applyMatrix4(eg),this.boundingBox.union(VF)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ws),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,eg),zv.copy(e.boundingSphere).applyMatrix4(eg),this.boundingSphere.union(zv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Vv.geometry=this.geometry,Vv.material=this.material,Vv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),zv.copy(this.boundingSphere),zv.applyMatrix4(r),e.ray.intersectsSphere(zv)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,eg),jF.multiplyMatrices(r,eg),Vv.matrixWorld=jF,Vv.raycast(e,Q1);for(let o=0,a=Q1.length;o<a;o++){const l=Q1[o];l.instanceId=s,l.object=this,t.push(l)}Q1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ep(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const r=t.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new ru(new Float32Array(i*this.count),i,this.count,jb,Po));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<r.length;u++)o+=r[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const xC=new pe,Nge=new pe,Bge=new _n;class Uf{constructor(e=new pe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=xC.subVectors(r,t).cross(Nge.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(xC),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Bge.getNormalMatrix(e),i=this.coplanarPoint(xC).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vd=new ws,Z1=new pe;class ox{constructor(e=new Uf,t=new Uf,r=new Uf,i=new Uf,s=new Uf,o=new Uf){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=ml){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],f=i[6],h=i[7],p=i[8],g=i[9],w=i[10],_=i[11],v=i[12],A=i[13],S=i[14],b=i[15];if(r[0].setComponents(l-s,h-u,_-p,b-v).normalize(),r[1].setComponents(l+s,h+u,_+p,b+v).normalize(),r[2].setComponents(l+o,h+c,_+g,b+A).normalize(),r[3].setComponents(l-o,h-c,_-g,b-A).normalize(),r[4].setComponents(l-a,h-f,_-w,b-S).normalize(),t===ml)r[5].setComponents(l+a,h+f,_+w,b+S).normalize();else if(t===p0)r[5].setComponents(a,f,w,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vd)}intersectsSprite(e){return vd.center.set(0,0,0),vd.radius=.7071067811865476,vd.applyMatrix4(e.matrixWorld),this.intersectsSphere(vd)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Z1.x=i.normal.x>0?e.max.x:e.min.x,Z1.y=i.normal.y>0?e.max.y:e.min.y,Z1.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Z1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function wC(n,e){return n-e}function Fge(n,e){return n.z-e.z}function Uge(n,e){return e.z-n.z}class jge{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Ao=new Kt,Vge=new At(1,1,1),AC=new ox,ew=new zs,_d=new ws,Hv=new pe,zF=new pe,zge=new pe,EC=new jge,Os=new gi,tw=[];function Hge(n,e,t=0){const r=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const i=n.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*r);e.needsUpdate=!0}function xd(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++)e[r]=n[r]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class ZG extends gi{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,r=t*2,i){super(new xn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),r=new ru(t,e,e,js,Po);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),r=new ru(t,e,e,ex,Dc);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),r=new ru(t,e,e,js,Po);r.colorSpace=qn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(r*l),f=new Xn(c,l,u);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Xn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const r in t.attributes){if(!e.hasAttribute(r))throw new Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=t.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zs);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Ao),this.getBoundingBoxAt(s,ew).applyMatrix4(Ao),e.union(ew)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ws);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(t[r].active===!1)continue;const s=t[r].geometryIndex;this.getMatrixAt(r,Ao),this.getBoundingSphereAt(s,_d).applyMatrix4(Ao),e.union(_d)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(wC),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Ao.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(Vge.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(wC),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in r.attributes){const f=t.getAttribute(c),h=r.getAttribute(c);Hge(f,h,l);const p=f.itemSize;for(let g=f.count,w=u;g<w;g++){const _=l+g;for(let v=0;v<p;v++)h.setComponent(_,v,0)}h.needsUpdate=!0,h.addUpdateRange(l*p,u*p)}if(i){const c=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let h=0;h<o.count;h++)s.setX(c+h,l+o.getX(h));for(let h=o.count,p=f;h<p;h++)s.setX(c+h,l);s.needsUpdate=!0,s.addUpdateRange(c,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],u=r[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:f,reservedIndexCount:h}=u,p=s.index,g=p.array,w=e-f;for(let _=c;_<c+h;_++)g[_]=g[_]+w;p.array.copyWithin(t,c,c+h),p.addUpdateRange(t,h),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:f}=u,h=s.attributes;for(const p in h){const g=h[p],{array:w,itemSize:_}=g;w.copyWithin(e*_,c*_,(c+f)*_),g.addUpdateRange(e*_,f*_)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new zs,o=r.index,a=r.attributes.position;for(let l=i.start,u=i.start+i.count;l<u;l++){let c=l;o&&(c=o.getX(c)),s.expandByPoint(Hv.fromBufferAttribute(a,c))}i.boundingBox=s}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new ws;this.getBoundingBoxAt(e,ew),ew.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let u=i.start,c=i.start+i.count;u<c;u++){let f=u;o&&(f=o.getX(f)),Hv.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Hv))}s.radius=Math.sqrt(l),i.boundingSphere=s}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){const t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(wC);t[t.length-1]===r.length;)r.pop(),t.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);xd(this._multiDrawCounts,i),xd(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),xd(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),xd(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),xd(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new xn,this._initializeGeometry(s));const o=this.geometry;s.index&&xd(s.index.array,o.index.array);for(const a in s.attributes)xd(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Os.material=this.material,Os.geometry.index=o.index,Os.geometry.attributes=o.attributes,Os.geometry.boundingBox===null&&(Os.geometry.boundingBox=new zs),Os.geometry.boundingSphere===null&&(Os.geometry.boundingSphere=new ws);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const u=r[a].geometryIndex,c=i[u];Os.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Os.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Os.geometry.boundingBox),this.getBoundingSphereAt(u,Os.geometry.boundingSphere),Os.raycast(e,tw);for(let f=0,h=tw.length;f<h;f++){const p=tw[f];p.object=this,p.batchId=a,t.push(p)}tw.length=0}Os.material=null,Os.geometry.index=null,Os.geometry.attributes={},Os.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,f=this._geometryInfo,h=this.perObjectFrustumCulled,p=this._indirectTexture,g=p.image.data;h&&(Ao.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),AC.setFromProjectionMatrix(Ao,e.coordinateSystem));let w=0;if(this.sortObjects){Ao.copy(this.matrixWorld).invert(),Hv.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Ao),zF.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Ao);for(let A=0,S=l.length;A<S;A++)if(l[A].visible&&l[A].active){const b=l[A].geometryIndex;this.getMatrixAt(A,Ao),this.getBoundingSphereAt(b,_d).applyMatrix4(Ao);let C=!1;if(h&&(C=!AC.intersectsSphere(_d)),!C){const L=f[b],R=zge.subVectors(_d.center,Hv).dot(zF);EC.push(L.start,L.count,R,A)}}const _=EC.list,v=this.customSort;v===null?_.sort(s.transparent?Uge:Fge):v.call(this,_,r);for(let A=0,S=_.length;A<S;A++){const b=_[A];u[w]=b.start*a,c[w]=b.count,g[w]=b.index,w++}EC.reset()}else for(let _=0,v=l.length;_<v;_++)if(l[_].visible&&l[_].active){const A=l[_].geometryIndex;let S=!1;if(h&&(this.getMatrixAt(_,Ao),this.getBoundingSphereAt(A,_d).applyMatrix4(Ao),S=!AC.intersectsSphere(_d)),!S){const b=f[A];u[w]=b.start*a,c[w]=b.count,g[w]=_,w++}}p.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class qs extends zi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const EE=new pe,bE=new pe,HF=new Kt,Gv=new by,nw=new ws,bC=new pe,GF=new pe;class Lc extends Dn{constructor(e=new xn,t=new qs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)EE.fromBufferAttribute(t,i-1),bE.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=EE.distanceTo(bE);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),nw.copy(r.boundingSphere),nw.applyMatrix4(i),nw.radius+=s,e.ray.intersectsSphere(nw)===!1)return;HF.copy(i).invert(),Gv.copy(e.ray).applyMatrix4(HF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=r.index,h=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let w=p,_=g-1;w<_;w+=u){const v=c.getX(w),A=c.getX(w+1),S=rw(this,e,Gv,l,v,A);S&&t.push(S)}if(this.isLineLoop){const w=c.getX(g-1),_=c.getX(p),v=rw(this,e,Gv,l,w,_);v&&t.push(v)}}else{const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let w=p,_=g-1;w<_;w+=u){const v=rw(this,e,Gv,l,w,w+1);v&&t.push(v)}if(this.isLineLoop){const w=rw(this,e,Gv,l,g-1,p);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function rw(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(EE.fromBufferAttribute(o,i),bE.fromBufferAttribute(o,s),t.distanceSqToSegment(EE,bE,bC,GF)>r)return;bC.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(bC);if(!(l<e.near||l>e.far))return{distance:l,point:GF.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}const qF=new pe,WF=new pe;class Sl extends Lc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)qF.fromBufferAttribute(t,i),WF.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+qF.distanceTo(WF);e.setAttribute("lineDistance",new Bt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class f3 extends Lc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Jb extends zi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const $F=new Kt,mP=new by,iw=new ws,sw=new pe;class h3 extends Dn{constructor(e=new xn,t=new Jb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),iw.copy(r.boundingSphere),iw.applyMatrix4(i),iw.radius+=s,e.ray.intersectsSphere(iw)===!1)return;$F.copy(i).invert(),mP.copy(e.ray).applyMatrix4($F);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,f=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=h,w=p;g<w;g++){const _=u.getX(g);sw.fromBufferAttribute(f,_),KF(sw,_,l,i,e,t,this)}}else{const h=Math.max(0,o.start),p=Math.min(f.count,o.start+o.count);for(let g=h,w=p;g<w;g++)sw.fromBufferAttribute(f,g),KF(sw,g,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function KF(n,e,t,r,i,s,o){const a=mP.distanceSqToPoint(n);if(a<t){const l=new pe;mP.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class mc extends Dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Gge extends Nr{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:mi,this.magFilter=s!==void 0?s:mi,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class qge extends Nr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ss,this.minFilter=ss,this.generateMipmaps=!1,this.needsUpdate=!0}}class Xb extends Nr{constructor(e,t,r,i,s,o,a,l,u,c,f,h){super(null,o,a,l,u,c,i,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Wge extends Xb{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Yo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $ge extends Xb{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Oc),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Kge extends Nr{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class d3 extends Nr{constructor(e,t,r,i,s,o,a,l,u,c=op){if(c!==op&&c!==wp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===op&&(r=Dc),r===void 0&&c===wp&&(r=xp),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ss,this.minFilter=l!==void 0?l:ss,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Tl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,p=(o-c)/h;return(i+p)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ze:new pe);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new pe,i=[],s=[],o=[],a=new pe,l=new Kt;for(let p=0;p<=e;p++){const g=p/e;i[p]=this.getTangentAt(g,new pe)}s[0]=new pe,o[0]=new pe;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(i[p-1],i[p]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(mn(i[p-1].dot(i[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,g))}o[p].crossVectors(i[p],s[p])}if(t===!0){let p=Math.acos(mn(s[0].dot(s[e]),-1,1));p/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],p*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Yb extends Tl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ze){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,p=u-this.aY;l=h*c-p*f+this.aX,u=h*f+p*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class e7 extends Yb{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function p3(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,p=(a-o)/c-(l-o)/(c+f)+(l-a)/f;h*=c,p*=c,i(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const ow=new pe,SC=new p3,TC=new p3,CC=new p3;class t7 extends Tl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new pe){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(ow.subVectors(i[0],i[1]).add(i[0]),u=ow);const f=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(ow.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=ow),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),p),w=Math.pow(f.distanceToSquared(h),p),_=Math.pow(h.distanceToSquared(c),p);w<1e-4&&(w=1),g<1e-4&&(g=w),_<1e-4&&(_=w),SC.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,g,w,_),TC.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,g,w,_),CC.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,g,w,_)}else this.curveType==="catmullrom"&&(SC.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),TC.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),CC.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return r.set(SC.calc(l),TC.calc(l),CC.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new pe().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function JF(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Jge(n,e){const t=1-n;return t*t*e}function Xge(n,e){return 2*(1-n)*n*e}function Yge(n,e){return n*n*e}function V_(n,e,t,r){return Jge(n,e)+Xge(n,t)+Yge(n,r)}function Qge(n,e){const t=1-n;return t*t*t*e}function Zge(n,e){const t=1-n;return 3*t*t*n*e}function eye(n,e){return 3*(1-n)*n*n*e}function tye(n,e){return n*n*n*e}function z_(n,e,t,r,i){return Qge(n,e)+Zge(n,t)+eye(n,r)+tye(n,i)}class m3 extends Tl{constructor(e=new Ze,t=new Ze,r=new Ze,i=new Ze){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(z_(e,i.x,s.x,o.x,a.x),z_(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class n7 extends Tl{constructor(e=new pe,t=new pe,r=new pe,i=new pe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new pe){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(z_(e,i.x,s.x,o.x,a.x),z_(e,i.y,s.y,o.y,a.y),z_(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class g3 extends Tl{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r7 extends Tl{constructor(e=new pe,t=new pe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new pe){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y3 extends Tl{constructor(e=new Ze,t=new Ze,r=new Ze){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ze){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(V_(e,i.x,s.x,o.x),V_(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v3 extends Tl{constructor(e=new pe,t=new pe,r=new pe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new pe){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(V_(e,i.x,s.x,o.x),V_(e,i.y,s.y,o.y),V_(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _3 extends Tl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ze){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(JF(a,l.x,u.x,c.x,f.x),JF(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ze().fromArray(i))}return this}}var SE=Object.freeze({__proto__:null,ArcCurve:e7,CatmullRomCurve3:t7,CubicBezierCurve:m3,CubicBezierCurve3:n7,EllipseCurve:Yb,LineCurve:g3,LineCurve3:r7,QuadraticBezierCurve:y3,QuadraticBezierCurve3:v3,SplineCurve:_3});class i7 extends Tl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new SE[r](t,e))}return this}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new SE[i.type]().fromJSON(i))}return this}}class g0 extends i7{constructor(e){super(),this.type="Path",this.currentPoint=new Ze,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new g3(this.currentPoint.clone(),new Ze(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new y3(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new m3(this.currentPoint.clone(),new Ze(e,t),new Ze(r,i),new Ze(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new _3(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new Yb(e,t,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ax extends xn{constructor(e=[new Ze(0,-.5),new Ze(.5,0),new Ze(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=mn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new pe,h=new Ze,p=new pe,g=new pe,w=new pe;let _=0,v=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:_=e[A+1].x-e[A].x,v=e[A+1].y-e[A].y,p.x=v*1,p.y=-_,p.z=v*0,w.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:_=e[A+1].x-e[A].x,v=e[A+1].y-e[A].y,p.x=v*1,p.y=-_,p.z=v*0,g.copy(p),p.x+=w.x,p.y+=w.y,p.z+=w.z,p.normalize(),l.push(p.x,p.y,p.z),w.copy(g)}for(let A=0;A<=t;A++){const S=r+A*c*i,b=Math.sin(S),C=Math.cos(S);for(let L=0;L<=e.length-1;L++){f.x=e[L].x*b,f.y=e[L].y,f.z=e[L].x*C,o.push(f.x,f.y,f.z),h.x=A/t,h.y=L/(e.length-1),a.push(h.x,h.y);const R=l[3*L+0]*b,k=l[3*L+1],O=l[3*L+0]*C;u.push(R,k,O)}}for(let A=0;A<t;A++)for(let S=0;S<e.length-1;S++){const b=S+A*e.length,C=b,L=b+e.length,R=b+e.length+1,k=b+1;s.push(C,L,k),s.push(R,k,L)}this.setIndex(s),this.setAttribute("position",new Bt(o,3)),this.setAttribute("uv",new Bt(a,2)),this.setAttribute("normal",new Bt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ax(e.points,e.segments,e.phiStart,e.phiLength)}}class Qb extends ax{constructor(e=1,t=1,r=4,i=8){const s=new g0;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Qb(e.radius,e.length,e.capSegments,e.radialSegments)}}class Zb extends xn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new pe,c=new Ze;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const p=r+f/t*i;u.x=e*Math.cos(p),u.y=e*Math.sin(p),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Bt(o,3)),this.setAttribute("normal",new Bt(a,3)),this.setAttribute("uv",new Bt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Sy extends xn{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],h=[],p=[];let g=0;const w=[],_=r/2;let v=0;A(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(c),this.setAttribute("position",new Bt(f,3)),this.setAttribute("normal",new Bt(h,3)),this.setAttribute("uv",new Bt(p,2));function A(){const b=new pe,C=new pe;let L=0;const R=(t-e)/r;for(let k=0;k<=s;k++){const O=[],M=k/s,D=M*(t-e)+e;for(let U=0;U<=i;U++){const F=U/i,$=F*l+a,Z=Math.sin($),se=Math.cos($);C.x=D*Z,C.y=-M*r+_,C.z=D*se,f.push(C.x,C.y,C.z),b.set(Z,R,se).normalize(),h.push(b.x,b.y,b.z),p.push(F,1-M),O.push(g++)}w.push(O)}for(let k=0;k<i;k++)for(let O=0;O<s;O++){const M=w[O][k],D=w[O+1][k],U=w[O+1][k+1],F=w[O][k+1];(e>0||O!==0)&&(c.push(M,D,F),L+=3),(t>0||O!==s-1)&&(c.push(D,U,F),L+=3)}u.addGroup(v,L,0),v+=L}function S(b){const C=g,L=new Ze,R=new pe;let k=0;const O=b===!0?e:t,M=b===!0?1:-1;for(let U=1;U<=i;U++)f.push(0,_*M,0),h.push(0,M,0),p.push(.5,.5),g++;const D=g;for(let U=0;U<=i;U++){const $=U/i*l+a,Z=Math.cos($),se=Math.sin($);R.x=O*se,R.y=_*M,R.z=O*Z,f.push(R.x,R.y,R.z),h.push(0,M,0),L.x=Z*.5+.5,L.y=se*.5*M+.5,p.push(L.x,L.y),g++}for(let U=0;U<i;U++){const F=C+U,$=D+U;b===!0?c.push($,$+1,F):c.push($+1,$,F),k+=3}u.addGroup(v,k,b===!0?1:2),v+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sy(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class eS extends Sy{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new eS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ch extends xn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Bt(s,3)),this.setAttribute("normal",new Bt(s.slice(),3)),this.setAttribute("uv",new Bt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const S=new pe,b=new pe,C=new pe;for(let L=0;L<t.length;L+=3)p(t[L+0],S),p(t[L+1],b),p(t[L+2],C),l(S,b,C,A)}function l(A,S,b,C){const L=C+1,R=[];for(let k=0;k<=L;k++){R[k]=[];const O=A.clone().lerp(b,k/L),M=S.clone().lerp(b,k/L),D=L-k;for(let U=0;U<=D;U++)U===0&&k===L?R[k][U]=O:R[k][U]=O.clone().lerp(M,U/D)}for(let k=0;k<L;k++)for(let O=0;O<2*(L-k)-1;O++){const M=Math.floor(O/2);O%2===0?(h(R[k][M+1]),h(R[k+1][M]),h(R[k][M])):(h(R[k][M+1]),h(R[k+1][M+1]),h(R[k+1][M]))}}function u(A){const S=new pe;for(let b=0;b<s.length;b+=3)S.x=s[b+0],S.y=s[b+1],S.z=s[b+2],S.normalize().multiplyScalar(A),s[b+0]=S.x,s[b+1]=S.y,s[b+2]=S.z}function c(){const A=new pe;for(let S=0;S<s.length;S+=3){A.x=s[S+0],A.y=s[S+1],A.z=s[S+2];const b=_(A)/2/Math.PI+.5,C=v(A)/Math.PI+.5;o.push(b,1-C)}g(),f()}function f(){for(let A=0;A<o.length;A+=6){const S=o[A+0],b=o[A+2],C=o[A+4],L=Math.max(S,b,C),R=Math.min(S,b,C);L>.9&&R<.1&&(S<.2&&(o[A+0]+=1),b<.2&&(o[A+2]+=1),C<.2&&(o[A+4]+=1))}}function h(A){s.push(A.x,A.y,A.z)}function p(A,S){const b=A*3;S.x=e[b+0],S.y=e[b+1],S.z=e[b+2]}function g(){const A=new pe,S=new pe,b=new pe,C=new pe,L=new Ze,R=new Ze,k=new Ze;for(let O=0,M=0;O<s.length;O+=9,M+=6){A.set(s[O+0],s[O+1],s[O+2]),S.set(s[O+3],s[O+4],s[O+5]),b.set(s[O+6],s[O+7],s[O+8]),L.set(o[M+0],o[M+1]),R.set(o[M+2],o[M+3]),k.set(o[M+4],o[M+5]),C.copy(A).add(S).add(b).divideScalar(3);const D=_(C);w(L,M+0,A,D),w(R,M+2,S,D),w(k,M+4,b,D)}}function w(A,S,b,C){C<0&&A.x===1&&(o[S]=A.x-1),b.x===0&&b.z===0&&(o[S]=C/2/Math.PI+.5)}function _(A){return Math.atan2(A.z,-A.x)}function v(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ch(e.vertices,e.indices,e.radius,e.details)}}class tS extends Ch{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tS(e.radius,e.detail)}}const aw=new pe,lw=new pe,MC=new pe,uw=new Ro;class s7 extends xn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(ap*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},p=[];for(let g=0;g<l;g+=3){o?(u[0]=o.getX(g),u[1]=o.getX(g+1),u[2]=o.getX(g+2)):(u[0]=g,u[1]=g+1,u[2]=g+2);const{a:w,b:_,c:v}=uw;if(w.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),v.fromBufferAttribute(a,u[2]),uw.getNormal(MC),f[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,f[1]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,f[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let A=0;A<3;A++){const S=(A+1)%3,b=f[A],C=f[S],L=uw[c[A]],R=uw[c[S]],k=`${b}_${C}`,O=`${C}_${b}`;O in h&&h[O]?(MC.dot(h[O].normal)<=s&&(p.push(L.x,L.y,L.z),p.push(R.x,R.y,R.z)),h[O]=null):k in h||(h[k]={index0:u[A],index1:u[S],normal:MC.clone()})}}for(const g in h)if(h[g]){const{index0:w,index1:_}=h[g];aw.fromBufferAttribute(a,w),lw.fromBufferAttribute(a,_),p.push(aw.x,aw.y,aw.z),p.push(lw.x,lw.y,lw.z)}this.setAttribute("position",new Bt(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class up extends g0{constructor(e){super(e),this.uuid=ea(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new g0().fromJSON(i))}return this}}const nye={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=o7(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,h,p;if(r&&(s=aye(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let g=t;g<i;g+=t)f=n[g],h=n[g+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);p=Math.max(u-a,c-l),p=p!==0?32767/p:0}return y0(s,o,t,a,l,p,0),o}};function o7(n,e,t,r,i){let s,o;if(i===vye(n,e,t,r)>0)for(s=e;s<t;s+=r)o=XF(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=XF(s,n[s],n[s+1],o);return o&&nS(o,o.next)&&(_0(o),o=o.next),o}function bp(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(nS(t,t.next)||qr(t.prev,t,t.next)===0)){if(_0(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function y0(n,e,t,r,i,s,o){if(!n)return;!o&&s&&hye(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?iye(n,r,i,s):rye(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),_0(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=sye(bp(n),e,t),y0(n,e,t,r,i,s,2)):o===2&&oye(n,e,t,r,i,s):y0(bp(n),e,t,r,i,s,1);break}}}function rye(n){const e=n.prev,t=n,r=n.next;if(qr(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,h=i>s?i>o?i:o:s>o?s:o,p=a>l?a>u?a:u:l>u?l:u;let g=r.next;for(;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=f&&g.y<=p&&wg(i,a,s,l,o,u,g.x,g.y)&&qr(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function iye(n,e,t,r){const i=n.prev,s=n,o=n.next;if(qr(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,f=s.y,h=o.y,p=a<l?a<u?a:u:l<u?l:u,g=c<f?c<h?c:h:f<h?f:h,w=a>l?a>u?a:u:l>u?l:u,_=c>f?c>h?c:h:f>h?f:h,v=gP(p,g,e,t,r),A=gP(w,_,e,t,r);let S=n.prevZ,b=n.nextZ;for(;S&&S.z>=v&&b&&b.z<=A;){if(S.x>=p&&S.x<=w&&S.y>=g&&S.y<=_&&S!==i&&S!==o&&wg(a,c,l,f,u,h,S.x,S.y)&&qr(S.prev,S,S.next)>=0||(S=S.prevZ,b.x>=p&&b.x<=w&&b.y>=g&&b.y<=_&&b!==i&&b!==o&&wg(a,c,l,f,u,h,b.x,b.y)&&qr(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;S&&S.z>=v;){if(S.x>=p&&S.x<=w&&S.y>=g&&S.y<=_&&S!==i&&S!==o&&wg(a,c,l,f,u,h,S.x,S.y)&&qr(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;b&&b.z<=A;){if(b.x>=p&&b.x<=w&&b.y>=g&&b.y<=_&&b!==i&&b!==o&&wg(a,c,l,f,u,h,b.x,b.y)&&qr(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function sye(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!nS(i,s)&&a7(i,r,r.next,s)&&v0(i,s)&&v0(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),_0(r),_0(r.next),r=n=s),r=r.next}while(r!==n);return bp(r)}function oye(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&mye(o,a)){let l=l7(o,a);o=bp(o,o.next),l=bp(l,l.next),y0(o,e,t,r,i,s,0),y0(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function aye(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=o7(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(pye(u));for(i.sort(lye),s=0;s<i.length;s++)t=uye(i[s],t);return t}function lye(n,e){return n.x-e.x}function uye(n,e){const t=cye(n,e);if(!t)return e;const r=l7(t,n);return bp(r,r.next),bp(t,t.next)}function cye(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>r&&(r=h,i=t.x<t.next.x?t:t.next,h===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,f;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&wg(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),v0(t,n)&&(f<c||f===c&&(t.x>i.x||t.x===i.x&&fye(i,t)))&&(i=t,c=f)),t=t.next;while(t!==a);return i}function fye(n,e){return qr(n.prev,n,e.prev)<0&&qr(e.next,n,n.next)<0}function hye(n,e,t,r){let i=n;do i.z===0&&(i.z=gP(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,dye(i)}function dye(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function gP(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function pye(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function wg(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function mye(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!gye(n,e)&&(v0(n,e)&&v0(e,n)&&yye(n,e)&&(qr(n.prev,n,e.prev)||qr(n,e.prev,e))||nS(n,e)&&qr(n.prev,n,n.next)>0&&qr(e.prev,e,e.next)>0)}function qr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function nS(n,e){return n.x===e.x&&n.y===e.y}function a7(n,e,t,r){const i=fw(qr(n,e,t)),s=fw(qr(n,e,r)),o=fw(qr(t,r,n)),a=fw(qr(t,r,e));return!!(i!==s&&o!==a||i===0&&cw(n,t,e)||s===0&&cw(n,r,e)||o===0&&cw(t,n,r)||a===0&&cw(t,e,r))}function cw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fw(n){return n>0?1:n<0?-1:0}function gye(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&a7(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function v0(n,e){return qr(n.prev,n,n.next)<0?qr(n,e,n.next)>=0&&qr(n,n.prev,e)>=0:qr(n,e,n.prev)<0||qr(n,n.next,e)<0}function yye(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function l7(n,e){const t=new yP(n.i,n.x,n.y),r=new yP(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function XF(n,e,t,r){const i=new yP(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function _0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function yP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vye(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class iu{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return iu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];YF(e),QF(r,e);let o=e.length;t.forEach(YF);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,QF(r,t[l]);const a=nye.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function YF(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function QF(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class rS extends xn{constructor(e=new up([new Ze(.5,.5),new Ze(-.5,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Bt(i,3)),this.setAttribute("uv",new Bt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:p-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:_ye;let S,b=!1,C,L,R,k;v&&(S=v.getSpacedPoints(c),b=!0,h=!1,C=v.computeFrenetFrames(c,!1),L=new pe,R=new pe,k=new pe),h||(_=0,p=0,g=0,w=0);const O=a.extractPoints(u);let M=O.shape;const D=O.holes;if(!iu.isClockWise(M)){M=M.reverse();for(let De=0,Be=D.length;De<Be;De++){const he=D[De];iu.isClockWise(he)&&(D[De]=he.reverse())}}const F=iu.triangulateShape(M,D),$=M;for(let De=0,Be=D.length;De<Be;De++){const he=D[De];M=M.concat(he)}function Z(De,Be,he){return Be||console.error("THREE.ExtrudeGeometry: vec does not exist"),De.clone().addScaledVector(Be,he)}const se=M.length,ce=F.length;function Q(De,Be,he){let rt,Je,nt;const we=De.x-Be.x,Pe=De.y-Be.y,Le=he.x-De.x,ie=he.y-De.y,q=we*we+Pe*Pe,me=we*ie-Pe*Le;if(Math.abs(me)>Number.EPSILON){const de=Math.sqrt(q),ve=Math.sqrt(Le*Le+ie*ie),Ae=Be.x-Pe/de,He=Be.y+we/de,qe=he.x-ie/ve,lt=he.y+Le/ve,yt=((qe-Ae)*ie-(lt-He)*Le)/(we*ie-Pe*Le);rt=Ae+we*yt-De.x,Je=He+Pe*yt-De.y;const Ye=rt*rt+Je*Je;if(Ye<=2)return new Ze(rt,Je);nt=Math.sqrt(Ye/2)}else{let de=!1;we>Number.EPSILON?Le>Number.EPSILON&&(de=!0):we<-Number.EPSILON?Le<-Number.EPSILON&&(de=!0):Math.sign(Pe)===Math.sign(ie)&&(de=!0),de?(rt=-Pe,Je=we,nt=Math.sqrt(q)):(rt=we,Je=Pe,nt=Math.sqrt(q/2))}return new Ze(rt/nt,Je/nt)}const ee=[];for(let De=0,Be=$.length,he=Be-1,rt=De+1;De<Be;De++,he++,rt++)he===Be&&(he=0),rt===Be&&(rt=0),ee[De]=Q($[De],$[he],$[rt]);const Y=[];let V,X=ee.concat();for(let De=0,Be=D.length;De<Be;De++){const he=D[De];V=[];for(let rt=0,Je=he.length,nt=Je-1,we=rt+1;rt<Je;rt++,nt++,we++)nt===Je&&(nt=0),we===Je&&(we=0),V[rt]=Q(he[rt],he[nt],he[we]);Y.push(V),X=X.concat(V)}for(let De=0;De<_;De++){const Be=De/_,he=p*Math.cos(Be*Math.PI/2),rt=g*Math.sin(Be*Math.PI/2)+w;for(let Je=0,nt=$.length;Je<nt;Je++){const we=Z($[Je],ee[Je],rt);ue(we.x,we.y,-he)}for(let Je=0,nt=D.length;Je<nt;Je++){const we=D[Je];V=Y[Je];for(let Pe=0,Le=we.length;Pe<Le;Pe++){const ie=Z(we[Pe],V[Pe],rt);ue(ie.x,ie.y,-he)}}}const re=g+w;for(let De=0;De<se;De++){const Be=h?Z(M[De],X[De],re):M[De];b?(R.copy(C.normals[0]).multiplyScalar(Be.x),L.copy(C.binormals[0]).multiplyScalar(Be.y),k.copy(S[0]).add(R).add(L),ue(k.x,k.y,k.z)):ue(Be.x,Be.y,0)}for(let De=1;De<=c;De++)for(let Be=0;Be<se;Be++){const he=h?Z(M[Be],X[Be],re):M[Be];b?(R.copy(C.normals[De]).multiplyScalar(he.x),L.copy(C.binormals[De]).multiplyScalar(he.y),k.copy(S[De]).add(R).add(L),ue(k.x,k.y,k.z)):ue(he.x,he.y,f/c*De)}for(let De=_-1;De>=0;De--){const Be=De/_,he=p*Math.cos(Be*Math.PI/2),rt=g*Math.sin(Be*Math.PI/2)+w;for(let Je=0,nt=$.length;Je<nt;Je++){const we=Z($[Je],ee[Je],rt);ue(we.x,we.y,f+he)}for(let Je=0,nt=D.length;Je<nt;Je++){const we=D[Je];V=Y[Je];for(let Pe=0,Le=we.length;Pe<Le;Pe++){const ie=Z(we[Pe],V[Pe],rt);b?ue(ie.x,ie.y+S[c-1].y,S[c-1].x+he):ue(ie.x,ie.y,f+he)}}}oe(),fe();function oe(){const De=i.length/3;if(h){let Be=0,he=se*Be;for(let rt=0;rt<ce;rt++){const Je=F[rt];ye(Je[2]+he,Je[1]+he,Je[0]+he)}Be=c+_*2,he=se*Be;for(let rt=0;rt<ce;rt++){const Je=F[rt];ye(Je[0]+he,Je[1]+he,Je[2]+he)}}else{for(let Be=0;Be<ce;Be++){const he=F[Be];ye(he[2],he[1],he[0])}for(let Be=0;Be<ce;Be++){const he=F[Be];ye(he[0]+se*c,he[1]+se*c,he[2]+se*c)}}r.addGroup(De,i.length/3-De,0)}function fe(){const De=i.length/3;let Be=0;te($,Be),Be+=$.length;for(let he=0,rt=D.length;he<rt;he++){const Je=D[he];te(Je,Be),Be+=Je.length}r.addGroup(De,i.length/3-De,1)}function te(De,Be){let he=De.length;for(;--he>=0;){const rt=he;let Je=he-1;Je<0&&(Je=De.length-1);for(let nt=0,we=c+_*2;nt<we;nt++){const Pe=se*nt,Le=se*(nt+1),ie=Be+rt+Pe,q=Be+Je+Pe,me=Be+Je+Le,de=Be+rt+Le;xe(ie,q,me,de)}}}function ue(De,Be,he){l.push(De),l.push(Be),l.push(he)}function ye(De,Be,he){Te(De),Te(Be),Te(he);const rt=i.length/3,Je=A.generateTopUV(r,i,rt-3,rt-2,rt-1);$e(Je[0]),$e(Je[1]),$e(Je[2])}function xe(De,Be,he,rt){Te(De),Te(Be),Te(rt),Te(Be),Te(he),Te(rt);const Je=i.length/3,nt=A.generateSideWallUV(r,i,Je-6,Je-3,Je-2,Je-1);$e(nt[0]),$e(nt[1]),$e(nt[3]),$e(nt[1]),$e(nt[2]),$e(nt[3])}function Te(De){i.push(l[De*3+0]),i.push(l[De*3+1]),i.push(l[De*3+2])}function $e(De){s.push(De.x),s.push(De.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return xye(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new SE[i.type]().fromJSON(i)),new rS(r,e.options)}}const _ye={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Ze(s,o),new Ze(a,l),new Ze(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],h=e[i*3],p=e[i*3+1],g=e[i*3+2],w=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ze(o,1-l),new Ze(u,1-f),new Ze(h,1-g),new Ze(w,1-v)]:[new Ze(a,1-l),new Ze(c,1-f),new Ze(p,1-g),new Ze(_,1-v)]}};function xye(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class iS extends Ch{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new iS(e.radius,e.detail)}}class lx extends Ch{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lx(e.radius,e.detail)}}class Ty extends xn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,h=t/l,p=[],g=[],w=[],_=[];for(let v=0;v<c;v++){const A=v*h-o;for(let S=0;S<u;S++){const b=S*f-s;g.push(b,-A,0),w.push(0,0,1),_.push(S/a),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let A=0;A<a;A++){const S=A+u*v,b=A+u*(v+1),C=A+1+u*(v+1),L=A+1+u*v;p.push(S,b,L),p.push(b,C,L)}this.setIndex(p),this.setAttribute("position",new Bt(g,3)),this.setAttribute("normal",new Bt(w,3)),this.setAttribute("uv",new Bt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ty(e.width,e.height,e.widthSegments,e.heightSegments)}}class sS extends xn{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let f=e;const h=(t-e)/i,p=new pe,g=new Ze;for(let w=0;w<=i;w++){for(let _=0;_<=r;_++){const v=s+_/r*o;p.x=f*Math.cos(v),p.y=f*Math.sin(v),l.push(p.x,p.y,p.z),u.push(0,0,1),g.x=(p.x/t+1)/2,g.y=(p.y/t+1)/2,c.push(g.x,g.y)}f+=h}for(let w=0;w<i;w++){const _=w*(r+1);for(let v=0;v<r;v++){const A=v+_,S=A,b=A+r+1,C=A+r+2,L=A+1;a.push(S,b,L),a.push(b,C,L)}}this.setIndex(a),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class oS extends xn{constructor(e=new up([new Ze(0,.5),new Ze(-.5,-.5),new Ze(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Bt(i,3)),this.setAttribute("normal",new Bt(s,3)),this.setAttribute("uv",new Bt(o,2));function u(c){const f=i.length/3,h=c.extractPoints(t);let p=h.shape;const g=h.holes;iu.isClockWise(p)===!1&&(p=p.reverse());for(let _=0,v=g.length;_<v;_++){const A=g[_];iu.isClockWise(A)===!0&&(g[_]=A.reverse())}const w=iu.triangulateShape(p,g);for(let _=0,v=g.length;_<v;_++){const A=g[_];p=p.concat(A)}for(let _=0,v=p.length;_<v;_++){const A=p[_];i.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let _=0,v=w.length;_<v;_++){const A=w[_],S=A[0]+f,b=A[1]+f,C=A[2]+f;r.push(S,b,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return wye(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new oS(r,e.curveSegments)}}function wye(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class ux extends xn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new pe,h=new pe,p=[],g=[],w=[],_=[];for(let v=0;v<=r;v++){const A=[],S=v/r;let b=0;v===0&&o===0?b=.5/t:v===r&&l===Math.PI&&(b=-.5/t);for(let C=0;C<=t;C++){const L=C/t;f.x=-e*Math.cos(i+L*s)*Math.sin(o+S*a),f.y=e*Math.cos(o+S*a),f.z=e*Math.sin(i+L*s)*Math.sin(o+S*a),g.push(f.x,f.y,f.z),h.copy(f).normalize(),w.push(h.x,h.y,h.z),_.push(L+b,1-S),A.push(u++)}c.push(A)}for(let v=0;v<r;v++)for(let A=0;A<t;A++){const S=c[v][A+1],b=c[v][A],C=c[v+1][A],L=c[v+1][A+1];(v!==0||o>0)&&p.push(S,b,L),(v!==r-1||l<Math.PI)&&p.push(b,C,L)}this.setIndex(p),this.setAttribute("position",new Bt(g,3)),this.setAttribute("normal",new Bt(w,3)),this.setAttribute("uv",new Bt(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ux(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class aS extends Ch{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aS(e.radius,e.detail)}}class lS extends xn{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new pe,f=new pe,h=new pe;for(let p=0;p<=r;p++)for(let g=0;g<=i;g++){const w=g/i*s,_=p/r*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(w),f.y=(e+t*Math.cos(_))*Math.sin(w),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),c.x=e*Math.cos(w),c.y=e*Math.sin(w),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(g/i),u.push(p/r)}for(let p=1;p<=r;p++)for(let g=1;g<=i;g++){const w=(i+1)*p+g-1,_=(i+1)*(p-1)+g-1,v=(i+1)*(p-1)+g,A=(i+1)*p+g;o.push(w,_,A),o.push(_,v,A)}this.setIndex(o),this.setAttribute("position",new Bt(a,3)),this.setAttribute("normal",new Bt(l,3)),this.setAttribute("uv",new Bt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class uS extends xn{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],f=new pe,h=new pe,p=new pe,g=new pe,w=new pe,_=new pe,v=new pe;for(let S=0;S<=r;++S){const b=S/r*s*Math.PI*2;A(b,s,o,e,p),A(b+.01,s,o,e,g),_.subVectors(g,p),v.addVectors(g,p),w.crossVectors(_,v),v.crossVectors(w,_),w.normalize(),v.normalize();for(let C=0;C<=i;++C){const L=C/i*Math.PI*2,R=-t*Math.cos(L),k=t*Math.sin(L);f.x=p.x+(R*v.x+k*w.x),f.y=p.y+(R*v.y+k*w.y),f.z=p.z+(R*v.z+k*w.z),l.push(f.x,f.y,f.z),h.subVectors(f,p).normalize(),u.push(h.x,h.y,h.z),c.push(S/r),c.push(C/i)}}for(let S=1;S<=r;S++)for(let b=1;b<=i;b++){const C=(i+1)*(S-1)+(b-1),L=(i+1)*S+(b-1),R=(i+1)*S+b,k=(i+1)*(S-1)+b;a.push(C,L,k),a.push(L,R,k)}this.setIndex(a),this.setAttribute("position",new Bt(l,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(c,2));function A(S,b,C,L,R){const k=Math.cos(S),O=Math.sin(S),M=C/b*S,D=Math.cos(M);R.x=L*(2+D)*.5*k,R.y=L*(2+D)*O*.5,R.z=L*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class cS extends xn{constructor(e=new v3(new pe(-1,-1,0),new pe(-1,1,0),new pe(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new pe,l=new pe,u=new Ze;let c=new pe;const f=[],h=[],p=[],g=[];w(),this.setIndex(g),this.setAttribute("position",new Bt(f,3)),this.setAttribute("normal",new Bt(h,3)),this.setAttribute("uv",new Bt(p,2));function w(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),A(),v()}function _(S){c=e.getPointAt(S/t,c);const b=o.normals[S],C=o.binormals[S];for(let L=0;L<=i;L++){const R=L/i*Math.PI*2,k=Math.sin(R),O=-Math.cos(R);l.x=O*b.x+k*C.x,l.y=O*b.y+k*C.y,l.z=O*b.z+k*C.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let S=1;S<=t;S++)for(let b=1;b<=i;b++){const C=(i+1)*(S-1)+(b-1),L=(i+1)*S+(b-1),R=(i+1)*S+b,k=(i+1)*(S-1)+b;g.push(C,L,k),g.push(L,R,k)}}function A(){for(let S=0;S<=t;S++)for(let b=0;b<=i;b++)u.x=S/t,u.y=b/i,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new cS(new SE[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class u7 extends xn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new pe,s=new pe;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,p=f.count;for(let g=h,w=h+p;g<w;g+=3)for(let _=0;_<3;_++){const v=a.getX(g+_),A=a.getX(g+(_+1)%3);i.fromBufferAttribute(o,v),s.fromBufferAttribute(o,A),ZF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),ZF(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Bt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ZF(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var eU=Object.freeze({__proto__:null,BoxGeometry:Gp,CapsuleGeometry:Qb,CircleGeometry:Zb,ConeGeometry:eS,CylinderGeometry:Sy,DodecahedronGeometry:tS,EdgesGeometry:s7,ExtrudeGeometry:rS,IcosahedronGeometry:iS,LatheGeometry:ax,OctahedronGeometry:lx,PlaneGeometry:Ty,PolyhedronGeometry:Ch,RingGeometry:sS,ShapeGeometry:oS,SphereGeometry:ux,TetrahedronGeometry:aS,TorusGeometry:lS,TorusKnotGeometry:uS,TubeGeometry:cS,WireframeGeometry:u7});class c7 extends zi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new At(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class f7 extends Al{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class cx extends zi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Pa extends cx{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ze(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class h7 extends zi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new At(16777215),this.specular=new At(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.combine=Z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class d7 extends zi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new At(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class p7 extends zi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class m7 extends zi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new na,this.combine=Z0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class x3 extends zi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=IG,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class w3 extends zi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class g7 extends zi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new At(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Th,this.normalScale=new Ze(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class y7 extends qs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function v7(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function _7(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function vP(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function A3(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function Aye(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],h=[];for(let p=0;p<u.times.length;++p){const g=u.times[p]*i;if(!(g<t||g>=r)){f.push(u.times[p]);for(let w=0;w<c;++w)h.push(u.values[p*c+w])}}f.length!==0&&(u.times=Qd(f,u.times.constructor),u.values=Qd(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Eye(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const p=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const g=a.times.length-1;let w;if(s<=a.times[0]){const v=c,A=f-c;w=a.values.slice(v,A)}else if(s>=a.times[g]){const v=g*f+c,A=v+f-c;w=a.values.slice(v,A)}else{const v=a.createInterpolant(),A=c,S=f-c;v.evaluate(s),w=v.resultBuffer.slice(A,S)}l==="quaternion"&&new Vs().fromArray(w).normalize().conjugate().toArray(w);const _=u.times.length;for(let v=0;v<_;++v){const A=v*p+h;if(l==="quaternion")Vs.multiplyQuaternionsFlat(u.values,A,w,0,u.values,A);else{const S=p-h*2;for(let b=0;b<S;++b)u.values[A+b]-=w[b]}}}return n.blendMode=t3,n}const bye={convertArray:Qd,isTypedArray:v7,getKeyframeOrder:_7,sortedArray:vP,flattenJSON:A3,subclip:Aye,makeClipAdditive:Eye};class Cy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class x7 extends Cy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Jd,endingEnd:Jd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Xd:s=e,a=2*t-r;break;case f0:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Xd:o=e,l=2*r-t;break;case f0:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,p=this._weightNext,g=(r-t)/(i-t),w=g*g,_=w*g,v=-h*_+2*h*w-h*g,A=(1+h)*_+(-1.5-2*h)*w+(-.5+h)*g+1,S=(-1-p)*_+(1.5+p)*w+.5*g,b=p*_-p*w;for(let C=0;C!==a;++C)s[C]=v*o[c+C]+A*o[u+C]+S*o[l+C]+b*o[f+C];return s}}class E3 extends Cy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),f=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*f+o[l+h]*c;return s}}class w7 extends Cy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Cl{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qd(t,this.TimeBufferType),this.values=Qd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Qd(e.times,Array),values:Qd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new w7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new E3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new x7(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Yg:t=this.InterpolantFactoryMethodDiscrete;break;case Qg:t=this.InterpolantFactoryMethodLinear;break;case Qw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Yg;case this.InterpolantFactoryMethodLinear:return Qg;case this.InterpolantFactoryMethodSmooth:return Qw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&v7(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===Qw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,h=f-r,p=f+r;for(let g=0;g!==r;++g){const w=t[f+g];if(w!==t[h+g]||w!==t[p+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,h=o*r;for(let p=0;p!==r;++p)t[h+p]=t[f+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Cl.prototype.TimeBufferType=Float32Array;Cl.prototype.ValueBufferType=Float32Array;Cl.prototype.DefaultInterpolation=Qg;class qp extends Cl{constructor(e,t,r){super(e,t,r)}}qp.prototype.ValueTypeName="bool";qp.prototype.ValueBufferType=Array;qp.prototype.DefaultInterpolation=Yg;qp.prototype.InterpolantFactoryMethodLinear=void 0;qp.prototype.InterpolantFactoryMethodSmooth=void 0;class b3 extends Cl{}b3.prototype.ValueTypeName="color";class Sp extends Cl{}Sp.prototype.ValueTypeName="number";class A7 extends Cy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Vs.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Tp extends Cl{InterpolantFactoryMethodLinear(e){return new A7(this.times,this.values,this.getValueSize(),e)}}Tp.prototype.ValueTypeName="quaternion";Tp.prototype.InterpolantFactoryMethodSmooth=void 0;class Wp extends Cl{constructor(e,t,r){super(e,t,r)}}Wp.prototype.ValueTypeName="string";Wp.prototype.ValueBufferType=Array;Wp.prototype.DefaultInterpolation=Yg;Wp.prototype.InterpolantFactoryMethodLinear=void 0;Wp.prototype.InterpolantFactoryMethodSmooth=void 0;class Cp extends Cl{}Cp.prototype.ValueTypeName="vector";class ty{constructor(e="",t=-1,r=[],i=Hb){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ea(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Tye(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Cl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=_7(l);l=vP(l,1,c),u=vP(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Sp(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,p,g,w){if(p.length!==0){const _=[],v=[];A3(p,_,v,g),_.length!==0&&w.push(new f(h,_,v))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const p={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let w=0;w<h[g].morphTargets.length;w++)p[h[g].morphTargets[w]]=-1;for(const w in p){const _=[],v=[];for(let A=0;A!==h[g].morphTargets.length;++A){const S=h[g];_.push(S.time),v.push(S.morphTarget===w?1:0)}i.push(new Sp(".morphTargetInfluence["+w+"]",_,v))}l=p.length*o}else{const p=".bones["+t[f].name+"]";r(Cp,p+".position",h,"pos",i),r(Tp,p+".quaternion",h,"rot",i),r(Cp,p+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Sye(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sp;case"vector":case"vector2":case"vector3":case"vector4":return Cp;case"color":return b3;case"quaternion":return Tp;case"bool":case"boolean":return qp;case"string":return Wp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Tye(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Sye(n.type);if(n.times===void 0){const t=[],r=[];A3(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const gc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class S3{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],g=u[f+1];if(p.global&&(p.lastIndex=0),p.test(c))return g}return null}}}const E7=new S3;class Ws{constructor(e){this.manager=e!==void 0?e:E7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ws.DEFAULT_MATERIAL_NAME="__DEFAULT";const ic={};class Cye extends Error{constructor(e,t){super(e),this.response=t}}class ra extends Ws{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=gc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ic[e]!==void 0){ic[e].push({onLoad:t,onProgress:r,onError:i});return}ic[e]=[],ic[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=ic[e],f=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),p=h?parseInt(h):0,g=p!==0;let w=0;const _=new ReadableStream({start(v){A();function A(){f.read().then(({done:S,value:b})=>{if(S)v.close();else{w+=b.byteLength;const C=new ProgressEvent("progress",{lengthComputable:g,loaded:w,total:p});for(let L=0,R=c.length;L<R;L++){const k=c[L];k.onProgress&&k.onProgress(C)}v.enqueue(b),A()}},S=>{v.error(S)})}}});return new Response(_)}else throw new Cye(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(h);return u.arrayBuffer().then(g=>p.decode(g))}}}).then(u=>{gc.add(e,u);const c=ic[e];delete ic[e];for(let f=0,h=c.length;f<h;f++){const p=c[f];p.onLoad&&p.onLoad(u)}}).catch(u=>{const c=ic[e];if(c===void 0)throw this.manager.itemError(e),u;delete ic[e];for(let f=0,h=c.length;f<h;f++){const p=c[f];p.onError&&p.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Mye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ra(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=ty.parse(e[r]);t.push(i)}return t}}class Rye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new Xb,l=new ra(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(h){const p=s.parse(h,!0);o[f]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},u+=1,u===6&&(p.mipmapCount===1&&(a.minFilter=mi),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)c(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let g=0;g<p;g++){o[g]={mipmaps:[]};for(let w=0;w<h.mipmapCount;w++)o[g].mipmaps.push(h.mipmaps[g*h.mipmapCount+w]),o[g].format=h.format,o[g].width=h.width,o[g].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=mi),a.format=h.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class x0 extends Ws{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gc.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=m0("img");function l(){c(),gc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Pye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=new rx;s.colorSpace=To;const o=new x0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class Iye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ru,a=new ra(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Yo,o.wrapT=u.wrapT!==void 0?u.wrapT:Yo,o.magFilter=u.magFilter!==void 0?u.magFilter:mi,o.minFilter=u.minFilter!==void 0?u.minFilter:mi,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Sa),u.mipmapCount===1&&(o.minFilter=mi),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class b7 extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=new Nr,o=new x0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Mh extends Dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class S7 extends Mh{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new At(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const RC=new Kt,tU=new pe,nU=new pe;class T3{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ze(512,512),this.map=null,this.mapPass=null,this.matrix=new Kt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ox,this._frameExtents=new Ze(1,1),this._viewportCount=1,this._viewports=[new Jn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;tU.setFromMatrixPosition(e.matrixWorld),t.position.copy(tU),nU.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nU),t.updateMatrixWorld(),RC.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RC),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(RC)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kye extends T3{constructor(){super(new Ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=Zg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class C3 extends Mh{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new kye}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const rU=new Kt,qv=new pe,PC=new pe;class Oye extends T3{constructor(){super(new Ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ze(4,2),this._viewportCount=6,this._viewports=[new Jn(2,1,1,1),new Jn(0,1,1,1),new Jn(3,1,1,1),new Jn(1,1,1,1),new Jn(3,0,1,1),new Jn(1,0,1,1)],this._cubeDirections=[new pe(1,0,0),new pe(-1,0,0),new pe(0,0,1),new pe(0,0,-1),new pe(0,1,0),new pe(0,-1,0)],this._cubeUps=[new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,1,0),new pe(0,0,1),new pe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),qv.setFromMatrixPosition(e.matrixWorld),r.position.copy(qv),PC.copy(r.position),PC.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(PC),r.updateMatrixWorld(),i.makeTranslation(-qv.x,-qv.y,-qv.z),rU.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rU)}}class M3 extends Mh{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Oye}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class My extends nx{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Dye extends T3{constructor(){super(new My(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class R3 extends Mh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.shadow=new Dye}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class T7 extends Mh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class C7 extends Mh{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class M7{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class R7 extends Mh{constructor(e=new M7,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class fS extends Ws{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new ra(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new At().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new At().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ze().fromArray(o.value);break;case"v3":i.uniforms[s].value=new pe().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Jn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new _n().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Kt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ze().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ze().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return fS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:c7,SpriteMaterial:l3,RawShaderMaterial:f7,ShaderMaterial:Al,PointsMaterial:Jb,MeshPhysicalMaterial:Pa,MeshStandardMaterial:cx,MeshPhongMaterial:h7,MeshToonMaterial:d7,MeshNormalMaterial:p7,MeshLambertMaterial:m7,MeshDepthMaterial:x3,MeshDistanceMaterial:w3,MeshBasicMaterial:Qo,MeshMatcapMaterial:g7,LineDashedMaterial:y7,LineBasicMaterial:qs,Material:zi};return new t[e]}}class rh{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class P7 extends xn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class I7 extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ra(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(p,g){if(t[g]!==void 0)return t[g];const _=p.interleavedBuffers[g],v=s(p,_.buffer),A=xg(_.type,v),S=new ix(A,_.stride);return S.uuid=_.uuid,t[g]=S,S}function s(p,g){if(r[g]!==void 0)return r[g];const _=p.arrayBuffers[g],v=new Uint32Array(_).buffer;return r[g]=v,v}const o=e.isInstancedBufferGeometry?new P7:new xn,a=e.data.index;if(a!==void 0){const p=xg(a.type,a.array);o.setIndex(new Xn(p,1))}const l=e.data.attributes;for(const p in l){const g=l[p];let w;if(g.isInterleavedBufferAttribute){const _=i(e.data,g.data);w=new yh(_,g.itemSize,g.offset,g.normalized)}else{const _=xg(g.type,g.array),v=g.isInstancedBufferAttribute?Ep:Xn;w=new v(_,g.itemSize,g.normalized)}g.name!==void 0&&(w.name=g.name),g.usage!==void 0&&w.setUsage(g.usage),o.setAttribute(p,w)}const u=e.data.morphAttributes;if(u)for(const p in u){const g=u[p],w=[];for(let _=0,v=g.length;_<v;_++){const A=g[_];let S;if(A.isInterleavedBufferAttribute){const b=i(e.data,A.data);S=new yh(b,A.itemSize,A.offset,A.normalized)}else{const b=xg(A.type,A.array);S=new Xn(b,A.itemSize,A.normalized)}A.name!==void 0&&(S.name=A.name),w.push(S)}o.morphAttributes[p]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let p=0,g=f.length;p!==g;++p){const w=f[p];o.addGroup(w.start,w.count,w.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const p=new pe;h.center!==void 0&&p.fromArray(h.center),o.boundingSphere=new ws(p,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class Lye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?rh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ra(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){i!==void 0&&i(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?rh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ra(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new up().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new sx().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new I7;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in eU?a=eU[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new fS;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ty.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:xg(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new S3(t);s=new x0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],h=f.url;if(Array.isArray(h)){const p=[];for(let g=0,w=h.length;g<w;g++){const _=h[g],v=a(_);v!==null&&(v instanceof HTMLImageElement?p.push(v):p.push(new ru(v.data,v.width,v.height)))}i[f.uuid]=new Yd(p)}else{const p=a(f.url);i[f.uuid]=new Yd(p)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:xg(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new x0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,h=u.length;f<h;f++){const p=u[f],g=await s(p);g!==null&&(g instanceof HTMLImageElement?c.push(g):c.push(new ru(g.data,g.width,g.height)))}r[l.uuid]=new Yd(c)}else{const c=await s(l.url);r[l.uuid]=new Yd(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new rx,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new ru:c=new Nr,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,Nye)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],iU),c.wrapT=r(a.wrap[1],iU)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,sU)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,sU)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let g=0,w=h.length;g<w;g++){const _=h[g];r[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),p.push(r[_])}return p}return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),r[h]}}function u(h){return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),i[h]}let c,f;switch(e.type){case"Scene":o=new a3,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new At(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $b(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Wb(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ui(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new My(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new T7(e.color,e.intensity);break;case"DirectionalLight":o=new R3(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new M3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new C7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new C3(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new S7(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new R7().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new u3(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new gi(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const h=e.count,p=e.instanceMatrix,g=e.instanceColor;o=new c3(c,f,h),o.instanceMatrix=new Ep(new Float32Array(p.array),16),g!==void 0&&(o.instanceColor=new Ep(new Float32Array(g.array),g.itemSize));break;case"BatchedMesh":c=a(e.geometry),f=l(e.material),o=new ZG(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(w=>{const _=new zs;_.min.fromArray(w.boxMin),_.max.fromArray(w.boxMax);const v=new ws;return v.radius=w.sphereRadius,v.center.fromArray(w.sphereCenter),{boxInitialized:w.boxInitialized,box:_,sphereInitialized:w.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new QG;break;case"Line":o=new Lc(a(e.geometry),l(e.material));break;case"LineLoop":o=new f3(a(e.geometry),l(e.material));break;case"LineSegments":o=new Sl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new h3(a(e.geometry),l(e.material));break;case"Sprite":o=new YG(l(e.material));break;case"Group":o=new mc;break;case"Bone":o=new Kb;break;default:o=new Dn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)o.add(this.parseObject(h[p],t,r,i,s))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const g=h[p];o.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const g=h[p],w=o.getObjectByProperty("uuid",g.object);w!==void 0&&o.addLevel(w,g.distance,g.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const r=t.target,i=e.getObjectByProperty("uuid",r);i!==void 0?t.target=i:t.target=new Dn}})}}const Nye={UVMapping:Lb,CubeReflectionMapping:Oc,CubeRefractionMapping:mh,EquirectangularReflectionMapping:u0,EquirectangularRefractionMapping:c0,CubeUVReflectionMapping:Ay},iU={RepeatWrapping:gh,ClampToEdgeWrapping:Yo,MirroredRepeatWrapping:Jg},sU={NearestFilter:ss,NearestMipmapNearestFilter:Nb,NearestMipmapLinearFilter:Kd,LinearFilter:mi,LinearMipmapNearestFilter:Mg,LinearMipmapLinearFilter:Sa};class k7 extends Ws{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gc.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{i&&i(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return gc.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){i&&i(u),gc.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});gc.add(e,l),s.manager.itemStart(e)}}let hw;class P3{static getContext(){return hw===void 0&&(hw=new(window.AudioContext||window.webkitAudioContext)),hw}static setContext(e){hw=e}}class Bye extends Ws{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ra(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);P3.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const oU=new Kt,aU=new Kt,wd=new Kt;class Fye{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ui,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ui,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wd.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(ap*t.fov*.5)/t.zoom;let a,l;aU.elements[12]=-i,oU.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,wd.elements[0]=2*t.near/(l-a),wd.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(wd),a=-o*t.aspect-s,l=o*t.aspect-s,wd.elements[0]=2*t.near/(l-a),wd.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(wd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aU),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oU)}}class O7 extends Ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class I3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=lU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=lU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function lU(){return performance.now()}const Ad=new pe,uU=new Vs,Uye=new pe,Ed=new pe;class jye extends Dn{constructor(){super(),this.type="AudioListener",this.context=P3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new I3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ad,uU,Uye),Ed.set(0,0,-1).applyQuaternion(uU),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ad.x,i),t.positionY.linearRampToValueAtTime(Ad.y,i),t.positionZ.linearRampToValueAtTime(Ad.z,i),t.forwardX.linearRampToValueAtTime(Ed.x,i),t.forwardY.linearRampToValueAtTime(Ed.y,i),t.forwardZ.linearRampToValueAtTime(Ed.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Ad.x,Ad.y,Ad.z),t.setOrientation(Ed.x,Ed.y,Ed.z,r.x,r.y,r.z)}}class D7 extends Dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const bd=new pe,cU=new Vs,Vye=new pe,Sd=new pe;class zye extends D7{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(bd,cU,Vye),Sd.set(0,0,1).applyQuaternion(cU);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(bd.x,r),t.positionY.linearRampToValueAtTime(bd.y,r),t.positionZ.linearRampToValueAtTime(bd.z,r),t.orientationX.linearRampToValueAtTime(Sd.x,r),t.orientationY.linearRampToValueAtTime(Sd.y,r),t.orientationZ.linearRampToValueAtTime(Sd.z,r)}else t.setPosition(bd.x,bd.y,bd.z),t.setOrientation(Sd.x,Sd.y,Sd.z)}}class Hye{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class L7{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Vs.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Vs.multiplyQuaternionsFlat(e,o,e,t,e,r),Vs.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const k3="\\[\\]\\.:\\/",Gye=new RegExp("["+k3+"]","g"),O3="[^"+k3+"]",qye="[^"+k3.replace("\\.","")+"]",Wye=/((?:WC+[\/:])*)/.source.replace("WC",O3),$ye=/(WCOD+)?/.source.replace("WCOD",qye),Kye=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",O3),Jye=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",O3),Xye=new RegExp("^"+Wye+$ye+Kye+Jye+"$"),Yye=["material","materials","bones","map"];class Qye{constructor(e,t,r){const i=r||Gn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class Gn{constructor(e,t,r){this.path=t,this.parsedPath=r||Gn.parseTrackName(t),this.node=Gn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Gn.Composite(e,t,r):new Gn(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Gye,"")}static parseTrackName(e){const t=Xye.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Yye.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Gn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gn.Composite=Qye;Gn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Gn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Gn.prototype.GetterByBindingType=[Gn.prototype._getValue_direct,Gn.prototype._getValue_array,Gn.prototype._getValue_arrayElement,Gn.prototype._getValue_toArray];Gn.prototype.SetterByBindingTypeAndVersioning=[[Gn.prototype._setValue_direct,Gn.prototype._setValue_direct_setNeedsUpdate,Gn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_array,Gn.prototype._setValue_array_setNeedsUpdate,Gn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_arrayElement,Gn.prototype._setValue_arrayElement_setNeedsUpdate,Gn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gn.prototype._setValue_fromArray,Gn.prototype._setValue_fromArray_setNeedsUpdate,Gn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zye{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ea(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],p=h.uuid;let g=t[p];if(g===void 0){g=l++,t[p]=g,e.push(h);for(let w=0,_=o;w!==_;++w)s[w].push(new Gn(h,r[w],i[w]))}else if(g<u){a=e[g];const w=--u,_=e[w];t[_.uuid]=g,e[g]=_,t[p]=w,e[w]=h;for(let v=0,A=o;v!==A;++v){const S=s[v],b=S[w];let C=S[g];S[g]=b,C===void 0&&(C=new Gn(h,r[v],i[v])),S[w]=C}}else e[g]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,h=e[f];t[h.uuid]=c,e[c]=h,t[u]=f,e[f]=l;for(let p=0,g=i;p!==g;++p){const w=r[p],_=w[f],v=w[c];w[c]=_,w[f]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const h=--s,p=e[h],g=--o,w=e[g];t[p.uuid]=f,e[f]=p,t[w.uuid]=h,e[h]=w,e.pop();for(let _=0,v=i;_!==v;++_){const A=r[_],S=A[h],b=A[g];A[f]=S,A[h]=b,A.pop()}}else{const h=--o,p=e[h];h>0&&(t[p.uuid]=f),e[f]=p,e.pop();for(let g=0,w=i;g!==w;++g){const _=r[g];_[f]=_[h],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(f);for(let h=c,p=l.length;h!==p;++h){const g=l[h];f[h]=new Gn(g,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class N7{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Jd,endingEnd:Jd};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=MG,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case t3:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case Hb:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===RG;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===CG){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Xd,i.endingEnd=Xd):(e?i.endingStart=this.zeroSlopeAtStart?Xd:Jd:i.endingStart=f0,t?i.endingEnd=this.zeroSlopeAtEnd?Xd:Jd:i.endingEnd=f0)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const eve=new Float32Array(1);class B7 extends du{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const h=i[f],p=h.name;let g=c[p];if(g!==void 0)++g.referenceCount,o[f]=g;else{if(g=o[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,p));continue}const w=t&&t._propertyBindings[f].binding.parsedPath;g=new L7(Gn.create(r,p,w),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,p),o[f]=g}a[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new E3(new Float32Array(2),new Float32Array(2),1,eve),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?ty.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=Hb),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new N7(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?ty.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class tve extends Gb{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new qb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class nve extends Gb{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTargetArray=!0,this.depth=r,this.texture=new tx(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class D3{constructor(e){this.value=e}clone(){return new D3(this.value.clone===void 0?this.value:this.value.clone())}}let rve=0;class ive extends du{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:rve++}),this.name="",this.usage=d0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++){const s=Array.isArray(t[r])?t[r]:[t[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class sve extends ix{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ove{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const fU=new Kt;class F7{constructor(e,t,r=0,i=1/0){this.ray=new by(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new lp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return fU.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(fU),this}intersectObject(e,t=!0,r=[]){return _P(e,this,r,t),r.sort(hU),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)_P(e[i],this,r,t);return r.sort(hU),r}}function hU(n,e){return n.distance-e.distance}function _P(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)_P(s[o],e,t,!0)}}class ave{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=mn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(mn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class lve{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class L3{constructor(e,t,r,i){L3.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){const s=this.elements;return s[0]=e,s[2]=t,s[1]=r,s[3]=i,this}}const dU=new Ze;class uve{constructor(e=new Ze(1/0,1/0),t=new Ze(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=dU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,dU).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const pU=new pe,dw=new pe;class cve{constructor(e=new pe,t=new pe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){pU.subVectors(e,this.start),dw.subVectors(this.end,this.start);const r=dw.dot(dw);let s=dw.dot(pU)/r;return t&&(s=mn(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const mU=new pe;class fve extends Dn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new xn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new Bt(i,3));const s=new qs({fog:!1,toneMapped:!1});this.cone=new Sl(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mU.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mU),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Pf=new pe,pw=new Kt,IC=new Kt;class hve extends Sl{constructor(e){const t=U7(e),r=new xn,i=[],s=[],o=new At(0,0,1),a=new At(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Bt(i,3)),r.setAttribute("color",new Bt(s,3));const l=new qs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");IC.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(pw.multiplyMatrices(IC,a.matrixWorld),Pf.setFromMatrixPosition(pw),i.setXYZ(o,Pf.x,Pf.y,Pf.z),pw.multiplyMatrices(IC,a.parent.matrixWorld),Pf.setFromMatrixPosition(pw),i.setXYZ(o+1,Pf.x,Pf.y,Pf.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function U7(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,U7(n.children[t]));return e}class dve extends gi{constructor(e,t,r){const i=new ux(t,4,2),s=new Qo({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const pve=new pe,gU=new At,yU=new At;class mve extends Dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new lx(t);i.rotateY(Math.PI*.5),this.material=new Qo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Xn(o,3)),this.add(new gi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");gU.copy(this.light.color),yU.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?gU:yU;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(pve.setFromMatrixPosition(this.light.matrixWorld).negate())}}class gve extends Sl{constructor(e=10,t=10,r=4473924,i=8947848){r=new At(r),i=new At(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let h=0,p=0,g=-a;h<=t;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const w=h===s?r:i;w.toArray(u,p),p+=3,w.toArray(u,p),p+=3,w.toArray(u,p),p+=3,w.toArray(u,p),p+=3}const c=new xn;c.setAttribute("position",new Bt(l,3)),c.setAttribute("color",new Bt(u,3));const f=new qs({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class yve extends Sl{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new At(s),o=new At(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),p=Math.sin(h)*e,g=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,g);const w=f&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let f=0;f<r;f++){const h=f&1?s:o,p=e-e/r*f;for(let g=0;g<i;g++){let w=g/i*(Math.PI*2),_=Math.sin(w)*p,v=Math.cos(w)*p;a.push(_,0,v),l.push(h.r,h.g,h.b),w=(g+1)/i*(Math.PI*2),_=Math.sin(w)*p,v=Math.cos(w)*p,a.push(_,0,v),l.push(h.r,h.g,h.b)}}const u=new xn;u.setAttribute("position",new Bt(a,3)),u.setAttribute("color",new Bt(l,3));const c=new qs({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const vU=new pe,mw=new pe,_U=new pe;class vve extends Dn{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new xn;i.setAttribute("position",new Bt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new qs({fog:!1,toneMapped:!1});this.lightPlane=new Lc(i,s),this.add(this.lightPlane),i=new xn,i.setAttribute("position",new Bt([0,0,0,0,0,1],3)),this.targetLine=new Lc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),vU.setFromMatrixPosition(this.light.matrixWorld),mw.setFromMatrixPosition(this.light.target.matrixWorld),_U.subVectors(mw,vU),this.lightPlane.lookAt(mw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mw),this.targetLine.scale.z=_U.length()}}const gw=new pe,ri=new nx;class _ve extends Sl{constructor(e){const t=new xn,r=new qs({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(g,w){l(g),l(w)}function l(g){i.push(0,0,0),s.push(0,0,0),o[g]===void 0&&(o[g]=[]),o[g].push(i.length/3-1)}t.setAttribute("position",new Bt(i,3)),t.setAttribute("color",new Bt(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new At(16755200),c=new At(16711680),f=new At(43775),h=new At(16777215),p=new At(3355443);this.setColors(u,c,f,h,p)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;ri.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ml?-1:0;hi("c",t,e,ri,0,0,s),hi("t",t,e,ri,0,0,1),hi("n1",t,e,ri,-1,-1,s),hi("n2",t,e,ri,r,-1,s),hi("n3",t,e,ri,-1,i,s),hi("n4",t,e,ri,r,i,s),hi("f1",t,e,ri,-1,-1,1),hi("f2",t,e,ri,r,-1,1),hi("f3",t,e,ri,-1,i,1),hi("f4",t,e,ri,r,i,1),hi("u1",t,e,ri,r*.7,i*1.1,s),hi("u2",t,e,ri,-1*.7,i*1.1,s),hi("u3",t,e,ri,0,i*2,s),hi("cf1",t,e,ri,-1,0,1),hi("cf2",t,e,ri,r,0,1),hi("cf3",t,e,ri,0,-1,1),hi("cf4",t,e,ri,0,i,1),hi("cn1",t,e,ri,-1,0,s),hi("cn2",t,e,ri,r,0,s),hi("cn3",t,e,ri,0,-1,s),hi("cn4",t,e,ri,0,i,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function hi(n,e,t,r,i,s,o){gw.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],gw.x,gw.y,gw.z)}}const yw=new zs;class xve extends Sl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new xn;s.setIndex(new Xn(r,1)),s.setAttribute("position",new Xn(i,3)),super(s,new qs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&yw.setFromObject(this.object),yw.isEmpty())return;const t=yw.min,r=yw.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class wve extends Sl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new xn;s.setIndex(new Xn(r,1)),s.setAttribute("position",new Bt(i,3)),super(s,new qs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ave extends Lc{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new xn;o.setAttribute("position",new Bt(s,3)),o.computeBoundingSphere(),super(o,new qs({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new xn;l.setAttribute("position",new Bt(a,3)),l.computeBoundingSphere(),this.add(new gi(l,new Qo({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const xU=new pe;let vw,kC;class Eve extends Dn{constructor(e=new pe(0,0,1),t=new pe(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",vw===void 0&&(vw=new xn,vw.setAttribute("position",new Bt([0,0,0,0,1,0],3)),kC=new Sy(0,.5,1,5,1),kC.translate(0,-.5,0)),this.position.copy(t),this.line=new Lc(vw,new qs({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new gi(kC,new Qo({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xU.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xU,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bve extends Sl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new xn;i.setAttribute("position",new Bt(t,3)),i.setAttribute("color",new Bt(r,3));const s=new qs({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new At,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Sve{constructor(){this.type="ShapePath",this.color=new At,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new g0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const A=[];for(let S=0,b=v.length;S<b;S++){const C=v[S],L=new up;L.curves=C.curves,A.push(L)}return A}function r(v,A){const S=A.length;let b=!1;for(let C=S-1,L=0;L<S;C=L++){let R=A[C],k=A[L],O=k.x-R.x,M=k.y-R.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(R=A[L],O=-O,k=A[C],M=-M),v.y<R.y||v.y>k.y)continue;if(v.y===R.y){if(v.x===R.x)return!0}else{const D=M*(v.x-R.x)-O*(v.y-R.y);if(D===0)return!0;if(D<0)continue;b=!b}}else{if(v.y!==R.y)continue;if(k.x<=v.x&&v.x<=R.x||R.x<=v.x&&v.x<=k.x)return!0}}return b}const i=iu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new up,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const f=[],h=[];let p=[],g=0,w;h[g]=void 0,p[g]=[];for(let v=0,A=s.length;v<A;v++)a=s[v],w=a.getPoints(),o=i(w),o=e?!o:o,o?(!c&&h[g]&&g++,h[g]={s:new up,p:w},h[g].s.curves=a.curves,c&&g++,p[g]=[]):p[g].push({h:a,p:w[0]});if(!h[0])return t(s);if(h.length>1){let v=!1,A=0;for(let S=0,b=h.length;S<b;S++)f[S]=[];for(let S=0,b=h.length;S<b;S++){const C=p[S];for(let L=0;L<C.length;L++){const R=C[L];let k=!0;for(let O=0;O<h.length;O++)r(R.p,h[O].p)&&(S!==O&&A++,k?(k=!1,f[O].push(R)):v=!0);k&&f[S].push(R)}}A>0&&v===!1&&(p=f)}let _;for(let v=0,A=h.length;v<A;v++){l=h[v].s,u.push(l),_=p[v];for(let S=0,b=_.length;S<b;S++)l.holes.push(_[S].h)}return u}}class Tve extends du{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Cve(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Mve(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Rve(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function xP(n,e,t,r){const i=Pve(r);switch(t){case Jk:return n*e;case Yk:return n*e;case Qk:return n*e*2;case jb:return n*e/i.components*i.byteLength;case ex:return n*e/i.components*i.byteLength;case Zk:return n*e*2/i.components*i.byteLength;case Vb:return n*e*2/i.components*i.byteLength;case Xk:return n*e*3/i.components*i.byteLength;case js:return n*e*4/i.components*i.byteLength;case zb:return n*e*4/i.components*i.byteLength;case L_:case N_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case B_:case F_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case YA:case ZA:return Math.max(n,16)*Math.max(e,8)/4;case XA:case QA:return Math.max(n,8)*Math.max(e,8)/2;case eE:case tE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case nE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case rE:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iE:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case sE:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case oE:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case aE:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case lE:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case uE:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case cE:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case fE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case hE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case dE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case pE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case mE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case gE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case U_:case yE:case vE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case e3:case _E:return Math.ceil(n/4)*Math.ceil(e/4)*8;case xE:case wE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Pve(n){switch(n){case wl:case Wk:return{byteLength:1,components:1};case Xg:case $k:case Ey:return{byteLength:2,components:1};case Fb:case Ub:return{byteLength:2,components:4};case Dc:case Bb:case Po:return{byteLength:4,components:1};case Kk:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const Ive={contain:Cve,cover:Mve,fill:Rve,getByteLength:xP};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Q0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Q0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function j7(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function kve(n){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,u,c),a.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:f}}function r(a,l,u){const c=l.array,f=l.updateRanges;if(n.bindBuffer(u,a),f.length===0)n.bufferSubData(u,0,c);else{f.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<f.length;p++){const g=f[h],w=f[p];w.start<=g.start+g.count+1?g.count=Math.max(g.count,w.start+w.count-g.start):(++h,f[h]=w)}f.length=h+1;for(let p=0,g=f.length;p<g;p++){const w=f[p];n.bufferSubData(u,w.start*c.BYTES_PER_ELEMENT,c,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,a,l),u.version=a.version}}return{get:i,remove:s,update:o}}var Ove=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Dve=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Lve=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Nve=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bve=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Fve=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Uve=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,jve=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vve=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,zve=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Hve=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Gve=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,qve=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Wve=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,$ve=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kve=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Jve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xve=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Yve=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Qve=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Zve=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,e_e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,t_e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,n_e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r_e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,i_e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,s_e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,o_e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,a_e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,l_e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,u_e="gl_FragColor = linearToOutputTexel( gl_FragColor );",c_e=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,f_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,h_e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,d_e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,p_e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m_e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,g_e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,y_e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,v_e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,__e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,x_e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,w_e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,A_e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,E_e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,b_e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,S_e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,T_e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,C_e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,M_e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,R_e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,P_e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,I_e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,k_e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,O_e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,D_e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,L_e=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,N_e=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,B_e=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,F_e=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,U_e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,j_e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V_e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,z_e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,H_e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,G_e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,q_e=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,W_e=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,$_e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,K_e=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,J_e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,X_e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Y_e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Q_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Z_e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,e0e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,t0e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,n0e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,r0e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,i0e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,s0e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,o0e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,a0e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,l0e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,u0e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,c0e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,f0e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,h0e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,d0e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,p0e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,m0e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g0e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,y0e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,v0e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_0e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,x0e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,w0e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,A0e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,E0e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,b0e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,S0e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,T0e=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,C0e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,M0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,R0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,P0e=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,I0e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const k0e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,O0e=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,D0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,L0e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,N0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,B0e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,F0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,U0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,j0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,V0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,z0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,H0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,q0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,W0e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,$0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K0e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Y0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Z0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,exe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,txe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nxe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rxe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ixe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sxe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oxe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,axe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lxe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uxe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cxe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fxe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Sn={alphahash_fragment:Ove,alphahash_pars_fragment:Dve,alphamap_fragment:Lve,alphamap_pars_fragment:Nve,alphatest_fragment:Bve,alphatest_pars_fragment:Fve,aomap_fragment:Uve,aomap_pars_fragment:jve,batching_pars_vertex:Vve,batching_vertex:zve,begin_vertex:Hve,beginnormal_vertex:Gve,bsdfs:qve,iridescence_fragment:Wve,bumpmap_pars_fragment:$ve,clipping_planes_fragment:Kve,clipping_planes_pars_fragment:Jve,clipping_planes_pars_vertex:Xve,clipping_planes_vertex:Yve,color_fragment:Qve,color_pars_fragment:Zve,color_pars_vertex:e_e,color_vertex:t_e,common:n_e,cube_uv_reflection_fragment:r_e,defaultnormal_vertex:i_e,displacementmap_pars_vertex:s_e,displacementmap_vertex:o_e,emissivemap_fragment:a_e,emissivemap_pars_fragment:l_e,colorspace_fragment:u_e,colorspace_pars_fragment:c_e,envmap_fragment:f_e,envmap_common_pars_fragment:h_e,envmap_pars_fragment:d_e,envmap_pars_vertex:p_e,envmap_physical_pars_fragment:S_e,envmap_vertex:m_e,fog_vertex:g_e,fog_pars_vertex:y_e,fog_fragment:v_e,fog_pars_fragment:__e,gradientmap_pars_fragment:x_e,lightmap_pars_fragment:w_e,lights_lambert_fragment:A_e,lights_lambert_pars_fragment:E_e,lights_pars_begin:b_e,lights_toon_fragment:T_e,lights_toon_pars_fragment:C_e,lights_phong_fragment:M_e,lights_phong_pars_fragment:R_e,lights_physical_fragment:P_e,lights_physical_pars_fragment:I_e,lights_fragment_begin:k_e,lights_fragment_maps:O_e,lights_fragment_end:D_e,logdepthbuf_fragment:L_e,logdepthbuf_pars_fragment:N_e,logdepthbuf_pars_vertex:B_e,logdepthbuf_vertex:F_e,map_fragment:U_e,map_pars_fragment:j_e,map_particle_fragment:V_e,map_particle_pars_fragment:z_e,metalnessmap_fragment:H_e,metalnessmap_pars_fragment:G_e,morphinstance_vertex:q_e,morphcolor_vertex:W_e,morphnormal_vertex:$_e,morphtarget_pars_vertex:K_e,morphtarget_vertex:J_e,normal_fragment_begin:X_e,normal_fragment_maps:Y_e,normal_pars_fragment:Q_e,normal_pars_vertex:Z_e,normal_vertex:e0e,normalmap_pars_fragment:t0e,clearcoat_normal_fragment_begin:n0e,clearcoat_normal_fragment_maps:r0e,clearcoat_pars_fragment:i0e,iridescence_pars_fragment:s0e,opaque_fragment:o0e,packing:a0e,premultiplied_alpha_fragment:l0e,project_vertex:u0e,dithering_fragment:c0e,dithering_pars_fragment:f0e,roughnessmap_fragment:h0e,roughnessmap_pars_fragment:d0e,shadowmap_pars_fragment:p0e,shadowmap_pars_vertex:m0e,shadowmap_vertex:g0e,shadowmask_pars_fragment:y0e,skinbase_vertex:v0e,skinning_pars_vertex:_0e,skinning_vertex:x0e,skinnormal_vertex:w0e,specularmap_fragment:A0e,specularmap_pars_fragment:E0e,tonemapping_fragment:b0e,tonemapping_pars_fragment:S0e,transmission_fragment:T0e,transmission_pars_fragment:C0e,uv_pars_fragment:M0e,uv_pars_vertex:R0e,uv_vertex:P0e,worldpos_vertex:I0e,background_vert:k0e,background_frag:O0e,backgroundCube_vert:D0e,backgroundCube_frag:L0e,cube_vert:N0e,cube_frag:B0e,depth_vert:F0e,depth_frag:U0e,distanceRGBA_vert:j0e,distanceRGBA_frag:V0e,equirect_vert:z0e,equirect_frag:H0e,linedashed_vert:G0e,linedashed_frag:q0e,meshbasic_vert:W0e,meshbasic_frag:$0e,meshlambert_vert:K0e,meshlambert_frag:J0e,meshmatcap_vert:X0e,meshmatcap_frag:Y0e,meshnormal_vert:Q0e,meshnormal_frag:Z0e,meshphong_vert:exe,meshphong_frag:txe,meshphysical_vert:nxe,meshphysical_frag:rxe,meshtoon_vert:ixe,meshtoon_frag:sxe,points_vert:oxe,points_frag:axe,shadow_vert:lxe,shadow_frag:uxe,sprite_vert:cxe,sprite_frag:fxe},wt={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new _n}},envmap:{envMap:{value:null},envMapRotation:{value:new _n},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new _n}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new _n}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new _n},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new _n},normalScale:{value:new Ze(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new _n},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new _n}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new _n}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new _n}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0},uvTransform:{value:new _n}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new Ze(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new _n},alphaMap:{value:null},alphaMapTransform:{value:new _n},alphaTest:{value:0}}},hl={basic:{uniforms:lo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:lo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new At(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:lo([wt.common,wt.specularmap,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,wt.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:lo([wt.common,wt.envmap,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.roughnessmap,wt.metalnessmap,wt.fog,wt.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},toon:{uniforms:lo([wt.common,wt.aomap,wt.lightmap,wt.emissivemap,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.gradientmap,wt.fog,wt.lights,{emissive:{value:new At(0)}}]),vertexShader:Sn.meshtoon_vert,fragmentShader:Sn.meshtoon_frag},matcap:{uniforms:lo([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,wt.fog,{matcap:{value:null}}]),vertexShader:Sn.meshmatcap_vert,fragmentShader:Sn.meshmatcap_frag},points:{uniforms:lo([wt.points,wt.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:lo([wt.common,wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:lo([wt.common,wt.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:lo([wt.common,wt.bumpmap,wt.normalmap,wt.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.meshnormal_vert,fragmentShader:Sn.meshnormal_frag},sprite:{uniforms:lo([wt.sprite,wt.fog]),vertexShader:Sn.sprite_vert,fragmentShader:Sn.sprite_frag},background:{uniforms:{uvTransform:{value:new _n},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Sn.background_vert,fragmentShader:Sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new _n}},vertexShader:Sn.backgroundCube_vert,fragmentShader:Sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distanceRGBA:{uniforms:lo([wt.common,wt.displacementmap,{referencePosition:{value:new pe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distanceRGBA_vert,fragmentShader:Sn.distanceRGBA_frag},shadow:{uniforms:lo([wt.lights,wt.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};hl.physical={uniforms:lo([hl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new _n},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new _n},clearcoatNormalScale:{value:new Ze(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new _n},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new _n},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new _n},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new _n},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new _n},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new _n},transmissionSamplerSize:{value:new Ze},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new _n},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new _n},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new _n},anisotropyVector:{value:new Ze},anisotropyMap:{value:null},anisotropyMapTransform:{value:new _n}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};const _w={r:0,b:0,g:0},Td=new na,hxe=new Kt;function dxe(n,e,t,r,i,s,o){const a=new At(0);let l=s===!0?0:1,u,c,f=null,h=0,p=null;function g(S){let b=S.isScene===!0?S.background:null;return b&&b.isTexture&&(b=(S.backgroundBlurriness>0?t:e).get(b)),b}function w(S){let b=!1;const C=g(S);C===null?v(a,l):C&&C.isColor&&(v(C,1),b=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?r.buffers.color.setClear(0,0,0,1,o):L==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function _(S,b){const C=g(b);C&&(C.isCubeTexture||C.mapping===Ay)?(c===void 0&&(c=new gi(new Gp(1,1,1),new Al({name:"BackgroundCubeMaterial",uniforms:ey(hl.backgroundCube.uniforms),vertexShader:hl.backgroundCube.vertexShader,fragmentShader:hl.backgroundCube.fragmentShader,side:co,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(L,R,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Td.copy(b.backgroundRotation),Td.x*=-1,Td.y*=-1,Td.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(Td.y*=-1,Td.z*=-1),c.material.uniforms.envMap.value=C,c.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(hxe.makeRotationFromEuler(Td)),c.material.toneMapped=qn.getTransfer(C.colorSpace)!==ar,(f!==C||h!==C.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,f=C,h=C.version,p=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null)):C&&C.isTexture&&(u===void 0&&(u=new gi(new Ty(2,2),new Al({name:"BackgroundMaterial",uniforms:ey(hl.background.uniforms),vertexShader:hl.background.vertexShader,fragmentShader:hl.background.fragmentShader,side:lu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=C,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=qn.getTransfer(C.colorSpace)!==ar,C.matrixAutoUpdate===!0&&C.updateMatrix(),u.material.uniforms.uvTransform.value.copy(C.matrix),(f!==C||h!==C.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=C,h=C.version,p=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function v(S,b){S.getRGB(_w,WG(n)),r.buffers.color.setClear(_w.r,_w.g,_w.b,b,o)}function A(){c!==void 0&&(c.geometry.dispose(),c.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(S,b=1){a.set(S),l=b,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,v(a,l)},render:w,addToRenderList:_,dispose:A}}function pxe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,o=!1;function a(M,D,U,F,$){let Z=!1;const se=f(F,U,D);s!==se&&(s=se,u(s.object)),Z=p(M,F,U,$),Z&&g(M,F,U,$),$!==null&&e.update($,n.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,b(M,D,U,F),$!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function l(){return n.createVertexArray()}function u(M){return n.bindVertexArray(M)}function c(M){return n.deleteVertexArray(M)}function f(M,D,U){const F=U.wireframe===!0;let $=r[M.id];$===void 0&&($={},r[M.id]=$);let Z=$[D.id];Z===void 0&&(Z={},$[D.id]=Z);let se=Z[F];return se===void 0&&(se=h(l()),Z[F]=se),se}function h(M){const D=[],U=[],F=[];for(let $=0;$<t;$++)D[$]=0,U[$]=0,F[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:U,attributeDivisors:F,object:M,attributes:{},index:null}}function p(M,D,U,F){const $=s.attributes,Z=D.attributes;let se=0;const ce=U.getAttributes();for(const Q in ce)if(ce[Q].location>=0){const Y=$[Q];let V=Z[Q];if(V===void 0&&(Q==="instanceMatrix"&&M.instanceMatrix&&(V=M.instanceMatrix),Q==="instanceColor"&&M.instanceColor&&(V=M.instanceColor)),Y===void 0||Y.attribute!==V||V&&Y.data!==V.data)return!0;se++}return s.attributesNum!==se||s.index!==F}function g(M,D,U,F){const $={},Z=D.attributes;let se=0;const ce=U.getAttributes();for(const Q in ce)if(ce[Q].location>=0){let Y=Z[Q];Y===void 0&&(Q==="instanceMatrix"&&M.instanceMatrix&&(Y=M.instanceMatrix),Q==="instanceColor"&&M.instanceColor&&(Y=M.instanceColor));const V={};V.attribute=Y,Y&&Y.data&&(V.data=Y.data),$[Q]=V,se++}s.attributes=$,s.attributesNum=se,s.index=F}function w(){const M=s.newAttributes;for(let D=0,U=M.length;D<U;D++)M[D]=0}function _(M){v(M,0)}function v(M,D){const U=s.newAttributes,F=s.enabledAttributes,$=s.attributeDivisors;U[M]=1,F[M]===0&&(n.enableVertexAttribArray(M),F[M]=1),$[M]!==D&&(n.vertexAttribDivisor(M,D),$[M]=D)}function A(){const M=s.newAttributes,D=s.enabledAttributes;for(let U=0,F=D.length;U<F;U++)D[U]!==M[U]&&(n.disableVertexAttribArray(U),D[U]=0)}function S(M,D,U,F,$,Z,se){se===!0?n.vertexAttribIPointer(M,D,U,$,Z):n.vertexAttribPointer(M,D,U,F,$,Z)}function b(M,D,U,F){w();const $=F.attributes,Z=U.getAttributes(),se=D.defaultAttributeValues;for(const ce in Z){const Q=Z[ce];if(Q.location>=0){let ee=$[ce];if(ee===void 0&&(ce==="instanceMatrix"&&M.instanceMatrix&&(ee=M.instanceMatrix),ce==="instanceColor"&&M.instanceColor&&(ee=M.instanceColor)),ee!==void 0){const Y=ee.normalized,V=ee.itemSize,X=e.get(ee);if(X===void 0)continue;const re=X.buffer,oe=X.type,fe=X.bytesPerElement,te=oe===n.INT||oe===n.UNSIGNED_INT||ee.gpuType===Bb;if(ee.isInterleavedBufferAttribute){const ue=ee.data,ye=ue.stride,xe=ee.offset;if(ue.isInstancedInterleavedBuffer){for(let Te=0;Te<Q.locationSize;Te++)v(Q.location+Te,ue.meshPerAttribute);M.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let Te=0;Te<Q.locationSize;Te++)_(Q.location+Te);n.bindBuffer(n.ARRAY_BUFFER,re);for(let Te=0;Te<Q.locationSize;Te++)S(Q.location+Te,V/Q.locationSize,oe,Y,ye*fe,(xe+V/Q.locationSize*Te)*fe,te)}else{if(ee.isInstancedBufferAttribute){for(let ue=0;ue<Q.locationSize;ue++)v(Q.location+ue,ee.meshPerAttribute);M.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let ue=0;ue<Q.locationSize;ue++)_(Q.location+ue);n.bindBuffer(n.ARRAY_BUFFER,re);for(let ue=0;ue<Q.locationSize;ue++)S(Q.location+ue,V/Q.locationSize,oe,Y,V*fe,V/Q.locationSize*ue*fe,te)}}else if(se!==void 0){const Y=se[ce];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(Q.location,Y);break;case 3:n.vertexAttrib3fv(Q.location,Y);break;case 4:n.vertexAttrib4fv(Q.location,Y);break;default:n.vertexAttrib1fv(Q.location,Y)}}}}A()}function C(){k();for(const M in r){const D=r[M];for(const U in D){const F=D[U];for(const $ in F)c(F[$].object),delete F[$];delete D[U]}delete r[M]}}function L(M){if(r[M.id]===void 0)return;const D=r[M.id];for(const U in D){const F=D[U];for(const $ in F)c(F[$].object),delete F[$];delete D[U]}delete r[M.id]}function R(M){for(const D in r){const U=r[D];if(U[M.id]===void 0)continue;const F=U[M.id];for(const $ in F)c(F[$].object),delete F[$];delete U[M.id]}}function k(){O(),o=!0,s!==i&&(s=i,u(s.object))}function O(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:k,resetDefaultState:O,dispose:C,releaseStatesOfGeometry:L,releaseStatesOfProgram:R,initAttributes:w,enableAttribute:_,disableUnusedAttributes:A}}function mxe(n,e,t){let r;function i(u){r=u}function s(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function o(u,c,f){f!==0&&(n.drawArraysInstanced(r,u,c,f),t.update(c,r,f))}function a(u,c,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,f);let p=0;for(let g=0;g<f;g++)p+=c[g];t.update(p,r,1)}function l(u,c,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)o(u[g],c[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(r,u,0,c,0,h,0,f);let g=0;for(let w=0;w<f;w++)g+=c[w]*h[w];t.update(g,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function gxe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(R){return!(R!==js&&r.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){const k=R===Ey&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==wl&&r.convert(R)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==Po&&!k)}function l(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const f=t.logarithmicDepthBuffer===!0,h=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),A=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=g>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:w,maxCubemapSize:_,maxAttributes:v,maxVertexUniforms:A,maxVaryings:S,maxFragmentUniforms:b,vertexTextures:C,maxSamples:L}}function yxe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Uf,a=new _n,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||r!==0||i;return i=h,r=f.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=c(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,w=f.clipIntersection,_=f.clipShadows,v=n.get(f);if(!i||g===null||g.length===0||s&&!_)s?c(null):u();else{const A=s?0:r,S=A*4;let b=v.clippingState||null;l.value=b,b=c(g,h,S,p);for(let C=0;C!==S;++C)b[C]=t[C];v.clippingState=b,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=A}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,h,p,g){const w=f!==null?f.length:0;let _=null;if(w!==0){if(_=l.value,g!==!0||_===null){const v=p+w*4,A=h.matrixWorldInverse;a.getNormalMatrix(A),(_===null||_.length<v)&&(_=new Float32Array(v));for(let S=0,b=p;S!==w;++S,b+=4)o.copy(f[S]).applyMatrix4(A,a),o.normal.toArray(_,b),_[b+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,_}}function vxe(n){let e=new WeakMap;function t(o,a){return a===u0?o.mapping=Oc:a===c0&&(o.mapping=mh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===u0||a===c0)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new JG(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Ag=4,wU=[.125,.215,.35,.446,.526,.582],Hd=20,OC=new My,AU=new At;let DC=null,LC=0,NC=0,BC=!1;const Ud=(1+Math.sqrt(5))/2,tg=1/Ud,EU=[new pe(-Ud,tg,0),new pe(Ud,tg,0),new pe(-tg,0,Ud),new pe(tg,0,Ud),new pe(0,Ud,-tg),new pe(0,Ud,tg),new pe(-1,1,-1),new pe(1,1,-1),new pe(-1,1,1),new pe(1,1,1)];class wP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){DC=this._renderer.getRenderTarget(),LC=this._renderer.getActiveCubeFace(),NC=this._renderer.getActiveMipmapLevel(),BC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TU(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=SU(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DC,LC,NC),this._renderer.xr.enabled=BC,e.scissorTest=!1,xw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oc||e.mapping===mh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DC=this._renderer.getRenderTarget(),LC=this._renderer.getActiveCubeFace(),NC=this._renderer.getActiveMipmapLevel(),BC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:mi,minFilter:mi,generateMipmaps:!1,type:Ey,format:js,colorSpace:Ap,depthBuffer:!1},i=bU(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=bU(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_xe(s)),this._blurMaterial=xxe(s,e,t)}return i}_compileMaterial(e){const t=new gi(this._lodPlanes[0],e);this._renderer.compile(t,OC)}_sceneToCubeUV(e,t,r,i){const a=new Ui(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(AU),c.toneMapping=nu,c.autoClear=!1;const p=new Qo({name:"PMREM.Background",side:co,depthWrite:!1,depthTest:!1}),g=new gi(new Gp,p);let w=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,w=!0):(p.color.copy(AU),w=!0);for(let v=0;v<6;v++){const A=v%3;A===0?(a.up.set(0,l[v],0),a.lookAt(u[v],0,0)):A===1?(a.up.set(0,0,l[v]),a.lookAt(0,u[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,u[v]));const S=this._cubeSize;xw(i,A*S,v>2?S:0,S,S),c.setRenderTarget(i),w&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=_}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Oc||e.mapping===mh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=TU()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=SU());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new gi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;xw(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,OC)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=EU[(i-s-1)%EU.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new gi(this._lodPlanes[i],u),h=u.uniforms,p=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Hd-1),w=s/g,_=isFinite(s)?1+Math.floor(c*w):Hd;_>Hd&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Hd}`);const v=[];let A=0;for(let R=0;R<Hd;++R){const k=R/w,O=Math.exp(-k*k/2);v.push(O),R===0?A+=O:R<_&&(A+=2*O)}for(let R=0;R<v.length;R++)v[R]=v[R]/A;h.envMap.value=e.texture,h.samples.value=_,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:S}=this;h.dTheta.value=g,h.mipInt.value=S-r;const b=this._sizeLods[i],C=3*b*(i>S-Ag?i-S+Ag:0),L=4*(this._cubeSize-b);xw(t,C,L,3*b,2*b),l.setRenderTarget(t),l.render(f,OC)}}function _xe(n){const e=[],t=[],r=[];let i=n;const s=n-Ag+1+wU.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Ag?l=wU[o-n+Ag-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],p=6,g=6,w=3,_=2,v=1,A=new Float32Array(w*g*p),S=new Float32Array(_*g*p),b=new Float32Array(v*g*p);for(let L=0;L<p;L++){const R=L%3*2/3-1,k=L>2?0:-1,O=[R,k,0,R+2/3,k,0,R+2/3,k+1,0,R,k,0,R+2/3,k+1,0,R,k+1,0];A.set(O,w*g*L),S.set(h,_*g*L);const M=[L,L,L,L,L,L];b.set(M,v*g*L)}const C=new xn;C.setAttribute("position",new Xn(A,w)),C.setAttribute("uv",new Xn(S,_)),C.setAttribute("faceIndex",new Xn(b,v)),e.push(C),i>Ag&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function bU(n,e,t){const r=new uu(n,e,t);return r.texture.mapping=Ay,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function xw(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function xxe(n,e,t){const r=new Float32Array(Hd),i=new pe(0,1,0);return new Al({name:"SphericalGaussianBlur",defines:{n:Hd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:N3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function SU(){return new Al({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:N3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function TU(){return new Al({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:N3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ec,depthTest:!1,depthWrite:!1})}function N3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wxe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===u0||l===c0,c=l===Oc||l===mh;if(u||c){let f=e.get(a);const h=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new wP(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const p=a.image;return u&&p&&p.height>0||c&&p&&i(p)?(t===null&&(t=new wP(n)),f=u?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Axe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&ug("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Exe(n,e,t,r){const i={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete i[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(f){const h=[],p=f.index,g=f.attributes.position;let w=0;if(p!==null){const A=p.array;w=p.version;for(let S=0,b=A.length;S<b;S+=3){const C=A[S+0],L=A[S+1],R=A[S+2];h.push(C,L,L,R,R,C)}}else if(g!==void 0){const A=g.array;w=g.version;for(let S=0,b=A.length/3-1;S<b;S+=3){const C=S+0,L=S+1,R=S+2;h.push(C,L,L,R,R,C)}}else return;const _=new(zG(h)?o3:s3)(h,1);_.version=w;const v=s.get(f);v&&e.remove(v),s.set(f,_)}function c(f){const h=s.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function bxe(n,e,t){let r;function i(h){r=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,p){n.drawElements(r,p,s,h*o),t.update(p,r,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(r,p,s,h*o,g),t.update(p,r,g))}function c(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,h,0,g);let _=0;for(let v=0;v<g;v++)_+=p[v];t.update(_,r,1)}function f(h,p,g,w){if(g===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let v=0;v<h.length;v++)u(h[v]/o,p[v],w[v]);else{_.multiDrawElementsInstancedWEBGL(r,p,0,s,h,0,w,0,g);let v=0;for(let A=0;A<g;A++)v+=p[A]*w[A];t.update(v,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function Sxe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Txe(n,e,t){const r=new WeakMap,i=new Jn;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=c!==void 0?c.length:0;let h=r.get(a);if(h===void 0||h.count!==f){let O=function(){R.dispose(),r.delete(a),a.removeEventListener("dispose",O)};h!==void 0&&h.texture.dispose();const p=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,_=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],A=a.morphAttributes.color||[];let S=0;p===!0&&(S=1),g===!0&&(S=2),w===!0&&(S=3);let b=a.attributes.position.count*S,C=1;b>e.maxTextureSize&&(C=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const L=new Float32Array(b*C*4*f),R=new tx(L,b,C,f);R.type=Po,R.needsUpdate=!0;const k=S*4;for(let M=0;M<f;M++){const D=_[M],U=v[M],F=A[M],$=b*C*4*M;for(let Z=0;Z<D.count;Z++){const se=Z*k;p===!0&&(i.fromBufferAttribute(D,Z),L[$+se+0]=i.x,L[$+se+1]=i.y,L[$+se+2]=i.z,L[$+se+3]=0),g===!0&&(i.fromBufferAttribute(U,Z),L[$+se+4]=i.x,L[$+se+5]=i.y,L[$+se+6]=i.z,L[$+se+7]=0),w===!0&&(i.fromBufferAttribute(F,Z),L[$+se+8]=i.x,L[$+se+9]=i.y,L[$+se+10]=i.z,L[$+se+11]=F.itemSize===4?i.w:1)}}h={count:f,texture:R,size:new Ze(b,C)},r.set(a,h),a.addEventListener("dispose",O)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let w=0;w<u.length;w++)p+=u[w];const g=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",g),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function Cxe(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);if(i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==u&&(h.update(),i.set(h,u))}return f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const V7=new Nr,CU=new d3(1,1),z7=new tx,H7=new qb,G7=new rx,MU=[],RU=[],PU=new Float32Array(16),IU=new Float32Array(9),kU=new Float32Array(4);function Ry(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=MU[i];if(s===void 0&&(s=new Float32Array(i),MU[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Hi(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Gi(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function hS(n,e){let t=RU[e];t===void 0&&(t=new Int32Array(e),RU[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Mxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Rxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hi(t,e))return;n.uniform2fv(this.addr,e),Gi(t,e)}}function Pxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Hi(t,e))return;n.uniform3fv(this.addr,e),Gi(t,e)}}function Ixe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hi(t,e))return;n.uniform4fv(this.addr,e),Gi(t,e)}}function kxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Hi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Gi(t,e)}else{if(Hi(t,r))return;kU.set(r),n.uniformMatrix2fv(this.addr,!1,kU),Gi(t,r)}}function Oxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Hi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Gi(t,e)}else{if(Hi(t,r))return;IU.set(r),n.uniformMatrix3fv(this.addr,!1,IU),Gi(t,r)}}function Dxe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Hi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Gi(t,e)}else{if(Hi(t,r))return;PU.set(r),n.uniformMatrix4fv(this.addr,!1,PU),Gi(t,r)}}function Lxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Nxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hi(t,e))return;n.uniform2iv(this.addr,e),Gi(t,e)}}function Bxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hi(t,e))return;n.uniform3iv(this.addr,e),Gi(t,e)}}function Fxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hi(t,e))return;n.uniform4iv(this.addr,e),Gi(t,e)}}function Uxe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function jxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hi(t,e))return;n.uniform2uiv(this.addr,e),Gi(t,e)}}function Vxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hi(t,e))return;n.uniform3uiv(this.addr,e),Gi(t,e)}}function zxe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hi(t,e))return;n.uniform4uiv(this.addr,e),Gi(t,e)}}function Hxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(CU.compareFunction=r3,s=CU):s=V7,t.setTexture2D(e||s,i)}function Gxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||H7,i)}function qxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||G7,i)}function Wxe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||z7,i)}function $xe(n){switch(n){case 5126:return Mxe;case 35664:return Rxe;case 35665:return Pxe;case 35666:return Ixe;case 35674:return kxe;case 35675:return Oxe;case 35676:return Dxe;case 5124:case 35670:return Lxe;case 35667:case 35671:return Nxe;case 35668:case 35672:return Bxe;case 35669:case 35673:return Fxe;case 5125:return Uxe;case 36294:return jxe;case 36295:return Vxe;case 36296:return zxe;case 35678:case 36198:case 36298:case 36306:case 35682:return Hxe;case 35679:case 36299:case 36307:return Gxe;case 35680:case 36300:case 36308:case 36293:return qxe;case 36289:case 36303:case 36311:case 36292:return Wxe}}function Kxe(n,e){n.uniform1fv(this.addr,e)}function Jxe(n,e){const t=Ry(e,this.size,2);n.uniform2fv(this.addr,t)}function Xxe(n,e){const t=Ry(e,this.size,3);n.uniform3fv(this.addr,t)}function Yxe(n,e){const t=Ry(e,this.size,4);n.uniform4fv(this.addr,t)}function Qxe(n,e){const t=Ry(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Zxe(n,e){const t=Ry(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function e1e(n,e){const t=Ry(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function t1e(n,e){n.uniform1iv(this.addr,e)}function n1e(n,e){n.uniform2iv(this.addr,e)}function r1e(n,e){n.uniform3iv(this.addr,e)}function i1e(n,e){n.uniform4iv(this.addr,e)}function s1e(n,e){n.uniform1uiv(this.addr,e)}function o1e(n,e){n.uniform2uiv(this.addr,e)}function a1e(n,e){n.uniform3uiv(this.addr,e)}function l1e(n,e){n.uniform4uiv(this.addr,e)}function u1e(n,e,t){const r=this.cache,i=e.length,s=hS(t,i);Hi(r,s)||(n.uniform1iv(this.addr,s),Gi(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||V7,s[o])}function c1e(n,e,t){const r=this.cache,i=e.length,s=hS(t,i);Hi(r,s)||(n.uniform1iv(this.addr,s),Gi(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||H7,s[o])}function f1e(n,e,t){const r=this.cache,i=e.length,s=hS(t,i);Hi(r,s)||(n.uniform1iv(this.addr,s),Gi(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||G7,s[o])}function h1e(n,e,t){const r=this.cache,i=e.length,s=hS(t,i);Hi(r,s)||(n.uniform1iv(this.addr,s),Gi(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||z7,s[o])}function d1e(n){switch(n){case 5126:return Kxe;case 35664:return Jxe;case 35665:return Xxe;case 35666:return Yxe;case 35674:return Qxe;case 35675:return Zxe;case 35676:return e1e;case 5124:case 35670:return t1e;case 35667:case 35671:return n1e;case 35668:case 35672:return r1e;case 35669:case 35673:return i1e;case 5125:return s1e;case 36294:return o1e;case 36295:return a1e;case 36296:return l1e;case 35678:case 36198:case 36298:case 36306:case 35682:return u1e;case 35679:case 36299:case 36307:return c1e;case 35680:case 36300:case 36308:case 36293:return f1e;case 36289:case 36303:case 36311:case 36292:return h1e}}class p1e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=$xe(t.type)}}class m1e{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=d1e(t.type)}}class g1e{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const FC=/(\w+)(\])?(\[|\.)?/g;function OU(n,e){n.seq.push(e),n.map[e.id]=e}function y1e(n,e,t){const r=n.name,i=r.length;for(FC.lastIndex=0;;){const s=FC.exec(r),o=FC.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){OU(t,u===void 0?new p1e(a,n,e):new m1e(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new g1e(a),OU(t,f)),t=f}}}class Zw{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);y1e(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function DU(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const v1e=37297;let _1e=0;function x1e(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}const LU=new _n;function w1e(n){qn._getMatrix(LU,qn.workingColorSpace,n);const e=`mat3( ${LU.elements.map(t=>t.toFixed(4))} )`;switch(qn.getTransfer(n)){case h0:return[e,"LinearTransferOETF"];case ar:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function NU(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+x1e(n.getShaderSource(e),o)}else return i}function A1e(n,e){const t=w1e(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function E1e(n,e){let t;switch(e){case xG:t="Linear";break;case wG:t="Reinhard";break;case AG:t="Cineon";break;case qk:t="ACESFilmic";break;case bG:t="AgX";break;case SG:t="Neutral";break;case EG:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const ww=new pe;function b1e(){qn.getLuminanceCoefficients(ww);const n=ww.x.toFixed(4),e=ww.y.toFixed(4),t=ww.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function S1e(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(p_).join(`
`)}function T1e(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function C1e(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function p_(n){return n!==""}function BU(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function FU(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const M1e=/^[ \t]*#include +<([\w\d./]+)>/gm;function AP(n){return n.replace(M1e,P1e)}const R1e=new Map;function P1e(n,e){let t=Sn[e];if(t===void 0){const r=R1e.get(e);if(r!==void 0)t=Sn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return AP(t)}const I1e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UU(n){return n.replace(I1e,k1e)}function k1e(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function jU(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function O1e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Db?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===D_?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===cl&&(e="SHADOWMAP_TYPE_VSM"),e}function D1e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Oc:case mh:e="ENVMAP_TYPE_CUBE";break;case Ay:e="ENVMAP_TYPE_CUBE_UV";break}return e}function L1e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case mh:e="ENVMAP_MODE_REFRACTION";break}return e}function N1e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Z0:e="ENVMAP_BLENDING_MULTIPLY";break;case vG:e="ENVMAP_BLENDING_MIX";break;case _G:e="ENVMAP_BLENDING_ADD";break}return e}function B1e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function F1e(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=O1e(t),u=D1e(t),c=L1e(t),f=N1e(t),h=B1e(t),p=S1e(t),g=T1e(s),w=i.createProgram();let _,v,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(p_).join(`
`),_.length>0&&(_+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(p_).join(`
`),v.length>0&&(v+=`
`)):(_=[jU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(p_).join(`
`),v=[jU(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==nu?"#define TONE_MAPPING":"",t.toneMapping!==nu?Sn.tonemapping_pars_fragment:"",t.toneMapping!==nu?E1e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Sn.colorspace_pars_fragment,A1e("linearToOutputTexel",t.outputColorSpace),b1e(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(p_).join(`
`)),o=AP(o),o=BU(o,t),o=FU(o,t),a=AP(a),a=BU(a,t),a=FU(a,t),o=UU(o),a=UU(a),t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===pP?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===pP?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=A+_+o,b=A+v+a,C=DU(i,i.VERTEX_SHADER,S),L=DU(i,i.FRAGMENT_SHADER,b);i.attachShader(w,C),i.attachShader(w,L),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function R(D){if(n.debug.checkShaderErrors){const U=i.getProgramInfoLog(w).trim(),F=i.getShaderInfoLog(C).trim(),$=i.getShaderInfoLog(L).trim();let Z=!0,se=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(Z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,w,C,L);else{const ce=NU(i,C,"vertex"),Q=NU(i,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+U+`
`+ce+`
`+Q)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(F===""||$==="")&&(se=!1);se&&(D.diagnostics={runnable:Z,programLog:U,vertexShader:{log:F,prefix:_},fragmentShader:{log:$,prefix:v}})}i.deleteShader(C),i.deleteShader(L),k=new Zw(i,w),O=C1e(i,w)}let k;this.getUniforms=function(){return k===void 0&&R(this),k};let O;this.getAttributes=function(){return O===void 0&&R(this),O};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(w,v1e)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=_1e++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=L,this}let U1e=0;class j1e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new V1e(e),t.set(e,r)),r}}class V1e{constructor(e){this.id=U1e++,this.code=e,this.usedTimes=0}}function z1e(n,e,t,r,i,s,o){const a=new lp,l=new j1e,u=new Set,c=[],f=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(O){return u.add(O),O===0?"uv":`uv${O}`}function _(O,M,D,U,F){const $=U.fog,Z=F.geometry,se=O.isMeshStandardMaterial?U.environment:null,ce=(O.isMeshStandardMaterial?t:e).get(O.envMap||se),Q=ce&&ce.mapping===Ay?ce.image.height:null,ee=g[O.type];O.precision!==null&&(p=i.getMaxPrecision(O.precision),p!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",p,"instead."));const Y=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,V=Y!==void 0?Y.length:0;let X=0;Z.morphAttributes.position!==void 0&&(X=1),Z.morphAttributes.normal!==void 0&&(X=2),Z.morphAttributes.color!==void 0&&(X=3);let re,oe,fe,te;if(ee){const wn=hl[ee];re=wn.vertexShader,oe=wn.fragmentShader}else re=O.vertexShader,oe=O.fragmentShader,l.update(O),fe=l.getVertexShaderID(O),te=l.getFragmentShaderID(O);const ue=n.getRenderTarget(),ye=n.state.buffers.depth.getReversed(),xe=F.isInstancedMesh===!0,Te=F.isBatchedMesh===!0,$e=!!O.map,De=!!O.matcap,Be=!!ce,he=!!O.aoMap,rt=!!O.lightMap,Je=!!O.bumpMap,nt=!!O.normalMap,we=!!O.displacementMap,Pe=!!O.emissiveMap,Le=!!O.metalnessMap,ie=!!O.roughnessMap,q=O.anisotropy>0,me=O.clearcoat>0,de=O.dispersion>0,ve=O.iridescence>0,Ae=O.sheen>0,He=O.transmission>0,qe=q&&!!O.anisotropyMap,lt=me&&!!O.clearcoatMap,yt=me&&!!O.clearcoatNormalMap,Ye=me&&!!O.clearcoatRoughnessMap,vt=ve&&!!O.iridescenceMap,kt=ve&&!!O.iridescenceThicknessMap,Ft=Ae&&!!O.sheenColorMap,Et=Ae&&!!O.sheenRoughnessMap,nn=!!O.specularMap,Gt=!!O.specularColorMap,Tn=!!O.specularIntensityMap,be=He&&!!O.transmissionMap,mt=He&&!!O.thicknessMap,Ge=!!O.gradientMap,Xe=!!O.alphaMap,_t=O.alphaTest>0,dt=!!O.alphaHash,Xt=!!O.extensions;let Yn=nu;O.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(Yn=n.toneMapping);const Sr={shaderID:ee,shaderType:O.type,shaderName:O.name,vertexShader:re,fragmentShader:oe,defines:O.defines,customVertexShaderID:fe,customFragmentShaderID:te,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:p,batching:Te,batchingColor:Te&&F._colorsTexture!==null,instancing:xe,instancingColor:xe&&F.instanceColor!==null,instancingMorph:xe&&F.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:Ap,alphaToCoverage:!!O.alphaToCoverage,map:$e,matcap:De,envMap:Be,envMapMode:Be&&ce.mapping,envMapCubeUVHeight:Q,aoMap:he,lightMap:rt,bumpMap:Je,normalMap:nt,displacementMap:h&&we,emissiveMap:Pe,normalMapObjectSpace:nt&&O.normalMapType===OG,normalMapTangentSpace:nt&&O.normalMapType===Th,metalnessMap:Le,roughnessMap:ie,anisotropy:q,anisotropyMap:qe,clearcoat:me,clearcoatMap:lt,clearcoatNormalMap:yt,clearcoatRoughnessMap:Ye,dispersion:de,iridescence:ve,iridescenceMap:vt,iridescenceThicknessMap:kt,sheen:Ae,sheenColorMap:Ft,sheenRoughnessMap:Et,specularMap:nn,specularColorMap:Gt,specularIntensityMap:Tn,transmission:He,transmissionMap:be,thicknessMap:mt,gradientMap:Ge,opaque:O.transparent===!1&&O.blending===sp&&O.alphaToCoverage===!1,alphaMap:Xe,alphaTest:_t,alphaHash:dt,combine:O.combine,mapUv:$e&&w(O.map.channel),aoMapUv:he&&w(O.aoMap.channel),lightMapUv:rt&&w(O.lightMap.channel),bumpMapUv:Je&&w(O.bumpMap.channel),normalMapUv:nt&&w(O.normalMap.channel),displacementMapUv:we&&w(O.displacementMap.channel),emissiveMapUv:Pe&&w(O.emissiveMap.channel),metalnessMapUv:Le&&w(O.metalnessMap.channel),roughnessMapUv:ie&&w(O.roughnessMap.channel),anisotropyMapUv:qe&&w(O.anisotropyMap.channel),clearcoatMapUv:lt&&w(O.clearcoatMap.channel),clearcoatNormalMapUv:yt&&w(O.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ye&&w(O.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&w(O.iridescenceMap.channel),iridescenceThicknessMapUv:kt&&w(O.iridescenceThicknessMap.channel),sheenColorMapUv:Ft&&w(O.sheenColorMap.channel),sheenRoughnessMapUv:Et&&w(O.sheenRoughnessMap.channel),specularMapUv:nn&&w(O.specularMap.channel),specularColorMapUv:Gt&&w(O.specularColorMap.channel),specularIntensityMapUv:Tn&&w(O.specularIntensityMap.channel),transmissionMapUv:be&&w(O.transmissionMap.channel),thicknessMapUv:mt&&w(O.thicknessMap.channel),alphaMapUv:Xe&&w(O.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(nt||q),vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!Z.attributes.uv&&($e||Xe),fog:!!$,useFog:O.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:O.flatShading===!0,sizeAttenuation:O.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:ye,skinning:F.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:V,morphTextureStride:X,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:O.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:Yn,decodeVideoTexture:$e&&O.map.isVideoTexture===!0&&qn.getTransfer(O.map.colorSpace)===ar,decodeVideoTextureEmissive:Pe&&O.emissiveMap.isVideoTexture===!0&&qn.getTransfer(O.emissiveMap.colorSpace)===ar,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===dl,flipSided:O.side===co,useDepthPacking:O.depthPacking>=0,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionClipCullDistance:Xt&&O.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Xt&&O.extensions.multiDraw===!0||Te)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:O.customProgramCacheKey()};return Sr.vertexUv1s=u.has(1),Sr.vertexUv2s=u.has(2),Sr.vertexUv3s=u.has(3),u.clear(),Sr}function v(O){const M=[];if(O.shaderID?M.push(O.shaderID):(M.push(O.customVertexShaderID),M.push(O.customFragmentShaderID)),O.defines!==void 0)for(const D in O.defines)M.push(D),M.push(O.defines[D]);return O.isRawShaderMaterial===!1&&(A(M,O),S(M,O),M.push(n.outputColorSpace)),M.push(O.customProgramCacheKey),M.join()}function A(O,M){O.push(M.precision),O.push(M.outputColorSpace),O.push(M.envMapMode),O.push(M.envMapCubeUVHeight),O.push(M.mapUv),O.push(M.alphaMapUv),O.push(M.lightMapUv),O.push(M.aoMapUv),O.push(M.bumpMapUv),O.push(M.normalMapUv),O.push(M.displacementMapUv),O.push(M.emissiveMapUv),O.push(M.metalnessMapUv),O.push(M.roughnessMapUv),O.push(M.anisotropyMapUv),O.push(M.clearcoatMapUv),O.push(M.clearcoatNormalMapUv),O.push(M.clearcoatRoughnessMapUv),O.push(M.iridescenceMapUv),O.push(M.iridescenceThicknessMapUv),O.push(M.sheenColorMapUv),O.push(M.sheenRoughnessMapUv),O.push(M.specularMapUv),O.push(M.specularColorMapUv),O.push(M.specularIntensityMapUv),O.push(M.transmissionMapUv),O.push(M.thicknessMapUv),O.push(M.combine),O.push(M.fogExp2),O.push(M.sizeAttenuation),O.push(M.morphTargetsCount),O.push(M.morphAttributeCount),O.push(M.numDirLights),O.push(M.numPointLights),O.push(M.numSpotLights),O.push(M.numSpotLightMaps),O.push(M.numHemiLights),O.push(M.numRectAreaLights),O.push(M.numDirLightShadows),O.push(M.numPointLightShadows),O.push(M.numSpotLightShadows),O.push(M.numSpotLightShadowsWithMaps),O.push(M.numLightProbes),O.push(M.shadowMapType),O.push(M.toneMapping),O.push(M.numClippingPlanes),O.push(M.numClipIntersection),O.push(M.depthPacking)}function S(O,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),O.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),O.push(a.mask)}function b(O){const M=g[O.type];let D;if(M){const U=hl[M];D=$G.clone(U.uniforms)}else D=O.uniforms;return D}function C(O,M){let D;for(let U=0,F=c.length;U<F;U++){const $=c[U];if($.cacheKey===M){D=$,++D.usedTimes;break}}return D===void 0&&(D=new F1e(n,M,O,s),c.push(D)),D}function L(O){if(--O.usedTimes===0){const M=c.indexOf(O);c[M]=c[c.length-1],c.pop(),O.destroy()}}function R(O){l.remove(O)}function k(){l.dispose()}return{getParameters:_,getProgramCacheKey:v,getUniforms:b,acquireProgram:C,releaseProgram:L,releaseShaderCache:R,programs:c,dispose:k}}function H1e(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function G1e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function VU(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zU(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(f,h,p,g,w,_){let v=n[e];return v===void 0?(v={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:w,group:_},n[e]=v):(v.id=f.id,v.object=f,v.geometry=h,v.material=p,v.groupOrder=g,v.renderOrder=f.renderOrder,v.z=w,v.group=_),e++,v}function a(f,h,p,g,w,_){const v=o(f,h,p,g,w,_);p.transmission>0?r.push(v):p.transparent===!0?i.push(v):t.push(v)}function l(f,h,p,g,w,_){const v=o(f,h,p,g,w,_);p.transmission>0?r.unshift(v):p.transparent===!0?i.unshift(v):t.unshift(v)}function u(f,h){t.length>1&&t.sort(f||G1e),r.length>1&&r.sort(h||VU),i.length>1&&i.sort(h||VU)}function c(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function q1e(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new zU,n.set(r,[o])):i>=s.length?(o=new zU,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function W1e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new pe,color:new At};break;case"SpotLight":t={position:new pe,direction:new pe,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new pe,color:new At,distance:0,decay:0};break;case"HemisphereLight":t={direction:new pe,skyColor:new At,groundColor:new At};break;case"RectAreaLight":t={color:new At,position:new pe,halfWidth:new pe,halfHeight:new pe};break}return n[e.id]=t,t}}}function $1e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ze,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let K1e=0;function J1e(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function X1e(n){const e=new W1e,t=$1e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new pe);const i=new pe,s=new Kt,o=new Kt;function a(u){let c=0,f=0,h=0;for(let O=0;O<9;O++)r.probe[O].set(0,0,0);let p=0,g=0,w=0,_=0,v=0,A=0,S=0,b=0,C=0,L=0,R=0;u.sort(J1e);for(let O=0,M=u.length;O<M;O++){const D=u[O],U=D.color,F=D.intensity,$=D.distance,Z=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)c+=U.r*F,f+=U.g*F,h+=U.b*F;else if(D.isLightProbe){for(let se=0;se<9;se++)r.probe[se].addScaledVector(D.sh.coefficients[se],F);R++}else if(D.isDirectionalLight){const se=e.get(D);if(se.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const ce=D.shadow,Q=t.get(D);Q.shadowIntensity=ce.intensity,Q.shadowBias=ce.bias,Q.shadowNormalBias=ce.normalBias,Q.shadowRadius=ce.radius,Q.shadowMapSize=ce.mapSize,r.directionalShadow[p]=Q,r.directionalShadowMap[p]=Z,r.directionalShadowMatrix[p]=D.shadow.matrix,A++}r.directional[p]=se,p++}else if(D.isSpotLight){const se=e.get(D);se.position.setFromMatrixPosition(D.matrixWorld),se.color.copy(U).multiplyScalar(F),se.distance=$,se.coneCos=Math.cos(D.angle),se.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),se.decay=D.decay,r.spot[w]=se;const ce=D.shadow;if(D.map&&(r.spotLightMap[C]=D.map,C++,ce.updateMatrices(D),D.castShadow&&L++),r.spotLightMatrix[w]=ce.matrix,D.castShadow){const Q=t.get(D);Q.shadowIntensity=ce.intensity,Q.shadowBias=ce.bias,Q.shadowNormalBias=ce.normalBias,Q.shadowRadius=ce.radius,Q.shadowMapSize=ce.mapSize,r.spotShadow[w]=Q,r.spotShadowMap[w]=Z,b++}w++}else if(D.isRectAreaLight){const se=e.get(D);se.color.copy(U).multiplyScalar(F),se.halfWidth.set(D.width*.5,0,0),se.halfHeight.set(0,D.height*.5,0),r.rectArea[_]=se,_++}else if(D.isPointLight){const se=e.get(D);if(se.color.copy(D.color).multiplyScalar(D.intensity),se.distance=D.distance,se.decay=D.decay,D.castShadow){const ce=D.shadow,Q=t.get(D);Q.shadowIntensity=ce.intensity,Q.shadowBias=ce.bias,Q.shadowNormalBias=ce.normalBias,Q.shadowRadius=ce.radius,Q.shadowMapSize=ce.mapSize,Q.shadowCameraNear=ce.camera.near,Q.shadowCameraFar=ce.camera.far,r.pointShadow[g]=Q,r.pointShadowMap[g]=Z,r.pointShadowMatrix[g]=D.shadow.matrix,S++}r.point[g]=se,g++}else if(D.isHemisphereLight){const se=e.get(D);se.skyColor.copy(D.color).multiplyScalar(F),se.groundColor.copy(D.groundColor).multiplyScalar(F),r.hemi[v]=se,v++}}_>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=wt.LTC_FLOAT_1,r.rectAreaLTC2=wt.LTC_FLOAT_2):(r.rectAreaLTC1=wt.LTC_HALF_1,r.rectAreaLTC2=wt.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=f,r.ambient[2]=h;const k=r.hash;(k.directionalLength!==p||k.pointLength!==g||k.spotLength!==w||k.rectAreaLength!==_||k.hemiLength!==v||k.numDirectionalShadows!==A||k.numPointShadows!==S||k.numSpotShadows!==b||k.numSpotMaps!==C||k.numLightProbes!==R)&&(r.directional.length=p,r.spot.length=w,r.rectArea.length=_,r.point.length=g,r.hemi.length=v,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=b+C-L,r.spotLightMap.length=C,r.numSpotLightShadowsWithMaps=L,r.numLightProbes=R,k.directionalLength=p,k.pointLength=g,k.spotLength=w,k.rectAreaLength=_,k.hemiLength=v,k.numDirectionalShadows=A,k.numPointShadows=S,k.numSpotShadows=b,k.numSpotMaps=C,k.numLightProbes=R,r.version=K1e++)}function l(u,c){let f=0,h=0,p=0,g=0,w=0;const _=c.matrixWorldInverse;for(let v=0,A=u.length;v<A;v++){const S=u[v];if(S.isDirectionalLight){const b=r.directional[f];b.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(_),f++}else if(S.isSpotLight){const b=r.spot[p];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),b.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),b.direction.sub(i),b.direction.transformDirection(_),p++}else if(S.isRectAreaLight){const b=r.rectArea[g];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),o.identity(),s.copy(S.matrixWorld),s.premultiply(_),o.extractRotation(s),b.halfWidth.set(S.width*.5,0,0),b.halfHeight.set(0,S.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),g++}else if(S.isPointLight){const b=r.point[h];b.position.setFromMatrixPosition(S.matrixWorld),b.position.applyMatrix4(_),h++}else if(S.isHemisphereLight){const b=r.hemi[w];b.direction.setFromMatrixPosition(S.matrixWorld),b.direction.transformDirection(_),w++}}}return{setup:a,setupView:l,state:r}}function HU(n){const e=new X1e(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function s(c){t.push(c)}function o(c){r.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Y1e(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new HU(n),e.set(i,[a])):s>=o.length?(a=new HU(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}const Q1e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Z1e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ewe(n,e,t){let r=new ox;const i=new Ze,s=new Ze,o=new Jn,a=new x3({depthPacking:kG}),l=new w3,u={},c=t.maxTextureSize,f={[lu]:co,[co]:lu,[dl]:dl},h=new Al({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ze},radius:{value:4}},vertexShader:Q1e,fragmentShader:Z1e}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new xn;g.setAttribute("position",new Xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new gi(g,h),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Db;let v=this.type;this.render=function(L,R,k){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||L.length===0)return;const O=n.getRenderTarget(),M=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),U=n.state;U.setBlending(Ec),U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const F=v!==cl&&this.type===cl,$=v===cl&&this.type!==cl;for(let Z=0,se=L.length;Z<se;Z++){const ce=L[Z],Q=ce.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",ce,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const ee=Q.getFrameExtents();if(i.multiply(ee),s.copy(Q.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/ee.x),i.x=s.x*ee.x,Q.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/ee.y),i.y=s.y*ee.y,Q.mapSize.y=s.y)),Q.map===null||F===!0||$===!0){const V=this.type!==cl?{minFilter:ss,magFilter:ss}:{};Q.map!==null&&Q.map.dispose(),Q.map=new uu(i.x,i.y,V),Q.map.texture.name=ce.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const Y=Q.getViewportCount();for(let V=0;V<Y;V++){const X=Q.getViewport(V);o.set(s.x*X.x,s.y*X.y,s.x*X.z,s.y*X.w),U.viewport(o),Q.updateMatrices(ce,V),r=Q.getFrustum(),b(R,k,Q.camera,ce,this.type)}Q.isPointLightShadow!==!0&&this.type===cl&&A(Q,k),Q.needsUpdate=!1}v=this.type,_.needsUpdate=!1,n.setRenderTarget(O,M,D)};function A(L,R){const k=e.update(w);h.defines.VSM_SAMPLES!==L.blurSamples&&(h.defines.VSM_SAMPLES=L.blurSamples,p.defines.VSM_SAMPLES=L.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new uu(i.x,i.y)),h.uniforms.shadow_pass.value=L.map.texture,h.uniforms.resolution.value=L.mapSize,h.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(R,null,k,h,w,null),p.uniforms.shadow_pass.value=L.mapPass.texture,p.uniforms.resolution.value=L.mapSize,p.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(R,null,k,p,w,null)}function S(L,R,k,O){let M=null;const D=k.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(D!==void 0)M=D;else if(M=k.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const U=M.uuid,F=R.uuid;let $=u[U];$===void 0&&($={},u[U]=$);let Z=$[F];Z===void 0&&(Z=M.clone(),$[F]=Z,R.addEventListener("dispose",C)),M=Z}if(M.visible=R.visible,M.wireframe=R.wireframe,O===cl?M.side=R.shadowSide!==null?R.shadowSide:R.side:M.side=R.shadowSide!==null?R.shadowSide:f[R.side],M.alphaMap=R.alphaMap,M.alphaTest=R.alphaTest,M.map=R.map,M.clipShadows=R.clipShadows,M.clippingPlanes=R.clippingPlanes,M.clipIntersection=R.clipIntersection,M.displacementMap=R.displacementMap,M.displacementScale=R.displacementScale,M.displacementBias=R.displacementBias,M.wireframeLinewidth=R.wireframeLinewidth,M.linewidth=R.linewidth,k.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const U=n.properties.get(M);U.light=k}return M}function b(L,R,k,O,M){if(L.visible===!1)return;if(L.layers.test(R.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&M===cl)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,L.matrixWorld);const F=e.update(L),$=L.material;if(Array.isArray($)){const Z=F.groups;for(let se=0,ce=Z.length;se<ce;se++){const Q=Z[se],ee=$[Q.materialIndex];if(ee&&ee.visible){const Y=S(L,ee,O,M);L.onBeforeShadow(n,L,R,k,F,Y,Q),n.renderBufferDirect(k,null,F,Y,L,Q),L.onAfterShadow(n,L,R,k,F,Y,Q)}}}else if($.visible){const Z=S(L,$,O,M);L.onBeforeShadow(n,L,R,k,F,Z,null),n.renderBufferDirect(k,null,F,Z,L,null),L.onAfterShadow(n,L,R,k,F,Z,null)}}const U=L.children;for(let F=0,$=U.length;F<$;F++)b(U[F],R,k,O,M)}function C(L){L.target.removeEventListener("dispose",C);for(const k in u){const O=u[k],M=L.target.uuid;M in O&&(O[M].dispose(),delete O[M])}}}const twe={[HA]:GA,[qA]:KA,[WA]:JA,[_p]:$A,[GA]:HA,[KA]:qA,[JA]:WA,[$A]:_p};function nwe(n,e){function t(){let be=!1;const mt=new Jn;let Ge=null;const Xe=new Jn(0,0,0,0);return{setMask:function(_t){Ge!==_t&&!be&&(n.colorMask(_t,_t,_t,_t),Ge=_t)},setLocked:function(_t){be=_t},setClear:function(_t,dt,Xt,Yn,Sr){Sr===!0&&(_t*=Yn,dt*=Yn,Xt*=Yn),mt.set(_t,dt,Xt,Yn),Xe.equals(mt)===!1&&(n.clearColor(_t,dt,Xt,Yn),Xe.copy(mt))},reset:function(){be=!1,Ge=null,Xe.set(-1,0,0,0)}}}function r(){let be=!1,mt=!1,Ge=null,Xe=null,_t=null;return{setReversed:function(dt){if(mt!==dt){const Xt=e.get("EXT_clip_control");mt?Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.ZERO_TO_ONE_EXT):Xt.clipControlEXT(Xt.LOWER_LEFT_EXT,Xt.NEGATIVE_ONE_TO_ONE_EXT);const Yn=_t;_t=null,this.setClear(Yn)}mt=dt},getReversed:function(){return mt},setTest:function(dt){dt?ue(n.DEPTH_TEST):ye(n.DEPTH_TEST)},setMask:function(dt){Ge!==dt&&!be&&(n.depthMask(dt),Ge=dt)},setFunc:function(dt){if(mt&&(dt=twe[dt]),Xe!==dt){switch(dt){case HA:n.depthFunc(n.NEVER);break;case GA:n.depthFunc(n.ALWAYS);break;case qA:n.depthFunc(n.LESS);break;case _p:n.depthFunc(n.LEQUAL);break;case WA:n.depthFunc(n.EQUAL);break;case $A:n.depthFunc(n.GEQUAL);break;case KA:n.depthFunc(n.GREATER);break;case JA:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Xe=dt}},setLocked:function(dt){be=dt},setClear:function(dt){_t!==dt&&(mt&&(dt=1-dt),n.clearDepth(dt),_t=dt)},reset:function(){be=!1,Ge=null,Xe=null,_t=null,mt=!1}}}function i(){let be=!1,mt=null,Ge=null,Xe=null,_t=null,dt=null,Xt=null,Yn=null,Sr=null;return{setTest:function(wn){be||(wn?ue(n.STENCIL_TEST):ye(n.STENCIL_TEST))},setMask:function(wn){mt!==wn&&!be&&(n.stencilMask(wn),mt=wn)},setFunc:function(wn,yi,$n){(Ge!==wn||Xe!==yi||_t!==$n)&&(n.stencilFunc(wn,yi,$n),Ge=wn,Xe=yi,_t=$n)},setOp:function(wn,yi,$n){(dt!==wn||Xt!==yi||Yn!==$n)&&(n.stencilOp(wn,yi,$n),dt=wn,Xt=yi,Yn=$n)},setLocked:function(wn){be=wn},setClear:function(wn){Sr!==wn&&(n.clearStencil(wn),Sr=wn)},reset:function(){be=!1,mt=null,Ge=null,Xe=null,_t=null,dt=null,Xt=null,Yn=null,Sr=null}}}const s=new t,o=new r,a=new i,l=new WeakMap,u=new WeakMap;let c={},f={},h=new WeakMap,p=[],g=null,w=!1,_=null,v=null,A=null,S=null,b=null,C=null,L=null,R=new At(0,0,0),k=0,O=!1,M=null,D=null,U=null,F=null,$=null;const Z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let se=!1,ce=0;const Q=n.getParameter(n.VERSION);Q.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(Q)[1]),se=ce>=1):Q.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),se=ce>=2);let ee=null,Y={};const V=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),re=new Jn().fromArray(V),oe=new Jn().fromArray(X);function fe(be,mt,Ge,Xe){const _t=new Uint8Array(4),dt=n.createTexture();n.bindTexture(be,dt),n.texParameteri(be,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(be,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Xt=0;Xt<Ge;Xt++)be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY?n.texImage3D(mt,0,n.RGBA,1,1,Xe,0,n.RGBA,n.UNSIGNED_BYTE,_t):n.texImage2D(mt+Xt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,_t);return dt}const te={};te[n.TEXTURE_2D]=fe(n.TEXTURE_2D,n.TEXTURE_2D,1),te[n.TEXTURE_CUBE_MAP]=fe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),te[n.TEXTURE_2D_ARRAY]=fe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),te[n.TEXTURE_3D]=fe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ue(n.DEPTH_TEST),o.setFunc(_p),Je(!1),nt(lP),ue(n.CULL_FACE),he(Ec);function ue(be){c[be]!==!0&&(n.enable(be),c[be]=!0)}function ye(be){c[be]!==!1&&(n.disable(be),c[be]=!1)}function xe(be,mt){return f[be]!==mt?(n.bindFramebuffer(be,mt),f[be]=mt,be===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=mt),be===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=mt),!0):!1}function Te(be,mt){let Ge=p,Xe=!1;if(be){Ge=h.get(mt),Ge===void 0&&(Ge=[],h.set(mt,Ge));const _t=be.textures;if(Ge.length!==_t.length||Ge[0]!==n.COLOR_ATTACHMENT0){for(let dt=0,Xt=_t.length;dt<Xt;dt++)Ge[dt]=n.COLOR_ATTACHMENT0+dt;Ge.length=_t.length,Xe=!0}}else Ge[0]!==n.BACK&&(Ge[0]=n.BACK,Xe=!0);Xe&&n.drawBuffers(Ge)}function $e(be){return g!==be?(n.useProgram(be),g=be,!0):!1}const De={[Wf]:n.FUNC_ADD,[tG]:n.FUNC_SUBTRACT,[nG]:n.FUNC_REVERSE_SUBTRACT};De[rG]=n.MIN,De[iG]=n.MAX;const Be={[sG]:n.ZERO,[oG]:n.ONE,[aG]:n.SRC_COLOR,[VA]:n.SRC_ALPHA,[dG]:n.SRC_ALPHA_SATURATE,[fG]:n.DST_COLOR,[uG]:n.DST_ALPHA,[lG]:n.ONE_MINUS_SRC_COLOR,[zA]:n.ONE_MINUS_SRC_ALPHA,[hG]:n.ONE_MINUS_DST_COLOR,[cG]:n.ONE_MINUS_DST_ALPHA,[pG]:n.CONSTANT_COLOR,[mG]:n.ONE_MINUS_CONSTANT_COLOR,[gG]:n.CONSTANT_ALPHA,[yG]:n.ONE_MINUS_CONSTANT_ALPHA};function he(be,mt,Ge,Xe,_t,dt,Xt,Yn,Sr,wn){if(be===Ec){w===!0&&(ye(n.BLEND),w=!1);return}if(w===!1&&(ue(n.BLEND),w=!0),be!==eG){if(be!==_||wn!==O){if((v!==Wf||b!==Wf)&&(n.blendEquation(n.FUNC_ADD),v=Wf,b=Wf),wn)switch(be){case sp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uP:n.blendFunc(n.ONE,n.ONE);break;case cP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case fP:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}else switch(be){case sp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case uP:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case cP:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case fP:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}A=null,S=null,C=null,L=null,R.set(0,0,0),k=0,_=be,O=wn}return}_t=_t||mt,dt=dt||Ge,Xt=Xt||Xe,(mt!==v||_t!==b)&&(n.blendEquationSeparate(De[mt],De[_t]),v=mt,b=_t),(Ge!==A||Xe!==S||dt!==C||Xt!==L)&&(n.blendFuncSeparate(Be[Ge],Be[Xe],Be[dt],Be[Xt]),A=Ge,S=Xe,C=dt,L=Xt),(Yn.equals(R)===!1||Sr!==k)&&(n.blendColor(Yn.r,Yn.g,Yn.b,Sr),R.copy(Yn),k=Sr),_=be,O=!1}function rt(be,mt){be.side===dl?ye(n.CULL_FACE):ue(n.CULL_FACE);let Ge=be.side===co;mt&&(Ge=!Ge),Je(Ge),be.blending===sp&&be.transparent===!1?he(Ec):he(be.blending,be.blendEquation,be.blendSrc,be.blendDst,be.blendEquationAlpha,be.blendSrcAlpha,be.blendDstAlpha,be.blendColor,be.blendAlpha,be.premultipliedAlpha),o.setFunc(be.depthFunc),o.setTest(be.depthTest),o.setMask(be.depthWrite),s.setMask(be.colorWrite);const Xe=be.stencilWrite;a.setTest(Xe),Xe&&(a.setMask(be.stencilWriteMask),a.setFunc(be.stencilFunc,be.stencilRef,be.stencilFuncMask),a.setOp(be.stencilFail,be.stencilZFail,be.stencilZPass)),Pe(be.polygonOffset,be.polygonOffsetFactor,be.polygonOffsetUnits),be.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):ye(n.SAMPLE_ALPHA_TO_COVERAGE)}function Je(be){M!==be&&(be?n.frontFace(n.CW):n.frontFace(n.CCW),M=be)}function nt(be){be!==YH?(ue(n.CULL_FACE),be!==D&&(be===lP?n.cullFace(n.BACK):be===QH?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ye(n.CULL_FACE),D=be}function we(be){be!==U&&(se&&n.lineWidth(be),U=be)}function Pe(be,mt,Ge){be?(ue(n.POLYGON_OFFSET_FILL),(F!==mt||$!==Ge)&&(n.polygonOffset(mt,Ge),F=mt,$=Ge)):ye(n.POLYGON_OFFSET_FILL)}function Le(be){be?ue(n.SCISSOR_TEST):ye(n.SCISSOR_TEST)}function ie(be){be===void 0&&(be=n.TEXTURE0+Z-1),ee!==be&&(n.activeTexture(be),ee=be)}function q(be,mt,Ge){Ge===void 0&&(ee===null?Ge=n.TEXTURE0+Z-1:Ge=ee);let Xe=Y[Ge];Xe===void 0&&(Xe={type:void 0,texture:void 0},Y[Ge]=Xe),(Xe.type!==be||Xe.texture!==mt)&&(ee!==Ge&&(n.activeTexture(Ge),ee=Ge),n.bindTexture(be,mt||te[be]),Xe.type=be,Xe.texture=mt)}function me(){const be=Y[ee];be!==void 0&&be.type!==void 0&&(n.bindTexture(be.type,null),be.type=void 0,be.texture=void 0)}function de(){try{n.compressedTexImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function ve(){try{n.compressedTexImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ae(){try{n.texSubImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function qe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function lt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function yt(){try{n.texStorage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ye(){try{n.texStorage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function vt(){try{n.texImage2D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function kt(){try{n.texImage3D.apply(n,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ft(be){re.equals(be)===!1&&(n.scissor(be.x,be.y,be.z,be.w),re.copy(be))}function Et(be){oe.equals(be)===!1&&(n.viewport(be.x,be.y,be.z,be.w),oe.copy(be))}function nn(be,mt){let Ge=u.get(mt);Ge===void 0&&(Ge=new WeakMap,u.set(mt,Ge));let Xe=Ge.get(be);Xe===void 0&&(Xe=n.getUniformBlockIndex(mt,be.name),Ge.set(be,Xe))}function Gt(be,mt){const Xe=u.get(mt).get(be);l.get(mt)!==Xe&&(n.uniformBlockBinding(mt,Xe,be.__bindingPointIndex),l.set(mt,Xe))}function Tn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},ee=null,Y={},f={},h=new WeakMap,p=[],g=null,w=!1,_=null,v=null,A=null,S=null,b=null,C=null,L=null,R=new At(0,0,0),k=0,O=!1,M=null,D=null,U=null,F=null,$=null,re.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ue,disable:ye,bindFramebuffer:xe,drawBuffers:Te,useProgram:$e,setBlending:he,setMaterial:rt,setFlipSided:Je,setCullFace:nt,setLineWidth:we,setPolygonOffset:Pe,setScissorTest:Le,activeTexture:ie,bindTexture:q,unbindTexture:me,compressedTexImage2D:de,compressedTexImage3D:ve,texImage2D:vt,texImage3D:kt,updateUBOMapping:nn,uniformBlockBinding:Gt,texStorage2D:yt,texStorage3D:Ye,texSubImage2D:Ae,texSubImage3D:He,compressedTexSubImage2D:qe,compressedTexSubImage3D:lt,scissor:Ft,viewport:Et,reset:Tn}}function rwe(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ze,c=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(ie,q){return p?new OffscreenCanvas(ie,q):m0("canvas")}function w(ie,q,me){let de=1;const ve=Le(ie);if((ve.width>me||ve.height>me)&&(de=me/Math.max(ve.width,ve.height)),de<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const Ae=Math.floor(de*ve.width),He=Math.floor(de*ve.height);f===void 0&&(f=g(Ae,He));const qe=q?g(Ae,He):f;return qe.width=Ae,qe.height=He,qe.getContext("2d").drawImage(ie,0,0,Ae,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ve.width+"x"+ve.height+") to ("+Ae+"x"+He+")."),qe}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ve.width+"x"+ve.height+")."),ie;return ie}function _(ie){return ie.generateMipmaps}function v(ie){n.generateMipmap(ie)}function A(ie){return ie.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ie.isWebGL3DRenderTarget?n.TEXTURE_3D:ie.isWebGLArrayRenderTarget||ie.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(ie,q,me,de,ve=!1){if(ie!==null){if(n[ie]!==void 0)return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Ae=q;if(q===n.RED&&(me===n.FLOAT&&(Ae=n.R32F),me===n.HALF_FLOAT&&(Ae=n.R16F),me===n.UNSIGNED_BYTE&&(Ae=n.R8)),q===n.RED_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ae=n.R8UI),me===n.UNSIGNED_SHORT&&(Ae=n.R16UI),me===n.UNSIGNED_INT&&(Ae=n.R32UI),me===n.BYTE&&(Ae=n.R8I),me===n.SHORT&&(Ae=n.R16I),me===n.INT&&(Ae=n.R32I)),q===n.RG&&(me===n.FLOAT&&(Ae=n.RG32F),me===n.HALF_FLOAT&&(Ae=n.RG16F),me===n.UNSIGNED_BYTE&&(Ae=n.RG8)),q===n.RG_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ae=n.RG8UI),me===n.UNSIGNED_SHORT&&(Ae=n.RG16UI),me===n.UNSIGNED_INT&&(Ae=n.RG32UI),me===n.BYTE&&(Ae=n.RG8I),me===n.SHORT&&(Ae=n.RG16I),me===n.INT&&(Ae=n.RG32I)),q===n.RGB_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ae=n.RGB8UI),me===n.UNSIGNED_SHORT&&(Ae=n.RGB16UI),me===n.UNSIGNED_INT&&(Ae=n.RGB32UI),me===n.BYTE&&(Ae=n.RGB8I),me===n.SHORT&&(Ae=n.RGB16I),me===n.INT&&(Ae=n.RGB32I)),q===n.RGBA_INTEGER&&(me===n.UNSIGNED_BYTE&&(Ae=n.RGBA8UI),me===n.UNSIGNED_SHORT&&(Ae=n.RGBA16UI),me===n.UNSIGNED_INT&&(Ae=n.RGBA32UI),me===n.BYTE&&(Ae=n.RGBA8I),me===n.SHORT&&(Ae=n.RGBA16I),me===n.INT&&(Ae=n.RGBA32I)),q===n.RGB&&me===n.UNSIGNED_INT_5_9_9_9_REV&&(Ae=n.RGB9_E5),q===n.RGBA){const He=ve?h0:qn.getTransfer(de);me===n.FLOAT&&(Ae=n.RGBA32F),me===n.HALF_FLOAT&&(Ae=n.RGBA16F),me===n.UNSIGNED_BYTE&&(Ae=He===ar?n.SRGB8_ALPHA8:n.RGBA8),me===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),me===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)}return(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function b(ie,q){let me;return ie?q===null||q===Dc||q===xp?me=n.DEPTH24_STENCIL8:q===Po?me=n.DEPTH32F_STENCIL8:q===Xg&&(me=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):q===null||q===Dc||q===xp?me=n.DEPTH_COMPONENT24:q===Po?me=n.DEPTH_COMPONENT32F:q===Xg&&(me=n.DEPTH_COMPONENT16),me}function C(ie,q){return _(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==ss&&ie.minFilter!==mi?Math.log2(Math.max(q.width,q.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?q.mipmaps.length:1}function L(ie){const q=ie.target;q.removeEventListener("dispose",L),k(q),q.isVideoTexture&&c.delete(q)}function R(ie){const q=ie.target;q.removeEventListener("dispose",R),M(q)}function k(ie){const q=r.get(ie);if(q.__webglInit===void 0)return;const me=ie.source,de=h.get(me);if(de){const ve=de[q.__cacheKey];ve.usedTimes--,ve.usedTimes===0&&O(ie),Object.keys(de).length===0&&h.delete(me)}r.remove(ie)}function O(ie){const q=r.get(ie);n.deleteTexture(q.__webglTexture);const me=ie.source,de=h.get(me);delete de[q.__cacheKey],o.memory.textures--}function M(ie){const q=r.get(ie);if(ie.depthTexture&&(ie.depthTexture.dispose(),r.remove(ie.depthTexture)),ie.isWebGLCubeRenderTarget)for(let de=0;de<6;de++){if(Array.isArray(q.__webglFramebuffer[de]))for(let ve=0;ve<q.__webglFramebuffer[de].length;ve++)n.deleteFramebuffer(q.__webglFramebuffer[de][ve]);else n.deleteFramebuffer(q.__webglFramebuffer[de]);q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer[de])}else{if(Array.isArray(q.__webglFramebuffer))for(let de=0;de<q.__webglFramebuffer.length;de++)n.deleteFramebuffer(q.__webglFramebuffer[de]);else n.deleteFramebuffer(q.__webglFramebuffer);if(q.__webglDepthbuffer&&n.deleteRenderbuffer(q.__webglDepthbuffer),q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(q.__webglMultisampledFramebuffer),q.__webglColorRenderbuffer)for(let de=0;de<q.__webglColorRenderbuffer.length;de++)q.__webglColorRenderbuffer[de]&&n.deleteRenderbuffer(q.__webglColorRenderbuffer[de]);q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(q.__webglDepthRenderbuffer)}const me=ie.textures;for(let de=0,ve=me.length;de<ve;de++){const Ae=r.get(me[de]);Ae.__webglTexture&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),r.remove(me[de])}r.remove(ie)}let D=0;function U(){D=0}function F(){const ie=D;return ie>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),D+=1,ie}function $(ie){const q=[];return q.push(ie.wrapS),q.push(ie.wrapT),q.push(ie.wrapR||0),q.push(ie.magFilter),q.push(ie.minFilter),q.push(ie.anisotropy),q.push(ie.internalFormat),q.push(ie.format),q.push(ie.type),q.push(ie.generateMipmaps),q.push(ie.premultiplyAlpha),q.push(ie.flipY),q.push(ie.unpackAlignment),q.push(ie.colorSpace),q.join()}function Z(ie,q){const me=r.get(ie);if(ie.isVideoTexture&&we(ie),ie.isRenderTargetTexture===!1&&ie.version>0&&me.__version!==ie.version){const de=ie.image;if(de===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(de.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(me,ie,q);return}}t.bindTexture(n.TEXTURE_2D,me.__webglTexture,n.TEXTURE0+q)}function se(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){oe(me,ie,q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,me.__webglTexture,n.TEXTURE0+q)}function ce(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){oe(me,ie,q);return}t.bindTexture(n.TEXTURE_3D,me.__webglTexture,n.TEXTURE0+q)}function Q(ie,q){const me=r.get(ie);if(ie.version>0&&me.__version!==ie.version){fe(me,ie,q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,me.__webglTexture,n.TEXTURE0+q)}const ee={[gh]:n.REPEAT,[Yo]:n.CLAMP_TO_EDGE,[Jg]:n.MIRRORED_REPEAT},Y={[ss]:n.NEAREST,[Nb]:n.NEAREST_MIPMAP_NEAREST,[Kd]:n.NEAREST_MIPMAP_LINEAR,[mi]:n.LINEAR,[Mg]:n.LINEAR_MIPMAP_NEAREST,[Sa]:n.LINEAR_MIPMAP_LINEAR},V={[DG]:n.NEVER,[jG]:n.ALWAYS,[LG]:n.LESS,[r3]:n.LEQUAL,[NG]:n.EQUAL,[UG]:n.GEQUAL,[BG]:n.GREATER,[FG]:n.NOTEQUAL};function X(ie,q){if(q.type===Po&&e.has("OES_texture_float_linear")===!1&&(q.magFilter===mi||q.magFilter===Mg||q.magFilter===Kd||q.magFilter===Sa||q.minFilter===mi||q.minFilter===Mg||q.minFilter===Kd||q.minFilter===Sa)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ie,n.TEXTURE_WRAP_S,ee[q.wrapS]),n.texParameteri(ie,n.TEXTURE_WRAP_T,ee[q.wrapT]),(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ie,n.TEXTURE_WRAP_R,ee[q.wrapR]),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,Y[q.magFilter]),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,Y[q.minFilter]),q.compareFunction&&(n.texParameteri(ie,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ie,n.TEXTURE_COMPARE_FUNC,V[q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(q.magFilter===ss||q.minFilter!==Kd&&q.minFilter!==Sa||q.type===Po&&e.has("OES_texture_float_linear")===!1)return;if(q.anisotropy>1||r.get(q).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ie,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(q.anisotropy,i.getMaxAnisotropy())),r.get(q).__currentAnisotropy=q.anisotropy}}}function re(ie,q){let me=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,q.addEventListener("dispose",L));const de=q.source;let ve=h.get(de);ve===void 0&&(ve={},h.set(de,ve));const Ae=$(q);if(Ae!==ie.__cacheKey){ve[Ae]===void 0&&(ve[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,me=!0),ve[Ae].usedTimes++;const He=ve[ie.__cacheKey];He!==void 0&&(ve[ie.__cacheKey].usedTimes--,He.usedTimes===0&&O(q)),ie.__cacheKey=Ae,ie.__webglTexture=ve[Ae].texture}return me}function oe(ie,q,me){let de=n.TEXTURE_2D;(q.isDataArrayTexture||q.isCompressedArrayTexture)&&(de=n.TEXTURE_2D_ARRAY),q.isData3DTexture&&(de=n.TEXTURE_3D);const ve=re(ie,q),Ae=q.source;t.bindTexture(de,ie.__webglTexture,n.TEXTURE0+me);const He=r.get(Ae);if(Ae.version!==He.__version||ve===!0){t.activeTexture(n.TEXTURE0+me);const qe=qn.getPrimaries(qn.workingColorSpace),lt=q.colorSpace===cc?null:qn.getPrimaries(q.colorSpace),yt=q.colorSpace===cc||qe===lt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);let Ye=w(q.image,!1,i.maxTextureSize);Ye=Pe(q,Ye);const vt=s.convert(q.format,q.colorSpace),kt=s.convert(q.type);let Ft=S(q.internalFormat,vt,kt,q.colorSpace,q.isVideoTexture);X(de,q);let Et;const nn=q.mipmaps,Gt=q.isVideoTexture!==!0,Tn=He.__version===void 0||ve===!0,be=Ae.dataReady,mt=C(q,Ye);if(q.isDepthTexture)Ft=b(q.format===wp,q.type),Tn&&(Gt?t.texStorage2D(n.TEXTURE_2D,1,Ft,Ye.width,Ye.height):t.texImage2D(n.TEXTURE_2D,0,Ft,Ye.width,Ye.height,0,vt,kt,null));else if(q.isDataTexture)if(nn.length>0){Gt&&Tn&&t.texStorage2D(n.TEXTURE_2D,mt,Ft,nn[0].width,nn[0].height);for(let Ge=0,Xe=nn.length;Ge<Xe;Ge++)Et=nn[Ge],Gt?be&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,vt,kt,Et.data):t.texImage2D(n.TEXTURE_2D,Ge,Ft,Et.width,Et.height,0,vt,kt,Et.data);q.generateMipmaps=!1}else Gt?(Tn&&t.texStorage2D(n.TEXTURE_2D,mt,Ft,Ye.width,Ye.height),be&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ye.width,Ye.height,vt,kt,Ye.data)):t.texImage2D(n.TEXTURE_2D,0,Ft,Ye.width,Ye.height,0,vt,kt,Ye.data);else if(q.isCompressedTexture)if(q.isCompressedArrayTexture){Gt&&Tn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,Ft,nn[0].width,nn[0].height,Ye.depth);for(let Ge=0,Xe=nn.length;Ge<Xe;Ge++)if(Et=nn[Ge],q.format!==js)if(vt!==null)if(Gt){if(be)if(q.layerUpdates.size>0){const _t=xP(Et.width,Et.height,q.format,q.type);for(const dt of q.layerUpdates){const Xt=Et.data.subarray(dt*_t/Et.data.BYTES_PER_ELEMENT,(dt+1)*_t/Et.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,dt,Et.width,Et.height,1,vt,Xt)}q.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Et.width,Et.height,Ye.depth,vt,Et.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ge,Ft,Et.width,Et.height,Ye.depth,0,Et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Gt?be&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Et.width,Et.height,Ye.depth,vt,kt,Et.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ge,Ft,Et.width,Et.height,Ye.depth,0,vt,kt,Et.data)}else{Gt&&Tn&&t.texStorage2D(n.TEXTURE_2D,mt,Ft,nn[0].width,nn[0].height);for(let Ge=0,Xe=nn.length;Ge<Xe;Ge++)Et=nn[Ge],q.format!==js?vt!==null?Gt?be&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,vt,Et.data):t.compressedTexImage2D(n.TEXTURE_2D,Ge,Ft,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?be&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Et.width,Et.height,vt,kt,Et.data):t.texImage2D(n.TEXTURE_2D,Ge,Ft,Et.width,Et.height,0,vt,kt,Et.data)}else if(q.isDataArrayTexture)if(Gt){if(Tn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,mt,Ft,Ye.width,Ye.height,Ye.depth),be)if(q.layerUpdates.size>0){const Ge=xP(Ye.width,Ye.height,q.format,q.type);for(const Xe of q.layerUpdates){const _t=Ye.data.subarray(Xe*Ge/Ye.data.BYTES_PER_ELEMENT,(Xe+1)*Ge/Ye.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Xe,Ye.width,Ye.height,1,vt,kt,_t)}q.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ye.width,Ye.height,Ye.depth,vt,kt,Ye.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ft,Ye.width,Ye.height,Ye.depth,0,vt,kt,Ye.data);else if(q.isData3DTexture)Gt?(Tn&&t.texStorage3D(n.TEXTURE_3D,mt,Ft,Ye.width,Ye.height,Ye.depth),be&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ye.width,Ye.height,Ye.depth,vt,kt,Ye.data)):t.texImage3D(n.TEXTURE_3D,0,Ft,Ye.width,Ye.height,Ye.depth,0,vt,kt,Ye.data);else if(q.isFramebufferTexture){if(Tn)if(Gt)t.texStorage2D(n.TEXTURE_2D,mt,Ft,Ye.width,Ye.height);else{let Ge=Ye.width,Xe=Ye.height;for(let _t=0;_t<mt;_t++)t.texImage2D(n.TEXTURE_2D,_t,Ft,Ge,Xe,0,vt,kt,null),Ge>>=1,Xe>>=1}}else if(nn.length>0){if(Gt&&Tn){const Ge=Le(nn[0]);t.texStorage2D(n.TEXTURE_2D,mt,Ft,Ge.width,Ge.height)}for(let Ge=0,Xe=nn.length;Ge<Xe;Ge++)Et=nn[Ge],Gt?be&&t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,vt,kt,Et):t.texImage2D(n.TEXTURE_2D,Ge,Ft,vt,kt,Et);q.generateMipmaps=!1}else if(Gt){if(Tn){const Ge=Le(Ye);t.texStorage2D(n.TEXTURE_2D,mt,Ft,Ge.width,Ge.height)}be&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,vt,kt,Ye)}else t.texImage2D(n.TEXTURE_2D,0,Ft,vt,kt,Ye);_(q)&&v(de),He.__version=Ae.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function fe(ie,q,me){if(q.image.length!==6)return;const de=re(ie,q),ve=q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+me);const Ae=r.get(ve);if(ve.version!==Ae.__version||de===!0){t.activeTexture(n.TEXTURE0+me);const He=qn.getPrimaries(qn.workingColorSpace),qe=q.colorSpace===cc?null:qn.getPrimaries(q.colorSpace),lt=q.colorSpace===cc||He===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const yt=q.isCompressedTexture||q.image[0].isCompressedTexture,Ye=q.image[0]&&q.image[0].isDataTexture,vt=[];for(let Xe=0;Xe<6;Xe++)!yt&&!Ye?vt[Xe]=w(q.image[Xe],!0,i.maxCubemapSize):vt[Xe]=Ye?q.image[Xe].image:q.image[Xe],vt[Xe]=Pe(q,vt[Xe]);const kt=vt[0],Ft=s.convert(q.format,q.colorSpace),Et=s.convert(q.type),nn=S(q.internalFormat,Ft,Et,q.colorSpace),Gt=q.isVideoTexture!==!0,Tn=Ae.__version===void 0||de===!0,be=ve.dataReady;let mt=C(q,kt);X(n.TEXTURE_CUBE_MAP,q);let Ge;if(yt){Gt&&Tn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,mt,nn,kt.width,kt.height);for(let Xe=0;Xe<6;Xe++){Ge=vt[Xe].mipmaps;for(let _t=0;_t<Ge.length;_t++){const dt=Ge[_t];q.format!==js?Ft!==null?Gt?be&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,0,0,dt.width,dt.height,Ft,dt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,nn,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Gt?be&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,0,0,dt.width,dt.height,Ft,Et,dt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t,nn,dt.width,dt.height,0,Ft,Et,dt.data)}}}else{if(Ge=q.mipmaps,Gt&&Tn){Ge.length>0&&mt++;const Xe=Le(vt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,mt,nn,Xe.width,Xe.height)}for(let Xe=0;Xe<6;Xe++)if(Ye){Gt?be&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,vt[Xe].width,vt[Xe].height,Ft,Et,vt[Xe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,nn,vt[Xe].width,vt[Xe].height,0,Ft,Et,vt[Xe].data);for(let _t=0;_t<Ge.length;_t++){const Xt=Ge[_t].image[Xe].image;Gt?be&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,0,0,Xt.width,Xt.height,Ft,Et,Xt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,nn,Xt.width,Xt.height,0,Ft,Et,Xt.data)}}else{Gt?be&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,0,0,Ft,Et,vt[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0,nn,Ft,Et,vt[Xe]);for(let _t=0;_t<Ge.length;_t++){const dt=Ge[_t];Gt?be&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,0,0,Ft,Et,dt.image[Xe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,_t+1,nn,Ft,Et,dt.image[Xe])}}}_(q)&&v(n.TEXTURE_CUBE_MAP),Ae.__version=ve.version,q.onUpdate&&q.onUpdate(q)}ie.__version=q.version}function te(ie,q,me,de,ve,Ae){const He=s.convert(me.format,me.colorSpace),qe=s.convert(me.type),lt=S(me.internalFormat,He,qe,me.colorSpace),yt=r.get(q),Ye=r.get(me);if(Ye.__renderTarget=q,!yt.__hasExternalTextures){const vt=Math.max(1,q.width>>Ae),kt=Math.max(1,q.height>>Ae);ve===n.TEXTURE_3D||ve===n.TEXTURE_2D_ARRAY?t.texImage3D(ve,Ae,lt,vt,kt,q.depth,0,He,qe,null):t.texImage2D(ve,Ae,lt,vt,kt,0,He,qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,ie),nt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,de,ve,Ye.__webglTexture,0,Je(q)):(ve===n.TEXTURE_2D||ve>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ve<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,de,ve,Ye.__webglTexture,Ae),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(ie,q,me){if(n.bindRenderbuffer(n.RENDERBUFFER,ie),q.depthBuffer){const de=q.depthTexture,ve=de&&de.isDepthTexture?de.type:null,Ae=b(q.stencilBuffer,ve),He=q.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=Je(q);nt(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,Ae,q.width,q.height):me?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,Ae,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,q.width,q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,ie)}else{const de=q.textures;for(let ve=0;ve<de.length;ve++){const Ae=de[ve],He=s.convert(Ae.format,Ae.colorSpace),qe=s.convert(Ae.type),lt=S(Ae.internalFormat,He,qe,Ae.colorSpace),yt=Je(q);me&&nt(q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,lt,q.width,q.height):nt(q)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,yt,lt,q.width,q.height):n.renderbufferStorage(n.RENDERBUFFER,lt,q.width,q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ye(ie,q){if(q&&q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ie),!(q.depthTexture&&q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const de=r.get(q.depthTexture);de.__renderTarget=q,(!de.__webglTexture||q.depthTexture.image.width!==q.width||q.depthTexture.image.height!==q.height)&&(q.depthTexture.image.width=q.width,q.depthTexture.image.height=q.height,q.depthTexture.needsUpdate=!0),Z(q.depthTexture,0);const ve=de.__webglTexture,Ae=Je(q);if(q.depthTexture.format===op)nt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0);else if(q.depthTexture.format===wp)nt(q)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0,Ae):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0);else throw new Error("Unknown depthTexture format")}function xe(ie){const q=r.get(ie),me=ie.isWebGLCubeRenderTarget===!0;if(q.__boundDepthTexture!==ie.depthTexture){const de=ie.depthTexture;if(q.__depthDisposeCallback&&q.__depthDisposeCallback(),de){const ve=()=>{delete q.__boundDepthTexture,delete q.__depthDisposeCallback,de.removeEventListener("dispose",ve)};de.addEventListener("dispose",ve),q.__depthDisposeCallback=ve}q.__boundDepthTexture=de}if(ie.depthTexture&&!q.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");ye(q.__webglFramebuffer,ie)}else if(me){q.__webglDepthbuffer=[];for(let de=0;de<6;de++)if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer[de]),q.__webglDepthbuffer[de]===void 0)q.__webglDepthbuffer[de]=n.createRenderbuffer(),ue(q.__webglDepthbuffer[de],ie,!1);else{const ve=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ae=q.__webglDepthbuffer[de];n.bindRenderbuffer(n.RENDERBUFFER,Ae),n.framebufferRenderbuffer(n.FRAMEBUFFER,ve,n.RENDERBUFFER,Ae)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,q.__webglFramebuffer),q.__webglDepthbuffer===void 0)q.__webglDepthbuffer=n.createRenderbuffer(),ue(q.__webglDepthbuffer,ie,!1);else{const de=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=q.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,de,n.RENDERBUFFER,ve)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(ie,q,me){const de=r.get(ie);q!==void 0&&te(de.__webglFramebuffer,ie,ie.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),me!==void 0&&xe(ie)}function $e(ie){const q=ie.texture,me=r.get(ie),de=r.get(q);ie.addEventListener("dispose",R);const ve=ie.textures,Ae=ie.isWebGLCubeRenderTarget===!0,He=ve.length>1;if(He||(de.__webglTexture===void 0&&(de.__webglTexture=n.createTexture()),de.__version=q.version,o.memory.textures++),Ae){me.__webglFramebuffer=[];for(let qe=0;qe<6;qe++)if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer[qe]=[];for(let lt=0;lt<q.mipmaps.length;lt++)me.__webglFramebuffer[qe][lt]=n.createFramebuffer()}else me.__webglFramebuffer[qe]=n.createFramebuffer()}else{if(q.mipmaps&&q.mipmaps.length>0){me.__webglFramebuffer=[];for(let qe=0;qe<q.mipmaps.length;qe++)me.__webglFramebuffer[qe]=n.createFramebuffer()}else me.__webglFramebuffer=n.createFramebuffer();if(He)for(let qe=0,lt=ve.length;qe<lt;qe++){const yt=r.get(ve[qe]);yt.__webglTexture===void 0&&(yt.__webglTexture=n.createTexture(),o.memory.textures++)}if(ie.samples>0&&nt(ie)===!1){me.__webglMultisampledFramebuffer=n.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let qe=0;qe<ve.length;qe++){const lt=ve[qe];me.__webglColorRenderbuffer[qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,me.__webglColorRenderbuffer[qe]);const yt=s.convert(lt.format,lt.colorSpace),Ye=s.convert(lt.type),vt=S(lt.internalFormat,yt,Ye,lt.colorSpace,ie.isXRRenderTarget===!0),kt=Je(ie);n.renderbufferStorageMultisample(n.RENDERBUFFER,kt,vt,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,me.__webglColorRenderbuffer[qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),ie.depthBuffer&&(me.__webglDepthRenderbuffer=n.createRenderbuffer(),ue(me.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture),X(n.TEXTURE_CUBE_MAP,q);for(let qe=0;qe<6;qe++)if(q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)te(me.__webglFramebuffer[qe][lt],ie,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,lt);else te(me.__webglFramebuffer[qe],ie,q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0);_(q)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){for(let qe=0,lt=ve.length;qe<lt;qe++){const yt=ve[qe],Ye=r.get(yt);t.bindTexture(n.TEXTURE_2D,Ye.__webglTexture),X(n.TEXTURE_2D,yt),te(me.__webglFramebuffer,ie,yt,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,0),_(yt)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let qe=n.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(qe=ie.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(qe,de.__webglTexture),X(qe,q),q.mipmaps&&q.mipmaps.length>0)for(let lt=0;lt<q.mipmaps.length;lt++)te(me.__webglFramebuffer[lt],ie,q,n.COLOR_ATTACHMENT0,qe,lt);else te(me.__webglFramebuffer,ie,q,n.COLOR_ATTACHMENT0,qe,0);_(q)&&v(qe),t.unbindTexture()}ie.depthBuffer&&xe(ie)}function De(ie){const q=ie.textures;for(let me=0,de=q.length;me<de;me++){const ve=q[me];if(_(ve)){const Ae=A(ie),He=r.get(ve).__webglTexture;t.bindTexture(Ae,He),v(Ae),t.unbindTexture()}}}const Be=[],he=[];function rt(ie){if(ie.samples>0){if(nt(ie)===!1){const q=ie.textures,me=ie.width,de=ie.height;let ve=n.COLOR_BUFFER_BIT;const Ae=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=r.get(ie),qe=q.length>1;if(qe)for(let lt=0;lt<q.length;lt++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let lt=0;lt<q.length;lt++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&(ve|=n.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&(ve|=n.STENCIL_BUFFER_BIT)),qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]);const yt=r.get(q[lt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,yt,0)}n.blitFramebuffer(0,0,me,de,0,0,me,de,ve,n.NEAREST),l===!0&&(Be.length=0,he.length=0,Be.push(n.COLOR_ATTACHMENT0+lt),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Be.push(Ae),he.push(Ae),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,he)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Be))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),qe)for(let lt=0;lt<q.length;lt++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.RENDERBUFFER,He.__webglColorRenderbuffer[lt]);const yt=r.get(q[lt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+lt,n.TEXTURE_2D,yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&l){const q=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[q])}}}function Je(ie){return Math.min(i.maxSamples,ie.samples)}function nt(ie){const q=r.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&q.__useRenderToTexture!==!1}function we(ie){const q=o.render.frame;c.get(ie)!==q&&(c.set(ie,q),ie.update())}function Pe(ie,q){const me=ie.colorSpace,de=ie.format,ve=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||me!==Ap&&me!==cc&&(qn.getTransfer(me)===ar?(de!==js||ve!==wl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),q}function Le(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(u.width=ie.naturalWidth||ie.width,u.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(u.width=ie.displayWidth,u.height=ie.displayHeight):(u.width=ie.width,u.height=ie.height),u}this.allocateTextureUnit=F,this.resetTextureUnits=U,this.setTexture2D=Z,this.setTexture2DArray=se,this.setTexture3D=ce,this.setTextureCube=Q,this.rebindTextures=Te,this.setupRenderTarget=$e,this.updateRenderTargetMipmap=De,this.updateMultisampleRenderTarget=rt,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=te,this.useMultisampledRTT=nt}function q7(n,e){function t(r,i=cc){let s;const o=qn.getTransfer(i);if(r===wl)return n.UNSIGNED_BYTE;if(r===Fb)return n.UNSIGNED_SHORT_4_4_4_4;if(r===Ub)return n.UNSIGNED_SHORT_5_5_5_1;if(r===Kk)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===Wk)return n.BYTE;if(r===$k)return n.SHORT;if(r===Xg)return n.UNSIGNED_SHORT;if(r===Bb)return n.INT;if(r===Dc)return n.UNSIGNED_INT;if(r===Po)return n.FLOAT;if(r===Ey)return n.HALF_FLOAT;if(r===Jk)return n.ALPHA;if(r===Xk)return n.RGB;if(r===js)return n.RGBA;if(r===Yk)return n.LUMINANCE;if(r===Qk)return n.LUMINANCE_ALPHA;if(r===op)return n.DEPTH_COMPONENT;if(r===wp)return n.DEPTH_STENCIL;if(r===jb)return n.RED;if(r===ex)return n.RED_INTEGER;if(r===Zk)return n.RG;if(r===Vb)return n.RG_INTEGER;if(r===zb)return n.RGBA_INTEGER;if(r===L_||r===N_||r===B_||r===F_)if(o===ar)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===L_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===N_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===B_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===F_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===L_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===N_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===B_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===F_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===XA||r===YA||r===QA||r===ZA)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===XA)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===YA)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===QA)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===ZA)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===eE||r===tE||r===nE)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===eE||r===tE)return o===ar?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===nE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===rE||r===iE||r===sE||r===oE||r===aE||r===lE||r===uE||r===cE||r===fE||r===hE||r===dE||r===pE||r===mE||r===gE)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===rE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===iE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===sE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===oE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===aE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===lE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===uE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===cE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===fE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===hE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===dE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===pE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===mE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===gE)return o===ar?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===U_||r===yE||r===vE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===U_)return o===ar?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===yE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===vE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===e3||r===_E||r===xE||r===wE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===U_)return s.COMPRESSED_RED_RGTC1_EXT;if(r===_E)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===xE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===wE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===xp?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const iwe={type:"move"};class UC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new mc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new mc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new mc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const w of e.hand.values()){const _=t.getJointPose(w,r),v=this._getHandJoint(u,w);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=_.radius),v.visible=_!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(iwe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new mc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const swe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,owe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class awe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Nr,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!==r.depthNear||t.depthFar!==r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Al({vertexShader:swe,fragmentShader:owe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new gi(new Ty(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class lwe extends du{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,h=null,p=null,g=null;const w=new awe,_=t.getContextAttributes();let v=null,A=null;const S=[],b=[],C=new Ze;let L=null;const R=new Ui;R.viewport=new Jn;const k=new Ui;k.viewport=new Jn;const O=[R,k],M=new O7;let D=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let fe=S[oe];return fe===void 0&&(fe=new UC,S[oe]=fe),fe.getTargetRaySpace()},this.getControllerGrip=function(oe){let fe=S[oe];return fe===void 0&&(fe=new UC,S[oe]=fe),fe.getGripSpace()},this.getHand=function(oe){let fe=S[oe];return fe===void 0&&(fe=new UC,S[oe]=fe),fe.getHandSpace()};function F(oe){const fe=b.indexOf(oe.inputSource);if(fe===-1)return;const te=S[fe];te!==void 0&&(te.update(oe.inputSource,oe.frame,u||o),te.dispatchEvent({type:oe.type,data:oe.inputSource}))}function $(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",$),i.removeEventListener("inputsourceschange",Z);for(let oe=0;oe<S.length;oe++){const fe=b[oe];fe!==null&&(b[oe]=null,S[oe].disconnect(fe))}D=null,U=null,w.reset(),e.setRenderTarget(v),p=null,h=null,f=null,i=null,A=null,re.stop(),r.isPresenting=!1,e.setPixelRatio(L),e.setSize(C.width,C.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(oe){u=oe},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return i},this.setSession=async function(oe){if(i=oe,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",$),i.addEventListener("inputsourceschange",Z),_.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(C),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let te=null,ue=null,ye=null;_.depth&&(ye=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,te=_.stencil?wp:op,ue=_.stencil?xp:Dc);const xe={colorFormat:t.RGBA8,depthFormat:ye,scaleFactor:s};f=new XRWebGLBinding(i,t),h=f.createProjectionLayer(xe),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),A=new uu(h.textureWidth,h.textureHeight,{format:js,type:wl,depthTexture:new d3(h.textureWidth,h.textureHeight,ue,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}else{const te={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,te),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),A=new uu(p.framebufferWidth,p.framebufferHeight,{format:js,type:wl,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}A.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),re.setContext(i),re.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function Z(oe){for(let fe=0;fe<oe.removed.length;fe++){const te=oe.removed[fe],ue=b.indexOf(te);ue>=0&&(b[ue]=null,S[ue].disconnect(te))}for(let fe=0;fe<oe.added.length;fe++){const te=oe.added[fe];let ue=b.indexOf(te);if(ue===-1){for(let xe=0;xe<S.length;xe++)if(xe>=b.length){b.push(te),ue=xe;break}else if(b[xe]===null){b[xe]=te,ue=xe;break}if(ue===-1)break}const ye=S[ue];ye&&ye.connect(te)}}const se=new pe,ce=new pe;function Q(oe,fe,te){se.setFromMatrixPosition(fe.matrixWorld),ce.setFromMatrixPosition(te.matrixWorld);const ue=se.distanceTo(ce),ye=fe.projectionMatrix.elements,xe=te.projectionMatrix.elements,Te=ye[14]/(ye[10]-1),$e=ye[14]/(ye[10]+1),De=(ye[9]+1)/ye[5],Be=(ye[9]-1)/ye[5],he=(ye[8]-1)/ye[0],rt=(xe[8]+1)/xe[0],Je=Te*he,nt=Te*rt,we=ue/(-he+rt),Pe=we*-he;if(fe.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Pe),oe.translateZ(we),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),ye[10]===-1)oe.projectionMatrix.copy(fe.projectionMatrix),oe.projectionMatrixInverse.copy(fe.projectionMatrixInverse);else{const Le=Te+we,ie=$e+we,q=Je-Pe,me=nt+(ue-Pe),de=De*$e/ie*Le,ve=Be*$e/ie*Le;oe.projectionMatrix.makePerspective(q,me,de,ve,Le,ie),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function ee(oe,fe){fe===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(fe.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(i===null)return;let fe=oe.near,te=oe.far;w.texture!==null&&(w.depthNear>0&&(fe=w.depthNear),w.depthFar>0&&(te=w.depthFar)),M.near=k.near=R.near=fe,M.far=k.far=R.far=te,(D!==M.near||U!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),D=M.near,U=M.far),R.layers.mask=oe.layers.mask|2,k.layers.mask=oe.layers.mask|4,M.layers.mask=R.layers.mask|k.layers.mask;const ue=oe.parent,ye=M.cameras;ee(M,ue);for(let xe=0;xe<ye.length;xe++)ee(ye[xe],ue);ye.length===2?Q(M,R,k):M.projectionMatrix.copy(R.projectionMatrix),Y(oe,M,ue)};function Y(oe,fe,te){te===null?oe.matrix.copy(fe.matrixWorld):(oe.matrix.copy(te.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(fe.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(fe.projectionMatrix),oe.projectionMatrixInverse.copy(fe.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=Zg*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(oe){l=oe,h!==null&&(h.fixedFoveation=oe),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=oe)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(M)};let V=null;function X(oe,fe){if(c=fe.getViewerPose(u||o),g=fe,c!==null){const te=c.views;p!==null&&(e.setRenderTargetFramebuffer(A,p.framebuffer),e.setRenderTarget(A));let ue=!1;te.length!==M.cameras.length&&(M.cameras.length=0,ue=!0);for(let xe=0;xe<te.length;xe++){const Te=te[xe];let $e=null;if(p!==null)$e=p.getViewport(Te);else{const Be=f.getViewSubImage(h,Te);$e=Be.viewport,xe===0&&(e.setRenderTargetTextures(A,Be.colorTexture,h.ignoreDepthValues?void 0:Be.depthStencilTexture),e.setRenderTarget(A))}let De=O[xe];De===void 0&&(De=new Ui,De.layers.enable(xe),De.viewport=new Jn,O[xe]=De),De.matrix.fromArray(Te.transform.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale),De.projectionMatrix.fromArray(Te.projectionMatrix),De.projectionMatrixInverse.copy(De.projectionMatrix).invert(),De.viewport.set($e.x,$e.y,$e.width,$e.height),xe===0&&(M.matrix.copy(De.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ue===!0&&M.cameras.push(De)}const ye=i.enabledFeatures;if(ye&&ye.includes("depth-sensing")){const xe=f.getDepthInformation(te[0]);xe&&xe.isValid&&xe.texture&&w.init(e,xe,i.renderState)}}for(let te=0;te<S.length;te++){const ue=b[te],ye=S[te];ue!==null&&ye!==void 0&&ye.update(ue,fe,u||o)}V&&V(oe,fe),fe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:fe}),g=null}const re=new j7;re.setAnimationLoop(X),this.setAnimationLoop=function(oe){V=oe},this.dispose=function(){}}}const Cd=new na,uwe=new Kt;function cwe(n,e){function t(_,v){_.matrixAutoUpdate===!0&&_.updateMatrix(),v.value.copy(_.matrix)}function r(_,v){v.color.getRGB(_.fogColor.value,WG(n)),v.isFog?(_.fogNear.value=v.near,_.fogFar.value=v.far):v.isFogExp2&&(_.fogDensity.value=v.density)}function i(_,v,A,S,b){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(_,v):v.isMeshToonMaterial?(s(_,v),f(_,v)):v.isMeshPhongMaterial?(s(_,v),c(_,v)):v.isMeshStandardMaterial?(s(_,v),h(_,v),v.isMeshPhysicalMaterial&&p(_,v,b)):v.isMeshMatcapMaterial?(s(_,v),g(_,v)):v.isMeshDepthMaterial?s(_,v):v.isMeshDistanceMaterial?(s(_,v),w(_,v)):v.isMeshNormalMaterial?s(_,v):v.isLineBasicMaterial?(o(_,v),v.isLineDashedMaterial&&a(_,v)):v.isPointsMaterial?l(_,v,A,S):v.isSpriteMaterial?u(_,v):v.isShadowMaterial?(_.color.value.copy(v.color),_.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(_,v){_.opacity.value=v.opacity,v.color&&_.diffuse.value.copy(v.color),v.emissive&&_.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.bumpMap&&(_.bumpMap.value=v.bumpMap,t(v.bumpMap,_.bumpMapTransform),_.bumpScale.value=v.bumpScale,v.side===co&&(_.bumpScale.value*=-1)),v.normalMap&&(_.normalMap.value=v.normalMap,t(v.normalMap,_.normalMapTransform),_.normalScale.value.copy(v.normalScale),v.side===co&&_.normalScale.value.negate()),v.displacementMap&&(_.displacementMap.value=v.displacementMap,t(v.displacementMap,_.displacementMapTransform),_.displacementScale.value=v.displacementScale,_.displacementBias.value=v.displacementBias),v.emissiveMap&&(_.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,_.emissiveMapTransform)),v.specularMap&&(_.specularMap.value=v.specularMap,t(v.specularMap,_.specularMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest);const A=e.get(v),S=A.envMap,b=A.envMapRotation;S&&(_.envMap.value=S,Cd.copy(b),Cd.x*=-1,Cd.y*=-1,Cd.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Cd.y*=-1,Cd.z*=-1),_.envMapRotation.value.setFromMatrix4(uwe.makeRotationFromEuler(Cd)),_.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=v.reflectivity,_.ior.value=v.ior,_.refractionRatio.value=v.refractionRatio),v.lightMap&&(_.lightMap.value=v.lightMap,_.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,_.lightMapTransform)),v.aoMap&&(_.aoMap.value=v.aoMap,_.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,_.aoMapTransform))}function o(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform))}function a(_,v){_.dashSize.value=v.dashSize,_.totalSize.value=v.dashSize+v.gapSize,_.scale.value=v.scale}function l(_,v,A,S){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.size.value=v.size*A,_.scale.value=S*.5,v.map&&(_.map.value=v.map,t(v.map,_.uvTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function u(_,v){_.diffuse.value.copy(v.color),_.opacity.value=v.opacity,_.rotation.value=v.rotation,v.map&&(_.map.value=v.map,t(v.map,_.mapTransform)),v.alphaMap&&(_.alphaMap.value=v.alphaMap,t(v.alphaMap,_.alphaMapTransform)),v.alphaTest>0&&(_.alphaTest.value=v.alphaTest)}function c(_,v){_.specular.value.copy(v.specular),_.shininess.value=Math.max(v.shininess,1e-4)}function f(_,v){v.gradientMap&&(_.gradientMap.value=v.gradientMap)}function h(_,v){_.metalness.value=v.metalness,v.metalnessMap&&(_.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,_.metalnessMapTransform)),_.roughness.value=v.roughness,v.roughnessMap&&(_.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,_.roughnessMapTransform)),v.envMap&&(_.envMapIntensity.value=v.envMapIntensity)}function p(_,v,A){_.ior.value=v.ior,v.sheen>0&&(_.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),_.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(_.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,_.sheenColorMapTransform)),v.sheenRoughnessMap&&(_.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,_.sheenRoughnessMapTransform))),v.clearcoat>0&&(_.clearcoat.value=v.clearcoat,_.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(_.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,_.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(_.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===co&&_.clearcoatNormalScale.value.negate())),v.dispersion>0&&(_.dispersion.value=v.dispersion),v.iridescence>0&&(_.iridescence.value=v.iridescence,_.iridescenceIOR.value=v.iridescenceIOR,_.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(_.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,_.iridescenceMapTransform)),v.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),v.transmission>0&&(_.transmission.value=v.transmission,_.transmissionSamplerMap.value=A.texture,_.transmissionSamplerSize.value.set(A.width,A.height),v.transmissionMap&&(_.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,_.transmissionMapTransform)),_.thickness.value=v.thickness,v.thicknessMap&&(_.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=v.attenuationDistance,_.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(_.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(_.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=v.specularIntensity,_.specularColor.value.copy(v.specularColor),v.specularColorMap&&(_.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,_.specularColorMapTransform)),v.specularIntensityMap&&(_.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,_.specularIntensityMapTransform))}function g(_,v){v.matcap&&(_.matcap.value=v.matcap)}function w(_,v){const A=e.get(v).light;_.referencePosition.value.setFromMatrixPosition(A.matrixWorld),_.nearDistance.value=A.shadow.camera.near,_.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fwe(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(A,S){const b=S.program;r.uniformBlockBinding(A,b)}function u(A,S){let b=i[A.id];b===void 0&&(g(A),b=c(A),i[A.id]=b,A.addEventListener("dispose",_));const C=S.program;r.updateUBOMapping(A,C);const L=e.render.frame;s[A.id]!==L&&(h(A),s[A.id]=L)}function c(A){const S=f();A.__bindingPointIndex=S;const b=n.createBuffer(),C=A.__size,L=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,C,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,b),b}function f(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(A){const S=i[A.id],b=A.uniforms,C=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let L=0,R=b.length;L<R;L++){const k=Array.isArray(b[L])?b[L]:[b[L]];for(let O=0,M=k.length;O<M;O++){const D=k[O];if(p(D,L,O,C)===!0){const U=D.__offset,F=Array.isArray(D.value)?D.value:[D.value];let $=0;for(let Z=0;Z<F.length;Z++){const se=F[Z],ce=w(se);typeof se=="number"||typeof se=="boolean"?(D.__data[0]=se,n.bufferSubData(n.UNIFORM_BUFFER,U+$,D.__data)):se.isMatrix3?(D.__data[0]=se.elements[0],D.__data[1]=se.elements[1],D.__data[2]=se.elements[2],D.__data[3]=0,D.__data[4]=se.elements[3],D.__data[5]=se.elements[4],D.__data[6]=se.elements[5],D.__data[7]=0,D.__data[8]=se.elements[6],D.__data[9]=se.elements[7],D.__data[10]=se.elements[8],D.__data[11]=0):(se.toArray(D.__data,$),$+=ce.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(A,S,b,C){const L=A.value,R=S+"_"+b;if(C[R]===void 0)return typeof L=="number"||typeof L=="boolean"?C[R]=L:C[R]=L.clone(),!0;{const k=C[R];if(typeof L=="number"||typeof L=="boolean"){if(k!==L)return C[R]=L,!0}else if(k.equals(L)===!1)return k.copy(L),!0}return!1}function g(A){const S=A.uniforms;let b=0;const C=16;for(let R=0,k=S.length;R<k;R++){const O=Array.isArray(S[R])?S[R]:[S[R]];for(let M=0,D=O.length;M<D;M++){const U=O[M],F=Array.isArray(U.value)?U.value:[U.value];for(let $=0,Z=F.length;$<Z;$++){const se=F[$],ce=w(se),Q=b%C,ee=Q%ce.boundary,Y=Q+ee;b+=ee,Y!==0&&C-Y<ce.storage&&(b+=C-Y),U.__data=new Float32Array(ce.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=b,b+=ce.storage}}}const L=b%C;return L>0&&(b+=C-L),A.__size=b,A.__cache={},this}function w(A){const S={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(S.boundary=4,S.storage=4):A.isVector2?(S.boundary=8,S.storage=8):A.isVector3||A.isColor?(S.boundary=16,S.storage=12):A.isVector4?(S.boundary=16,S.storage=16):A.isMatrix3?(S.boundary=48,S.storage=48):A.isMatrix4?(S.boundary=64,S.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),S}function _(A){const S=A.target;S.removeEventListener("dispose",_);const b=o.indexOf(S.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function v(){for(const A in i)n.deleteBuffer(i[A]);o=[],i={},s={}}return{bind:l,update:u,dispose:v}}class W7{constructor(e={}){const{canvas:t=HG(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const g=new Uint32Array(4),w=new Int32Array(4);let _=null,v=null;const A=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=To,this.toneMapping=nu,this.toneMappingExposure=1;const b=this;let C=!1,L=0,R=0,k=null,O=-1,M=null;const D=new Jn,U=new Jn;let F=null;const $=new At(0);let Z=0,se=t.width,ce=t.height,Q=1,ee=null,Y=null;const V=new Jn(0,0,se,ce),X=new Jn(0,0,se,ce);let re=!1;const oe=new ox;let fe=!1,te=!1;this.transmissionResolutionScale=1;const ue=new Kt,ye=new Kt,xe=new pe,Te=new Jn,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let De=!1;function Be(){return k===null?Q:1}let he=r;function rt(ae,Me){return t.getContext(ae,Me)}try{const ae={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Q0}`),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",_t,!1),t.addEventListener("webglcontextcreationerror",dt,!1),he===null){const Me="webgl2";if(he=rt(Me,ae),he===null)throw rt(Me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let Je,nt,we,Pe,Le,ie,q,me,de,ve,Ae,He,qe,lt,yt,Ye,vt,kt,Ft,Et,nn,Gt,Tn,be;function mt(){Je=new Axe(he),Je.init(),Gt=new q7(he,Je),nt=new gxe(he,Je,e,Gt),we=new nwe(he,Je),nt.reverseDepthBuffer&&h&&we.buffers.depth.setReversed(!0),Pe=new Sxe(he),Le=new H1e,ie=new rwe(he,Je,we,Le,nt,Gt,Pe),q=new vxe(b),me=new wxe(b),de=new kve(he),Tn=new pxe(he,de),ve=new Exe(he,de,Pe,Tn),Ae=new Cxe(he,ve,de,Pe),Ft=new Txe(he,nt,ie),Ye=new yxe(Le),He=new z1e(b,q,me,Je,nt,Tn,Ye),qe=new cwe(b,Le),lt=new q1e,yt=new Y1e(Je),kt=new dxe(b,q,me,we,Ae,p,l),vt=new ewe(b,Ae,nt),be=new fwe(he,Pe,nt,we),Et=new mxe(he,Je,Pe),nn=new bxe(he,Je,Pe),Pe.programs=He.programs,b.capabilities=nt,b.extensions=Je,b.properties=Le,b.renderLists=lt,b.shadowMap=vt,b.state=we,b.info=Pe}mt();const Ge=new lwe(b,he);this.xr=Ge,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const ae=Je.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=Je.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(ae){ae!==void 0&&(Q=ae,this.setSize(se,ce,!1))},this.getSize=function(ae){return ae.set(se,ce)},this.setSize=function(ae,Me,je=!0){if(Ge.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}se=ae,ce=Me,t.width=Math.floor(ae*Q),t.height=Math.floor(Me*Q),je===!0&&(t.style.width=ae+"px",t.style.height=Me+"px"),this.setViewport(0,0,ae,Me)},this.getDrawingBufferSize=function(ae){return ae.set(se*Q,ce*Q).floor()},this.setDrawingBufferSize=function(ae,Me,je){se=ae,ce=Me,Q=je,t.width=Math.floor(ae*je),t.height=Math.floor(Me*je),this.setViewport(0,0,ae,Me)},this.getCurrentViewport=function(ae){return ae.copy(D)},this.getViewport=function(ae){return ae.copy(V)},this.setViewport=function(ae,Me,je,Oe){ae.isVector4?V.set(ae.x,ae.y,ae.z,ae.w):V.set(ae,Me,je,Oe),we.viewport(D.copy(V).multiplyScalar(Q).round())},this.getScissor=function(ae){return ae.copy(X)},this.setScissor=function(ae,Me,je,Oe){ae.isVector4?X.set(ae.x,ae.y,ae.z,ae.w):X.set(ae,Me,je,Oe),we.scissor(U.copy(X).multiplyScalar(Q).round())},this.getScissorTest=function(){return re},this.setScissorTest=function(ae){we.setScissorTest(re=ae)},this.setOpaqueSort=function(ae){ee=ae},this.setTransparentSort=function(ae){Y=ae},this.getClearColor=function(ae){return ae.copy(kt.getClearColor())},this.setClearColor=function(){kt.setClearColor.apply(kt,arguments)},this.getClearAlpha=function(){return kt.getClearAlpha()},this.setClearAlpha=function(){kt.setClearAlpha.apply(kt,arguments)},this.clear=function(ae=!0,Me=!0,je=!0){let Oe=0;if(ae){let Re=!1;if(k!==null){const et=k.texture.format;Re=et===zb||et===Vb||et===ex}if(Re){const et=k.texture.type,ht=et===wl||et===Dc||et===Xg||et===xp||et===Fb||et===Ub,gt=kt.getClearColor(),bt=kt.getClearAlpha(),jt=gt.r,Lt=gt.g,ut=gt.b;ht?(g[0]=jt,g[1]=Lt,g[2]=ut,g[3]=bt,he.clearBufferuiv(he.COLOR,0,g)):(w[0]=jt,w[1]=Lt,w[2]=ut,w[3]=bt,he.clearBufferiv(he.COLOR,0,w))}else Oe|=he.COLOR_BUFFER_BIT}Me&&(Oe|=he.DEPTH_BUFFER_BIT),je&&(Oe|=he.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),he.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",_t,!1),t.removeEventListener("webglcontextcreationerror",dt,!1),kt.dispose(),lt.dispose(),yt.dispose(),Le.dispose(),q.dispose(),me.dispose(),Ae.dispose(),Tn.dispose(),be.dispose(),He.dispose(),Ge.dispose(),Ge.removeEventListener("sessionstart",Ia),Ge.removeEventListener("sessionend",Es),qi.stop()};function Xe(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const ae=Pe.autoReset,Me=vt.enabled,je=vt.autoUpdate,Oe=vt.needsUpdate,Re=vt.type;mt(),Pe.autoReset=ae,vt.enabled=Me,vt.autoUpdate=je,vt.needsUpdate=Oe,vt.type=Re}function dt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Xt(ae){const Me=ae.target;Me.removeEventListener("dispose",Xt),Yn(Me)}function Yn(ae){Sr(ae),Le.remove(ae)}function Sr(ae){const Me=Le.get(ae).programs;Me!==void 0&&(Me.forEach(function(je){He.releaseProgram(je)}),ae.isShaderMaterial&&He.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Me,je,Oe,Re,et){Me===null&&(Me=$e);const ht=Re.isMesh&&Re.matrixWorld.determinant()<0,gt=Oa(ae,Me,je,Oe,Re);we.setMaterial(Oe,ht);let bt=je.index,jt=1;if(Oe.wireframe===!0){if(bt=ve.getWireframeAttribute(je),bt===void 0)return;jt=2}const Lt=je.drawRange,ut=je.attributes.position;let Pt=Lt.start*jt,zt=(Lt.start+Lt.count)*jt;et!==null&&(Pt=Math.max(Pt,et.start*jt),zt=Math.min(zt,(et.start+et.count)*jt)),bt!==null?(Pt=Math.max(Pt,0),zt=Math.min(zt,bt.count)):ut!=null&&(Pt=Math.max(Pt,0),zt=Math.min(zt,ut.count));const yn=zt-Pt;if(yn<0||yn===1/0)return;Tn.setup(Re,Oe,gt,je,bt);let An,an=Et;if(bt!==null&&(An=de.get(bt),an=nn,an.setIndex(An)),Re.isMesh)Oe.wireframe===!0?(we.setLineWidth(Oe.wireframeLinewidth*Be()),an.setMode(he.LINES)):an.setMode(he.TRIANGLES);else if(Re.isLine){let It=Oe.linewidth;It===void 0&&(It=1),we.setLineWidth(It*Be()),Re.isLineSegments?an.setMode(he.LINES):Re.isLineLoop?an.setMode(he.LINE_LOOP):an.setMode(he.LINE_STRIP)}else Re.isPoints?an.setMode(he.POINTS):Re.isSprite&&an.setMode(he.TRIANGLES);if(Re.isBatchedMesh)if(Re._multiDrawInstances!==null)an.renderMultiDrawInstances(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount,Re._multiDrawInstances);else if(Je.get("WEBGL_multi_draw"))an.renderMultiDraw(Re._multiDrawStarts,Re._multiDrawCounts,Re._multiDrawCount);else{const It=Re._multiDrawStarts,Mn=Re._multiDrawCounts,cn=Re._multiDrawCount,Jr=bt?de.get(bt).bytesPerElement:1,Oo=Le.get(Oe).currentProgram.getUniforms();for(let lr=0;lr<cn;lr++)Oo.setValue(he,"_gl_DrawID",lr),an.render(It[lr]/Jr,Mn[lr])}else if(Re.isInstancedMesh)an.renderInstances(Pt,yn,Re.count);else if(je.isInstancedBufferGeometry){const It=je._maxInstanceCount!==void 0?je._maxInstanceCount:1/0,Mn=Math.min(je.instanceCount,It);an.renderInstances(Pt,yn,Mn)}else an.render(Pt,yn)};function wn(ae,Me,je){ae.transparent===!0&&ae.side===dl&&ae.forceSinglePass===!1?(ae.side=co,ae.needsUpdate=!0,ko(ae,Me,je),ae.side=lu,ae.needsUpdate=!0,ko(ae,Me,je),ae.side=dl):ko(ae,Me,je)}this.compile=function(ae,Me,je=null){je===null&&(je=ae),v=yt.get(je),v.init(Me),S.push(v),je.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Me.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),ae!==je&&ae.traverseVisible(function(Re){Re.isLight&&Re.layers.test(Me.layers)&&(v.pushLight(Re),Re.castShadow&&v.pushShadow(Re))}),v.setupLights();const Oe=new Set;return ae.traverse(function(Re){if(!(Re.isMesh||Re.isPoints||Re.isLine||Re.isSprite))return;const et=Re.material;if(et)if(Array.isArray(et))for(let ht=0;ht<et.length;ht++){const gt=et[ht];wn(gt,je,Re),Oe.add(gt)}else wn(et,je,Re),Oe.add(et)}),S.pop(),v=null,Oe},this.compileAsync=function(ae,Me,je=null){const Oe=this.compile(ae,Me,je);return new Promise(Re=>{function et(){if(Oe.forEach(function(ht){Le.get(ht).currentProgram.isReady()&&Oe.delete(ht)}),Oe.size===0){Re(ae);return}setTimeout(et,10)}Je.get("KHR_parallel_shader_compile")!==null?et():setTimeout(et,10)})};let yi=null;function $n(ae){yi&&yi(ae)}function Ia(){qi.stop()}function Es(){qi.start()}const qi=new j7;qi.setAnimationLoop($n),typeof self<"u"&&qi.setContext(self),this.setAnimationLoop=function(ae){yi=ae,Ge.setAnimationLoop(ae),ae===null?qi.stop():qi.start()},Ge.addEventListener("sessionstart",Ia),Ge.addEventListener("sessionend",Es),this.render=function(ae,Me){if(Me!==void 0&&Me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Me.parent===null&&Me.matrixWorldAutoUpdate===!0&&Me.updateMatrixWorld(),Ge.enabled===!0&&Ge.isPresenting===!0&&(Ge.cameraAutoUpdate===!0&&Ge.updateCamera(Me),Me=Ge.getCamera()),ae.isScene===!0&&ae.onBeforeRender(b,ae,Me,k),v=yt.get(ae,S.length),v.init(Me),S.push(v),ye.multiplyMatrices(Me.projectionMatrix,Me.matrixWorldInverse),oe.setFromProjectionMatrix(ye),te=this.localClippingEnabled,fe=Ye.init(this.clippingPlanes,te),_=lt.get(ae,A.length),_.init(),A.push(_),Ge.enabled===!0&&Ge.isPresenting===!0){const et=b.xr.getDepthSensingMesh();et!==null&&$s(et,Me,-1/0,b.sortObjects)}$s(ae,Me,0,b.sortObjects),_.finish(),b.sortObjects===!0&&_.sort(ee,Y),De=Ge.enabled===!1||Ge.isPresenting===!1||Ge.hasDepthSensing()===!1,De&&kt.addToRenderList(_,ae),this.info.render.frame++,fe===!0&&Ye.beginShadows();const je=v.state.shadowsArray;vt.render(je,ae,Me),fe===!0&&Ye.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=_.opaque,Re=_.transmissive;if(v.setupLights(),Me.isArrayCamera){const et=Me.cameras;if(Re.length>0)for(let ht=0,gt=et.length;ht<gt;ht++){const bt=et[ht];vi(Oe,Re,ae,bt)}De&&kt.render(ae);for(let ht=0,gt=et.length;ht<gt;ht++){const bt=et[ht];ka(_,ae,bt,bt.viewport)}}else Re.length>0&&vi(Oe,Re,ae,Me),De&&kt.render(ae),ka(_,ae,Me);k!==null&&R===0&&(ie.updateMultisampleRenderTarget(k),ie.updateRenderTargetMipmap(k)),ae.isScene===!0&&ae.onAfterRender(b,ae,Me),Tn.resetDefaultState(),O=-1,M=null,S.pop(),S.length>0?(v=S[S.length-1],fe===!0&&Ye.setGlobalState(b.clippingPlanes,v.state.camera)):v=null,A.pop(),A.length>0?_=A[A.length-1]:_=null};function $s(ae,Me,je,Oe){if(ae.visible===!1)return;if(ae.layers.test(Me.layers)){if(ae.isGroup)je=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Me);else if(ae.isLight)v.pushLight(ae),ae.castShadow&&v.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||oe.intersectsSprite(ae)){Oe&&Te.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(ye);const ht=Ae.update(ae),gt=ae.material;gt.visible&&_.push(ae,ht,gt,je,Te.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||oe.intersectsObject(ae))){const ht=Ae.update(ae),gt=ae.material;if(Oe&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),Te.copy(ae.boundingSphere.center)):(ht.boundingSphere===null&&ht.computeBoundingSphere(),Te.copy(ht.boundingSphere.center)),Te.applyMatrix4(ae.matrixWorld).applyMatrix4(ye)),Array.isArray(gt)){const bt=ht.groups;for(let jt=0,Lt=bt.length;jt<Lt;jt++){const ut=bt[jt],Pt=gt[ut.materialIndex];Pt&&Pt.visible&&_.push(ae,ht,Pt,je,Te.z,ut)}}else gt.visible&&_.push(ae,ht,gt,je,Te.z,null)}}const et=ae.children;for(let ht=0,gt=et.length;ht<gt;ht++)$s(et[ht],Me,je,Oe)}function ka(ae,Me,je,Oe){const Re=ae.opaque,et=ae.transmissive,ht=ae.transparent;v.setupLightsView(je),fe===!0&&Ye.setGlobalState(b.clippingPlanes,je),Oe&&we.viewport(D.copy(Oe)),Re.length>0&&ia(Re,Me,je),et.length>0&&ia(et,Me,je),ht.length>0&&ia(ht,Me,je),we.buffers.depth.setTest(!0),we.buffers.depth.setMask(!0),we.buffers.color.setMask(!0),we.setPolygonOffset(!1)}function vi(ae,Me,je,Oe){if((je.isScene===!0?je.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[Oe.id]===void 0&&(v.state.transmissionRenderTarget[Oe.id]=new uu(1,1,{generateMipmaps:!0,type:Je.has("EXT_color_buffer_half_float")||Je.has("EXT_color_buffer_float")?Ey:wl,minFilter:Sa,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qn.workingColorSpace}));const et=v.state.transmissionRenderTarget[Oe.id],ht=Oe.viewport||D;et.setSize(ht.z*b.transmissionResolutionScale,ht.w*b.transmissionResolutionScale);const gt=b.getRenderTarget();b.setRenderTarget(et),b.getClearColor($),Z=b.getClearAlpha(),Z<1&&b.setClearColor(16777215,.5),b.clear(),De&&kt.render(je);const bt=b.toneMapping;b.toneMapping=nu;const jt=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),v.setupLightsView(Oe),fe===!0&&Ye.setGlobalState(b.clippingPlanes,Oe),ia(ae,je,Oe),ie.updateMultisampleRenderTarget(et),ie.updateRenderTargetMipmap(et),Je.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let ut=0,Pt=Me.length;ut<Pt;ut++){const zt=Me[ut],yn=zt.object,An=zt.geometry,an=zt.material,It=zt.group;if(an.side===dl&&yn.layers.test(Oe.layers)){const Mn=an.side;an.side=co,an.needsUpdate=!0,Vc(yn,je,Oe,An,an,It),an.side=Mn,an.needsUpdate=!0,Lt=!0}}Lt===!0&&(ie.updateMultisampleRenderTarget(et),ie.updateRenderTargetMipmap(et))}b.setRenderTarget(gt),b.setClearColor($,Z),jt!==void 0&&(Oe.viewport=jt),b.toneMapping=bt}function ia(ae,Me,je){const Oe=Me.isScene===!0?Me.overrideMaterial:null;for(let Re=0,et=ae.length;Re<et;Re++){const ht=ae[Re],gt=ht.object,bt=ht.geometry,jt=Oe===null?ht.material:Oe,Lt=ht.group;gt.layers.test(je.layers)&&Vc(gt,Me,je,bt,jt,Lt)}}function Vc(ae,Me,je,Oe,Re,et){ae.onBeforeRender(b,Me,je,Oe,Re,et),ae.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Re.onBeforeRender(b,Me,je,Oe,ae,et),Re.transparent===!0&&Re.side===dl&&Re.forceSinglePass===!1?(Re.side=co,Re.needsUpdate=!0,b.renderBufferDirect(je,Me,Oe,Re,ae,et),Re.side=lu,Re.needsUpdate=!0,b.renderBufferDirect(je,Me,Oe,Re,ae,et),Re.side=dl):b.renderBufferDirect(je,Me,Oe,Re,ae,et),ae.onAfterRender(b,Me,je,Oe,Re,et)}function ko(ae,Me,je){Me.isScene!==!0&&(Me=$e);const Oe=Le.get(ae),Re=v.state.lights,et=v.state.shadowsArray,ht=Re.state.version,gt=He.getParameters(ae,Re.state,et,Me,je),bt=He.getProgramCacheKey(gt);let jt=Oe.programs;Oe.environment=ae.isMeshStandardMaterial?Me.environment:null,Oe.fog=Me.fog,Oe.envMap=(ae.isMeshStandardMaterial?me:q).get(ae.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&ae.envMap===null?Me.environmentRotation:ae.envMapRotation,jt===void 0&&(ae.addEventListener("dispose",Xt),jt=new Map,Oe.programs=jt);let Lt=jt.get(bt);if(Lt!==void 0){if(Oe.currentProgram===Lt&&Oe.lightsStateVersion===ht)return bs(ae,gt),Lt}else gt.uniforms=He.getUniforms(ae),ae.onBeforeCompile(gt,b),Lt=He.acquireProgram(gt,bt),jt.set(bt,Lt),Oe.uniforms=gt.uniforms;const ut=Oe.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(ut.clippingPlanes=Ye.uniform),bs(ae,gt),Oe.needsLights=gu(ae),Oe.lightsStateVersion=ht,Oe.needsLights&&(ut.ambientLightColor.value=Re.state.ambient,ut.lightProbe.value=Re.state.probe,ut.directionalLights.value=Re.state.directional,ut.directionalLightShadows.value=Re.state.directionalShadow,ut.spotLights.value=Re.state.spot,ut.spotLightShadows.value=Re.state.spotShadow,ut.rectAreaLights.value=Re.state.rectArea,ut.ltc_1.value=Re.state.rectAreaLTC1,ut.ltc_2.value=Re.state.rectAreaLTC2,ut.pointLights.value=Re.state.point,ut.pointLightShadows.value=Re.state.pointShadow,ut.hemisphereLights.value=Re.state.hemi,ut.directionalShadowMap.value=Re.state.directionalShadowMap,ut.directionalShadowMatrix.value=Re.state.directionalShadowMatrix,ut.spotShadowMap.value=Re.state.spotShadowMap,ut.spotLightMatrix.value=Re.state.spotLightMatrix,ut.spotLightMap.value=Re.state.spotLightMap,ut.pointShadowMap.value=Re.state.pointShadowMap,ut.pointShadowMatrix.value=Re.state.pointShadowMatrix),Oe.currentProgram=Lt,Oe.uniformsList=null,Lt}function mu(ae){if(ae.uniformsList===null){const Me=ae.currentProgram.getUniforms();ae.uniformsList=Zw.seqWithValue(Me.seq,ae.uniforms)}return ae.uniformsList}function bs(ae,Me){const je=Le.get(ae);je.outputColorSpace=Me.outputColorSpace,je.batching=Me.batching,je.batchingColor=Me.batchingColor,je.instancing=Me.instancing,je.instancingColor=Me.instancingColor,je.instancingMorph=Me.instancingMorph,je.skinning=Me.skinning,je.morphTargets=Me.morphTargets,je.morphNormals=Me.morphNormals,je.morphColors=Me.morphColors,je.morphTargetsCount=Me.morphTargetsCount,je.numClippingPlanes=Me.numClippingPlanes,je.numIntersection=Me.numClipIntersection,je.vertexAlphas=Me.vertexAlphas,je.vertexTangents=Me.vertexTangents,je.toneMapping=Me.toneMapping}function Oa(ae,Me,je,Oe,Re){Me.isScene!==!0&&(Me=$e),ie.resetTextureUnits();const et=Me.fog,ht=Oe.isMeshStandardMaterial?Me.environment:null,gt=k===null?b.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:Ap,bt=(Oe.isMeshStandardMaterial?me:q).get(Oe.envMap||ht),jt=Oe.vertexColors===!0&&!!je.attributes.color&&je.attributes.color.itemSize===4,Lt=!!je.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),ut=!!je.morphAttributes.position,Pt=!!je.morphAttributes.normal,zt=!!je.morphAttributes.color;let yn=nu;Oe.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(yn=b.toneMapping);const An=je.morphAttributes.position||je.morphAttributes.normal||je.morphAttributes.color,an=An!==void 0?An.length:0,It=Le.get(Oe),Mn=v.state.lights;if(fe===!0&&(te===!0||ae!==M)){const ln=ae===M&&Oe.id===O;Ye.setState(Oe,ae,ln)}let cn=!1;Oe.version===It.__version?(It.needsLights&&It.lightsStateVersion!==Mn.state.version||It.outputColorSpace!==gt||Re.isBatchedMesh&&It.batching===!1||!Re.isBatchedMesh&&It.batching===!0||Re.isBatchedMesh&&It.batchingColor===!0&&Re.colorTexture===null||Re.isBatchedMesh&&It.batchingColor===!1&&Re.colorTexture!==null||Re.isInstancedMesh&&It.instancing===!1||!Re.isInstancedMesh&&It.instancing===!0||Re.isSkinnedMesh&&It.skinning===!1||!Re.isSkinnedMesh&&It.skinning===!0||Re.isInstancedMesh&&It.instancingColor===!0&&Re.instanceColor===null||Re.isInstancedMesh&&It.instancingColor===!1&&Re.instanceColor!==null||Re.isInstancedMesh&&It.instancingMorph===!0&&Re.morphTexture===null||Re.isInstancedMesh&&It.instancingMorph===!1&&Re.morphTexture!==null||It.envMap!==bt||Oe.fog===!0&&It.fog!==et||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==Ye.numPlanes||It.numIntersection!==Ye.numIntersection)||It.vertexAlphas!==jt||It.vertexTangents!==Lt||It.morphTargets!==ut||It.morphNormals!==Pt||It.morphColors!==zt||It.toneMapping!==yn||It.morphTargetsCount!==an)&&(cn=!0):(cn=!0,It.__version=Oe.version);let Jr=It.currentProgram;cn===!0&&(Jr=ko(Oe,Me,Re));let Oo=!1,lr=!1,Xr=!1;const fn=Jr.getUniforms(),Br=It.uniforms;if(we.useProgram(Jr.program)&&(Oo=!0,lr=!0,Xr=!0),Oe.id!==O&&(O=Oe.id,lr=!0),Oo||M!==ae){we.buffers.depth.getReversed()?(ue.copy(ae.projectionMatrix),sge(ue),oge(ue),fn.setValue(he,"projectionMatrix",ue)):fn.setValue(he,"projectionMatrix",ae.projectionMatrix),fn.setValue(he,"viewMatrix",ae.matrixWorldInverse);const ur=fn.map.cameraPosition;ur!==void 0&&ur.setValue(he,xe.setFromMatrixPosition(ae.matrixWorld)),nt.logarithmicDepthBuffer&&fn.setValue(he,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&fn.setValue(he,"isOrthographic",ae.isOrthographicCamera===!0),M!==ae&&(M=ae,lr=!0,Xr=!0)}if(Re.isSkinnedMesh){fn.setOptional(he,Re,"bindMatrix"),fn.setOptional(he,Re,"bindMatrixInverse");const ln=Re.skeleton;ln&&(ln.boneTexture===null&&ln.computeBoneTexture(),fn.setValue(he,"boneTexture",ln.boneTexture,ie))}Re.isBatchedMesh&&(fn.setOptional(he,Re,"batchingTexture"),fn.setValue(he,"batchingTexture",Re._matricesTexture,ie),fn.setOptional(he,Re,"batchingIdTexture"),fn.setValue(he,"batchingIdTexture",Re._indirectTexture,ie),fn.setOptional(he,Re,"batchingColorTexture"),Re._colorsTexture!==null&&fn.setValue(he,"batchingColorTexture",Re._colorsTexture,ie));const Fr=je.morphAttributes;if((Fr.position!==void 0||Fr.normal!==void 0||Fr.color!==void 0)&&Ft.update(Re,je,Jr),(lr||It.receiveShadow!==Re.receiveShadow)&&(It.receiveShadow=Re.receiveShadow,fn.setValue(he,"receiveShadow",Re.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(Br.envMap.value=bt,Br.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&Me.environment!==null&&(Br.envMapIntensity.value=Me.environmentIntensity),lr&&(fn.setValue(he,"toneMappingExposure",b.toneMappingExposure),It.needsLights&&Ks(Br,Xr),et&&Oe.fog===!0&&qe.refreshFogUniforms(Br,et),qe.refreshMaterialUniforms(Br,Oe,Q,ce,v.state.transmissionRenderTarget[ae.id]),Zw.upload(he,mu(It),Br,ie)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(Zw.upload(he,mu(It),Br,ie),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&fn.setValue(he,"center",Re.center),fn.setValue(he,"modelViewMatrix",Re.modelViewMatrix),fn.setValue(he,"normalMatrix",Re.normalMatrix),fn.setValue(he,"modelMatrix",Re.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const ln=Oe.uniformsGroups;for(let ur=0,hn=ln.length;ur<hn;ur++){const Yr=ln[ur];be.update(Yr,Jr),be.bind(Yr,Jr)}}return Jr}function Ks(ae,Me){ae.ambientLightColor.needsUpdate=Me,ae.lightProbe.needsUpdate=Me,ae.directionalLights.needsUpdate=Me,ae.directionalLightShadows.needsUpdate=Me,ae.pointLights.needsUpdate=Me,ae.pointLightShadows.needsUpdate=Me,ae.spotLights.needsUpdate=Me,ae.spotLightShadows.needsUpdate=Me,ae.rectAreaLights.needsUpdate=Me,ae.hemisphereLights.needsUpdate=Me}function gu(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(ae,Me,je){Le.get(ae.texture).__webglTexture=Me,Le.get(ae.depthTexture).__webglTexture=je;const Oe=Le.get(ae);Oe.__hasExternalTextures=!0,Oe.__autoAllocateDepthBuffer=je===void 0,Oe.__autoAllocateDepthBuffer||Je.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,Me){const je=Le.get(ae);je.__webglFramebuffer=Me,je.__useDefaultFramebuffer=Me===void 0};const yu=he.createFramebuffer();this.setRenderTarget=function(ae,Me=0,je=0){k=ae,L=Me,R=je;let Oe=!0,Re=null,et=!1,ht=!1;if(ae){const bt=Le.get(ae);if(bt.__useDefaultFramebuffer!==void 0)we.bindFramebuffer(he.FRAMEBUFFER,null),Oe=!1;else if(bt.__webglFramebuffer===void 0)ie.setupRenderTarget(ae);else if(bt.__hasExternalTextures)ie.rebindTextures(ae,Le.get(ae.texture).__webglTexture,Le.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const ut=ae.depthTexture;if(bt.__boundDepthTexture!==ut){if(ut!==null&&Le.has(ut)&&(ae.width!==ut.image.width||ae.height!==ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(ae)}}const jt=ae.texture;(jt.isData3DTexture||jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(ht=!0);const Lt=Le.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(Lt[Me])?Re=Lt[Me][je]:Re=Lt[Me],et=!0):ae.samples>0&&ie.useMultisampledRTT(ae)===!1?Re=Le.get(ae).__webglMultisampledFramebuffer:Array.isArray(Lt)?Re=Lt[je]:Re=Lt,D.copy(ae.viewport),U.copy(ae.scissor),F=ae.scissorTest}else D.copy(V).multiplyScalar(Q).floor(),U.copy(X).multiplyScalar(Q).floor(),F=re;if(je!==0&&(Re=yu),we.bindFramebuffer(he.FRAMEBUFFER,Re)&&Oe&&we.drawBuffers(ae,Re),we.viewport(D),we.scissor(U),we.setScissorTest(F),et){const bt=Le.get(ae.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+Me,bt.__webglTexture,je)}else if(ht){const bt=Le.get(ae.texture),jt=Me;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,bt.__webglTexture,je,jt)}else if(ae!==null&&je!==0){const bt=Le.get(ae.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,bt.__webglTexture,je)}O=-1},this.readRenderTargetPixels=function(ae,Me,je,Oe,Re,et,ht){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=Le.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&ht!==void 0&&(gt=gt[ht]),gt){we.bindFramebuffer(he.FRAMEBUFFER,gt);try{const bt=ae.texture,jt=bt.format,Lt=bt.type;if(!nt.textureFormatReadable(jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!nt.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Me>=0&&Me<=ae.width-Oe&&je>=0&&je<=ae.height-Re&&he.readPixels(Me,je,Oe,Re,Gt.convert(jt),Gt.convert(Lt),et)}finally{const bt=k!==null?Le.get(k).__webglFramebuffer:null;we.bindFramebuffer(he.FRAMEBUFFER,bt)}}},this.readRenderTargetPixelsAsync=async function(ae,Me,je,Oe,Re,et,ht){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let gt=Le.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&ht!==void 0&&(gt=gt[ht]),gt){const bt=ae.texture,jt=bt.format,Lt=bt.type;if(!nt.textureFormatReadable(jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!nt.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Me>=0&&Me<=ae.width-Oe&&je>=0&&je<=ae.height-Re){we.bindFramebuffer(he.FRAMEBUFFER,gt);const ut=he.createBuffer();he.bindBuffer(he.PIXEL_PACK_BUFFER,ut),he.bufferData(he.PIXEL_PACK_BUFFER,et.byteLength,he.STREAM_READ),he.readPixels(Me,je,Oe,Re,Gt.convert(jt),Gt.convert(Lt),0);const Pt=k!==null?Le.get(k).__webglFramebuffer:null;we.bindFramebuffer(he.FRAMEBUFFER,Pt);const zt=he.fenceSync(he.SYNC_GPU_COMMANDS_COMPLETE,0);return he.flush(),await ige(he,zt,4),he.bindBuffer(he.PIXEL_PACK_BUFFER,ut),he.getBufferSubData(he.PIXEL_PACK_BUFFER,0,et),he.deleteBuffer(ut),he.deleteSync(zt),et}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(ae,Me=null,je=0){ae.isTexture!==!0&&(ug("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Me=arguments[0]||null,ae=arguments[1]);const Oe=Math.pow(2,-je),Re=Math.floor(ae.image.width*Oe),et=Math.floor(ae.image.height*Oe),ht=Me!==null?Me.x:0,gt=Me!==null?Me.y:0;ie.setTexture2D(ae,0),he.copyTexSubImage2D(he.TEXTURE_2D,je,0,0,ht,gt,Re,et),we.unbindTexture()};const Ml=he.createFramebuffer(),Rl=he.createFramebuffer();this.copyTextureToTexture=function(ae,Me,je=null,Oe=null,Re=0,et=null){ae.isTexture!==!0&&(ug("WebGLRenderer: copyTextureToTexture function signature has changed."),Oe=arguments[0]||null,ae=arguments[1],Me=arguments[2],et=arguments[3]||0,je=null),et===null&&(Re!==0?(ug("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),et=Re,Re=0):et=0);let ht,gt,bt,jt,Lt,ut,Pt,zt,yn;const An=ae.isCompressedTexture?ae.mipmaps[et]:ae.image;if(je!==null)ht=je.max.x-je.min.x,gt=je.max.y-je.min.y,bt=je.isBox3?je.max.z-je.min.z:1,jt=je.min.x,Lt=je.min.y,ut=je.isBox3?je.min.z:0;else{const Fr=Math.pow(2,-Re);ht=Math.floor(An.width*Fr),gt=Math.floor(An.height*Fr),ae.isDataArrayTexture?bt=An.depth:ae.isData3DTexture?bt=Math.floor(An.depth*Fr):bt=1,jt=0,Lt=0,ut=0}Oe!==null?(Pt=Oe.x,zt=Oe.y,yn=Oe.z):(Pt=0,zt=0,yn=0);const an=Gt.convert(Me.format),It=Gt.convert(Me.type);let Mn;Me.isData3DTexture?(ie.setTexture3D(Me,0),Mn=he.TEXTURE_3D):Me.isDataArrayTexture||Me.isCompressedArrayTexture?(ie.setTexture2DArray(Me,0),Mn=he.TEXTURE_2D_ARRAY):(ie.setTexture2D(Me,0),Mn=he.TEXTURE_2D),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,Me.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,Me.unpackAlignment);const cn=he.getParameter(he.UNPACK_ROW_LENGTH),Jr=he.getParameter(he.UNPACK_IMAGE_HEIGHT),Oo=he.getParameter(he.UNPACK_SKIP_PIXELS),lr=he.getParameter(he.UNPACK_SKIP_ROWS),Xr=he.getParameter(he.UNPACK_SKIP_IMAGES);he.pixelStorei(he.UNPACK_ROW_LENGTH,An.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,An.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,jt),he.pixelStorei(he.UNPACK_SKIP_ROWS,Lt),he.pixelStorei(he.UNPACK_SKIP_IMAGES,ut);const fn=ae.isDataArrayTexture||ae.isData3DTexture,Br=Me.isDataArrayTexture||Me.isData3DTexture;if(ae.isDepthTexture){const Fr=Le.get(ae),ln=Le.get(Me),ur=Le.get(Fr.__renderTarget),hn=Le.get(ln.__renderTarget);we.bindFramebuffer(he.READ_FRAMEBUFFER,ur.__webglFramebuffer),we.bindFramebuffer(he.DRAW_FRAMEBUFFER,hn.__webglFramebuffer);for(let Yr=0;Yr<bt;Yr++)fn&&(he.framebufferTextureLayer(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,Le.get(ae).__webglTexture,Re,ut+Yr),he.framebufferTextureLayer(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,Le.get(Me).__webglTexture,et,yn+Yr)),he.blitFramebuffer(jt,Lt,ht,gt,Pt,zt,ht,gt,he.DEPTH_BUFFER_BIT,he.NEAREST);we.bindFramebuffer(he.READ_FRAMEBUFFER,null),we.bindFramebuffer(he.DRAW_FRAMEBUFFER,null)}else if(Re!==0||ae.isRenderTargetTexture||Le.has(ae)){const Fr=Le.get(ae),ln=Le.get(Me);we.bindFramebuffer(he.READ_FRAMEBUFFER,Ml),we.bindFramebuffer(he.DRAW_FRAMEBUFFER,Rl);for(let ur=0;ur<bt;ur++)fn?he.framebufferTextureLayer(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,Fr.__webglTexture,Re,ut+ur):he.framebufferTexture2D(he.READ_FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,Fr.__webglTexture,Re),Br?he.framebufferTextureLayer(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,ln.__webglTexture,et,yn+ur):he.framebufferTexture2D(he.DRAW_FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_2D,ln.__webglTexture,et),Re!==0?he.blitFramebuffer(jt,Lt,ht,gt,Pt,zt,ht,gt,he.COLOR_BUFFER_BIT,he.NEAREST):Br?he.copyTexSubImage3D(Mn,et,Pt,zt,yn+ur,jt,Lt,ht,gt):he.copyTexSubImage2D(Mn,et,Pt,zt,jt,Lt,ht,gt);we.bindFramebuffer(he.READ_FRAMEBUFFER,null),we.bindFramebuffer(he.DRAW_FRAMEBUFFER,null)}else Br?ae.isDataTexture||ae.isData3DTexture?he.texSubImage3D(Mn,et,Pt,zt,yn,ht,gt,bt,an,It,An.data):Me.isCompressedArrayTexture?he.compressedTexSubImage3D(Mn,et,Pt,zt,yn,ht,gt,bt,an,An.data):he.texSubImage3D(Mn,et,Pt,zt,yn,ht,gt,bt,an,It,An):ae.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,et,Pt,zt,ht,gt,an,It,An.data):ae.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,et,Pt,zt,An.width,An.height,an,An.data):he.texSubImage2D(he.TEXTURE_2D,et,Pt,zt,ht,gt,an,It,An);he.pixelStorei(he.UNPACK_ROW_LENGTH,cn),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,Jr),he.pixelStorei(he.UNPACK_SKIP_PIXELS,Oo),he.pixelStorei(he.UNPACK_SKIP_ROWS,lr),he.pixelStorei(he.UNPACK_SKIP_IMAGES,Xr),et===0&&Me.generateMipmaps&&he.generateMipmap(Mn),we.unbindTexture()},this.copyTextureToTexture3D=function(ae,Me,je=null,Oe=null,Re=0){return ae.isTexture!==!0&&(ug("WebGLRenderer: copyTextureToTexture3D function signature has changed."),je=arguments[0]||null,Oe=arguments[1]||null,ae=arguments[2],Me=arguments[3],Re=arguments[4]||0),ug('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ae,Me,je,Oe,Re)},this.initRenderTarget=function(ae){Le.get(ae).__webglFramebuffer===void 0&&ie.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?ie.setTextureCube(ae,0):ae.isData3DTexture?ie.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?ie.setTexture2DArray(ae,0):ie.setTexture2D(ae,0),we.unbindTexture()},this.resetState=function(){L=0,R=0,k=null,we.reset(),Tn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ml}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=qn._getDrawingBufferColorSpace(e),t.unpackColorSpace=qn._getUnpackColorSpace()}}const $7=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:qk,AddEquation:Wf,AddOperation:_G,AdditiveAnimationBlendMode:t3,AdditiveBlending:uP,AgXToneMapping:bG,AlphaFormat:Jk,AlwaysCompare:jG,AlwaysDepth:GA,AlwaysStencilFunc:dP,AmbientLight:T7,AnimationAction:N7,AnimationClip:ty,AnimationLoader:Mye,AnimationMixer:B7,AnimationObjectGroup:Zye,AnimationUtils:bye,ArcCurve:e7,ArrayCamera:O7,ArrowHelper:Eve,AttachedBindMode:hP,Audio:D7,AudioAnalyser:Hye,AudioContext:P3,AudioListener:jye,AudioLoader:Bye,AxesHelper:bve,BackSide:co,BasicDepthPacking:IG,BasicShadowMap:ZH,BatchedMesh:ZG,Bone:Kb,BooleanKeyframeTrack:qp,Box2:uve,Box3:zs,Box3Helper:wve,BoxGeometry:Gp,BoxHelper:xve,BufferAttribute:Xn,BufferGeometry:xn,BufferGeometryLoader:I7,ByteType:Wk,Cache:gc,Camera:nx,CameraHelper:_ve,CanvasTexture:Kge,CapsuleGeometry:Qb,CatmullRomCurve3:t7,CineonToneMapping:AG,CircleGeometry:Zb,ClampToEdgeWrapping:Yo,Clock:I3,Color:At,ColorKeyframeTrack:b3,ColorManagement:qn,CompressedArrayTexture:Wge,CompressedCubeTexture:$ge,CompressedTexture:Xb,CompressedTextureLoader:Rye,ConeGeometry:eS,ConstantAlphaFactor:gG,ConstantColorFactor:pG,Controls:Tve,CubeCamera:KG,CubeReflectionMapping:Oc,CubeRefractionMapping:mh,CubeTexture:rx,CubeTextureLoader:Pye,CubeUVReflectionMapping:Ay,CubicBezierCurve:m3,CubicBezierCurve3:n7,CubicInterpolant:x7,CullFaceBack:lP,CullFaceFront:QH,CullFaceFrontBack:cme,CullFaceNone:YH,Curve:Tl,CurvePath:i7,CustomBlending:eG,CustomToneMapping:EG,CylinderGeometry:Sy,Cylindrical:lve,Data3DTexture:qb,DataArrayTexture:tx,DataTexture:ru,DataTextureLoader:Iye,DataUtils:wge,DecrementStencilOp:wme,DecrementWrapStencilOp:Eme,DefaultLoadingManager:E7,DepthFormat:op,DepthStencilFormat:wp,DepthTexture:d3,DetachedBindMode:TG,DirectionalLight:R3,DirectionalLightHelper:vve,DiscreteInterpolant:w7,DodecahedronGeometry:tS,DoubleSide:dl,DstAlphaFactor:uG,DstColorFactor:fG,DynamicCopyUsage:Fme,DynamicDrawUsage:kme,DynamicReadUsage:Lme,EdgesGeometry:s7,EllipseCurve:Yb,EqualCompare:NG,EqualDepth:WA,EqualStencilFunc:Cme,EquirectangularReflectionMapping:u0,EquirectangularRefractionMapping:c0,Euler:na,EventDispatcher:du,ExtrudeGeometry:rS,FileLoader:ra,Float16BufferAttribute:Cge,Float32BufferAttribute:Bt,FloatType:Po,Fog:$b,FogExp2:Wb,FramebufferTexture:qge,FrontSide:lu,Frustum:ox,GLBufferAttribute:ove,GLSL1:jme,GLSL3:pP,GreaterCompare:BG,GreaterDepth:KA,GreaterEqualCompare:UG,GreaterEqualDepth:$A,GreaterEqualStencilFunc:Ime,GreaterStencilFunc:Rme,GridHelper:gve,Group:mc,HalfFloatType:Ey,HemisphereLight:S7,HemisphereLightHelper:mve,IcosahedronGeometry:iS,ImageBitmapLoader:k7,ImageLoader:x0,ImageUtils:GG,IncrementStencilOp:xme,IncrementWrapStencilOp:Ame,InstancedBufferAttribute:Ep,InstancedBufferGeometry:P7,InstancedInterleavedBuffer:sve,InstancedMesh:c3,Int16BufferAttribute:Sge,Int32BufferAttribute:Tge,Int8BufferAttribute:Age,IntType:Bb,InterleavedBuffer:ix,InterleavedBufferAttribute:yh,Interpolant:Cy,InterpolateDiscrete:Yg,InterpolateLinear:Qg,InterpolateSmooth:Qw,InvertStencilOp:bme,KeepStencilOp:Fd,KeyframeTrack:Cl,LOD:QG,LatheGeometry:ax,Layers:lp,LessCompare:LG,LessDepth:qA,LessEqualCompare:r3,LessEqualDepth:_p,LessEqualStencilFunc:Mme,LessStencilFunc:Tme,Light:Mh,LightProbe:R7,Line:Lc,Line3:cve,LineBasicMaterial:qs,LineCurve:g3,LineCurve3:r7,LineDashedMaterial:y7,LineLoop:f3,LineSegments:Sl,LinearFilter:mi,LinearInterpolant:E3,LinearMipMapLinearFilter:pme,LinearMipMapNearestFilter:dme,LinearMipmapLinearFilter:Sa,LinearMipmapNearestFilter:Mg,LinearSRGBColorSpace:Ap,LinearToneMapping:xG,LinearTransfer:h0,Loader:Ws,LoaderUtils:rh,LoadingManager:S3,LoopOnce:CG,LoopPingPong:RG,LoopRepeat:MG,LuminanceAlphaFormat:Qk,LuminanceFormat:Yk,MOUSE:lme,Material:zi,MaterialLoader:fS,MathUtils:VG,Matrix2:L3,Matrix3:_n,Matrix4:Kt,MaxEquation:iG,Mesh:gi,MeshBasicMaterial:Qo,MeshDepthMaterial:x3,MeshDistanceMaterial:w3,MeshLambertMaterial:m7,MeshMatcapMaterial:g7,MeshNormalMaterial:p7,MeshPhongMaterial:h7,MeshPhysicalMaterial:Pa,MeshStandardMaterial:cx,MeshToonMaterial:d7,MinEquation:rG,MirroredRepeatWrapping:Jg,MixOperation:vG,MultiplyBlending:fP,MultiplyOperation:Z0,NearestFilter:ss,NearestMipMapLinearFilter:hme,NearestMipMapNearestFilter:fme,NearestMipmapLinearFilter:Kd,NearestMipmapNearestFilter:Nb,NeutralToneMapping:SG,NeverCompare:DG,NeverDepth:HA,NeverStencilFunc:Sme,NoBlending:Ec,NoColorSpace:cc,NoToneMapping:nu,NormalAnimationBlendMode:Hb,NormalBlending:sp,NotEqualCompare:FG,NotEqualDepth:JA,NotEqualStencilFunc:Pme,NumberKeyframeTrack:Sp,Object3D:Dn,ObjectLoader:Lye,ObjectSpaceNormalMap:OG,OctahedronGeometry:lx,OneFactor:oG,OneMinusConstantAlphaFactor:yG,OneMinusConstantColorFactor:mG,OneMinusDstAlphaFactor:cG,OneMinusDstColorFactor:hG,OneMinusSrcAlphaFactor:zA,OneMinusSrcColorFactor:lG,OrthographicCamera:My,PCFShadowMap:Db,PCFSoftShadowMap:D_,PMREMGenerator:wP,Path:g0,PerspectiveCamera:Ui,Plane:Uf,PlaneGeometry:Ty,PlaneHelper:Ave,PointLight:M3,PointLightHelper:dve,Points:h3,PointsMaterial:Jb,PolarGridHelper:yve,PolyhedronGeometry:Ch,PositionalAudio:zye,PropertyBinding:Gn,PropertyMixer:L7,QuadraticBezierCurve:y3,QuadraticBezierCurve3:v3,Quaternion:Vs,QuaternionKeyframeTrack:Tp,QuaternionLinearInterpolant:A7,RED_GREEN_RGTC2_Format:xE,RED_RGTC1_Format:e3,REVISION:Q0,RGBADepthPacking:kG,RGBAFormat:js,RGBAIntegerFormat:zb,RGBA_ASTC_10x10_Format:pE,RGBA_ASTC_10x5_Format:fE,RGBA_ASTC_10x6_Format:hE,RGBA_ASTC_10x8_Format:dE,RGBA_ASTC_12x10_Format:mE,RGBA_ASTC_12x12_Format:gE,RGBA_ASTC_4x4_Format:rE,RGBA_ASTC_5x4_Format:iE,RGBA_ASTC_5x5_Format:sE,RGBA_ASTC_6x5_Format:oE,RGBA_ASTC_6x6_Format:aE,RGBA_ASTC_8x5_Format:lE,RGBA_ASTC_8x6_Format:uE,RGBA_ASTC_8x8_Format:cE,RGBA_BPTC_Format:U_,RGBA_ETC2_EAC_Format:nE,RGBA_PVRTC_2BPPV1_Format:ZA,RGBA_PVRTC_4BPPV1_Format:QA,RGBA_S3TC_DXT1_Format:N_,RGBA_S3TC_DXT3_Format:B_,RGBA_S3TC_DXT5_Format:F_,RGBDepthPacking:gme,RGBFormat:Xk,RGBIntegerFormat:mme,RGB_BPTC_SIGNED_Format:yE,RGB_BPTC_UNSIGNED_Format:vE,RGB_ETC1_Format:eE,RGB_ETC2_Format:tE,RGB_PVRTC_2BPPV1_Format:YA,RGB_PVRTC_4BPPV1_Format:XA,RGB_S3TC_DXT1_Format:L_,RGDepthPacking:yme,RGFormat:Zk,RGIntegerFormat:Vb,RawShaderMaterial:f7,Ray:by,Raycaster:F7,RectAreaLight:C7,RedFormat:jb,RedIntegerFormat:ex,ReinhardToneMapping:wG,RenderTarget:Gb,RenderTarget3D:tve,RenderTargetArray:nve,RepeatWrapping:gh,ReplaceStencilOp:_me,ReverseSubtractEquation:nG,RingGeometry:sS,SIGNED_RED_GREEN_RGTC2_Format:wE,SIGNED_RED_RGTC1_Format:_E,SRGBColorSpace:To,SRGBTransfer:ar,Scene:a3,ShaderChunk:Sn,ShaderLib:hl,ShaderMaterial:Al,ShadowMaterial:c7,Shape:up,ShapeGeometry:oS,ShapePath:Sve,ShapeUtils:iu,ShortType:$k,Skeleton:sx,SkeletonHelper:hve,SkinnedMesh:u3,Source:Yd,Sphere:ws,SphereGeometry:ux,Spherical:ave,SphericalHarmonics3:M7,SplineCurve:_3,SpotLight:C3,SpotLightHelper:fve,Sprite:YG,SpriteMaterial:l3,SrcAlphaFactor:VA,SrcAlphaSaturateFactor:dG,SrcColorFactor:aG,StaticCopyUsage:Bme,StaticDrawUsage:d0,StaticReadUsage:Dme,StereoCamera:Fye,StreamCopyUsage:Ume,StreamDrawUsage:Ome,StreamReadUsage:Nme,StringKeyframeTrack:Wp,SubtractEquation:tG,SubtractiveBlending:cP,TOUCH:ume,TangentSpaceNormalMap:Th,TetrahedronGeometry:aS,Texture:Nr,TextureLoader:b7,TextureUtils:Ive,TorusGeometry:lS,TorusKnotGeometry:uS,Triangle:Ro,TriangleFanDrawMode:AE,TriangleStripDrawMode:n3,TrianglesDrawMode:PG,TubeGeometry:cS,UVMapping:Lb,Uint16BufferAttribute:s3,Uint32BufferAttribute:o3,Uint8BufferAttribute:Ege,Uint8ClampedBufferAttribute:bge,Uniform:D3,UniformsGroup:ive,UniformsLib:wt,UniformsUtils:$G,UnsignedByteType:wl,UnsignedInt248Type:xp,UnsignedInt5999Type:Kk,UnsignedIntType:Dc,UnsignedShort4444Type:Fb,UnsignedShort5551Type:Ub,UnsignedShortType:Xg,VSMShadowMap:cl,Vector2:Ze,Vector3:pe,Vector4:Jn,VectorKeyframeTrack:Cp,VideoTexture:Gge,WebGL3DRenderTarget:fge,WebGLArrayRenderTarget:cge,WebGLCoordinateSystem:ml,WebGLCubeRenderTarget:JG,WebGLRenderTarget:uu,WebGLRenderer:W7,WebGLUtils:q7,WebGPUCoordinateSystem:p0,WireframeGeometry:u7,WrapAroundEnding:f0,ZeroCurvatureEnding:Jd,ZeroFactor:sG,ZeroSlopeEnding:Xd,ZeroStencilOp:vme,createCanvasElement:HG},Symbol.toStringTag,{value:"Module"}));var jC={exports:{}},If={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GU;function hwe(){return GU||(GU=1,If.ConcurrentRoot=1,If.ContinuousEventPriority=4,If.DefaultEventPriority=16,If.DiscreteEventPriority=1,If.IdleEventPriority=536870912,If.LegacyRoot=0),If}var qU;function dwe(){return qU||(qU=1,jC.exports=hwe()),jC.exports}var m_=dwe();function pwe(n){let e;const t=new Set,r=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),t.forEach(p=>p(e,h))}},i=()=>e,s=(u,c=i,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function p(){const g=c(e);if(!f(h,g)){const w=h;u(h=g,w)}}return t.add(p),()=>t.delete(p)},l={setState:r,getState:i,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const mwe=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),WU=mwe?W.useEffect:W.useLayoutEffect;function gwe(n){const e=typeof n=="function"?pwe(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=W.useReducer(_=>_+1,0),o=e.getState(),a=W.useRef(o),l=W.useRef(r),u=W.useRef(i),c=W.useRef(!1),f=W.useRef();f.current===void 0&&(f.current=r(o));let h,p=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(h=r(o),p=!i(f.current,h)),WU(()=>{p&&(f.current=h),a.current=o,l.current=r,u.current=i,c.current=!1});const g=W.useRef(o);WU(()=>{const _=()=>{try{const A=e.getState(),S=l.current(A);u.current(f.current,S)||(a.current=A,f.current=S,s())}catch{c.current=!0,s()}},v=e.subscribe(_);return e.getState()!==g.current&&_(),v},[]);const w=p?h:f.current;return W.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}const ywe=n=>typeof n=="object"&&typeof n.then=="function",Zd=[];function K7(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function J7(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Zd)if(K7(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Zd.indexOf(i);s!==-1&&Zd.splice(s,1)},promise:(ywe(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Zd.push(i),!t)throw i.promise}const vwe=(n,e,t)=>J7(n,e,!1,t),_we=(n,e,t)=>void J7(n,e,!0,t),xwe=n=>{if(n===void 0||n.length===0)Zd.splice(0,Zd.length);else{const e=Zd.find(t=>K7(n,t.keys,t.equal));e&&e.remove()}};var VC={exports:{}},zC={exports:{}},HC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $U;function wwe(){return $U||($U=1,function(n){function e(Q,ee){var Y=Q.length;Q.push(ee);e:for(;0<Y;){var V=Y-1>>>1,X=Q[V];if(0<i(X,ee))Q[V]=ee,Q[Y]=X,Y=V;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],Y=Q.pop();if(Y!==ee){Q[0]=Y;e:for(var V=0,X=Q.length,re=X>>>1;V<re;){var oe=2*(V+1)-1,fe=Q[oe],te=oe+1,ue=Q[te];if(0>i(fe,Y))te<X&&0>i(ue,fe)?(Q[V]=ue,Q[te]=Y,V=te):(Q[V]=fe,Q[oe]=Y,V=oe);else if(te<X&&0>i(ue,Y))Q[V]=ue,Q[te]=Y,V=te;else break e}}return ee}function i(Q,ee){var Y=Q.sortIndex-ee.sortIndex;return Y!==0?Y:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,p=!1,g=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(Q){for(var ee=t(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=Q)r(u),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=t(u)}}function b(Q){if(w=!1,S(Q),!g)if(t(l)!==null)g=!0,se(C);else{var ee=t(u);ee!==null&&ce(b,ee.startTime-Q)}}function C(Q,ee){g=!1,w&&(w=!1,v(k),k=-1),p=!0;var Y=h;try{for(S(ee),f=t(l);f!==null&&(!(f.expirationTime>ee)||Q&&!D());){var V=f.callback;if(typeof V=="function"){f.callback=null,h=f.priorityLevel;var X=V(f.expirationTime<=ee);ee=n.unstable_now(),typeof X=="function"?f.callback=X:f===t(l)&&r(l),S(ee)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var oe=t(u);oe!==null&&ce(b,oe.startTime-ee),re=!1}return re}finally{f=null,h=Y,p=!1}}var L=!1,R=null,k=-1,O=5,M=-1;function D(){return!(n.unstable_now()-M<O)}function U(){if(R!==null){var Q=n.unstable_now();M=Q;var ee=!0;try{ee=R(!0,Q)}finally{ee?F():(L=!1,R=null)}}else L=!1}var F;if(typeof A=="function")F=function(){A(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Z=$.port2;$.port1.onmessage=U,F=function(){Z.postMessage(null)}}else F=function(){_(U,0)};function se(Q){R=Q,L||(L=!0,F())}function ce(Q,ee){k=_(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,se(C))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var Y=h;h=ee;try{return Q()}finally{h=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=h;h=Q;try{return ee()}finally{h=Y}},n.unstable_scheduleCallback=function(Q,ee,Y){var V=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?V+Y:V):Y=V,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=Y+X,Q={id:c++,callback:ee,priorityLevel:Q,startTime:Y,expirationTime:X,sortIndex:-1},Y>V?(Q.sortIndex=Y,e(u,Q),t(l)===null&&Q===t(u)&&(w?(v(k),k=-1):w=!0,ce(b,Y-V))):(Q.sortIndex=X,e(l,Q),g||p||(g=!0,se(C))),Q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Q){var ee=h;return function(){var Y=h;h=ee;try{return Q.apply(this,arguments)}finally{h=Y}}}}(HC)),HC}var KU;function X7(){return KU||(KU=1,zC.exports=wwe()),zC.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC,JU;function Awe(){return JU||(JU=1,GC=function(e){var t={},r=vh(),i=X7(),s=Object.assign;function o(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,P=1;P<arguments.length;P++)x+="&args[]="+encodeURIComponent(arguments[P]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),g=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),C=Symbol.iterator;function L(y){return y===null||typeof y!="object"?null:(y=C&&y[C]||y["@@iterator"],typeof y=="function"?y:null)}function R(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case g:return(y.displayName||"Context")+".Consumer";case p:return(y._context.displayName||"Context")+".Provider";case w:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case A:return x=y.displayName||null,x!==null?x:R(y.type)||"Memo";case S:x=y._payload,y=y._init;try{return R(y(x))}catch{}}return null}function k(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(x);case 8:return x===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function O(y){var x=y,P=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(P=x.return),y=x.return;while(y)}return x.tag===3?P:null}function M(y){if(O(y)!==y)throw Error(o(188))}function D(y){var x=y.alternate;if(!x){if(x=O(y),x===null)throw Error(o(188));return x!==y?null:y}for(var P=y,B=x;;){var z=P.return;if(z===null)break;var K=z.alternate;if(K===null){if(B=z.return,B!==null){P=B;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===P)return M(z),y;if(K===B)return M(z),x;K=K.sibling}throw Error(o(188))}if(P.return!==B.return)P=z,B=K;else{for(var ge=!1,Ce=z.child;Ce;){if(Ce===P){ge=!0,P=z,B=K;break}if(Ce===B){ge=!0,B=z,P=K;break}Ce=Ce.sibling}if(!ge){for(Ce=K.child;Ce;){if(Ce===P){ge=!0,P=K,B=z;break}if(Ce===B){ge=!0,B=K,P=z;break}Ce=Ce.sibling}if(!ge)throw Error(o(189))}}if(P.alternate!==B)throw Error(o(190))}if(P.tag!==3)throw Error(o(188));return P.stateNode.current===P?y:x}function U(y){return y=D(y),y!==null?F(y):null}function F(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=F(y);if(x!==null)return x;y=y.sibling}return null}function $(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var x=$(y);if(x!==null)return x}y=y.sibling}return null}var Z=Array.isArray,se=e.getPublicInstance,ce=e.getRootHostContext,Q=e.getChildHostContext,ee=e.prepareForCommit,Y=e.resetAfterCommit,V=e.createInstance,X=e.appendInitialChild,re=e.finalizeInitialChildren,oe=e.prepareUpdate,fe=e.shouldSetTextContent,te=e.createTextInstance,ue=e.scheduleTimeout,ye=e.cancelTimeout,xe=e.noTimeout,Te=e.isPrimaryRenderer,$e=e.supportsMutation,De=e.supportsPersistence,Be=e.supportsHydration,he=e.getInstanceFromNode,rt=e.preparePortalMount,Je=e.getCurrentEventPriority,nt=e.detachDeletedInstance,we=e.supportsMicrotasks,Pe=e.scheduleMicrotask,Le=e.supportsTestSelectors,ie=e.findFiberRoot,q=e.getBoundingRect,me=e.getTextContent,de=e.isHiddenSubtree,ve=e.matchAccessibilityRole,Ae=e.setFocusIfFocusable,He=e.setupIntersectionObserver,qe=e.appendChild,lt=e.appendChildToContainer,yt=e.commitTextUpdate,Ye=e.commitMount,vt=e.commitUpdate,kt=e.insertBefore,Ft=e.insertInContainerBefore,Et=e.removeChild,nn=e.removeChildFromContainer,Gt=e.resetTextContent,Tn=e.hideInstance,be=e.hideTextInstance,mt=e.unhideInstance,Ge=e.unhideTextInstance,Xe=e.clearContainer,_t=e.cloneInstance,dt=e.createContainerChildSet,Xt=e.appendChildToContainerChildSet,Yn=e.finalizeContainerChildren,Sr=e.replaceContainerChildren,wn=e.cloneHiddenInstance,yi=e.cloneHiddenTextInstance,$n=e.canHydrateInstance,Ia=e.canHydrateTextInstance,Es=e.canHydrateSuspenseInstance,qi=e.isSuspenseInstancePending,$s=e.isSuspenseInstanceFallback,ka=e.registerSuspenseInstanceRetry,vi=e.getNextHydratableSibling,ia=e.getFirstHydratableChild,Vc=e.getFirstHydratableChildWithinContainer,ko=e.getFirstHydratableChildWithinSuspenseInstance,mu=e.hydrateInstance,bs=e.hydrateTextInstance,Oa=e.hydrateSuspenseInstance,Ks=e.getNextHydratableInstanceAfterSuspenseInstance,gu=e.commitHydratedContainer,yu=e.commitHydratedSuspenseInstance,Ml=e.clearSuspenseBoundary,Rl=e.clearSuspenseBoundaryFromContainer,ae=e.shouldDeleteUnhydratedTailInstances,Me=e.didNotMatchHydratedContainerTextInstance,je=e.didNotMatchHydratedTextInstance,Oe;function Re(y){if(Oe===void 0)try{throw Error()}catch(P){var x=P.stack.trim().match(/\n( *(at )?)/);Oe=x&&x[1]||""}return`
`+Oe+y}var et=!1;function ht(y,x){if(!y||et)return"";et=!0;var P=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(ct){var B=ct}Reflect.construct(y,[],x)}else{try{x.call()}catch(ct){B=ct}y.call(x.prototype)}else{try{throw Error()}catch(ct){B=ct}y()}}catch(ct){if(ct&&B&&typeof ct.stack=="string"){for(var z=ct.stack.split(`
`),K=B.stack.split(`
`),ge=z.length-1,Ce=K.length-1;1<=ge&&0<=Ce&&z[ge]!==K[Ce];)Ce--;for(;1<=ge&&0<=Ce;ge--,Ce--)if(z[ge]!==K[Ce]){if(ge!==1||Ce!==1)do if(ge--,Ce--,0>Ce||z[ge]!==K[Ce]){var Ke=`
`+z[ge].replace(" at new "," at ");return y.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",y.displayName)),Ke}while(1<=ge&&0<=Ce);break}}}finally{et=!1,Error.prepareStackTrace=P}return(y=y?y.displayName||y.name:"")?Re(y):""}var gt=Object.prototype.hasOwnProperty,bt=[],jt=-1;function Lt(y){return{current:y}}function ut(y){0>jt||(y.current=bt[jt],bt[jt]=null,jt--)}function Pt(y,x){jt++,bt[jt]=y.current,y.current=x}var zt={},yn=Lt(zt),An=Lt(!1),an=zt;function It(y,x){var P=y.type.contextTypes;if(!P)return zt;var B=y.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===x)return B.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in P)z[K]=x[K];return B&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=z),z}function Mn(y){return y=y.childContextTypes,y!=null}function cn(){ut(An),ut(yn)}function Jr(y,x,P){if(yn.current!==zt)throw Error(o(168));Pt(yn,x),Pt(An,P)}function Oo(y,x,P){var B=y.stateNode;if(x=x.childContextTypes,typeof B.getChildContext!="function")return P;B=B.getChildContext();for(var z in B)if(!(z in x))throw Error(o(108,k(y)||"Unknown",z));return s({},P,B)}function lr(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||zt,an=yn.current,Pt(yn,y),Pt(An,An.current),!0}function Xr(y,x,P){var B=y.stateNode;if(!B)throw Error(o(169));P?(y=Oo(y,x,an),B.__reactInternalMemoizedMergedChildContext=y,ut(An),ut(yn),Pt(yn,y)):ut(An),Pt(An,P)}var fn=Math.clz32?Math.clz32:ln,Br=Math.log,Fr=Math.LN2;function ln(y){return y>>>=0,y===0?32:31-(Br(y)/Fr|0)|0}var ur=64,hn=4194304;function Yr(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function vu(y,x){var P=y.pendingLanes;if(P===0)return 0;var B=0,z=y.suspendedLanes,K=y.pingedLanes,ge=P&268435455;if(ge!==0){var Ce=ge&~z;Ce!==0?B=Yr(Ce):(K&=ge,K!==0&&(B=Yr(K)))}else ge=P&~z,ge!==0?B=Yr(ge):K!==0&&(B=Yr(K));if(B===0)return 0;if(x!==0&&x!==B&&!(x&z)&&(z=B&-B,K=x&-x,z>=K||z===16&&(K&4194240)!==0))return x;if(B&4&&(B|=P&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=B;0<x;)P=31-fn(x),z=1<<P,B|=y[P],x&=~z;return B}function zc(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $p(y,x){for(var P=y.suspendedLanes,B=y.pingedLanes,z=y.expirationTimes,K=y.pendingLanes;0<K;){var ge=31-fn(K),Ce=1<<ge,Ke=z[ge];Ke===-1?(!(Ce&P)||Ce&B)&&(z[ge]=zc(Ce,x)):Ke<=x&&(y.expiredLanes|=Ce),K&=~Ce}}function Hc(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Gc(y){for(var x=[],P=0;31>P;P++)x.push(y);return x}function Da(y,x,P){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-fn(x),y[x]=P}function sa(y,x){var P=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var B=y.eventTimes;for(y=y.expirationTimes;0<P;){var z=31-fn(P),K=1<<z;x[z]=0,B[z]=-1,y[z]=-1,P&=~K}}function li(y,x){var P=y.entangledLanes|=x;for(y=y.entanglements;P;){var B=31-fn(P),z=1<<B;z&x|y[B]&x&&(y[B]|=x),P&=~z}}var dn=0;function fo(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var oa=i.unstable_scheduleCallback,Js=i.unstable_cancelCallback,aa=i.unstable_shouldYield,Iy=i.unstable_requestPaint,Ur=i.unstable_now,Wi=i.unstable_ImmediatePriority,ky=i.unstable_UserBlockingPriority,qc=i.unstable_NormalPriority,La=i.unstable_IdlePriority,la=null,Xs=null;function Do(y){if(Xs&&typeof Xs.onCommitFiberRoot=="function")try{Xs.onCommitFiberRoot(la,y,void 0,(y.current.flags&128)===128)}catch{}}function Lo(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var _i=typeof Object.is=="function"?Object.is:Lo,$i=null,sr=!1,Ph=!1;function Wc(y){$i===null?$i=[y]:$i.push(y)}function _u(y){sr=!0,Wc(y)}function os(){if(!Ph&&$i!==null){Ph=!0;var y=0,x=dn;try{var P=$i;for(dn=1;y<P.length;y++){var B=P[y];do B=B(!0);while(B!==null)}$i=null,sr=!1}catch(z){throw $i!==null&&($i=$i.slice(y+1)),oa(Wi,os),z}finally{dn=x,Ph=!1}}return null}var Ih=a.ReactCurrentBatchConfig;function Ki(y,x){if(_i(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var P=Object.keys(y),B=Object.keys(x);if(P.length!==B.length)return!1;for(B=0;B<P.length;B++){var z=P[B];if(!gt.call(x,z)||!_i(y[z],x[z]))return!1}return!0}function $c(y){switch(y.tag){case 5:return Re(y.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 2:case 15:return y=ht(y.type,!1),y;case 11:return y=ht(y.type.render,!1),y;case 1:return y=ht(y.type,!0),y;default:return""}}function yr(y,x){if(y&&y.defaultProps){x=s({},x),y=y.defaultProps;for(var P in y)x[P]===void 0&&(x[P]=y[P]);return x}return x}var Pl=Lt(null),Na=null,as=null,xu=null;function ui(){xu=as=Na=null}function ho(y,x,P){Te?(Pt(Pl,x._currentValue),x._currentValue=P):(Pt(Pl,x._currentValue2),x._currentValue2=P)}function Il(y){var x=Pl.current;ut(Pl),Te?y._currentValue=x:y._currentValue2=x}function po(y,x,P){for(;y!==null;){var B=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,B!==null&&(B.childLanes|=x)):B!==null&&(B.childLanes&x)!==x&&(B.childLanes|=x),y===P)break;y=y.return}}function kl(y,x){Na=y,xu=as=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(bi=!0),y.firstContext=null)}function ki(y){var x=Te?y._currentValue:y._currentValue2;if(xu!==y)if(y={context:y,memoizedValue:x,next:null},as===null){if(Na===null)throw Error(o(308));as=y,Na.dependencies={lanes:0,firstContext:y}}else as=as.next=y;return x}var xi=null,ls=!1;function Ba(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wu(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Ys(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function No(y,x){var P=y.updateQueue;P!==null&&(P=P.shared,Vr!==null&&y.mode&1&&!(vn&2)?(y=P.interleaved,y===null?(x.next=x,xi===null?xi=[P]:xi.push(P)):(x.next=y.next,y.next=x),P.interleaved=x):(y=P.pending,y===null?x.next=x:(x.next=y.next,y.next=x),P.pending=x))}function Fa(y,x,P){if(x=x.updateQueue,x!==null&&(x=x.shared,(P&4194240)!==0)){var B=x.lanes;B&=y.pendingLanes,P|=B,x.lanes=P,li(y,P)}}function Au(y,x){var P=y.updateQueue,B=y.alternate;if(B!==null&&(B=B.updateQueue,P===B)){var z=null,K=null;if(P=P.firstBaseUpdate,P!==null){do{var ge={eventTime:P.eventTime,lane:P.lane,tag:P.tag,payload:P.payload,callback:P.callback,next:null};K===null?z=K=ge:K=K.next=ge,P=P.next}while(P!==null);K===null?z=K=x:K=K.next=x}else z=K=x;P={baseState:B.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:B.shared,effects:B.effects},y.updateQueue=P;return}y=P.lastBaseUpdate,y===null?P.firstBaseUpdate=x:y.next=x,P.lastBaseUpdate=x}function Eu(y,x,P,B){var z=y.updateQueue;ls=!1;var K=z.firstBaseUpdate,ge=z.lastBaseUpdate,Ce=z.shared.pending;if(Ce!==null){z.shared.pending=null;var Ke=Ce,ct=Ke.next;Ke.next=null,ge===null?K=ct:ge.next=ct,ge=Ke;var Ct=y.alternate;Ct!==null&&(Ct=Ct.updateQueue,Ce=Ct.lastBaseUpdate,Ce!==ge&&(Ce===null?Ct.firstBaseUpdate=ct:Ce.next=ct,Ct.lastBaseUpdate=Ke))}if(K!==null){var rn=z.baseState;ge=0,Ct=ct=Ke=null,Ce=K;do{var Ht=Ce.lane,En=Ce.eventTime;if((B&Ht)===Ht){Ct!==null&&(Ct=Ct.next={eventTime:En,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var St=y,Bi=Ce;switch(Ht=x,En=P,Bi.tag){case 1:if(St=Bi.payload,typeof St=="function"){rn=St.call(En,rn,Ht);break e}rn=St;break e;case 3:St.flags=St.flags&-65537|128;case 0:if(St=Bi.payload,Ht=typeof St=="function"?St.call(En,rn,Ht):St,Ht==null)break e;rn=s({},rn,Ht);break e;case 2:ls=!0}}Ce.callback!==null&&Ce.lane!==0&&(y.flags|=64,Ht=z.effects,Ht===null?z.effects=[Ce]:Ht.push(Ce))}else En={eventTime:En,lane:Ht,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Ct===null?(ct=Ct=En,Ke=rn):Ct=Ct.next=En,ge|=Ht;if(Ce=Ce.next,Ce===null){if(Ce=z.shared.pending,Ce===null)break;Ht=Ce,Ce=Ht.next,Ht.next=null,z.lastBaseUpdate=Ht,z.shared.pending=null}}while(!0);if(Ct===null&&(Ke=rn),z.baseState=Ke,z.firstBaseUpdate=ct,z.lastBaseUpdate=Ct,x=z.shared.interleaved,x!==null){z=x;do ge|=z.lane,z=z.next;while(z!==x)}else K===null&&(z.shared.lanes=0);da|=ge,y.lanes=ge,y.memoizedState=rn}}function ua(y,x,P){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var B=y[x],z=B.callback;if(z!==null){if(B.callback=null,B=P,typeof z!="function")throw Error(o(191,z));z.call(B)}}}var kh=new r.Component().refs;function Kc(y,x,P,B){x=y.memoizedState,P=P(B,x),P=P==null?x:s({},x,P),y.memoizedState=P,y.lanes===0&&(y.updateQueue.baseState=P)}var bu={isMounted:function(y){return(y=y._reactInternals)?O(y)===y:!1},enqueueSetState:function(y,x,P){y=y._reactInternals;var B=zn(),z=Go(y),K=Ys(B,z);K.payload=x,P!=null&&(K.callback=P),No(y,K),x=Zi(y,z,B),x!==null&&Fa(x,y,z)},enqueueReplaceState:function(y,x,P){y=y._reactInternals;var B=zn(),z=Go(y),K=Ys(B,z);K.tag=1,K.payload=x,P!=null&&(K.callback=P),No(y,K),x=Zi(y,z,B),x!==null&&Fa(x,y,z)},enqueueForceUpdate:function(y,x){y=y._reactInternals;var P=zn(),B=Go(y),z=Ys(P,B);z.tag=2,x!=null&&(z.callback=x),No(y,z),x=Zi(y,B,P),x!==null&&Fa(x,y,B)}};function Jc(y,x,P,B,z,K,ge){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(B,K,ge):x.prototype&&x.prototype.isPureReactComponent?!Ki(P,B)||!Ki(z,K):!0}function Su(y,x,P){var B=!1,z=zt,K=x.contextType;return typeof K=="object"&&K!==null?K=ki(K):(z=Mn(x)?an:yn.current,B=x.contextTypes,K=(B=B!=null)?It(y,z):zt),x=new x(P,K),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=bu,y.stateNode=x,x._reactInternals=y,B&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=z,y.__reactInternalMemoizedMaskedChildContext=K),x}function Ji(y,x,P,B){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(P,B),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(P,B),x.state!==y&&bu.enqueueReplaceState(x,x.state,null)}function Xc(y,x,P,B){var z=y.stateNode;z.props=P,z.state=y.memoizedState,z.refs=kh,Ba(y);var K=x.contextType;typeof K=="object"&&K!==null?z.context=ki(K):(K=Mn(x)?an:yn.current,z.context=It(y,K)),z.state=y.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(Kc(y,x,K,P),z.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(x=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),x!==z.state&&bu.enqueueReplaceState(z,z.state,null),Eu(y,P,z,B),z.state=y.memoizedState),typeof z.componentDidMount=="function"&&(y.flags|=4194308)}var Ua=[],us=0,T=null,H=0,J=[],le=0,ke=null,Ve=1,at="";function kn(y,x){Ua[us++]=H,Ua[us++]=T,T=y,H=x}function Qr(y,x,P){J[le++]=Ve,J[le++]=at,J[le++]=ke,ke=y;var B=Ve;y=at;var z=32-fn(B)-1;B&=~(1<<z),P+=1;var K=32-fn(x)+z;if(30<K){var ge=z-z%5;K=(B&(1<<ge)-1).toString(32),B>>=ge,z-=ge,Ve=1<<32-fn(x)+z|P<<z|B,at=K+y}else Ve=1<<K|P<<z|B,at=y}function Rn(y){y.return!==null&&(kn(y,1),Qr(y,1,0))}function Zr(y){for(;y===T;)T=Ua[--us],Ua[us]=null,H=Ua[--us],Ua[us]=null;for(;y===ke;)ke=J[--le],J[le]=null,at=J[--le],J[le]=null,Ve=J[--le],J[le]=null}var Vn=null,vr=null,Pn=!1,Bo=!1,Xi=null;function Oy(y,x){var P=io(5,null,null,0);P.elementType="DELETED",P.stateNode=x,P.return=y,x=y.deletions,x===null?(y.deletions=[P],y.flags|=16):x.push(P)}function Dy(y,x){switch(y.tag){case 5:return x=$n(x,y.type,y.pendingProps),x!==null?(y.stateNode=x,Vn=y,vr=ia(x),!0):!1;case 6:return x=Ia(x,y.pendingProps),x!==null?(y.stateNode=x,Vn=y,vr=null,!0):!1;case 13:if(x=Es(x),x!==null){var P=ke!==null?{id:Ve,overflow:at}:null;return y.memoizedState={dehydrated:x,treeContext:P,retryLane:1073741824},P=io(18,null,null,0),P.stateNode=x,P.return=y,y.child=P,Vn=y,vr=null,!0}return!1;default:return!1}}function Kp(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Ol(y){if(Pn){var x=vr;if(x){var P=x;if(!Dy(y,x)){if(Kp(y))throw Error(o(418));x=vi(P);var B=Vn;x&&Dy(y,x)?Oy(B,P):(y.flags=y.flags&-4097|2,Pn=!1,Vn=y)}}else{if(Kp(y))throw Error(o(418));y.flags=y.flags&-4097|2,Pn=!1,Vn=y}}}function vx(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Vn=y}function Oh(y){if(!Be||y!==Vn)return!1;if(!Pn)return vx(y),Pn=!0,!1;if(y.tag!==3&&(y.tag!==5||ae(y.type)&&!fe(y.type,y.memoizedProps))){var x=vr;if(x){if(Kp(y)){for(y=vr;y;)y=vi(y);throw Error(o(418))}for(;x;)Oy(y,x),x=vi(x)}}if(vx(y),y.tag===13){if(!Be)throw Error(o(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));vr=Ks(y)}else vr=Vn?vi(y.stateNode):null;return!0}function Yc(){Be&&(vr=Vn=null,Bo=Pn=!1)}function Jp(y){Xi===null?Xi=[y]:Xi.push(y)}function Qc(y,x,P){if(y=P.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(P._owner){if(P=P._owner,P){if(P.tag!==1)throw Error(o(309));var B=P.stateNode}if(!B)throw Error(o(147,y));var z=B,K=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===K?x.ref:(x=function(ge){var Ce=z.refs;Ce===kh&&(Ce=z.refs={}),ge===null?delete Ce[K]:Ce[K]=ge},x._stringRef=K,x)}if(typeof y!="string")throw Error(o(284));if(!P._owner)throw Error(o(290,y))}return y}function Dl(y,x){throw y=Object.prototype.toString.call(x),Error(o(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function Zc(y){var x=y._init;return x(y._payload)}function _x(y){function x(Ue,Ie){if(y){var We=Ue.deletions;We===null?(Ue.deletions=[Ie],Ue.flags|=16):We.push(Ie)}}function P(Ue,Ie){if(!y)return null;for(;Ie!==null;)x(Ue,Ie),Ie=Ie.sibling;return null}function B(Ue,Ie){for(Ue=new Map;Ie!==null;)Ie.key!==null?Ue.set(Ie.key,Ie):Ue.set(Ie.index,Ie),Ie=Ie.sibling;return Ue}function z(Ue,Ie){return Ue=Za(Ue,Ie),Ue.index=0,Ue.sibling=null,Ue}function K(Ue,Ie,We){return Ue.index=We,y?(We=Ue.alternate,We!==null?(We=We.index,We<Ie?(Ue.flags|=2,Ie):We):(Ue.flags|=2,Ie)):(Ue.flags|=1048576,Ie)}function ge(Ue){return y&&Ue.alternate===null&&(Ue.flags|=2),Ue}function Ce(Ue,Ie,We,xt){return Ie===null||Ie.tag!==6?(Ie=Am(We,Ue.mode,xt),Ie.return=Ue,Ie):(Ie=z(Ie,We),Ie.return=Ue,Ie)}function Ke(Ue,Ie,We,xt){var Nt=We.type;return Nt===c?Ct(Ue,Ie,We.props.children,xt,We.key):Ie!==null&&(Ie.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===S&&Zc(Nt)===Ie.type)?(xt=z(Ie,We.props),xt.ref=Qc(Ue,Ie,We),xt.return=Ue,xt):(xt=wm(We.type,We.key,We.props,null,Ue.mode,xt),xt.ref=Qc(Ue,Ie,We),xt.return=Ue,xt)}function ct(Ue,Ie,We,xt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==We.containerInfo||Ie.stateNode.implementation!==We.implementation?(Ie=Em(We,Ue.mode,xt),Ie.return=Ue,Ie):(Ie=z(Ie,We.children||[]),Ie.return=Ue,Ie)}function Ct(Ue,Ie,We,xt,Nt){return Ie===null||Ie.tag!==7?(Ie=$u(We,Ue.mode,xt,Nt),Ie.return=Ue,Ie):(Ie=z(Ie,We),Ie.return=Ue,Ie)}function rn(Ue,Ie,We){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=Am(""+Ie,Ue.mode,We),Ie.return=Ue,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return We=wm(Ie.type,Ie.key,Ie.props,null,Ue.mode,We),We.ref=Qc(Ue,null,Ie),We.return=Ue,We;case u:return Ie=Em(Ie,Ue.mode,We),Ie.return=Ue,Ie;case S:var xt=Ie._init;return rn(Ue,xt(Ie._payload),We)}if(Z(Ie)||L(Ie))return Ie=$u(Ie,Ue.mode,We,null),Ie.return=Ue,Ie;Dl(Ue,Ie)}return null}function Ht(Ue,Ie,We,xt){var Nt=Ie!==null?Ie.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return Nt!==null?null:Ce(Ue,Ie,""+We,xt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case l:return We.key===Nt?Ke(Ue,Ie,We,xt):null;case u:return We.key===Nt?ct(Ue,Ie,We,xt):null;case S:return Nt=We._init,Ht(Ue,Ie,Nt(We._payload),xt)}if(Z(We)||L(We))return Nt!==null?null:Ct(Ue,Ie,We,xt,null);Dl(Ue,We)}return null}function En(Ue,Ie,We,xt,Nt){if(typeof xt=="string"&&xt!==""||typeof xt=="number")return Ue=Ue.get(We)||null,Ce(Ie,Ue,""+xt,Nt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case l:return Ue=Ue.get(xt.key===null?We:xt.key)||null,Ke(Ie,Ue,xt,Nt);case u:return Ue=Ue.get(xt.key===null?We:xt.key)||null,ct(Ie,Ue,xt,Nt);case S:var pn=xt._init;return En(Ue,Ie,We,pn(xt._payload),Nt)}if(Z(xt)||L(xt))return Ue=Ue.get(We)||null,Ct(Ie,Ue,xt,Nt,null);Dl(Ie,xt)}return null}function St(Ue,Ie,We,xt){for(var Nt=null,pn=null,sn=Ie,Fn=Ie=0,ti=null;sn!==null&&Fn<We.length;Fn++){sn.index>Fn?(ti=sn,sn=null):ti=sn.sibling;var Ln=Ht(Ue,sn,We[Fn],xt);if(Ln===null){sn===null&&(sn=ti);break}y&&sn&&Ln.alternate===null&&x(Ue,sn),Ie=K(Ln,Ie,Fn),pn===null?Nt=Ln:pn.sibling=Ln,pn=Ln,sn=ti}if(Fn===We.length)return P(Ue,sn),Pn&&kn(Ue,Fn),Nt;if(sn===null){for(;Fn<We.length;Fn++)sn=rn(Ue,We[Fn],xt),sn!==null&&(Ie=K(sn,Ie,Fn),pn===null?Nt=sn:pn.sibling=sn,pn=sn);return Pn&&kn(Ue,Fn),Nt}for(sn=B(Ue,sn);Fn<We.length;Fn++)ti=En(sn,Ue,Fn,We[Fn],xt),ti!==null&&(y&&ti.alternate!==null&&sn.delete(ti.key===null?Fn:ti.key),Ie=K(ti,Ie,Fn),pn===null?Nt=ti:pn.sibling=ti,pn=ti);return y&&sn.forEach(function(el){return x(Ue,el)}),Pn&&kn(Ue,Fn),Nt}function Bi(Ue,Ie,We,xt){var Nt=L(We);if(typeof Nt!="function")throw Error(o(150));if(We=Nt.call(We),We==null)throw Error(o(151));for(var pn=Nt=null,sn=Ie,Fn=Ie=0,ti=null,Ln=We.next();sn!==null&&!Ln.done;Fn++,Ln=We.next()){sn.index>Fn?(ti=sn,sn=null):ti=sn.sibling;var el=Ht(Ue,sn,Ln.value,xt);if(el===null){sn===null&&(sn=ti);break}y&&sn&&el.alternate===null&&x(Ue,sn),Ie=K(el,Ie,Fn),pn===null?Nt=el:pn.sibling=el,pn=el,sn=ti}if(Ln.done)return P(Ue,sn),Pn&&kn(Ue,Fn),Nt;if(sn===null){for(;!Ln.done;Fn++,Ln=We.next())Ln=rn(Ue,Ln.value,xt),Ln!==null&&(Ie=K(Ln,Ie,Fn),pn===null?Nt=Ln:pn.sibling=Ln,pn=Ln);return Pn&&kn(Ue,Fn),Nt}for(sn=B(Ue,sn);!Ln.done;Fn++,Ln=We.next())Ln=En(sn,Ue,Fn,Ln.value,xt),Ln!==null&&(y&&Ln.alternate!==null&&sn.delete(Ln.key===null?Fn:Ln.key),Ie=K(Ln,Ie,Fn),pn===null?Nt=Ln:pn.sibling=Ln,pn=Ln);return y&&sn.forEach(function(fv){return x(Ue,fv)}),Pn&&kn(Ue,Fn),Nt}function so(Ue,Ie,We,xt){if(typeof We=="object"&&We!==null&&We.type===c&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case l:e:{for(var Nt=We.key,pn=Ie;pn!==null;){if(pn.key===Nt){if(Nt=We.type,Nt===c){if(pn.tag===7){P(Ue,pn.sibling),Ie=z(pn,We.props.children),Ie.return=Ue,Ue=Ie;break e}}else if(pn.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===S&&Zc(Nt)===pn.type){P(Ue,pn.sibling),Ie=z(pn,We.props),Ie.ref=Qc(Ue,pn,We),Ie.return=Ue,Ue=Ie;break e}P(Ue,pn);break}else x(Ue,pn);pn=pn.sibling}We.type===c?(Ie=$u(We.props.children,Ue.mode,xt,We.key),Ie.return=Ue,Ue=Ie):(xt=wm(We.type,We.key,We.props,null,Ue.mode,xt),xt.ref=Qc(Ue,Ie,We),xt.return=Ue,Ue=xt)}return ge(Ue);case u:e:{for(pn=We.key;Ie!==null;){if(Ie.key===pn)if(Ie.tag===4&&Ie.stateNode.containerInfo===We.containerInfo&&Ie.stateNode.implementation===We.implementation){P(Ue,Ie.sibling),Ie=z(Ie,We.children||[]),Ie.return=Ue,Ue=Ie;break e}else{P(Ue,Ie);break}else x(Ue,Ie);Ie=Ie.sibling}Ie=Em(We,Ue.mode,xt),Ie.return=Ue,Ue=Ie}return ge(Ue);case S:return pn=We._init,so(Ue,Ie,pn(We._payload),xt)}if(Z(We))return St(Ue,Ie,We,xt);if(L(We))return Bi(Ue,Ie,We,xt);Dl(Ue,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Ie!==null&&Ie.tag===6?(P(Ue,Ie.sibling),Ie=z(Ie,We),Ie.return=Ue,Ue=Ie):(P(Ue,Ie),Ie=Am(We,Ue.mode,xt),Ie.return=Ue,Ue=Ie),ge(Ue)):P(Ue,Ie)}return so}var ja=_x(!0),xx=_x(!1),ef={},Ss=Lt(ef),Tu=Lt(ef),Cu=Lt(ef);function Fo(y){if(y===ef)throw Error(o(174));return y}function Xp(y,x){Pt(Cu,x),Pt(Tu,y),Pt(Ss,ef),y=ce(x),ut(Ss),Pt(Ss,y)}function tf(){ut(Ss),ut(Tu),ut(Cu)}function wx(y){var x=Fo(Cu.current),P=Fo(Ss.current);x=Q(P,y.type,x),P!==x&&(Pt(Tu,y),Pt(Ss,x))}function Ly(y){Tu.current===y&&(ut(Ss),ut(Tu))}var Tr=Lt(0);function Yp(y){for(var x=y;x!==null;){if(x.tag===13){var P=x.memoizedState;if(P!==null&&(P=P.dehydrated,P===null||qi(P)||$s(P)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Qs=[];function Mu(){for(var y=0;y<Qs.length;y++){var x=Qs[y];Te?x._workInProgressVersionPrimary=null:x._workInProgressVersionSecondary=null}Qs.length=0}var Dh=a.ReactCurrentDispatcher,Zs=a.ReactCurrentBatchConfig,Ru=0,Cr=null,wi=null,Ai=null,Qp=!1,ca=!1,Pu=0,Lh=0;function Ei(){throw Error(o(321))}function Zp(y,x){if(x===null)return!1;for(var P=0;P<x.length&&P<y.length;P++)if(!_i(y[P],x[P]))return!1;return!0}function nf(y,x,P,B,z,K){if(Ru=K,Cr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Dh.current=y===null||y.memoizedState===null?Vy:zy,y=P(B,z),ca){K=0;do{if(ca=!1,Pu=0,25<=K)throw Error(o(301));K+=1,Ai=wi=null,x.updateQueue=null,Dh.current=Hy,y=P(B,z)}while(ca)}if(Dh.current=af,x=wi!==null&&wi.next!==null,Ru=0,Ai=wi=Cr=null,Qp=!1,x)throw Error(o(300));return y}function Ll(){var y=Pu!==0;return Pu=0,y}function Uo(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Cr.memoizedState=Ai=y:Ai=Ai.next=y,Ai}function jo(){if(wi===null){var y=Cr.alternate;y=y!==null?y.memoizedState:null}else y=wi.next;var x=Ai===null?Cr.memoizedState:Ai.next;if(x!==null)Ai=x,wi=y;else{if(y===null)throw Error(o(310));wi=y,y={memoizedState:wi.memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},Ai===null?Cr.memoizedState=Ai=y:Ai=Ai.next=y}return Ai}function fa(y,x){return typeof x=="function"?x(y):x}function Nh(y){var x=jo(),P=x.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=y;var B=wi,z=B.baseQueue,K=P.pending;if(K!==null){if(z!==null){var ge=z.next;z.next=K.next,K.next=ge}B.baseQueue=z=K,P.pending=null}if(z!==null){K=z.next,B=B.baseState;var Ce=ge=null,Ke=null,ct=K;do{var Ct=ct.lane;if((Ru&Ct)===Ct)Ke!==null&&(Ke=Ke.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),B=ct.hasEagerState?ct.eagerState:y(B,ct.action);else{var rn={lane:Ct,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Ke===null?(Ce=Ke=rn,ge=B):Ke=Ke.next=rn,Cr.lanes|=Ct,da|=Ct}ct=ct.next}while(ct!==null&&ct!==K);Ke===null?ge=B:Ke.next=Ce,_i(B,x.memoizedState)||(bi=!0),x.memoizedState=B,x.baseState=ge,x.baseQueue=Ke,P.lastRenderedState=B}if(y=P.interleaved,y!==null){z=y;do K=z.lane,Cr.lanes|=K,da|=K,z=z.next;while(z!==y)}else z===null&&(P.lanes=0);return[x.memoizedState,P.dispatch]}function Bh(y){var x=jo(),P=x.queue;if(P===null)throw Error(o(311));P.lastRenderedReducer=y;var B=P.dispatch,z=P.pending,K=x.memoizedState;if(z!==null){P.pending=null;var ge=z=z.next;do K=y(K,ge.action),ge=ge.next;while(ge!==z);_i(K,x.memoizedState)||(bi=!0),x.memoizedState=K,x.baseQueue===null&&(x.baseState=K),P.lastRenderedState=K}return[K,B]}function Ny(){}function By(y,x){var P=Cr,B=jo(),z=x(),K=!_i(B.memoizedState,z);if(K&&(B.memoizedState=z,bi=!0),B=B.queue,rf(Va.bind(null,P,B,y),[y]),B.getSnapshot!==x||K||Ai!==null&&Ai.memoizedState.tag&1){if(P.flags|=2048,Uh(9,Uy.bind(null,P,B,z,x),void 0,null),Vr===null)throw Error(o(349));Ru&30||Fy(P,x,z)}return z}function Fy(y,x,P){y.flags|=16384,y={getSnapshot:x,value:P},x=Cr.updateQueue,x===null?(x={lastEffect:null,stores:null},Cr.updateQueue=x,x.stores=[y]):(P=x.stores,P===null?x.stores=[y]:P.push(y))}function Uy(y,x,P,B){x.value=P,x.getSnapshot=B,em(x)&&Zi(y,1,-1)}function Va(y,x,P){return P(function(){em(x)&&Zi(y,1,-1)})}function em(y){var x=y.getSnapshot;y=y.value;try{var P=x();return!_i(y,P)}catch{return!0}}function Fh(y){var x=Uo();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:y},x.queue=y,y=y.dispatch=CS.bind(null,Cr,y),[x.memoizedState,y]}function Uh(y,x,P,B){return y={tag:y,create:x,destroy:P,deps:B,next:null},x=Cr.updateQueue,x===null?(x={lastEffect:null,stores:null},Cr.updateQueue=x,x.lastEffect=y.next=y):(P=x.lastEffect,P===null?x.lastEffect=y.next=y:(B=P.next,P.next=y,y.next=B,x.lastEffect=y)),y}function Ax(){return jo().memoizedState}function Nl(y,x,P,B){var z=Uo();Cr.flags|=y,z.memoizedState=Uh(1|x,P,void 0,B===void 0?null:B)}function tm(y,x,P,B){var z=jo();B=B===void 0?null:B;var K=void 0;if(wi!==null){var ge=wi.memoizedState;if(K=ge.destroy,B!==null&&Zp(B,ge.deps)){z.memoizedState=Uh(x,P,K,B);return}}Cr.flags|=y,z.memoizedState=Uh(1|x,P,K,B)}function nm(y,x){return Nl(8390656,8,y,x)}function rf(y,x){return tm(2048,8,y,x)}function cr(y,x){return tm(4,2,y,x)}function rm(y,x){return tm(4,4,y,x)}function jh(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function sf(y,x,P){return P=P!=null?P.concat([y]):null,tm(4,4,jh.bind(null,x,y),P)}function im(){}function sm(y,x){var P=jo();x=x===void 0?null:x;var B=P.memoizedState;return B!==null&&x!==null&&Zp(x,B[1])?B[0]:(P.memoizedState=[y,x],y)}function of(y,x){var P=jo();x=x===void 0?null:x;var B=P.memoizedState;return B!==null&&x!==null&&Zp(x,B[1])?B[0]:(y=y(),P.memoizedState=[y,x],y)}function om(y,x){var P=dn;dn=P!==0&&4>P?P:4,y(!0);var B=Zs.transition;Zs.transition={};try{y(!1),x()}finally{dn=P,Zs.transition=B}}function Iu(){return jo().memoizedState}function Ex(y,x,P){var B=Go(y);P={lane:B,action:P,hasEagerState:!1,eagerState:null,next:null},bx(y)?jy(x,P):(Vh(y,x,P),P=zn(),y=Zi(y,B,P),y!==null&&zh(y,x,B))}function CS(y,x,P){var B=Go(y),z={lane:B,action:P,hasEagerState:!1,eagerState:null,next:null};if(bx(y))jy(x,z);else{Vh(y,x,z);var K=y.alternate;if(y.lanes===0&&(K===null||K.lanes===0)&&(K=x.lastRenderedReducer,K!==null))try{var ge=x.lastRenderedState,Ce=K(ge,P);if(z.hasEagerState=!0,z.eagerState=Ce,_i(Ce,ge))return}catch{}finally{}P=zn(),y=Zi(y,B,P),y!==null&&zh(y,x,B)}}function bx(y){var x=y.alternate;return y===Cr||x!==null&&x===Cr}function jy(y,x){ca=Qp=!0;var P=y.pending;P===null?x.next=x:(x.next=P.next,P.next=x),y.pending=x}function Vh(y,x,P){Vr!==null&&y.mode&1&&!(vn&2)?(y=x.interleaved,y===null?(P.next=P,xi===null?xi=[x]:xi.push(x)):(P.next=y.next,y.next=P),x.interleaved=P):(y=x.pending,y===null?P.next=P:(P.next=y.next,y.next=P),x.pending=P)}function zh(y,x,P){if(P&4194240){var B=x.lanes;B&=y.pendingLanes,P|=B,x.lanes=P,li(y,P)}}var af={readContext:ki,useCallback:Ei,useContext:Ei,useEffect:Ei,useImperativeHandle:Ei,useInsertionEffect:Ei,useLayoutEffect:Ei,useMemo:Ei,useReducer:Ei,useRef:Ei,useState:Ei,useDebugValue:Ei,useDeferredValue:Ei,useTransition:Ei,useMutableSource:Ei,useSyncExternalStore:Ei,useId:Ei,unstable_isNewReconciler:!1},Vy={readContext:ki,useCallback:function(y,x){return Uo().memoizedState=[y,x===void 0?null:x],y},useContext:ki,useEffect:nm,useImperativeHandle:function(y,x,P){return P=P!=null?P.concat([y]):null,Nl(4194308,4,jh.bind(null,x,y),P)},useLayoutEffect:function(y,x){return Nl(4194308,4,y,x)},useInsertionEffect:function(y,x){return Nl(4,2,y,x)},useMemo:function(y,x){var P=Uo();return x=x===void 0?null:x,y=y(),P.memoizedState=[y,x],y},useReducer:function(y,x,P){var B=Uo();return x=P!==void 0?P(x):x,B.memoizedState=B.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},B.queue=y,y=y.dispatch=Ex.bind(null,Cr,y),[B.memoizedState,y]},useRef:function(y){var x=Uo();return y={current:y},x.memoizedState=y},useState:Fh,useDebugValue:im,useDeferredValue:function(y){var x=Fh(y),P=x[0],B=x[1];return nm(function(){var z=Zs.transition;Zs.transition={};try{B(y)}finally{Zs.transition=z}},[y]),P},useTransition:function(){var y=Fh(!1),x=y[0];return y=om.bind(null,y[1]),Uo().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,P){var B=Cr,z=Uo();if(Pn){if(P===void 0)throw Error(o(407));P=P()}else{if(P=x(),Vr===null)throw Error(o(349));Ru&30||Fy(B,x,P)}z.memoizedState=P;var K={value:P,getSnapshot:x};return z.queue=K,nm(Va.bind(null,B,K,y),[y]),B.flags|=2048,Uh(9,Uy.bind(null,B,K,P,x),void 0,null),P},useId:function(){var y=Uo(),x=Vr.identifierPrefix;if(Pn){var P=at,B=Ve;P=(B&~(1<<32-fn(B)-1)).toString(32)+P,x=":"+x+"R"+P,P=Pu++,0<P&&(x+="H"+P.toString(32)),x+=":"}else P=Lh++,x=":"+x+"r"+P.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},zy={readContext:ki,useCallback:sm,useContext:ki,useEffect:rf,useImperativeHandle:sf,useInsertionEffect:cr,useLayoutEffect:rm,useMemo:of,useReducer:Nh,useRef:Ax,useState:function(){return Nh(fa)},useDebugValue:im,useDeferredValue:function(y){var x=Nh(fa),P=x[0],B=x[1];return rf(function(){var z=Zs.transition;Zs.transition={};try{B(y)}finally{Zs.transition=z}},[y]),P},useTransition:function(){var y=Nh(fa)[0],x=jo().memoizedState;return[y,x]},useMutableSource:Ny,useSyncExternalStore:By,useId:Iu,unstable_isNewReconciler:!1},Hy={readContext:ki,useCallback:sm,useContext:ki,useEffect:rf,useImperativeHandle:sf,useInsertionEffect:cr,useLayoutEffect:rm,useMemo:of,useReducer:Bh,useRef:Ax,useState:function(){return Bh(fa)},useDebugValue:im,useDeferredValue:function(y){var x=Bh(fa),P=x[0],B=x[1];return rf(function(){var z=Zs.transition;Zs.transition={};try{B(y)}finally{Zs.transition=z}},[y]),P},useTransition:function(){var y=Bh(fa)[0],x=jo().memoizedState;return[y,x]},useMutableSource:Ny,useSyncExternalStore:By,useId:Iu,unstable_isNewReconciler:!1};function Gy(y,x){try{var P="",B=x;do P+=$c(B),B=B.return;while(B);var z=P}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:y,source:x,stack:z}}function am(y,x){try{console.error(x.value)}catch(P){setTimeout(function(){throw P})}}var MS=typeof WeakMap=="function"?WeakMap:Map;function Sx(y,x,P){P=Ys(-1,P),P.tag=3,P.payload={element:null};var B=x.value;return P.callback=function(){df||(df=!0,mr=B),am(y,x)},P}function lm(y,x,P){P=Ys(-1,P),P.tag=3;var B=y.type.getDerivedStateFromError;if(typeof B=="function"){var z=x.value;P.payload=function(){return B(z)},P.callback=function(){am(y,x)}}var K=y.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(P.callback=function(){am(y,x),typeof B!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var ge=x.stack;this.componentDidCatch(x.value,{componentStack:ge!==null?ge:""})}),P}function za(y,x,P){var B=y.pingCache;if(B===null){B=y.pingCache=new MS;var z=new Set;B.set(x,z)}else z=B.get(x),z===void 0&&(z=new Set,B.set(x,z));z.has(P)||(z.add(P),y=lv.bind(null,y,x,P),x.then(y,y))}function qy(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function ku(y,x,P,B,z){return y.mode&1?(y.flags|=65536,y.lanes=z,y):(y===x?y.flags|=65536:(y.flags|=128,P.flags|=131072,P.flags&=-52805,P.tag===1&&(P.alternate===null?P.tag=17:(x=Ys(-1,1),x.tag=2,No(P,x))),P.lanes|=1),y)}function ci(y){y.flags|=4}function lf(y,x){if(y!==null&&y.child===x.child)return!0;if(x.flags&16)return!1;for(y=x.child;y!==null;){if(y.flags&12854||y.subtreeFlags&12854)return!1;y=y.sibling}return!0}var eo,Ou,um,cm;if($e)eo=function(y,x){for(var P=x.child;P!==null;){if(P.tag===5||P.tag===6)X(y,P.stateNode);else if(P.tag!==4&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===x)break;for(;P.sibling===null;){if(P.return===null||P.return===x)return;P=P.return}P.sibling.return=P.return,P=P.sibling}},Ou=function(){},um=function(y,x,P,B,z){if(y=y.memoizedProps,y!==B){var K=x.stateNode,ge=Fo(Ss.current);P=oe(K,P,y,B,z,ge),(x.updateQueue=P)&&ci(x)}},cm=function(y,x,P,B){P!==B&&ci(x)};else if(De){eo=function(y,x,P,B){for(var z=x.child;z!==null;){if(z.tag===5){var K=z.stateNode;P&&B&&(K=wn(K,z.type,z.memoizedProps,z)),X(y,K)}else if(z.tag===6)K=z.stateNode,P&&B&&(K=yi(K,z.memoizedProps,z)),X(y,K);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)K=z.child,K!==null&&(K.return=z),eo(y,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===x)break;for(;z.sibling===null;){if(z.return===null||z.return===x)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};var Bl=function(y,x,P,B){for(var z=x.child;z!==null;){if(z.tag===5){var K=z.stateNode;P&&B&&(K=wn(K,z.type,z.memoizedProps,z)),Xt(y,K)}else if(z.tag===6)K=z.stateNode,P&&B&&(K=yi(K,z.memoizedProps,z)),Xt(y,K);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)K=z.child,K!==null&&(K.return=z),Bl(y,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===x)break;for(;z.sibling===null;){if(z.return===null||z.return===x)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};Ou=function(y,x){var P=x.stateNode;if(!lf(y,x)){y=P.containerInfo;var B=dt(y);Bl(B,x,!1,!1),P.pendingChildren=B,ci(x),Yn(y,B)}},um=function(y,x,P,B,z){var K=y.stateNode,ge=y.memoizedProps;if((y=lf(y,x))&&ge===B)x.stateNode=K;else{var Ce=x.stateNode,Ke=Fo(Ss.current),ct=null;ge!==B&&(ct=oe(Ce,P,ge,B,z,Ke)),y&&ct===null?x.stateNode=K:(K=_t(K,ct,P,ge,B,x,y,Ce),re(K,P,B,z,Ke)&&ci(x),x.stateNode=K,y?ci(x):eo(K,x,!1,!1))}},cm=function(y,x,P,B){P!==B?(y=Fo(Cu.current),P=Fo(Ss.current),x.stateNode=te(B,y,P,x),ci(x)):x.stateNode=y.stateNode}}else Ou=function(){},um=function(){},cm=function(){};function Ha(y,x){if(!Pn)switch(y.tailMode){case"hidden":x=y.tail;for(var P=null;x!==null;)x.alternate!==null&&(P=x),x=x.sibling;P===null?y.tail=null:P.sibling=null;break;case"collapsed":P=y.tail;for(var B=null;P!==null;)P.alternate!==null&&(B=P),P=P.sibling;B===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:B.sibling=null}}function jr(y){var x=y.alternate!==null&&y.alternate.child===y.child,P=0,B=0;if(x)for(var z=y.child;z!==null;)P|=z.lanes|z.childLanes,B|=z.subtreeFlags&14680064,B|=z.flags&14680064,z.return=y,z=z.sibling;else for(z=y.child;z!==null;)P|=z.lanes|z.childLanes,B|=z.subtreeFlags,B|=z.flags,z.return=y,z=z.sibling;return y.subtreeFlags|=B,y.childLanes=P,x}function fm(y,x,P){var B=x.pendingProps;switch(Zr(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(x),null;case 1:return Mn(x.type)&&cn(),jr(x),null;case 3:return B=x.stateNode,tf(),ut(An),ut(yn),Mu(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(y===null||y.child===null)&&(Oh(x)?ci(x):y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Xi!==null&&(td(Xi),Xi=null))),Ou(y,x),jr(x),null;case 5:Ly(x),P=Fo(Cu.current);var z=x.type;if(y!==null&&x.stateNode!=null)um(y,x,z,B,P),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!B){if(x.stateNode===null)throw Error(o(166));return jr(x),null}if(y=Fo(Ss.current),Oh(x)){if(!Be)throw Error(o(175));y=mu(x.stateNode,x.type,x.memoizedProps,P,y,x,!Bo),x.updateQueue=y,y!==null&&ci(x)}else{var K=V(z,B,P,y,x);eo(K,x,!1,!1),x.stateNode=K,re(K,z,B,P,y)&&ci(x)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return jr(x),null;case 6:if(y&&x.stateNode!=null)cm(y,x,y.memoizedProps,B);else{if(typeof B!="string"&&x.stateNode===null)throw Error(o(166));if(y=Fo(Cu.current),P=Fo(Ss.current),Oh(x)){if(!Be)throw Error(o(176));if(y=x.stateNode,B=x.memoizedProps,(P=bs(y,B,x,!Bo))&&(z=Vn,z!==null))switch(K=(z.mode&1)!==0,z.tag){case 3:Me(z.stateNode.containerInfo,y,B,K);break;case 5:je(z.type,z.memoizedProps,z.stateNode,y,B,K)}P&&ci(x)}else x.stateNode=te(B,y,P,x)}return jr(x),null;case 13:if(ut(Tr),B=x.memoizedState,Pn&&vr!==null&&x.mode&1&&!(x.flags&128)){for(y=vr;y;)y=vi(y);return Yc(),x.flags|=98560,x}if(B!==null&&B.dehydrated!==null){if(B=Oh(x),y===null){if(!B)throw Error(o(318));if(!Be)throw Error(o(344));if(y=x.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));Oa(y,x)}else Yc(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;return jr(x),null}return Xi!==null&&(td(Xi),Xi=null),x.flags&128?(x.lanes=P,x):(B=B!==null,P=!1,y===null?Oh(x):P=y.memoizedState!==null,B&&!P&&(x.child.flags|=8192,x.mode&1&&(y===null||Tr.current&1?Pr===0&&(Pr=3):vm())),x.updateQueue!==null&&(x.flags|=4),jr(x),null);case 4:return tf(),Ou(y,x),y===null&&rt(x.stateNode.containerInfo),jr(x),null;case 10:return Il(x.type._context),jr(x),null;case 17:return Mn(x.type)&&cn(),jr(x),null;case 19:if(ut(Tr),z=x.memoizedState,z===null)return jr(x),null;if(B=(x.flags&128)!==0,K=z.rendering,K===null)if(B)Ha(z,!1);else{if(Pr!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(K=Yp(y),K!==null){for(x.flags|=128,Ha(z,!1),y=K.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),x.subtreeFlags=0,y=P,B=x.child;B!==null;)P=B,z=y,P.flags&=14680066,K=P.alternate,K===null?(P.childLanes=0,P.lanes=z,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=K.childLanes,P.lanes=K.lanes,P.child=K.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=K.memoizedProps,P.memoizedState=K.memoizedState,P.updateQueue=K.updateQueue,P.type=K.type,z=K.dependencies,P.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),B=B.sibling;return Pt(Tr,Tr.current&1|2),x.child}y=y.sibling}z.tail!==null&&Ur()>jl&&(x.flags|=128,B=!0,Ha(z,!1),x.lanes=4194304)}else{if(!B)if(y=Yp(K),y!==null){if(x.flags|=128,B=!0,y=y.updateQueue,y!==null&&(x.updateQueue=y,x.flags|=4),Ha(z,!0),z.tail===null&&z.tailMode==="hidden"&&!K.alternate&&!Pn)return jr(x),null}else 2*Ur()-z.renderingStartTime>jl&&P!==1073741824&&(x.flags|=128,B=!0,Ha(z,!1),x.lanes=4194304);z.isBackwards?(K.sibling=x.child,x.child=K):(y=z.last,y!==null?y.sibling=K:x.child=K,z.last=K)}return z.tail!==null?(x=z.tail,z.rendering=x,z.tail=x.sibling,z.renderingStartTime=Ur(),x.sibling=null,y=Tr.current,Pt(Tr,B?y&1|2:y&1),x):(jr(x),null);case 22:case 23:return nd(),B=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==B&&(x.flags|=8192),B&&x.mode&1?Qi&1073741824&&(jr(x),$e&&x.subtreeFlags&6&&(x.flags|=8192)):jr(x),null;case 24:return null;case 25:return null}throw Error(o(156,x.tag))}var Wy=a.ReactCurrentOwner,bi=!1;function Rr(y,x,P,B){x.child=y===null?xx(x,null,P,B):ja(x,y.child,P,B)}function fr(y,x,P,B,z){P=P.render;var K=x.ref;return kl(x,z),B=nf(y,x,P,B,K,z),P=Ll(),y!==null&&!bi?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,Ts(y,x,z)):(Pn&&P&&Rn(x),x.flags|=1,Rr(y,x,B,z),x.child)}function or(y,x,P,B,z){if(y===null){var K=P.type;return typeof K=="function"&&!xm(K)&&K.defaultProps===void 0&&P.compare===null&&P.defaultProps===void 0?(x.tag=15,x.type=K,Ga(y,x,K,B,z)):(y=wm(P.type,null,B,x,x.mode,z),y.ref=x.ref,y.return=x,x.child=y)}if(K=y.child,!(y.lanes&z)){var ge=K.memoizedProps;if(P=P.compare,P=P!==null?P:Ki,P(ge,B)&&y.ref===x.ref)return Ts(y,x,z)}return x.flags|=1,y=Za(K,B),y.ref=x.ref,y.return=x,x.child=y}function Ga(y,x,P,B,z){if(y!==null&&Ki(y.memoizedProps,B)&&y.ref===x.ref)if(bi=!1,(y.lanes&z)!==0)y.flags&131072&&(bi=!0);else return x.lanes=y.lanes,Ts(y,x,z);return qa(y,x,P,B,z)}function Oi(y,x,P){var B=x.pendingProps,z=B.children,K=y!==null?y.memoizedState:null;if(B.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null},Pt(zu,Qi),Qi|=P;else if(P&1073741824)x.memoizedState={baseLanes:0,cachePool:null},B=K!==null?K.baseLanes:P,Pt(zu,Qi),Qi|=B;else return y=K!==null?K.baseLanes|P:P,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null},x.updateQueue=null,Pt(zu,Qi),Qi|=y,null;else K!==null?(B=K.baseLanes|P,x.memoizedState=null):B=P,Pt(zu,Qi),Qi|=B;return Rr(y,x,z,P),x.child}function cs(y,x){var P=x.ref;(y===null&&P!==null||y!==null&&y.ref!==P)&&(x.flags|=512,x.flags|=2097152)}function qa(y,x,P,B,z){var K=Mn(P)?an:yn.current;return K=It(x,K),kl(x,z),P=nf(y,x,P,B,K,z),B=Ll(),y!==null&&!bi?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,Ts(y,x,z)):(Pn&&B&&Rn(x),x.flags|=1,Rr(y,x,P,z),x.child)}function Du(y,x,P,B,z){if(Mn(P)){var K=!0;lr(x)}else K=!1;if(kl(x,z),x.stateNode===null)y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),Su(x,P,B),Xc(x,P,B,z),B=!0;else if(y===null){var ge=x.stateNode,Ce=x.memoizedProps;ge.props=Ce;var Ke=ge.context,ct=P.contextType;typeof ct=="object"&&ct!==null?ct=ki(ct):(ct=Mn(P)?an:yn.current,ct=It(x,ct));var Ct=P.getDerivedStateFromProps,rn=typeof Ct=="function"||typeof ge.getSnapshotBeforeUpdate=="function";rn||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ce!==B||Ke!==ct)&&Ji(x,ge,B,ct),ls=!1;var Ht=x.memoizedState;ge.state=Ht,Eu(x,B,ge,z),Ke=x.memoizedState,Ce!==B||Ht!==Ke||An.current||ls?(typeof Ct=="function"&&(Kc(x,P,Ct,B),Ke=x.memoizedState),(Ce=ls||Jc(x,P,Ce,B,Ht,Ke,ct))?(rn||typeof ge.UNSAFE_componentWillMount!="function"&&typeof ge.componentWillMount!="function"||(typeof ge.componentWillMount=="function"&&ge.componentWillMount(),typeof ge.UNSAFE_componentWillMount=="function"&&ge.UNSAFE_componentWillMount()),typeof ge.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ge.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=B,x.memoizedState=Ke),ge.props=B,ge.state=Ke,ge.context=ct,B=Ce):(typeof ge.componentDidMount=="function"&&(x.flags|=4194308),B=!1)}else{ge=x.stateNode,wu(y,x),Ce=x.memoizedProps,ct=x.type===x.elementType?Ce:yr(x.type,Ce),ge.props=ct,rn=x.pendingProps,Ht=ge.context,Ke=P.contextType,typeof Ke=="object"&&Ke!==null?Ke=ki(Ke):(Ke=Mn(P)?an:yn.current,Ke=It(x,Ke));var En=P.getDerivedStateFromProps;(Ct=typeof En=="function"||typeof ge.getSnapshotBeforeUpdate=="function")||typeof ge.UNSAFE_componentWillReceiveProps!="function"&&typeof ge.componentWillReceiveProps!="function"||(Ce!==rn||Ht!==Ke)&&Ji(x,ge,B,Ke),ls=!1,Ht=x.memoizedState,ge.state=Ht,Eu(x,B,ge,z);var St=x.memoizedState;Ce!==rn||Ht!==St||An.current||ls?(typeof En=="function"&&(Kc(x,P,En,B),St=x.memoizedState),(ct=ls||Jc(x,P,ct,B,Ht,St,Ke)||!1)?(Ct||typeof ge.UNSAFE_componentWillUpdate!="function"&&typeof ge.componentWillUpdate!="function"||(typeof ge.componentWillUpdate=="function"&&ge.componentWillUpdate(B,St,Ke),typeof ge.UNSAFE_componentWillUpdate=="function"&&ge.UNSAFE_componentWillUpdate(B,St,Ke)),typeof ge.componentDidUpdate=="function"&&(x.flags|=4),typeof ge.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ge.componentDidUpdate!="function"||Ce===y.memoizedProps&&Ht===y.memoizedState||(x.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ce===y.memoizedProps&&Ht===y.memoizedState||(x.flags|=1024),x.memoizedProps=B,x.memoizedState=St),ge.props=B,ge.state=St,ge.context=Ke,B=ct):(typeof ge.componentDidUpdate!="function"||Ce===y.memoizedProps&&Ht===y.memoizedState||(x.flags|=4),typeof ge.getSnapshotBeforeUpdate!="function"||Ce===y.memoizedProps&&Ht===y.memoizedState||(x.flags|=1024),B=!1)}return Yi(y,x,P,B,K,z)}function Yi(y,x,P,B,z,K){cs(y,x);var ge=(x.flags&128)!==0;if(!B&&!ge)return z&&Xr(x,P,!1),Ts(y,x,K);B=x.stateNode,Wy.current=x;var Ce=ge&&typeof P.getDerivedStateFromError!="function"?null:B.render();return x.flags|=1,y!==null&&ge?(x.child=ja(x,y.child,null,K),x.child=ja(x,null,Ce,K)):Rr(y,x,Ce,K),x.memoizedState=B.state,z&&Xr(x,P,!0),x.child}function Hh(y){var x=y.stateNode;x.pendingContext?Jr(y,x.pendingContext,x.pendingContext!==x.context):x.context&&Jr(y,x.context,!1),Xp(y,x.containerInfo)}function $y(y,x,P,B,z){return Yc(),Jp(z),x.flags|=256,Rr(y,x,P,B),x.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Lu(y){return{baseLanes:y,cachePool:null}}function Ky(y,x,P){var B=x.pendingProps,z=Tr.current,K=!1,ge=(x.flags&128)!==0,Ce;if((Ce=ge)||(Ce=y!==null&&y.memoizedState===null?!1:(z&2)!==0),Ce?(K=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(z|=1),Pt(Tr,z&1),y===null)return Ol(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?$s(y)?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(z=B.children,y=B.fallback,K?(B=x.mode,K=x.child,z={mode:"hidden",children:z},!(B&1)&&K!==null?(K.childLanes=0,K.pendingProps=z):K=sd(z,B,0,null),y=$u(y,B,P,null),K.return=x,y.return=x,K.sibling=y,x.child=K,x.child.memoizedState=Lu(P),x.memoizedState=Gh,y):Vo(x,z));if(z=y.memoizedState,z!==null){if(Ce=z.dehydrated,Ce!==null){if(ge)return x.flags&256?(x.flags&=-257,Wh(y,x,P,Error(o(422)))):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(K=B.fallback,z=x.mode,B=sd({mode:"visible",children:B.children},z,0,null),K=$u(K,z,P,null),K.flags|=2,B.return=x,K.return=x,B.sibling=K,x.child=B,x.mode&1&&ja(x,y.child,null,P),x.child.memoizedState=Lu(P),x.memoizedState=Gh,K);if(!(x.mode&1))x=Wh(y,x,P,null);else if($s(Ce))x=Wh(y,x,P,Error(o(419)));else if(B=(P&y.childLanes)!==0,bi||B){if(B=Vr,B!==null){switch(P&-P){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}B=K&(B.suspendedLanes|P)?0:K,B!==0&&B!==z.retryLane&&(z.retryLane=B,Zi(y,B,-1))}vm(),x=Wh(y,x,P,Error(o(421)))}else qi(Ce)?(x.flags|=128,x.child=y.child,x=Px.bind(null,y),ka(Ce,x),x=null):(P=z.treeContext,Be&&(vr=ko(Ce),Vn=x,Pn=!0,Xi=null,Bo=!1,P!==null&&(J[le++]=Ve,J[le++]=at,J[le++]=ke,Ve=P.id,at=P.overflow,ke=x)),x=Vo(x,x.pendingProps.children),x.flags|=4096);return x}return K?(B=hm(y,x,B.children,B.fallback,P),K=x.child,z=y.child.memoizedState,K.memoizedState=z===null?Lu(P):{baseLanes:z.baseLanes|P,cachePool:null},K.childLanes=y.childLanes&~P,x.memoizedState=Gh,B):(P=qh(y,x,B.children,P),x.memoizedState=null,P)}return K?(B=hm(y,x,B.children,B.fallback,P),K=x.child,z=y.child.memoizedState,K.memoizedState=z===null?Lu(P):{baseLanes:z.baseLanes|P,cachePool:null},K.childLanes=y.childLanes&~P,x.memoizedState=Gh,B):(P=qh(y,x,B.children,P),x.memoizedState=null,P)}function Vo(y,x){return x=sd({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function qh(y,x,P,B){var z=y.child;return y=z.sibling,P=Za(z,{mode:"visible",children:P}),!(x.mode&1)&&(P.lanes=B),P.return=x,P.sibling=null,y!==null&&(B=x.deletions,B===null?(x.deletions=[y],x.flags|=16):B.push(y)),x.child=P}function hm(y,x,P,B,z){var K=x.mode;y=y.child;var ge=y.sibling,Ce={mode:"hidden",children:P};return!(K&1)&&x.child!==y?(P=x.child,P.childLanes=0,P.pendingProps=Ce,x.deletions=null):(P=Za(y,Ce),P.subtreeFlags=y.subtreeFlags&14680064),ge!==null?B=Za(ge,B):(B=$u(B,K,z,null),B.flags|=2),B.return=x,P.return=x,P.sibling=B,x.child=P,B}function Wh(y,x,P,B){return B!==null&&Jp(B),ja(x,y.child,null,P),y=Vo(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function Tx(y,x,P){y.lanes|=x;var B=y.alternate;B!==null&&(B.lanes|=x),po(y.return,x,P)}function ha(y,x,P,B,z){var K=y.memoizedState;K===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:B,tail:P,tailMode:z}:(K.isBackwards=x,K.rendering=null,K.renderingStartTime=0,K.last=B,K.tail=P,K.tailMode=z)}function Nu(y,x,P){var B=x.pendingProps,z=B.revealOrder,K=B.tail;if(Rr(y,x,B.children,P),B=Tr.current,B&2)B=B&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Tx(y,P,x);else if(y.tag===19)Tx(y,P,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}B&=1}if(Pt(Tr,B),!(x.mode&1))x.memoizedState=null;else switch(z){case"forwards":for(P=x.child,z=null;P!==null;)y=P.alternate,y!==null&&Yp(y)===null&&(z=P),P=P.sibling;P=z,P===null?(z=x.child,x.child=null):(z=P.sibling,P.sibling=null),ha(x,!1,z,P,K);break;case"backwards":for(P=null,z=x.child,x.child=null;z!==null;){if(y=z.alternate,y!==null&&Yp(y)===null){x.child=z;break}y=z.sibling,z.sibling=P,P=z,z=y}ha(x,!0,P,null,K);break;case"together":ha(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Ts(y,x,P){if(y!==null&&(x.dependencies=y.dependencies),da|=x.lanes,!(P&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(o(153));if(x.child!==null){for(y=x.child,P=Za(y,y.pendingProps),x.child=P,P.return=x;y.sibling!==null;)y=y.sibling,P=P.sibling=Za(y,y.pendingProps),P.return=x;P.sibling=null}return x.child}function dm(y,x,P){switch(x.tag){case 3:Hh(x),Yc();break;case 5:wx(x);break;case 1:Mn(x.type)&&lr(x);break;case 4:Xp(x,x.stateNode.containerInfo);break;case 10:ho(x,x.type._context,x.memoizedProps.value);break;case 13:var B=x.memoizedState;if(B!==null)return B.dehydrated!==null?(Pt(Tr,Tr.current&1),x.flags|=128,null):P&x.child.childLanes?Ky(y,x,P):(Pt(Tr,Tr.current&1),y=Ts(y,x,P),y!==null?y.sibling:null);Pt(Tr,Tr.current&1);break;case 19:if(B=(P&x.childLanes)!==0,y.flags&128){if(B)return Nu(y,x,P);x.flags|=128}var z=x.memoizedState;if(z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Pt(Tr,Tr.current),B)break;return null;case 22:case 23:return x.lanes=0,Oi(y,x,P)}return Ts(y,x,P)}function pm(y,x){switch(Zr(x),x.tag){case 1:return Mn(x.type)&&cn(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return tf(),ut(An),ut(yn),Mu(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return Ly(x),null;case 13:if(ut(Tr),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(o(340));Yc()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return ut(Tr),null;case 4:return tf(),null;case 10:return Il(x.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var fs=!1,Si=!1,Bu=typeof WeakSet=="function"?WeakSet:Set,pt=null;function mo(y,x){var P=y.ref;if(P!==null)if(typeof P=="function")try{P(null)}catch(B){ds(y,x,B)}else P.current=null}function Wa(y,x,P){try{P()}catch(B){ds(y,x,B)}}var Jy=!1;function Xy(y,x){for(ee(y.containerInfo),pt=x;pt!==null;)if(y=pt,x=y.child,(y.subtreeFlags&1028)!==0&&x!==null)x.return=y,pt=x;else for(;pt!==null;){y=pt;try{var P=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var B=P.memoizedProps,z=P.memoizedState,K=y.stateNode,ge=K.getSnapshotBeforeUpdate(y.elementType===y.type?B:yr(y.type,B),z);K.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:$e&&Xe(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Ce){ds(y,y.return,Ce)}if(x=y.sibling,x!==null){x.return=y.return,pt=x;break}pt=y.return}return P=Jy,Jy=!1,P}function $a(y,x,P){var B=x.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var z=B=B.next;do{if((z.tag&y)===y){var K=z.destroy;z.destroy=void 0,K!==void 0&&Wa(x,P,K)}z=z.next}while(z!==B)}}function Di(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var P=x=x.next;do{if((P.tag&y)===y){var B=P.create;P.destroy=B()}P=P.next}while(P!==x)}}function hs(y){var x=y.ref;if(x!==null){var P=y.stateNode;switch(y.tag){case 5:y=se(P);break;default:y=P}typeof x=="function"?x(y):x.current=y}}function pr(y,x,P){if(Xs&&typeof Xs.onCommitFiberUnmount=="function")try{Xs.onCommitFiberUnmount(la,x)}catch{}switch(x.tag){case 0:case 11:case 14:case 15:if(y=x.updateQueue,y!==null&&(y=y.lastEffect,y!==null)){var B=y=y.next;do{var z=B,K=z.destroy;z=z.tag,K!==void 0&&(z&2||z&4)&&Wa(x,P,K),B=B.next}while(B!==y)}break;case 1:if(mo(x,P),y=x.stateNode,typeof y.componentWillUnmount=="function")try{y.props=x.memoizedProps,y.state=x.memoizedState,y.componentWillUnmount()}catch(ge){ds(x,P,ge)}break;case 5:mo(x,P);break;case 4:$e?Zy(y,x,P):De&&De&&(x=x.stateNode.containerInfo,P=dt(x),Sr(x,P))}}function go(y,x,P){for(var B=x;;)if(pr(y,B,P),B.child===null||$e&&B.tag===4){if(B===x)break;for(;B.sibling===null;){if(B.return===null||B.return===x)return;B=B.return}B.sibling.return=B.return,B=B.sibling}else B.child.return=B,B=B.child}function Yy(y){var x=y.alternate;x!==null&&(y.alternate=null,Yy(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&nt(x)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function Qy(y){return y.tag===5||y.tag===3||y.tag===4}function mm(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Qy(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function gm(y){if($e){e:{for(var x=y.return;x!==null;){if(Qy(x))break e;x=x.return}throw Error(o(160))}var P=x;switch(P.tag){case 5:x=P.stateNode,P.flags&32&&(Gt(x),P.flags&=-33),P=mm(y),uf(y,P,x);break;case 3:case 4:x=P.stateNode.containerInfo,P=mm(y),ym(y,P,x);break;default:throw Error(o(161))}}}function ym(y,x,P){var B=y.tag;if(B===5||B===6)y=y.stateNode,x?Ft(P,y,x):lt(P,y);else if(B!==4&&(y=y.child,y!==null))for(ym(y,x,P),y=y.sibling;y!==null;)ym(y,x,P),y=y.sibling}function uf(y,x,P){var B=y.tag;if(B===5||B===6)y=y.stateNode,x?kt(P,y,x):qe(P,y);else if(B!==4&&(y=y.child,y!==null))for(uf(y,x,P),y=y.sibling;y!==null;)uf(y,x,P),y=y.sibling}function Zy(y,x,P){for(var B=x,z=!1,K,ge;;){if(!z){z=B.return;e:for(;;){if(z===null)throw Error(o(160));switch(K=z.stateNode,z.tag){case 5:ge=!1;break e;case 3:K=K.containerInfo,ge=!0;break e;case 4:K=K.containerInfo,ge=!0;break e}z=z.return}z=!0}if(B.tag===5||B.tag===6)go(y,B,P),ge?nn(K,B.stateNode):Et(K,B.stateNode);else if(B.tag===18)ge?Rl(K,B.stateNode):Ml(K,B.stateNode);else if(B.tag===4){if(B.child!==null){K=B.stateNode.containerInfo,ge=!0,B.child.return=B,B=B.child;continue}}else if(pr(y,B,P),B.child!==null){B.child.return=B,B=B.child;continue}if(B===x)break;for(;B.sibling===null;){if(B.return===null||B.return===x)return;B=B.return,B.tag===4&&(z=!1)}B.sibling.return=B.return,B=B.sibling}}function Fl(y,x){if($e){switch(x.tag){case 0:case 11:case 14:case 15:$a(3,x,x.return),Di(3,x),$a(5,x,x.return);return;case 1:return;case 5:var P=x.stateNode;if(P!=null){var B=x.memoizedProps;y=y!==null?y.memoizedProps:B;var z=x.type,K=x.updateQueue;x.updateQueue=null,K!==null&&vt(P,K,z,y,B,x)}return;case 6:if(x.stateNode===null)throw Error(o(162));P=x.memoizedProps,yt(x.stateNode,y!==null?y.memoizedProps:P,P);return;case 3:Be&&y!==null&&y.memoizedState.isDehydrated&&gu(x.stateNode.containerInfo);return;case 12:return;case 13:cf(x);return;case 19:cf(x);return;case 17:return}throw Error(o(163))}switch(x.tag){case 0:case 11:case 14:case 15:$a(3,x,x.return),Di(3,x),$a(5,x,x.return);return;case 12:return;case 13:cf(x);return;case 19:cf(x);return;case 3:Be&&y!==null&&y.memoizedState.isDehydrated&&gu(x.stateNode.containerInfo);break;case 22:case 23:return}e:if(De){switch(x.tag){case 1:case 5:case 6:break e;case 3:case 4:x=x.stateNode,Sr(x.containerInfo,x.pendingChildren);break e}throw Error(o(163))}}function cf(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var P=y.stateNode;P===null&&(P=y.stateNode=new Bu),x.forEach(function(B){var z=Ix.bind(null,y,B);P.has(B)||(P.add(B),B.then(z,z))})}}function RS(y,x){for(pt=x;pt!==null;){x=pt;var P=x.deletions;if(P!==null)for(var B=0;B<P.length;B++){var z=P[B];try{var K=y;$e?Zy(K,z,x):go(K,z,x);var ge=z.alternate;ge!==null&&(ge.return=null),z.return=null}catch(Nt){ds(z,x,Nt)}}if(P=x.child,x.subtreeFlags&12854&&P!==null)P.return=x,pt=P;else for(;pt!==null;){x=pt;try{var Ce=x.flags;if(Ce&32&&$e&&Gt(x.stateNode),Ce&512){var Ke=x.alternate;if(Ke!==null){var ct=Ke.ref;ct!==null&&(typeof ct=="function"?ct(null):ct.current=null)}}if(Ce&8192)switch(x.tag){case 13:if(x.memoizedState!==null){var Ct=x.alternate;(Ct===null||Ct.memoizedState===null)&&(Zh=Ur())}break;case 22:var rn=x.memoizedState!==null,Ht=x.alternate,En=Ht!==null&&Ht.memoizedState!==null;if(P=x,$e){e:if(B=P,z=rn,K=null,$e)for(var St=B;;){if(St.tag===5){if(K===null){K=St;var Bi=St.stateNode;z?Tn(Bi):mt(St.stateNode,St.memoizedProps)}}else if(St.tag===6){if(K===null){var so=St.stateNode;z?be(so):Ge(so,St.memoizedProps)}}else if((St.tag!==22&&St.tag!==23||St.memoizedState===null||St===B)&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===B)break;for(;St.sibling===null;){if(St.return===null||St.return===B)break e;K===St&&(K=null),St=St.return}K===St&&(K=null),St.sibling.return=St.return,St=St.sibling}}if(rn&&!En&&P.mode&1){pt=P;for(var Ue=P.child;Ue!==null;){for(P=pt=Ue;pt!==null;){B=pt;var Ie=B.child;switch(B.tag){case 0:case 11:case 14:case 15:$a(4,B,B.return);break;case 1:mo(B,B.return);var We=B.stateNode;if(typeof We.componentWillUnmount=="function"){var xt=B.return;try{We.props=B.memoizedProps,We.state=B.memoizedState,We.componentWillUnmount()}catch(Nt){ds(B,xt,Nt)}}break;case 5:mo(B,B.return);break;case 22:if(B.memoizedState!==null){tv(P);continue}}Ie!==null?(Ie.return=B,pt=Ie):tv(P)}Ue=Ue.sibling}}}switch(Ce&4102){case 2:gm(x),x.flags&=-3;break;case 6:gm(x),x.flags&=-3,Fl(x.alternate,x);break;case 4096:x.flags&=-4097;break;case 4100:x.flags&=-4097,Fl(x.alternate,x);break;case 4:Fl(x.alternate,x)}}catch(Nt){ds(x,x.return,Nt)}if(P=x.sibling,P!==null){P.return=x.return,pt=P;break}pt=x.return}}}function $h(y,x,P){pt=y,Kh(y)}function Kh(y,x,P){for(var B=(y.mode&1)!==0;pt!==null;){var z=pt,K=z.child;if(z.tag===22&&B){var ge=z.memoizedState!==null||fs;if(!ge){var Ce=z.alternate,Ke=Ce!==null&&Ce.memoizedState!==null||Si;Ce=fs;var ct=Si;if(fs=ge,(Si=Ke)&&!ct)for(pt=z;pt!==null;)ge=pt,Ke=ge.child,ge.tag===22&&ge.memoizedState!==null?Fu(z):Ke!==null?(Ke.return=ge,pt=Ke):Fu(z);for(;K!==null;)pt=K,Kh(K),K=K.sibling;pt=z,fs=Ce,Si=ct}ev(y)}else z.subtreeFlags&8772&&K!==null?(K.return=z,pt=K):ev(y)}}function ev(y){for(;pt!==null;){var x=pt;if(x.flags&8772){var P=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:Si||Di(5,x);break;case 1:var B=x.stateNode;if(x.flags&4&&!Si)if(P===null)B.componentDidMount();else{var z=x.elementType===x.type?P.memoizedProps:yr(x.type,P.memoizedProps);B.componentDidUpdate(z,P.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var K=x.updateQueue;K!==null&&ua(x,K,B);break;case 3:var ge=x.updateQueue;if(ge!==null){if(P=null,x.child!==null)switch(x.child.tag){case 5:P=se(x.child.stateNode);break;case 1:P=x.child.stateNode}ua(x,ge,P)}break;case 5:var Ce=x.stateNode;P===null&&x.flags&4&&Ye(Ce,x.type,x.memoizedProps,x);break;case 6:break;case 4:break;case 12:break;case 13:if(Be&&x.memoizedState===null){var Ke=x.alternate;if(Ke!==null){var ct=Ke.memoizedState;if(ct!==null){var Ct=ct.dehydrated;Ct!==null&&yu(Ct)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Si||x.flags&512&&hs(x)}catch(rn){ds(x,x.return,rn)}}if(x===y){pt=null;break}if(P=x.sibling,P!==null){P.return=x.return,pt=P;break}pt=x.return}}function tv(y){for(;pt!==null;){var x=pt;if(x===y){pt=null;break}var P=x.sibling;if(P!==null){P.return=x.return,pt=P;break}pt=x.return}}function Fu(y){for(;pt!==null;){var x=pt;try{switch(x.tag){case 0:case 11:case 15:var P=x.return;try{Di(4,x)}catch(Ke){ds(x,P,Ke)}break;case 1:var B=x.stateNode;if(typeof B.componentDidMount=="function"){var z=x.return;try{B.componentDidMount()}catch(Ke){ds(x,z,Ke)}}var K=x.return;try{hs(x)}catch(Ke){ds(x,K,Ke)}break;case 5:var ge=x.return;try{hs(x)}catch(Ke){ds(x,ge,Ke)}}}catch(Ke){ds(x,x.return,Ke)}if(x===y){pt=null;break}var Ce=x.sibling;if(Ce!==null){Ce.return=x.return,pt=Ce;break}pt=x.return}}var Jh=0,Uu=1,ju=2,Ka=3,ff=4;if(typeof Symbol=="function"&&Symbol.for){var Vu=Symbol.for;Jh=Vu("selector.component"),Uu=Vu("selector.has_pseudo_class"),ju=Vu("selector.role"),Ka=Vu("selector.test_id"),ff=Vu("selector.text")}function Xh(y){var x=he(y);if(x!=null){if(typeof x.memoizedProps["data-testname"]!="string")throw Error(o(364));return x}if(y=ie(y),y===null)throw Error(o(362));return y.stateNode.current}function Yh(y,x){switch(x.$$typeof){case Jh:if(y.type===x.value)return!0;break;case Uu:e:{x=x.value,y=[y,0];for(var P=0;P<y.length;){var B=y[P++],z=y[P++],K=x[z];if(B.tag!==5||!de(B)){for(;K!=null&&Yh(B,K);)z++,K=x[z];if(z===x.length){x=!0;break e}else for(B=B.child;B!==null;)y.push(B,z),B=B.sibling}}x=!1}return x;case ju:if(y.tag===5&&ve(y.stateNode,x.value))return!0;break;case ff:if((y.tag===5||y.tag===6)&&(y=me(y),y!==null&&0<=y.indexOf(x.value)))return!0;break;case Ka:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===x.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ul(y){switch(y.$$typeof){case Jh:return"<"+(R(y.value)||"Unknown")+">";case Uu:return":has("+(Ul(y)||"")+")";case ju:return'[role="'+y.value+'"]';case ff:return'"'+y.value+'"';case Ka:return'[data-testname="'+y.value+'"]';default:throw Error(o(365))}}function to(y,x){var P=[];y=[y,0];for(var B=0;B<y.length;){var z=y[B++],K=y[B++],ge=x[K];if(z.tag!==5||!de(z)){for(;ge!=null&&Yh(z,ge);)K++,ge=x[K];if(K===x.length)P.push(z);else for(z=z.child;z!==null;)y.push(z,K),z=z.sibling}}return P}function Ja(y,x){if(!Le)throw Error(o(363));y=Xh(y),y=to(y,x),x=[],y=Array.from(y);for(var P=0;P<y.length;){var B=y[P++];if(B.tag===5)de(B)||x.push(B.stateNode);else for(B=B.child;B!==null;)y.push(B),B=B.sibling}return x}var nv=Math.ceil,Qh=a.ReactCurrentDispatcher,zo=a.ReactCurrentOwner,tr=a.ReactCurrentBatchConfig,vn=0,Vr=null,nr=null,_r=0,Qi=0,zu=Lt(0),Pr=0,hf=null,da=0,no=0,Hu=0,Xa=null,ei=null,Zh=0,jl=1/0;function Gu(){jl=Ur()+500}var df=!1,mr=null,Ho=null,pf=!1,pa=null,qu=0,Wu=0,Ya=null,hr=-1,Ir=0;function zn(){return vn&6?Ur():hr!==-1?hr:hr=Ur()}function Go(y){return y.mode&1?vn&2&&_r!==0?_r&-_r:Ih.transition!==null?(Ir===0&&(y=ur,ur<<=1,!(ur&4194240)&&(ur=64),Ir=y),Ir):(y=dn,y!==0?y:Je()):1}function Zi(y,x,P){if(50<Wu)throw Wu=0,Ya=null,Error(o(185));var B=Vl(y,x);return B===null?null:(Da(B,x,P),(!(vn&2)||B!==Vr)&&(B===Vr&&(!(vn&2)&&(no|=x),Pr===4&&Ni(B,_r)),Cs(B,P),x===1&&vn===0&&!(y.mode&1)&&(Gu(),sr&&os())),B)}function Vl(y,x){y.lanes|=x;var P=y.alternate;for(P!==null&&(P.lanes|=x),P=y,y=y.return;y!==null;)y.childLanes|=x,P=y.alternate,P!==null&&(P.childLanes|=x),P=y,y=y.return;return P.tag===3?P.stateNode:null}function Cs(y,x){var P=y.callbackNode;$p(y,x);var B=vu(y,y===Vr?_r:0);if(B===0)P!==null&&Js(P),y.callbackNode=null,y.callbackPriority=0;else if(x=B&-B,y.callbackPriority!==x){if(P!=null&&Js(P),x===1)y.tag===0?_u(ro.bind(null,y)):Wc(ro.bind(null,y)),we?Pe(function(){vn===0&&os()}):oa(Wi,os),P=null;else{switch(fo(B)){case 1:P=Wi;break;case 4:P=ky;break;case 16:P=qc;break;case 536870912:P=La;break;default:P=qc}P=_m(P,Li.bind(null,y))}y.callbackPriority=x,y.callbackNode=P}}function Li(y,x){if(hr=-1,Ir=0,vn&6)throw Error(o(327));var P=y.callbackNode;if(ma()&&y.callbackNode!==P)return null;var B=vu(y,y===Vr?_r:0);if(B===0)return null;if(B&30||B&y.expiredLanes||x)x=rd(y,B);else{x=B;var z=vn;vn|=2;var K=sv();(Vr!==y||_r!==x)&&(Gu(),Qa(y,x));do try{Mx();break}catch(Ce){iv(y,Ce)}while(!0);ui(),Qh.current=K,vn=z,nr!==null?x=0:(Vr=null,_r=0,x=Pr)}if(x!==0){if(x===2&&(z=Hc(y),z!==0&&(B=z,x=ed(y,z))),x===1)throw P=hf,Qa(y,0),Ni(y,B),Cs(y,Ur()),P;if(x===6)Ni(y,B);else{if(z=y.current.alternate,!(B&30)&&!rv(z)&&(x=rd(y,B),x===2&&(K=Hc(y),K!==0&&(B=K,x=ed(y,K))),x===1))throw P=hf,Qa(y,0),Ni(y,B),Cs(y,Ur()),P;switch(y.finishedWork=z,y.finishedLanes=B,x){case 0:case 1:throw Error(o(345));case 2:qo(y,ei);break;case 3:if(Ni(y,B),(B&130023424)===B&&(x=Zh+500-Ur(),10<x)){if(vu(y,0)!==0)break;if(z=y.suspendedLanes,(z&B)!==B){zn(),y.pingedLanes|=y.suspendedLanes&z;break}y.timeoutHandle=ue(qo.bind(null,y,ei),x);break}qo(y,ei);break;case 4:if(Ni(y,B),(B&4194240)===B)break;for(x=y.eventTimes,z=-1;0<B;){var ge=31-fn(B);K=1<<ge,ge=x[ge],ge>z&&(z=ge),B&=~K}if(B=z,B=Ur()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*nv(B/1960))-B,10<B){y.timeoutHandle=ue(qo.bind(null,y,ei),B);break}qo(y,ei);break;case 5:qo(y,ei);break;default:throw Error(o(329))}}}return Cs(y,Ur()),y.callbackNode===P?Li.bind(null,y):null}function ed(y,x){var P=Xa;return y.current.memoizedState.isDehydrated&&(Qa(y,x).flags|=256),y=rd(y,x),y!==2&&(x=ei,ei=P,x!==null&&td(x)),y}function td(y){ei===null?ei=y:ei.push.apply(ei,y)}function rv(y){for(var x=y;;){if(x.flags&16384){var P=x.updateQueue;if(P!==null&&(P=P.stores,P!==null))for(var B=0;B<P.length;B++){var z=P[B],K=z.getSnapshot;z=z.value;try{if(!_i(K(),z))return!1}catch{return!1}}}if(P=x.child,x.subtreeFlags&16384&&P!==null)P.return=x,x=P;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Ni(y,x){for(x&=~Hu,x&=~no,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var P=31-fn(x),B=1<<P;y[P]=-1,x&=~B}}function ro(y){if(vn&6)throw Error(o(327));ma();var x=vu(y,0);if(!(x&1))return Cs(y,Ur()),null;var P=rd(y,x);if(y.tag!==0&&P===2){var B=Hc(y);B!==0&&(x=B,P=ed(y,B))}if(P===1)throw P=hf,Qa(y,0),Ni(y,x),Cs(y,Ur()),P;if(P===6)throw Error(o(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,qo(y,ei),Cs(y,Ur()),null}function mf(y){pa!==null&&pa.tag===0&&!(vn&6)&&ma();var x=vn;vn|=1;var P=tr.transition,B=dn;try{if(tr.transition=null,dn=1,y)return y()}finally{dn=B,tr.transition=P,vn=x,!(vn&6)&&os()}}function nd(){Qi=zu.current,ut(zu)}function Qa(y,x){y.finishedWork=null,y.finishedLanes=0;var P=y.timeoutHandle;if(P!==xe&&(y.timeoutHandle=xe,ye(P)),nr!==null)for(P=nr.return;P!==null;){var B=P;switch(Zr(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&cn();break;case 3:tf(),ut(An),ut(yn),Mu();break;case 5:Ly(B);break;case 4:tf();break;case 13:ut(Tr);break;case 19:ut(Tr);break;case 10:Il(B.type._context);break;case 22:case 23:nd()}P=P.return}if(Vr=y,nr=y=Za(y.current,null),_r=Qi=x,Pr=0,hf=null,Hu=no=da=0,ei=Xa=null,xi!==null){for(x=0;x<xi.length;x++)if(P=xi[x],B=P.interleaved,B!==null){P.interleaved=null;var z=B.next,K=P.pending;if(K!==null){var ge=K.next;K.next=z,B.next=ge}P.pending=B}xi=null}return y}function iv(y,x){do{var P=nr;try{if(ui(),Dh.current=af,Qp){for(var B=Cr.memoizedState;B!==null;){var z=B.queue;z!==null&&(z.pending=null),B=B.next}Qp=!1}if(Ru=0,Ai=wi=Cr=null,ca=!1,Pu=0,zo.current=null,P===null||P.return===null){Pr=1,hf=x,nr=null;break}e:{var K=y,ge=P.return,Ce=P,Ke=x;if(x=_r,Ce.flags|=32768,Ke!==null&&typeof Ke=="object"&&typeof Ke.then=="function"){var ct=Ke,Ct=Ce,rn=Ct.tag;if(!(Ct.mode&1)&&(rn===0||rn===11||rn===15)){var Ht=Ct.alternate;Ht?(Ct.updateQueue=Ht.updateQueue,Ct.memoizedState=Ht.memoizedState,Ct.lanes=Ht.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var En=qy(ge);if(En!==null){En.flags&=-257,ku(En,ge,Ce,K,x),En.mode&1&&za(K,ct,x),x=En,Ke=ct;var St=x.updateQueue;if(St===null){var Bi=new Set;Bi.add(Ke),x.updateQueue=Bi}else St.add(Ke);break e}else{if(!(x&1)){za(K,ct,x),vm();break e}Ke=Error(o(426))}}else if(Pn&&Ce.mode&1){var so=qy(ge);if(so!==null){!(so.flags&65536)&&(so.flags|=256),ku(so,ge,Ce,K,x),Jp(Ke);break e}}K=Ke,Pr!==4&&(Pr=2),Xa===null?Xa=[K]:Xa.push(K),Ke=Gy(Ke,Ce),Ce=ge;do{switch(Ce.tag){case 3:Ce.flags|=65536,x&=-x,Ce.lanes|=x;var Ue=Sx(Ce,Ke,x);Au(Ce,Ue);break e;case 1:K=Ke;var Ie=Ce.type,We=Ce.stateNode;if(!(Ce.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Ho===null||!Ho.has(We)))){Ce.flags|=65536,x&=-x,Ce.lanes|=x;var xt=lm(Ce,K,x);Au(Ce,xt);break e}}Ce=Ce.return}while(Ce!==null)}av(P)}catch(Nt){x=Nt,nr===P&&P!==null&&(nr=P=P.return);continue}break}while(!0)}function sv(){var y=Qh.current;return Qh.current=af,y===null?af:y}function vm(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Vr===null||!(da&268435455)&&!(no&268435455)||Ni(Vr,_r)}function rd(y,x){var P=vn;vn|=2;var B=sv();Vr===y&&_r===x||Qa(y,x);do try{Cx();break}catch(z){iv(y,z)}while(!0);if(ui(),vn=P,Qh.current=B,nr!==null)throw Error(o(261));return Vr=null,_r=0,Pr}function Cx(){for(;nr!==null;)ov(nr)}function Mx(){for(;nr!==null&&!aa();)ov(nr)}function ov(y){var x=cv(y.alternate,y,Qi);y.memoizedProps=y.pendingProps,x===null?av(y):nr=x,zo.current=null}function av(y){var x=y;do{var P=x.alternate;if(y=x.return,x.flags&32768){if(P=pm(P,x),P!==null){P.flags&=32767,nr=P;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Pr=6,nr=null;return}}else if(P=fm(P,x,Qi),P!==null){nr=P;return}if(x=x.sibling,x!==null){nr=x;return}nr=x=y}while(x!==null);Pr===0&&(Pr=5)}function qo(y,x){var P=dn,B=tr.transition;try{tr.transition=null,dn=1,Rx(y,x,P)}finally{tr.transition=B,dn=P}return null}function Rx(y,x,P){do ma();while(pa!==null);if(vn&6)throw Error(o(327));var B=y.finishedWork,z=y.finishedLanes;if(B===null)return null;if(y.finishedWork=null,y.finishedLanes=0,B===y.current)throw Error(o(177));y.callbackNode=null,y.callbackPriority=0;var K=B.lanes|B.childLanes;if(sa(y,K),y===Vr&&(nr=Vr=null,_r=0),!(B.subtreeFlags&2064)&&!(B.flags&2064)||pf||(pf=!0,_m(qc,function(){return ma(),null})),K=(B.flags&15990)!==0,B.subtreeFlags&15990||K){K=tr.transition,tr.transition=null;var ge=dn;dn=1;var Ce=vn;vn|=4,zo.current=null,Xy(y,B),RS(y,B),Y(y.containerInfo),y.current=B,$h(B),Iy(),vn=Ce,dn=ge,tr.transition=K}else y.current=B;if(pf&&(pf=!1,pa=y,qu=z),K=y.pendingLanes,K===0&&(Ho=null),Do(B.stateNode),Cs(y,Ur()),x!==null)for(P=y.onRecoverableError,B=0;B<x.length;B++)P(x[B]);if(df)throw df=!1,y=mr,mr=null,y;return qu&1&&y.tag!==0&&ma(),K=y.pendingLanes,K&1?y===Ya?Wu++:(Wu=0,Ya=y):Wu=0,os(),null}function ma(){if(pa!==null){var y=fo(qu),x=tr.transition,P=dn;try{if(tr.transition=null,dn=16>y?16:y,pa===null)var B=!1;else{if(y=pa,pa=null,qu=0,vn&6)throw Error(o(331));var z=vn;for(vn|=4,pt=y.current;pt!==null;){var K=pt,ge=K.child;if(pt.flags&16){var Ce=K.deletions;if(Ce!==null){for(var Ke=0;Ke<Ce.length;Ke++){var ct=Ce[Ke];for(pt=ct;pt!==null;){var Ct=pt;switch(Ct.tag){case 0:case 11:case 15:$a(8,Ct,K)}var rn=Ct.child;if(rn!==null)rn.return=Ct,pt=rn;else for(;pt!==null;){Ct=pt;var Ht=Ct.sibling,En=Ct.return;if(Yy(Ct),Ct===ct){pt=null;break}if(Ht!==null){Ht.return=En,pt=Ht;break}pt=En}}}var St=K.alternate;if(St!==null){var Bi=St.child;if(Bi!==null){St.child=null;do{var so=Bi.sibling;Bi.sibling=null,Bi=so}while(Bi!==null)}}pt=K}}if(K.subtreeFlags&2064&&ge!==null)ge.return=K,pt=ge;else e:for(;pt!==null;){if(K=pt,K.flags&2048)switch(K.tag){case 0:case 11:case 15:$a(9,K,K.return)}var Ue=K.sibling;if(Ue!==null){Ue.return=K.return,pt=Ue;break e}pt=K.return}}var Ie=y.current;for(pt=Ie;pt!==null;){ge=pt;var We=ge.child;if(ge.subtreeFlags&2064&&We!==null)We.return=ge,pt=We;else e:for(ge=Ie;pt!==null;){if(Ce=pt,Ce.flags&2048)try{switch(Ce.tag){case 0:case 11:case 15:Di(9,Ce)}}catch(Nt){ds(Ce,Ce.return,Nt)}if(Ce===ge){pt=null;break e}var xt=Ce.sibling;if(xt!==null){xt.return=Ce.return,pt=xt;break e}pt=Ce.return}}if(vn=z,os(),Xs&&typeof Xs.onPostCommitFiberRoot=="function")try{Xs.onPostCommitFiberRoot(la,y)}catch{}B=!0}return B}finally{dn=P,tr.transition=x}}return!1}function id(y,x,P){x=Gy(P,x),x=Sx(y,x,1),No(y,x),x=zn(),y=Vl(y,1),y!==null&&(Da(y,1,x),Cs(y,x))}function ds(y,x,P){if(y.tag===3)id(y,y,P);else for(;x!==null;){if(x.tag===3){id(x,y,P);break}else if(x.tag===1){var B=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(Ho===null||!Ho.has(B))){y=Gy(P,y),y=lm(x,y,1),No(x,y),y=zn(),x=Vl(x,1),x!==null&&(Da(x,1,y),Cs(x,y));break}}x=x.return}}function lv(y,x,P){var B=y.pingCache;B!==null&&B.delete(x),x=zn(),y.pingedLanes|=y.suspendedLanes&P,Vr===y&&(_r&P)===P&&(Pr===4||Pr===3&&(_r&130023424)===_r&&500>Ur()-Zh?Qa(y,0):Hu|=P),Cs(y,x)}function uv(y,x){x===0&&(y.mode&1?(x=hn,hn<<=1,!(hn&130023424)&&(hn=4194304)):x=1);var P=zn();y=Vl(y,x),y!==null&&(Da(y,x,P),Cs(y,P))}function Px(y){var x=y.memoizedState,P=0;x!==null&&(P=x.retryLane),uv(y,P)}function Ix(y,x){var P=0;switch(y.tag){case 13:var B=y.stateNode,z=y.memoizedState;z!==null&&(P=z.retryLane);break;case 19:B=y.stateNode;break;default:throw Error(o(314))}B!==null&&B.delete(x),uv(y,P)}var cv;cv=function(y,x,P){if(y!==null)if(y.memoizedProps!==x.pendingProps||An.current)bi=!0;else{if(!(y.lanes&P)&&!(x.flags&128))return bi=!1,dm(y,x,P);bi=!!(y.flags&131072)}else bi=!1,Pn&&x.flags&1048576&&Qr(x,H,x.index);switch(x.lanes=0,x.tag){case 2:var B=x.type;y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps;var z=It(x,yn.current);kl(x,P),z=nf(null,x,B,y,z,P);var K=Ll();return x.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Mn(B)?(K=!0,lr(x)):K=!1,x.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Ba(x),z.updater=bu,x.stateNode=z,z._reactInternals=x,Xc(x,B,y,P),x=Yi(null,x,B,!0,K,P)):(x.tag=0,Pn&&K&&Rn(x),Rr(null,x,z,P),x=x.child),x;case 16:B=x.elementType;e:{switch(y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),y=x.pendingProps,z=B._init,B=z(B._payload),x.type=B,z=x.tag=PS(B),y=yr(B,y),z){case 0:x=qa(null,x,B,y,P);break e;case 1:x=Du(null,x,B,y,P);break e;case 11:x=fr(null,x,B,y,P);break e;case 14:x=or(null,x,B,yr(B.type,y),P);break e}throw Error(o(306,B,""))}return x;case 0:return B=x.type,z=x.pendingProps,z=x.elementType===B?z:yr(B,z),qa(y,x,B,z,P);case 1:return B=x.type,z=x.pendingProps,z=x.elementType===B?z:yr(B,z),Du(y,x,B,z,P);case 3:e:{if(Hh(x),y===null)throw Error(o(387));B=x.pendingProps,K=x.memoizedState,z=K.element,wu(y,x),Eu(x,B,null,P);var ge=x.memoizedState;if(B=ge.element,Be&&K.isDehydrated)if(K={element:B,isDehydrated:!1,cache:ge.cache,transitions:ge.transitions},x.updateQueue.baseState=K,x.memoizedState=K,x.flags&256){z=Error(o(423)),x=$y(y,x,B,P,z);break e}else if(B!==z){z=Error(o(424)),x=$y(y,x,B,P,z);break e}else for(Be&&(vr=Vc(x.stateNode.containerInfo),Vn=x,Pn=!0,Xi=null,Bo=!1),P=xx(x,null,B,P),x.child=P;P;)P.flags=P.flags&-3|4096,P=P.sibling;else{if(Yc(),B===z){x=Ts(y,x,P);break e}Rr(y,x,B,P)}x=x.child}return x;case 5:return wx(x),y===null&&Ol(x),B=x.type,z=x.pendingProps,K=y!==null?y.memoizedProps:null,ge=z.children,fe(B,z)?ge=null:K!==null&&fe(B,K)&&(x.flags|=32),cs(y,x),Rr(y,x,ge,P),x.child;case 6:return y===null&&Ol(x),null;case 13:return Ky(y,x,P);case 4:return Xp(x,x.stateNode.containerInfo),B=x.pendingProps,y===null?x.child=ja(x,null,B,P):Rr(y,x,B,P),x.child;case 11:return B=x.type,z=x.pendingProps,z=x.elementType===B?z:yr(B,z),fr(y,x,B,z,P);case 7:return Rr(y,x,x.pendingProps,P),x.child;case 8:return Rr(y,x,x.pendingProps.children,P),x.child;case 12:return Rr(y,x,x.pendingProps.children,P),x.child;case 10:e:{if(B=x.type._context,z=x.pendingProps,K=x.memoizedProps,ge=z.value,ho(x,B,ge),K!==null)if(_i(K.value,ge)){if(K.children===z.children&&!An.current){x=Ts(y,x,P);break e}}else for(K=x.child,K!==null&&(K.return=x);K!==null;){var Ce=K.dependencies;if(Ce!==null){ge=K.child;for(var Ke=Ce.firstContext;Ke!==null;){if(Ke.context===B){if(K.tag===1){Ke=Ys(-1,P&-P),Ke.tag=2;var ct=K.updateQueue;if(ct!==null){ct=ct.shared;var Ct=ct.pending;Ct===null?Ke.next=Ke:(Ke.next=Ct.next,Ct.next=Ke),ct.pending=Ke}}K.lanes|=P,Ke=K.alternate,Ke!==null&&(Ke.lanes|=P),po(K.return,P,x),Ce.lanes|=P;break}Ke=Ke.next}}else if(K.tag===10)ge=K.type===x.type?null:K.child;else if(K.tag===18){if(ge=K.return,ge===null)throw Error(o(341));ge.lanes|=P,Ce=ge.alternate,Ce!==null&&(Ce.lanes|=P),po(ge,P,x),ge=K.sibling}else ge=K.child;if(ge!==null)ge.return=K;else for(ge=K;ge!==null;){if(ge===x){ge=null;break}if(K=ge.sibling,K!==null){K.return=ge.return,ge=K;break}ge=ge.return}K=ge}Rr(y,x,z.children,P),x=x.child}return x;case 9:return z=x.type,B=x.pendingProps.children,kl(x,P),z=ki(z),B=B(z),x.flags|=1,Rr(y,x,B,P),x.child;case 14:return B=x.type,z=yr(B,x.pendingProps),z=yr(B.type,z),or(y,x,B,z,P);case 15:return Ga(y,x,x.type,x.pendingProps,P);case 17:return B=x.type,z=x.pendingProps,z=x.elementType===B?z:yr(B,z),y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2),x.tag=1,Mn(B)?(y=!0,lr(x)):y=!1,kl(x,P),Su(x,B,z),Xc(x,B,z,P),Yi(null,x,B,!0,y,P);case 19:return Nu(y,x,P);case 22:return Oi(y,x,P)}throw Error(o(156,x.tag))};function _m(y,x){return oa(y,x)}function kx(y,x,P,B){this.tag=y,this.key=P,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function io(y,x,P,B){return new kx(y,x,P,B)}function xm(y){return y=y.prototype,!(!y||!y.isReactComponent)}function PS(y){if(typeof y=="function")return xm(y)?1:0;if(y!=null){if(y=y.$$typeof,y===w)return 11;if(y===A)return 14}return 2}function Za(y,x){var P=y.alternate;return P===null?(P=io(y.tag,x,y.key,y.mode),P.elementType=y.elementType,P.type=y.type,P.stateNode=y.stateNode,P.alternate=y,y.alternate=P):(P.pendingProps=x,P.type=y.type,P.flags=0,P.subtreeFlags=0,P.deletions=null),P.flags=y.flags&14680064,P.childLanes=y.childLanes,P.lanes=y.lanes,P.child=y.child,P.memoizedProps=y.memoizedProps,P.memoizedState=y.memoizedState,P.updateQueue=y.updateQueue,x=y.dependencies,P.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},P.sibling=y.sibling,P.index=y.index,P.ref=y.ref,P}function wm(y,x,P,B,z,K){var ge=2;if(B=y,typeof y=="function")xm(y)&&(ge=1);else if(typeof y=="string")ge=5;else e:switch(y){case c:return $u(P.children,z,K,x);case f:ge=8,z|=8;break;case h:return y=io(12,P,x,z|2),y.elementType=h,y.lanes=K,y;case _:return y=io(13,P,x,z),y.elementType=_,y.lanes=K,y;case v:return y=io(19,P,x,z),y.elementType=v,y.lanes=K,y;case b:return sd(P,z,K,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case p:ge=10;break e;case g:ge=9;break e;case w:ge=11;break e;case A:ge=14;break e;case S:ge=16,B=null;break e}throw Error(o(130,y==null?y:typeof y,""))}return x=io(ge,P,x,z),x.elementType=y,x.type=B,x.lanes=K,x}function $u(y,x,P,B){return y=io(7,y,B,x),y.lanes=P,y}function sd(y,x,P,B){return y=io(22,y,B,x),y.elementType=b,y.lanes=P,y.stateNode={},y}function Am(y,x,P){return y=io(6,y,null,x),y.lanes=P,y}function Em(y,x,P){return x=io(4,y.children!==null?y.children:[],y.key,x),x.lanes=P,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function bm(y,x,P,B,z){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gc(0),this.expirationTimes=Gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gc(0),this.identifierPrefix=B,this.onRecoverableError=z,Be&&(this.mutableSourceEagerHydrationData=null)}function Ox(y,x,P,B,z,K,ge,Ce,Ke){return y=new bm(y,x,P,Ce,Ke),x===1?(x=1,K===!0&&(x|=8)):x=0,K=io(3,null,null,x),y.current=K,K.stateNode=y,K.memoizedState={element:B,isDehydrated:P,cache:null,transitions:null},Ba(K),y}function Dx(y){if(!y)return zt;y=y._reactInternals;e:{if(O(y)!==y||y.tag!==1)throw Error(o(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Mn(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(o(171))}if(y.tag===1){var P=y.type;if(Mn(P))return Oo(y,P,x)}return x}function Lx(y){var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(o(188)):(y=Object.keys(y).join(","),Error(o(268,y)));return y=U(x),y===null?null:y.stateNode}function yo(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var P=y.retryLane;y.retryLane=P!==0&&P<x?P:x}}function od(y,x){yo(y,x),(y=y.alternate)&&yo(y,x)}function Sm(y){return y=U(y),y===null?null:y.stateNode}function Nx(){return null}return t.attemptContinuousHydration=function(y){if(y.tag===13){var x=zn();Zi(y,134217728,x),od(y,134217728)}},t.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var x=zn(),P=Go(y);Zi(y,P,x),od(y,P)}},t.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var P=Yr(x.pendingLanes);P!==0&&(li(x,P|1),Cs(x,Ur()),!(vn&6)&&(Gu(),os()))}break;case 13:var B=zn();mf(function(){return Zi(y,1,B)}),od(y,1)}},t.batchedUpdates=function(y,x){var P=vn;vn|=1;try{return y(x)}finally{vn=P,vn===0&&(Gu(),sr&&os())}},t.createComponentSelector=function(y){return{$$typeof:Jh,value:y}},t.createContainer=function(y,x,P,B,z,K,ge){return Ox(y,x,!1,null,P,B,z,K,ge)},t.createHasPseudoClassSelector=function(y){return{$$typeof:Uu,value:y}},t.createHydrationContainer=function(y,x,P,B,z,K,ge,Ce,Ke){return y=Ox(P,B,!0,y,z,K,ge,Ce,Ke),y.context=Dx(null),P=y.current,B=zn(),z=Go(P),K=Ys(B,z),K.callback=x??null,No(P,K),y.current.lanes=z,Da(y,z,B),Cs(y,B),y},t.createPortal=function(y,x,P){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:B==null?null:""+B,children:y,containerInfo:x,implementation:P}},t.createRoleSelector=function(y){return{$$typeof:ju,value:y}},t.createTestNameSelector=function(y){return{$$typeof:Ka,value:y}},t.createTextSelector=function(y){return{$$typeof:ff,value:y}},t.deferredUpdates=function(y){var x=dn,P=tr.transition;try{return tr.transition=null,dn=16,y()}finally{dn=x,tr.transition=P}},t.discreteUpdates=function(y,x,P,B,z){var K=dn,ge=tr.transition;try{return tr.transition=null,dn=1,y(x,P,B,z)}finally{dn=K,tr.transition=ge,vn===0&&Gu()}},t.findAllNodes=Ja,t.findBoundingRects=function(y,x){if(!Le)throw Error(o(363));x=Ja(y,x),y=[];for(var P=0;P<x.length;P++)y.push(q(x[P]));for(x=y.length-1;0<x;x--){P=y[x];for(var B=P.x,z=B+P.width,K=P.y,ge=K+P.height,Ce=x-1;0<=Ce;Ce--)if(x!==Ce){var Ke=y[Ce],ct=Ke.x,Ct=ct+Ke.width,rn=Ke.y,Ht=rn+Ke.height;if(B>=ct&&K>=rn&&z<=Ct&&ge<=Ht){y.splice(x,1);break}else if(B!==ct||P.width!==Ke.width||Ht<K||rn>ge){if(!(K!==rn||P.height!==Ke.height||Ct<B||ct>z)){ct>B&&(Ke.width+=ct-B,Ke.x=B),Ct<z&&(Ke.width=z-ct),y.splice(x,1);break}}else{rn>K&&(Ke.height+=rn-K,Ke.y=K),Ht<ge&&(Ke.height=ge-rn),y.splice(x,1);break}}}return y},t.findHostInstance=Lx,t.findHostInstanceWithNoPortals=function(y){return y=D(y),y=y!==null?$(y):null,y===null?null:y.stateNode},t.findHostInstanceWithWarning=function(y){return Lx(y)},t.flushControlled=function(y){var x=vn;vn|=1;var P=tr.transition,B=dn;try{tr.transition=null,dn=1,y()}finally{dn=B,tr.transition=P,vn=x,vn===0&&(Gu(),os())}},t.flushPassiveEffects=ma,t.flushSync=mf,t.focusWithin=function(y,x){if(!Le)throw Error(o(363));for(y=Xh(y),x=to(y,x),x=Array.from(x),y=0;y<x.length;){var P=x[y++];if(!de(P)){if(P.tag===5&&Ae(P.stateNode))return!0;for(P=P.child;P!==null;)x.push(P),P=P.sibling}}return!1},t.getCurrentUpdatePriority=function(){return dn},t.getFindAllNodesFailureDescription=function(y,x){if(!Le)throw Error(o(363));var P=0,B=[];y=[Xh(y),0];for(var z=0;z<y.length;){var K=y[z++],ge=y[z++],Ce=x[ge];if((K.tag!==5||!de(K))&&(Yh(K,Ce)&&(B.push(Ul(Ce)),ge++,ge>P&&(P=ge)),ge<x.length))for(K=K.child;K!==null;)y.push(K,ge),K=K.sibling}if(P<x.length){for(y=[];P<x.length;P++)y.push(Ul(x[P]));return`findAllNodes was able to match part of the selector:
  `+(B.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},t.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return se(y.child.stateNode);default:return y.child.stateNode}},t.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Sm,findFiberByHostInstance:y.findFiberByHostInstance||Nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(x.isDisabled||!x.supportsFiber)y=!0;else{try{la=x.inject(y),Xs=x}catch{}y=!!x.checkDCE}}return y},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(y,x,P,B){if(!Le)throw Error(o(363));y=Ja(y,x);var z=He(y,P,B).disconnect;return{disconnect:function(){z()}}},t.registerMutableSourceForHydration=function(y,x){var P=x._getVersion;P=P(x._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[x,P]:y.mutableSourceEagerHydrationData.push(x,P)},t.runWithPriority=function(y,x){var P=dn;try{return dn=y,x()}finally{dn=P}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(y,x,P,B){var z=x.current,K=zn(),ge=Go(z);return P=Dx(P),x.context===null?x.context=P:x.pendingContext=P,x=Ys(K,ge),x.payload={element:y},B=B===void 0?null:B,B!==null&&(x.callback=B),No(z,x),y=Zi(z,ge,K),y!==null&&Fa(y,z,ge),ge},t}),GC}var XU;function Ewe(){return XU||(XU=1,VC.exports=Awe()),VC.exports}var bwe=Ewe();const Swe=Ma(bwe);var YU=X7();const B3={},Twe=n=>void Object.assign(B3,n);function Cwe(n,e){function t(c,{args:f=[],attach:h,...p},g){let w=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(p.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=p.object;_=cg(v,{type:c,root:g,attach:h,primitive:!0})}else{const v=B3[w];if(!v)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=cg(new v(...f),{type:c,root:g,attach:h,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),w!=="inject"&&$C(_,p),_}function r(c,f){let h=!1;if(f){var p,g;(p=f.__r3f)!=null&&p.attach?WC(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),h=!0),h||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||cg(f,{}),f.__r3f.parent=c,bP(f),fg(f)}}function i(c,f,h){let p=!1;if(f){var g,w;if((g=f.__r3f)!=null&&g.attach)WC(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:f});const _=c.children.filter(A=>A!==f),v=_.indexOf(h);c.children=[..._.slice(0,v),f,..._.slice(v)],p=!0}p||(w=c.__r3f)==null||w.objects.push(f),f.__r3f||cg(f,{}),f.__r3f.parent=c,bP(f),fg(f)}}function s(c,f,h=!1){c&&[...c].forEach(p=>o(f,p,h))}function o(c,f,h){if(f){var p,g,w;if(f.__r3f&&(f.__r3f.parent=null),(p=c.__r3f)!=null&&p.objects&&(c.__r3f.objects=c.__r3f.objects.filter(b=>b!==f)),(g=f.__r3f)!=null&&g.attach)n4(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var _;c.remove(f),(_=f.__r3f)!=null&&_.root&&Lwe(eA(f),f)}const A=(w=f.__r3f)==null?void 0:w.primitive,S=!A&&(h===void 0?f.dispose!==null:h);if(!A){var v;s((v=f.__r3f)==null?void 0:v.objects,f,S),s(f.children,f,S)}if(delete f.__r3f,S&&f.dispose&&f.type!=="Scene"){const b=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?YU.unstable_scheduleCallback(YU.unstable_IdlePriority,b):b()}fg(c)}}function a(c,f,h,p){var g;const w=(g=c.__r3f)==null?void 0:g.parent;if(!w)return;const _=t(f,h,c.__r3f.root);if(c.children){for(const v of c.children)v.__r3f&&r(_,v);c.children=c.children.filter(v=>!v.__r3f)}c.__r3f.objects.forEach(v=>r(_,v)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(w,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),r(w,_),_.raycast&&_.__r3f.eventCount&&eA(_).getState().internal.interaction.push(_),[p,p.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>{};return{reconciler:Swe({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,r(h,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,h)=>{if(!f||!h)return;const p=c.getState().scene;p.__r3f&&i(p,f,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,h,p){var g;if(((g=c==null?void 0:c.__r3f)!=null?g:{}).primitive&&p.object&&p.object!==c)return[!0];{const{args:_=[],children:v,...A}=p,{args:S=[],children:b,...C}=h;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((R,k)=>R!==S[k]))return[!0];const L=rq(c,A,C,!0);return L.changes.length?[!1,L]:null}},commitUpdate(c,[f,h],p,g,w,_){f?a(c,p,w,_):$C(c,h)},commitMount(c,f,h,p){var g;const w=(g=c.__r3f)!=null?g:{};c.raycast&&w.handlers&&w.eventCount&&eA(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>cg(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:h,parent:p}=(f=c.__r3f)!=null?f:{};h&&p&&n4(p,c,h),c.isObject3D&&(c.visible=!1),fg(c)},unhideInstance(c,f){var h;const{attach:p,parent:g}=(h=c.__r3f)!=null?h:{};p&&g&&WC(g,c,p),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),fg(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e(),beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Er.fun(performance.now)?performance.now:Er.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Er.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Er.fun(clearTimeout)?clearTimeout:void 0}),applyProps:$C}}var QU,ZU;const qC=n=>"colorSpace"in n||"outputColorSpace"in n,Y7=()=>{var n;return(n=B3.ColorManagement)!=null?n:null},Q7=n=>n&&n.isOrthographicCamera,Mwe=n=>n&&n.hasOwnProperty("current"),fx=typeof window<"u"&&((QU=window.document)!=null&&QU.createElement||((ZU=window.navigator)==null?void 0:ZU.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function Z7(n){const e=W.useRef(n);return fx(()=>void(e.current=n),[n]),e}function Rwe({set:n}){return fx(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class eq extends W.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}eq.getDerivedStateFromError=()=>({error:!0});const tq="__default",e4=new Map,Pwe=n=>n&&!!n.memoized&&!!n.changes;function nq(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Wv=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function eA(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Er={obj:n=>n===Object(n)&&!Er.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Er.str(n)||Er.num(n)||Er.boo(n))return n===e;const s=Er.obj(n);if(s&&r==="reference")return n===e;const o=Er.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!Er.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(Er.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Iwe(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function kwe(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function cg(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function EP(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const t4=/-\d+$/;function WC(n,e,t){if(Er.str(t)){if(t4.test(t)){const s=t.replace(t4,""),{target:o,key:a}=EP(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=EP(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function n4(n,e,t){var r,i;if(Er.str(t)){const{target:s,key:o}=EP(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function rq(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){const c=n.__r3f,f=Object.entries(i),h=[];if(u){const g=Object.keys(l);for(let w=0;w<g.length;w++)i.hasOwnProperty(g[w])||f.unshift([g[w],tq+"remove"])}f.forEach(([g,w])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&g==="object"||Er.equ(w,l[g]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g))return h.push([g,w,!0,[]]);let v=[];g.includes("-")&&(v=g.split("-")),h.push([g,w,!1,v]);for(const A in i){const S=i[A];A.startsWith(`${g}-`)&&h.push([A,S,!1,A.split("-")])}});const p={...i};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(p.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(p.attach=c.memoizedProps.attach),{memoized:p,changes:h}}function $C(n,e){var t;const r=n.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=Pwe(e)?e:rq(n,e),l=r==null?void 0:r.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[p,g,w,_]=a[h];if(qC(n)){const b="srgb",C="srgb-linear";p==="encoding"?(p="colorSpace",g=g===3001?b:C):p==="outputEncoding"&&(p="outputColorSpace",g=g===3001?b:C)}let v=n,A=v[p];if(_.length&&(A=_.reduce((S,b)=>S[b],n),!(A&&A.set))){const[S,...b]=_.reverse();v=b.reverse().reduce((C,L)=>C[L],n),p=S}if(g===tq+"remove")if(v.constructor){let S=e4.get(v.constructor);S||(S=new v.constructor,e4.set(v.constructor,S)),g=S[p]}else g=0;if(w&&r)g?r.handlers[p]=g:delete r.handlers[p],r.eventCount=Object.keys(r.handlers).length;else if(A&&A.set&&(A.copy||A instanceof lp)){if(Array.isArray(g))A.fromArray?A.fromArray(g):A.set(...g);else if(A.copy&&g&&g.constructor&&A.constructor===g.constructor)A.copy(g);else if(g!==void 0){var u;const S=(u=A)==null?void 0:u.isColor;!S&&A.setScalar?A.setScalar(g):A instanceof lp&&g instanceof lp?A.mask=g.mask:A.set(g),!Y7()&&s&&!s.linear&&S&&A.convertSRGBToLinear()}}else{var c;if(v[p]=g,(c=v[p])!=null&&c.isTexture&&v[p].format===js&&v[p].type===wl&&s){const S=v[p];qC(S)&&qC(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}fg(n)}if(r&&r.parent&&n.raycast&&l!==r.eventCount){const h=eA(n).getState().internal,p=h.interaction.indexOf(n);p>-1&&h.interaction.splice(p,1),r.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&bP(n),n}function fg(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function bP(n){n.onUpdate==null||n.onUpdate(n)}function Owe(n,e){n.manual||(Q7(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Aw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Dwe(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return m_.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return m_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return m_.ContinuousEventPriority;default:return m_.DefaultEventPriority}}function iq(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function Lwe(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{iq(t.capturedMap,e,r,i)})}function Nwe(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),f=new Set,h=[],p=u?u(c.internal.interaction):c.internal.interaction;for(let v=0;v<p.length;v++){const A=Wv(p[v]);A&&(A.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function g(v){const A=Wv(v);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var S;A.events.compute==null||A.events.compute(l,A,(S=A.previousRoot)==null?void 0:S.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(v,!0):[]}let w=p.flatMap(g).sort((v,A)=>{const S=Wv(v.object),b=Wv(A.object);return!S||!b?v.distance-A.distance:b.events.priority-S.events.priority||v.distance-A.distance}).filter(v=>{const A=Aw(v);return f.has(A)?!1:(f.add(A),!0)});c.events.filter&&(w=c.events.filter(w,c));for(const v of w){let A=v.object;for(;A;){var _;(_=A.__r3f)!=null&&_.eventCount&&h.push({...v,eventObject:A}),A=A.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let v of c.internal.capturedMap.get(l.pointerId).values())f.has(Aw(v.intersection))||h.push(v.intersection);return h}function i(l,u,c,f){const h=n.getState();if(l.length){const p={stopped:!1};for(const g of l){const w=Wv(g.object)||h,{raycaster:_,pointer:v,camera:A,internal:S}=w,b=new pe(v.x,v.y,0).unproject(A),C=M=>{var D,U;return(D=(U=S.capturedMap.get(M))==null?void 0:U.has(g.eventObject))!=null?D:!1},L=M=>{const D={intersection:g,target:u.target};S.capturedMap.has(M)?S.capturedMap.get(M).set(g.eventObject,D):S.capturedMap.set(M,new Map([[g.eventObject,D]])),u.target.setPointerCapture(M)},R=M=>{const D=S.capturedMap.get(M);D&&iq(S.capturedMap,g.eventObject,D,M)};let k={};for(let M in u){let D=u[M];typeof D!="function"&&(k[M]=D)}let O={...g,...k,pointer:v,intersections:l,stopped:p.stopped,delta:c,unprojectedPoint:b,ray:_.ray,camera:A,stopPropagation(){const M="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!M||M.has(g.eventObject))&&(O.stopped=p.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(D=>D.eventObject===g.eventObject))){const D=l.slice(0,l.indexOf(g));s([...D,g])}},target:{hasPointerCapture:C,setPointerCapture:L,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:L,releasePointerCapture:R},nativeEvent:u};if(f(O),p.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const h=c.eventObject.__r3f,p=h==null?void 0:h.handlers;if(u.hovered.delete(Aw(c)),h!=null&&h.eventCount){const g={...c,intersections:l};p.onPointerOut==null||p.onPointerOut(g),p.onPointerLeave==null||p.onPointerLeave(g)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=c;const p=l==="onPointerMove",g=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=r(c,p?t:void 0),v=g?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=_.map(S=>S.eventObject)),g&&!_.length&&v<=2&&(o(c,h.interaction),f&&f(c)),p&&s(_);function A(S){const b=S.eventObject,C=b.__r3f,L=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(p){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const R=Aw(S),k=h.hovered.get(R);k?k.stopped&&S.stopPropagation():(h.hovered.set(R,S),L.onPointerOver==null||L.onPointerOver(S),L.onPointerEnter==null||L.onPointerEnter(S))}L.onPointerMove==null||L.onPointerMove(S)}else{const R=L[l];R?(!g||h.initialHits.includes(b))&&(o(c,h.interaction.filter(k=>!h.initialHits.includes(k))),R(S)):g&&h.initialHits.includes(b)&&o(c,h.interaction.filter(k=>!h.initialHits.includes(k)))}}i(_,c,v,A)}}return{handlePointer:a}}const sq=n=>!!(n!=null&&n.render),oq=W.createContext(null),Bwe=(n,e)=>{const t=gwe((a,l)=>{const u=new pe,c=new pe,f=new pe;function h(v=l().camera,A=c,S=l().size){const{width:b,height:C,top:L,left:R}=S,k=b/C;A.isVector3?f.copy(A):f.set(...A);const O=v.getWorldPosition(u).distanceTo(f);if(Q7(v))return{width:b/v.zoom,height:C/v.zoom,top:L,left:R,factor:1,distance:O,aspect:k};{const M=v.fov*Math.PI/180,D=2*Math.tan(M/2)*O,U=D*(b/C);return{width:U,height:D,top:L,left:R,factor:b/U,distance:O,aspect:k}}}let p;const g=v=>a(A=>({performance:{...A.performance,current:v}})),w=new Ze;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,A)=>e(v,A,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new I3,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();p&&clearTimeout(p),v.performance.current!==v.performance.min&&g(v.performance.min),p=setTimeout(()=>g(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:v=>a(A=>({...A,events:{...A.events,...v}})),setSize:(v,A,S,b,C)=>{const L=l().camera,R={width:v,height:A,top:b||0,left:C||0,updateStyle:S};a(k=>({size:R,viewport:{...k.viewport,...h(L,c,R)}}))},setDpr:v=>a(A=>{const S=nq(v);return{viewport:{...A.viewport,dpr:S,initialDpr:A.viewport.initialDpr||S}}}),setFrameloop:(v="always")=>{const A=l().clock;A.stop(),A.elapsedTime=0,v!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:W.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,A,S)=>{const b=l().internal;return b.priority=b.priority+(A>0?1:0),b.subscribers.push({ref:v,priority:A,store:S}),b.subscribers=b.subscribers.sort((C,L)=>C.priority-L.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(A>0?1:0),C.subscribers=C.subscribers.filter(L=>L.ref!==v))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==i.width||l.height!==i.height||u.dpr!==s){var h;i=l,s=u.dpr,Owe(a,l),c.setPixelRatio(u.dpr);const p=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,p)}a!==o&&(o=a,f(p=>({viewport:{...p.viewport,...p.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};function Fwe(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let Ew,aq=new Set,Uwe=new Set,jwe=new Set;const Vwe=n=>Fwe(n,aq);function KC(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function $v(n,e){switch(n){case"before":return KC(aq,e);case"after":return KC(Uwe,e);case"tail":return KC(jwe,e)}}let JC,XC;function YC(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),JC=e.internal.subscribers,Ew=0;Ew<JC.length;Ew++)XC=JC[Ew],XC.ref.current(XC.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function zwe(n){let e=!1,t=!1,r,i,s;function o(u){i=requestAnimationFrame(o),e=!0,r=0,$v("before",u),t=!0;for(const f of n.values()){var c;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(r+=YC(u,s))}if(t=!1,$v("after",u),r===0)return $v("tail",u),e=!1,cancelAnimationFrame(i)}function a(u,c=1){var f;if(!u)return n.forEach(h=>a(h.store.getState(),c));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,f,h){if(c&&$v("before",u),f)YC(u,f,h);else for(const p of n.values())YC(u,p.store.getState());c&&$v("after",u)}return{loop:o,invalidate:a,advance:l}}function lq(){const n=W.useContext(oq);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Hwe(n=t=>t,e){return lq()(n,e)}function dS(n,e=0){const t=lq(),r=t.getState().internal.subscribe,i=Z7(n);return fx(()=>r(i,e,t),[e,r,t]),null}const r4=new WeakMap;function uq(n,e){return function(t,...r){let i=r4.get(t);return i||(i=new t,r4.set(t,i)),n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,Iwe(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function hx(n,e,t,r){const i=Array.isArray(e)?e:[e],s=vwe(uq(t,r),[n,...i],{equal:Er.equ});return Array.isArray(e)?s:s[0]}hx.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return _we(uq(t),[n,...r])};hx.clear=function(n,e){const t=Array.isArray(e)?e:[e];return xwe([n,...t])};const ny=new Map,{invalidate:i4,advance:s4}=zwe(ny),{reconciler:TE,applyProps:jd}=Cwe(ny,Dwe),ng={objects:"shallow",strict:!1},Gwe=(n,e)=>{const t=typeof n=="function"?n(e):n;return sq(t)?t:new W7({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function qwe(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:r,height:i,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Wwe(n){const e=ny.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||Bwe(i4,s4),o=t||TE.createContainer(s,m_.ConcurrentRoot,null,!1,null,"",i,null);e||ny.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:f,size:h,scene:p,events:g,onCreated:w,shadows:_=!1,linear:v=!1,flat:A=!1,legacy:S=!1,orthographic:b=!1,frameloop:C="always",dpr:L=[1,2],performance:R,raycaster:k,camera:O,onPointerMissed:M}=c,D=s.getState(),U=D.gl;D.gl||D.set({gl:U=Gwe(f,n)});let F=D.raycaster;F||D.set({raycaster:F=new F7});const{params:$,...Z}=k||{};if(Er.equ(Z,F,ng)||jd(F,{...Z}),Er.equ($,F.params,ng)||jd(F,{params:{...F.params,...$}}),!D.camera||D.camera===u&&!Er.equ(u,O,ng)){u=O;const Y=O instanceof nx,V=Y?O:b?new My(0,0,0,0,.1,1e3):new Ui(75,0,.1,1e3);Y||(V.position.z=5,O&&(jd(V,O),("aspect"in O||"left"in O||"right"in O||"bottom"in O||"top"in O)&&(V.manual=!0,V.updateProjectionMatrix())),!D.camera&&!(O!=null&&O.rotation)&&V.lookAt(0,0,0)),D.set({camera:V}),F.camera=V}if(!D.scene){let Y;p!=null&&p.isScene?Y=p:(Y=new a3,p&&jd(Y,p)),D.set({scene:cg(Y)})}if(!D.xr){var se;const Y=(re,oe)=>{const fe=s.getState();fe.frameloop!=="never"&&s4(re,!0,fe,oe)},V=()=>{const re=s.getState();re.gl.xr.enabled=re.gl.xr.isPresenting,re.gl.xr.setAnimationLoop(re.gl.xr.isPresenting?Y:null),re.gl.xr.isPresenting||i4(re)},X={connect(){const re=s.getState().gl;re.xr.addEventListener("sessionstart",V),re.xr.addEventListener("sessionend",V)},disconnect(){const re=s.getState().gl;re.xr.removeEventListener("sessionstart",V),re.xr.removeEventListener("sessionend",V)}};typeof((se=U.xr)==null?void 0:se.addEventListener)=="function"&&X.connect(),D.set({xr:X})}if(U.shadowMap){const Y=U.shadowMap.enabled,V=U.shadowMap.type;if(U.shadowMap.enabled=!!_,Er.boo(_))U.shadowMap.type=D_;else if(Er.str(_)){var ce;const X={basic:ZH,percentage:Db,soft:D_,variance:cl};U.shadowMap.type=(ce=X[_])!=null?ce:D_}else Er.obj(_)&&Object.assign(U.shadowMap,_);(Y!==U.shadowMap.enabled||V!==U.shadowMap.type)&&(U.shadowMap.needsUpdate=!0)}const Q=Y7();Q&&("enabled"in Q?Q.enabled=!S:"legacyMode"in Q&&(Q.legacyMode=S)),l||jd(U,{outputEncoding:v?3e3:3001,toneMapping:A?nu:qk}),D.legacy!==S&&D.set(()=>({legacy:S})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==A&&D.set(()=>({flat:A})),f&&!Er.fun(f)&&!sq(f)&&!Er.equ(f,U,ng)&&jd(U,f),g&&!D.events.handlers&&D.set({events:g(s)});const ee=qwe(n,h);return Er.equ(ee,D.size,ng)||D.setSize(ee.width,ee.height,ee.updateStyle,ee.top,ee.left),L&&D.viewport.dpr!==nq(L)&&D.setDpr(L),D.frameloop!==C&&D.setFrameloop(C),D.onPointerMissed||D.set({onPointerMissed:M}),R&&!Er.equ(R,D.performance,ng)&&D.set(Y=>({performance:{...Y.performance,...R}})),a=w,l=!0,this},render(c){return l||this.configure(),TE.updateContainer(N.jsx($we,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){cq(n)}}}function $we({store:n,children:e,onCreated:t,rootElement:r}){return fx(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),N.jsx(oq.Provider,{value:n,children:e})}function cq(n,e){const t=ny.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),TE.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),kwe(i),ny.delete(n)}catch{}},500)})}}TE.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:W.version});const QC={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Kwe(n){const{handlePointer:e}=Nwe(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(QC).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=QC[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=QC[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}var ZC,o4;function Jwe(){if(o4)return ZC;o4=1;function n(e,t,r){var i,s,o,a,l;t==null&&(t=100);function u(){var f=Date.now()-a;f<t&&f>=0?i=setTimeout(u,t-f):(i=null,r||(l=e.apply(o,s),o=s=null))}var c=function(){o=this,s=arguments,a=Date.now();var f=r&&!i;return i||(i=setTimeout(u,t)),f&&(l=e.apply(o,s),o=s=null),l};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(l=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},c}return n.debounce=n,ZC=n,ZC}var Xwe=Jwe();const a4=Ma(Xwe);var Ywe=Object.defineProperty,Qwe=Object.defineProperties,Zwe=Object.getOwnPropertyDescriptors,l4=Object.getOwnPropertySymbols,eAe=Object.prototype.hasOwnProperty,tAe=Object.prototype.propertyIsEnumerable,u4=(n,e,t)=>e in n?Ywe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,c4=(n,e)=>{for(var t in e||(e={}))eAe.call(e,t)&&u4(n,t,e[t]);if(l4)for(var t of l4(e))tAe.call(e,t)&&u4(n,t,e[t]);return n},nAe=(n,e)=>Qwe(n,Zwe(e)),f4,h4;typeof window<"u"&&((f4=window.document)!=null&&f4.createElement||((h4=window.navigator)==null?void 0:h4.product)==="ReactNative")?W.useLayoutEffect:W.useEffect;function fq(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=n.child;for(;r;){const i=fq(r,e,t);if(i)return i;r=r.sibling}}function hq(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const d4=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=d4;return}return d4.apply(this,arguments)};const F3=hq(W.createContext(null));class dq extends W.Component{render(){return W.createElement(F3.Provider,{value:this._reactInternals},this.props.children)}}function rAe(){const n=W.useContext(F3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=W.useId();return W.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=fq(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function iAe(){const n=rAe(),[e]=W.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==F3&&!e.has(i)&&e.set(i,W.useContext(hq(i)))}t=t.return}return e}function sAe(){const n=iAe();return W.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>W.createElement(e,null,W.createElement(t.Provider,nAe(c4({},r),{value:n.get(t)}))),e=>W.createElement(dq,c4({},e))),[n])}function oAe({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||typeof window<"u"&&window.ResizeObserver,[s,o]=W.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=W.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=W.useRef(!1);W.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[f,h,p]=W.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:A,top:S,width:b,height:C,bottom:L,right:R,x:k,y:O}=a.current.element.getBoundingClientRect(),M={left:A,top:S,width:b,height:C,bottom:L,right:R,x:k,y:O};a.current.element instanceof HTMLElement&&r&&(M.height=a.current.element.offsetHeight,M.width=a.current.element.offsetWidth),Object.freeze(M),c.current&&!cAe(a.current.lastBounds,M)&&o(a.current.lastBounds=M)};return[v,u?a4(v,u):v,l?a4(v,l):v]},[o,r,l,u]);function g(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",p,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){var v;a.current.element&&(a.current.resizeObserver=new i(h),(v=a.current.resizeObserver)==null||v.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(A=>A.addEventListener("scroll",p,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=v=>{!v||v===a.current.element||(g(),a.current.element=v,a.current.scrollContainers=pq(v),w())};return lAe(p,!!e),aAe(h),W.useEffect(()=>{g(),w()},[e,p,h]),W.useEffect(()=>g,[]),[_,s,f]}function aAe(n){W.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function lAe(n,e){W.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function pq(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...pq(n.parentElement)]}const uAe=["x","y","top","bottom","left","right","width","height"],cAe=(n,e)=>uAe.every(t=>n[t]===e[t]),fAe=W.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=Kwe,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:h,orthographic:p,frameloop:g,dpr:w,performance:_,raycaster:v,camera:A,scene:S,onPointerMissed:b,onCreated:C,...L},R){W.useMemo(()=>Twe($7),[]);const k=sAe(),[O,M]=oAe({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=W.useRef(null),U=W.useRef(null);W.useImperativeHandle(R,()=>D.current);const F=Z7(b),[$,Z]=W.useState(!1),[se,ce]=W.useState(!1);if($)throw $;if(se)throw se;const Q=W.useRef(null);fx(()=>{const Y=D.current;M.width>0&&M.height>0&&Y&&(Q.current||(Q.current=Wwe(Y)),Q.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:h,orthographic:p,frameloop:g,dpr:w,performance:_,raycaster:v,camera:A,scene:S,size:M,onPointerMissed:(...V)=>F.current==null?void 0:F.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?Mwe(a)?a.current:a:U.current),l&&V.setEvents({compute:(X,re)=>{const oe=X[l+"X"],fe=X[l+"Y"];re.pointer.set(oe/re.size.width*2-1,-(fe/re.size.height)*2+1),re.raycaster.setFromCamera(re.pointer,re.camera)}}),C==null||C(V)}}),Q.current.render(N.jsx(k,{children:N.jsx(eq,{set:ce,children:N.jsx(W.Suspense,{fallback:N.jsx(Rwe,{set:Z}),children:e})})})))}),W.useEffect(()=>{const Y=D.current;if(Y)return()=>cq(Y)},[]);const ee=a?"none":"auto";return N.jsx("div",{ref:U,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ee,...i},...L,children:N.jsx("div",{ref:O,style:{width:"100%",height:"100%"},children:N.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),mq=W.forwardRef(function(e,t){return N.jsx(dq,{children:N.jsx(fAe,{...e,ref:t})})});function Zn(){return Zn=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zn.apply(null,arguments)}var U3=px(),Wn=n=>dx(n,U3),j3=px();Wn.write=n=>dx(n,j3);var pS=px();Wn.onStart=n=>dx(n,pS);var V3=px();Wn.onFrame=n=>dx(n,V3);var z3=px();Wn.onFinish=n=>dx(n,z3);var Pg=[];Wn.setTimeout=(n,e)=>{const t=Wn.now()+e,r=()=>{const s=Pg.findIndex(o=>o.cancel==r);~s&&Pg.splice(s,1),Xf-=~s?1:0},i={time:t,handler:n,cancel:r};return Pg.splice(gq(t),0,i),Xf+=1,yq(),i};var gq=n=>~(~Pg.findIndex(e=>e.time>n)||~Pg.length);Wn.cancel=n=>{pS.delete(n),V3.delete(n),z3.delete(n),U3.delete(n),j3.delete(n)};Wn.sync=n=>{SP=!0,Wn.batchedUpdates(n),SP=!1};Wn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function r(...i){e=i,Wn.onStart(t)}return r.handler=n,r.cancel=()=>{pS.delete(t),e=null},r};var H3=typeof window<"u"?window.requestAnimationFrame:()=>{};Wn.use=n=>H3=n;Wn.now=typeof performance<"u"?()=>performance.now():Date.now;Wn.batchedUpdates=n=>n();Wn.catch=console.error;Wn.frameLoop="always";Wn.advance=()=>{Wn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):_q()};var Jf=-1,Xf=0,SP=!1;function dx(n,e){SP?(e.delete(n),n(0)):(e.add(n),yq())}function yq(){Jf<0&&(Jf=0,Wn.frameLoop!=="demand"&&H3(vq))}function hAe(){Jf=-1}function vq(){~Jf&&(H3(vq),Wn.batchedUpdates(_q))}function _q(){const n=Jf;Jf=Wn.now();const e=gq(Jf);if(e&&(xq(Pg.splice(0,e),t=>t.handler()),Xf-=e),!Xf){hAe();return}pS.flush(),U3.flush(n?Math.min(64,Jf-n):16.667),V3.flush(),j3.flush(),z3.flush()}function px(){let n=new Set,e=n;return{add(t){Xf+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Xf-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Xf-=e.size,xq(e,r=>r(t)&&n.add(r)),Xf+=n.size,e=n)}}}function xq(n,e){n.forEach(t=>{try{e(t)}catch(r){Wn.catch(r)}})}var dAe=Object.defineProperty,pAe=(n,e)=>{for(var t in e)dAe(n,t,{get:e[t],enumerable:!0})},ry={};pAe(ry,{assign:()=>vAe,colors:()=>ih,createStringInterpolator:()=>q3,skipAnimation:()=>Aq,to:()=>wq,willAdvance:()=>W3});function mAe(){}var gAe=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),ai={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function yAe(n,e){if(ai.arr(n)){if(!ai.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var Sc=(n,e)=>n.forEach(e);function TP(n,e,t){if(ai.arr(n)){for(let r=0;r<n.length;r++)e.call(t,n[r],`${r}`);return}for(const r in n)n.hasOwnProperty(r)&&e.call(t,n[r],r)}var bw=n=>ai.und(n)?[]:ai.arr(n)?n:[n],G3=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),q3,wq,ih=null,Aq=!1,W3=mAe,vAe=n=>{n.to&&(wq=n.to),n.now&&(Wn.now=n.now),n.colors!==void 0&&(ih=n.colors),n.skipAnimation!=null&&(Aq=n.skipAnimation),n.createStringInterpolator&&(q3=n.createStringInterpolator),n.requestAnimationFrame&&Wn.use(n.requestAnimationFrame),n.batchedUpdates&&(Wn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(W3=n.willAdvance),n.frameLoop&&(Wn.frameLoop=n.frameLoop)},H_=new Set,ba=[],eM=[],CE=0,$3={get idle(){return!H_.size&&!ba.length},start(n){CE>n.priority?(H_.add(n),Wn.onStart(_Ae)):(Eq(n),Wn(CP))},advance:CP,sort(n){if(CE)Wn.onFrame(()=>$3.sort(n));else{const e=ba.indexOf(n);~e&&(ba.splice(e,1),bq(n))}},clear(){ba=[],H_.clear()}};function _Ae(){H_.forEach(Eq),H_.clear(),Wn(CP)}function Eq(n){ba.includes(n)||bq(n)}function bq(n){ba.splice(xAe(ba,e=>e.priority>n.priority),0,n)}function CP(n){const e=eM;for(let t=0;t<ba.length;t++){const r=ba[t];CE=r.priority,r.idle||(W3(r),r.advance(n),r.idle||e.push(r))}return CE=0,eM=ba,eM.length=0,ba=e,ba.length>0}function xAe(n,e){const t=n.findIndex(e);return t<0?n.length:t}var wAe={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},gl="[-+]?\\d*\\.?\\d+",ME=gl+"%";function mS(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var AAe=new RegExp("rgb"+mS(gl,gl,gl)),EAe=new RegExp("rgba"+mS(gl,gl,gl,gl)),bAe=new RegExp("hsl"+mS(gl,ME,ME)),SAe=new RegExp("hsla"+mS(gl,ME,ME,gl)),TAe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,CAe=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,MAe=/^#([0-9a-fA-F]{6})$/,RAe=/^#([0-9a-fA-F]{8})$/;function PAe(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=MAe.exec(n))?parseInt(e[1]+"ff",16)>>>0:ih&&ih[n]!==void 0?ih[n]:(e=AAe.exec(n))?(rg(e[1])<<24|rg(e[2])<<16|rg(e[3])<<8|255)>>>0:(e=EAe.exec(n))?(rg(e[1])<<24|rg(e[2])<<16|rg(e[3])<<8|g4(e[4]))>>>0:(e=TAe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=RAe.exec(n))?parseInt(e[1],16)>>>0:(e=CAe.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=bAe.exec(n))?(p4(m4(e[1]),Sw(e[2]),Sw(e[3]))|255)>>>0:(e=SAe.exec(n))?(p4(m4(e[1]),Sw(e[2]),Sw(e[3]))|g4(e[4]))>>>0:null}function tM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function p4(n,e,t){const r=t<.5?t*(1+e):t+e-t*e,i=2*t-r,s=tM(i,r,n+1/3),o=tM(i,r,n),a=tM(i,r,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function rg(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function m4(n){return(parseFloat(n)%360+360)%360/360}function g4(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function Sw(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function y4(n){let e=PAe(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${r}, ${i}, ${s})`}var w0=(n,e,t)=>{if(ai.fun(n))return n;if(ai.arr(n))return w0({range:n,output:e,extrapolate:t});if(ai.str(n.output[0]))return q3(n);const r=n,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const c=kAe(u,s);return IAe(u,s[c],s[c+1],i[c],i[c+1],l,o,a,r.map)}};function IAe(n,e,t,r,i,s,o,a,l){let u=l?l(n):n;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>t){if(a==="identity")return u;a==="clamp"&&(u=t)}return r===i?r:e===t?n<=e?r:i:(e===-1/0?u=-u:t===1/0?u=u-e:u=(u-e)/(t-e),u=s(u),r===-1/0?u=-u:i===1/0?u=u+r:u=u*(i-r)+r,u)}function kAe(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var A0=Symbol.for("FluidValue.get"),E0=Symbol.for("FluidValue.observers"),RE=n=>!!(n&&n[A0]),PE=n=>n&&n[A0]?n[A0]():n;function OAe(n,e){n.eventObserved?n.eventObserved(e):n(e)}function MP(n,e){const t=n[E0];t&&t.forEach(r=>{OAe(r,e)})}var DAe=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");LAe(this,n)}},LAe=(n,e)=>Tq(n,A0,e);function Sq(n,e){if(n[A0]){let t=n[E0];t||Tq(n,E0,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function RP(n,e){const t=n[E0];if(t&&t.has(e)){const r=t.size-1;r?t.delete(e):n[E0]=null,n.observerRemoved&&n.observerRemoved(r,e)}}var Tq=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),tA=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,NAe=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,v4=new RegExp(`(${tA.source})(%|[a-z]+)`,"i"),BAe=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,gS=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Cq=n=>{const[e,t]=FAe(n);if(!e||G3())return n;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(t&&t.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i||n}else{if(t&&gS.test(t))return Cq(t);if(t)return t}return n},FAe=n=>{const e=gS.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]},nM,UAe=(n,e,t,r,i)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(r)}, ${i})`,Mq=n=>{nM||(nM=ih?new RegExp(`(${Object.keys(ih).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>PE(s).replace(gS,Cq).replace(NAe,y4).replace(nM,y4)),t=e.map(s=>s.match(tA).map(Number)),i=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>w0({...n,output:s}));return s=>{var l;const o=!v4.test(e[0])&&((l=e.find(u=>v4.test(u)))==null?void 0:l.replace(tA,""));let a=0;return e[0].replace(tA,()=>`${i[a++](s)}${o||""}`).replace(BAe,UAe)}},Rq="react-spring: ",Pq=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${Rq}once requires a function parameter`);return(...r)=>{t||(e(...r),t=!0)}},jAe=Pq(console.warn);function VAe(){jAe(`${Rq}The "interpolate" function is deprecated in v9 (use "to" instead)`)}Pq(console.warn);function Iq(n){return ai.str(n)&&(n[0]=="#"||/\d/.test(n)||!G3()&&gS.test(n)||n in(ih||{}))}var kq=G3()?W.useEffect:W.useLayoutEffect,zAe=()=>{const n=W.useRef(!1);return kq(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function HAe(){const n=W.useState()[1],e=zAe();return()=>{e.current&&n(Math.random())}}function GAe(n,e){const[t]=W.useState(()=>({inputs:e,result:n()})),r=W.useRef(),i=r.current;let s=i;return s?s.inputs&&qAe(e,s.inputs)||(s={inputs:e,result:n()}):s=t,W.useEffect(()=>{r.current=s,i==t&&(t.inputs=t.result=void 0)},[s]),s.result}function qAe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var WAe=n=>W.useEffect(n,$Ae),$Ae=[],b0=Symbol.for("Animated:node"),KAe=n=>!!n&&n[b0]===n,K3=n=>n&&n[b0],Oq=(n,e)=>gAe(n,b0,e),J3=n=>n&&n[b0]&&n[b0].getPayload(),Dq=class{constructor(){Oq(this,this)}getPayload(){return this.payload||[]}},yS=class extends Dq{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,ai.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new yS(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return ai.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,ai.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},X3=class extends yS{constructor(n){super(0),this._string=null,this._toString=w0({output:[n,n]})}static create(n){return new X3(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(ai.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=w0({output:[this.getValue(),n]})),this._value=0,super.reset()}},IE={dependencies:null},Y3=class extends Dq{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return TP(this.source,(t,r)=>{KAe(t)?e[r]=t.getValue(n):RE(t)?e[r]=PE(t):n||(e[r]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&Sc(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return TP(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){IE.dependencies&&RE(n)&&IE.dependencies.add(n);const e=J3(n);e&&Sc(e,t=>this.add(t))}},Lq=class extends Y3{constructor(n){super(n)}static create(n){return new Lq(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,r)=>t.setValue(n[r])).some(Boolean):(super.setValue(n.map(JAe)),!0)}};function JAe(n){return(Iq(n)?X3:yS).create(n)}function XAe(n){const e=K3(n);return e?e.constructor:ai.arr(n)?Lq:Iq(n)?X3:yS}var _4=(n,e)=>{const t=!ai.fun(n)||n.prototype&&n.prototype.isReactComponent;return W.forwardRef((r,i)=>{const s=W.useRef(null),o=t&&W.useCallback(g=>{s.current=ZAe(i,g)},[i]),[a,l]=QAe(r,e),u=HAe(),c=()=>{const g=s.current;if(t&&!g)return;(g?e.applyAnimatedValues(g,a.getValue(!0)):!1)===!1&&u()},f=new YAe(c,l),h=W.useRef();kq(()=>(h.current=f,Sc(l,g=>Sq(g,f)),()=>{h.current&&(Sc(h.current.deps,g=>RP(g,h.current)),Wn.cancel(h.current.update))})),W.useEffect(c,[]),WAe(()=>()=>{const g=h.current;Sc(g.deps,w=>RP(w,g))});const p=e.getComponentProps(a.getValue());return W.createElement(n,{...p,ref:o})})},YAe=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Wn.write(this.update)}};function QAe(n,e){const t=new Set;return IE.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new Y3(n),IE.dependencies=null,[n,t]}function ZAe(n,e){return n&&(ai.fun(n)?n(e):n.current=e),e}var x4=Symbol.for("AnimatedComponent"),eEe=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=i=>new Y3(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:r},s=o=>{const a=w4(o)||"Anonymous";return ai.str(o)?o=s[o]||(s[o]=_4(o,i)):o=o[x4]||(o[x4]=_4(o,i)),o.displayName=`Animated(${a})`,o};return TP(n,(o,a)=>{ai.arr(n)&&(a=w4(o)),s[a]=s(o)}),{animated:s}},w4=n=>ai.str(n)?n:n&&ai.str(n.displayName)?n.displayName:ai.fun(n)&&n.name||null,A4=n=>n instanceof Nq,tEe=1,Nq=class extends DAe{constructor(){super(...arguments),this.id=tEe++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=K3(this);return n&&n.getValue()}to(...n){return ry.to(this,n)}interpolate(...n){return VAe(),ry.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){MP(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||$3.sort(this),MP(this,{type:"priority",parent:this,priority:n})}},Q3=({children:n,...e})=>{const t=W.useContext(kE),r=e.pause||!!t.pause,i=e.immediate||!!t.immediate;e=GAe(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=kE;return W.createElement(s,{value:e},n)},kE=nEe(Q3,{});Q3.Provider=kE.Provider;Q3.Consumer=kE.Consumer;function nEe(n,e){return Object.assign(n,W.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var rEe=class extends Nq{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=w0(...e);const t=this._get(),r=XAe(t);Oq(this,r.create(t))}advance(n){const e=this._get(),t=this.get();yAe(e,t)||(K3(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&E4(this._active)&&rM(this)}_get(){const n=ai.arr(this.source)?this.source.map(PE):bw(PE(this.source));return this.calc(...n)}_start(){this.idle&&!E4(this._active)&&(this.idle=!1,Sc(J3(this),n=>{n.done=!1}),ry.skipAnimation?(Wn.batchedUpdates(()=>this.advance()),rM(this)):$3.start(this))}_attach(){let n=1;Sc(bw(this.source),e=>{RE(e)&&Sq(e,this),A4(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){Sc(bw(this.source),n=>{RE(n)&&RP(n,this)}),this._active.clear(),rM(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=bw(this.source).reduce((e,t)=>Math.max(e,(A4(t)?t.priority:0)+1),0))}};function iEe(n){return n.idle!==!1}function E4(n){return!n.size||Array.from(n).every(iEe)}function rM(n){n.idle||(n.idle=!0,Sc(J3(n),e=>{e.done=!0}),MP(n,{type:"idle",parent:n}))}ry.assign({createStringInterpolator:Mq,to:(n,e)=>new rEe(n,e)});var sEe=["primitive"].concat(Object.keys($7).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));ry.assign({createStringInterpolator:Mq,colors:wAe,frameLoop:"demand"});Vwe(()=>{Wn.advance()});var oEe=eEe(sEe,{applyAnimatedValues:jd}),aEe=oEe.animated;const lEe=parseInt(Q0.replace(/\D+/g,""));function b4(n,e){if(e===PG)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===AE||e===n3){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const r=t.count-2,i=[];if(t)if(e===AE)for(let o=1;o<=r;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function OE(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,r=n.length;t<r;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const ep="srgb",Tc="srgb-linear",S4=3001,uEe=3e3;class Z3 extends Ws{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new pEe(t)}),this.register(function(t){return new mEe(t)}),this.register(function(t){return new bEe(t)}),this.register(function(t){return new SEe(t)}),this.register(function(t){return new TEe(t)}),this.register(function(t){return new yEe(t)}),this.register(function(t){return new vEe(t)}),this.register(function(t){return new _Ee(t)}),this.register(function(t){return new xEe(t)}),this.register(function(t){return new dEe(t)}),this.register(function(t){return new wEe(t)}),this.register(function(t){return new gEe(t)}),this.register(function(t){return new EEe(t)}),this.register(function(t){return new AEe(t)}),this.register(function(t){return new fEe(t)}),this.register(function(t){return new CEe(t)}),this.register(function(t){return new MEe(t)})}load(e,t,r,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=rh.extractUrlBase(e);o=rh.resolveURL(u,this.path)}else o=rh.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){i?i(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new ra(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(c){t(c),s.manager.itemEnd(e)},a)}catch(c){a(c)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,i){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(OE(new Uint8Array(e.slice(0,4)))===Bq){try{o[On.KHR_BINARY_GLTF]=new REe(e)}catch(c){i&&i(c);return}s=JSON.parse(o[On.KHR_BINARY_GLTF].content)}else s=JSON.parse(OE(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new zEe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);c.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[c.name]=c,o[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(c){case On.KHR_MATERIALS_UNLIT:o[c]=new hEe;break;case On.KHR_DRACO_MESH_COMPRESSION:o[c]=new PEe(s,this.dracoLoader);break;case On.KHR_TEXTURE_TRANSFORM:o[c]=new IEe;break;case On.KHR_MESH_QUANTIZATION:o[c]=new kEe;break;default:f.indexOf(c)>=0&&a[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(r,i)}parseAsync(e,t){const r=this;return new Promise(function(i,s){r.parse(e,t,i,s)})}}function cEe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const On={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class fEe{constructor(e){this.parser=e,this.name=On.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,i=t.length;r<i;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let i=t.cache.get(r);if(i)return i;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new At(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],Tc);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new R3(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new M3(c),u.distance=f;break;case"spot":u=new C3(c),u.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,oc(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),i=Promise.resolve(u),t.cache.add(r,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,s=r.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return r._getNodeRef(t.cache,a,l)})}}class hEe{constructor(){this.name=On.KHR_MATERIALS_UNLIT}getMaterialType(){return Qo}extendParams(e,t,r){const i=[];e.color=new At(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Tc),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(r.assignTexture(e,"map",s.baseColorTexture,ep))}return Promise.all(i)}}class dEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class pEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ze(a,a)}return Promise.all(s)}}class mEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_DISPERSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class gEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class yEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_SHEEN}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new At(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Tc)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,ep)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class vEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class _Ee{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_VOLUME}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new At().setRGB(a[0],a[1],a[2],Tc),Promise.all(s)}}class xEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_IOR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class wEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_SPECULAR}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new At().setRGB(a[0],a[1],a[2],Tc),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,ep)),Promise.all(s)}}class AEe{constructor(e){this.parser=e,this.name=On.EXT_MATERIALS_BUMP}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(r.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class EEe{constructor(e){this.parser=e,this.name=On.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const r=this.parser.json.materials[e];return!r.extensions||!r.extensions[this.name]?null:Pa}extendMaterialParams(e,t){const r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(r.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class bEe{constructor(e){this.parser=e,this.name=On.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,i=r.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class SEe{constructor(e){this.parser=e,this.name=On.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class TEe{constructor(e){this.parser=e,this.name=On.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,i=r.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=i.images[o.source];let l=r.textureLoader;if(a.uri){const u=r.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return r.loadTextureImage(e,o.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class CEe{constructor(e){this.name=On.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const i=r.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=i.byteOffset||0,u=i.byteLength||0,c=i.count,f=i.byteStride,h=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(c,f,h,i.mode,i.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(c*f);return o.decodeGltfBuffer(new Uint8Array(p),c,f,h,i.mode,i.filter),p})})}else return null}}class MEe{constructor(e){this.name=On.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const i=t.meshes[r.mesh];for(const u of i.primitives)if(u.mode!==Aa.TRIANGLES&&u.mode!==Aa.TRIANGLE_STRIP&&u.mode!==Aa.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=r.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(c=>(l[u]=c,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const c=u.pop(),f=c.isGroup?c.children:[c],h=u[0].count,p=[];for(const g of f){const w=new Kt,_=new pe,v=new Vs,A=new pe(1,1,1),S=new c3(g.geometry,g.material,h);for(let b=0;b<h;b++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,b),l.SCALE&&A.fromBufferAttribute(l.SCALE,b),S.setMatrixAt(b,w.compose(_,v,A));for(const b in l)if(b==="_COLOR_0"){const C=l[b];S.instanceColor=new Ep(C.array,C.itemSize,C.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&g.geometry.setAttribute(b,l[b]);Dn.prototype.copy.call(S,g),this.parser.assignFinalMaterial(S),p.push(S)}return c.isGroup?(c.clear(),c.add(...p),c):p[0]}))}}const Bq="glTF",Kv=12,T4={JSON:1313821514,BIN:5130562};class REe{constructor(e){this.name=On.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Kv);if(this.header={magic:OE(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Bq)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Kv,i=new DataView(e,Kv);let s=0;for(;s<r;){const o=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===T4.JSON){const l=new Uint8Array(e,Kv+s,o);this.content=OE(l)}else if(a===T4.BIN){const l=Kv+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class PEe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=On.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const c in o){const f=PP[c]||c.toLowerCase();a[f]=o[c]}for(const c in e.attributes){const f=PP[c]||c.toLowerCase();if(o[c]!==void 0){const h=r.accessors[e.attributes[c]],p=Ig[h.componentType];u[f]=p.name,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(f,h){i.decodeDracoFile(c,function(p){for(const g in p.attributes){const w=p.attributes[g],_=l[g];_!==void 0&&(w.normalized=_)}f(p)},a,u,Tc,h)})})}}class IEe{constructor(){this.name=On.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kEe{constructor(){this.name=On.KHR_MESH_QUANTIZATION}}class Fq extends Cy{constructor(e,t,r,i){super(e,t,r,i)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,c=i-t,f=(r-t)/c,h=f*f,p=h*f,g=e*u,w=g-u,_=-2*p+3*h,v=p-h,A=1-_,S=v-h+f;for(let b=0;b!==a;b++){const C=o[w+b+a],L=o[w+b+l]*c,R=o[g+b+a],k=o[g+b]*c;s[b]=A*C+S*L+_*R+v*k}return s}}const OEe=new Vs;class DEe extends Fq{interpolate_(e,t,r,i){const s=super.interpolate_(e,t,r,i);return OEe.fromArray(s).normalize().toArray(s),s}}const Aa={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ig={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},C4={9728:ss,9729:mi,9984:Nb,9985:Mg,9986:Kd,9987:Sa},M4={33071:Yo,33648:Jg,10497:gh},iM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},PP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...lEe>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},kf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},LEe={CUBICSPLINE:void 0,LINEAR:Qg,STEP:Yg},sM={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function NEe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new cx({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:lu})),n.DefaultMaterial}function Md(n,e,t){for(const r in t.extensions)n[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function oc(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function BEe(n,e,t){let r=!1,i=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const f=e[u];if(f.POSITION!==void 0&&(r=!0),f.NORMAL!==void 0&&(i=!0),f.COLOR_0!==void 0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,c=e.length;u<c;u++){const f=e[u];if(r){const h=f.POSITION!==void 0?t.getDependency("accessor",f.POSITION):n.attributes.position;o.push(h)}if(i){const h=f.NORMAL!==void 0?t.getDependency("accessor",f.NORMAL):n.attributes.normal;a.push(h)}if(s){const h=f.COLOR_0!==void 0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const c=u[0],f=u[1],h=u[2];return r&&(n.morphAttributes.position=c),i&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function FEe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let r=0,i=t.length;r<i;r++)n.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function UEe(n){let e;const t=n.extensions&&n.extensions[On.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+oM(t.attributes):e=n.indices+":"+oM(n.attributes)+":"+n.mode,n.targets!==void 0)for(let r=0,i=n.targets.length;r<i;r++)e+=":"+oM(n.targets[r]);return e}function oM(n){let e="";const t=Object.keys(n).sort();for(let r=0,i=t.length;r<i;r++)e+=t[r]+":"+n[t[r]]+";";return e}function IP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function jEe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const VEe=new Kt;class zEe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new cEe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||i&&s<98?this.textureLoader=new b7(this.options.manager):this.textureLoader=new k7(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ra(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:r,userData:{}};return Md(s,a,i),oc(a,i),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const i=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,c]of o.children.entries())s(c,a.children[u])};return s(r,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const i=e(t[r]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let i=this.cache.get(r);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(r,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[On.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){r.load(rh.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const i=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+i)})}loadAccessor(e){const t=this,r=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=iM[i.type],a=Ig[i.componentType],l=i.normalized===!0,u=new a(i.count*o);return Promise.resolve(new Xn(u,o,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=iM[i.type],u=Ig[i.componentType],c=u.BYTES_PER_ELEMENT,f=c*l,h=i.byteOffset||0,p=i.bufferView!==void 0?r.bufferViews[i.bufferView].byteStride:void 0,g=i.normalized===!0;let w,_;if(p&&p!==f){const v=Math.floor(h/p),A="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+v+":"+i.count;let S=t.cache.get(A);S||(w=new u(a,v*p,i.count*p/c),S=new ix(w,p/c),t.cache.add(A,S)),_=new yh(S,l,h%p/c,g)}else a===null?w=new u(i.count*l):w=new u(a,h,i.count*l),_=new Xn(w,l,g);if(i.sparse!==void 0){const v=iM.SCALAR,A=Ig[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,b=i.sparse.values.byteOffset||0,C=new A(o[1],S,i.sparse.count*v),L=new u(o[2],b,i.sparse.count*l);a!==null&&(_=new Xn(_.array.slice(),_.itemSize,_.normalized));for(let R=0,k=C.length;R<k;R++){const O=C[R];if(_.setX(O,L[R*l]),l>=2&&_.setY(O,L[R*l+1]),l>=3&&_.setZ(O,L[R*l+2]),l>=4&&_.setW(O,L[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,r=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=r.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,r){const i=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,r).then(function(c){c.flipY=!1,c.name=o.name||a.name||"",c.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(c.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return c.magFilter=C4[h.magFilter]||mi,c.minFilter=C4[h.minFilter]||Sa,c.wrapS=M4[h.wrapS]||gh,c.wrapT=M4[h.wrapT]||gh,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const r=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(f=>f.clone());const o=i.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(f){u=!0;const h=new Blob([f],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(f){return new Promise(function(h,p){let g=h;t.isImageBitmapLoader===!0&&(g=function(w){const _=new Nr(w);_.needsUpdate=!0,h(_)}),t.load(rh.resolveURL(f,s.path),g,void 0,p)})}).then(function(f){return u===!0&&a.revokeObjectURL(l),oc(f,o),f.userData.mimeType=o.mimeType||jEe(o.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),f});return this.sourceCache[e]=c,c}assignTexture(e,t,r,i){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[On.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[On.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[On.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return i!==void 0&&(typeof i=="number"&&(i=i===S4?ep:Tc),"colorSpace"in o?o.colorSpace=i:o.encoding=i===ep?S4:uEe),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new Jb,zi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new qs,zi.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(i||s||o){let a="ClonedMaterial:"+r.uuid+":";i&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return cx}loadMaterial(e){const t=this,r=this.json,i=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[On.KHR_MATERIALS_UNLIT]){const f=i[On.KHR_MATERIALS_UNLIT];o=f.getMaterialType(),u.push(f.extendParams(a,s,t))}else{const f=s.pbrMetallicRoughness||{};if(a.color=new At(1,1,1),a.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Tc),a.opacity=h[3]}f.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",f.baseColorTexture,ep)),a.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,a.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",f.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",f.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=dl);const c=s.alphaMode||sM.OPAQUE;if(c===sM.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,c===sM.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Qo&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ze(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;a.normalScale.set(f,f)}if(s.occlusionTexture!==void 0&&o!==Qo&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Qo){const f=s.emissiveFactor;a.emissive=new At().setRGB(f[0],f[1],f[2],Tc)}return s.emissiveTexture!==void 0&&o!==Qo&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,ep)),Promise.all(u).then(function(){const f=new o(a);return s.name&&(f.name=s.name),oc(f,s),t.associations.set(f,{materials:e}),s.extensions&&Md(i,f,s),f})}createUniqueName(e){const t=Gn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,r=this.extensions,i=this.primitiveCache;function s(a){return r[On.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return R4(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],c=UEe(u),f=i[c];if(f)o.push(f.promise);else{let h;u.extensions&&u.extensions[On.KHR_DRACO_MESH_COMPRESSION]?h=s(u):h=R4(new xn,u,t),i[c]={primitive:u,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,i=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const c=o[l].material===void 0?NEe(this.cache):this.getDependency("material",o[l].material);a.push(c)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],f=[];for(let p=0,g=c.length;p<g;p++){const w=c[p],_=o[p];let v;const A=u[p];if(_.mode===Aa.TRIANGLES||_.mode===Aa.TRIANGLE_STRIP||_.mode===Aa.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new u3(w,A):new gi(w,A),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===Aa.TRIANGLE_STRIP?v.geometry=b4(v.geometry,n3):_.mode===Aa.TRIANGLE_FAN&&(v.geometry=b4(v.geometry,AE));else if(_.mode===Aa.LINES)v=new Sl(w,A);else if(_.mode===Aa.LINE_STRIP)v=new Lc(w,A);else if(_.mode===Aa.LINE_LOOP)v=new f3(w,A);else if(_.mode===Aa.POINTS)v=new h3(w,A);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&FEe(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),oc(v,s),_.extensions&&Md(i,v,_),t.assignFinalMaterial(v),f.push(v)}for(let p=0,g=f.length;p<g;p++)t.associations.set(f[p],{meshes:e,primitives:p});if(f.length===1)return s.extensions&&Md(i,f[0],s),f[0];const h=new mc;s.extensions&&Md(i,h,s),t.associations.set(h,{meshes:e});for(let p=0,g=f.length;p<g;p++)h.add(f[p]);return h})}loadCamera(e){let t;const r=this.json.cameras[e],i=r[r.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new Ui(VG.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):r.type==="orthographic"&&(t=new My(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),oc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let i=0,s=t.joints.length;i<s;i++)r.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(i){const s=i.pop(),o=i,a=[],l=[];for(let u=0,c=o.length;u<c;u++){const f=o[u];if(f){a.push(f);const h=new Kt;s!==null&&h.fromArray(s.array,u*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new sx(a,l)})}loadAnimation(e){const t=this.json,r=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],l=[],u=[],c=[];for(let f=0,h=i.channels.length;f<h;f++){const p=i.channels[f],g=i.samplers[p.sampler],w=p.target,_=w.node,v=i.parameters!==void 0?i.parameters[g.input]:g.input,A=i.parameters!==void 0?i.parameters[g.output]:g.output;w.node!==void 0&&(o.push(this.getDependency("node",_)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",A)),u.push(g),c.push(w))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(c)]).then(function(f){const h=f[0],p=f[1],g=f[2],w=f[3],_=f[4],v=[];for(let A=0,S=h.length;A<S;A++){const b=h[A],C=p[A],L=g[A],R=w[A],k=_[A];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const O=r._createAnimationTracks(b,C,L,R,k);if(O)for(let M=0;M<O.length;M++)v.push(O[M])}return new ty(s,void 0,v)})}createNodeMesh(e){const t=this.json,r=this,i=t.nodes[e];return i.mesh===void 0?null:r.getDependency("mesh",i.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=i.weights.length;l<u;l++)a.morphTargetInfluences[l]=i.weights[l]}),o})}loadNode(e){const t=this.json,r=this,i=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=i.children||[];for(let u=0,c=a.length;u<c;u++)o.push(r.getDependency("node",a[u]));const l=i.skin===void 0?Promise.resolve(null):r.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const c=u[0],f=u[1],h=u[2];h!==null&&c.traverse(function(p){p.isSkinnedMesh&&p.bind(h,VEe)});for(let p=0,g=f.length;p<g;p++)c.add(f[p]);return c})}_loadNodeShallow(e){const t=this.json,r=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],l=i._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(i.getDependency("camera",s.camera).then(function(u){return i._getNodeRef(i.cameraCache,s.camera,u)})),i._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let c;if(s.isBone===!0?c=new Kb:u.length>1?c=new mc:u.length===1?c=u[0]:c=new Dn,c!==u[0])for(let f=0,h=u.length;f<h;f++)c.add(u[f]);if(s.name&&(c.userData.name=s.name,c.name=o),oc(c,s),s.extensions&&Md(r,c,s),s.matrix!==void 0){const f=new Kt;f.fromArray(s.matrix),c.applyMatrix4(f)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],i=this,s=new mc;r.name&&(s.name=i.createUniqueName(r.name)),oc(s,r),r.extensions&&Md(t,s,r);const o=r.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let c=0,f=l.length;c<f;c++)s.add(l[c]);const u=c=>{const f=new Map;for(const[h,p]of i.associations)(h instanceof zi||h instanceof Nr)&&f.set(h,p);return c.traverse(h=>{const p=i.associations.get(h);p!=null&&f.set(h,p)}),f};return i.associations=u(s),s})}_createAnimationTracks(e,t,r,i,s){const o=[],a=e.name?e.name:e.uuid,l=[];kf[s.path]===kf.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let u;switch(kf[s.path]){case kf.weights:u=Sp;break;case kf.rotation:u=Tp;break;case kf.position:case kf.scale:u=Cp;break;default:switch(r.itemSize){case 1:u=Sp;break;case 2:case 3:default:u=Cp;break}break}const c=i.interpolation!==void 0?LEe[i.interpolation]:Qg,f=this._getArrayFromAccessor(r);for(let h=0,p=l.length;h<p;h++){const g=new u(l[h]+"."+kf[s.path],t.array,f,c);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const r=IP(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*r;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const i=this instanceof Tp?DEe:Fq;return new i(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function HEe(n,e,t){const r=e.attributes,i=new zs;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(i.set(new pe(l[0],l[1],l[2]),new pe(u[0],u[1],u[2])),a.normalized){const c=IP(Ig[a.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new pe,l=new pe;for(let u=0,c=s.length;u<c;u++){const f=s[u];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],p=h.min,g=h.max;if(p!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(g[2]))),h.normalized){const w=IP(Ig[h.componentType]);l.multiplyScalar(w)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(a)}n.boundingBox=i;const o=new ws;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,n.boundingSphere=o}function R4(n,e,t){const r=e.attributes,i=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in r){const a=PP[o]||o.toLowerCase();a in n.attributes||i.push(s(r[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});i.push(o)}return oc(n,e),HEe(n,e,t),Promise.all(i).then(function(){return e.targets!==void 0?BEe(n,e.targets,t):n})}const aM=new WeakMap;class GEe extends Ws{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){const s=new ra(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){const s={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const r=JSON.stringify(t);if(aM.has(e)){const l=aM.get(e);if(l.key===r)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(i=l,new Promise((u,c)=>{i._callbacks[s]={resolve:u,reject:c},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),aM.set(e,{key:r,promise:a}),a}_createGeometry(e){const t=new xn;e.index&&t.setIndex(new Xn(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r],s=i.name,o=i.array,a=i.itemSize;t.setAttribute(s,new Xn(o,a))}return t}_loadLibrary(e,t){const r=new ra(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,s)=>{r.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{const i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);const s=qEe.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function qEe(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(f){c({draco:f})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(c=>{const f=c.draco,h=new f.Decoder,p=new f.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{const g=t(f,h,p,u),w=g.attributes.map(_=>_.array.buffer);g.index&&w.push(g.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:g},w)}catch(g){console.error(g),self.postMessage({type:"error",id:a.id,error:g.message})}finally{f.destroy(p),f.destroy(h)}});break}};function t(o,a,l,u){const c=u.attributeIDs,f=u.attributeTypes;let h,p;const g=a.GetEncodedGeometryType(l);if(g===o.TRIANGULAR_MESH)h=new o.Mesh,p=a.DecodeBufferToMesh(l,h);else if(g===o.POINT_CLOUD)h=new o.PointCloud,p=a.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const w={index:null,attributes:[]};for(const _ in c){const v=self[f[_]];let A,S;if(u.useUniqueIDs)S=c[_],A=a.GetAttributeByUniqueId(h,S);else{if(S=a.GetAttributeId(h,o[c[_]]),S===-1)continue;A=a.GetAttribute(h,S)}w.attributes.push(i(o,a,h,_,v,A))}return g===o.TRIANGULAR_MESH&&(w.index=r(o,a,h)),o.destroy(h),w}function r(o,a,l){const c=l.num_faces()*3,f=c*4,h=o._malloc(f);a.GetTrianglesUInt32Array(l,f,h);const p=new Uint32Array(o.HEAPF32.buffer,h,c).slice();return o._free(h),{array:p,itemSize:1}}function i(o,a,l,u,c,f){const h=f.num_components(),g=l.num_points()*h,w=g*c.BYTES_PER_ELEMENT,_=s(o,c),v=o._malloc(w);a.GetAttributeDataArrayForAllPoints(l,f,_,w,v);const A=new c(o.HEAPF32.buffer,v,g).slice();return o._free(v),{name:u,array:A,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Tw;const lM=()=>{if(Tw)return Tw;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),r=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=n;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(a(i),{}).then(f=>{s=f.instance,s.exports.__wasm_call_ctors()});function a(f){const h=new Uint8Array(f.length);for(let g=0;g<f.length;++g){const w=f.charCodeAt(g);h[g]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let p=0;for(let g=0;g<f.length;++g)h[p++]=h[g]<60?r[h[g]]:(h[g]-60)*64+h[++g];return h.buffer.slice(0,p)}function l(f,h,p,g,w,_){const v=s.exports.sbrk,A=p+3&-4,S=v(A*g),b=v(w.length),C=new Uint8Array(s.exports.memory.buffer);C.set(w,b);const L=f(S,p,g,b,w.length);if(L===0&&_&&_(S,A,g),h.set(C.subarray(S,S+p*g)),v(S-v(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Tw={ready:o,supported:!0,decodeVertexBuffer(f,h,p,g,w){l(s.exports.meshopt_decodeVertexBuffer,f,h,p,g,s.exports[u[w]])},decodeIndexBuffer(f,h,p,g){l(s.exports.meshopt_decodeIndexBuffer,f,h,p,g)},decodeIndexSequence(f,h,p,g){l(s.exports.meshopt_decodeIndexSequence,f,h,p,g)},decodeGltfBuffer(f,h,p,g,w,_){l(s.exports[c[w]],f,h,p,g,s.exports[u[_]])}},Tw};let Cw=null,Uq="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function jq(n=!0,e=!0,t){return r=>{t&&t(r),n&&(Cw||(Cw=new GEe),Cw.setDecoderPath(typeof n=="string"?n:Uq),r.setDRACOLoader(Cw)),e&&r.setMeshoptDecoder(typeof lM=="function"?lM():lM)}}const Uc=(n,e,t,r)=>hx(Z3,n,jq(e,t,r));Uc.preload=(n,e,t,r)=>hx.preload(Z3,n,jq(e,t,r));Uc.clear=n=>hx.clear(Z3,n);Uc.setDecoderPath=n=>{Uq=n};function eO(n,e){const t=W.useRef(),[r]=W.useState(()=>e?e instanceof Dn?{current:e}:e:t),[i]=W.useState(()=>new B7(void 0));W.useLayoutEffect(()=>{e&&(r.current=e instanceof Dn?e:e.current),i._root=r.current});const s=W.useRef({}),o=W.useMemo(()=>{const a={};return n.forEach(l=>Object.defineProperty(a,l.name,{enumerable:!0,get(){if(r.current)return s.current[l.name]||(s.current[l.name]=i.clipAction(l,r.current))},configurable:!0})),{ref:r,clips:n,actions:a,names:n.map(l=>l.name),mixer:i}},[n]);return dS((a,l)=>i.update(l)),W.useEffect(()=>{const a=r.current;return()=>{s.current={},i.stopAllAction(),Object.values(o.actions).forEach(l=>{a&&i.uncacheAction(l,a)})}},[n]),o}var uM={exports:{}},cM,P4;function WEe(){if(P4)return cM;P4=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cM=n,cM}var fM,I4;function $Ee(){if(I4)return fM;I4=1;var n=WEe();function e(){}function t(){}return t.resetWarningCache=e,fM=function(){function r(o,a,l,u,c,f){if(f!==n){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},fM}var k4;function vS(){return k4||(k4=1,uM.exports=$Ee()()),uM.exports}var KEe=vS();const gr=Ma(KEe),JEe="/assets/test2-CPjJz5at.glb",XEe=({isRotating:n,setIsRotating:e,setCurrentStage:t,currentFocusPoint:r,...i})=>{const s=W.useRef(),{gl:o,viewport:a}=Hwe(),{nodes:l,materials:u}=Uc(JEe),c=W.useRef(0),f=W.useRef(0),h=.95,p=C=>{C.stopPropagation(),C.preventDefault(),e(!0);const L=C.touches?C.touches[0].clientX:C.clientX;c.current=L},g=C=>{C.stopPropagation(),C.preventDefault(),e(!1)},w=C=>{if(C.stopPropagation(),C.preventDefault(),n){const L=C.touches?C.touches[0].clientX:C.clientX,R=(L-c.current)/a.width;s.current.rotation.y+=R*.01*Math.PI,c.current=L,f.current=R*.01*Math.PI}},_=C=>{C.key==="ArrowLeft"?(n||e(!0),s.current.rotation.y+=.005*Math.PI,f.current=.007):C.key==="ArrowRight"&&(n||e(!0),s.current.rotation.y-=.005*Math.PI,f.current=-.007)},v=C=>{(C.key==="ArrowLeft"||C.key==="ArrowRight")&&e(!1)},A=C=>{C.stopPropagation(),C.preventDefault(),e(!0);const L=C.touches?C.touches[0].clientX:C.clientX;c.current=L},S=C=>{C.stopPropagation(),C.preventDefault(),e(!1)},b=C=>{if(C.stopPropagation(),C.preventDefault(),n){const L=C.touches?C.touches[0].clientX:C.clientX,R=(L-c.current)/a.width;s.current.rotation.y+=R*.01*Math.PI,c.current=L,f.current=R*.01*Math.PI}};return W.useEffect(()=>{const C=o.domElement;return C.addEventListener("pointerdown",p),C.addEventListener("pointerup",g),C.addEventListener("pointermove",w),window.addEventListener("keydown",_),window.addEventListener("keyup",v),C.addEventListener("touchstart",A),C.addEventListener("touchend",S),C.addEventListener("touchmove",b),()=>{C.removeEventListener("pointerdown",p),C.removeEventListener("pointerup",g),C.removeEventListener("pointermove",w),window.removeEventListener("keydown",_),window.removeEventListener("keyup",v),C.removeEventListener("touchstart",A),C.removeEventListener("touchend",S),C.removeEventListener("touchmove",b)}},[o,p,g,w]),dS(()=>{if(!n)f.current*=h,Math.abs(f.current)<.001&&(f.current=0),s.current.rotation.y+=f.current;else{const L=(s.current.rotation.y%(2*Math.PI)+2*Math.PI)%(2*Math.PI);switch(!0){case(L>=5.93||L<=.35):t(3);break;case(L>=1.6&&L<=3):t(2);break;case(L>=4.25&&L<=4.75):t(1);break;case(L>=3.2&&L<=2.2):t(6);break;case(L>=5&&L<=5.93):t(4);break;case(L>=.36&&L<=1.164):t(5);break;default:t(null)}}}),N.jsxs(aEe.group,{...i,ref:s,children:[N.jsx("mesh",{geometry:l.Cube.geometry,material:u.Material,position:[0,.331,0],rotation:[-Math.PI,0,-Math.PI],scale:[.74,.287,.74]}),N.jsx("group",{scale:.01,children:N.jsx("group",{scale:100,children:N.jsx("group",{rotation:[-Math.PI/2,0,0],scale:.008,children:N.jsxs("group",{rotation:[Math.PI/2,0,0],children:[N.jsxs("group",{position:[-123.493,1.133,64.664],rotation:[-Math.PI/2,0,-2.988],scale:100,children:[N.jsx("mesh",{geometry:l.Archinteriors8_01_292_003_Esmalte_Preto_001_0001.geometry,material:u.Esmalte_Preto_001}),N.jsx("mesh",{geometry:l.Archinteriors8_01_292_003_Material_004_0001.geometry,material:u.Material_004})]}),N.jsxs("group",{position:[83.984,227.115,272.869],rotation:[-Math.PI/2,0,-Math.PI],scale:109.963,children:[N.jsx("mesh",{geometry:l.books_005_books_003_0001.geometry,material:u.books_003}),N.jsx("mesh",{geometry:l.books_005_books_003_0002.geometry,material:u.books_003,position:[2.726,.689,-.334],rotation:[0,0,1.539],scale:[.584,1,1]}),N.jsx("mesh",{geometry:l.books_005_books_003_0003.geometry,material:u.books_003,position:[-.092,.712,-.618],rotation:[0,0,1.539],scale:[.584,1,1]}),N.jsx("mesh",{geometry:l.books_005_books_paper_002_0001.geometry,material:u.books_paper_002})]}),N.jsxs("group",{position:[108.26,44.492,-116.527],rotation:[-Math.PI/2,0,0],scale:[4.659,3.09,3.015],children:[N.jsx("mesh",{geometry:l.Box323536_001_Cabinet_color_001_0001.geometry,material:u.Cabinet_color_001}),N.jsx("mesh",{geometry:l.Box323536_001_Cabinet_Handle_001_0001.geometry,material:u.Cabinet_Handle_001}),N.jsx("mesh",{geometry:l.Box323536_001_Cabinet_Wood_001_0001.geometry,material:u.Cabinet_Wood_001})]}),N.jsxs("group",{position:[-39.701,109.763,134.386],rotation:[-Math.PI/2,0,0],scale:7.178,children:[N.jsx("mesh",{geometry:l.Circle_001_PC1GlossyPin_001_0001.geometry,material:u.PC1GlossyPin_001}),N.jsx("mesh",{geometry:l.Circle_001_PC1Material_008_0001.geometry,material:u.PC1Material_008}),N.jsx("mesh",{geometry:l.Circle_001_PC1Material_009_0001.geometry,material:u.PC1Material_009}),N.jsx("mesh",{geometry:l.Circle_001_PC1Material_015_0001.geometry,material:u.PC1Material_015}),N.jsx("mesh",{geometry:l.Circle_001_PC1Material_016_0001.geometry,material:u.PC1Material_016}),N.jsx("mesh",{geometry:l.Circle_001_PC1PenBlackpart_001_0001.geometry,material:u.PC1PenBlackpart_001}),N.jsx("mesh",{geometry:l.Circle_001_PC1PenGlossyPart1_001_0001.geometry,material:u.PC1PenGlossyPart1_001}),N.jsx("mesh",{geometry:l.Circle_001_PC1WireInGlas_0001.geometry,material:u.PC1WireInGlas})]}),N.jsxs("group",{position:[6.5,109.763,-135.082],rotation:[-Math.PI/2,0,0],scale:7.178,children:[N.jsx("mesh",{geometry:l.Circle_002_PC1GlossyPin_001_0001.geometry,material:u.PC1GlossyPin_001}),N.jsx("mesh",{geometry:l.Circle_002_PC1Material_008_0001.geometry,material:u.PC1Material_008}),N.jsx("mesh",{geometry:l.Circle_002_PC1Material_009_0001.geometry,material:u.PC1Material_009}),N.jsx("mesh",{geometry:l.Circle_002_PC1Material_015_0001.geometry,material:u.PC1Material_015}),N.jsx("mesh",{geometry:l.Circle_002_PC1Material_016_0001.geometry,material:u.PC1Material_016}),N.jsx("mesh",{geometry:l.Circle_002_PC1PenBlackpart_001_0001.geometry,material:u.PC1PenBlackpart_001}),N.jsx("mesh",{geometry:l.Circle_002_PC1PenGlossyPart1_001_0001.geometry,material:u.PC1PenGlossyPart1_001}),N.jsx("mesh",{geometry:l.Circle_002_PC1WireInGlas_0001.geometry,material:u.PC1WireInGlas})]}),N.jsxs("group",{rotation:[-Math.PI/2,0,0],scale:100,children:[N.jsx("mesh",{geometry:l.Cube__0001.geometry,material:u.Cube__0}),N.jsx("mesh",{geometry:l.Cube__0002.geometry,material:u.Cube__0,position:[-4.554,-3.834,-.4],rotation:[0,0,1.538],scale:[.665,1,1]}),N.jsx("mesh",{geometry:l.Cube__0003.geometry,material:u.Cube__0,position:[-1.682,-4.08,-.035],rotation:[0,0,1.538],scale:[.781,1,1]})]}),N.jsx("mesh",{geometry:l.Cube_001_Light_Fixture_0001.geometry,material:u.Light_Fixture,position:[-243.376,374.575,-81.939],rotation:[-Math.PI/2,0,0],scale:[17.475,221.057,14.36]}),N.jsxs("group",{position:[414.959,364.929,481.161],rotation:[-Math.PI/2,0,0],scale:5.07,children:[N.jsx("mesh",{geometry:l.Cylinder_Inner_Light_case_0001.geometry,material:u.Inner_Light_case,position:[-42.314,-12.327,4.353]}),N.jsx("mesh",{geometry:l.Cylinder_Inner_light_emission_0001.geometry,material:u.Inner_light_emission})]}),N.jsxs("group",{position:[-.475,364.929,-79.019],rotation:[-Math.PI/2,0,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_001_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_001_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[-244.636,364.929,-79.019],rotation:[-Math.PI/2,-.322,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_002_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_002_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[243.686,364.929,-79.019],rotation:[-Math.PI/2,.291,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_003_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_003_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[-244.636,364.929,122.199],rotation:[-Math.PI/2,-.211,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_004_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_004_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[-.475,364.929,122.199],rotation:[-Math.PI/2,0,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_005_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_005_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[243.686,364.929,122.199],rotation:[-1.465,.287,-.38],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_006_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_006_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[-244.636,364.929,-285.145],rotation:[-Math.PI/2,-.339,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_007_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_007_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[-.475,364.929,-285.145],rotation:[-Math.PI/2,0,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_008_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_008_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsxs("group",{position:[243.686,364.929,-285.145],rotation:[-Math.PI/2,0,0],scale:7.313,children:[N.jsx("mesh",{geometry:l.Cylinder_009_Light_Case_0001.geometry,material:u.Light_Case}),N.jsx("mesh",{geometry:l.Cylinder_009_Light_emission_0001.geometry,material:u.Light_emission})]}),N.jsx("mesh",{geometry:l.low_poly_001_PC2_CUP_0001.geometry,material:u.PC2_CUP,position:[-96.934,104.672,-179.34],rotation:[Math.PI,-1.218,Math.PI],scale:104.361}),N.jsx("mesh",{geometry:l.low_poly_012_Black5_001_0001.geometry,material:u.Black5_001,position:[89.963,21.688,0],rotation:[Math.PI/2,0,0],scale:100}),N.jsx("mesh",{geometry:l.low_poly_013_Green1_0001.geometry,material:u.Green1,position:[89.963,21.688,0],rotation:[Math.PI/2,0,0],scale:100}),N.jsx("mesh",{geometry:l.low_poly_014_Black5_0001.geometry,material:u.PC1WireInGlas,position:[928.261,144.487,-287.716],rotation:[Math.PI/2,0,0],scale:100}),N.jsx("mesh",{geometry:l.low_poly_018_PC2_CUP_0001.geometry,material:u.PC2_CUP,position:[-96.934,104.672,-9.247],rotation:[Math.PI,-1.218,Math.PI],scale:104.361}),N.jsx("mesh",{geometry:l.low_poly_025_Blue3_0001.geometry,material:u.Blue3,position:[89.963,21.688,0],rotation:[Math.PI/2,0,0],scale:100}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_001_PC1MOUSE_PAD_0001.geometry,material:u.PC1MOUSE_PAD,position:[-98.322,98.079,66.16],rotation:[-Math.PI,.004,-Math.PI],scale:4.887}),N.jsxs("group",{position:[-53.651,132.925,46.362],rotation:[-Math.PI,.004,-Math.PI],scale:4.887,children:[N.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Back_Panel_0001.geometry,material:u.PC_1Back_Panel}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Stand_0001.geometry,material:u.PC_1Stand}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Wallpaper_0001.geometry,material:u.PC_1Wallpaper}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Wallpaper_0002.geometry,material:u.PC_1Wallpaper,position:[-36.024,18.099,-72.74],rotation:[-Math.PI,.03,-Math.PI],scale:[1.001,1.529,1.381]})]}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_003_PC_1_Keyboard_0001.geometry,material:u.PC_1_Keyboard,position:[-100.191,98.17,38.896],rotation:[-Math.PI,.004,-Math.PI],scale:4.887}),N.jsx("mesh",{geometry:l.Monitor_27__Curved_004_PC1MOUSE_0001.geometry,material:u.PC1MOUSE,position:[-98.322,98.079,66.16],rotation:[-Math.PI,.004,-Math.PI],scale:4.887}),N.jsxs("group",{position:[1.104,94.98,-60.764],rotation:[-Math.PI/2,0,0],scale:[129.712,201.896,100],children:[N.jsx("mesh",{geometry:l.Plane_Material_003_0001.geometry,material:u.Material_003}),N.jsx("mesh",{geometry:l.Plane_Material_003_0002.geometry,material:u.Material_003,position:[1.335,-2.355,.05],scale:[.452,.4,1]})]}),N.jsx("group",{rotation:[Math.PI,0,0],scale:[264.514,195.858,100],children:N.jsx("mesh",{geometry:l.Plane_002_White_0001.geometry,material:u.White,position:[-.001,-.078,.013]})}),N.jsxs("group",{position:[0,1.545,-100.308],rotation:[-Math.PI/2,0,0],scale:103.318,children:[N.jsx("mesh",{geometry:l.Plane_013_Floor_0001.geometry,material:u.Floor,position:[.357,-1.992,-.037],scale:[.539,.778,1]}),N.jsx("mesh",{geometry:l.Plane_013_Floor_0002.geometry,material:u.Floor,position:[-.201,-1.573,3.781],scale:[.539,.778,1]})]}),N.jsx("mesh",{geometry:l.Plane_014_Material_002_0001.geometry,material:u.Material_002,position:[0,0,-100.308],rotation:[-Math.PI/2,0,0],scale:[515.103,398.369,398.369]}),N.jsxs("group",{position:[87.241,97.398,7.543],rotation:[-Math.PI/2,0,1.834],scale:1.237,children:[N.jsx("mesh",{geometry:l.R_Mouse_00_001_PC2_BODY_0001.geometry,material:u.PC2_BODY}),N.jsx("mesh",{geometry:l.R_Mouse_00_001_PC2_SCREEN_0001.geometry,material:u.PC2_SCREEN})]}),N.jsx("mesh",{geometry:l.R_Mouse_00_002_PC2_MOUSEPAD_0001.geometry,material:u.PC2_MOUSEPAD,position:[92.88,98.081,42.961],rotation:[-Math.PI/2,0,1.834],scale:1.237}),N.jsx("mesh",{geometry:l.R_Mouse_00_003_PC2_KEYBOARD_0001.geometry,material:u.PC2_KEYBOARD,position:[94.34,98.17,59.888],rotation:[-Math.PI/2,0,1.834],scale:1.237}),N.jsx("mesh",{geometry:l.R_Mouse_00_004_PC2_MOUSE_0001.geometry,material:u.PC2_MOUSE,position:[92.88,98.081,42.961],rotation:[-Math.PI/2,0,1.834],scale:1.237}),N.jsxs("group",{position:[56.094,110.061,-259.265],rotation:[0,1.571,0],scale:1.702,children:[N.jsx("mesh",{geometry:l.surface_SURFACE_2_KEYBOARD_0001.geometry,material:u.SURFACE_2_KEYBOARD}),N.jsx("mesh",{geometry:l.surface_SURFACE_2_SCREEN_0001.geometry,material:u.SURFACE_2_SCREEN})]}),N.jsxs("group",{position:[56.094,110.061,-259.265],rotation:[0,1.571,0],scale:1.702,children:[N.jsx("mesh",{geometry:l.surface_001_SURFACE_1_KEYBOARD_0001.geometry,material:u.PC1WireInGlas}),N.jsx("mesh",{geometry:l.surface_001_SURFACE_1_SCREEN_0001.geometry,material:u.SURFACE_1_SCREEN})]}),N.jsxs("group",{position:[-91.47,95.896,-232.847],rotation:[-1.596,.245,-1.468],scale:41.664,children:[N.jsx("mesh",{geometry:l.tela_LAP_1_BLACK_FRAME_0001.geometry,material:u.LAP_1_BLACK_FRAME}),N.jsx("mesh",{geometry:l.tela_LAP_1_BODY_0001.geometry,material:u.LAP_1_BODY}),N.jsx("mesh",{geometry:l.tela_LAP_1_KEYBOARD_0001.geometry,material:u.LAP_1_KEYBOARD}),N.jsx("mesh",{geometry:l.tela_LAP_1SCREEN_0001.geometry,material:u.LAP_1SCREEN})]})]})})})}),N.jsx("group",{scale:.01,children:N.jsx("group",{scale:100,children:N.jsx("group",{rotation:[-Math.PI/2,0,0],scale:.008,children:N.jsx("group",{rotation:[Math.PI/2,0,0],children:N.jsx("mesh",{geometry:l.Monitor_27__Curved_002_PC_1Back_Panel_0002.geometry,material:u["PC_1Back_Panel.001"],position:[-53.651,132.925,46.362],rotation:[-Math.PI,.004,-Math.PI],scale:4.887})})})})})]})},YEe="/assets/sky-B0A1kvoP.glb",QEe=({isRotating:n})=>{const e=Uc(YEe),t=W.useRef();return dS((r,i)=>{n&&(t.current.rotation.y+=.15*i)}),N.jsx("mesh",{ref:t,children:N.jsx("primitive",{object:e.scene})})},ZEe="/assets/buster_drone-DtRD6IwU.glb",ebe=({planePosition:n,planeScale:e,isRotating:t,rotation:r})=>{const i=W.useRef(),{scene:s,animations:o}=Uc(ZEe),{actions:a}=eO(o,i);return W.useEffect(()=>{a&&a.Start_Liftoff&&a.Start_Liftoff.play()},[a]),dS(l=>{i.current.position.y=Math.sin(l.clock.getElapsedTime())*.2+2,i.current.position.x>l.camera.position.x+10?i.current.position.y=Math.PI:i.current.position.x<l.camera.position.x-10&&(i.current.position.y=0),i.current,r.y==0?(i.current.position.x-=.01,i.current.position.z-=1):(i.current.position.x+=.01,i.current.position.z-=.01)}),N.jsx("mesh",{position:n,scale:e,rotation:r,ref:i,children:N.jsx("primitive",{object:s})})},tbe="/assets/robot_idle_animated-BLRBSC0I.glb",nbe=({isRotating:n,robotScale:e,robotPosition:t,...r})=>{const i=Jt.useRef(),{scene:s,animations:o}=Uc(tbe),{actions:a}=eO(o,i);return W.useEffect(()=>{n&&a&&a["Skelett|SkelettAction"]&&a["Skelett|SkelettAction"].play()},[a,n]),N.jsx("mesh",{position:t,scale:e,rotation:[0,5,0],children:N.jsx("primitive",{object:s})})},hM=["Electronics Engineer","Computer Engineer","Full Stack Developer","ML Enthusiast","Computer Vision Enthusiast","AI Engineer","Photographer","Senior Lecturer"],Jv=({heading:n,linkText:e,linkUrl:t})=>N.jsx("div",{className:"flex justify-center mt-20",children:N.jsxs("div",{className:`
          sm:text-sm text-center py-2 px-2
          text-white mx-5
          bg-blue-500 rounded-lg shadow-lg transform transition-transform duration-300 ease-in-out
          hover:scale-105 hover:shadow-2xl absolute bottom-2
        `,children:[N.jsx("h3",{className:"mb-4",children:n}),N.jsx("a",{href:t,target:"_blank",className:`
            inline-block bg-gradient-to-r from-white to-blue-500 text-blue-700 font-semibold py-2 px-6 rounded-lg
            shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105 hover:shadow-2xl
            hover:from-blue-500 hover:to-blue-700 hover:text-white mt-4
          `,children:e})]})}),rbe=({currentStage:n})=>{const[e,t]=W.useState(""),[r,i]=W.useState(!1),[s,o]=W.useState(0),[a,l]=W.useState(!1),u=150,c=100,f=1e3;W.useEffect(()=>{const w=()=>{t(r?v=>v.slice(0,v.length-1):v=>hM[s].slice(0,v.length+1))},_=setTimeout(()=>{w()},r?c:u);return e===hM[s]&&!r&&setTimeout(()=>{i(!0)},f),e===""&&r&&(i(!1),o(v=>(v+1)%hM.length)),()=>clearTimeout(_)},[e,r,s]);const h=()=>{l(!0)},p=()=>{l(!1)},g={1:N.jsx("div",{className:"flex justify-center w-full sm:w-[300px] md:w-[200px] mt-20 sm:h-[200px]",onClick:()=>h(),children:N.jsxs("h1",{className:`
            sm:text-sm text-base text-center py-2 px-2
            text-white mx-5
            bg-blue-500 rounded-lg shadow-lg transform transition-transform duration-300 ease-in-out
            hover:scale-105 hover:shadow-2xl absolute bottom-1 left-1/2 transform -translate-x-1/2 cursor-pointer
          `,children:["Hi. I am"," ",N.jsx("span",{className:"font-semibold text-gray-100",children:"Sahaj Shakya"}),N.jsx("br",{}),"I am a ",N.jsx("span",{className:"font-semibold",children:e}),N.jsx("p",{className:"text-center text-white",children:"Bachelors in Electronics and Communication Engineering"}),N.jsx("p",{className:"text-center text-white",children:"Masters in Computer Engineering"})]})}),2:N.jsx(Jv,{heading:"My academics",linkText:"Learn More about my academics",linkUrl:"/academics"}),3:N.jsx(Jv,{heading:"My Journey",linkText:"Learn More about my journey",linkUrl:"/journey"}),4:N.jsx(Jv,{heading:"Done Multiple Projects throughout the year",linkText:"Learn More about my Projects",linkUrl:"/projects"}),5:N.jsx(Jv,{heading:"I am available for work",linkText:"Click here to Contact Me",linkUrl:"/contact"}),5:N.jsx(Jv,{heading:"My Achievements",linkText:"Click here to see my Achievements",linkUrl:"/achievements"})};return N.jsxs("div",{children:[g[n]||N.jsx("h1",{children:"Stage not found!"}),a&&N.jsx(nh,{title:"Know Me",onClose:p,fullWidth:!0,children:N.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 bg-gradient-to-r from-gray-900 to-black rounded-xl shadow-lg",children:[N.jsxs("div",{className:"flex items-center",children:[N.jsx("img",{src:JH,alt:"Sahaj Shakya",className:"w-16 h-16 md:w-24 md:h-24 rounded-full object-cover"}),N.jsxs("div",{className:"ml-4 text-white",children:[N.jsx("div",{className:"font-semibold text-lg md:text-xl",children:"Sahaj Shakya"}),N.jsxs("div",{className:"flex items-center mt-1 text-sm md:text-base",children:[N.jsx(GH,{className:"mr-2 text-blue-500"}),"saz.shakya@gmail.com"]}),N.jsxs("div",{className:"flex items-center mt-1 text-sm md:text-base",children:[N.jsx(qH,{className:"mr-2 text-green-400"}),"977-9841194900"]})]})]}),N.jsxs("div",{className:"flex items-center justify-center space-x-6 text-white mt-6 md:mt-0",children:[N.jsx("a",{href:"https://github.com/sahajshakya",target:"_blank",rel:"github",className:"hover:scale-110 transition-transform",children:N.jsx(jH,{size:28})}),N.jsx("a",{href:"https://www.linkedin.com/in/sahaj-shakya-98253710a/",target:"_blank",rel:"LinkedIn",className:"hover:scale-110 transition-transform text-blue-400",children:N.jsx(zH,{size:28})}),N.jsxs("a",{href:"https://www.researchgate.net/profile/Sahaj-Shakya",target:"_blank",rel:"research gate",className:"hover:scale-110 transition-transform text-green-500",children:["R",N.jsx("span",{className:"text-lg font-bold",children:"G"})]}),N.jsx("a",{href:"https://www.youtube.com/@KA1SKZ",target:"_blank",rel:"youtube",className:"hover:scale-110 transition-transform text-red-500",children:N.jsx(HH,{size:28})}),N.jsx("a",{href:"https://www.instagram.com/kai_loves_to_click/",target:"_blank",rel:"insta",className:"hover:scale-110 transition-transform text-pink-500",children:N.jsx(VH,{size:28})})]})]})})]})},O4=()=>{const[n,e]=W.useState(!1),[t,r]=W.useState(1),i=()=>{let p,g;return window.innerWidth<480?(p=[40,40,40],g=[30,-10,-340]):window.innerWidth>=480&&window.innerWidth<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[3,3,3],g=[1.2,-3,-13]),[p,g]},s=()=>{let p,g;const w=window.innerWidth;return w<480?(p=[20,20,20],g=[-60,-60,-220]):w>=480&&w<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[.5,.5,.5],g=[-6,3,.7]),[p,g]},o=()=>{let p,g;const w=window.innerWidth;return w<480?(p=[20,20,20],g=[50,-10,-200]):w>=480&&w<768?(p=[145,145,145],g=[90,-50,-1e3]):(p=[1,1,1],g=[0,-2.5,-1.2]),[p,g]},[a,l]=i(),[u,c]=s(),[f,h]=o();return N.jsxs("section",{className:"w-full h-screen flex relative",children:[N.jsx("div",{className:"absolute top-28 left-0 right-0 z-10 flex items-center justify-center h-[150px]",children:t&&N.jsx(rbe,{currentStage:t})}),N.jsx(mq,{className:`w-full h-screen bg-transparent ${n?"cursor-grabbing":"cursor-grab"}`,camera:{near:.1,far:1e3},children:N.jsxs(W.Suspense,{fallback:N.jsx(N.Fragment,{}),children:[" ",N.jsx("directionalLight",{position:[1,1,1],intensity:2}),N.jsx("ambientLight",{intensity:2}),N.jsx("hemisphereLight",{skyColor:"#b1e1ff",groundColor:"#000000",intensity:2}),N.jsx(ebe,{planeScale:u,planePosition:c,isRotating:n,rotation:[0,0,0]}),N.jsx(QEe,{isRotating:n}),N.jsx(XEe,{position:l,scale:a,rotation:[.1,4.7077,0],isRotating:n,setIsRotating:e,setCurrentStage:r}),N.jsx(nbe,{robotScale:f,robotPosition:h,isRotating:n,rotation:[0,0,0]})]})})]})};function kP(n,e){return kP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},kP(n,e)}function mx(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,kP(n,e)}var gx=function(){function n(){this.listeners=[]}var e=n.prototype;return e.subscribe=function(r){var i=this,s=r||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(o){return o!==s}),i.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},n}(),DE=typeof window>"u";function Ns(){}function ibe(n,e){return typeof n=="function"?n(e):n}function OP(n){return typeof n=="number"&&n>=0&&n!==1/0}function LE(n){return Array.isArray(n)?n:[n]}function Vq(n,e){return Math.max(n+(e||0)-Date.now(),0)}function nA(n,e,t){return _S(n)?typeof e=="function"?Zn({},t,{queryKey:n,queryFn:e}):Zn({},e,{queryKey:n}):n}function jf(n,e,t){return _S(n)?[Zn({},e,{queryKey:n}),t]:[n||{},e]}function sbe(n,e){if(n===!0&&e===!0||n==null&&e==null)return"all";if(n===!1&&e===!1)return"none";var t=n??!e;return t?"active":"inactive"}function D4(n,e){var t=n.active,r=n.exact,i=n.fetching,s=n.inactive,o=n.predicate,a=n.queryKey,l=n.stale;if(_S(a)){if(r){if(e.queryHash!==tO(a,e.options))return!1}else if(!NE(e.queryKey,a))return!1}var u=sbe(t,s);if(u==="none")return!1;if(u!=="all"){var c=e.isActive();if(u==="active"&&!c||u==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i=="boolean"&&e.isFetching()!==i||o&&!o(e))}function L4(n,e){var t=n.exact,r=n.fetching,i=n.predicate,s=n.mutationKey;if(_S(s)){if(!e.options.mutationKey)return!1;if(t){if(tp(e.options.mutationKey)!==tp(s))return!1}else if(!NE(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function tO(n,e){var t=(e==null?void 0:e.queryKeyHashFn)||tp;return t(n)}function tp(n){var e=LE(n);return obe(e)}function obe(n){return JSON.stringify(n,function(e,t){return DP(t)?Object.keys(t).sort().reduce(function(r,i){return r[i]=t[i],r},{}):t})}function NE(n,e){return zq(LE(n),LE(e))}function zq(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!zq(n[t],e[t])}):!1}function BE(n,e){if(n===e)return n;var t=Array.isArray(n)&&Array.isArray(e);if(t||DP(n)&&DP(e)){for(var r=t?n.length:Object.keys(n).length,i=t?e:Object.keys(e),s=i.length,o=t?[]:{},a=0,l=0;l<s;l++){var u=t?l:i[l];o[u]=BE(n[u],e[u]),o[u]===n[u]&&a++}return r===s&&a===r?n:o}return e}function abe(n,e){if(n&&!e||e&&!n)return!1;for(var t in n)if(n[t]!==e[t])return!1;return!0}function DP(n){if(!N4(n))return!1;var e=n.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!N4(t)||!t.hasOwnProperty("isPrototypeOf"))}function N4(n){return Object.prototype.toString.call(n)==="[object Object]"}function _S(n){return typeof n=="string"||Array.isArray(n)}function lbe(n){return new Promise(function(e){setTimeout(e,n)})}function B4(n){Promise.resolve().then(n).catch(function(e){return setTimeout(function(){throw e})})}function Hq(){if(typeof AbortController=="function")return new AbortController}var ube=function(n){mx(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(i){var s;if(!DE&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setFocused(a):o.onFocus()})},t.setFocused=function(i){this.focused=i,i&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(i){i()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(gx),G_=new ube,cbe=function(n){mx(e,n);function e(){var r;return r=n.call(this)||this,r.setup=function(i){var s;if(!DE&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},r}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setOnline(a):o.onOnline()})},t.setOnline=function(i){this.online=i,i&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(i){i()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(gx),rA=new cbe;function fbe(n){return Math.min(1e3*Math.pow(2,n),3e4)}function FE(n){return typeof(n==null?void 0:n.cancel)=="function"}var Gq=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function iA(n){return n instanceof Gq}var qq=function(e){var t=this,r=!1,i,s,o,a;this.abort=e.abort,this.cancel=function(h){return i==null?void 0:i(h)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(h,p){o=h,a=p});var l=function(p){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(p),s==null||s(),o(p))},u=function(p){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(p),s==null||s(),a(p))},c=function(){return new Promise(function(p){s=p,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){s=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},f=function h(){if(!t.isResolved){var p;try{p=e.fn()}catch(g){p=Promise.reject(g)}i=function(w){if(!t.isResolved&&(u(new Gq(w)),t.abort==null||t.abort(),FE(p)))try{p.cancel()}catch{}},t.isTransportCancelable=FE(p),Promise.resolve(p).then(l).catch(function(g){var w,_;if(!t.isResolved){var v=(w=e.retry)!=null?w:3,A=(_=e.retryDelay)!=null?_:fbe,S=typeof A=="function"?A(t.failureCount,g):A,b=v===!0||typeof v=="number"&&t.failureCount<v||typeof v=="function"&&v(t.failureCount,g);if(r||!b){u(g);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,g),lbe(S).then(function(){if(!G_.isFocused()||!rA.isOnline())return c()}).then(function(){r?u(g):h()})}})}};f()},hbe=function(){function n(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=n.prototype;return e.batch=function(r){var i;this.transactions++;try{i=r()}finally{this.transactions--,this.transactions||this.flush()}return i},e.schedule=function(r){var i=this;this.transactions?this.queue.push(r):B4(function(){i.notifyFn(r)})},e.batchCalls=function(r){var i=this;return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];i.schedule(function(){r.apply(void 0,o)})}},e.flush=function(){var r=this,i=this.queue;this.queue=[],i.length&&B4(function(){r.batchNotifyFn(function(){i.forEach(function(s){r.notifyFn(s)})})})},e.setNotifyFunction=function(r){this.notifyFn=r},e.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},n}(),oi=new hbe,Wq=console;function UE(){return Wq}function dbe(n){Wq=n}var pbe=function(){function n(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=n.prototype;return e.setOptions=function(r){var i;this.options=Zn({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},e.setDefaultOptions=function(r){this.defaultOptions=r},e.scheduleGc=function(){var r=this;this.clearGcTimeout(),OP(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(r,i){var s,o,a=this.state.data,l=ibe(r,a);return(s=(o=this.options).isDataEqual)!=null&&s.call(o,a,l)?l=a:this.options.structuralSharing!==!1&&(l=BE(a,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),l},e.setState=function(r,i){this.dispatch({type:"setState",state:r,setStateOptions:i})},e.cancel=function(r){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(r),s?s.then(Ns).catch(Ns):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},e.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Vq(this.state.dataUpdatedAt,r)},e.onFocus=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.onOnline=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},e.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(i){return i!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(r,i){var s=this,o,a,l;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var u;return(u=this.retryer)==null||u.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var c=this.observers.find(function(A){return A.options.queryFn});c&&this.setOptions(c.options)}var f=LE(this.queryKey),h=Hq(),p={queryKey:f,pageParam:void 0,meta:this.meta};Object.defineProperty(p,"signal",{enumerable:!0,get:function(){if(h)return s.abortSignalConsumed=!0,h.signal}});var g=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(p)):Promise.reject("Missing queryFn")},w={fetchOptions:i,options:this.options,queryKey:f,state:this.state,fetchFn:g,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var _;(_=this.options.behavior)==null||_.onFetch(w)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=w.fetchOptions)==null?void 0:a.meta)){var v;this.dispatch({type:"fetch",meta:(v=w.fetchOptions)==null?void 0:v.meta})}return this.retryer=new qq({fn:w.fetchFn,abort:h==null||(l=h.abort)==null?void 0:l.bind(h),onSuccess:function(S){s.setData(S),s.cache.config.onSuccess==null||s.cache.config.onSuccess(S,s),s.cacheTime===0&&s.optionalRemove()},onError:function(S){iA(S)&&S.silent||s.dispatch({type:"error",error:S}),iA(S)||(s.cache.config.onError==null||s.cache.config.onError(S,s),UE().error(S)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:w.options.retry,retryDelay:w.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(r){var i=this;this.state=this.reducer(this.state,r),oi.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(r)}),i.cache.notify({query:i,type:"queryUpdated",action:r})})},e.getDefaultState=function(r){var i=typeof r.initialData=="function"?r.initialData():r.initialData,s=typeof r.initialData<"u",o=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,a=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:a?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},e.reducer=function(r,i){var s,o;switch(i.type){case"failed":return Zn({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return Zn({},r,{isPaused:!0});case"continue":return Zn({},r,{isPaused:!1});case"fetch":return Zn({},r,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return Zn({},r,{data:i.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=i.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=i.error;return iA(a)&&a.revert&&this.revertState?Zn({},this.revertState):Zn({},r,{error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return Zn({},r,{isInvalidated:!0});case"setState":return Zn({},r,i.state);default:return r}},n}(),mbe=function(n){mx(e,n);function e(r){var i;return i=n.call(this)||this,i.config=r||{},i.queries=[],i.queriesMap={},i}var t=e.prototype;return t.build=function(i,s,o){var a,l=s.queryKey,u=(a=s.queryHash)!=null?a:tO(l,s),c=this.get(u);return c||(c=new pbe({cache:this,queryKey:l,queryHash:u,options:i.defaultQueryOptions(s),state:o,defaultOptions:i.getQueryDefaults(l),meta:s.meta}),this.add(c)),c},t.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},t.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(o){return o!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},t.clear=function(){var i=this;oi.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},t.get=function(i){return this.queriesMap[i]},t.getAll=function(){return this.queries},t.find=function(i,s){var o=jf(i,s),a=o[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(l){return D4(a,l)})},t.findAll=function(i,s){var o=jf(i,s),a=o[0];return Object.keys(a).length>0?this.queries.filter(function(l){return D4(a,l)}):this.queries},t.notify=function(i){var s=this;oi.batch(function(){s.listeners.forEach(function(o){o(i)})})},t.onFocus=function(){var i=this;oi.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},t.onOnline=function(){var i=this;oi.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},e}(gx),gbe=function(){function n(t){this.options=Zn({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||ybe(),this.meta=t.meta}var e=n.prototype;return e.setState=function(r){this.dispatch({type:"setState",state:r})},e.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},e.removeObserver=function(r){this.observers=this.observers.filter(function(i){return i!==r})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Ns).catch(Ns)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var r=this,i,s=this.state.status==="loading",o=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(a){a!==r.state.context&&r.dispatch({type:"loading",context:a,variables:r.state.variables})})),o.then(function(){return r.executeMutation()}).then(function(a){i=a,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(i,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(i,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(i,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:i}),i}).catch(function(a){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(a,r.state.variables,r.state.context,r),UE().error(a),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,a,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:a}),a})})},e.executeMutation=function(){var r=this,i;return this.retryer=new qq({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(r){var i=this;this.state=vbe(this.state,r),oi.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(r)}),i.mutationCache.notify(i)})},n}();function ybe(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function vbe(n,e){switch(e.type){case"failed":return Zn({},n,{failureCount:n.failureCount+1});case"pause":return Zn({},n,{isPaused:!0});case"continue":return Zn({},n,{isPaused:!1});case"loading":return Zn({},n,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return Zn({},n,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return Zn({},n,{data:void 0,error:e.error,failureCount:n.failureCount+1,isPaused:!1,status:"error"});case"setState":return Zn({},n,e.state);default:return n}}var _be=function(n){mx(e,n);function e(r){var i;return i=n.call(this)||this,i.config=r||{},i.mutations=[],i.mutationId=0,i}var t=e.prototype;return t.build=function(i,s,o){var a=new gbe({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:o,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(a),a},t.add=function(i){this.mutations.push(i),this.notify(i)},t.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},t.clear=function(){var i=this;oi.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},t.getAll=function(){return this.mutations},t.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return L4(i,s)})},t.findAll=function(i){return this.mutations.filter(function(s){return L4(i,s)})},t.notify=function(i){var s=this;oi.batch(function(){s.listeners.forEach(function(o){o(i)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return oi.batch(function(){return i.reduce(function(s,o){return s.then(function(){return o.continue().catch(Ns)})},Promise.resolve())})},e}(gx);function xbe(){return{onFetch:function(e){e.fetchFn=function(){var t,r,i,s,o,a,l=(t=e.fetchOptions)==null||(r=t.meta)==null?void 0:r.refetchPage,u=(i=e.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,c=u==null?void 0:u.pageParam,f=(u==null?void 0:u.direction)==="forward",h=(u==null?void 0:u.direction)==="backward",p=((o=e.state.data)==null?void 0:o.pages)||[],g=((a=e.state.data)==null?void 0:a.pageParams)||[],w=Hq(),_=w==null?void 0:w.signal,v=g,A=!1,S=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},b=function($,Z,se,ce){return v=ce?[Z].concat(v):[].concat(v,[Z]),ce?[se].concat($):[].concat($,[se])},C=function($,Z,se,ce){if(A)return Promise.reject("Cancelled");if(typeof se>"u"&&!Z&&$.length)return Promise.resolve($);var Q={queryKey:e.queryKey,signal:_,pageParam:se,meta:e.meta},ee=S(Q),Y=Promise.resolve(ee).then(function(X){return b($,se,X,ce)});if(FE(ee)){var V=Y;V.cancel=ee.cancel}return Y},L;if(!p.length)L=C([]);else if(f){var R=typeof c<"u",k=R?c:F4(e.options,p);L=C(p,R,k)}else if(h){var O=typeof c<"u",M=O?c:wbe(e.options,p);L=C(p,O,M,!0)}else(function(){v=[];var F=typeof e.options.getNextPageParam>"u",$=l&&p[0]?l(p[0],0,p):!0;L=$?C([],F,g[0]):Promise.resolve(b([],g[0],p[0]));for(var Z=function(Q){L=L.then(function(ee){var Y=l&&p[Q]?l(p[Q],Q,p):!0;if(Y){var V=F?g[Q]:F4(e.options,ee);return C(ee,F,V)}return Promise.resolve(b(ee,g[Q],p[Q]))})},se=1;se<p.length;se++)Z(se)})();var D=L.then(function(F){return{pages:F,pageParams:v}}),U=D;return U.cancel=function(){A=!0,w==null||w.abort(),FE(L)&&L.cancel()},D}}}}function F4(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function wbe(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}var Abe=function(){function n(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new mbe,this.mutationCache=t.mutationCache||new _be,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=n.prototype;return e.mount=function(){var r=this;this.unsubscribeFocus=G_.subscribe(function(){G_.isFocused()&&rA.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=rA.subscribe(function(){G_.isFocused()&&rA.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},e.unmount=function(){var r,i;(r=this.unsubscribeFocus)==null||r.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},e.isFetching=function(r,i){var s=jf(r,i),o=s[0];return o.fetching=!0,this.queryCache.findAll(o).length},e.isMutating=function(r){return this.mutationCache.findAll(Zn({},r,{fetching:!0})).length},e.getQueryData=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state.data},e.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(i){var s=i.queryKey,o=i.state,a=o.data;return[s,a]})},e.setQueryData=function(r,i,s){var o=nA(r),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,s)},e.setQueriesData=function(r,i,s){var o=this;return oi.batch(function(){return o.getQueryCache().findAll(r).map(function(a){var l=a.queryKey;return[l,o.setQueryData(l,i,s)]})})},e.getQueryState=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state},e.removeQueries=function(r,i){var s=jf(r,i),o=s[0],a=this.queryCache;oi.batch(function(){a.findAll(o).forEach(function(l){a.remove(l)})})},e.resetQueries=function(r,i,s){var o=this,a=jf(r,i,s),l=a[0],u=a[1],c=this.queryCache,f=Zn({},l,{active:!0});return oi.batch(function(){return c.findAll(l).forEach(function(h){h.reset()}),o.refetchQueries(f,u)})},e.cancelQueries=function(r,i,s){var o=this,a=jf(r,i,s),l=a[0],u=a[1],c=u===void 0?{}:u;typeof c.revert>"u"&&(c.revert=!0);var f=oi.batch(function(){return o.queryCache.findAll(l).map(function(h){return h.cancel(c)})});return Promise.all(f).then(Ns).catch(Ns)},e.invalidateQueries=function(r,i,s){var o,a,l,u=this,c=jf(r,i,s),f=c[0],h=c[1],p=Zn({},f,{active:(o=(a=f.refetchActive)!=null?a:f.active)!=null?o:!0,inactive:(l=f.refetchInactive)!=null?l:!1});return oi.batch(function(){return u.queryCache.findAll(f).forEach(function(g){g.invalidate()}),u.refetchQueries(p,h)})},e.refetchQueries=function(r,i,s){var o=this,a=jf(r,i,s),l=a[0],u=a[1],c=oi.batch(function(){return o.queryCache.findAll(l).map(function(h){return h.fetch(void 0,Zn({},u,{meta:{refetchPage:l==null?void 0:l.refetchPage}}))})}),f=Promise.all(c).then(Ns);return u!=null&&u.throwOnError||(f=f.catch(Ns)),f},e.fetchQuery=function(r,i,s){var o=nA(r,i,s),a=this.defaultQueryOptions(o);typeof a.retry>"u"&&(a.retry=!1);var l=this.queryCache.build(this,a);return l.isStaleByTime(a.staleTime)?l.fetch(a):Promise.resolve(l.state.data)},e.prefetchQuery=function(r,i,s){return this.fetchQuery(r,i,s).then(Ns).catch(Ns)},e.fetchInfiniteQuery=function(r,i,s){var o=nA(r,i,s);return o.behavior=xbe(),this.fetchQuery(o)},e.prefetchInfiniteQuery=function(r,i,s){return this.fetchInfiniteQuery(r,i,s).then(Ns).catch(Ns)},e.cancelMutations=function(){var r=this,i=oi.batch(function(){return r.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(Ns).catch(Ns)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(r){this.defaultOptions=r},e.setQueryDefaults=function(r,i){var s=this.queryDefaults.find(function(o){return tp(r)===tp(o.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:r,defaultOptions:i})},e.getQueryDefaults=function(r){var i;return r?(i=this.queryDefaults.find(function(s){return NE(r,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},e.setMutationDefaults=function(r,i){var s=this.mutationDefaults.find(function(o){return tp(r)===tp(o.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:r,defaultOptions:i})},e.getMutationDefaults=function(r){var i;return r?(i=this.mutationDefaults.find(function(s){return NE(r,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},e.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var i=Zn({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=tO(i.queryKey,i)),i},e.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},e.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:Zn({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},n}(),Ebe=function(n){mx(e,n);function e(r,i){var s;return s=n.call(this)||this,s.client=r,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var t=e.prototype;return t.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},t.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),U4(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},t.onUnsubscribe=function(){this.listeners.length||this.destroy()},t.shouldFetchOnReconnect=function(){return LP(this.currentQuery,this.options,this.options.refetchOnReconnect)},t.shouldFetchOnWindowFocus=function(){return LP(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},t.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},t.setOptions=function(i,s){var o=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var l=this.hasListeners();l&&j4(this.currentQuery,a,this.options,o)&&this.executeFetch(),this.updateResult(s),l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var u=this.computeRefetchInterval();l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||u!==this.currentRefetchInterval)&&this.updateRefetchInterval(u)},t.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,s);return this.createResult(o,s)},t.getCurrentResult=function(){return this.currentResult},t.trackResult=function(i,s){var o=this,a={},l=function(c){o.trackedProps.includes(c)||o.trackedProps.push(c)};return Object.keys(i).forEach(function(u){Object.defineProperty(a,u,{configurable:!1,enumerable:!0,get:function(){return l(u),i[u]}})}),(s.useErrorBoundary||s.suspense)&&l("error"),a},t.getNextResult=function(i){var s=this;return new Promise(function(o,a){var l=s.subscribe(function(u){u.isFetching||(l(),u.isError&&(i!=null&&i.throwOnError)?a(u.error):o(u))})})},t.getCurrentQuery=function(){return this.currentQuery},t.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},t.refetch=function(i){return this.fetch(Zn({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},t.fetchOptimistic=function(i){var s=this,o=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,o);return a.fetch().then(function(){return s.createResult(a,o)})},t.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},t.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(Ns)),s},t.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!(DE||this.currentResult.isStale||!OP(this.options.staleTime))){var s=Vq(this.currentResult.dataUpdatedAt,this.options.staleTime),o=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},o)}},t.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},t.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!(DE||this.options.enabled===!1||!OP(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||G_.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},t.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},t.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},t.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},t.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},t.createResult=function(i,s){var o=this.currentQuery,a=this.options,l=this.currentResult,u=this.currentResultState,c=this.currentResultOptions,f=i!==o,h=f?i.state:this.currentQueryInitialState,p=f?this.currentResult:this.previousQueryResult,g=i.state,w=g.dataUpdatedAt,_=g.error,v=g.errorUpdatedAt,A=g.isFetching,S=g.status,b=!1,C=!1,L;if(s.optimisticResults){var R=this.hasListeners(),k=!R&&U4(i,s),O=R&&j4(i,o,s,a);(k||O)&&(A=!0,w||(S="loading"))}if(s.keepPreviousData&&!g.dataUpdateCount&&(p!=null&&p.isSuccess)&&S!=="error")L=p.data,w=p.dataUpdatedAt,S=p.status,b=!0;else if(s.select&&typeof g.data<"u")if(l&&g.data===(u==null?void 0:u.data)&&s.select===this.selectFn)L=this.selectResult;else try{this.selectFn=s.select,L=s.select(g.data),s.structuralSharing!==!1&&(L=BE(l==null?void 0:l.data,L)),this.selectResult=L,this.selectError=null}catch(U){UE().error(U),this.selectError=U}else L=g.data;if(typeof s.placeholderData<"u"&&typeof L>"u"&&(S==="loading"||S==="idle")){var M;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))M=l.data;else if(M=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof M<"u")try{M=s.select(M),s.structuralSharing!==!1&&(M=BE(l==null?void 0:l.data,M)),this.selectError=null}catch(U){UE().error(U),this.selectError=U}typeof M<"u"&&(S="success",L=M,C=!0)}this.selectError&&(_=this.selectError,L=this.selectResult,v=Date.now(),S="error");var D={status:S,isLoading:S==="loading",isSuccess:S==="success",isError:S==="error",isIdle:S==="idle",data:L,dataUpdatedAt:w,error:_,errorUpdatedAt:v,failureCount:g.fetchFailureCount,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:A,isRefetching:A&&S!=="loading",isLoadingError:S==="error"&&g.dataUpdatedAt===0,isPlaceholderData:C,isPreviousData:b,isRefetchError:S==="error"&&g.dataUpdatedAt!==0,isStale:nO(i,s),refetch:this.refetch,remove:this.remove};return D},t.shouldNotifyListeners=function(i,s){if(!s)return!0;var o=this.options,a=o.notifyOnChangeProps,l=o.notifyOnChangePropsExclusions;if(!a&&!l||a==="tracked"&&!this.trackedProps.length)return!0;var u=a==="tracked"?this.trackedProps:a;return Object.keys(i).some(function(c){var f=c,h=i[f]!==s[f],p=u==null?void 0:u.some(function(w){return w===c}),g=l==null?void 0:l.some(function(w){return w===c});return h&&!g&&(!u||p)})},t.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!abe(this.currentResult,s)){var o={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(o.listeners=!0),this.notify(Zn({},o,i))}},t.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},t.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!iA(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},t.notify=function(i){var s=this;oi.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(o){o(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},e}(gx);function bbe(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function U4(n,e){return bbe(n,e)||n.state.dataUpdatedAt>0&&LP(n,e,e.refetchOnMount)}function LP(n,e,t){if(e.enabled!==!1){var r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&nO(n,e)}return!1}function j4(n,e,t,r){return t.enabled!==!1&&(n!==e||r.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&nO(n,t)}function nO(n,e){return n.isStaleByTime(e.staleTime)}var Sbe=qK.unstable_batchedUpdates;oi.setBatchNotifyFunction(Sbe);var Tbe=console;dbe(Tbe);var V4=Jt.createContext(void 0),$q=Jt.createContext(!1);function Kq(n){return n&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=V4),window.ReactQueryClientContext):V4}var Jq=function(){var e=Jt.useContext(Kq(Jt.useContext($q)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Cbe=function(e){var t=e.client,r=e.contextSharing,i=r===void 0?!1:r,s=e.children;Jt.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var o=Kq(i);return Jt.createElement($q.Provider,{value:i},Jt.createElement(o.Provider,{value:t},s))};function Mbe(){var n=!1;return{clearReset:function(){n=!1},reset:function(){n=!0},isReset:function(){return n}}}var Rbe=Jt.createContext(Mbe()),Pbe=function(){return Jt.useContext(Rbe)};function Ibe(n,e,t){return typeof e=="function"?e.apply(void 0,t):typeof e=="boolean"?e:!!n}function kbe(n,e){var t=Jt.useRef(!1),r=Jt.useState(0),i=r[1],s=Jq(),o=Pbe(),a=s.defaultQueryObserverOptions(n);a.optimisticResults=!0,a.onError&&(a.onError=oi.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=oi.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=oi.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(o.isReset()||(a.retryOnMount=!1));var l=Jt.useState(function(){return new e(s,a)}),u=l[0],c=u.getOptimisticResult(a);if(Jt.useEffect(function(){t.current=!0,o.clearReset();var f=u.subscribe(oi.batchCalls(function(){t.current&&i(function(h){return h+1})}));return u.updateResult(),function(){t.current=!1,f()}},[o,u]),Jt.useEffect(function(){u.setOptions(a,{listeners:!1})},[a,u]),a.suspense&&c.isLoading)throw u.fetchOptimistic(a).then(function(f){var h=f.data;a.onSuccess==null||a.onSuccess(h),a.onSettled==null||a.onSettled(h,null)}).catch(function(f){o.clearReset(),a.onError==null||a.onError(f),a.onSettled==null||a.onSettled(void 0,f)});if(c.isError&&!o.isReset()&&!c.isFetching&&Ibe(a.suspense,a.useErrorBoundary,[c.error,u.getCurrentQuery()]))throw c.error;return a.notifyOnChangeProps==="tracked"&&(c=u.trackResult(c,a)),c}function Obe(n,e,t){var r=nA(n,e,t);return kbe(r,Ebe)}const Dbe=async n=>{const e=Hr(en,"activeUsers",n),t=await Ea(e);if(t.exists())return t.data();throw new Error("User not found")},Lbe=n=>(Jq(),Obe(["activeUser",n],()=>Dbe(n),{enabled:!!n,retry:!1})),al=({element:n,roleProps:e})=>{var p;const r=(p=D0().currentUser)==null?void 0:p.uid,{data:i,isLoading:s,isError:o,error:a}=Lbe(r);if(s)return N.jsx("div",{children:"Loading..."});if(o)return N.jsxs("div",{children:["Error: ",a==null?void 0:a.message]});const l=localStorage.getItem("authToken"),u=localStorage.getItem("tokenExpiry"),c=new Date().getTime(),f=i==null?void 0:i.token,h=i==null?void 0:i.role;return!l||!u||c>parseInt(u)?(localStorage.removeItem("authToken"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("user"),N.jsx(i1,{to:"/login"})):l?f!==l?N.jsx(i1,{to:"/unauthorized"}):h!==e?N.jsx(i1,{to:"/unauthorized"}):N.jsx(N.Fragment,{children:n}):N.jsx(i1,{to:"/login"})},Nbe=()=>{const{user:n}=Ob();return console.log(n),N.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:N.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg text-center max-w-md w-full",children:[N.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Unauthorized Access"}),N.jsx("p",{className:"mt-4 text-lg text-gray-700",children:"You do not have permission to view this page."}),N.jsxs("p",{className:"mt-6 text-gray-500",children:["Please ",N.jsx(Ta,{to:"/login",className:"text-blue-500 hover:underline",children:"log in"})," with the appropriate credentials."]})]})})},Bbe=({children:n})=>{const e=_h();return W.useEffect(()=>{const t=localStorage.getItem("authToken"),r=localStorage.getItem("role"),i=localStorage.getItem("tokenExpiry"),s=new Date().getTime();t&&i&&s<parseInt(i)&&(r==="admin"||r==="doctor"?console.log("Yay"):r==="patient"||r==="employee"?console.log("Yarayar"):e("/login"))},[e]),N.jsx(N.Fragment,{children:n})},Fbe=({role:n})=>N.jsxs("div",{className:"p-8",children:[N.jsxs("h1",{className:"text-2xl font-bold",children:[n.charAt(0).toUpperCase()+n.slice(1)," Dashboard"]}),N.jsxs("p",{className:"mt-4",children:["Welcome to your ",n," dashboard!"]})]}),Ube=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(!1),[i,s]=W.useState({academics:!1,journey:!1,achievements:!1,projects:!1}),o=f=>{e(f)},a=()=>{r(!t)},l=f=>{s(h=>({...Object.keys(h).reduce((p,g)=>(p[g]=g===f?!h[g]:!1,p),{})}))},u=[{name:"academics",label:"Academics"},{name:"journey",label:"Journey"},{name:"projects",label:"Projects"},{name:"achievements",label:"Achievements"}],c=f=>N.jsxs("ul",{className:"ml-4 mt-2 space-y-2",children:[N.jsx("li",{children:N.jsx(Ta,{to:`/auth/${f}/create`,className:"block",children:"Create"})}),N.jsx("li",{children:N.jsx(Ta,{to:`/auth/${f}/view`,className:"block",children:"View"})})]});return N.jsxs(N.Fragment,{children:[N.jsx(XH,{}),N.jsxs("div",{className:"flex h-screen",children:[N.jsxs("div",{className:`transition-all duration-300 ${t?"w-20 bg-black text-white":"w-64 bg-white text-black"} p-4`,children:[N.jsx("div",{className:"flex justify-between items-center mb-6",children:N.jsx("button",{onClick:a,className:"text-black",children:t?N.jsx(Bpe,{className:"text-2xl text-white"}):N.jsx(WH,{className:"text-2xl text-black"})})}),N.jsx("ul",{className:"space-y-6",children:u.map(({name:f,label:h})=>N.jsxs("li",{className:`cursor-pointer ${n===f?"bg-gray-600":"hover:bg-gray-300"} p-3 rounded-lg`,onClick:()=>o(f),children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx(Ta,{to:`/auth/${f}/view`,className:`block ${t?"text-center":""}`,children:t?f==="academics"?N.jsx(Gpe,{className:"text-xl text-white"}):f==="journey"?N.jsx(Vpe,{className:"text-xl text-white"}):f==="achievements"?N.jsx(zpe,{className:"text-xl text-white"}):f==="projects"?N.jsx(Hpe,{className:"text-xl text-white"}):null:h}),!t&&N.jsx("button",{onClick:p=>{p.stopPropagation(),l(f)},className:"text-blue-600",children:i[f]?N.jsx(Upe,{}):N.jsx(Fpe,{})})]}),!t&&i[f]&&c(f)]},f))})]}),N.jsx("div",{className:"flex-1 bg-gray-100 p-6",children:N.jsx(c5,{})})]})]})};class yx{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const jbe=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},_s={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:jbe()},rO=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},Vbe=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=rO(n);_s.publicKey=t.publicKey,_s.blockHeadless=t.blockHeadless,_s.storageProvider=t.storageProvider,_s.blockList=t.blockList,_s.limitRate=t.limitRate,_s.origin=t.origin||e},Xq=async(n,e,t={})=>{const r=await fetch(_s.origin+n,{method:"POST",headers:t,body:e}),i=await r.text(),s=new yx(r.status,i);if(r.ok)return s;throw s},Yq=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},zbe=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Qq=n=>n.webdriver||!n.languages||n.languages.length===0,Zq=()=>new yx(451,"Unavailable For Headless Browser"),Hbe=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Gbe=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},qbe=(n,e)=>n instanceof FormData?n.get(e):n[e],eW=(n,e)=>{if(Gbe(n))return!1;Hbe(n.list,n.watchVariable);const t=qbe(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},tW=()=>new yx(403,"Forbidden"),Wbe=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},$be=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},nW=async(n,e,t)=>{if(!e.throttle||!t)return!1;Wbe(e.throttle,e.id);const r=e.id||n;return await $be(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},rW=()=>new yx(429,"Too Many Requests"),Kbe=async(n,e,t,r)=>{const i=rO(r),s=i.publicKey||_s.publicKey,o=i.blockHeadless||_s.blockHeadless,a=i.storageProvider||_s.storageProvider,l={..._s.blockList,...i.blockList},u={..._s.limitRate,...i.limitRate};return o&&Qq(navigator)?Promise.reject(Zq()):(Yq(s,n,e),zbe(t),t&&eW(l,t)?Promise.reject(tW()):await nW(location.pathname,u,a)?Promise.reject(rW()):Xq("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Jbe=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},Xbe=n=>typeof n=="string"?document.querySelector(n):n,Ybe=async(n,e,t,r)=>{const i=rO(r),s=i.publicKey||_s.publicKey,o=i.blockHeadless||_s.blockHeadless,a=_s.storageProvider||i.storageProvider,l={..._s.blockList,...i.blockList},u={..._s.limitRate,...i.limitRate};if(o&&Qq(navigator))return Promise.reject(Zq());const c=Xbe(t);Yq(s,n,e),Jbe(c);const f=new FormData(c);return eW(l,f)?Promise.reject(tW()):await nW(location.pathname,u,a)?Promise.reject(rW()):(f.append("lib_version","4.4.1"),f.append("service_id",n),f.append("template_id",e),f.append("user_id",s),Xq("/api/v1.0/email/send-form",f))},Qbe={init:Vbe,send:Kbe,sendForm:Ybe,EmailJSResponseStatus:yx},iW="/assets/fox-W5Giziuq.glb";function Zbe({currentAnimation:n,...e}){const t=W.useRef(),{nodes:r,materials:i,animations:s}=Uc(iW),{actions:o}=eO(s,t);return W.useEffect(()=>{Object.values(o).forEach(a=>a.stop()),o[n]&&o[n].play()},[o,n]),N.jsx("group",{ref:t,...e,dispose:null,children:N.jsxs("group",{name:"Sketchfab_Scene",children:[N.jsx("primitive",{object:r.GLTF_created_0_rootJoint}),N.jsx("skinnedMesh",{name:"Object_7",geometry:r.Object_7.geometry,material:i.PaletteMaterial001,skeleton:r.Object_7.skeleton}),N.jsx("skinnedMesh",{name:"Object_8",geometry:r.Object_8.geometry,material:i.PaletteMaterial001,skeleton:r.Object_8.skeleton}),N.jsx("skinnedMesh",{name:"Object_9",geometry:r.Object_9.geometry,material:i.PaletteMaterial001,skeleton:r.Object_9.skeleton}),N.jsx("skinnedMesh",{name:"Object_10",geometry:r.Object_10.geometry,material:i.PaletteMaterial001,skeleton:r.Object_10.skeleton}),N.jsx("skinnedMesh",{name:"Object_11",geometry:r.Object_11.geometry,material:i.PaletteMaterial001,skeleton:r.Object_11.skeleton})]})})}Uc.preload(iW);const sW=()=>{const[n,e]=W.useState(!1),{enqueueSnackbar:t}=hu(),[r,i]=W.useState("idle"),s=wy({initialValues:{name:"",email:"",message:""},validationSchema:zp({name:Ri().required("Name is required"),email:Ri().email("Invalid email address").required("Email is required"),message:Ri().required("Message is required")}),onSubmit:(o,{resetForm:a})=>{e(!0),Qbe.send("service_mjz144k","template_0jgqmyl",{from_name:o.name,to_name:"Sahaj Shakya",from_email:o.email,to_email:"saz.shakya@gmail.com",message:o.message},"t27Scz_UOK7NvN5pz").then(()=>{e(!1),t("Thank you for your message ",{variant:"success"}),a()},l=>{e(!1),console.error(l),t("I didn't receive your message ",{variant:"error"})})}});return N.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:[N.jsxs(on.div,{className:"bg-white p-6 rounded-lg shadow-lg w-96 max-w-lg flex flex-col justify-center items-center",initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},children:[N.jsx("h2",{className:"text-xl font-bold mb-4 text-center cursor-pointer",children:"Get in Touch"}),N.jsxs("form",{onSubmit:s.handleSubmit,className:"w-full",children:[N.jsx(er,{name:"name",type:"text",label:"Your Name",value:s.values.name,onChange:s.handleChange,onBlur:s.handleBlur,error:s.errors.name,touched:s.touched.name??!1}),N.jsx(er,{name:"email",type:"email",label:"Your Email",value:s.values.email,onChange:s.handleChange,onBlur:s.handleBlur,error:s.errors.email,touched:s.touched.email??!1}),N.jsxs("div",{className:"relative mb-6",children:[N.jsx(on.textarea,{name:"message",rows:"4",className:`w-full p-3 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300 ${s.touched.message&&s.errors.message?"border-red-500":"border-gray-300"}`,value:s.values.message,onChange:s.handleChange,onBlur:s.handleBlur,required:!0}),N.jsx(on.label,{htmlFor:"message",className:`absolute left-3 transition-all duration-300 ${s.values.message?"top-0 text-sm text-blue-500":"top-1/4 transform -translate-y-1/4 text-gray-500"}`,children:"Your Message"}),s.touched.message&&s.errors.message&&N.jsx("p",{className:"text-red-500 text-xs mt-2",children:s.errors.message})]}),N.jsx(on.button,{className:`w-full text-white p-3 rounded-lg transition-all duration-300 ${s.isSubmitting||!s.isValid?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"}`,type:"submit",disabled:s.isSubmitting||!s.isValid,whileHover:{scale:1.05},children:n?"Sending...":"Submit"})]})]}),N.jsx("div",{className:"lg:w-1/3 w-full lg:h-auto md:h-[450px] h-[300px]",children:N.jsxs(mq,{camera:{position:[0,0,5],fov:75,near:.1,far:1e3},children:[N.jsx("directionalLight",{position:[0,0,1],intensity:2.5}),N.jsx("ambientLight",{intensity:1}),N.jsx("pointLight",{position:[5,10,0],intensity:2}),N.jsx("spotLight",{position:[10,10,10],angle:.15,penumbra:1,intensity:2}),N.jsx(W.Suspense,{fallback:N.jsx(BH,{}),children:N.jsx(Zbe,{currentAnimation:r,position:[.5,.35,0],rotation:[12.629,-.6,0],scale:[.5,.5,.5]})})]})})]})};var dM,z4;function eSe(){if(z4)return dM;z4=1;function n(){this.__data__=[],this.size=0}return dM=n,dM}var pM,H4;function oW(){if(H4)return pM;H4=1;function n(e,t){return e===t||e!==e&&t!==t}return pM=n,pM}var mM,G4;function xS(){if(G4)return mM;G4=1;var n=oW();function e(t,r){for(var i=t.length;i--;)if(n(t[i][0],r))return i;return-1}return mM=e,mM}var gM,q4;function tSe(){if(q4)return gM;q4=1;var n=xS(),e=Array.prototype,t=e.splice;function r(i){var s=this.__data__,o=n(s,i);if(o<0)return!1;var a=s.length-1;return o==a?s.pop():t.call(s,o,1),--this.size,!0}return gM=r,gM}var yM,W4;function nSe(){if(W4)return yM;W4=1;var n=xS();function e(t){var r=this.__data__,i=n(r,t);return i<0?void 0:r[i][1]}return yM=e,yM}var vM,$4;function rSe(){if($4)return vM;$4=1;var n=xS();function e(t){return n(this.__data__,t)>-1}return vM=e,vM}var _M,K4;function iSe(){if(K4)return _M;K4=1;var n=xS();function e(t,r){var i=this.__data__,s=n(i,t);return s<0?(++this.size,i.push([t,r])):i[s][1]=r,this}return _M=e,_M}var xM,J4;function wS(){if(J4)return xM;J4=1;var n=eSe(),e=tSe(),t=nSe(),r=rSe(),i=iSe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,xM=s,xM}var wM,X4;function sSe(){if(X4)return wM;X4=1;var n=wS();function e(){this.__data__=new n,this.size=0}return wM=e,wM}var AM,Y4;function oSe(){if(Y4)return AM;Y4=1;function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}return AM=n,AM}var EM,Q4;function aSe(){if(Q4)return EM;Q4=1;function n(e){return this.__data__.get(e)}return EM=n,EM}var bM,Z4;function lSe(){if(Z4)return bM;Z4=1;function n(e){return this.__data__.has(e)}return bM=n,bM}var SM,ej;function aW(){if(ej)return SM;ej=1;var n=typeof $f=="object"&&$f&&$f.Object===Object&&$f;return SM=n,SM}var TM,tj;function jc(){if(tj)return TM;tj=1;var n=aW(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return TM=t,TM}var CM,nj;function iO(){if(nj)return CM;nj=1;var n=jc(),e=n.Symbol;return CM=e,CM}var MM,rj;function uSe(){if(rj)return MM;rj=1;var n=iO(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,i=n?n.toStringTag:void 0;function s(o){var a=t.call(o,i),l=o[i];try{o[i]=void 0;var u=!0}catch{}var c=r.call(o);return u&&(a?o[i]=l:delete o[i]),c}return MM=s,MM}var RM,ij;function cSe(){if(ij)return RM;ij=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return RM=t,RM}var PM,sj;function AS(){if(sj)return PM;sj=1;var n=iO(),e=uSe(),t=cSe(),r="[object Null]",i="[object Undefined]",s=n?n.toStringTag:void 0;function o(a){return a==null?a===void 0?i:r:s&&s in Object(a)?e(a):t(a)}return PM=o,PM}var IM,oj;function lW(){if(oj)return IM;oj=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return IM=n,IM}var kM,aj;function uW(){if(aj)return kM;aj=1;var n=AS(),e=lW(),t="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(a){if(!e(a))return!1;var l=n(a);return l==r||l==i||l==t||l==s}return kM=o,kM}var OM,lj;function fSe(){if(lj)return OM;lj=1;var n=jc(),e=n["__core-js_shared__"];return OM=e,OM}var DM,uj;function hSe(){if(uj)return DM;uj=1;var n=fSe(),e=function(){var r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function t(r){return!!e&&e in r}return DM=t,DM}var LM,cj;function cW(){if(cj)return LM;cj=1;var n=Function.prototype,e=n.toString;function t(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return LM=t,LM}var NM,fj;function dSe(){if(fj)return NM;fj=1;var n=uW(),e=hSe(),t=lW(),r=cW(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,l=o.toString,u=a.hasOwnProperty,c=RegExp("^"+l.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!t(h)||e(h))return!1;var p=n(h)?c:s;return p.test(r(h))}return NM=f,NM}var BM,hj;function pSe(){if(hj)return BM;hj=1;function n(e,t){return e==null?void 0:e[t]}return BM=n,BM}var FM,dj;function Py(){if(dj)return FM;dj=1;var n=dSe(),e=pSe();function t(r,i){var s=e(r,i);return n(s)?s:void 0}return FM=t,FM}var UM,pj;function sO(){if(pj)return UM;pj=1;var n=Py(),e=jc(),t=n(e,"Map");return UM=t,UM}var jM,mj;function ES(){if(mj)return jM;mj=1;var n=Py(),e=n(Object,"create");return jM=e,jM}var VM,gj;function mSe(){if(gj)return VM;gj=1;var n=ES();function e(){this.__data__=n?n(null):{},this.size=0}return VM=e,VM}var zM,yj;function gSe(){if(yj)return zM;yj=1;function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return zM=n,zM}var HM,vj;function ySe(){if(vj)return HM;vj=1;var n=ES(),e="__lodash_hash_undefined__",t=Object.prototype,r=t.hasOwnProperty;function i(s){var o=this.__data__;if(n){var a=o[s];return a===e?void 0:a}return r.call(o,s)?o[s]:void 0}return HM=i,HM}var GM,_j;function vSe(){if(_j)return GM;_j=1;var n=ES(),e=Object.prototype,t=e.hasOwnProperty;function r(i){var s=this.__data__;return n?s[i]!==void 0:t.call(s,i)}return GM=r,GM}var qM,xj;function _Se(){if(xj)return qM;xj=1;var n=ES(),e="__lodash_hash_undefined__";function t(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=n&&i===void 0?e:i,this}return qM=t,qM}var WM,wj;function xSe(){if(wj)return WM;wj=1;var n=mSe(),e=gSe(),t=ySe(),r=vSe(),i=_Se();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,WM=s,WM}var $M,Aj;function wSe(){if(Aj)return $M;Aj=1;var n=xSe(),e=wS(),t=sO();function r(){this.size=0,this.__data__={hash:new n,map:new(t||e),string:new n}}return $M=r,$M}var KM,Ej;function ASe(){if(Ej)return KM;Ej=1;function n(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return KM=n,KM}var JM,bj;function bS(){if(bj)return JM;bj=1;var n=ASe();function e(t,r){var i=t.__data__;return n(r)?i[typeof r=="string"?"string":"hash"]:i.map}return JM=e,JM}var XM,Sj;function ESe(){if(Sj)return XM;Sj=1;var n=bS();function e(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}return XM=e,XM}var YM,Tj;function bSe(){if(Tj)return YM;Tj=1;var n=bS();function e(t){return n(this,t).get(t)}return YM=e,YM}var QM,Cj;function SSe(){if(Cj)return QM;Cj=1;var n=bS();function e(t){return n(this,t).has(t)}return QM=e,QM}var ZM,Mj;function TSe(){if(Mj)return ZM;Mj=1;var n=bS();function e(t,r){var i=n(this,t),s=i.size;return i.set(t,r),this.size+=i.size==s?0:1,this}return ZM=e,ZM}var e2,Rj;function fW(){if(Rj)return e2;Rj=1;var n=wSe(),e=ESe(),t=bSe(),r=SSe(),i=TSe();function s(o){var a=-1,l=o==null?0:o.length;for(this.clear();++a<l;){var u=o[a];this.set(u[0],u[1])}}return s.prototype.clear=n,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=r,s.prototype.set=i,e2=s,e2}var t2,Pj;function CSe(){if(Pj)return t2;Pj=1;var n=wS(),e=sO(),t=fW(),r=200;function i(s,o){var a=this.__data__;if(a instanceof n){var l=a.__data__;if(!e||l.length<r-1)return l.push([s,o]),this.size=++a.size,this;a=this.__data__=new t(l)}return a.set(s,o),this.size=a.size,this}return t2=i,t2}var n2,Ij;function MSe(){if(Ij)return n2;Ij=1;var n=wS(),e=sSe(),t=oSe(),r=aSe(),i=lSe(),s=CSe();function o(a){var l=this.__data__=new n(a);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,n2=o,n2}var r2,kj;function RSe(){if(kj)return r2;kj=1;var n="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,n),this}return r2=e,r2}var i2,Oj;function PSe(){if(Oj)return i2;Oj=1;function n(e){return this.__data__.has(e)}return i2=n,i2}var s2,Dj;function ISe(){if(Dj)return s2;Dj=1;var n=fW(),e=RSe(),t=PSe();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new n;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=t,s2=r,s2}var o2,Lj;function kSe(){if(Lj)return o2;Lj=1;function n(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}return o2=n,o2}var a2,Nj;function OSe(){if(Nj)return a2;Nj=1;function n(e,t){return e.has(t)}return a2=n,a2}var l2,Bj;function hW(){if(Bj)return l2;Bj=1;var n=ISe(),e=kSe(),t=OSe(),r=1,i=2;function s(o,a,l,u,c,f){var h=l&r,p=o.length,g=a.length;if(p!=g&&!(h&&g>p))return!1;var w=f.get(o),_=f.get(a);if(w&&_)return w==a&&_==o;var v=-1,A=!0,S=l&i?new n:void 0;for(f.set(o,a),f.set(a,o);++v<p;){var b=o[v],C=a[v];if(u)var L=h?u(C,b,v,a,o,f):u(b,C,v,o,a,f);if(L!==void 0){if(L)continue;A=!1;break}if(S){if(!e(a,function(R,k){if(!t(S,k)&&(b===R||c(b,R,l,u,f)))return S.push(k)})){A=!1;break}}else if(!(b===C||c(b,C,l,u,f))){A=!1;break}}return f.delete(o),f.delete(a),A}return l2=s,l2}var u2,Fj;function DSe(){if(Fj)return u2;Fj=1;var n=jc(),e=n.Uint8Array;return u2=e,u2}var c2,Uj;function LSe(){if(Uj)return c2;Uj=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i,s){r[++t]=[s,i]}),r}return c2=n,c2}var f2,jj;function NSe(){if(jj)return f2;jj=1;function n(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}return f2=n,f2}var h2,Vj;function BSe(){if(Vj)return h2;Vj=1;var n=iO(),e=DSe(),t=oW(),r=hW(),i=LSe(),s=NSe(),o=1,a=2,l="[object Boolean]",u="[object Date]",c="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",g="[object Set]",w="[object String]",_="[object Symbol]",v="[object ArrayBuffer]",A="[object DataView]",S=n?n.prototype:void 0,b=S?S.valueOf:void 0;function C(L,R,k,O,M,D,U){switch(k){case A:if(L.byteLength!=R.byteLength||L.byteOffset!=R.byteOffset)return!1;L=L.buffer,R=R.buffer;case v:return!(L.byteLength!=R.byteLength||!D(new e(L),new e(R)));case l:case u:case h:return t(+L,+R);case c:return L.name==R.name&&L.message==R.message;case p:case w:return L==R+"";case f:var F=i;case g:var $=O&o;if(F||(F=s),L.size!=R.size&&!$)return!1;var Z=U.get(L);if(Z)return Z==R;O|=a,U.set(L,R);var se=r(F(L),F(R),O,M,D,U);return U.delete(L),se;case _:if(b)return b.call(L)==b.call(R)}return!1}return h2=C,h2}var d2,zj;function FSe(){if(zj)return d2;zj=1;function n(e,t){for(var r=-1,i=t.length,s=e.length;++r<i;)e[s+r]=t[r];return e}return d2=n,d2}var p2,Hj;function oO(){if(Hj)return p2;Hj=1;var n=Array.isArray;return p2=n,p2}var m2,Gj;function USe(){if(Gj)return m2;Gj=1;var n=FSe(),e=oO();function t(r,i,s){var o=i(r);return e(r)?o:n(o,s(r))}return m2=t,m2}var g2,qj;function jSe(){if(qj)return g2;qj=1;function n(e,t){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}return g2=n,g2}var y2,Wj;function VSe(){if(Wj)return y2;Wj=1;function n(){return[]}return y2=n,y2}var v2,$j;function zSe(){if($j)return v2;$j=1;var n=jSe(),e=VSe(),t=Object.prototype,r=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),n(i(o),function(a){return r.call(o,a)}))}:e;return v2=s,v2}var _2,Kj;function HSe(){if(Kj)return _2;Kj=1;function n(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}return _2=n,_2}var x2,Jj;function SS(){if(Jj)return x2;Jj=1;function n(e){return e!=null&&typeof e=="object"}return x2=n,x2}var w2,Xj;function GSe(){if(Xj)return w2;Xj=1;var n=AS(),e=SS(),t="[object Arguments]";function r(i){return e(i)&&n(i)==t}return w2=r,w2}var A2,Yj;function qSe(){if(Yj)return A2;Yj=1;var n=GSe(),e=SS(),t=Object.prototype,r=t.hasOwnProperty,i=t.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return A2=s,A2}var g_={exports:{}},E2,Qj;function WSe(){if(Qj)return E2;Qj=1;function n(){return!1}return E2=n,E2}g_.exports;var Zj;function dW(){return Zj||(Zj=1,function(n,e){var t=jc(),r=WSe(),i=e&&!e.nodeType&&e,s=i&&!0&&n&&!n.nodeType&&n,o=s&&s.exports===i,a=o?t.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||r;n.exports=u}(g_,g_.exports)),g_.exports}var b2,e9;function $Se(){if(e9)return b2;e9=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(r,i){var s=typeof r;return i=i??n,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return b2=t,b2}var S2,t9;function pW(){if(t9)return S2;t9=1;var n=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=n}return S2=e,S2}var T2,n9;function KSe(){if(n9)return T2;n9=1;var n=AS(),e=pW(),t=SS(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",a="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",g="[object String]",w="[object WeakMap]",_="[object ArrayBuffer]",v="[object DataView]",A="[object Float32Array]",S="[object Float64Array]",b="[object Int8Array]",C="[object Int16Array]",L="[object Int32Array]",R="[object Uint8Array]",k="[object Uint8ClampedArray]",O="[object Uint16Array]",M="[object Uint32Array]",D={};D[A]=D[S]=D[b]=D[C]=D[L]=D[R]=D[k]=D[O]=D[M]=!0,D[r]=D[i]=D[_]=D[s]=D[v]=D[o]=D[a]=D[l]=D[u]=D[c]=D[f]=D[h]=D[p]=D[g]=D[w]=!1;function U(F){return t(F)&&e(F.length)&&!!D[n(F)]}return T2=U,T2}var C2,r9;function JSe(){if(r9)return C2;r9=1;function n(e){return function(t){return e(t)}}return C2=n,C2}var y_={exports:{}};y_.exports;var i9;function XSe(){return i9||(i9=1,function(n,e){var t=aW(),r=e&&!e.nodeType&&e,i=r&&!0&&n&&!n.nodeType&&n,s=i&&i.exports===r,o=s&&t.process,a=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();n.exports=a}(y_,y_.exports)),y_.exports}var M2,s9;function mW(){if(s9)return M2;s9=1;var n=KSe(),e=JSe(),t=XSe(),r=t&&t.isTypedArray,i=r?e(r):n;return M2=i,M2}var R2,o9;function YSe(){if(o9)return R2;o9=1;var n=HSe(),e=qSe(),t=oO(),r=dW(),i=$Se(),s=mW(),o=Object.prototype,a=o.hasOwnProperty;function l(u,c){var f=t(u),h=!f&&e(u),p=!f&&!h&&r(u),g=!f&&!h&&!p&&s(u),w=f||h||p||g,_=w?n(u.length,String):[],v=_.length;for(var A in u)(c||a.call(u,A))&&!(w&&(A=="length"||p&&(A=="offset"||A=="parent")||g&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||i(A,v)))&&_.push(A);return _}return R2=l,R2}var P2,a9;function QSe(){if(a9)return P2;a9=1;var n=Object.prototype;function e(t){var r=t&&t.constructor,i=typeof r=="function"&&r.prototype||n;return t===i}return P2=e,P2}var I2,l9;function ZSe(){if(l9)return I2;l9=1;function n(e,t){return function(r){return e(t(r))}}return I2=n,I2}var k2,u9;function eTe(){if(u9)return k2;u9=1;var n=ZSe(),e=n(Object.keys,Object);return k2=e,k2}var O2,c9;function tTe(){if(c9)return O2;c9=1;var n=QSe(),e=eTe(),t=Object.prototype,r=t.hasOwnProperty;function i(s){if(!n(s))return e(s);var o=[];for(var a in Object(s))r.call(s,a)&&a!="constructor"&&o.push(a);return o}return O2=i,O2}var D2,f9;function nTe(){if(f9)return D2;f9=1;var n=uW(),e=pW();function t(r){return r!=null&&e(r.length)&&!n(r)}return D2=t,D2}var L2,h9;function rTe(){if(h9)return L2;h9=1;var n=YSe(),e=tTe(),t=nTe();function r(i){return t(i)?n(i):e(i)}return L2=r,L2}var N2,d9;function iTe(){if(d9)return N2;d9=1;var n=USe(),e=zSe(),t=rTe();function r(i){return n(i,t,e)}return N2=r,N2}var B2,p9;function sTe(){if(p9)return B2;p9=1;var n=iTe(),e=1,t=Object.prototype,r=t.hasOwnProperty;function i(s,o,a,l,u,c){var f=a&e,h=n(s),p=h.length,g=n(o),w=g.length;if(p!=w&&!f)return!1;for(var _=p;_--;){var v=h[_];if(!(f?v in o:r.call(o,v)))return!1}var A=c.get(s),S=c.get(o);if(A&&S)return A==o&&S==s;var b=!0;c.set(s,o),c.set(o,s);for(var C=f;++_<p;){v=h[_];var L=s[v],R=o[v];if(l)var k=f?l(R,L,v,o,s,c):l(L,R,v,s,o,c);if(!(k===void 0?L===R||u(L,R,a,l,c):k)){b=!1;break}C||(C=v=="constructor")}if(b&&!C){var O=s.constructor,M=o.constructor;O!=M&&"constructor"in s&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof M=="function"&&M instanceof M)&&(b=!1)}return c.delete(s),c.delete(o),b}return B2=i,B2}var F2,m9;function oTe(){if(m9)return F2;m9=1;var n=Py(),e=jc(),t=n(e,"DataView");return F2=t,F2}var U2,g9;function aTe(){if(g9)return U2;g9=1;var n=Py(),e=jc(),t=n(e,"Promise");return U2=t,U2}var j2,y9;function lTe(){if(y9)return j2;y9=1;var n=Py(),e=jc(),t=n(e,"Set");return j2=t,j2}var V2,v9;function uTe(){if(v9)return V2;v9=1;var n=Py(),e=jc(),t=n(e,"WeakMap");return V2=t,V2}var z2,_9;function cTe(){if(_9)return z2;_9=1;var n=oTe(),e=sO(),t=aTe(),r=lTe(),i=uTe(),s=AS(),o=cW(),a="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",f="[object WeakMap]",h="[object DataView]",p=o(n),g=o(e),w=o(t),_=o(r),v=o(i),A=s;return(n&&A(new n(new ArrayBuffer(1)))!=h||e&&A(new e)!=a||t&&A(t.resolve())!=u||r&&A(new r)!=c||i&&A(new i)!=f)&&(A=function(S){var b=s(S),C=b==l?S.constructor:void 0,L=C?o(C):"";if(L)switch(L){case p:return h;case g:return a;case w:return u;case _:return c;case v:return f}return b}),z2=A,z2}var H2,x9;function fTe(){if(x9)return H2;x9=1;var n=MSe(),e=hW(),t=BSe(),r=sTe(),i=cTe(),s=oO(),o=dW(),a=mW(),l=1,u="[object Arguments]",c="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function g(w,_,v,A,S,b){var C=s(w),L=s(_),R=C?c:i(w),k=L?c:i(_);R=R==u?f:R,k=k==u?f:k;var O=R==f,M=k==f,D=R==k;if(D&&o(w)){if(!o(_))return!1;C=!0,O=!1}if(D&&!O)return b||(b=new n),C||a(w)?e(w,_,v,A,S,b):t(w,_,R,v,A,S,b);if(!(v&l)){var U=O&&p.call(w,"__wrapped__"),F=M&&p.call(_,"__wrapped__");if(U||F){var $=U?w.value():w,Z=F?_.value():_;return b||(b=new n),S($,Z,v,A,b)}}return D?(b||(b=new n),r(w,_,v,A,S,b)):!1}return H2=g,H2}var G2,w9;function hTe(){if(w9)return G2;w9=1;var n=fTe(),e=SS();function t(r,i,s,o,a){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:n(r,i,s,o,t,a)}return G2=t,G2}var q2,A9;function dTe(){if(A9)return q2;A9=1;var n=hTe();function e(t,r){return n(t,r)}return q2=e,q2}var sA={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var pTe=sA.exports,E9;function mTe(){return E9||(E9=1,function(n,e){(function(r,i){n.exports=i()})(typeof self<"u"?self:pTe,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var o=r[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=r,i.d=function(s,o,a){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:a})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=109)}([function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),o=i(18),a=i(19),l=i(45),u=i(46),c=i(47),f=i(48),h=i(49),p=i(12),g=i(32),w=i(33),_=i(31),v=i(1),A={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:s.default,Format:o.default,Leaf:a.default,Embed:f.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:h.default,Attributor:{Attribute:p.default,Class:g.default,Style:w.default,Store:_.default}};r.default=A},function(t,r,i){var s=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,A){v.__proto__=A}||function(v,A){for(var S in A)A.hasOwnProperty(S)&&(v[S]=A[S])};return function(v,A){_(v,A);function S(){this.constructor=v}v.prototype=A===null?Object.create(A):(S.prototype=A.prototype,new S)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=function(_){s(v,_);function v(A){var S=this;return A="[Parchment] "+A,S=_.call(this,A)||this,S.message=A,S.name=S.constructor.name,S}return v}(Error);r.ParchmentError=o;var a={},l={},u={},c={};r.DATA_KEY="__blot";var f;(function(_){_[_.TYPE=3]="TYPE",_[_.LEVEL=12]="LEVEL",_[_.ATTRIBUTE=13]="ATTRIBUTE",_[_.BLOT=14]="BLOT",_[_.INLINE=7]="INLINE",_[_.BLOCK=11]="BLOCK",_[_.BLOCK_BLOT=10]="BLOCK_BLOT",_[_.INLINE_BLOT=6]="INLINE_BLOT",_[_.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",_[_.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",_[_.ANY=15]="ANY"})(f=r.Scope||(r.Scope={}));function h(_,v){var A=g(_);if(A==null)throw new o("Unable to create "+_+" blot");var S=A,b=_ instanceof Node||_.nodeType===Node.TEXT_NODE?_:S.create(v);return new S(b,v)}r.create=h;function p(_,v){return v===void 0&&(v=!1),_==null?null:_[r.DATA_KEY]!=null?_[r.DATA_KEY].blot:v?p(_.parentNode,v):null}r.find=p;function g(_,v){v===void 0&&(v=f.ANY);var A;if(typeof _=="string")A=c[_]||a[_];else if(_ instanceof Text||_.nodeType===Node.TEXT_NODE)A=c.text;else if(typeof _=="number")_&f.LEVEL&f.BLOCK?A=c.block:_&f.LEVEL&f.INLINE&&(A=c.inline);else if(_ instanceof HTMLElement){var S=(_.getAttribute("class")||"").split(/\s+/);for(var b in S)if(A=l[S[b]],A)break;A=A||u[_.tagName]}return A==null?null:v&f.LEVEL&A.scope&&v&f.TYPE&A.scope?A:null}r.query=g;function w(){for(var _=[],v=0;v<arguments.length;v++)_[v]=arguments[v];if(_.length>1)return _.map(function(b){return w(b)});var A=_[0];if(typeof A.blotName!="string"&&typeof A.attrName!="string")throw new o("Invalid definition");if(A.blotName==="abstract")throw new o("Cannot register abstract class");if(c[A.blotName||A.attrName]=A,typeof A.keyName=="string")a[A.keyName]=A;else if(A.className!=null&&(l[A.className]=A),A.tagName!=null){Array.isArray(A.tagName)?A.tagName=A.tagName.map(function(b){return b.toUpperCase()}):A.tagName=A.tagName.toUpperCase();var S=Array.isArray(A.tagName)?A.tagName:[A.tagName];S.forEach(function(b){(u[b]==null||A.className==null)&&(u[b]=A)})}return A}r.register=w},function(t,r,i){var s=i(51),o=i(11),a=i(3),l=i(20),u="\0",c=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};c.prototype.insert=function(f,h){var p={};return f.length===0?this:(p.insert=f,h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p))},c.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},c.prototype.retain=function(f,h){if(f<=0)return this;var p={retain:f};return h!=null&&typeof h=="object"&&Object.keys(h).length>0&&(p.attributes=h),this.push(p)},c.prototype.push=function(f){var h=this.ops.length,p=this.ops[h-1];if(f=a(!0,{},f),typeof p=="object"){if(typeof f.delete=="number"&&typeof p.delete=="number")return this.ops[h-1]={delete:p.delete+f.delete},this;if(typeof p.delete=="number"&&f.insert!=null&&(h-=1,p=this.ops[h-1],typeof p!="object"))return this.ops.unshift(f),this;if(o(f.attributes,p.attributes)){if(typeof f.insert=="string"&&typeof p.insert=="string")return this.ops[h-1]={insert:p.insert+f.insert},typeof f.attributes=="object"&&(this.ops[h-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof p.retain=="number")return this.ops[h-1]={retain:p.retain+f.retain},typeof f.attributes=="object"&&(this.ops[h-1].attributes=f.attributes),this}}return h===this.ops.length?this.ops.push(f):this.ops.splice(h,0,f),this},c.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},c.prototype.filter=function(f){return this.ops.filter(f)},c.prototype.forEach=function(f){this.ops.forEach(f)},c.prototype.map=function(f){return this.ops.map(f)},c.prototype.partition=function(f){var h=[],p=[];return this.forEach(function(g){var w=f(g)?h:p;w.push(g)}),[h,p]},c.prototype.reduce=function(f,h){return this.ops.reduce(f,h)},c.prototype.changeLength=function(){return this.reduce(function(f,h){return h.insert?f+l.length(h):h.delete?f-h.delete:f},0)},c.prototype.length=function(){return this.reduce(function(f,h){return f+l.length(h)},0)},c.prototype.slice=function(f,h){f=f||0,typeof h!="number"&&(h=1/0);for(var p=[],g=l.iterator(this.ops),w=0;w<h&&g.hasNext();){var _;w<f?_=g.next(f-w):(_=g.next(h-w),p.push(_)),w+=l.length(_)}return new c(p)},c.prototype.compose=function(f){var h=l.iterator(this.ops),p=l.iterator(f.ops),g=[],w=p.peek();if(w!=null&&typeof w.retain=="number"&&w.attributes==null){for(var _=w.retain;h.peekType()==="insert"&&h.peekLength()<=_;)_-=h.peekLength(),g.push(h.next());w.retain-_>0&&p.next(w.retain-_)}for(var v=new c(g);h.hasNext()||p.hasNext();)if(p.peekType()==="insert")v.push(p.next());else if(h.peekType()==="delete")v.push(h.next());else{var A=Math.min(h.peekLength(),p.peekLength()),S=h.next(A),b=p.next(A);if(typeof b.retain=="number"){var C={};typeof S.retain=="number"?C.retain=A:C.insert=S.insert;var L=l.attributes.compose(S.attributes,b.attributes,typeof S.retain=="number");if(L&&(C.attributes=L),v.push(C),!p.hasNext()&&o(v.ops[v.ops.length-1],C)){var R=new c(h.rest());return v.concat(R).chop()}}else typeof b.delete=="number"&&typeof S.retain=="number"&&v.push(b)}return v.chop()},c.prototype.concat=function(f){var h=new c(this.ops.slice());return f.ops.length>0&&(h.push(f.ops[0]),h.ops=h.ops.concat(f.ops.slice(1))),h},c.prototype.diff=function(f,h){if(this.ops===f.ops)return new c;var p=[this,f].map(function(A){return A.map(function(S){if(S.insert!=null)return typeof S.insert=="string"?S.insert:u;var b=A===f?"on":"with";throw new Error("diff() called "+b+" non-document")}).join("")}),g=new c,w=s(p[0],p[1],h),_=l.iterator(this.ops),v=l.iterator(f.ops);return w.forEach(function(A){for(var S=A[1].length;S>0;){var b=0;switch(A[0]){case s.INSERT:b=Math.min(v.peekLength(),S),g.push(v.next(b));break;case s.DELETE:b=Math.min(S,_.peekLength()),_.next(b),g.delete(b);break;case s.EQUAL:b=Math.min(_.peekLength(),v.peekLength(),S);var C=_.next(b),L=v.next(b);o(C.insert,L.insert)?g.retain(b,l.attributes.diff(C.attributes,L.attributes)):g.push(L).delete(b);break}S-=b}}),g.chop()},c.prototype.eachLine=function(f,h){h=h||`
`;for(var p=l.iterator(this.ops),g=new c,w=0;p.hasNext();){if(p.peekType()!=="insert")return;var _=p.peek(),v=l.length(_)-p.peekLength(),A=typeof _.insert=="string"?_.insert.indexOf(h,v)-v:-1;if(A<0)g.push(p.next());else if(A>0)g.push(p.next(A));else{if(f(g,p.next(1).attributes||{},w)===!1)return;w+=1,g=new c}}g.length()>0&&f(g,{},w)},c.prototype.transform=function(f,h){if(h=!!h,typeof f=="number")return this.transformPosition(f,h);for(var p=l.iterator(this.ops),g=l.iterator(f.ops),w=new c;p.hasNext()||g.hasNext();)if(p.peekType()==="insert"&&(h||g.peekType()!=="insert"))w.retain(l.length(p.next()));else if(g.peekType()==="insert")w.push(g.next());else{var _=Math.min(p.peekLength(),g.peekLength()),v=p.next(_),A=g.next(_);if(v.delete)continue;A.delete?w.push(A):w.retain(_,l.attributes.transform(v.attributes,A.attributes,h))}return w.chop()},c.prototype.transformPosition=function(f,h){h=!!h;for(var p=l.iterator(this.ops),g=0;p.hasNext()&&g<=f;){var w=p.peekLength(),_=p.peekType();if(p.next(),_==="delete"){f-=Math.min(w,f-g);continue}else _==="insert"&&(g<f||!h)&&(f+=w);g+=w}return f},t.exports=c},function(t,r){var i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=function(p){return typeof Array.isArray=="function"?Array.isArray(p):s.call(p)==="[object Array]"},u=function(p){if(!p||s.call(p)!=="[object Object]")return!1;var g=i.call(p,"constructor"),w=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!w)return!1;var _;for(_ in p);return typeof _>"u"||i.call(p,_)},c=function(p,g){o&&g.name==="__proto__"?o(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},f=function(p,g){if(g==="__proto__")if(i.call(p,g)){if(a)return a(p,g).value}else return;return p[g]};t.exports=function h(){var p,g,w,_,v,A,S=arguments[0],b=1,C=arguments.length,L=!1;for(typeof S=="boolean"&&(L=S,S=arguments[1]||{},b=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});b<C;++b)if(p=arguments[b],p!=null)for(g in p)w=f(S,g),_=f(p,g),S!==_&&(L&&_&&(u(_)||(v=l(_)))?(v?(v=!1,A=w&&l(w)?w:[]):A=w&&u(w)?w:{},c(S,{name:g,newValue:h(L,A,_)})):typeof _<"u"&&c(S,{name:g,newValue:_}));return S}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var s=function(){function D(U,F){for(var $=0;$<F.length;$++){var Z=F[$];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,F,$){return F&&D(U.prototype,F),$&&D(U,$),U}}(),o=function D(U,F,$){U===null&&(U=Function.prototype);var Z=Object.getOwnPropertyDescriptor(U,F);if(Z===void 0){var se=Object.getPrototypeOf(U);return se===null?void 0:D(se,F,$)}else{if("value"in Z)return Z.value;var ce=Z.get;return ce===void 0?void 0:ce.call($)}},a=i(3),l=S(a),u=i(2),c=S(u),f=i(0),h=S(f),p=i(16),g=S(p),w=i(6),_=S(w),v=i(7),A=S(v);function S(D){return D&&D.__esModule?D:{default:D}}function b(D,U){if(!(D instanceof U))throw new TypeError("Cannot call a class as a function")}function C(D,U){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:D}function L(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);D.prototype=Object.create(U&&U.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(D,U):D.__proto__=U)}var R=1,k=function(D){L(U,D);function U(){return b(this,U),C(this,(U.__proto__||Object.getPrototypeOf(U)).apply(this,arguments))}return s(U,[{key:"attach",value:function(){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"attach",this).call(this),this.attributes=new h.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function($,Z){var se=h.default.query($,h.default.Scope.BLOCK_ATTRIBUTE);se!=null&&this.attributes.attribute(se,Z)}},{key:"formatAt",value:function($,Z,se,ce){this.format(se,ce)}},{key:"insertAt",value:function($,Z,se){if(typeof Z=="string"&&Z.endsWith(`
`)){var ce=h.default.create(O.blotName);this.parent.insertBefore(ce,$===0?this:this.next),ce.insertAt(0,Z.slice(0,-1))}else o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,$,Z,se)}}]),U}(h.default.Embed);k.scope=h.default.Scope.BLOCK_BLOT;var O=function(D){L(U,D);function U(F){b(this,U);var $=C(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,F));return $.cache={},$}return s(U,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(h.default.Leaf).reduce(function($,Z){return Z.length()===0?$:$.insert(Z.value(),M(Z))},new c.default).insert(`
`,M(this))),this.cache.delta}},{key:"deleteAt",value:function($,Z){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"deleteAt",this).call(this,$,Z),this.cache={}}},{key:"formatAt",value:function($,Z,se,ce){Z<=0||(h.default.query(se,h.default.Scope.BLOCK)?$+Z===this.length()&&this.format(se,ce):o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"formatAt",this).call(this,$,Math.min(Z,this.length()-$-1),se,ce),this.cache={})}},{key:"insertAt",value:function($,Z,se){if(se!=null)return o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,$,Z,se);if(Z.length!==0){var ce=Z.split(`
`),Q=ce.shift();Q.length>0&&($<this.length()-1||this.children.tail==null?o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertAt",this).call(this,Math.min($,this.length()-1),Q):this.children.tail.insertAt(this.children.tail.length(),Q),this.cache={});var ee=this;ce.reduce(function(Y,V){return ee=ee.split(Y,!0),ee.insertAt(0,V),V.length},$+Q.length)}}},{key:"insertBefore",value:function($,Z){var se=this.children.head;o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"insertBefore",this).call(this,$,Z),se instanceof g.default&&se.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"length",this).call(this)+R),this.cache.length}},{key:"moveChildren",value:function($,Z){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"moveChildren",this).call(this,$,Z),this.cache={}}},{key:"optimize",value:function($){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"optimize",this).call(this,$),this.cache={}}},{key:"path",value:function($){return o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"path",this).call(this,$,!0)}},{key:"removeChild",value:function($){o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"removeChild",this).call(this,$),this.cache={}}},{key:"split",value:function($){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Z&&($===0||$>=this.length()-R)){var se=this.clone();return $===0?(this.parent.insertBefore(se,this),this):(this.parent.insertBefore(se,this.next),se)}else{var ce=o(U.prototype.__proto__||Object.getPrototypeOf(U.prototype),"split",this).call(this,$,Z);return this.cache={},ce}}}]),U}(h.default.Block);O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[_.default,h.default.Embed,A.default];function M(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D==null||(typeof D.formats=="function"&&(U=(0,l.default)(U,D.formats())),D.parent==null||D.parent.blotName=="scroll"||D.parent.statics.scope!==D.statics.scope)?U:M(D.parent,U)}r.bubbleFormats=M,r.BlockEmbed=k,r.default=O},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},o=function(){function ee(Y,V){var X=[],re=!0,oe=!1,fe=void 0;try{for(var te=Y[Symbol.iterator](),ue;!(re=(ue=te.next()).done)&&(X.push(ue.value),!(V&&X.length===V));re=!0);}catch(ye){oe=!0,fe=ye}finally{try{!re&&te.return&&te.return()}finally{if(oe)throw fe}}return X}return function(Y,V){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return ee(Y,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function ee(Y,V){for(var X=0;X<V.length;X++){var re=V[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,V,X){return V&&ee(Y.prototype,V),X&&ee(Y,X),Y}}();i(50);var l=i(2),u=M(l),c=i(14),f=M(c),h=i(8),p=M(h),g=i(9),w=M(g),_=i(0),v=M(_),A=i(15),S=M(A),b=i(3),C=M(b),L=i(10),R=M(L),k=i(34),O=M(k);function M(ee){return ee&&ee.__esModule?ee:{default:ee}}function D(ee,Y,V){return Y in ee?Object.defineProperty(ee,Y,{value:V,enumerable:!0,configurable:!0,writable:!0}):ee[Y]=V,ee}function U(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}var F=(0,R.default)("quill"),$=function(){a(ee,null,[{key:"debug",value:function(V){V===!0&&(V="log"),R.default.level(V)}},{key:"find",value:function(V){return V.__quill||v.default.find(V)}},{key:"import",value:function(V){return this.imports[V]==null&&F.error("Cannot import "+V+". Are you sure it was registered?"),this.imports[V]}},{key:"register",value:function(V,X){var re=this,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof V!="string"){var fe=V.attrName||V.blotName;typeof fe=="string"?this.register("formats/"+fe,V,X):Object.keys(V).forEach(function(te){re.register(te,V[te],X)})}else this.imports[V]!=null&&!oe&&F.warn("Overwriting "+V+" with",X),this.imports[V]=X,(V.startsWith("blots/")||V.startsWith("formats/"))&&X.blotName!=="abstract"?v.default.register(X):V.startsWith("modules")&&typeof X.register=="function"&&X.register()}}]);function ee(Y){var V=this,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(U(this,ee),this.options=Z(Y,X),this.container=this.options.container,this.container==null)return F.error("Invalid Quill container",Y);this.options.debug&&ee.debug(this.options.debug);var re=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new S.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(fe){fe===p.default.events.TEXT_CHANGE&&V.root.classList.toggle("ql-blank",V.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(fe,te){var ue=V.selection.lastRange,ye=ue&&ue.length===0?ue.index:void 0;se.call(V,function(){return V.editor.update(null,te,ye)},fe)});var oe=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+re+"<p><br></p></div>");this.setContents(oe),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(ee,[{key:"addContainer",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof V=="string"){var re=V;V=document.createElement("div"),V.classList.add(re)}return this.container.insertBefore(V,X),V}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(V,X,re){var oe=this,fe=ce(V,X,re),te=o(fe,4);return V=te[0],X=te[1],re=te[3],se.call(this,function(){return oe.editor.deleteText(V,X)},re,V,-1*X)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(V),this.container.classList.toggle("ql-disabled",!V)}},{key:"focus",value:function(){var V=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=V,this.scrollIntoView()}},{key:"format",value:function(V,X){var re=this,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return se.call(this,function(){var fe=re.getSelection(!0),te=new u.default;if(fe==null)return te;if(v.default.query(V,v.default.Scope.BLOCK))te=re.editor.formatLine(fe.index,fe.length,D({},V,X));else{if(fe.length===0)return re.selection.format(V,X),te;te=re.editor.formatText(fe.index,fe.length,D({},V,X))}return re.setSelection(fe,p.default.sources.SILENT),te},oe)}},{key:"formatLine",value:function(V,X,re,oe,fe){var te=this,ue=void 0,ye=ce(V,X,re,oe,fe),xe=o(ye,4);return V=xe[0],X=xe[1],ue=xe[2],fe=xe[3],se.call(this,function(){return te.editor.formatLine(V,X,ue)},fe,V,0)}},{key:"formatText",value:function(V,X,re,oe,fe){var te=this,ue=void 0,ye=ce(V,X,re,oe,fe),xe=o(ye,4);return V=xe[0],X=xe[1],ue=xe[2],fe=xe[3],se.call(this,function(){return te.editor.formatText(V,X,ue)},fe,V,0)}},{key:"getBounds",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,re=void 0;typeof V=="number"?re=this.selection.getBounds(V,X):re=this.selection.getBounds(V.index,V.length);var oe=this.container.getBoundingClientRect();return{bottom:re.bottom-oe.top,height:re.height,left:re.left-oe.left,right:re.right-oe.left,top:re.top-oe.top,width:re.width}}},{key:"getContents",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,re=ce(V,X),oe=o(re,2);return V=oe[0],X=oe[1],this.editor.getContents(V,X)}},{key:"getFormat",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof V=="number"?this.editor.getFormat(V,X):this.editor.getFormat(V.index,V.length)}},{key:"getIndex",value:function(V){return V.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(V){return this.scroll.leaf(V)}},{key:"getLine",value:function(V){return this.scroll.line(V)}},{key:"getLines",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof V!="number"?this.scroll.lines(V.index,V.length):this.scroll.lines(V,X)}},{key:"getModule",value:function(V){return this.theme.modules[V]}},{key:"getSelection",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return V&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-V,re=ce(V,X),oe=o(re,2);return V=oe[0],X=oe[1],this.editor.getText(V,X)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(V,X,re){var oe=this,fe=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ee.sources.API;return se.call(this,function(){return oe.editor.insertEmbed(V,X,re)},fe,V)}},{key:"insertText",value:function(V,X,re,oe,fe){var te=this,ue=void 0,ye=ce(V,0,re,oe,fe),xe=o(ye,4);return V=xe[0],ue=xe[2],fe=xe[3],se.call(this,function(){return te.editor.insertText(V,X,ue)},fe,V,X.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(V,X,re){this.clipboard.dangerouslyPasteHTML(V,X,re)}},{key:"removeFormat",value:function(V,X,re){var oe=this,fe=ce(V,X,re),te=o(fe,4);return V=te[0],X=te[1],re=te[3],se.call(this,function(){return oe.editor.removeFormat(V,X)},re,V)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(V){var X=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return se.call(this,function(){V=new u.default(V);var oe=X.getLength(),fe=X.editor.deleteText(0,oe),te=X.editor.applyDelta(V),ue=te.ops[te.ops.length-1];ue!=null&&typeof ue.insert=="string"&&ue.insert[ue.insert.length-1]===`
`&&(X.editor.deleteText(X.getLength()-1,1),te.delete(1));var ye=fe.compose(te);return ye},re)}},{key:"setSelection",value:function(V,X,re){if(V==null)this.selection.setRange(null,X||ee.sources.API);else{var oe=ce(V,X,re),fe=o(oe,4);V=fe[0],X=fe[1],re=fe[3],this.selection.setRange(new A.Range(V,X),re),re!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,re=new u.default().insert(V);return this.setContents(re,X)}},{key:"update",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,X=this.scroll.update(V);return this.selection.update(V),X}},{key:"updateContents",value:function(V){var X=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return se.call(this,function(){return V=new u.default(V),X.editor.applyDelta(V,re)},re,!0)}}]),ee}();$.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},$.events=p.default.events,$.sources=p.default.sources,$.version="1.3.7",$.imports={delta:u.default,parchment:v.default,"core/module":w.default,"core/theme":O.default};function Z(ee,Y){if(Y=(0,C.default)(!0,{container:ee,modules:{clipboard:!0,keyboard:!0,history:!0}},Y),!Y.theme||Y.theme===$.DEFAULTS.theme)Y.theme=O.default;else if(Y.theme=$.import("themes/"+Y.theme),Y.theme==null)throw new Error("Invalid theme "+Y.theme+". Did you register it?");var V=(0,C.default)(!0,{},Y.theme.DEFAULTS);[V,Y].forEach(function(oe){oe.modules=oe.modules||{},Object.keys(oe.modules).forEach(function(fe){oe.modules[fe]===!0&&(oe.modules[fe]={})})});var X=Object.keys(V.modules).concat(Object.keys(Y.modules)),re=X.reduce(function(oe,fe){var te=$.import("modules/"+fe);return te==null?F.error("Cannot load "+fe+" module. Are you sure you registered it?"):oe[fe]=te.DEFAULTS||{},oe},{});return Y.modules!=null&&Y.modules.toolbar&&Y.modules.toolbar.constructor!==Object&&(Y.modules.toolbar={container:Y.modules.toolbar}),Y=(0,C.default)(!0,{},$.DEFAULTS,{modules:re},V,Y),["bounds","container","scrollingContainer"].forEach(function(oe){typeof Y[oe]=="string"&&(Y[oe]=document.querySelector(Y[oe]))}),Y.modules=Object.keys(Y.modules).reduce(function(oe,fe){return Y.modules[fe]&&(oe[fe]=Y.modules[fe]),oe},{}),Y}function se(ee,Y,V,X){if(this.options.strict&&!this.isEnabled()&&Y===p.default.sources.USER)return new u.default;var re=V==null?null:this.getSelection(),oe=this.editor.delta,fe=ee();if(re!=null&&(V===!0&&(V=re.index),X==null?re=Q(re,fe,Y):X!==0&&(re=Q(re,V,X,Y)),this.setSelection(re,p.default.sources.SILENT)),fe.length()>0){var te,ue=[p.default.events.TEXT_CHANGE,fe,oe,Y];if((te=this.emitter).emit.apply(te,[p.default.events.EDITOR_CHANGE].concat(ue)),Y!==p.default.sources.SILENT){var ye;(ye=this.emitter).emit.apply(ye,ue)}}return fe}function ce(ee,Y,V,X,re){var oe={};return typeof ee.index=="number"&&typeof ee.length=="number"?typeof Y!="number"?(re=X,X=V,V=Y,Y=ee.length,ee=ee.index):(Y=ee.length,ee=ee.index):typeof Y!="number"&&(re=X,X=V,V=Y,Y=0),(typeof V>"u"?"undefined":s(V))==="object"?(oe=V,re=X):typeof V=="string"&&(X!=null?oe[V]=X:re=V),re=re||p.default.sources.API,[ee,Y,oe,re]}function Q(ee,Y,V,X){if(ee==null)return null;var re=void 0,oe=void 0;if(Y instanceof u.default){var fe=[ee.index,ee.index+ee.length].map(function(xe){return Y.transformPosition(xe,X!==p.default.sources.USER)}),te=o(fe,2);re=te[0],oe=te[1]}else{var ue=[ee.index,ee.index+ee.length].map(function(xe){return xe<Y||xe===Y&&X===p.default.sources.USER?xe:V>=0?xe+V:Math.max(Y,xe+V)}),ye=o(ue,2);re=ye[0],oe=ye[1]}return new A.Range(re,oe-re)}r.expandConfig=Z,r.overload=ce,r.default=$},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,A){for(var S=0;S<A.length;S++){var b=A[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,A,S){return A&&_(v.prototype,A),S&&_(v,S),v}}(),o=function _(v,A,S){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,A);if(b===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,A,S)}else{if("value"in b)return b.value;var L=b.get;return L===void 0?void 0:L.call(S)}},a=i(7),l=f(a),u=i(0),c=f(u);function f(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function p(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function g(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var w=function(_){g(v,_);function v(){return h(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"formatAt",value:function(S,b,C,L){if(v.compare(this.statics.blotName,C)<0&&c.default.query(C,c.default.Scope.BLOT)){var R=this.isolate(S,b);L&&R.wrap(C,L)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,S,b,C,L)}},{key:"optimize",value:function(S){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,S),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var b=this.parent.isolate(this.offset(),this.length());this.moveChildren(b),b.wrap(this)}}}],[{key:"compare",value:function(S,b){var C=v.order.indexOf(S),L=v.order.indexOf(b);return C>=0||L>=0?C-L:S===b?0:S<b?-1:1}}]),v}(c.default.Inline);w.allowedChildren=[w,c.default.Embed,l.default],w.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function c(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var f=function(h){c(p,h);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default.Text);r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function A(S,b){for(var C=0;C<b.length;C++){var L=b[C];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(S,L.key,L)}}return function(S,b,C){return b&&A(S.prototype,b),C&&A(S,C),S}}(),o=function A(S,b,C){S===null&&(S=Function.prototype);var L=Object.getOwnPropertyDescriptor(S,b);if(L===void 0){var R=Object.getPrototypeOf(S);return R===null?void 0:A(R,b,C)}else{if("value"in L)return L.value;var k=L.get;return k===void 0?void 0:k.call(C)}},a=i(54),l=f(a),u=i(10),c=f(u);function f(A){return A&&A.__esModule?A:{default:A}}function h(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function p(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function g(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var w=(0,c.default)("quill:events"),_=["selectionchange","mousedown","mouseup","click"];_.forEach(function(A){document.addEventListener(A,function(){for(var S=arguments.length,b=Array(S),C=0;C<S;C++)b[C]=arguments[C];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(L){if(L.__quill&&L.__quill.emitter){var R;(R=L.__quill.emitter).handleDOM.apply(R,b)}})})});var v=function(A){g(S,A);function S(){h(this,S);var b=p(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return b.listeners={},b.on("error",w.error),b}return s(S,[{key:"emit",value:function(){w.log.apply(w,arguments),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(C){for(var L=arguments.length,R=Array(L>1?L-1:0),k=1;k<L;k++)R[k-1]=arguments[k];(this.listeners[C.type]||[]).forEach(function(O){var M=O.node,D=O.handler;(C.target===M||M.contains(C.target))&&D.apply(void 0,[C].concat(R))})}},{key:"listenDOM",value:function(C,L,R){this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push({node:L,handler:R})}}]),S}(l.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});function s(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,a),this.quill=l,this.options=u};o.DEFAULTS={},r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=["error","warn","log","info"],o="warn";function a(u){if(s.indexOf(u)<=s.indexOf(o)){for(var c,f=arguments.length,h=Array(f>1?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];(c=console)[u].apply(c,h)}}function l(u){return s.reduce(function(c,f){return c[f]=a.bind(console,f,u),c},{})}a.level=l.level=function(u){o=u},r.default=l},function(t,r,i){var s=Array.prototype.slice,o=i(52),a=i(53),l=t.exports=function(h,p,g){return g||(g={}),h===p?!0:h instanceof Date&&p instanceof Date?h.getTime()===p.getTime():!h||!p||typeof h!="object"&&typeof p!="object"?g.strict?h===p:h==p:f(h,p,g)};function u(h){return h==null}function c(h){return!(!h||typeof h!="object"||typeof h.length!="number"||typeof h.copy!="function"||typeof h.slice!="function"||h.length>0&&typeof h[0]!="number")}function f(h,p,g){var w,_;if(u(h)||u(p)||h.prototype!==p.prototype)return!1;if(a(h))return a(p)?(h=s.call(h),p=s.call(p),l(h,p,g)):!1;if(c(h)){if(!c(p)||h.length!==p.length)return!1;for(w=0;w<h.length;w++)if(h[w]!==p[w])return!1;return!0}try{var v=o(h),A=o(p)}catch{return!1}if(v.length!=A.length)return!1;for(v.sort(),A.sort(),w=v.length-1;w>=0;w--)if(v[w]!=A[w])return!1;for(w=v.length-1;w>=0;w--)if(_=v[w],!l(h[_],p[_],g))return!1;return typeof h==typeof p}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var f=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|f:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return a.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},a.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},a.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},a.prototype.remove=function(l){l.removeAttribute(this.keyName)},a.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},a}();r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var s=function(){function k(O,M){var D=[],U=!0,F=!1,$=void 0;try{for(var Z=O[Symbol.iterator](),se;!(U=(se=Z.next()).done)&&(D.push(se.value),!(M&&D.length===M));U=!0);}catch(ce){F=!0,$=ce}finally{try{!U&&Z.return&&Z.return()}finally{if(F)throw $}}return D}return function(O,M){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return k(O,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(O,M){for(var D=0;D<M.length;D++){var U=M[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,M,D){return M&&k(O.prototype,M),D&&k(O,D),O}}(),a=function k(O,M,D){O===null&&(O=Function.prototype);var U=Object.getOwnPropertyDescriptor(O,M);if(U===void 0){var F=Object.getPrototypeOf(O);return F===null?void 0:k(F,M,D)}else{if("value"in U)return U.value;var $=U.get;return $===void 0?void 0:$.call(D)}},l=i(2),u=A(l),c=i(0),f=A(c),h=i(4),p=A(h),g=i(6),w=A(g),_=i(7),v=A(_);function A(k){return k&&k.__esModule?k:{default:k}}function S(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}function b(k,O){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:k}function C(k,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);k.prototype=Object.create(O&&O.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(k,O):k.__proto__=O)}var L=function(k){C(O,k);function O(){return S(this,O),b(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O}(w.default);L.blotName="code",L.tagName="CODE";var R=function(k){C(O,k);function O(){return S(this,O),b(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return o(O,[{key:"delta",value:function(){var D=this,U=this.domNode.textContent;return U.endsWith(`
`)&&(U=U.slice(0,-1)),U.split(`
`).reduce(function(F,$){return F.insert($).insert(`
`,D.formats())},new u.default)}},{key:"format",value:function(D,U){if(!(D===this.statics.blotName&&U)){var F=this.descendant(v.default,this.length()-1),$=s(F,1),Z=$[0];Z!=null&&Z.deleteAt(Z.length()-1,1),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,D,U)}}},{key:"formatAt",value:function(D,U,F,$){if(U!==0&&!(f.default.query(F,f.default.Scope.BLOCK)==null||F===this.statics.blotName&&$===this.statics.formats(this.domNode))){var Z=this.newlineIndex(D);if(!(Z<0||Z>=D+U)){var se=this.newlineIndex(D,!0)+1,ce=Z-se+1,Q=this.isolate(se,ce),ee=Q.next;Q.format(F,$),ee instanceof O&&ee.formatAt(0,D-se+U-ce,F,$)}}}},{key:"insertAt",value:function(D,U,F){if(F==null){var $=this.descendant(v.default,D),Z=s($,2),se=Z[0],ce=Z[1];se.insertAt(ce,U)}}},{key:"length",value:function(){var D=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?D:D+1}},{key:"newlineIndex",value:function(D){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U)return this.domNode.textContent.slice(0,D).lastIndexOf(`
`);var F=this.domNode.textContent.slice(D).indexOf(`
`);return F>-1?D+F:-1}},{key:"optimize",value:function(D){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,D);var U=this.next;U!=null&&U.prev===this&&U.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===U.statics.formats(U.domNode)&&(U.optimize(D),U.moveChildren(this),U.remove())}},{key:"replace",value:function(D){a(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,D),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(U){var F=f.default.find(U);F==null?U.parentNode.removeChild(U):F instanceof f.default.Embed?F.remove():F.unwrap()})}}],[{key:"create",value:function(D){var U=a(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,D);return U.setAttribute("spellcheck",!1),U}},{key:"formats",value:function(){return!0}}]),O}(p.default);R.blotName="code-block",R.tagName="PRE",R.TAB="  ",r.Code=L,r.default=R},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},o=function(){function ee(Y,V){var X=[],re=!0,oe=!1,fe=void 0;try{for(var te=Y[Symbol.iterator](),ue;!(re=(ue=te.next()).done)&&(X.push(ue.value),!(V&&X.length===V));re=!0);}catch(ye){oe=!0,fe=ye}finally{try{!re&&te.return&&te.return()}finally{if(oe)throw fe}}return X}return function(Y,V){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return ee(Y,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function ee(Y,V){for(var X=0;X<V.length;X++){var re=V[X];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,V,X){return V&&ee(Y.prototype,V),X&&ee(Y,X),Y}}(),l=i(2),u=U(l),c=i(20),f=U(c),h=i(0),p=U(h),g=i(13),w=U(g),_=i(24),v=U(_),A=i(4),S=U(A),b=i(16),C=U(b),L=i(21),R=U(L),k=i(11),O=U(k),M=i(3),D=U(M);function U(ee){return ee&&ee.__esModule?ee:{default:ee}}function F(ee,Y,V){return Y in ee?Object.defineProperty(ee,Y,{value:V,enumerable:!0,configurable:!0,writable:!0}):ee[Y]=V,ee}function $(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}var Z=/^[ -~]*$/,se=function(){function ee(Y){$(this,ee),this.scroll=Y,this.delta=this.getDelta()}return a(ee,[{key:"applyDelta",value:function(V){var X=this,re=!1;this.scroll.update();var oe=this.scroll.length();return this.scroll.batchStart(),V=Q(V),V.reduce(function(fe,te){var ue=te.retain||te.delete||te.insert.length||1,ye=te.attributes||{};if(te.insert!=null){if(typeof te.insert=="string"){var xe=te.insert;xe.endsWith(`
`)&&re&&(re=!1,xe=xe.slice(0,-1)),fe>=oe&&!xe.endsWith(`
`)&&(re=!0),X.scroll.insertAt(fe,xe);var Te=X.scroll.line(fe),$e=o(Te,2),De=$e[0],Be=$e[1],he=(0,D.default)({},(0,A.bubbleFormats)(De));if(De instanceof S.default){var rt=De.descendant(p.default.Leaf,Be),Je=o(rt,1),nt=Je[0];he=(0,D.default)(he,(0,A.bubbleFormats)(nt))}ye=f.default.attributes.diff(he,ye)||{}}else if(s(te.insert)==="object"){var we=Object.keys(te.insert)[0];if(we==null)return fe;X.scroll.insertAt(fe,we,te.insert[we])}oe+=ue}return Object.keys(ye).forEach(function(Pe){X.scroll.formatAt(fe,ue,Pe,ye[Pe])}),fe+ue},0),V.reduce(function(fe,te){return typeof te.delete=="number"?(X.scroll.deleteAt(fe,te.delete),fe):fe+(te.retain||te.insert.length||1)},0),this.scroll.batchEnd(),this.update(V)}},{key:"deleteText",value:function(V,X){return this.scroll.deleteAt(V,X),this.update(new u.default().retain(V).delete(X))}},{key:"formatLine",value:function(V,X){var re=this,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(oe).forEach(function(fe){if(!(re.scroll.whitelist!=null&&!re.scroll.whitelist[fe])){var te=re.scroll.lines(V,Math.max(X,1)),ue=X;te.forEach(function(ye){var xe=ye.length();if(!(ye instanceof w.default))ye.format(fe,oe[fe]);else{var Te=V-ye.offset(re.scroll),$e=ye.newlineIndex(Te+ue)-Te+1;ye.formatAt(Te,$e,fe,oe[fe])}ue-=xe})}}),this.scroll.optimize(),this.update(new u.default().retain(V).retain(X,(0,R.default)(oe)))}},{key:"formatText",value:function(V,X){var re=this,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(oe).forEach(function(fe){re.scroll.formatAt(V,X,fe,oe[fe])}),this.update(new u.default().retain(V).retain(X,(0,R.default)(oe)))}},{key:"getContents",value:function(V,X){return this.delta.slice(V,V+X)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(V,X){return V.concat(X.delta())},new u.default)}},{key:"getFormat",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,re=[],oe=[];X===0?this.scroll.path(V).forEach(function(te){var ue=o(te,1),ye=ue[0];ye instanceof S.default?re.push(ye):ye instanceof p.default.Leaf&&oe.push(ye)}):(re=this.scroll.lines(V,X),oe=this.scroll.descendants(p.default.Leaf,V,X));var fe=[re,oe].map(function(te){if(te.length===0)return{};for(var ue=(0,A.bubbleFormats)(te.shift());Object.keys(ue).length>0;){var ye=te.shift();if(ye==null)return ue;ue=ce((0,A.bubbleFormats)(ye),ue)}return ue});return D.default.apply(D.default,fe)}},{key:"getText",value:function(V,X){return this.getContents(V,X).filter(function(re){return typeof re.insert=="string"}).map(function(re){return re.insert}).join("")}},{key:"insertEmbed",value:function(V,X,re){return this.scroll.insertAt(V,X,re),this.update(new u.default().retain(V).insert(F({},X,re)))}},{key:"insertText",value:function(V,X){var re=this,oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return X=X.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(V,X),Object.keys(oe).forEach(function(fe){re.scroll.formatAt(V,X.length,fe,oe[fe])}),this.update(new u.default().retain(V).insert(X,(0,R.default)(oe)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var V=this.scroll.children.head;return V.statics.blotName!==S.default.blotName||V.children.length>1?!1:V.children.head instanceof C.default}},{key:"removeFormat",value:function(V,X){var re=this.getText(V,X),oe=this.scroll.line(V+X),fe=o(oe,2),te=fe[0],ue=fe[1],ye=0,xe=new u.default;te!=null&&(te instanceof w.default?ye=te.newlineIndex(ue)-ue+1:ye=te.length()-ue,xe=te.delta().slice(ue,ue+ye-1).insert(`
`));var Te=this.getContents(V,X+ye),$e=Te.diff(new u.default().insert(re).concat(xe)),De=new u.default().retain(V).concat($e);return this.applyDelta(De)}},{key:"update",value:function(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,oe=this.delta;if(X.length===1&&X[0].type==="characterData"&&X[0].target.data.match(Z)&&p.default.find(X[0].target)){var fe=p.default.find(X[0].target),te=(0,A.bubbleFormats)(fe),ue=fe.offset(this.scroll),ye=X[0].oldValue.replace(v.default.CONTENTS,""),xe=new u.default().insert(ye),Te=new u.default().insert(fe.value()),$e=new u.default().retain(ue).concat(xe.diff(Te,re));V=$e.reduce(function(De,Be){return Be.insert?De.insert(Be.insert,te):De.push(Be)},new u.default),this.delta=oe.compose(V)}else this.delta=this.getDelta(),(!V||!(0,O.default)(oe.compose(V),this.delta))&&(V=oe.diff(this.delta,re));return V}}]),ee}();function ce(ee,Y){return Object.keys(Y).reduce(function(V,X){return ee[X]==null||(Y[X]===ee[X]?V[X]=Y[X]:Array.isArray(Y[X])?Y[X].indexOf(ee[X])<0&&(V[X]=Y[X].concat([ee[X]])):V[X]=[Y[X],ee[X]]),V},{})}function Q(ee){return ee.reduce(function(Y,V){if(V.insert===1){var X=(0,R.default)(V.attributes);return delete X.image,Y.insert({image:V.attributes.image},X)}if(V.attributes!=null&&(V.attributes.list===!0||V.attributes.bullet===!0)&&(V=(0,R.default)(V),V.attributes.list?V.attributes.list="ordered":(V.attributes.list="bullet",delete V.attributes.bullet)),typeof V.insert=="string"){var re=V.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return Y.insert(re,V.attributes)}return Y.push(V)},new u.default)}r.default=se},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var s=function(){function k(O,M){var D=[],U=!0,F=!1,$=void 0;try{for(var Z=O[Symbol.iterator](),se;!(U=(se=Z.next()).done)&&(D.push(se.value),!(M&&D.length===M));U=!0);}catch(ce){F=!0,$=ce}finally{try{!U&&Z.return&&Z.return()}finally{if(F)throw $}}return D}return function(O,M){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return k(O,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function k(O,M){for(var D=0;D<M.length;D++){var U=M[D];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,M,D){return M&&k(O.prototype,M),D&&k(O,D),O}}(),a=i(0),l=v(a),u=i(21),c=v(u),f=i(11),h=v(f),p=i(8),g=v(p),w=i(10),_=v(w);function v(k){return k&&k.__esModule?k:{default:k}}function A(k){if(Array.isArray(k)){for(var O=0,M=Array(k.length);O<k.length;O++)M[O]=k[O];return M}else return Array.from(k)}function S(k,O){if(!(k instanceof O))throw new TypeError("Cannot call a class as a function")}var b=(0,_.default)("quill:selection"),C=function k(O){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;S(this,k),this.index=O,this.length=M},L=function(){function k(O,M){var D=this;S(this,k),this.emitter=M,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new C(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){D.mouseDown||setTimeout(D.update.bind(D,g.default.sources.USER),1)}),this.emitter.on(g.default.events.EDITOR_CHANGE,function(U,F){U===g.default.events.TEXT_CHANGE&&F.length()>0&&D.update(g.default.sources.SILENT)}),this.emitter.on(g.default.events.SCROLL_BEFORE_UPDATE,function(){if(D.hasFocus()){var U=D.getNativeRange();U!=null&&U.start.node!==D.cursor.textNode&&D.emitter.once(g.default.events.SCROLL_UPDATE,function(){try{D.setNativeRange(U.start.node,U.start.offset,U.end.node,U.end.offset)}catch{}})}}),this.emitter.on(g.default.events.SCROLL_OPTIMIZE,function(U,F){if(F.range){var $=F.range,Z=$.startNode,se=$.startOffset,ce=$.endNode,Q=$.endOffset;D.setNativeRange(Z,se,ce,Q)}}),this.update(g.default.sources.SILENT)}return o(k,[{key:"handleComposition",value:function(){var M=this;this.root.addEventListener("compositionstart",function(){M.composing=!0}),this.root.addEventListener("compositionend",function(){if(M.composing=!1,M.cursor.parent){var D=M.cursor.restore();if(!D)return;setTimeout(function(){M.setNativeRange(D.startNode,D.startOffset,D.endNode,D.endOffset)},1)}})}},{key:"handleDragging",value:function(){var M=this;this.emitter.listenDOM("mousedown",document.body,function(){M.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){M.mouseDown=!1,M.update(g.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(M,D){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[M])){this.scroll.update();var U=this.getNativeRange();if(!(U==null||!U.native.collapsed||l.default.query(M,l.default.Scope.BLOCK))){if(U.start.node!==this.cursor.textNode){var F=l.default.find(U.start.node,!1);if(F==null)return;if(F instanceof l.default.Leaf){var $=F.split(U.start.offset);F.parent.insertBefore(this.cursor,$)}else F.insertBefore(this.cursor,U.start.node);this.cursor.attach()}this.cursor.format(M,D),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,U=this.scroll.length();M=Math.min(M,U-1),D=Math.min(M+D,U-1)-M;var F=void 0,$=this.scroll.leaf(M),Z=s($,2),se=Z[0],ce=Z[1];if(se==null)return null;var Q=se.position(ce,!0),ee=s(Q,2);F=ee[0],ce=ee[1];var Y=document.createRange();if(D>0){Y.setStart(F,ce);var V=this.scroll.leaf(M+D),X=s(V,2);if(se=X[0],ce=X[1],se==null)return null;var re=se.position(ce,!0),oe=s(re,2);return F=oe[0],ce=oe[1],Y.setEnd(F,ce),Y.getBoundingClientRect()}else{var fe="left",te=void 0;return F instanceof Text?(ce<F.data.length?(Y.setStart(F,ce),Y.setEnd(F,ce+1)):(Y.setStart(F,ce-1),Y.setEnd(F,ce),fe="right"),te=Y.getBoundingClientRect()):(te=se.domNode.getBoundingClientRect(),ce>0&&(fe="right")),{bottom:te.top+te.height,height:te.height,left:te[fe],right:te[fe],top:te.top,width:0}}}},{key:"getNativeRange",value:function(){var M=document.getSelection();if(M==null||M.rangeCount<=0)return null;var D=M.getRangeAt(0);if(D==null)return null;var U=this.normalizeNative(D);return b.info("getNativeRange",U),U}},{key:"getRange",value:function(){var M=this.getNativeRange();if(M==null)return[null,null];var D=this.normalizedToRange(M);return[D,M]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(M){var D=this,U=[[M.start.node,M.start.offset]];M.native.collapsed||U.push([M.end.node,M.end.offset]);var F=U.map(function(se){var ce=s(se,2),Q=ce[0],ee=ce[1],Y=l.default.find(Q,!0),V=Y.offset(D.scroll);return ee===0?V:Y instanceof l.default.Container?V+Y.length():V+Y.index(Q,ee)}),$=Math.min(Math.max.apply(Math,A(F)),this.scroll.length()-1),Z=Math.min.apply(Math,[$].concat(A(F)));return new C(Z,$-Z)}},{key:"normalizeNative",value:function(M){if(!R(this.root,M.startContainer)||!M.collapsed&&!R(this.root,M.endContainer))return null;var D={start:{node:M.startContainer,offset:M.startOffset},end:{node:M.endContainer,offset:M.endOffset},native:M};return[D.start,D.end].forEach(function(U){for(var F=U.node,$=U.offset;!(F instanceof Text)&&F.childNodes.length>0;)if(F.childNodes.length>$)F=F.childNodes[$],$=0;else if(F.childNodes.length===$)F=F.lastChild,$=F instanceof Text?F.data.length:F.childNodes.length+1;else break;U.node=F,U.offset=$}),D}},{key:"rangeToNative",value:function(M){var D=this,U=M.collapsed?[M.index]:[M.index,M.index+M.length],F=[],$=this.scroll.length();return U.forEach(function(Z,se){Z=Math.min($-1,Z);var ce=void 0,Q=D.scroll.leaf(Z),ee=s(Q,2),Y=ee[0],V=ee[1],X=Y.position(V,se!==0),re=s(X,2);ce=re[0],V=re[1],F.push(ce,V)}),F.length<2&&(F=F.concat(F)),F}},{key:"scrollIntoView",value:function(M){var D=this.lastRange;if(D!=null){var U=this.getBounds(D.index,D.length);if(U!=null){var F=this.scroll.length()-1,$=this.scroll.line(Math.min(D.index,F)),Z=s($,1),se=Z[0],ce=se;if(D.length>0){var Q=this.scroll.line(Math.min(D.index+D.length,F)),ee=s(Q,1);ce=ee[0]}if(!(se==null||ce==null)){var Y=M.getBoundingClientRect();U.top<Y.top?M.scrollTop-=Y.top-U.top:U.bottom>Y.bottom&&(M.scrollTop+=U.bottom-Y.bottom)}}}}},{key:"setNativeRange",value:function(M,D){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M,F=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D,$=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(b.info("setNativeRange",M,D,U,F),!(M!=null&&(this.root.parentNode==null||M.parentNode==null||U.parentNode==null))){var Z=document.getSelection();if(Z!=null)if(M!=null){this.hasFocus()||this.root.focus();var se=(this.getNativeRange()||{}).native;if(se==null||$||M!==se.startContainer||D!==se.startOffset||U!==se.endContainer||F!==se.endOffset){M.tagName=="BR"&&(D=[].indexOf.call(M.parentNode.childNodes,M),M=M.parentNode),U.tagName=="BR"&&(F=[].indexOf.call(U.parentNode.childNodes,U),U=U.parentNode);var ce=document.createRange();ce.setStart(M,D),ce.setEnd(U,F),Z.removeAllRanges(),Z.addRange(ce)}}else Z.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(M){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof D=="string"&&(U=D,D=!1),b.info("setRange",M),M!=null){var F=this.rangeToNative(M);this.setNativeRange.apply(this,A(F).concat([D]))}else this.setNativeRange(null);this.update(U)}},{key:"update",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.default.sources.USER,D=this.lastRange,U=this.getRange(),F=s(U,2),$=F[0],Z=F[1];if(this.lastRange=$,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,h.default)(D,this.lastRange)){var se;!this.composing&&Z!=null&&Z.native.collapsed&&Z.start.node!==this.cursor.textNode&&this.cursor.restore();var ce=[g.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(D),M];if((se=this.emitter).emit.apply(se,[g.default.events.EDITOR_CHANGE].concat(ce)),M!==g.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,ce)}}}}]),k}();function R(k,O){try{O.parentNode}catch{return!1}return O instanceof Text&&(O=O.parentNode),k.contains(O)}r.Range=C,r.default=L},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(w,_){for(var v=0;v<_.length;v++){var A=_[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,_,v){return _&&g(w.prototype,_),v&&g(w,v),w}}(),o=function g(w,_,v){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,_);if(A===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,_,v)}else{if("value"in A)return A.value;var b=A.get;return b===void 0?void 0:b.call(v)}},a=i(0),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(){return c(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"insertInto",value:function(v,A){v.children.length===0?o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertInto",this).call(this,v,A):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),w}(l.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(t,r,i){var s=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){f(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(44),a=i(30),l=i(1),u=function(f){s(h,f);function h(p){var g=f.call(this,p)||this;return g.build(),g}return h.prototype.appendChild=function(p){this.insertBefore(p)},h.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},h.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(g){try{var w=c(g);p.insertBefore(w,p.children.head||void 0)}catch(_){if(_ instanceof l.ParchmentError)return;throw _}})},h.prototype.deleteAt=function(p,g){if(p===0&&g===this.length())return this.remove();this.children.forEachAt(p,g,function(w,_,v){w.deleteAt(_,v)})},h.prototype.descendant=function(p,g){var w=this.children.find(g),_=w[0],v=w[1];return p.blotName==null&&p(_)||p.blotName!=null&&_ instanceof p?[_,v]:_ instanceof h?_.descendant(p,v):[null,-1]},h.prototype.descendants=function(p,g,w){g===void 0&&(g=0),w===void 0&&(w=Number.MAX_VALUE);var _=[],v=w;return this.children.forEachAt(g,w,function(A,S,b){(p.blotName==null&&p(A)||p.blotName!=null&&A instanceof p)&&_.push(A),A instanceof h&&(_=_.concat(A.descendants(p,S,v))),v-=b}),_},h.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),f.prototype.detach.call(this)},h.prototype.formatAt=function(p,g,w,_){this.children.forEachAt(p,g,function(v,A,S){v.formatAt(A,S,w,_)})},h.prototype.insertAt=function(p,g,w){var _=this.children.find(p),v=_[0],A=_[1];if(v)v.insertAt(A,g,w);else{var S=w==null?l.create("text",g):l.create(g,w);this.appendChild(S)}},h.prototype.insertBefore=function(p,g){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(w){return p instanceof w}))throw new l.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,g)},h.prototype.length=function(){return this.children.reduce(function(p,g){return p+g.length()},0)},h.prototype.moveChildren=function(p,g){this.children.forEach(function(w){p.insertBefore(w,g)})},h.prototype.optimize=function(p){if(f.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var g=l.create(this.statics.defaultChild);this.appendChild(g),g.optimize(p)}else this.remove()},h.prototype.path=function(p,g){g===void 0&&(g=!1);var w=this.children.find(p,g),_=w[0],v=w[1],A=[[this,p]];return _ instanceof h?A.concat(_.path(v,g)):(_!=null&&A.push([_,v]),A)},h.prototype.removeChild=function(p){this.children.remove(p)},h.prototype.replace=function(p){p instanceof h&&p.moveChildren(this),f.prototype.replace.call(this,p)},h.prototype.split=function(p,g){if(g===void 0&&(g=!1),!g){if(p===0)return this;if(p===this.length())return this.next}var w=this.clone();return this.parent.insertBefore(w,this.next),this.children.forEachAt(p,this.length(),function(_,v,A){_=_.split(v,g),w.appendChild(_)}),w},h.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},h.prototype.update=function(p,g){var w=this,_=[],v=[];p.forEach(function(A){A.target===w.domNode&&A.type==="childList"&&(_.push.apply(_,A.addedNodes),v.push.apply(v,A.removedNodes))}),v.forEach(function(A){if(!(A.parentNode!=null&&A.tagName!=="IFRAME"&&document.body.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var S=l.find(A);S!=null&&(S.domNode.parentNode==null||S.domNode.parentNode===w.domNode)&&S.detach()}}),_.filter(function(A){return A.parentNode==w.domNode}).sort(function(A,S){return A===S?0:A.compareDocumentPosition(S)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(A){var S=null;A.nextSibling!=null&&(S=l.find(A.nextSibling));var b=c(A);(b.next!=S||b.next==null)&&(b.parent!=null&&b.parent.removeChild(w),w.insertBefore(b,S||void 0))})},h}(a.default);function c(f){var h=l.find(f);if(h==null)try{h=l.create(f)}catch{h=l.create(l.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(g){h.domNode.appendChild(g)}),f.parentNode&&f.parentNode.replaceChild(h.domNode,f),h.attach()}return h}r.default=u},function(t,r,i){var s=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){f(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),a=i(31),l=i(17),u=i(1),c=function(f){s(h,f);function h(p){var g=f.call(this,p)||this;return g.attributes=new a.default(g.domNode),g}return h.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},h.prototype.format=function(p,g){var w=u.query(p);w instanceof o.default?this.attributes.attribute(w,g):g&&w!=null&&(p!==this.statics.blotName||this.formats()[p]!==g)&&this.replaceWith(p,g)},h.prototype.formats=function(){var p=this.attributes.values(),g=this.statics.formats(this.domNode);return g!=null&&(p[this.statics.blotName]=g),p},h.prototype.replaceWith=function(p,g){var w=f.prototype.replaceWith.call(this,p,g);return this.attributes.copy(w),w},h.prototype.update=function(p,g){var w=this;f.prototype.update.call(this,p,g),p.some(function(_){return _.target===w.domNode&&_.type==="attributes"})&&this.attributes.build()},h.prototype.wrap=function(p,g){var w=f.prototype.wrap.call(this,p,g);return w instanceof h&&w.statics.scope===this.statics.scope&&this.attributes.move(w),w},h}(l.default);r.default=c},function(t,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};return function(c,f){u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(30),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(f){return!0},c.prototype.index=function(f,h){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(h,1):-1},c.prototype.position=function(f,h){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(p+=1),[this.parent.domNode,p]},c.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(t,r,i){var s=i(11),o=i(3),a={attributes:{compose:function(u,c,f){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=o(!0,{},c);f||(h=Object.keys(h).reduce(function(g,w){return h[w]!=null&&(g[w]=h[w]),g},{}));for(var p in u)u[p]!==void 0&&c[p]===void 0&&(h[p]=u[p]);return Object.keys(h).length>0?h:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var f=Object.keys(u).concat(Object.keys(c)).reduce(function(h,p){return s(u[p],c[p])||(h[p]=c[p]===void 0?null:c[p]),h},{});return Object.keys(f).length>0?f:void 0},transform:function(u,c,f){if(typeof u!="object")return c;if(typeof c=="object"){if(!f)return c;var h=Object.keys(c).reduce(function(p,g){return u[g]===void 0&&(p[g]=c[g]),p},{});return Object.keys(h).length>0?h:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var f=this.offset,h=a.length(c);if(u>=h-f?(u=h-f,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var p={};return c.attributes&&(p.attributes=c.attributes),typeof c.retain=="number"?p.retain=u:typeof c.insert=="string"?p.insert=c.insert.substr(f,u):p.insert=c.insert,p}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,f=this.next(),h=this.ops.slice(this.index);return this.offset=u,this.index=c,[f].concat(h)}else return[]},t.exports=a},function(t,r){var i=function(){function s(w,_){return _!=null&&w instanceof _}var o;try{o=Map}catch{o=function(){}}var a;try{a=Set}catch{a=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(w,_,v,A,S){typeof _=="object"&&(v=_.depth,A=_.prototype,S=_.includeNonEnumerable,_=_.circular);var b=[],C=[],L=typeof Buffer<"u";typeof _>"u"&&(_=!0),typeof v>"u"&&(v=1/0);function R(k,O){if(k===null)return null;if(O===0)return k;var M,D;if(typeof k!="object")return k;if(s(k,o))M=new o;else if(s(k,a))M=new a;else if(s(k,l))M=new l(function(Y,V){k.then(function(X){Y(R(X,O-1))},function(X){V(R(X,O-1))})});else if(u.__isArray(k))M=[];else if(u.__isRegExp(k))M=new RegExp(k.source,g(k)),k.lastIndex&&(M.lastIndex=k.lastIndex);else if(u.__isDate(k))M=new Date(k.getTime());else{if(L&&Buffer.isBuffer(k))return Buffer.allocUnsafe?M=Buffer.allocUnsafe(k.length):M=new Buffer(k.length),k.copy(M),M;s(k,Error)?M=Object.create(k):typeof A>"u"?(D=Object.getPrototypeOf(k),M=Object.create(D)):(M=Object.create(A),D=A)}if(_){var U=b.indexOf(k);if(U!=-1)return C[U];b.push(k),C.push(M)}s(k,o)&&k.forEach(function(Y,V){var X=R(V,O-1),re=R(Y,O-1);M.set(X,re)}),s(k,a)&&k.forEach(function(Y){var V=R(Y,O-1);M.add(V)});for(var F in k){var $;D&&($=Object.getOwnPropertyDescriptor(D,F)),!($&&$.set==null)&&(M[F]=R(k[F],O-1))}if(Object.getOwnPropertySymbols)for(var Z=Object.getOwnPropertySymbols(k),F=0;F<Z.length;F++){var se=Z[F],ce=Object.getOwnPropertyDescriptor(k,se);ce&&!ce.enumerable&&!S||(M[se]=R(k[se],O-1),ce.enumerable||Object.defineProperty(M,se,{enumerable:!1}))}if(S)for(var Q=Object.getOwnPropertyNames(k),F=0;F<Q.length;F++){var ee=Q[F],ce=Object.getOwnPropertyDescriptor(k,ee);ce&&ce.enumerable||(M[ee]=R(k[ee],O-1),Object.defineProperty(M,ee,{enumerable:!1}))}return M}return R(w,v)}u.clonePrototype=function(_){if(_===null)return null;var v=function(){};return v.prototype=_,new v};function c(w){return Object.prototype.toString.call(w)}u.__objToStr=c;function f(w){return typeof w=="object"&&c(w)==="[object Date]"}u.__isDate=f;function h(w){return typeof w=="object"&&c(w)==="[object Array]"}u.__isArray=h;function p(w){return typeof w=="object"&&c(w)==="[object RegExp]"}u.__isRegExp=p;function g(w){var _="";return w.global&&(_+="g"),w.ignoreCase&&(_+="i"),w.multiline&&(_+="m"),_}return u.__getRegExpFlags=g,u}();typeof t=="object"&&t.exports&&(t.exports=i)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function M(D,U){var F=[],$=!0,Z=!1,se=void 0;try{for(var ce=D[Symbol.iterator](),Q;!($=(Q=ce.next()).done)&&(F.push(Q.value),!(U&&F.length===U));$=!0);}catch(ee){Z=!0,se=ee}finally{try{!$&&ce.return&&ce.return()}finally{if(Z)throw se}}return F}return function(D,U){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function M(D,U){for(var F=0;F<U.length;F++){var $=U[F];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(D,$.key,$)}}return function(D,U,F){return U&&M(D.prototype,U),F&&M(D,F),D}}(),a=function M(D,U,F){D===null&&(D=Function.prototype);var $=Object.getOwnPropertyDescriptor(D,U);if($===void 0){var Z=Object.getPrototypeOf(D);return Z===null?void 0:M(Z,U,F)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(F)}},l=i(0),u=b(l),c=i(8),f=b(c),h=i(4),p=b(h),g=i(16),w=b(g),_=i(13),v=b(_),A=i(25),S=b(A);function b(M){return M&&M.__esModule?M:{default:M}}function C(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function L(M,D){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:M}function R(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(M,D):M.__proto__=D)}function k(M){return M instanceof p.default||M instanceof h.BlockEmbed}var O=function(M){R(D,M);function D(U,F){C(this,D);var $=L(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U));return $.emitter=F.emitter,Array.isArray(F.whitelist)&&($.whitelist=F.whitelist.reduce(function(Z,se){return Z[se]=!0,Z},{})),$.domNode.addEventListener("DOMNodeInserted",function(){}),$.optimize(),$.enable(),$}return o(D,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(F,$){var Z=this.line(F),se=s(Z,2),ce=se[0],Q=se[1],ee=this.line(F+$),Y=s(ee,1),V=Y[0];if(a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,F,$),V!=null&&ce!==V&&Q>0){if(ce instanceof h.BlockEmbed||V instanceof h.BlockEmbed){this.optimize();return}if(ce instanceof v.default){var X=ce.newlineIndex(ce.length(),!0);if(X>-1&&(ce=ce.split(X+1),ce===V)){this.optimize();return}}else if(V instanceof v.default){var re=V.newlineIndex(0);re>-1&&V.split(re+1)}var oe=V.children.head instanceof w.default?null:V.children.head;ce.moveChildren(V,oe),ce.remove()}this.optimize()}},{key:"enable",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",F)}},{key:"formatAt",value:function(F,$,Z,se){this.whitelist!=null&&!this.whitelist[Z]||(a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,F,$,Z,se),this.optimize())}},{key:"insertAt",value:function(F,$,Z){if(!(Z!=null&&this.whitelist!=null&&!this.whitelist[$])){if(F>=this.length())if(Z==null||u.default.query($,u.default.Scope.BLOCK)==null){var se=u.default.create(this.statics.defaultChild);this.appendChild(se),Z==null&&$.endsWith(`
`)&&($=$.slice(0,-1)),se.insertAt(0,$,Z)}else{var ce=u.default.create($,Z);this.appendChild(ce)}else a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,F,$,Z);this.optimize()}}},{key:"insertBefore",value:function(F,$){if(F.statics.scope===u.default.Scope.INLINE_BLOT){var Z=u.default.create(this.statics.defaultChild);Z.appendChild(F),F=Z}a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,F,$)}},{key:"leaf",value:function(F){return this.path(F).pop()||[null,-1]}},{key:"line",value:function(F){return F===this.length()?this.line(F-1):this.descendant(k,F)}},{key:"lines",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,Z=function se(ce,Q,ee){var Y=[],V=ee;return ce.children.forEachAt(Q,ee,function(X,re,oe){k(X)?Y.push(X):X instanceof u.default.Container&&(Y=Y.concat(se(X,re,V))),V-=oe}),Y};return Z(this,F,$)}},{key:"optimize",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,F,$),F.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,F,$))}},{key:"path",value:function(F){return a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,F).slice(1)}},{key:"update",value:function(F){if(this.batch!==!0){var $=f.default.sources.USER;typeof F=="string"&&($=F),Array.isArray(F)||(F=this.observer.takeRecords()),F.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,$,F),a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"update",this).call(this,F.concat([])),F.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,$,F)}}}]),D}(u.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[p.default,h.BlockEmbed,S.default],r.default=O},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te},o=function(){function te(ue,ye){var xe=[],Te=!0,$e=!1,De=void 0;try{for(var Be=ue[Symbol.iterator](),he;!(Te=(he=Be.next()).done)&&(xe.push(he.value),!(ye&&xe.length===ye));Te=!0);}catch(rt){$e=!0,De=rt}finally{try{!Te&&Be.return&&Be.return()}finally{if($e)throw De}}return xe}return function(ue,ye){if(Array.isArray(ue))return ue;if(Symbol.iterator in Object(ue))return te(ue,ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function te(ue,ye){for(var xe=0;xe<ye.length;xe++){var Te=ye[xe];Te.enumerable=Te.enumerable||!1,Te.configurable=!0,"value"in Te&&(Te.writable=!0),Object.defineProperty(ue,Te.key,Te)}}return function(ue,ye,xe){return ye&&te(ue.prototype,ye),xe&&te(ue,xe),ue}}(),l=i(21),u=M(l),c=i(11),f=M(c),h=i(3),p=M(h),g=i(2),w=M(g),_=i(20),v=M(_),A=i(0),S=M(A),b=i(5),C=M(b),L=i(10),R=M(L),k=i(9),O=M(k);function M(te){return te&&te.__esModule?te:{default:te}}function D(te,ue,ye){return ue in te?Object.defineProperty(te,ue,{value:ye,enumerable:!0,configurable:!0,writable:!0}):te[ue]=ye,te}function U(te,ue){if(!(te instanceof ue))throw new TypeError("Cannot call a class as a function")}function F(te,ue){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ue&&(typeof ue=="object"||typeof ue=="function")?ue:te}function $(te,ue){if(typeof ue!="function"&&ue!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ue);te.prototype=Object.create(ue&&ue.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ue&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ue):te.__proto__=ue)}var Z=(0,R.default)("quill:keyboard"),se=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",ce=function(te){$(ue,te),a(ue,null,[{key:"match",value:function(xe,Te){return Te=fe(Te),["altKey","ctrlKey","metaKey","shiftKey"].some(function($e){return!!Te[$e]!==xe[$e]&&Te[$e]!==null})?!1:Te.key===(xe.which||xe.keyCode)}}]);function ue(ye,xe){U(this,ue);var Te=F(this,(ue.__proto__||Object.getPrototypeOf(ue)).call(this,ye,xe));return Te.bindings={},Object.keys(Te.options.bindings).forEach(function($e){$e==="list autofill"&&ye.scroll.whitelist!=null&&!ye.scroll.whitelist.list||Te.options.bindings[$e]&&Te.addBinding(Te.options.bindings[$e])}),Te.addBinding({key:ue.keys.ENTER,shiftKey:null},X),Te.addBinding({key:ue.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Te.addBinding({key:ue.keys.BACKSPACE},{collapsed:!0},ee),Te.addBinding({key:ue.keys.DELETE},{collapsed:!0},Y)):(Te.addBinding({key:ue.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},ee),Te.addBinding({key:ue.keys.DELETE},{collapsed:!0,suffix:/^.?$/},Y)),Te.addBinding({key:ue.keys.BACKSPACE},{collapsed:!1},V),Te.addBinding({key:ue.keys.DELETE},{collapsed:!1},V),Te.addBinding({key:ue.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},ee),Te.listen(),Te}return a(ue,[{key:"addBinding",value:function(xe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},De=fe(xe);if(De==null||De.key==null)return Z.warn("Attempted to add invalid keyboard binding",De);typeof Te=="function"&&(Te={handler:Te}),typeof $e=="function"&&($e={handler:$e}),De=(0,p.default)(De,Te,$e),this.bindings[De.key]=this.bindings[De.key]||[],this.bindings[De.key].push(De)}},{key:"listen",value:function(){var xe=this;this.quill.root.addEventListener("keydown",function(Te){if(!Te.defaultPrevented){var $e=Te.which||Te.keyCode,De=(xe.bindings[$e]||[]).filter(function(yt){return ue.match(Te,yt)});if(De.length!==0){var Be=xe.quill.getSelection();if(!(Be==null||!xe.quill.hasFocus())){var he=xe.quill.getLine(Be.index),rt=o(he,2),Je=rt[0],nt=rt[1],we=xe.quill.getLeaf(Be.index),Pe=o(we,2),Le=Pe[0],ie=Pe[1],q=Be.length===0?[Le,ie]:xe.quill.getLeaf(Be.index+Be.length),me=o(q,2),de=me[0],ve=me[1],Ae=Le instanceof S.default.Text?Le.value().slice(0,ie):"",He=de instanceof S.default.Text?de.value().slice(ve):"",qe={collapsed:Be.length===0,empty:Be.length===0&&Je.length()<=1,format:xe.quill.getFormat(Be),offset:nt,prefix:Ae,suffix:He},lt=De.some(function(yt){if(yt.collapsed!=null&&yt.collapsed!==qe.collapsed||yt.empty!=null&&yt.empty!==qe.empty||yt.offset!=null&&yt.offset!==qe.offset)return!1;if(Array.isArray(yt.format)){if(yt.format.every(function(Ye){return qe.format[Ye]==null}))return!1}else if(s(yt.format)==="object"&&!Object.keys(yt.format).every(function(Ye){return yt.format[Ye]===!0?qe.format[Ye]!=null:yt.format[Ye]===!1?qe.format[Ye]==null:(0,f.default)(yt.format[Ye],qe.format[Ye])}))return!1;return yt.prefix!=null&&!yt.prefix.test(qe.prefix)||yt.suffix!=null&&!yt.suffix.test(qe.suffix)?!1:yt.handler.call(xe,Be,qe)!==!0});lt&&Te.preventDefault()}}}})}}]),ue}(O.default);ce.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},ce.DEFAULTS={bindings:{bold:oe("bold"),italic:oe("italic"),underline:oe("underline"),indent:{key:ce.keys.TAB,format:["blockquote","indent","list"],handler:function(ue,ye){if(ye.collapsed&&ye.offset!==0)return!0;this.quill.format("indent","+1",C.default.sources.USER)}},outdent:{key:ce.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ue,ye){if(ye.collapsed&&ye.offset!==0)return!0;this.quill.format("indent","-1",C.default.sources.USER)}},"outdent backspace":{key:ce.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ue,ye){ye.format.indent!=null?this.quill.format("indent","-1",C.default.sources.USER):ye.format.list!=null&&this.quill.format("list",!1,C.default.sources.USER)}},"indent code-block":re(!0),"outdent code-block":re(!1),"remove tab":{key:ce.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ue){this.quill.deleteText(ue.index-1,1,C.default.sources.USER)}},tab:{key:ce.keys.TAB,handler:function(ue){this.quill.history.cutoff();var ye=new w.default().retain(ue.index).delete(ue.length).insert("	");this.quill.updateContents(ye,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ue.index+1,C.default.sources.SILENT)}},"list empty enter":{key:ce.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ue,ye){this.quill.format("list",!1,C.default.sources.USER),ye.format.indent&&this.quill.format("indent",!1,C.default.sources.USER)}},"checklist enter":{key:ce.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ue){var ye=this.quill.getLine(ue.index),xe=o(ye,2),Te=xe[0],$e=xe[1],De=(0,p.default)({},Te.formats(),{list:"checked"}),Be=new w.default().retain(ue.index).insert(`
`,De).retain(Te.length()-$e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Be,C.default.sources.USER),this.quill.setSelection(ue.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:ce.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ue,ye){var xe=this.quill.getLine(ue.index),Te=o(xe,2),$e=Te[0],De=Te[1],Be=new w.default().retain(ue.index).insert(`
`,ye.format).retain($e.length()-De-1).retain(1,{header:null});this.quill.updateContents(Be,C.default.sources.USER),this.quill.setSelection(ue.index+1,C.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ue,ye){var xe=ye.prefix.length,Te=this.quill.getLine(ue.index),$e=o(Te,2),De=$e[0],Be=$e[1];if(Be>xe)return!0;var he=void 0;switch(ye.prefix.trim()){case"[]":case"[ ]":he="unchecked";break;case"[x]":he="checked";break;case"-":case"*":he="bullet";break;default:he="ordered"}this.quill.insertText(ue.index," ",C.default.sources.USER),this.quill.history.cutoff();var rt=new w.default().retain(ue.index-Be).delete(xe+1).retain(De.length()-2-Be).retain(1,{list:he});this.quill.updateContents(rt,C.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ue.index-xe,C.default.sources.SILENT)}},"code exit":{key:ce.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ue){var ye=this.quill.getLine(ue.index),xe=o(ye,2),Te=xe[0],$e=xe[1],De=new w.default().retain(ue.index+Te.length()-$e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(De,C.default.sources.USER)}},"embed left":Q(ce.keys.LEFT,!1),"embed left shift":Q(ce.keys.LEFT,!0),"embed right":Q(ce.keys.RIGHT,!1),"embed right shift":Q(ce.keys.RIGHT,!0)}};function Q(te,ue){var ye,xe=te===ce.keys.LEFT?"prefix":"suffix";return ye={key:te,shiftKey:ue,altKey:null},D(ye,xe,/^$/),D(ye,"handler",function($e){var De=$e.index;te===ce.keys.RIGHT&&(De+=$e.length+1);var Be=this.quill.getLeaf(De),he=o(Be,1),rt=he[0];return rt instanceof S.default.Embed?(te===ce.keys.LEFT?ue?this.quill.setSelection($e.index-1,$e.length+1,C.default.sources.USER):this.quill.setSelection($e.index-1,C.default.sources.USER):ue?this.quill.setSelection($e.index,$e.length+1,C.default.sources.USER):this.quill.setSelection($e.index+$e.length+1,C.default.sources.USER),!1):!0}),ye}function ee(te,ue){if(!(te.index===0||this.quill.getLength()<=1)){var ye=this.quill.getLine(te.index),xe=o(ye,1),Te=xe[0],$e={};if(ue.offset===0){var De=this.quill.getLine(te.index-1),Be=o(De,1),he=Be[0];if(he!=null&&he.length()>1){var rt=Te.formats(),Je=this.quill.getFormat(te.index-1,1);$e=v.default.attributes.diff(rt,Je)||{}}}var nt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ue.prefix)?2:1;this.quill.deleteText(te.index-nt,nt,C.default.sources.USER),Object.keys($e).length>0&&this.quill.formatLine(te.index-nt,nt,$e,C.default.sources.USER),this.quill.focus()}}function Y(te,ue){var ye=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ue.suffix)?2:1;if(!(te.index>=this.quill.getLength()-ye)){var xe={},Te=0,$e=this.quill.getLine(te.index),De=o($e,1),Be=De[0];if(ue.offset>=Be.length()-1){var he=this.quill.getLine(te.index+1),rt=o(he,1),Je=rt[0];if(Je){var nt=Be.formats(),we=this.quill.getFormat(te.index,1);xe=v.default.attributes.diff(nt,we)||{},Te=Je.length()}}this.quill.deleteText(te.index,ye,C.default.sources.USER),Object.keys(xe).length>0&&this.quill.formatLine(te.index+Te-1,ye,xe,C.default.sources.USER)}}function V(te){var ue=this.quill.getLines(te),ye={};if(ue.length>1){var xe=ue[0].formats(),Te=ue[ue.length-1].formats();ye=v.default.attributes.diff(Te,xe)||{}}this.quill.deleteText(te,C.default.sources.USER),Object.keys(ye).length>0&&this.quill.formatLine(te.index,1,ye,C.default.sources.USER),this.quill.setSelection(te.index,C.default.sources.SILENT),this.quill.focus()}function X(te,ue){var ye=this;te.length>0&&this.quill.scroll.deleteAt(te.index,te.length);var xe=Object.keys(ue.format).reduce(function(Te,$e){return S.default.query($e,S.default.Scope.BLOCK)&&!Array.isArray(ue.format[$e])&&(Te[$e]=ue.format[$e]),Te},{});this.quill.insertText(te.index,`
`,xe,C.default.sources.USER),this.quill.setSelection(te.index+1,C.default.sources.SILENT),this.quill.focus(),Object.keys(ue.format).forEach(function(Te){xe[Te]==null&&(Array.isArray(ue.format[Te])||Te!=="link"&&ye.quill.format(Te,ue.format[Te],C.default.sources.USER))})}function re(te){return{key:ce.keys.TAB,shiftKey:!te,format:{"code-block":!0},handler:function(ye){var xe=S.default.query("code-block"),Te=ye.index,$e=ye.length,De=this.quill.scroll.descendant(xe,Te),Be=o(De,2),he=Be[0],rt=Be[1];if(he!=null){var Je=this.quill.getIndex(he),nt=he.newlineIndex(rt,!0)+1,we=he.newlineIndex(Je+rt+$e),Pe=he.domNode.textContent.slice(nt,we).split(`
`);rt=0,Pe.forEach(function(Le,ie){te?(he.insertAt(nt+rt,xe.TAB),rt+=xe.TAB.length,ie===0?Te+=xe.TAB.length:$e+=xe.TAB.length):Le.startsWith(xe.TAB)&&(he.deleteAt(nt+rt,xe.TAB.length),rt-=xe.TAB.length,ie===0?Te-=xe.TAB.length:$e-=xe.TAB.length),rt+=Le.length+1}),this.quill.update(C.default.sources.USER),this.quill.setSelection(Te,$e,C.default.sources.SILENT)}}}}function oe(te){return{key:te[0].toUpperCase(),shortKey:!0,handler:function(ye,xe){this.quill.format(te,!xe.format[te],C.default.sources.USER)}}}function fe(te){if(typeof te=="string"||typeof te=="number")return fe({key:te});if((typeof te>"u"?"undefined":s(te))==="object"&&(te=(0,u.default)(te,!1)),typeof te.key=="string")if(ce.keys[te.key.toUpperCase()]!=null)te.key=ce.keys[te.key.toUpperCase()];else if(te.key.length===1)te.key=te.key.toUpperCase().charCodeAt(0);else return null;return te.shortKey&&(te[se]=te.shortKey,delete te.shortKey),te}r.default=ce,r.SHORTKEY=se},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(A,S){var b=[],C=!0,L=!1,R=void 0;try{for(var k=A[Symbol.iterator](),O;!(C=(O=k.next()).done)&&(b.push(O.value),!(S&&b.length===S));C=!0);}catch(M){L=!0,R=M}finally{try{!C&&k.return&&k.return()}finally{if(L)throw R}}return b}return function(A,S){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return v(A,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function v(A,S,b){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,S);if(C===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:v(L,S,b)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(b)}},a=function(){function v(A,S){for(var b=0;b<S.length;b++){var C=S[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,S,b){return S&&v(A.prototype,S),b&&v(A,b),A}}(),l=i(0),u=h(l),c=i(7),f=h(c);function h(v){return v&&v.__esModule?v:{default:v}}function p(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function g(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:v}function w(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}var _=function(v){w(A,v),a(A,null,[{key:"value",value:function(){}}]);function A(S,b){p(this,A);var C=g(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,S));return C.selection=b,C.textNode=document.createTextNode(A.CONTENTS),C.domNode.appendChild(C.textNode),C._length=0,C}return a(A,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(b,C){if(this._length!==0)return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,b,C);for(var L=this,R=0;L!=null&&L.statics.scope!==u.default.Scope.BLOCK_BLOT;)R+=L.offset(L.parent),L=L.parent;L!=null&&(this._length=A.CONTENTS.length,L.optimize(),L.formatAt(R,A.CONTENTS.length,b,C),this._length=0)}},{key:"index",value:function(b,C){return b===this.textNode?0:o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,b,C)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var b=this.textNode,C=this.selection.getNativeRange(),L=void 0,R=void 0,k=void 0;if(C!=null&&C.start.node===b&&C.end.node===b){var O=[b,C.start.offset,C.end.offset];L=O[0],R=O[1],k=O[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==A.CONTENTS){var M=this.textNode.data.split(A.CONTENTS).join("");this.next instanceof f.default?(L=this.next.domNode,this.next.insertAt(0,M),this.textNode.data=A.CONTENTS):(this.textNode.data=M,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(A.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),R!=null){var D=[R,k].map(function(F){return Math.max(0,Math.min(L.data.length,F-1))}),U=s(D,2);return R=U[0],k=U[1],{startNode:L,startOffset:R,endNode:L,endOffset:k}}}}},{key:"update",value:function(b,C){var L=this;if(b.some(function(k){return k.type==="characterData"&&k.target===L.textNode})){var R=this.restore();R&&(C.range=R)}}},{key:"value",value:function(){return""}}]),A}(u.default.Embed);_.blotName="cursor",_.className="ql-cursor",_.tagName="span",_.CONTENTS="\uFEFF",r.default=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=u(s),a=i(4),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(){return c(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return w}(o.default.Container);p.allowedChildren=[l.default,a.BlockEmbed,p],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var s=function(){function _(v,A){for(var S=0;S<A.length;S++){var b=A[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,A,S){return A&&_(v.prototype,A),S&&_(v,S),v}}(),o=function _(v,A,S){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,A);if(b===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,A,S)}else{if("value"in b)return b.value;var L=b.get;return L===void 0?void 0:L.call(S)}},a=i(0),l=u(a);function u(_){return _&&_.__esModule?_:{default:_}}function c(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function f(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function h(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var p=function(_){h(v,_);function v(){return c(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"value",value:function(S){var b=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,S);return b.startsWith("rgb(")?(b=b.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+b.split(",").map(function(C){return("00"+parseInt(C).toString(16)).slice(-2)}).join("")):b}}]),v}(l.default.Attributor.Style),g=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),w=new p("color","color",{scope:l.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=g,r.ColorStyle=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var s=function(){function w(_,v){for(var A=0;A<v.length;A++){var S=v[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,v,A){return v&&w(_.prototype,v),A&&w(_,A),_}}(),o=function w(_,v,A){_===null&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,v);if(S===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:w(b,v,A)}else{if("value"in S)return S.value;var C=S.get;return C===void 0?void 0:C.call(A)}},a=i(6),l=u(a);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function f(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function h(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var p=function(w){h(_,w);function _(){return c(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"format",value:function(A,S){if(A!==this.statics.blotName||!S)return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,A,S);S=this.constructor.sanitize(S),this.domNode.setAttribute("href",S)}}],[{key:"create",value:function(A){var S=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,A);return A=this.sanitize(A),S.setAttribute("href",A),S.setAttribute("rel","noopener noreferrer"),S.setAttribute("target","_blank"),S}},{key:"formats",value:function(A){return A.getAttribute("href")}},{key:"sanitize",value:function(A){return g(A,this.PROTOCOL_WHITELIST)?A:this.SANITIZED_URL}}]),_}(l.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function g(w,_){var v=document.createElement("a");v.href=w;var A=v.href.slice(0,v.href.indexOf(":"));return _.indexOf(A)>-1}r.default=p,r.sanitize=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},o=function(){function _(v,A){for(var S=0;S<A.length;S++){var b=A[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,A,S){return A&&_(v.prototype,A),S&&_(v,S),v}}(),a=i(23),l=f(a),u=i(107),c=f(u);function f(_){return _&&_.__esModule?_:{default:_}}function h(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}var p=0;function g(_,v){_.setAttribute(v,_.getAttribute(v)!=="true")}var w=function(){function _(v){var A=this;h(this,_),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){A.togglePicker()}),this.label.addEventListener("keydown",function(S){switch(S.keyCode){case l.default.keys.ENTER:A.togglePicker();break;case l.default.keys.ESCAPE:A.escape(),S.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(_,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),g(this.label,"aria-expanded"),g(this.options,"aria-hidden")}},{key:"buildItem",value:function(A){var S=this,b=document.createElement("span");return b.tabIndex="0",b.setAttribute("role","button"),b.classList.add("ql-picker-item"),A.hasAttribute("value")&&b.setAttribute("data-value",A.getAttribute("value")),A.textContent&&b.setAttribute("data-label",A.textContent),b.addEventListener("click",function(){S.selectItem(b,!0)}),b.addEventListener("keydown",function(C){switch(C.keyCode){case l.default.keys.ENTER:S.selectItem(b,!0),C.preventDefault();break;case l.default.keys.ESCAPE:S.escape(),C.preventDefault();break}}),b}},{key:"buildLabel",value:function(){var A=document.createElement("span");return A.classList.add("ql-picker-label"),A.innerHTML=c.default,A.tabIndex="0",A.setAttribute("role","button"),A.setAttribute("aria-expanded","false"),this.container.appendChild(A),A}},{key:"buildOptions",value:function(){var A=this,S=document.createElement("span");S.classList.add("ql-picker-options"),S.setAttribute("aria-hidden","true"),S.tabIndex="-1",S.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",S.id),this.options=S,[].slice.call(this.select.options).forEach(function(b){var C=A.buildItem(b);S.appendChild(C),b.selected===!0&&A.selectItem(C)}),this.container.appendChild(S)}},{key:"buildPicker",value:function(){var A=this;[].slice.call(this.select.attributes).forEach(function(S){A.container.setAttribute(S.name,S.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var A=this;this.close(),setTimeout(function(){return A.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(A){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=this.container.querySelector(".ql-selected");if(A!==b&&(b!=null&&b.classList.remove("ql-selected"),A!=null&&(A.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(A.parentNode.children,A),A.hasAttribute("data-value")?this.label.setAttribute("data-value",A.getAttribute("data-value")):this.label.removeAttribute("data-value"),A.hasAttribute("data-label")?this.label.setAttribute("data-label",A.getAttribute("data-label")):this.label.removeAttribute("data-label"),S))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var C=document.createEvent("Event");C.initEvent("change",!0,!0),this.select.dispatchEvent(C)}this.close()}}},{key:"update",value:function(){var A=void 0;if(this.select.selectedIndex>-1){var S=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];A=this.select.options[this.select.selectedIndex],this.selectItem(S)}else this.selectItem(null);var b=A!=null&&A!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",b)}}]),_}();r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(0),o=Z(s),a=i(5),l=Z(a),u=i(4),c=Z(u),f=i(16),h=Z(f),p=i(25),g=Z(p),w=i(24),_=Z(w),v=i(35),A=Z(v),S=i(6),b=Z(S),C=i(22),L=Z(C),R=i(7),k=Z(R),O=i(55),M=Z(O),D=i(42),U=Z(D),F=i(23),$=Z(F);function Z(se){return se&&se.__esModule?se:{default:se}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":h.default,"blots/container":g.default,"blots/cursor":_.default,"blots/embed":A.default,"blots/inline":b.default,"blots/scroll":L.default,"blots/text":k.default,"modules/clipboard":M.default,"modules/history":U.default,"modules/keyboard":$.default}),o.default.register(c.default,h.default,_.default,b.default,L.default,k.default),r.default=l.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(1),o=function(){function a(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(a.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),a.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},a.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},a.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},a.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},a.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},a.prototype.formatAt=function(l,u,c,f){var h=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&f)h.wrap(c,f);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var p=s.create(this.statics.scope);h.wrap(p),p.format(c,f)}},a.prototype.insertAt=function(l,u,c){var f=c==null?s.create("text",u):s.create(u,c),h=this.split(l);this.parent.insertBefore(f,h)},a.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},a.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},a.prototype.length=function(){return 1},a.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},a.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},a.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},a.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},a.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},a.prototype.split=function(l,u){return l===0?this:this.next},a.prototype.update=function(l,u){},a.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},a.blotName="abstract",a}();r.default=o},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),o=i(32),a=i(33),l=i(1),u=function(){function c(f){this.attributes={},this.domNode=f,this.build()}return c.prototype.attribute=function(f,h){h?f.add(this.domNode,h)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},c.prototype.build=function(){var f=this;this.attributes={};var h=s.default.keys(this.domNode),p=o.default.keys(this.domNode),g=a.default.keys(this.domNode);h.concat(p).concat(g).forEach(function(w){var _=l.query(w,l.Scope.ATTRIBUTE);_ instanceof s.default&&(f.attributes[_.attrName]=_)})},c.prototype.copy=function(f){var h=this;Object.keys(this.attributes).forEach(function(p){var g=h.attributes[p].value(h.domNode);f.format(p,g)})},c.prototype.move=function(f){var h=this;this.copy(f),Object.keys(this.attributes).forEach(function(p){h.attributes[p].remove(h.domNode)}),this.attributes={}},c.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(h,p){return h[p]=f.attributes[p].value(f.domNode),h},{})},c}();r.default=u},function(t,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};return function(c,f){u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u,c){var f=u.getAttribute("class")||"";return f.split(/\s+/).filter(function(h){return h.indexOf(c+"-")===0})}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(h){return h.split("-").slice(0,-1).join("-")})},c.prototype.add=function(f,h){return this.canAdd(f,h)?(this.remove(f),f.classList.add(this.keyName+"-"+h),!0):!1},c.prototype.remove=function(f){var h=a(f,this.keyName);h.forEach(function(p){f.classList.remove(p)}),f.classList.length===0&&f.removeAttribute("class")},c.prototype.value=function(f){var h=a(f,this.keyName)[0]||"",p=h.slice(this.keyName.length+1);return this.canAdd(f,p)?p:""},c}(o.default);r.default=l},function(t,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};return function(c,f){u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(12);function a(u){var c=u.split("-"),f=c.slice(1).map(function(h){return h[0].toUpperCase()+h.slice(1)}).join("");return c[0]+f}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(h){var p=h.split(":");return p[0].trim()})},c.prototype.add=function(f,h){return this.canAdd(f,h)?(f.style[a(this.keyName)]=h,!0):!1},c.prototype.remove=function(f){f.style[a(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},c.prototype.value=function(f){var h=f.style[a(this.keyName)];return this.canAdd(f,h)?h:""},c}(o.default);r.default=l},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,c,f){return c&&l(u.prototype,c),f&&l(u,f),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){o(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(f){c.modules[f]==null&&c.addModule(f)})}},{key:"addModule",value:function(c){var f=this.quill.constructor.import("modules/"+c);return this.modules[c]=new f(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l}();a.DEFAULTS={modules:{}},a.themes={default:a},r.default=a},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function v(A,S){for(var b=0;b<S.length;b++){var C=S[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,S,b){return S&&v(A.prototype,S),b&&v(A,b),A}}(),o=function v(A,S,b){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,S);if(C===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:v(L,S,b)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(b)}},a=i(0),l=f(a),u=i(7),c=f(u);function f(v){return v&&v.__esModule?v:{default:v}}function h(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function p(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:v}function g(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}var w="\uFEFF",_=function(v){g(A,v);function A(S){h(this,A);var b=p(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,S));return b.contentNode=document.createElement("span"),b.contentNode.setAttribute("contenteditable",!1),[].slice.call(b.domNode.childNodes).forEach(function(C){b.contentNode.appendChild(C)}),b.leftGuard=document.createTextNode(w),b.rightGuard=document.createTextNode(w),b.domNode.appendChild(b.leftGuard),b.domNode.appendChild(b.contentNode),b.domNode.appendChild(b.rightGuard),b}return s(A,[{key:"index",value:function(b,C){return b===this.leftGuard?0:b===this.rightGuard?1:o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"index",this).call(this,b,C)}},{key:"restore",value:function(b){var C=void 0,L=void 0,R=b.data.split(w).join("");if(b===this.leftGuard)if(this.prev instanceof c.default){var k=this.prev.length();this.prev.insertAt(k,R),C={startNode:this.prev.domNode,startOffset:k+R.length}}else L=document.createTextNode(R),this.parent.insertBefore(l.default.create(L),this),C={startNode:L,startOffset:R.length};else b===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,R),C={startNode:this.next.domNode,startOffset:R.length}):(L=document.createTextNode(R),this.parent.insertBefore(l.default.create(L),this.next),C={startNode:L,startOffset:R.length}));return b.data=w,C}},{key:"update",value:function(b,C){var L=this;b.forEach(function(R){if(R.type==="characterData"&&(R.target===L.leftGuard||R.target===L.rightGuard)){var k=L.restore(R.target);k&&(C.range=k)}})}}]),A}(l.default.Embed);r.default=_},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var s=i(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",l),c=new o.default.Attributor.Class("align","ql-align",l),f=new o.default.Attributor.Style("align","text-align",l);r.AlignAttribute=u,r.AlignClass=c,r.AlignStyle=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var s=i(0),o=l(s),a=i(26);function l(f){return f&&f.__esModule?f:{default:f}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),c=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});r.BackgroundClass=u,r.BackgroundStyle=c},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var s=i(0),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}var l={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",l),c=new o.default.Attributor.Class("direction","ql-direction",l),f=new o.default.Attributor.Style("direction","direction",l);r.DirectionAttribute=u,r.DirectionClass=c,r.DirectionStyle=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var s=function(){function v(A,S){for(var b=0;b<S.length;b++){var C=S[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,S,b){return S&&v(A.prototype,S),b&&v(A,b),A}}(),o=function v(A,S,b){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,S);if(C===void 0){var L=Object.getPrototypeOf(A);return L===null?void 0:v(L,S,b)}else{if("value"in C)return C.value;var R=C.get;return R===void 0?void 0:R.call(b)}},a=i(0),l=u(a);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,A){if(!(v instanceof A))throw new TypeError("Cannot call a class as a function")}function f(v,A){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:v}function h(v,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);v.prototype=Object.create(A&&A.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(v,A):v.__proto__=A)}var p={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},g=new l.default.Attributor.Class("font","ql-font",p),w=function(v){h(A,v);function A(){return c(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"value",value:function(b){return o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,b).replace(/["']/g,"")}}]),A}(l.default.Attributor.Style),_=new w("font","font-family",p);r.FontStyle=_,r.FontClass=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var s=i(0),o=a(s);function a(c){return c&&c.__esModule?c:{default:c}}var l=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=l,r.SizeStyle=u},function(t,r,i){t.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var s=function(){function S(b,C){for(var L=0;L<C.length;L++){var R=C[L];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}return function(b,C,L){return C&&S(b.prototype,C),L&&S(b,L),b}}(),o=i(0),a=h(o),l=i(5),u=h(l),c=i(9),f=h(c);function h(S){return S&&S.__esModule?S:{default:S}}function p(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function g(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}function w(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}var _=function(S){w(b,S);function b(C,L){p(this,b);var R=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,C,L));return R.lastRecorded=0,R.ignoreChange=!1,R.clear(),R.quill.on(u.default.events.EDITOR_CHANGE,function(k,O,M,D){k!==u.default.events.TEXT_CHANGE||R.ignoreChange||(!R.options.userOnly||D===u.default.sources.USER?R.record(O,M):R.transform(O))}),R.quill.keyboard.addBinding({key:"Z",shortKey:!0},R.undo.bind(R)),R.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},R.redo.bind(R)),/Win/i.test(navigator.platform)&&R.quill.keyboard.addBinding({key:"Y",shortKey:!0},R.redo.bind(R)),R}return s(b,[{key:"change",value:function(L,R){if(this.stack[L].length!==0){var k=this.stack[L].pop();this.stack[R].push(k),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(k[L],u.default.sources.USER),this.ignoreChange=!1;var O=A(k[L]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(L,R){if(L.ops.length!==0){this.stack.redo=[];var k=this.quill.getContents().diff(R),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var M=this.stack.undo.pop();k=k.compose(M.undo),L=M.redo.compose(L)}else this.lastRecorded=O;this.stack.undo.push({redo:L,undo:k}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(L){this.stack.undo.forEach(function(R){R.undo=L.transform(R.undo,!0),R.redo=L.transform(R.redo,!0)}),this.stack.redo.forEach(function(R){R.undo=L.transform(R.undo,!0),R.redo=L.transform(R.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),b}(f.default);_.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(S){var b=S.ops[S.ops.length-1];return b==null?!1:b.insert!=null?typeof b.insert=="string"&&b.insert.endsWith(`
`):b.attributes!=null?Object.keys(b.attributes).some(function(C){return a.default.query(C,a.default.Scope.BLOCK)!=null}):!1}function A(S){var b=S.reduce(function(L,R){return L+=R.delete||0,L},0),C=S.length()-b;return v(S)&&(C-=1),C}r.default=_,r.getLastChangeIndex=A},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var s=function(){function X(re,oe){for(var fe=0;fe<oe.length;fe++){var te=oe[fe];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(re,te.key,te)}}return function(re,oe,fe){return oe&&X(re.prototype,oe),fe&&X(re,fe),re}}(),o=function X(re,oe,fe){re===null&&(re=Function.prototype);var te=Object.getOwnPropertyDescriptor(re,oe);if(te===void 0){var ue=Object.getPrototypeOf(re);return ue===null?void 0:X(ue,oe,fe)}else{if("value"in te)return te.value;var ye=te.get;return ye===void 0?void 0:ye.call(fe)}},a=i(3),l=O(a),u=i(2),c=O(u),f=i(8),h=O(f),p=i(23),g=O(p),w=i(34),_=O(w),v=i(59),A=O(v),S=i(60),b=O(S),C=i(28),L=O(C),R=i(61),k=O(R);function O(X){return X&&X.__esModule?X:{default:X}}function M(X,re){if(!(X instanceof re))throw new TypeError("Cannot call a class as a function")}function D(X,re){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return re&&(typeof re=="object"||typeof re=="function")?re:X}function U(X,re){if(typeof re!="function"&&re!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof re);X.prototype=Object.create(re&&re.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(X,re):X.__proto__=re)}var F=[!1,"center","right","justify"],$=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Z=[!1,"serif","monospace"],se=["1","2","3",!1],ce=["small",!1,"large","huge"],Q=function(X){U(re,X);function re(oe,fe){M(this,re);var te=D(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,oe,fe)),ue=function ye(xe){if(!document.body.contains(oe.root))return document.body.removeEventListener("click",ye);te.tooltip!=null&&!te.tooltip.root.contains(xe.target)&&document.activeElement!==te.tooltip.textbox&&!te.quill.hasFocus()&&te.tooltip.hide(),te.pickers!=null&&te.pickers.forEach(function(Te){Te.container.contains(xe.target)||Te.close()})};return oe.emitter.listenDOM("click",document.body,ue),te}return s(re,[{key:"addModule",value:function(fe){var te=o(re.prototype.__proto__||Object.getPrototypeOf(re.prototype),"addModule",this).call(this,fe);return fe==="toolbar"&&this.extendToolbar(te),te}},{key:"buildButtons",value:function(fe,te){fe.forEach(function(ue){var ye=ue.getAttribute("class")||"";ye.split(/\s+/).forEach(function(xe){if(xe.startsWith("ql-")&&(xe=xe.slice(3),te[xe]!=null))if(xe==="direction")ue.innerHTML=te[xe][""]+te[xe].rtl;else if(typeof te[xe]=="string")ue.innerHTML=te[xe];else{var Te=ue.value||"";Te!=null&&te[xe][Te]&&(ue.innerHTML=te[xe][Te])}})})}},{key:"buildPickers",value:function(fe,te){var ue=this;this.pickers=fe.map(function(xe){if(xe.classList.contains("ql-align"))return xe.querySelector("option")==null&&V(xe,F),new b.default(xe,te.align);if(xe.classList.contains("ql-background")||xe.classList.contains("ql-color")){var Te=xe.classList.contains("ql-background")?"background":"color";return xe.querySelector("option")==null&&V(xe,$,Te==="background"?"#ffffff":"#000000"),new A.default(xe,te[Te])}else return xe.querySelector("option")==null&&(xe.classList.contains("ql-font")?V(xe,Z):xe.classList.contains("ql-header")?V(xe,se):xe.classList.contains("ql-size")&&V(xe,ce)),new L.default(xe)});var ye=function(){ue.pickers.forEach(function(Te){Te.update()})};this.quill.on(h.default.events.EDITOR_CHANGE,ye)}}]),re}(_.default);Q.DEFAULTS=(0,l.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var re=this,oe=this.container.querySelector("input.ql-image[type=file]");oe==null&&(oe=document.createElement("input"),oe.setAttribute("type","file"),oe.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),oe.classList.add("ql-image"),oe.addEventListener("change",function(){if(oe.files!=null&&oe.files[0]!=null){var fe=new FileReader;fe.onload=function(te){var ue=re.quill.getSelection(!0);re.quill.updateContents(new c.default().retain(ue.index).delete(ue.length).insert({image:te.target.result}),h.default.sources.USER),re.quill.setSelection(ue.index+1,h.default.sources.SILENT),oe.value=""},fe.readAsDataURL(oe.files[0])}}),this.container.appendChild(oe)),oe.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var ee=function(X){U(re,X);function re(oe,fe){M(this,re);var te=D(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,oe,fe));return te.textbox=te.root.querySelector('input[type="text"]'),te.listen(),te}return s(re,[{key:"listen",value:function(){var fe=this;this.textbox.addEventListener("keydown",function(te){g.default.match(te,"enter")?(fe.save(),te.preventDefault()):g.default.match(te,"escape")&&(fe.cancel(),te.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),te!=null?this.textbox.value=te:fe!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+fe)||""),this.root.setAttribute("data-mode",fe)}},{key:"restoreFocus",value:function(){var fe=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=fe}},{key:"save",value:function(){var fe=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var te=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",fe,h.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",fe,h.default.sources.USER)),this.quill.root.scrollTop=te;break}case"video":fe=Y(fe);case"formula":{if(!fe)break;var ue=this.quill.getSelection(!0);if(ue!=null){var ye=ue.index+ue.length;this.quill.insertEmbed(ye,this.root.getAttribute("data-mode"),fe,h.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ye+1," ",h.default.sources.USER),this.quill.setSelection(ye+2,h.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),re}(k.default);function Y(X){var re=X.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||X.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return re?(re[1]||"https")+"://www.youtube.com/embed/"+re[2]+"?showinfo=0":(re=X.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(re[1]||"https")+"://player.vimeo.com/video/"+re[2]+"/":X}function V(X,re){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;re.forEach(function(fe){var te=document.createElement("option");fe===oe?te.setAttribute("selected","selected"):te.setAttribute("value",fe),X.appendChild(te)})}r.BaseTooltip=ee,r.default=Q},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];this.insertBefore(a[0],null),a.length>1&&this.append.apply(this,a.slice(1))},o.prototype.contains=function(a){for(var l,u=this.iterator();l=u();)if(l===a)return!0;return!1},o.prototype.insertBefore=function(a,l){a&&(a.next=l,l!=null?(a.prev=l.prev,l.prev!=null&&(l.prev.next=a),l.prev=a,l===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)},o.prototype.offset=function(a){for(var l=0,u=this.head;u!=null;){if(u===a)return l;l+=u.length(),u=u.next}return-1},o.prototype.remove=function(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)},o.prototype.iterator=function(a){return a===void 0&&(a=this.head),function(){var l=a;return a!=null&&(a=a.next),l}},o.prototype.find=function(a,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var f=u.length();if(a<f||l&&a===f&&(u.next==null||u.next.length()!==0))return[u,a];a-=f}return[null,0]},o.prototype.forEach=function(a){for(var l,u=this.iterator();l=u();)a(l)},o.prototype.forEachAt=function(a,l,u){if(!(l<=0))for(var c=this.find(a),f=c[0],h=c[1],p,g=a-h,w=this.iterator(f);(p=w())&&g<a+l;){var _=p.length();a>g?u(p,a-g,Math.min(l,g+_-a)):u(p,0,Math.min(_,a+l-g)),g+=_}},o.prototype.map=function(a){return this.reduce(function(l,u){return l.push(a(u)),l},[])},o.prototype.reduce=function(a,l){for(var u,c=this.iterator();u=c();)l=a(l,u);return l},o}();r.default=s},function(t,r,i){var s=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var g in p)p.hasOwnProperty(g)&&(h[g]=p[g])};return function(h,p){f(h,p);function g(){this.constructor=h}h.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),a=i(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=function(f){s(h,f);function h(p){var g=f.call(this,p)||this;return g.scroll=g,g.observer=new MutationObserver(function(w){g.update(w)}),g.observer.observe(g.domNode,l),g.attach(),g}return h.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},h.prototype.deleteAt=function(p,g){this.update(),p===0&&g===this.length()?this.children.forEach(function(w){w.remove()}):f.prototype.deleteAt.call(this,p,g)},h.prototype.formatAt=function(p,g,w,_){this.update(),f.prototype.formatAt.call(this,p,g,w,_)},h.prototype.insertAt=function(p,g,w){this.update(),f.prototype.insertAt.call(this,p,g,w)},h.prototype.optimize=function(p,g){var w=this;p===void 0&&(p=[]),g===void 0&&(g={}),f.prototype.optimize.call(this,g);for(var _=[].slice.call(this.observer.takeRecords());_.length>0;)p.push(_.pop());for(var v=function(C,L){L===void 0&&(L=!0),!(C==null||C===w)&&C.domNode.parentNode!=null&&(C.domNode[a.DATA_KEY].mutations==null&&(C.domNode[a.DATA_KEY].mutations=[]),L&&v(C.parent))},A=function(C){C.domNode[a.DATA_KEY]==null||C.domNode[a.DATA_KEY].mutations==null||(C instanceof o.default&&C.children.forEach(A),C.optimize(g))},S=p,b=0;S.length>0;b+=1){if(b>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(S.forEach(function(C){var L=a.find(C.target,!0);L!=null&&(L.domNode===C.target&&(C.type==="childList"?(v(a.find(C.previousSibling,!1)),[].forEach.call(C.addedNodes,function(R){var k=a.find(R,!1);v(k,!1),k instanceof o.default&&k.children.forEach(function(O){v(O,!1)})})):C.type==="attributes"&&v(L.prev)),v(L))}),this.children.forEach(A),S=[].slice.call(this.observer.takeRecords()),_=S.slice();_.length>0;)p.push(_.pop())}},h.prototype.update=function(p,g){var w=this;g===void 0&&(g={}),p=p||this.observer.takeRecords(),p.map(function(_){var v=a.find(_.target,!0);return v==null?null:v.domNode[a.DATA_KEY].mutations==null?(v.domNode[a.DATA_KEY].mutations=[_],v):(v.domNode[a.DATA_KEY].mutations.push(_),null)}).forEach(function(_){_==null||_===w||_.domNode[a.DATA_KEY]==null||_.update(_.domNode[a.DATA_KEY].mutations||[],g)}),this.domNode[a.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,g),this.optimize(p,g)},h.blotName="scroll",h.defaultChild="block",h.scope=a.Scope.BLOCK_BLOT,h.tagName="DIV",h}(o.default);r.default=c},function(t,r,i){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,h){f.__proto__=h}||function(f,h){for(var p in h)h.hasOwnProperty(p)&&(f[p]=h[p])};return function(f,h){c(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1);function l(c,f){if(Object.keys(c).length!==Object.keys(f).length)return!1;for(var h in c)if(c[h]!==f[h])return!1;return!0}var u=function(c){s(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.formats=function(h){if(h.tagName!==f.tagName)return c.formats.call(this,h)},f.prototype.format=function(h,p){var g=this;h===this.statics.blotName&&!p?(this.children.forEach(function(w){w instanceof o.default||(w=w.wrap(f.blotName,!0)),g.attributes.copy(w)}),this.unwrap()):c.prototype.format.call(this,h,p)},f.prototype.formatAt=function(h,p,g,w){if(this.formats()[g]!=null||a.query(g,a.Scope.ATTRIBUTE)){var _=this.isolate(h,p);_.format(g,w)}else c.prototype.formatAt.call(this,h,p,g,w)},f.prototype.optimize=function(h){c.prototype.optimize.call(this,h);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var g=this.next;g instanceof f&&g.prev===this&&l(p,g.formats())&&(g.moveChildren(this),g.remove())},f.blotName="inline",f.scope=a.Scope.INLINE_BLOT,f.tagName="SPAN",f}(o.default);r.default=u},function(t,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};return function(c,f){u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(18),a=i(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(f){var h=a.query(c.blotName).tagName;if(f.tagName!==h)return u.formats.call(this,f)},c.prototype.format=function(f,h){a.query(f,a.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!h?this.replaceWith(c.blotName):u.prototype.format.call(this,f,h))},c.prototype.formatAt=function(f,h,p,g){a.query(p,a.Scope.BLOCK)!=null?this.format(p,g):u.prototype.formatAt.call(this,f,h,p,g)},c.prototype.insertAt=function(f,h,p){if(p==null||a.query(h,a.Scope.INLINE)!=null)u.prototype.insertAt.call(this,f,h,p);else{var g=this.split(f),w=a.create(h,p);g.parent.insertBefore(w,g)}},c.prototype.update=function(f,h){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,f,h)},c.blotName="block",c.scope=a.Scope.BLOCK_BLOT,c.tagName="P",c}(o.default);r.default=l},function(t,r,i){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)c.hasOwnProperty(f)&&(u[f]=c[f])};return function(u,c){l(u,c);function f(){this.constructor=u}u.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,f){l.prototype.formatAt.call(this,0,this.length(),c,f)},u.prototype.formatAt=function(c,f,h,p){c===0&&f===this.length()?this.format(h,p):l.prototype.formatAt.call(this,c,f,h,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(o.default);r.default=a},function(t,r,i){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])};return function(c,f){u(c,f);function h(){this.constructor=c}c.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var o=i(19),a=i(1),l=function(u){s(c,u);function c(f){var h=u.call(this,f)||this;return h.text=h.statics.value(h.domNode),h}return c.create=function(f){return document.createTextNode(f)},c.value=function(f){var h=f.data;return h.normalize&&(h=h.normalize()),h},c.prototype.deleteAt=function(f,h){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+h)},c.prototype.index=function(f,h){return this.domNode===f?h:-1},c.prototype.insertAt=function(f,h,p){p==null?(this.text=this.text.slice(0,f)+h+this.text.slice(f),this.domNode.data=this.text):u.prototype.insertAt.call(this,f,h,p)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(f){u.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(f,h){return[this.domNode,f]},c.prototype.split=function(f,h){if(h===void 0&&(h=!1),!h){if(f===0)return this;if(f===this.length())return this.next}var p=a.create(this.domNode.splitText(f));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},c.prototype.update=function(f,h){var p=this;f.some(function(g){return g.type==="characterData"&&g.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=a.Scope.INLINE_BLOT,c}(o.default);r.default=l},function(t,r,i){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(a,l){return arguments.length>1&&!this.contains(a)==!l?l:o.call(this,a)}}String.prototype.startsWith||(String.prototype.startsWith=function(a,l){return l=l||0,this.substr(l,a.length)===a}),String.prototype.endsWith||(String.prototype.endsWith=function(a,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=a.length;var c=u.indexOf(a,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,f=arguments[1],h,p=0;p<c;p++)if(h=u[p],l.call(f,h,p,u))return h}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,r){var i=-1,s=1,o=0;function a(b,C,L){if(b==C)return b?[[o,b]]:[];(L<0||b.length<L)&&(L=null);var R=f(b,C),k=b.substring(0,R);b=b.substring(R),C=C.substring(R),R=h(b,C);var O=b.substring(b.length-R);b=b.substring(0,b.length-R),C=C.substring(0,C.length-R);var M=l(b,C);return k&&M.unshift([o,k]),O&&M.push([o,O]),g(M),L!=null&&(M=v(M,L)),M=A(M),M}function l(b,C){var L;if(!b)return[[s,C]];if(!C)return[[i,b]];var R=b.length>C.length?b:C,k=b.length>C.length?C:b,O=R.indexOf(k);if(O!=-1)return L=[[s,R.substring(0,O)],[o,k],[s,R.substring(O+k.length)]],b.length>C.length&&(L[0][0]=L[2][0]=i),L;if(k.length==1)return[[i,b],[s,C]];var M=p(b,C);if(M){var D=M[0],U=M[1],F=M[2],$=M[3],Z=M[4],se=a(D,F),ce=a(U,$);return se.concat([[o,Z]],ce)}return u(b,C)}function u(b,C){for(var L=b.length,R=C.length,k=Math.ceil((L+R)/2),O=k,M=2*k,D=new Array(M),U=new Array(M),F=0;F<M;F++)D[F]=-1,U[F]=-1;D[O+1]=0,U[O+1]=0;for(var $=L-R,Z=$%2!=0,se=0,ce=0,Q=0,ee=0,Y=0;Y<k;Y++){for(var V=-Y+se;V<=Y-ce;V+=2){var X=O+V,re;V==-Y||V!=Y&&D[X-1]<D[X+1]?re=D[X+1]:re=D[X-1]+1;for(var oe=re-V;re<L&&oe<R&&b.charAt(re)==C.charAt(oe);)re++,oe++;if(D[X]=re,re>L)ce+=2;else if(oe>R)se+=2;else if(Z){var fe=O+$-V;if(fe>=0&&fe<M&&U[fe]!=-1){var te=L-U[fe];if(re>=te)return c(b,C,re,oe)}}}for(var ue=-Y+Q;ue<=Y-ee;ue+=2){var fe=O+ue,te;ue==-Y||ue!=Y&&U[fe-1]<U[fe+1]?te=U[fe+1]:te=U[fe-1]+1;for(var ye=te-ue;te<L&&ye<R&&b.charAt(L-te-1)==C.charAt(R-ye-1);)te++,ye++;if(U[fe]=te,te>L)ee+=2;else if(ye>R)Q+=2;else if(!Z){var X=O+$-ue;if(X>=0&&X<M&&D[X]!=-1){var re=D[X],oe=O+re-X;if(te=L-te,re>=te)return c(b,C,re,oe)}}}}return[[i,b],[s,C]]}function c(b,C,L,R){var k=b.substring(0,L),O=C.substring(0,R),M=b.substring(L),D=C.substring(R),U=a(k,O),F=a(M,D);return U.concat(F)}function f(b,C){if(!b||!C||b.charAt(0)!=C.charAt(0))return 0;for(var L=0,R=Math.min(b.length,C.length),k=R,O=0;L<k;)b.substring(O,k)==C.substring(O,k)?(L=k,O=L):R=k,k=Math.floor((R-L)/2+L);return k}function h(b,C){if(!b||!C||b.charAt(b.length-1)!=C.charAt(C.length-1))return 0;for(var L=0,R=Math.min(b.length,C.length),k=R,O=0;L<k;)b.substring(b.length-k,b.length-O)==C.substring(C.length-k,C.length-O)?(L=k,O=L):R=k,k=Math.floor((R-L)/2+L);return k}function p(b,C){var L=b.length>C.length?b:C,R=b.length>C.length?C:b;if(L.length<4||R.length*2<L.length)return null;function k(ce,Q,ee){for(var Y=ce.substring(ee,ee+Math.floor(ce.length/4)),V=-1,X="",re,oe,fe,te;(V=Q.indexOf(Y,V+1))!=-1;){var ue=f(ce.substring(ee),Q.substring(V)),ye=h(ce.substring(0,ee),Q.substring(0,V));X.length<ye+ue&&(X=Q.substring(V-ye,V)+Q.substring(V,V+ue),re=ce.substring(0,ee-ye),oe=ce.substring(ee+ue),fe=Q.substring(0,V-ye),te=Q.substring(V+ue))}return X.length*2>=ce.length?[re,oe,fe,te,X]:null}var O=k(L,R,Math.ceil(L.length/4)),M=k(L,R,Math.ceil(L.length/2)),D;if(!O&&!M)return null;M?O?D=O[4].length>M[4].length?O:M:D=M:D=O;var U,F,$,Z;b.length>C.length?(U=D[0],F=D[1],$=D[2],Z=D[3]):($=D[0],Z=D[1],U=D[2],F=D[3]);var se=D[4];return[U,F,$,Z,se]}function g(b){b.push([o,""]);for(var C=0,L=0,R=0,k="",O="",M;C<b.length;)switch(b[C][0]){case s:R++,O+=b[C][1],C++;break;case i:L++,k+=b[C][1],C++;break;case o:L+R>1?(L!==0&&R!==0&&(M=f(O,k),M!==0&&(C-L-R>0&&b[C-L-R-1][0]==o?b[C-L-R-1][1]+=O.substring(0,M):(b.splice(0,0,[o,O.substring(0,M)]),C++),O=O.substring(M),k=k.substring(M)),M=h(O,k),M!==0&&(b[C][1]=O.substring(O.length-M)+b[C][1],O=O.substring(0,O.length-M),k=k.substring(0,k.length-M))),L===0?b.splice(C-R,L+R,[s,O]):R===0?b.splice(C-L,L+R,[i,k]):b.splice(C-L-R,L+R,[i,k],[s,O]),C=C-L-R+(L?1:0)+(R?1:0)+1):C!==0&&b[C-1][0]==o?(b[C-1][1]+=b[C][1],b.splice(C,1)):C++,R=0,L=0,k="",O="";break}b[b.length-1][1]===""&&b.pop();var D=!1;for(C=1;C<b.length-1;)b[C-1][0]==o&&b[C+1][0]==o&&(b[C][1].substring(b[C][1].length-b[C-1][1].length)==b[C-1][1]?(b[C][1]=b[C-1][1]+b[C][1].substring(0,b[C][1].length-b[C-1][1].length),b[C+1][1]=b[C-1][1]+b[C+1][1],b.splice(C-1,1),D=!0):b[C][1].substring(0,b[C+1][1].length)==b[C+1][1]&&(b[C-1][1]+=b[C+1][1],b[C][1]=b[C][1].substring(b[C+1][1].length)+b[C+1][1],b.splice(C+1,1),D=!0)),C++;D&&g(b)}var w=a;w.INSERT=s,w.DELETE=i,w.EQUAL=o,t.exports=w;function _(b,C){if(C===0)return[o,b];for(var L=0,R=0;R<b.length;R++){var k=b[R];if(k[0]===i||k[0]===o){var O=L+k[1].length;if(C===O)return[R+1,b];if(C<O){b=b.slice();var M=C-L,D=[k[0],k[1].slice(0,M)],U=[k[0],k[1].slice(M)];return b.splice(R,1,D,U),[R+1,b]}else L=O}}throw new Error("cursor_pos is out of bounds!")}function v(b,C){var L=_(b,C),R=L[1],k=L[0],O=R[k],M=R[k+1];if(O==null)return b;if(O[0]!==o)return b;if(M!=null&&O[1]+M[1]===M[1]+O[1])return R.splice(k,2,M,O),S(R,k,2);if(M!=null&&M[1].indexOf(O[1])===0){R.splice(k,2,[M[0],O[1]],[0,O[1]]);var D=M[1].slice(O[1].length);return D.length>0&&R.splice(k+2,0,[M[0],D]),S(R,k,3)}else return b}function A(b){for(var C=!1,L=function(M){return M.charCodeAt(0)>=56320&&M.charCodeAt(0)<=57343},R=function(M){return M.charCodeAt(M.length-1)>=55296&&M.charCodeAt(M.length-1)<=56319},k=2;k<b.length;k+=1)b[k-2][0]===o&&R(b[k-2][1])&&b[k-1][0]===i&&L(b[k-1][1])&&b[k][0]===s&&L(b[k][1])&&(C=!0,b[k-1][1]=b[k-2][1].slice(-1)+b[k-1][1],b[k][1]=b[k-2][1].slice(-1)+b[k][1],b[k-2][1]=b[k-2][1].slice(0,-1));if(!C)return b;for(var O=[],k=0;k<b.length;k+=1)b[k][1].length>0&&O.push(b[k]);return O}function S(b,C,L){for(var R=C+L-1;R>=0&&R>=C-1;R--)if(R+1<b.length){var k=b[R],O=b[R+1];k[0]===O[1]&&b.splice(R,2,[k[0],k[1]+O[1]])}return b}},function(t,r){r=t.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(s){var o=[];for(var a in s)o.push(a);return o}},function(t,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=t.exports=i?s:o,r.supported=s;function s(a){return Object.prototype.toString.call(a)=="[object Arguments]"}r.unsupported=o;function o(a){return a&&typeof a=="object"&&typeof a.length=="number"&&Object.prototype.hasOwnProperty.call(a,"callee")&&!Object.prototype.propertyIsEnumerable.call(a,"callee")||!1}},function(t,r){var i=Object.prototype.hasOwnProperty,s="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(s=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function l(){this._events=new o,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)i.call(f,h)&&c.push(s?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},l.prototype.listeners=function(c,f){var h=s?s+c:c,p=this._events[h];if(f)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var g=0,w=p.length,_=new Array(w);g<w;g++)_[g]=p[g].fn;return _},l.prototype.emit=function(c,f,h,p,g,w){var _=s?s+c:c;if(!this._events[_])return!1;var v=this._events[_],A=arguments.length,S,b;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),A){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,f),!0;case 3:return v.fn.call(v.context,f,h),!0;case 4:return v.fn.call(v.context,f,h,p),!0;case 5:return v.fn.call(v.context,f,h,p,g),!0;case 6:return v.fn.call(v.context,f,h,p,g,w),!0}for(b=1,S=new Array(A-1);b<A;b++)S[b-1]=arguments[b];v.fn.apply(v.context,S)}else{var C=v.length,L;for(b=0;b<C;b++)switch(v[b].once&&this.removeListener(c,v[b].fn,void 0,!0),A){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,f);break;case 3:v[b].fn.call(v[b].context,f,h);break;case 4:v[b].fn.call(v[b].context,f,h,p);break;default:if(!S)for(L=1,S=new Array(A-1);L<A;L++)S[L-1]=arguments[L];v[b].fn.apply(v[b].context,S)}}return!0},l.prototype.on=function(c,f,h){var p=new a(f,h||this),g=s?s+c:c;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},l.prototype.once=function(c,f,h){var p=new a(f,h||this,!0),g=s?s+c:c;return this._events[g]?this._events[g].fn?this._events[g]=[this._events[g],p]:this._events[g].push(p):(this._events[g]=p,this._eventsCount++),this},l.prototype.removeListener=function(c,f,h,p){var g=s?s+c:c;if(!this._events[g])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[g],this;var w=this._events[g];if(w.fn)w.fn===f&&(!p||w.once)&&(!h||w.context===h)&&(--this._eventsCount===0?this._events=new o:delete this._events[g]);else{for(var _=0,v=[],A=w.length;_<A;_++)(w[_].fn!==f||p&&!w[_].once||h&&w[_].context!==h)&&v.push(w[_]);v.length?this._events[g]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[g]}return this},l.prototype.removeAllListeners=function(c){var f;return c?(f=s?s+c:c,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof t<"u"&&(t.exports=l)},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},o=function(){function we(Pe,Le){var ie=[],q=!0,me=!1,de=void 0;try{for(var ve=Pe[Symbol.iterator](),Ae;!(q=(Ae=ve.next()).done)&&(ie.push(Ae.value),!(Le&&ie.length===Le));q=!0);}catch(He){me=!0,de=He}finally{try{!q&&ve.return&&ve.return()}finally{if(me)throw de}}return ie}return function(Pe,Le){if(Array.isArray(Pe))return Pe;if(Symbol.iterator in Object(Pe))return we(Pe,Le);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function we(Pe,Le){for(var ie=0;ie<Le.length;ie++){var q=Le[ie];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Pe,q.key,q)}}return function(Pe,Le,ie){return Le&&we(Pe.prototype,Le),ie&&we(Pe,ie),Pe}}(),l=i(3),u=U(l),c=i(2),f=U(c),h=i(0),p=U(h),g=i(5),w=U(g),_=i(10),v=U(_),A=i(9),S=U(A),b=i(36),C=i(37),L=i(13),R=U(L),k=i(26),O=i(38),M=i(39),D=i(40);function U(we){return we&&we.__esModule?we:{default:we}}function F(we,Pe,Le){return Pe in we?Object.defineProperty(we,Pe,{value:Le,enumerable:!0,configurable:!0,writable:!0}):we[Pe]=Le,we}function $(we,Pe){if(!(we instanceof Pe))throw new TypeError("Cannot call a class as a function")}function Z(we,Pe){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Pe&&(typeof Pe=="object"||typeof Pe=="function")?Pe:we}function se(we,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Pe);we.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Pe&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Pe):we.__proto__=Pe)}var ce=(0,v.default)("quill:clipboard"),Q="__ql-matcher",ee=[[Node.TEXT_NODE,nt],[Node.TEXT_NODE,he],["br",$e],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,Te],[Node.ELEMENT_NODE,rt],[Node.ELEMENT_NODE,xe],[Node.ELEMENT_NODE,Je],["li",Be],["b",ye.bind(ye,"bold")],["i",ye.bind(ye,"italic")],["style",De]],Y=[b.AlignAttribute,O.DirectionAttribute].reduce(function(we,Pe){return we[Pe.keyName]=Pe,we},{}),V=[b.AlignStyle,C.BackgroundStyle,k.ColorStyle,O.DirectionStyle,M.FontStyle,D.SizeStyle].reduce(function(we,Pe){return we[Pe.keyName]=Pe,we},{}),X=function(we){se(Pe,we);function Pe(Le,ie){$(this,Pe);var q=Z(this,(Pe.__proto__||Object.getPrototypeOf(Pe)).call(this,Le,ie));return q.quill.root.addEventListener("paste",q.onPaste.bind(q)),q.container=q.quill.addContainer("ql-clipboard"),q.container.setAttribute("contenteditable",!0),q.container.setAttribute("tabindex",-1),q.matchers=[],ee.concat(q.options.matchers).forEach(function(me){var de=o(me,2),ve=de[0],Ae=de[1];!ie.matchVisual&&Ae===rt||q.addMatcher(ve,Ae)}),q}return a(Pe,[{key:"addMatcher",value:function(ie,q){this.matchers.push([ie,q])}},{key:"convert",value:function(ie){if(typeof ie=="string")return this.container.innerHTML=ie.replace(/\>\r?\n +\</g,"><"),this.convert();var q=this.quill.getFormat(this.quill.selection.savedRange.index);if(q[R.default.blotName]){var me=this.container.innerText;return this.container.innerHTML="",new f.default().insert(me,F({},R.default.blotName,q[R.default.blotName]))}var de=this.prepareMatching(),ve=o(de,2),Ae=ve[0],He=ve[1],qe=ue(this.container,Ae,He);return fe(qe,`
`)&&qe.ops[qe.ops.length-1].attributes==null&&(qe=qe.compose(new f.default().retain(qe.length()-1).delete(1))),ce.log("convert",this.container.innerHTML,qe),this.container.innerHTML="",qe}},{key:"dangerouslyPasteHTML",value:function(ie,q){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:w.default.sources.API;if(typeof ie=="string")this.quill.setContents(this.convert(ie),q),this.quill.setSelection(0,w.default.sources.SILENT);else{var de=this.convert(q);this.quill.updateContents(new f.default().retain(ie).concat(de),me),this.quill.setSelection(ie+de.length(),w.default.sources.SILENT)}}},{key:"onPaste",value:function(ie){var q=this;if(!(ie.defaultPrevented||!this.quill.isEnabled())){var me=this.quill.getSelection(),de=new f.default().retain(me.index),ve=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(w.default.sources.SILENT),setTimeout(function(){de=de.concat(q.convert()).delete(me.length),q.quill.updateContents(de,w.default.sources.USER),q.quill.setSelection(de.length()-me.length,w.default.sources.SILENT),q.quill.scrollingContainer.scrollTop=ve,q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ie=this,q=[],me=[];return this.matchers.forEach(function(de){var ve=o(de,2),Ae=ve[0],He=ve[1];switch(Ae){case Node.TEXT_NODE:me.push(He);break;case Node.ELEMENT_NODE:q.push(He);break;default:[].forEach.call(ie.container.querySelectorAll(Ae),function(qe){qe[Q]=qe[Q]||[],qe[Q].push(He)});break}}),[q,me]}}]),Pe}(S.default);X.DEFAULTS={matchers:[],matchVisual:!0};function re(we,Pe,Le){return(typeof Pe>"u"?"undefined":s(Pe))==="object"?Object.keys(Pe).reduce(function(ie,q){return re(ie,q,Pe[q])},we):we.reduce(function(ie,q){return q.attributes&&q.attributes[Pe]?ie.push(q):ie.insert(q.insert,(0,u.default)({},F({},Pe,Le),q.attributes))},new f.default)}function oe(we){if(we.nodeType!==Node.ELEMENT_NODE)return{};var Pe="__ql-computed-style";return we[Pe]||(we[Pe]=window.getComputedStyle(we))}function fe(we,Pe){for(var Le="",ie=we.ops.length-1;ie>=0&&Le.length<Pe.length;--ie){var q=we.ops[ie];if(typeof q.insert!="string")break;Le=q.insert+Le}return Le.slice(-1*Pe.length)===Pe}function te(we){if(we.childNodes.length===0)return!1;var Pe=oe(we);return["block","list-item"].indexOf(Pe.display)>-1}function ue(we,Pe,Le){return we.nodeType===we.TEXT_NODE?Le.reduce(function(ie,q){return q(we,ie)},new f.default):we.nodeType===we.ELEMENT_NODE?[].reduce.call(we.childNodes||[],function(ie,q){var me=ue(q,Pe,Le);return q.nodeType===we.ELEMENT_NODE&&(me=Pe.reduce(function(de,ve){return ve(q,de)},me),me=(q[Q]||[]).reduce(function(de,ve){return ve(q,de)},me)),ie.concat(me)},new f.default):new f.default}function ye(we,Pe,Le){return re(Le,we,!0)}function xe(we,Pe){var Le=p.default.Attributor.Attribute.keys(we),ie=p.default.Attributor.Class.keys(we),q=p.default.Attributor.Style.keys(we),me={};return Le.concat(ie).concat(q).forEach(function(de){var ve=p.default.query(de,p.default.Scope.ATTRIBUTE);ve!=null&&(me[ve.attrName]=ve.value(we),me[ve.attrName])||(ve=Y[de],ve!=null&&(ve.attrName===de||ve.keyName===de)&&(me[ve.attrName]=ve.value(we)||void 0),ve=V[de],ve!=null&&(ve.attrName===de||ve.keyName===de)&&(ve=V[de],me[ve.attrName]=ve.value(we)||void 0))}),Object.keys(me).length>0&&(Pe=re(Pe,me)),Pe}function Te(we,Pe){var Le=p.default.query(we);if(Le==null)return Pe;if(Le.prototype instanceof p.default.Embed){var ie={},q=Le.value(we);q!=null&&(ie[Le.blotName]=q,Pe=new f.default().insert(ie,Le.formats(we)))}else typeof Le.formats=="function"&&(Pe=re(Pe,Le.blotName,Le.formats(we)));return Pe}function $e(we,Pe){return fe(Pe,`
`)||Pe.insert(`
`),Pe}function De(){return new f.default}function Be(we,Pe){var Le=p.default.query(we);if(Le==null||Le.blotName!=="list-item"||!fe(Pe,`
`))return Pe;for(var ie=-1,q=we.parentNode;!q.classList.contains("ql-clipboard");)(p.default.query(q)||{}).blotName==="list"&&(ie+=1),q=q.parentNode;return ie<=0?Pe:Pe.compose(new f.default().retain(Pe.length()-1).retain(1,{indent:ie}))}function he(we,Pe){return fe(Pe,`
`)||(te(we)||Pe.length()>0&&we.nextSibling&&te(we.nextSibling))&&Pe.insert(`
`),Pe}function rt(we,Pe){if(te(we)&&we.nextElementSibling!=null&&!fe(Pe,`

`)){var Le=we.offsetHeight+parseFloat(oe(we).marginTop)+parseFloat(oe(we).marginBottom);we.nextElementSibling.offsetTop>we.offsetTop+Le*1.5&&Pe.insert(`
`)}return Pe}function Je(we,Pe){var Le={},ie=we.style||{};return ie.fontStyle&&oe(we).fontStyle==="italic"&&(Le.italic=!0),ie.fontWeight&&(oe(we).fontWeight.startsWith("bold")||parseInt(oe(we).fontWeight)>=700)&&(Le.bold=!0),Object.keys(Le).length>0&&(Pe=re(Pe,Le)),parseFloat(ie.textIndent||0)>0&&(Pe=new f.default().insert("	").concat(Pe)),Pe}function nt(we,Pe){var Le=we.data;if(we.parentNode.tagName==="O:P")return Pe.insert(Le.trim());if(Le.trim().length===0&&we.parentNode.classList.contains("ql-clipboard"))return Pe;if(!oe(we.parentNode).whiteSpace.startsWith("pre")){var ie=function(me,de){return de=de.replace(/[^\u00a0]/g,""),de.length<1&&me?" ":de};Le=Le.replace(/\r\n/g," ").replace(/\n/g," "),Le=Le.replace(/\s\s+/g,ie.bind(ie,!0)),(we.previousSibling==null&&te(we.parentNode)||we.previousSibling!=null&&te(we.previousSibling))&&(Le=Le.replace(/^\s+/,ie.bind(ie,!1))),(we.nextSibling==null&&te(we.parentNode)||we.nextSibling!=null&&te(we.nextSibling))&&(Le=Le.replace(/\s+$/,ie.bind(ie,!1)))}return Pe.insert(Le)}r.default=X,r.matchAttributor=xe,r.matchBlot=Te,r.matchNewline=he,r.matchSpacing=rt,r.matchText=nt},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(w,_){for(var v=0;v<_.length;v++){var A=_[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,_,v){return _&&g(w.prototype,_),v&&g(w,v),w}}(),o=function g(w,_,v){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,_);if(A===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,_,v)}else{if("value"in A)return A.value;var b=A.get;return b===void 0?void 0:b.call(v)}},a=i(6),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(){return c(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,[{key:"optimize",value:function(v){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),w}(l.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var s=function(){function D(U,F){var $=[],Z=!0,se=!1,ce=void 0;try{for(var Q=U[Symbol.iterator](),ee;!(Z=(ee=Q.next()).done)&&($.push(ee.value),!(F&&$.length===F));Z=!0);}catch(Y){se=!0,ce=Y}finally{try{!Z&&Q.return&&Q.return()}finally{if(se)throw ce}}return $}return function(U,F){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return D(U,F);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function D(U,F){for(var $=0;$<F.length;$++){var Z=F[$];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(U,Z.key,Z)}}return function(U,F,$){return F&&D(U.prototype,F),$&&D(U,$),U}}(),a=i(2),l=v(a),u=i(0),c=v(u),f=i(5),h=v(f),p=i(10),g=v(p),w=i(9),_=v(w);function v(D){return D&&D.__esModule?D:{default:D}}function A(D,U,F){return U in D?Object.defineProperty(D,U,{value:F,enumerable:!0,configurable:!0,writable:!0}):D[U]=F,D}function S(D,U){if(!(D instanceof U))throw new TypeError("Cannot call a class as a function")}function b(D,U){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:D}function C(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);D.prototype=Object.create(U&&U.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(D,U):D.__proto__=U)}var L=(0,g.default)("quill:toolbar"),R=function(D){C(U,D);function U(F,$){S(this,U);var Z=b(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,F,$));if(Array.isArray(Z.options.container)){var se=document.createElement("div");O(se,Z.options.container),F.container.parentNode.insertBefore(se,F.container),Z.container=se}else typeof Z.options.container=="string"?Z.container=document.querySelector(Z.options.container):Z.container=Z.options.container;if(!(Z.container instanceof HTMLElement)){var ce;return ce=L.error("Container required for toolbar",Z.options),b(Z,ce)}return Z.container.classList.add("ql-toolbar"),Z.controls=[],Z.handlers={},Object.keys(Z.options.handlers).forEach(function(Q){Z.addHandler(Q,Z.options.handlers[Q])}),[].forEach.call(Z.container.querySelectorAll("button, select"),function(Q){Z.attach(Q)}),Z.quill.on(h.default.events.EDITOR_CHANGE,function(Q,ee){Q===h.default.events.SELECTION_CHANGE&&Z.update(ee)}),Z.quill.on(h.default.events.SCROLL_OPTIMIZE,function(){var Q=Z.quill.selection.getRange(),ee=s(Q,1),Y=ee[0];Z.update(Y)}),Z}return o(U,[{key:"addHandler",value:function($,Z){this.handlers[$]=Z}},{key:"attach",value:function($){var Z=this,se=[].find.call($.classList,function(Q){return Q.indexOf("ql-")===0});if(se){if(se=se.slice(3),$.tagName==="BUTTON"&&$.setAttribute("type","button"),this.handlers[se]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[se]==null){L.warn("ignoring attaching to disabled format",se,$);return}if(c.default.query(se)==null){L.warn("ignoring attaching to nonexistent format",se,$);return}}var ce=$.tagName==="SELECT"?"change":"click";$.addEventListener(ce,function(Q){var ee=void 0;if($.tagName==="SELECT"){if($.selectedIndex<0)return;var Y=$.options[$.selectedIndex];Y.hasAttribute("selected")?ee=!1:ee=Y.value||!1}else $.classList.contains("ql-active")?ee=!1:ee=$.value||!$.hasAttribute("value"),Q.preventDefault();Z.quill.focus();var V=Z.quill.selection.getRange(),X=s(V,1),re=X[0];if(Z.handlers[se]!=null)Z.handlers[se].call(Z,ee);else if(c.default.query(se).prototype instanceof c.default.Embed){if(ee=prompt("Enter "+se),!ee)return;Z.quill.updateContents(new l.default().retain(re.index).delete(re.length).insert(A({},se,ee)),h.default.sources.USER)}else Z.quill.format(se,ee,h.default.sources.USER);Z.update(re)}),this.controls.push([se,$])}}},{key:"update",value:function($){var Z=$==null?{}:this.quill.getFormat($);this.controls.forEach(function(se){var ce=s(se,2),Q=ce[0],ee=ce[1];if(ee.tagName==="SELECT"){var Y=void 0;if($==null)Y=null;else if(Z[Q]==null)Y=ee.querySelector("option[selected]");else if(!Array.isArray(Z[Q])){var V=Z[Q];typeof V=="string"&&(V=V.replace(/\"/g,'\\"')),Y=ee.querySelector('option[value="'+V+'"]')}Y==null?(ee.value="",ee.selectedIndex=-1):Y.selected=!0}else if($==null)ee.classList.remove("ql-active");else if(ee.hasAttribute("value")){var X=Z[Q]===ee.getAttribute("value")||Z[Q]!=null&&Z[Q].toString()===ee.getAttribute("value")||Z[Q]==null&&!ee.getAttribute("value");ee.classList.toggle("ql-active",X)}else ee.classList.toggle("ql-active",Z[Q]!=null)})}}]),U}(_.default);R.DEFAULTS={};function k(D,U,F){var $=document.createElement("button");$.setAttribute("type","button"),$.classList.add("ql-"+U),F!=null&&($.value=F),D.appendChild($)}function O(D,U){Array.isArray(U[0])||(U=[U]),U.forEach(function(F){var $=document.createElement("span");$.classList.add("ql-formats"),F.forEach(function(Z){if(typeof Z=="string")k($,Z);else{var se=Object.keys(Z)[0],ce=Z[se];Array.isArray(ce)?M($,se,ce):k($,se,ce)}}),D.appendChild($)})}function M(D,U,F){var $=document.createElement("select");$.classList.add("ql-"+U),F.forEach(function(Z){var se=document.createElement("option");Z!==!1?se.setAttribute("value",Z):se.setAttribute("selected","selected"),$.appendChild(se)}),D.appendChild($)}R.DEFAULTS={container:null,handlers:{clean:function(){var U=this,F=this.quill.getSelection();if(F!=null)if(F.length==0){var $=this.quill.getFormat();Object.keys($).forEach(function(Z){c.default.query(Z,c.default.Scope.INLINE)!=null&&U.quill.format(Z,!1)})}else this.quill.removeFormat(F,h.default.sources.USER)},direction:function(U){var F=this.quill.getFormat().align;U==="rtl"&&F==null?this.quill.format("align","right",h.default.sources.USER):!U&&F==="right"&&this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",U,h.default.sources.USER)},indent:function(U){var F=this.quill.getSelection(),$=this.quill.getFormat(F),Z=parseInt($.indent||0);if(U==="+1"||U==="-1"){var se=U==="+1"?1:-1;$.direction==="rtl"&&(se*=-1),this.quill.format("indent",Z+se,h.default.sources.USER)}},link:function(U){U===!0&&(U=prompt("Enter link URL:")),this.quill.format("link",U,h.default.sources.USER)},list:function(U){var F=this.quill.getSelection(),$=this.quill.getFormat(F);U==="check"?$.list==="checked"||$.list==="unchecked"?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",U,h.default.sources.USER)}}},r.default=R,r.addControls=O},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(w,_){for(var v=0;v<_.length;v++){var A=_[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,_,v){return _&&g(w.prototype,_),v&&g(w,v),w}}(),o=function g(w,_,v){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,_);if(A===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,_,v)}else{if("value"in A)return A.value;var b=A.get;return b===void 0?void 0:b.call(v)}},a=i(28),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(_,v){c(this,w);var A=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,_));return A.label.innerHTML=v,A.container.classList.add("ql-color-picker"),[].slice.call(A.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(S){S.classList.add("ql-primary")}),A}return s(w,[{key:"buildItem",value:function(v){var A=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"buildItem",this).call(this,v);return A.style.backgroundColor=v.getAttribute("value")||"",A}},{key:"selectItem",value:function(v,A){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"selectItem",this).call(this,v,A);var S=this.label.querySelector(".ql-color-label"),b=v&&v.getAttribute("data-value")||"";S&&(S.tagName==="line"?S.style.stroke=b:S.style.fill=b)}}]),w}(l.default);r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(w,_){for(var v=0;v<_.length;v++){var A=_[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,_,v){return _&&g(w.prototype,_),v&&g(w,v),w}}(),o=function g(w,_,v){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,_);if(A===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,_,v)}else{if("value"in A)return A.value;var b=A.get;return b===void 0?void 0:b.call(v)}},a=i(28),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(_,v){c(this,w);var A=f(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,_));return A.container.classList.add("ql-icon-picker"),[].forEach.call(A.container.querySelectorAll(".ql-picker-item"),function(S){S.innerHTML=v[S.getAttribute("data-value")||""]}),A.defaultItem=A.container.querySelector(".ql-selected"),A.selectItem(A.defaultItem),A}return s(w,[{key:"selectItem",value:function(v,A){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"selectItem",this).call(this,v,A),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),w}(l.default);r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function l(u,c){for(var f=0;f<c.length;f++){var h=c[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,h.key,h)}}return function(u,c,f){return c&&l(u.prototype,c),f&&l(u,f),u}}();function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var a=function(){function l(u,c){var f=this;o(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var f=c.left+c.width/2-this.root.offsetWidth/2,h=c.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=h+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),g=this.root.getBoundingClientRect(),w=0;if(g.right>p.right&&(w=p.right-g.right,this.root.style.left=f+w+"px"),g.left<p.left&&(w=p.left-g.left,this.root.style.left=f+w+"px"),g.bottom>p.bottom){var _=g.bottom-g.top,v=c.bottom-c.top+_;this.root.style.top=h-v+"px",this.root.classList.add("ql-flip")}return w}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();r.default=a},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function M(D,U){var F=[],$=!0,Z=!1,se=void 0;try{for(var ce=D[Symbol.iterator](),Q;!($=(Q=ce.next()).done)&&(F.push(Q.value),!(U&&F.length===U));$=!0);}catch(ee){Z=!0,se=ee}finally{try{!$&&ce.return&&ce.return()}finally{if(Z)throw se}}return F}return function(D,U){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return M(D,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function M(D,U,F){D===null&&(D=Function.prototype);var $=Object.getOwnPropertyDescriptor(D,U);if($===void 0){var Z=Object.getPrototypeOf(D);return Z===null?void 0:M(Z,U,F)}else{if("value"in $)return $.value;var se=$.get;return se===void 0?void 0:se.call(F)}},a=function(){function M(D,U){for(var F=0;F<U.length;F++){var $=U[F];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(D,$.key,$)}}return function(D,U,F){return U&&M(D.prototype,U),F&&M(D,F),D}}(),l=i(3),u=S(l),c=i(8),f=S(c),h=i(43),p=S(h),g=i(27),w=S(g),_=i(15),v=i(41),A=S(v);function S(M){return M&&M.__esModule?M:{default:M}}function b(M,D){if(!(M instanceof D))throw new TypeError("Cannot call a class as a function")}function C(M,D){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:M}function L(M,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);M.prototype=Object.create(D&&D.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(M,D):M.__proto__=D)}var R=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],k=function(M){L(D,M);function D(U,F){b(this,D),F.modules.toolbar!=null&&F.modules.toolbar.container==null&&(F.modules.toolbar.container=R);var $=C(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,F));return $.quill.container.classList.add("ql-snow"),$}return a(D,[{key:"extendToolbar",value:function(F){F.container.classList.add("ql-snow"),this.buildButtons([].slice.call(F.container.querySelectorAll("button")),A.default),this.buildPickers([].slice.call(F.container.querySelectorAll("select")),A.default),this.tooltip=new O(this.quill,this.options.bounds),F.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function($,Z){F.handlers.link.call(F,!Z.format.link)})}}]),D}(p.default);k.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(D){if(D){var U=this.quill.getSelection();if(U==null||U.length==0)return;var F=this.quill.getText(U);/^\S+@\S+\.\S+$/.test(F)&&F.indexOf("mailto:")!==0&&(F="mailto:"+F);var $=this.quill.theme.tooltip;$.edit("link",F)}else this.quill.format("link",!1)}}}}});var O=function(M){L(D,M);function D(U,F){b(this,D);var $=C(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,U,F));return $.preview=$.root.querySelector("a.ql-preview"),$}return a(D,[{key:"listen",value:function(){var F=this;o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function($){F.root.classList.contains("ql-editing")?F.save():F.edit("link",F.preview.textContent),$.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function($){if(F.linkRange!=null){var Z=F.linkRange;F.restoreFocus(),F.quill.formatText(Z,"link",!1,f.default.sources.USER),delete F.linkRange}$.preventDefault(),F.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function($,Z,se){if($!=null){if($.length===0&&se===f.default.sources.USER){var ce=F.quill.scroll.descendant(w.default,$.index),Q=s(ce,2),ee=Q[0],Y=Q[1];if(ee!=null){F.linkRange=new _.Range($.index-Y,ee.length());var V=w.default.formats(ee.domNode);F.preview.textContent=V,F.preview.setAttribute("href",V),F.show(),F.position(F.quill.getBounds(F.linkRange));return}}else delete F.linkRange;F.hide()}})}},{key:"show",value:function(){o(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),D}(h.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=k},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(29),o=q(s),a=i(36),l=i(38),u=i(64),c=i(65),f=q(c),h=i(66),p=q(h),g=i(67),w=q(g),_=i(37),v=i(26),A=i(39),S=i(40),b=i(56),C=q(b),L=i(68),R=q(L),k=i(27),O=q(k),M=i(69),D=q(M),U=i(70),F=q(U),$=i(71),Z=q($),se=i(72),ce=q(se),Q=i(73),ee=q(Q),Y=i(13),V=q(Y),X=i(74),re=q(X),oe=i(75),fe=q(oe),te=i(57),ue=q(te),ye=i(41),xe=q(ye),Te=i(28),$e=q(Te),De=i(59),Be=q(De),he=i(60),rt=q(he),Je=i(61),nt=q(Je),we=i(108),Pe=q(we),Le=i(62),ie=q(Le);function q(me){return me&&me.__esModule?me:{default:me}}o.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":_.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":A.FontClass,"attributors/class/size":S.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":_.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":A.FontStyle,"attributors/style/size":S.SizeStyle},!0),o.default.register({"formats/align":a.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":_.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":A.FontClass,"formats/size":S.SizeClass,"formats/blockquote":f.default,"formats/code-block":V.default,"formats/header":p.default,"formats/list":w.default,"formats/bold":C.default,"formats/code":Y.Code,"formats/italic":R.default,"formats/link":O.default,"formats/script":D.default,"formats/strike":F.default,"formats/underline":Z.default,"formats/image":ce.default,"formats/video":ee.default,"formats/list/item":g.ListItem,"modules/formula":re.default,"modules/syntax":fe.default,"modules/toolbar":ue.default,"themes/bubble":Pe.default,"themes/snow":ie.default,"ui/icons":xe.default,"ui/picker":$e.default,"ui/icon-picker":rt.default,"ui/color-picker":Be.default,"ui/tooltip":nt.default},!0),r.default=o.default},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var s=function(){function w(_,v){for(var A=0;A<v.length;A++){var S=v[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,v,A){return v&&w(_.prototype,v),A&&w(_,A),_}}(),o=function w(_,v,A){_===null&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,v);if(S===void 0){var b=Object.getPrototypeOf(_);return b===null?void 0:w(b,v,A)}else{if("value"in S)return S.value;var C=S.get;return C===void 0?void 0:C.call(A)}},a=i(0),l=u(a);function u(w){return w&&w.__esModule?w:{default:w}}function c(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function f(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function h(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var p=function(w){h(_,w);function _(){return c(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,[{key:"add",value:function(A,S){if(S==="+1"||S==="-1"){var b=this.value(A)||0;S=S==="+1"?b+1:b-1}return S===0?(this.remove(A),!0):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"add",this).call(this,A,S)}},{key:"canAdd",value:function(A,S){return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,A,S)||o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"canAdd",this).call(this,A,parseInt(S))}},{key:"value",value:function(A){return parseInt(o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,A))||void 0}}]),_}(l.default.Attributor.Class),g=new p("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=g},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(4),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function c(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var f=function(h){c(p,h);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);f.blotName="blockquote",f.tagName="blockquote",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function p(g,w){for(var _=0;_<w.length;_++){var v=w[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}return function(g,w,_){return w&&p(g.prototype,w),_&&p(g,_),g}}(),o=i(4),a=l(o);function l(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function c(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var h=function(p){f(g,p);function g(){return u(this,g),c(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,null,[{key:"formats",value:function(_){return this.tagName.indexOf(_.tagName)+1}}]),g}(a.default);h.blotName="header",h.tagName=["H1","H2","H3","H4","H5","H6"],r.default=h},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var s=function(){function b(C,L){for(var R=0;R<L.length;R++){var k=L[R];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,L,R){return L&&b(C.prototype,L),R&&b(C,R),C}}(),o=function b(C,L,R){C===null&&(C=Function.prototype);var k=Object.getOwnPropertyDescriptor(C,L);if(k===void 0){var O=Object.getPrototypeOf(C);return O===null?void 0:b(O,L,R)}else{if("value"in k)return k.value;var M=k.get;return M===void 0?void 0:M.call(R)}},a=i(0),l=p(a),u=i(4),c=p(u),f=i(25),h=p(f);function p(b){return b&&b.__esModule?b:{default:b}}function g(b,C,L){return C in b?Object.defineProperty(b,C,{value:L,enumerable:!0,configurable:!0,writable:!0}):b[C]=L,b}function w(b,C){if(!(b instanceof C))throw new TypeError("Cannot call a class as a function")}function _(b,C){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:b}function v(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);b.prototype=Object.create(C&&C.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(b,C):b.__proto__=C)}var A=function(b){v(C,b);function C(){return w(this,C),_(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return s(C,[{key:"format",value:function(R,k){R===S.blotName&&!k?this.replaceWith(l.default.create(this.statics.scope)):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"format",this).call(this,R,k)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(R,k){return this.parent.isolate(this.offset(this.parent),this.length()),R===this.parent.statics.blotName?(this.parent.replaceWith(R,k),this):(this.parent.unwrap(),o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replaceWith",this).call(this,R,k))}}],[{key:"formats",value:function(R){return R.tagName===this.tagName?void 0:o(C.__proto__||Object.getPrototypeOf(C),"formats",this).call(this,R)}}]),C}(c.default);A.blotName="list-item",A.tagName="LI";var S=function(b){v(C,b),s(C,null,[{key:"create",value:function(R){var k=R==="ordered"?"OL":"UL",O=o(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,k);return(R==="checked"||R==="unchecked")&&O.setAttribute("data-checked",R==="checked"),O}},{key:"formats",value:function(R){if(R.tagName==="OL")return"ordered";if(R.tagName==="UL")return R.hasAttribute("data-checked")?R.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function C(L){w(this,C);var R=_(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,L)),k=function(M){if(M.target.parentNode===L){var D=R.statics.formats(L),U=l.default.find(M.target);D==="checked"?U.format("list","unchecked"):D==="unchecked"&&U.format("list","checked")}};return L.addEventListener("touchstart",k),L.addEventListener("mousedown",k),R}return s(C,[{key:"format",value:function(R,k){this.children.length>0&&this.children.tail.format(R,k)}},{key:"formats",value:function(){return g({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(R,k){if(R instanceof A)o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,R,k);else{var O=k==null?this.length():k.offset(this),M=this.split(O);M.parent.insertBefore(R,M)}}},{key:"optimize",value:function(R){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,R);var k=this.next;k!=null&&k.prev===this&&k.statics.blotName===this.statics.blotName&&k.domNode.tagName===this.domNode.tagName&&k.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(k.moveChildren(this),k.remove())}},{key:"replace",value:function(R){if(R.statics.blotName!==this.statics.blotName){var k=l.default.create(this.statics.defaultChild);R.moveChildren(k),this.appendChild(k)}o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"replace",this).call(this,R)}}]),C}(h.default);S.blotName="list",S.scope=l.default.Scope.BLOCK_BLOT,S.tagName=["OL","UL"],S.defaultChild="list-item",S.allowedChildren=[A],r.ListItem=A,r.default=S},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(56),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function c(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var f=function(h){c(p,h);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);f.blotName="italic",f.tagName=["EM","I"],r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function g(w,_){for(var v=0;v<_.length;v++){var A=_[v];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,_,v){return _&&g(w.prototype,_),v&&g(w,v),w}}(),o=function g(w,_,v){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,_);if(A===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,_,v)}else{if("value"in A)return A.value;var b=A.get;return b===void 0?void 0:b.call(v)}},a=i(6),l=u(a);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function h(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var p=function(g){h(w,g);function w(){return c(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return s(w,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),w}(l.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function c(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var f=function(h){c(p,h);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);f.blotName="strike",f.tagName="S",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=i(6),o=a(s);function a(h){return h&&h.__esModule?h:{default:h}}function l(h,p){if(!(h instanceof p))throw new TypeError("Cannot call a class as a function")}function u(h,p){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:h}function c(h,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);h.prototype=Object.create(p&&p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(h,p):h.__proto__=p)}var f=function(h){c(p,h);function p(){return l(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(o.default);f.blotName="underline",f.tagName="U",r.default=f},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,A){for(var S=0;S<A.length;S++){var b=A[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,A,S){return A&&_(v.prototype,A),S&&_(v,S),v}}(),o=function _(v,A,S){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,A);if(b===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,A,S)}else{if("value"in b)return b.value;var L=b.get;return L===void 0?void 0:L.call(S)}},a=i(0),l=c(a),u=i(27);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function p(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var g=["alt","height","width"],w=function(_){p(v,_);function v(){return f(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(S,b){g.indexOf(S)>-1?b?this.domNode.setAttribute(S,b):this.domNode.removeAttribute(S):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,S,b)}}],[{key:"create",value:function(S){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,S);return typeof S=="string"&&b.setAttribute("src",this.sanitize(S)),b}},{key:"formats",value:function(S){return g.reduce(function(b,C){return S.hasAttribute(C)&&(b[C]=S.getAttribute(C)),b},{})}},{key:"match",value:function(S){return/\.(jpe?g|gif|png)$/.test(S)||/^data:image\/.+;base64/.test(S)}},{key:"sanitize",value:function(S){return(0,u.sanitize)(S,["http","https","data"])?S:"//:0"}},{key:"value",value:function(S){return S.getAttribute("src")}}]),v}(l.default.Embed);w.blotName="image",w.tagName="IMG",r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function _(v,A){for(var S=0;S<A.length;S++){var b=A[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(v,b.key,b)}}return function(v,A,S){return A&&_(v.prototype,A),S&&_(v,S),v}}(),o=function _(v,A,S){v===null&&(v=Function.prototype);var b=Object.getOwnPropertyDescriptor(v,A);if(b===void 0){var C=Object.getPrototypeOf(v);return C===null?void 0:_(C,A,S)}else{if("value"in b)return b.value;var L=b.get;return L===void 0?void 0:L.call(S)}},a=i(4),l=i(27),u=c(l);function c(_){return _&&_.__esModule?_:{default:_}}function f(_,v){if(!(_ instanceof v))throw new TypeError("Cannot call a class as a function")}function h(_,v){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:_}function p(_,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);_.prototype=Object.create(v&&v.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(_,v):_.__proto__=v)}var g=["height","width"],w=function(_){p(v,_);function v(){return f(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(S,b){g.indexOf(S)>-1?b?this.domNode.setAttribute(S,b):this.domNode.removeAttribute(S):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,S,b)}}],[{key:"create",value:function(S){var b=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,S);return b.setAttribute("frameborder","0"),b.setAttribute("allowfullscreen",!0),b.setAttribute("src",this.sanitize(S)),b}},{key:"formats",value:function(S){return g.reduce(function(b,C){return S.hasAttribute(C)&&(b[C]=S.getAttribute(C)),b},{})}},{key:"sanitize",value:function(S){return u.default.sanitize(S)}},{key:"value",value:function(S){return S.getAttribute("src")}}]),v}(a.BlockEmbed);w.blotName="video",w.className="ql-video",w.tagName="IFRAME",r.default=w},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var s=function(){function S(b,C){for(var L=0;L<C.length;L++){var R=C[L];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(b,R.key,R)}}return function(b,C,L){return C&&S(b.prototype,C),L&&S(b,L),b}}(),o=function S(b,C,L){b===null&&(b=Function.prototype);var R=Object.getOwnPropertyDescriptor(b,C);if(R===void 0){var k=Object.getPrototypeOf(b);return k===null?void 0:S(k,C,L)}else{if("value"in R)return R.value;var O=R.get;return O===void 0?void 0:O.call(L)}},a=i(35),l=p(a),u=i(5),c=p(u),f=i(9),h=p(f);function p(S){return S&&S.__esModule?S:{default:S}}function g(S,b){if(!(S instanceof b))throw new TypeError("Cannot call a class as a function")}function w(S,b){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:S}function _(S,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);S.prototype=Object.create(b&&b.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(S,b):S.__proto__=b)}var v=function(S){_(b,S);function b(){return g(this,b),w(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(L){var R=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,L);return typeof L=="string"&&(window.katex.render(L,R,{throwOnError:!1,errorColor:"#f00"}),R.setAttribute("data-value",L)),R}},{key:"value",value:function(L){return L.getAttribute("data-value")}}]),b}(l.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var A=function(S){_(b,S),s(b,null,[{key:"register",value:function(){c.default.register(v,!0)}}]);function b(){g(this,b);var C=w(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return C}return b}(h.default);r.FormulaBlot=v,r.default=A},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var s=function(){function L(R,k){for(var O=0;O<k.length;O++){var M=k[O];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(R,M.key,M)}}return function(R,k,O){return k&&L(R.prototype,k),O&&L(R,O),R}}(),o=function L(R,k,O){R===null&&(R=Function.prototype);var M=Object.getOwnPropertyDescriptor(R,k);if(M===void 0){var D=Object.getPrototypeOf(R);return D===null?void 0:L(D,k,O)}else{if("value"in M)return M.value;var U=M.get;return U===void 0?void 0:U.call(O)}},a=i(0),l=w(a),u=i(5),c=w(u),f=i(9),h=w(f),p=i(13),g=w(p);function w(L){return L&&L.__esModule?L:{default:L}}function _(L,R){if(!(L instanceof R))throw new TypeError("Cannot call a class as a function")}function v(L,R){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:L}function A(L,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);L.prototype=Object.create(R&&R.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(L,R):L.__proto__=R)}var S=function(L){A(R,L);function R(){return _(this,R),v(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return s(R,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var M=this.domNode.textContent;this.cachedText!==M&&((M.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=O(M),this.domNode.normalize(),this.attach()),this.cachedText=M)}}]),R}(g.default);S.className="ql-syntax";var b=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),C=function(L){A(R,L),s(R,null,[{key:"register",value:function(){c.default.register(b,!0),c.default.register(S,!0)}}]);function R(k,O){_(this,R);var M=v(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k,O));if(typeof M.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var D=null;return M.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(D),D=setTimeout(function(){M.highlight(),D=null},M.options.interval)}),M.highlight(),M}return s(R,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var M=this.quill.getSelection();this.quill.scroll.descendants(S).forEach(function(D){D.highlight(O.options.highlight)}),this.quill.update(c.default.sources.SILENT),M!=null&&this.quill.setSelection(M,c.default.sources.SILENT)}}}]),R}(h.default);C.DEFAULTS={highlight:function(){return window.hljs==null?null:function(L){var R=window.hljs.highlightAuto(L);return R.value}}(),interval:1e3},r.CodeBlock=S,r.CodeToken=b,r.default=C},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,r){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,r){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,r){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var s=function R(k,O,M){k===null&&(k=Function.prototype);var D=Object.getOwnPropertyDescriptor(k,O);if(D===void 0){var U=Object.getPrototypeOf(k);return U===null?void 0:R(U,O,M)}else{if("value"in D)return D.value;var F=D.get;return F===void 0?void 0:F.call(M)}},o=function(){function R(k,O){for(var M=0;M<O.length;M++){var D=O[M];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(k,D.key,D)}}return function(k,O,M){return O&&R(k.prototype,O),M&&R(k,M),k}}(),a=i(3),l=_(a),u=i(8),c=_(u),f=i(43),h=_(f),p=i(15),g=i(41),w=_(g);function _(R){return R&&R.__esModule?R:{default:R}}function v(R,k){if(!(R instanceof k))throw new TypeError("Cannot call a class as a function")}function A(R,k){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:R}function S(R,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);R.prototype=Object.create(k&&k.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(R,k):R.__proto__=k)}var b=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],C=function(R){S(k,R);function k(O,M){v(this,k),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=b);var D=A(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,O,M));return D.quill.container.classList.add("ql-bubble"),D}return o(k,[{key:"extendToolbar",value:function(M){this.tooltip=new L(this.quill,this.options.bounds),this.tooltip.root.appendChild(M.container),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),w.default)}}]),k}(h.default);C.DEFAULTS=(0,l.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){k?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var L=function(R){S(k,R);function k(O,M){v(this,k);var D=A(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,O,M));return D.quill.on(c.default.events.EDITOR_CHANGE,function(U,F,$,Z){if(U===c.default.events.SELECTION_CHANGE)if(F!=null&&F.length>0&&Z===c.default.sources.USER){D.show(),D.root.style.left="0px",D.root.style.width="",D.root.style.width=D.root.offsetWidth+"px";var se=D.quill.getLines(F.index,F.length);if(se.length===1)D.position(D.quill.getBounds(F));else{var ce=se[se.length-1],Q=D.quill.getIndex(ce),ee=Math.min(ce.length()-1,F.index+F.length-Q),Y=D.quill.getBounds(new p.Range(Q,ee));D.position(Y)}}else document.activeElement!==D.textbox&&D.quill.hasFocus()&&D.hide()}),D}return o(k,[{key:"listen",value:function(){var M=this;s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){M.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!M.root.classList.contains("ql-hidden")){var D=M.quill.getSelection();D!=null&&M.position(M.quill.getBounds(D))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(M){var D=s(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"position",this).call(this,M),U=this.root.querySelector(".ql-tooltip-arrow");if(U.style.marginLeft="",D===0)return D;U.style.marginLeft=-1*D-U.offsetWidth/2+"px"}}]),k}(f.BaseTooltip);L.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=L,r.default=C},function(t,r,i){t.exports=i(63)}]).default})}(sA)),sA.exports}var ll,b9;function gTe(){if(b9)return ll;b9=1;var n=ll&&ll.__extends||function(){var c=function(f,h){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var w in g)g.hasOwnProperty(w)&&(p[w]=g[w])},c(f,h)};return function(f,h){c(f,h);function p(){this.constructor=f}f.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}}(),e=ll&&ll.__assign||function(){return e=Object.assign||function(c){for(var f,h=1,p=arguments.length;h<p;h++){f=arguments[h];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(c[g]=f[g])}return c},e.apply(this,arguments)},t=ll&&ll.__spreadArrays||function(){for(var c=0,f=0,h=arguments.length;f<h;f++)c+=arguments[f].length;for(var p=Array(c),g=0,f=0;f<h;f++)for(var w=arguments[f],_=0,v=w.length;_<v;_++,g++)p[g]=w[_];return p},r=ll&&ll.__importDefault||function(c){return c&&c.__esModule?c:{default:c}},i=r(vh()),s=r(KP()),o=r(dTe()),a=r(mTe()),l=function(c){n(f,c);function f(h){var p=c.call(this,h)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(w,_,v,A){var S,b,C,L;w==="text-change"?(b=(S=p).onEditorChangeText)===null||b===void 0||b.call(S,p.editor.root.innerHTML,_,A,p.unprivilegedEditor):w==="selection-change"&&((L=(C=p).onEditorChangeSelection)===null||L===void 0||L.call(C,_,A,p.unprivilegedEditor))};var g=p.isControlled()?h.value:h.defaultValue;return p.value=g??"",p}return f.prototype.validateProps=function(h){var p;if(i.default.Children.count(h.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(h.children)){var g=i.default.Children.only(h.children);if(((p=g)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&h.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(h,p){var g=this,w;if(this.validateProps(h),!this.editor||this.state.generation!==p.generation)return!0;if("value"in h){var _=this.getEditorContents(),v=(w=h.value,w??"");this.isEqualValue(v,_)||this.setEditorContents(this.editor,v)}return h.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,h.readOnly),t(this.cleanProps,this.dirtyProps).some(function(A){return!o.default(h[A],g.props[A])})},f.prototype.shouldComponentRegenerate=function(h){var p=this;return this.dirtyProps.some(function(g){return!o.default(h[g],p.props[g])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(h,p){var g=this;if(this.editor&&this.shouldComponentRegenerate(h)){var w=this.editor.getContents(),_=this.editor.getSelection();this.regenerationSnapshot={delta:w,selection:_},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var v=this.regenerationSnapshot,w=v.delta,A=v.selection;delete this.regenerationSnapshot,this.instantiateEditor();var S=this.editor;S.setContents(w),u(function(){return g.setEditorSelection(S,A)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(h,p){var g=new a.default(h,p);return p.tabIndex!=null&&this.setEditorTabIndex(g,p.tabIndex),this.hookEditor(g),g},f.prototype.hookEditor=function(h){this.unprivilegedEditor=this.makeUnprivilegedEditor(h),h.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(h){h.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(h){return h&&h.ops},f.prototype.isEqualValue=function(h,p){return this.isDelta(h)&&this.isDelta(p)?o.default(h.ops,p.ops):o.default(h,p)},f.prototype.setEditorContents=function(h,p){var g=this;this.value=p;var w=this.getEditorSelection();typeof p=="string"?h.setContents(h.clipboard.convert(p)):h.setContents(p),u(function(){return g.setEditorSelection(h,w)})},f.prototype.setEditorSelection=function(h,p){if(this.selection=p,p){var g=h.getLength();p.index=Math.max(0,Math.min(p.index,g-1)),p.length=Math.max(0,Math.min(p.length,g-1-p.index)),h.setSelection(p)}},f.prototype.setEditorTabIndex=function(h,p){var g,w;!((w=(g=h)===null||g===void 0?void 0:g.scroll)===null||w===void 0)&&w.domNode&&(h.scroll.domNode.tabIndex=p)},f.prototype.setEditorReadOnly=function(h,p){p?h.disable():h.enable()},f.prototype.makeUnprivilegedEditor=function(h){var p=h;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var h=s.default.findDOMNode(this.editingArea);if(!h)throw new Error("Cannot find element for editing area");if(h.nodeType===3)throw new Error("Editing area cannot be a text node");return h},f.prototype.renderEditingArea=function(){var h=this,p=this.props,g=p.children,w=p.preserveWhitespace,_=this.state.generation,v={key:_,ref:function(A){h.editingArea=A}};return i.default.Children.count(g)?i.default.cloneElement(i.default.Children.only(g),v):w?i.default.createElement("pre",e({},v)):i.default.createElement("div",e({},v))},f.prototype.render=function(){var h;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(h=this.props.className,h??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(h,p,g,w){var _,v;if(this.editor){var A=this.isDelta(this.value)?w.getContents():w.getHTML();A!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=A,(v=(_=this.props).onChange)===null||v===void 0||v.call(_,h,p,g,w))}},f.prototype.onEditorChangeSelection=function(h,p,g){var w,_,v,A,S,b;if(this.editor){var C=this.getEditorSelection(),L=!C&&h,R=C&&!h;o.default(h,C)||(this.selection=h,(_=(w=this.props).onChangeSelection)===null||_===void 0||_.call(w,h,p,g),L?(A=(v=this.props).onFocus)===null||A===void 0||A.call(v,h,p,g):R&&((b=(S=this.props).onBlur)===null||b===void 0||b.call(S,C,p,g)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=a.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f}(i.default.Component);function u(c){Promise.resolve().then(c)}return ll=l,ll}var yTe=gTe();const vTe=Ma(yTe),iy=({value:n,onChange:e,name:t,error:r})=>{const[i,s]=W.useState(!1),o=W.useRef(null);return W.useEffect(()=>{s(!0)},[]),i?N.jsxs("div",{className:"mb-6",children:[N.jsx("label",{className:"block text-lg font-medium text-gray-700",children:"Content"}),N.jsx(vTe,{ref:o,value:n||"",onChange:e,modules:{toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline","strike"],[{align:[]}],["link"],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],["blockquote"],[{color:[]},{background:[]}]]},formats:["header","font","list","bold","italic","underline","strike","align","link","indent","direction","blockquote","color","background"],className:"react-quill-editor"}),r&&N.jsx(_de,{name:t,component:"div",className:"text-red-500 text-xs mt-2"})]}):null},_Te=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function sy(n,e,t){const r=xTe(n),{webkitRelativePath:i}=n,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${n.name}`;return typeof r.path!="string"&&S9(r,"path",s),S9(r,"relativePath",s),r}function xTe(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),i=_Te.get(r);i&&Object.defineProperty(n,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return n}function S9(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const wTe=[".DS_Store","Thumbs.db"];function ATe(n){return Rp(this,void 0,void 0,function*(){return jE(n)&&ETe(n.dataTransfer)?CTe(n.dataTransfer,n.type):bTe(n)?STe(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?TTe(n):[]})}function ETe(n){return jE(n)}function bTe(n){return jE(n)&&jE(n.target)}function jE(n){return typeof n=="object"&&n!==null}function STe(n){return NP(n.target.files).map(e=>sy(e))}function TTe(n){return Rp(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>sy(t))})}function CTe(n,e){return Rp(this,void 0,void 0,function*(){if(n.items){const t=NP(n.items).filter(i=>i.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(MTe));return T9(gW(r))}return T9(NP(n.files).map(t=>sy(t)))})}function T9(n){return n.filter(e=>wTe.indexOf(e.name)===-1)}function NP(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function MTe(n){if(typeof n.webkitGetAsEntry!="function")return C9(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?yW(e):C9(n,e)}function gW(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?gW(t):[t]],[])}function C9(n,e){return Rp(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,sy(o)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return sy(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function RTe(n){return Rp(this,void 0,void 0,function*(){return n.isDirectory?yW(n):PTe(n)})}function yW(n){const e=n.createReader();return new Promise((t,r)=>{const i=[];function s(){e.readEntries(o=>Rp(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(RTe));i.push(a),s()}else try{const a=yield Promise.all(i);t(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function PTe(n){return Rp(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const i=sy(r,n.fullPath);e(i)},r=>{t(r)})})})}var Mw={},M9;function ITe(){return M9||(M9=1,Mw.__esModule=!0,Mw.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",i=(n.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0}),Mw}var kTe=ITe();const W2=Ma(kTe);function R9(n){return LTe(n)||DTe(n)||_W(n)||OTe()}function OTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DTe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function LTe(n){if(Array.isArray(n))return BP(n)}function P9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function I9(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?P9(Object(t),!0).forEach(function(r){vW(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):P9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function vW(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S0(n,e){return FTe(n)||BTe(n,e)||_W(n,e)||NTe()}function NTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _W(n,e){if(n){if(typeof n=="string")return BP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return BP(n,e)}}function BP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function BTe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function FTe(n){if(Array.isArray(n))return n}var UTe=typeof W2=="function"?W2:W2.default,jTe="file-invalid-type",VTe="file-too-large",zTe="file-too-small",HTe="too-many-files",GTe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:jTe,message:"File type must be ".concat(r)}},k9=function(e){return{code:VTe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},O9=function(e){return{code:zTe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},qTe={code:HTe,message:"Too many files"};function xW(n,e){var t=n.type==="application/x-moz-file"||UTe(n,e);return[t,t?null:GTe(e)]}function wW(n,e,t){if(Gd(n.size))if(Gd(e)&&Gd(t)){if(n.size>t)return[!1,k9(t)];if(n.size<e)return[!1,O9(e)]}else{if(Gd(e)&&n.size<e)return[!1,O9(e)];if(Gd(t)&&n.size>t)return[!1,k9(t)]}return[!0,null]}function Gd(n){return n!=null}function WTe(n){var e=n.files,t=n.accept,r=n.minSize,i=n.maxSize,s=n.multiple,o=n.maxFiles,a=n.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var u=xW(l,t),c=S0(u,1),f=c[0],h=wW(l,r,i),p=S0(h,1),g=p[0],w=a?a(l):null;return f&&g&&!w})}function VE(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Rw(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function D9(n){n.preventDefault()}function $Te(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function KTe(n){return n.indexOf("Edge/")!==-1}function JTe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return $Te(n)||KTe(n)}function Hl(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!VE(r)&&a&&a.apply(void 0,[r].concat(s)),VE(r)})}}function XTe(){return"showOpenFilePicker"in window}function YTe(n){if(Gd(n)){var e=Object.entries(n).filter(function(t){var r=S0(t,2),i=r[0],s=r[1],o=!0;return AW(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(EW))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(t,r){var i=S0(r,2),s=i[0],o=i[1];return I9(I9({},t),{},vW({},s,o))},{});return[{description:"Files",accept:e}]}return n}function QTe(n){if(Gd(n))return Object.entries(n).reduce(function(e,t){var r=S0(t,2),i=r[0],s=r[1];return[].concat(R9(e),[i],R9(s))},[]).filter(function(e){return AW(e)||EW(e)}).join(",")}function ZTe(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function eCe(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function AW(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function EW(n){return/^.*\.[\w]+$/.test(n)}var tCe=["children"],nCe=["open"],rCe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],iCe=["refKey","onChange","onClick"];function sCe(n){return lCe(n)||aCe(n)||bW(n)||oCe()}function oCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function lCe(n){if(Array.isArray(n))return FP(n)}function $2(n,e){return fCe(n)||cCe(n,e)||bW(n,e)||uCe()}function uCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bW(n,e){if(n){if(typeof n=="string")return FP(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return FP(n,e)}}function FP(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function cCe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,s=!1,o,a;try{for(t=t.call(n);!(i=(o=t.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw a}}return r}}function fCe(n){if(Array.isArray(n))return n}function L9(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function zr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(t),!0).forEach(function(r){UP(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):L9(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function UP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function zE(n,e){if(n==null)return{};var t=hCe(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function hCe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var aO=W.forwardRef(function(n,e){var t=n.children,r=zE(n,tCe),i=TW(r),s=i.open,o=zE(i,nCe);return W.useImperativeHandle(e,function(){return{open:s}},[s]),Jt.createElement(W.Fragment,null,t(zr(zr({},o),{},{open:s})))});aO.displayName="Dropzone";var SW={disabled:!1,getFilesFromEvent:ATe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};aO.defaultProps=SW;aO.propTypes={children:gr.func,accept:gr.objectOf(gr.arrayOf(gr.string)),multiple:gr.bool,preventDropOnDocument:gr.bool,noClick:gr.bool,noKeyboard:gr.bool,noDrag:gr.bool,noDragEventsBubbling:gr.bool,minSize:gr.number,maxSize:gr.number,maxFiles:gr.number,disabled:gr.bool,getFilesFromEvent:gr.func,onFileDialogCancel:gr.func,onFileDialogOpen:gr.func,useFsAccessApi:gr.bool,autoFocus:gr.bool,onDragEnter:gr.func,onDragLeave:gr.func,onDragOver:gr.func,onDrop:gr.func,onDropAccepted:gr.func,onDropRejected:gr.func,onError:gr.func,validator:gr.func};var jP={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function TW(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=zr(zr({},SW),n),t=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,c=e.onDragLeave,f=e.onDragOver,h=e.onDrop,p=e.onDropAccepted,g=e.onDropRejected,w=e.onFileDialogCancel,_=e.onFileDialogOpen,v=e.useFsAccessApi,A=e.autoFocus,S=e.preventDropOnDocument,b=e.noClick,C=e.noKeyboard,L=e.noDrag,R=e.noDragEventsBubbling,k=e.onError,O=e.validator,M=W.useMemo(function(){return QTe(t)},[t]),D=W.useMemo(function(){return YTe(t)},[t]),U=W.useMemo(function(){return typeof _=="function"?_:N9},[_]),F=W.useMemo(function(){return typeof w=="function"?w:N9},[w]),$=W.useRef(null),Z=W.useRef(null),se=W.useReducer(dCe,jP),ce=$2(se,2),Q=ce[0],ee=ce[1],Y=Q.isFocused,V=Q.isFileDialogActive,X=W.useRef(typeof window<"u"&&window.isSecureContext&&v&&XTe()),re=function(){!X.current&&V&&setTimeout(function(){if(Z.current){var ve=Z.current.files;ve.length||(ee({type:"closeDialog"}),F())}},300)};W.useEffect(function(){return window.addEventListener("focus",re,!1),function(){window.removeEventListener("focus",re,!1)}},[Z,V,F,X]);var oe=W.useRef([]),fe=function(ve){$.current&&$.current.contains(ve.target)||(ve.preventDefault(),oe.current=[])};W.useEffect(function(){return S&&(document.addEventListener("dragover",D9,!1),document.addEventListener("drop",fe,!1)),function(){S&&(document.removeEventListener("dragover",D9),document.removeEventListener("drop",fe))}},[$,S]),W.useEffect(function(){return!r&&A&&$.current&&$.current.focus(),function(){}},[$,A,r]);var te=W.useCallback(function(de){k?k(de):console.error(de)},[k]),ue=W.useCallback(function(de){de.preventDefault(),de.persist(),Le(de),oe.current=[].concat(sCe(oe.current),[de.target]),Rw(de)&&Promise.resolve(i(de)).then(function(ve){if(!(VE(de)&&!R)){var Ae=ve.length,He=Ae>0&&WTe({files:ve,accept:M,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:O}),qe=Ae>0&&!He;ee({isDragAccept:He,isDragReject:qe,isDragActive:!0,type:"setDraggedFiles"}),u&&u(de)}}).catch(function(ve){return te(ve)})},[i,u,te,R,M,o,s,a,l,O]),ye=W.useCallback(function(de){de.preventDefault(),de.persist(),Le(de);var ve=Rw(de);if(ve&&de.dataTransfer)try{de.dataTransfer.dropEffect="copy"}catch{}return ve&&f&&f(de),!1},[f,R]),xe=W.useCallback(function(de){de.preventDefault(),de.persist(),Le(de);var ve=oe.current.filter(function(He){return $.current&&$.current.contains(He)}),Ae=ve.indexOf(de.target);Ae!==-1&&ve.splice(Ae,1),oe.current=ve,!(ve.length>0)&&(ee({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Rw(de)&&c&&c(de))},[$,c,R]),Te=W.useCallback(function(de,ve){var Ae=[],He=[];de.forEach(function(qe){var lt=xW(qe,M),yt=$2(lt,2),Ye=yt[0],vt=yt[1],kt=wW(qe,o,s),Ft=$2(kt,2),Et=Ft[0],nn=Ft[1],Gt=O?O(qe):null;if(Ye&&Et&&!Gt)Ae.push(qe);else{var Tn=[vt,nn];Gt&&(Tn=Tn.concat(Gt)),He.push({file:qe,errors:Tn.filter(function(be){return be})})}}),(!a&&Ae.length>1||a&&l>=1&&Ae.length>l)&&(Ae.forEach(function(qe){He.push({file:qe,errors:[qTe]})}),Ae.splice(0)),ee({acceptedFiles:Ae,fileRejections:He,isDragReject:He.length>0,type:"setFiles"}),h&&h(Ae,He,ve),He.length>0&&g&&g(He,ve),Ae.length>0&&p&&p(Ae,ve)},[ee,a,M,o,s,l,h,p,g,O]),$e=W.useCallback(function(de){de.preventDefault(),de.persist(),Le(de),oe.current=[],Rw(de)&&Promise.resolve(i(de)).then(function(ve){VE(de)&&!R||Te(ve,de)}).catch(function(ve){return te(ve)}),ee({type:"reset"})},[i,Te,te,R]),De=W.useCallback(function(){if(X.current){ee({type:"openDialog"}),U();var de={multiple:a,types:D};window.showOpenFilePicker(de).then(function(ve){return i(ve)}).then(function(ve){Te(ve,null),ee({type:"closeDialog"})}).catch(function(ve){ZTe(ve)?(F(ve),ee({type:"closeDialog"})):eCe(ve)?(X.current=!1,Z.current?(Z.current.value=null,Z.current.click()):te(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):te(ve)});return}Z.current&&(ee({type:"openDialog"}),U(),Z.current.value=null,Z.current.click())},[ee,U,F,v,Te,te,D,a]),Be=W.useCallback(function(de){!$.current||!$.current.isEqualNode(de.target)||(de.key===" "||de.key==="Enter"||de.keyCode===32||de.keyCode===13)&&(de.preventDefault(),De())},[$,De]),he=W.useCallback(function(){ee({type:"focus"})},[]),rt=W.useCallback(function(){ee({type:"blur"})},[]),Je=W.useCallback(function(){b||(JTe()?setTimeout(De,0):De())},[b,De]),nt=function(ve){return r?null:ve},we=function(ve){return C?null:nt(ve)},Pe=function(ve){return L?null:nt(ve)},Le=function(ve){R&&ve.stopPropagation()},ie=W.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=de.refKey,Ae=ve===void 0?"ref":ve,He=de.role,qe=de.onKeyDown,lt=de.onFocus,yt=de.onBlur,Ye=de.onClick,vt=de.onDragEnter,kt=de.onDragOver,Ft=de.onDragLeave,Et=de.onDrop,nn=zE(de,rCe);return zr(zr(UP({onKeyDown:we(Hl(qe,Be)),onFocus:we(Hl(lt,he)),onBlur:we(Hl(yt,rt)),onClick:nt(Hl(Ye,Je)),onDragEnter:Pe(Hl(vt,ue)),onDragOver:Pe(Hl(kt,ye)),onDragLeave:Pe(Hl(Ft,xe)),onDrop:Pe(Hl(Et,$e)),role:typeof He=="string"&&He!==""?He:"presentation"},Ae,$),!r&&!C?{tabIndex:0}:{}),nn)}},[$,Be,he,rt,Je,ue,ye,xe,$e,C,L,r]),q=W.useCallback(function(de){de.stopPropagation()},[]),me=W.useMemo(function(){return function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=de.refKey,Ae=ve===void 0?"ref":ve,He=de.onChange,qe=de.onClick,lt=zE(de,iCe),yt=UP({accept:M,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:nt(Hl(He,$e)),onClick:nt(Hl(qe,q)),tabIndex:-1},Ae,Z);return zr(zr({},yt),lt)}},[Z,t,a,$e,r]);return zr(zr({},Q),{},{isFocused:Y&&!r,getRootProps:ie,getInputProps:me,rootRef:$,inputRef:Z,open:nt(De)})}function dCe(n,e){switch(e.type){case"focus":return zr(zr({},n),{},{isFocused:!0});case"blur":return zr(zr({},n),{},{isFocused:!1});case"openDialog":return zr(zr({},jP),{},{isFileDialogActive:!0});case"closeDialog":return zr(zr({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return zr(zr({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return zr(zr({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return zr({},jP);default:return n}}function N9(){}const oy=({name:n,value:e,setFieldValue:t,error:r,touched:i,onFileRemove:s})=>{const[o,a]=W.useState(e||[]),l=p=>{const g=[...o,...p.map(w=>({file:w,icon:URL.createObjectURL(w),type:"file"}))];a(g),t(n,g)};W.useEffect(()=>{e&&e.length>0&&a(e.map(p=>p.icon?{icon:p.icon,type:"url"}:p))},[e]);const u=p=>p.type==="file"||p.icon?p.icon:null,{getRootProps:c,getInputProps:f}=TW({accept:"image/*",onDrop:l}),h=p=>{const g=o[p],w=o.filter((_,v)=>v!==p);a(w),t(n,w),s&&s(g.icon)};return N.jsxs("div",{className:"space-y-2",children:[N.jsxs("div",{...c(),className:"flex justify-center items-center border-dashed border-2 p-4 rounded-lg border-gray-400 hover:bg-gray-50 cursor-pointer",children:[N.jsx("input",{...f()}),N.jsx(jpe,{className:"text-2xl text-gray-600"}),N.jsx("p",{className:"text-sm text-gray-600 ml-2",children:"Drag & Drop or Click to Upload"})]}),r&&i&&N.jsx("p",{className:"text-red-500 text-sm mt-1",children:r}),N.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:o.length>0&&o.map((p,g)=>N.jsxs("div",{className:"relative",children:[p.type==="url"?N.jsx("img",{src:p.icon,alt:`Icon ${g}`,className:"w-24 h-24 object-cover rounded-lg"}):N.jsx("img",{src:u(p),alt:p.file?p.file.name:`Icon ${g}`,className:"w-24 h-24 object-cover rounded-lg"}),N.jsx("button",{onClick:()=>h(g),className:"absolute top-0 right-0 bg-gray-700 text-white rounded-full p-1 text-xs",children:N.jsx(WH,{})})]},g))})]})},ay=async(n,e)=>{const t=[],r=Date.now();try{for(const i of n){const s=i.file;if(!s||!s.name){console.error("Invalid file detected. Skipping this file.",s);continue}console.log("Uploading file:",s.name);const o=`${e}/${r}-${s.name}`,{data:a,error:l}=await gp.storage.from("storage").upload(o,s);if(l)throw new Error(`Failed to upload ${s.name}: ${l.message}`);const{data:u,error:c}=gp.storage.from("storage").getPublicUrl(o);if(c)throw new Error(`Failed to get public URL for ${s.name}: ${c.message}`);console.log("File uploaded successfully. Public URL:",u),t.push(u)}return t}catch(i){return console.error("Error uploading files:",i.message),[]}},ly=async n=>{try{const e=Array.isArray(n)?n:[n];for(const t of e){if(!t.publicUrl||typeof t.publicUrl!="string")throw new Error('Each object must have a valid "publicUrl" field that is a string');const r=t.publicUrl,i=r.split("/storage/v1/object/public/storage/");if(i.length<2)throw new Error(`Invalid URL format: ${r}`);const s=i[1],{error:o}=await gp.storage.from("storage").remove([s]);if(o)return console.error("Error deleting file:",o.message),{success:!1,message:o.message}}return{success:!0,message:"Files deleted successfully"}}catch(e){return console.error("Unexpected error:",e),{success:!1,message:e.message}}},pCe=zp({title:Ri().required("Title is required"),university_name:Ri().required("University Name is required"),college_name:Ri().required("College Name is required"),icons:Vk().min(1,"At least one icon is required"),startDate:$g().required("Start Date is required"),endDate:$g().required("End Date is required"),contents:Ri().required("Content is required"),urlofCompany:Ri().required("URL of Company is required")}),CW=({editData:n,handleEditSuccess:e})=>{var u;const[t,r]=W.useState((n==null?void 0:n.contents)||"");W.useState([]),W.useState("");const{enqueueSnackbar:i}=hu();console.log("Edit data on academics",n);const s={title:(n==null?void 0:n.title)||"",university_name:(n==null?void 0:n.university_name)||"",college_name:(n==null?void 0:n.college_name)||"",icons:((u=n==null?void 0:n.icons)==null?void 0:u.map(c=>({icon:c.publicUrl})))||[],startDate:(n==null?void 0:n.startDate)||"",endDate:(n==null?void 0:n.endDate)||"",contents:(n==null?void 0:n.contents)||"",focusedField:"",urlofCompany:(n==null?void 0:n.urlofCompany)||""},o=async(c,{setSubmitting:f,resetForm:h,setFieldValue:p})=>{try{let g=[];c.icons&&c.icons.length>0&&(g=await ay(c.icons,"academics")),g.length===0&&n&&(g=n.icons||[]);const w={title:c.title,university_name:c.university_name,college_name:c.college_name,icons:g,startDate:c.startDate,endDate:c.endDate,contents:t,urlofCompany:c.urlofCompany};n?(await Ug(Hr(en,"academics",n.id),w),i("Academic data updated successfully!",{variant:"success"}),p("icons",[])):(await mp(Kr(en,"academics"),w),i("Academic data submitted successfully!",{variant:"success"})),p("title",""),p("university_name",""),p("college_name",""),p("icons",[]),p("startDate",""),p("endDate",""),p("contents",""),p("urlofCompany",""),r(""),h(),f(!1),window.location.reload()}catch(g){console.error("Error submitting form:",g),i("Failed to submit academic data. Please try again.",{variant:"error"}),f(!1)}},a=c=>{console.log("URL ontained inside handleFileRemove:",c),l(c)};async function l(c){const f=c.split("/storage/v1/object/public/storage/")[1];console.log(f,"File Path on delete");const{data:h,error:p}=await gp.storage.from("storage").remove([f]);console.log("data",h),i("Image delete successfully!",{variant:"success"}),p?console.error("Error deleting file:",p):console.log("File deleted successfully from supabase")}return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"Edit Academic":"Add Academic"}),N.jsx(Pb,{initialValues:s,validationSchema:pCe,onSubmit:o,children:({setFieldValue:c,values:f,touched:h,errors:p,handleBlur:g,handleChange:w})=>N.jsxs(K0,{className:"space-y-6",children:[N.jsx(er,{name:"title",type:"text",label:"Title",value:f.title,onChange:_=>c("title",_.target.value),onBlur:g,error:p.title,touched:h.title,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"university_name",type:"text",label:"University Name",value:f.university_name,onChange:_=>c("university_name",_.target.value),onBlur:g,error:p.university_name,touched:h.university_name,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"college_name",type:"text",label:"College Name",value:f.college_name,onChange:_=>c("college_name",_.target.value),onBlur:g,error:p.college_name,touched:h.college_name,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(oy,{name:"icons",value:f.icons,setFieldValue:c,error:p.icons,touched:h.icons,onFileRemove:a}),N.jsx(er,{name:"urlofCompany",type:"text",label:"urlofCompany",value:f.urlofCompany,onChange:_=>c("urlofCompany",_.target.value),onBlur:g,error:p.urlofCompany,touched:h.urlofCompany,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"startDate",type:"date",label:"Start Date",value:f.startDate,onChange:_=>c("startDate",_.target.value),onBlur:g,error:p.startDate,touched:h.startDate,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"endDate",type:"date",label:"End Date",value:f.endDate,onChange:_=>c("endDate",_.target.value),onBlur:g,error:p.endDate,touched:h.endDate,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(iy,{value:t,onChange:_=>{r(_),c("contents",_)},name:"contents",error:p.contents}),h.contents&&p.contents&&N.jsx("p",{className:"text-red-500 text-sm mt-2",children:p.contents}),N.jsx(on.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},mCe=()=>{const[n,e]=W.useState([]);_h();const{enqueueSnackbar:t}=hu(),[r,i]=W.useState(!1),[s,o]=W.useState(null),[a,l]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const w=(await Gs(Kr(en,"academics"))).docs.map(_=>({id:_.id,..._.data()}));w.sort((_,v)=>{var b,C;const A=(b=_.createdAt)!=null&&b.toDate?_.createdAt.toDate():new Date,S=(C=v.createdAt)!=null&&C.toDate?v.createdAt.toDate():new Date;return A-S}),e(w),l(!1)}catch(g){console.error("Error fetching academics: ",g)}})()},[a]);const u=p=>{const g=n.find(w=>w.id===p);console.log("Edit data on handle Edit",g),o(g),i(!0)},c=()=>{console.log("Edit success"),i(!1),l(!0)},f=async p=>{try{const g=Hr(en,"academics",p);console.log("Document reference:",g);const w=await Ea(g);if(!w.exists()){console.error("Document not found."),t("Academic data not found.",{variant:"error"});return}const _=w.data();console.log("Academic data:",_);const v=_.icons;console.log("File URL:",v);const A=await ly(v,"academics");console.log("Delete",A),await hh(Hr(en,"academics",p)),e(n.filter(S=>S.id!==p)),t("Academic data deleted successfully!",{variant:"success"})}catch{t("Failed to delete academic data. Please try again.",{variant:"error"})}},h=()=>{i(!1)};return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Academics"}),N.jsxs("table",{className:"w-full table-auto",children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"University"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"College"}),N.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),N.jsx("tbody",{children:n.map(p=>N.jsxs("tr",{children:[N.jsx("td",{className:"px-4 py-2",children:p.title}),N.jsx("td",{className:"px-4 py-2",children:p.university_name}),N.jsx("td",{className:"px-4 py-2",children:p.college_name}),N.jsxs("td",{className:"px-4 py-2 text-center",children:[N.jsx("button",{onClick:()=>u(p.id),className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",children:"Edit"}),N.jsx("button",{onClick:()=>f(p.id),className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Delete"})]})]},p.id))})]}),r&&N.jsx(nh,{onClose:h,title:s?"Edit Academic":"Add Academic",children:N.jsx("div",{className:"w-full",children:N.jsx(CW,{editData:s,handleEditSuccess:c})})})]})};var uy=function(){return uy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},uy.apply(this,arguments)},gCe={2e3:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2001:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2002:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2003:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2004:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2005:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2006:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2007:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2008:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2009:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2010:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2011:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2012:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2013:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2014:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2015:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2016:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2017:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2018:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2019:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2020:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2021:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2022:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2023:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2024:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2025:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2026:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2027:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2028:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2029:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2030:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2031:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2032:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2033:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2034:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2035:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2036:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2037:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2038:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2039:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2040:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2041:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2042:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2043:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2044:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2045:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2046:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2047:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2048:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2049:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2050:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2051:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2052:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2053:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2054:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2055:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2056:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:32,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2057:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2058:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2059:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2060:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2061:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2062:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2063:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2064:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2065:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2066:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:29,Chaitra:31},2067:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2068:{Baisakh:31,Jestha:31,Asar:32,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2069:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2070:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:29,Mangsir:30,Poush:30,Magh:29,Falgun:30,Chaitra:30},2071:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2072:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2073:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2074:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2075:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2076:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2077:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2078:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2079:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2080:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:30},2081:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2082:{Baisakh:31,Jestha:31,Asar:31,Shrawan:32,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2083:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2084:{Baisakh:31,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:29,Falgun:30,Chaitra:31},2085:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:29,Chaitra:31},2086:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:29,Poush:30,Magh:29,Falgun:30,Chaitra:30},2087:{Baisakh:31,Jestha:31,Asar:32,Shrawan:31,Bhadra:31,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2088:{Baisakh:30,Jestha:31,Asar:32,Shrawan:32,Bhadra:30,Aswin:31,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2089:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30},2090:{Baisakh:30,Jestha:32,Asar:31,Shrawan:32,Bhadra:31,Aswin:30,Kartik:30,Mangsir:30,Poush:29,Magh:30,Falgun:30,Chaitra:30}},VP;(function(n){n.np="np",n.en="en"})(VP||(VP={}));var MW=Object.values(gCe).map(function(n){return Object.values(n)}),zP=MW.map(function(n){var e=0;return n.map(function(t){var r=[t,e];return e+=t,r})},[]),HP=0,HE=MW.map(function(n){var e=n.reduce(function(r,i){return r+i},0),t=[e,HP];return HP+=e,t}),GE=33238;if(HP!==GE)throw new Error("Invalid constant initialization for Nepali Date.");var GP=1;function yCe(n){return n-RW}function vCe(n){return n+RW}var RW=2e3,uc=1,B9=0;function _Ce(n,e){for(;e<0;)e+=n;return e%n}var v_={en:{day:{short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},month:{short:["Bai","Jes","Asa","Shr","Bhd","Asw","Kar","Man","Pou","Mag","Fal","Cha"],long:["Baisakh","Jestha","Asar","Shrawan","Bhadra","Aswin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"]},date:["0","1","2","3","4","5","6","7","8","9"]},np:{day:{short:["","","","","","",""],long:["","","","","","",""]},month:{short:["","","","","","","","","","","",""],long:["","","","","","","","","","","",""]},date:["","","","","","","","","",""]}},K2={year:1943,month:3,date:13,day:3};function xCe(n,e,t){try{var r=yCe(n),i=HE[r][uc],s=_Ce(12,e),o=Math.floor(e/12),a=HE[r+o][uc]-i+zP[r+o][s][uc],l=i+a+t;if(l<GP||l>GE)throw new Error;return l}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function PW(n){if(n<GP||n>GE)throw new Error("The epoch difference is not within the boundaries ".concat(GP," - ").concat(GE));var e=HE.findIndex(function(s){return n>s[uc]&&n<=s[uc]+s[B9]}),t=n-HE[e][uc],r=zP[e].findIndex(function(s){return t>s[uc]&&t<=s[uc]+s[B9]}),i=t-zP[e][r][uc];return{year:vCe(e),month:r,date:i}}function wCe(n,e,t){var r=Math.abs(Date.UTC(n,e,t)-Date.UTC(K2.year,K2.month,K2.date)),i=Math.ceil(r/(1e3*3600*24));return i}function IW(n){var e=new Date(Date.UTC(1943,3,13+n));return{year:e.getUTCFullYear(),month:e.getUTCMonth(),date:e.getUTCDate(),day:e.getUTCDay()}}function ACe(n){try{var e=xCe(n.year,n.month,n.date),t=PW(e),r=IW(e);return{AD:r,BS:uy(uy({},t),{day:r.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function ECe(n){try{var e=wCe(n.getFullYear(),n.getMonth(),n.getDate()),t=PW(e),r=IW(e);return{AD:r,BS:uy(uy({},t),{day:r.day})}}catch{throw new Error("The date doesn't fall within 2000/01/01 - 2090/12/30")}}function Of(n,e){return n.split("").map(function(t){return v_[e].date[parseInt(t,10)]}).join("")}function bCe(n,e,t){return e.replace(/((\\[MDYd])|D{1,2}|M{1,4}|Y{2,4}|d{1,3})/g,function(r,i,s){var o;switch(r){case"D":return Of(n.date.toString(),t);case"DD":return Of(n.date.toString().padStart(2,"0"),t);case"M":return Of((n.month+1).toString(),t);case"MM":return Of((n.month+1).toString().padStart(2,"0"),t);case"MMM":return v_[t].month.short[n.month];case"MMMM":return v_[t].month.long[n.month];case"YY":return Of(n.year.toString().slice(-2),t);case"YYY":return Of(n.year.toString().slice(-3),t);case"YYYY":return Of(n.year.toString(),t);case"d":return Of(((o=n.day)===null||o===void 0?void 0:o.toString())||"0",t);case"dd":return v_[t].day.short[n.day||0];case"ddd":return v_[t].day.long[n.day||0];default:return s.replace("/","")}}).replace(/\\/g,"")}function F9(n){var e=/(\d{4})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})/,t=/(\d{1,2})\s*([/-]|\s+)\s*(\d{1,2})\s*([/-]|\s+)\s*(\d{4})/,r;if(r=n.match(e),r!==null)return{year:parseInt(r[1],10),month:parseInt(r[3],10)-1,date:parseInt(r[5],10)};if(r=n.match(t),r!==null)return{year:parseInt(r[5],10),month:parseInt(r[3],10)-1,date:parseInt(r[1],10)};throw new Error("Invalid date format")}var Rd=Symbol("Date"),J2=Symbol("Day"),Pd=Symbol("Year"),Id=Symbol("MonthIndex"),kd=Symbol("JsDate"),Pw=Symbol("convertToBS()"),ig=Symbol("convertToAD()"),X2=Symbol("setADBS()"),Iw=Symbol("setDayYearMonth()"),kW=function(){function n(){var e=new Error("Invalid constructor arguments");if(arguments.length===0)this[Pw](new Date);else if(arguments.length===1){var t=arguments[0];switch(typeof t){case"number":this[Pw](new Date(t));break;case"string":var r=F9(t),i=r.date,s=r.year,o=r.month;this[Iw](s,o,i),this[ig]();break;case"object":if(t instanceof Date)this[Pw](t);else throw e;break;default:throw e}}else if(arguments.length<=3)this[Iw](arguments[0],arguments[1],arguments[2]),this[ig]();else throw e}return n.prototype[Iw]=function(e,t,r,i){t===void 0&&(t=0),r===void 0&&(r=1),i===void 0&&(i=0),this[Pd]=e,this[Id]=t,this[Rd]=r,this[J2]=i},n.prototype.toJsDate=function(){return this[kd]},n.prototype.getDate=function(){return this[Rd]},n.prototype.getYear=function(){return this[Pd]},n.prototype.getDay=function(){return this[J2]},n.prototype.getMonth=function(){return this[Id]},n.prototype.getDateObject=function(){return{BS:this.getBS(),AD:this.getAD()}},n.prototype.getBS=function(){return{year:this[Pd],month:this[Id],date:this[Rd],day:this[J2]}},n.prototype.getAD=function(){return{year:this[kd].getFullYear(),month:this[kd].getMonth(),date:this[kd].getDate(),day:this[kd].getDay()}},n.prototype.setDate=function(e){var t=this[Rd];try{this[Rd]=e,this[ig]()}catch(r){throw this[Rd]=t,r}},n.prototype.setMonth=function(e){var t=this[Id];try{this[Id]=e,this[ig]()}catch(r){throw this[Id]=t,r}},n.prototype.setYear=function(e){var t=this[Pd];try{this[Pd]=e,this[ig]()}catch(r){throw this[Pd]=t,r}},n.prototype.format=function(e,t){return t===void 0&&(t=n.language),bCe(this.getBS(),e,t)},n.parse=function(e){var t=F9(e),r=t.date,i=t.year,s=t.month;return new n(i,s,r)},n.now=function(){return new n},n.fromAD=function(e){return new n(e)},n.prototype[Pw]=function(e){var t=ECe(e),r=t.AD,i=t.BS;this[X2](r,i)},n.prototype[X2]=function(e,t){this[Iw](t.year,t.month,t.date,t.day),this[kd]=new Date(e.year,e.month,e.date)},n.prototype[ig]=function(){var e=ACe({year:this[Pd],month:this[Id],date:this[Rd]}),t=e.AD,r=e.BS;this[X2](t,r)},n.prototype.valueOf=function(){return this[kd].getTime()},n.prototype.toString=function(){return this.format("ddd DD, MMMM YYYY")},n.language=VP.en,n}();const SCe=({selectedYear:n,selectedMonth:e,selectedDate:t,months:r,onDateClick:i})=>{const s=new kW(n,e-1,1),a=(h=>[30,31,30,31,30,31,30,31,30,31,30,30][h-1])(e),l=s.toJsDate().getDay(),u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=[];let f=[];for(let h=0;h<l;h++)f.push(N.jsx("td",{className:"p-2 text-center"},`empty-${h}`));for(let h=1;h<=a;h++){const p=h===t;f.push(N.jsxs("td",{className:`p-2 text-center border border-gray-300 cursor-pointer transition-all
          ${p?"bg-blue-500 text-white":"hover:bg-blue-200"}`,onClick:()=>i(h),children:[h," "]},h)),((h+l)%7===0||h===a)&&(c.push(N.jsx("tr",{children:f},h)),f=[])}return N.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-gray-100 rounded-lg shadow-md",children:[N.jsxs("h2",{className:"text-2xl font-bold mb-4 text-gray-800",children:[r[e-1]," ",n," "]}),N.jsxs("table",{className:"w-full max-w-md bg-white rounded-lg overflow-hidden shadow-sm",children:[N.jsx("thead",{children:N.jsx("tr",{className:"bg-gray-200",children:u.map(h=>N.jsx("th",{className:"p-2 text-center text-sm font-medium text-gray-700",children:h},h))})}),N.jsx("tbody",{children:c})]})]})},kw=["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Poush","Magh","Falgun","Chaitra"];function TCe(){const[n,e]=W.useState(2081),[t,r]=W.useState(1),[i,s]=W.useState(1),o=()=>{const p=new Date,g=p.getFullYear(),w=p.getMonth()+1,_=p.getDate();return{currentYear:g,currentMonth:w,currentDay:_}},{currentYear:a,currentMonth:l,currentDay:u}=o(),c=p=>e(parseInt(p.target.value)),f=p=>r(parseInt(p.target.value)),h=p=>{const g=new Date(p.target.value),w=new kW(g.getFullYear(),g.getMonth(),g.getDate());e(w.getYear()),r(w.getMonth()+1),s(w.getDate())};return N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-4",children:[N.jsxs("h1",{className:"text-3xl font-bold mb-8 text-gray-800",children:[kw[t-1]," ",n," "]}),N.jsxs("div",{className:"flex mb-4 space-x-4",children:[N.jsxs("div",{children:[N.jsx("label",{htmlFor:"year",className:"mr-2 font-medium text-gray-700",children:"Select Year:"}),N.jsx("select",{id:"year",value:n,onChange:c,className:"px-4 py-2 border border-gray-300 rounded-lg",children:Array.from({length:100},(p,g)=>2e3+g).map(p=>N.jsx("option",{value:p,children:p},p))})]}),N.jsxs("div",{children:[N.jsx("label",{htmlFor:"month",className:"mr-2 font-medium text-gray-700",children:"Select Month:"}),N.jsx("select",{id:"month",value:t,onChange:f,className:"px-4 py-2 border border-gray-300 rounded-lg",children:kw.map((p,g)=>N.jsx("option",{value:g+1,children:p},p))})]})]}),N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"gregorian-date",className:"mr-2 font-medium text-gray-700",children:"Select Date:"}),N.jsx("input",{id:"gregorian-date",type:"date",value:`${a}-${l<10?"0":""}${l}-${u<10?"0":""}${u}`,onChange:h,className:"px-4 py-2 border border-gray-300 rounded-lg"})]}),N.jsx(SCe,{selectedYear:n,selectedMonth:t,selectedDate:i,months:kw,onDateClick:p=>{s(p),console.log(`Selected Date: ${p} - ${kw[t-1]} ${n}`)}})]})}var Xv={},Y2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var U9;function OW(){return U9||(U9=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(Y2)),Y2.exports}var j9;function CCe(){if(j9)return Xv;j9=1,Xv.__esModule=!0,Xv.default=void 0;var n=r(vh()),e=r(vS()),t=r(OW());function r(o){return o&&o.__esModule?o:{default:o}}const i=({animate:o=!0,className:a="",layout:l="2-columns",lineColor:u="#FFF",children:c})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",u),n.default.createElement("div",{className:(0,t.default)(a,"vertical-timeline",{"vertical-timeline--animate":o,"vertical-timeline--two-columns":l==="2-columns","vertical-timeline--one-column-left":l==="1-column"||l==="1-column-left","vertical-timeline--one-column-right":l==="1-column-right"})},c));i.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=i;return Xv.default=s,Xv}var Yv={};function qP(){return qP=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qP.apply(this,arguments)}function MCe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,WP(n,e)}function WP(n,e){return WP=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},WP(n,e)}function RCe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}var $P=new Map,Ow=new WeakMap,V9=0,DW=void 0;function PCe(n){DW=n}function ICe(n){return n?(Ow.has(n)||(V9+=1,Ow.set(n,V9.toString())),Ow.get(n)):"0"}function kCe(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?ICe(n.root):n[e])}).toString()}function OCe(n){var e=kCe(n),t=$P.get(e);if(!t){var r=new Map,i,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&i.some(function(c){return a.intersectionRatio>=c});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=r.get(a.target))==null||l.forEach(function(c){c(u,a)})})},n);i=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:r},$P.set(e,t)}return t}function lO(n,e,t,r){if(t===void 0&&(t={}),r===void 0&&(r=DW),typeof window.IntersectionObserver>"u"&&r!==void 0){var i=n.getBoundingClientRect();return e(r,{isIntersecting:r,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var s=OCe(t),o=s.id,a=s.observer,l=s.elements,u=l.get(n)||[];return l.has(n)||l.set(n,u),u.push(e),a.observe(n),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),$P.delete(o))}}var DCe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function z9(n){return typeof n.children!="function"}var qE=function(n){MCe(e,n);function e(r){var i;return i=n.call(this,r)||this,i.node=null,i._unobserveCb=null,i.handleNode=function(s){i.node&&(i.unobserve(),!s&&!i.props.triggerOnce&&!i.props.skip&&i.setState({inView:!!i.props.initialInView,entry:void 0})),i.node=s||null,i.observeNode()},i.handleChange=function(s,o){s&&i.props.triggerOnce&&i.unobserve(),z9(i.props)||i.setState({inView:s,entry:o}),i.props.onChange&&i.props.onChange(s,o)},i.state={inView:!!r.initialInView,entry:void 0},i}var t=e.prototype;return t.componentDidUpdate=function(i){(i.rootMargin!==this.props.rootMargin||i.root!==this.props.root||i.threshold!==this.props.threshold||i.skip!==this.props.skip||i.trackVisibility!==this.props.trackVisibility||i.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var i=this.props,s=i.threshold,o=i.root,a=i.rootMargin,l=i.trackVisibility,u=i.delay,c=i.fallbackInView;this._unobserveCb=lO(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},c)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!z9(this.props)){var i=this.state,s=i.inView,o=i.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,c=RCe(a,DCe);return W.createElement(u||"div",qP({ref:this.handleNode},c),l)},e}(W.Component);qE.displayName="InView";qE.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function LCe(n){var e=n===void 0?{}:n,t=e.threshold,r=e.delay,i=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,c=e.fallbackInView,f=W.useRef(),h=W.useState({inView:!!u}),p=h[0],g=h[1],w=W.useCallback(function(v){f.current!==void 0&&(f.current(),f.current=void 0),!l&&v&&(f.current=lO(v,function(A,S){g({inView:A,entry:S}),S.isIntersecting&&a&&f.current&&(f.current(),f.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:i,delay:r},c))},[Array.isArray(t)?t.toString():t,o,s,a,l,i,c,r]);W.useEffect(function(){!f.current&&p.entry&&!a&&!l&&g({inView:!!u})});var _=[w,p.inView,p.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const NCe=Object.freeze(Object.defineProperty({__proto__:null,InView:qE,default:qE,defaultFallbackInView:PCe,observe:lO,useInView:LCe},Symbol.toStringTag,{value:"Module"})),BCe=Z9(NCe);var H9;function FCe(){if(H9)return Yv;H9=1,Yv.__esModule=!0,Yv.default=void 0;var n=i(vh()),e=i(vS()),t=i(OW()),r=BCe;function i(a){return a&&a.__esModule?a:{default:a}}const s=({children:a="",className:l="",contentArrowStyle:u=null,contentStyle:c=null,date:f="",dateClassName:h="",icon:p=null,iconClassName:g="",iconOnClick:w=null,onTimelineElementClick:_=null,iconStyle:v=null,id:A="",position:S="",style:b=null,textClassName:C="",intersectionObserverProps:L={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:R=!1,shadowSize:k="small"})=>n.default.createElement(r.InView,L,({inView:O,ref:M})=>n.default.createElement("div",{ref:M,id:A,className:(0,t.default)(l,"vertical-timeline-element",{"vertical-timeline-element--left":S==="left","vertical-timeline-element--right":S==="right","vertical-timeline-element--no-children":a===""}),style:b},n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{style:v,onClick:w,className:(0,t.default)(g,"vertical-timeline-element-icon",`shadow-size-${k}`,{"bounce-in":O||R,"is-hidden":!(O||R)})},p),n.default.createElement("div",{style:c,onClick:_,className:(0,t.default)(C,"vertical-timeline-element-content",{"bounce-in":O||R,"is-hidden":!(O||R)})},n.default.createElement("div",{style:u,className:"vertical-timeline-element-content-arrow"}),a,n.default.createElement("span",{className:(0,t.default)(h,"vertical-timeline-element-date")},f)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,shadowSize:e.default.string,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var o=s;return Yv.default=o,Yv}var Q2,G9;function UCe(){return G9||(G9=1,Q2={VerticalTimeline:CCe().default,VerticalTimelineElement:FCe().default}),Q2}var WE=UCe();const Wr={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroHeadBlackText:"font-black text-black lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",heroSubBlackText:"text-black font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-black font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},Rh=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),pu=(n,e,t,r)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:r,ease:"easeOut"}}}),jCe=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),uO=(n,e)=>function(){return N.jsxs(on.section,{variants:jCe(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${Wr.padding} max-w-7xl mx-auto relative z-0`,children:[N.jsx("span",{className:"hash-span",id:e,children:""}),N.jsx(n,{})]})},VCe=({education:n})=>{const e=new Date(n.startDate).getFullYear(),t=new Date(n.endDate).getFullYear();return N.jsxs(WE.VerticalTimelineElement,{className:"vertical-timeline-element--work",contentStyle:{background:"#1d1836",color:"#fff",borderBottom:"8px",borderStyle:"solid",borderBottomColor:"#6c5ce7"},contentArrowStyle:{borderRight:"7px solid #1d1836"},date:N.jsx("span",{style:{color:"#1d1836"},children:`${e} - ${t}`}),icon:N.jsx("div",{className:"flex justify-center items-center w-full h-full rounded-full overflow-hidden",children:N.jsx("img",{src:n.icons[0].publicUrl,alt:n.university_name,className:"w-[100%]  object-contain  rounded-lg"})}),children:[N.jsxs("div",{children:[N.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),N.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.university_name})]}),N.jsx("div",{className:"mt-5 text-white-100 text-[14px] pl-1 tracking-wider",dangerouslySetInnerHTML:{__html:n.contents}}),N.jsx("div",{className:"mt-2",children:N.jsx("a",{href:n.url,target:"_blank",className:"text-white text-[16px] font-bold mt-3",children:n.college_name})})]})},zCe=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!1);return W.useEffect(()=>{(async()=>{try{const o=(await Gs(Kr(en,"academics"))).docs.map(a=>({id:a.id,...a.data()}));o.sort((a,l)=>new Date(a.startDate)-new Date(l.startDate)),e(o),r(!1)}catch(s){console.error("Error fetching academics: ",s)}})()},[]),N.jsxs(N.Fragment,{children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:`${Wr.sectionSubText} text-center`,children:"My Education Background"}),N.jsx("h2",{className:`${Wr.sectionHeadText} text-center`,children:"Education Journey"})]}),N.jsx("div",{className:"mt-20 flex flex-col",children:N.jsx(WE.VerticalTimeline,{lineColor:"#6c5ce7",animate:!0,layout:"2-columns",children:n.map(i=>N.jsx(VCe,{education:i},i.id))})})]})},LW=uO(zCe,"study"),HCe=zp({title:Ri().required("Title is required"),office_name:Ri().required("Office Name is required"),designation:Ri().required("Designation is required"),icons:Vk().min(1,"At least one icon is required"),startDate:$g().required("Start Date is required"),endDate:$g().optional(),contents:Ri().required("Content is required"),urlofCompany:Ri().required("URL of Company is required")}),NW=({editData:n,handleEditSuccess:e})=>{var u;const[t,r]=W.useState((n==null?void 0:n.contents)||"");W.useState([]);const{enqueueSnackbar:i}=hu(),s={title:(n==null?void 0:n.title)||"",office_name:(n==null?void 0:n.office_name)||"",designation:(n==null?void 0:n.designation)||"",icons:((u=n==null?void 0:n.icons)==null?void 0:u.map(c=>({icon:c.publicUrl})))||[],startDate:(n==null?void 0:n.startDate)||"",endDate:(n==null?void 0:n.endDate)||"",contents:(n==null?void 0:n.contents)||"",focusedField:"",urlofCompany:(n==null?void 0:n.urlofCompany)||""},o=async(c,{setSubmitting:f,resetForm:h,setFieldValue:p})=>{try{let g=[];c.icons&&c.icons.length>0&&(g=await ay(c.icons,"journey")),g.length===0&&n&&(g=n.icons||[]);const w={title:c.title,office_name:c.office_name,designation:c.designation,icons:g,startDate:c.startDate,endDate:c.endDate,contents:t,urlofCompany:c.urlofCompany,addCreatedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n?(await Ug(Hr(en,"journey",n.id),{...w,updatedAt:new Date().toISOString()}),i("Journey data updated successfully!",{variant:"success"}),p("icons",[])):(await mp(Kr(en,"journey"),w),i("Journey data submitted successfully!",{variant:"success"})),p("title",""),p("office_name",""),p("designation",""),p("icons",[]),p("startDate",""),p("endDate",""),p("contents",""),p("urlofCompany",""),r(""),h(),f(!1),window.location.reload()}catch(g){console.error("Error submitting form:",g),i("Failed to submit journey data. Please try again.",{variant:"error"}),f(!1)}},a=c=>{console.log("URL obtained inside handleFileRemove:",c),l(c)};async function l(c){const f=c.split("/storage/v1/object/public/storage/")[1];console.log(f,"File Path on delete");const{data:h,error:p}=await gp.storage.from("storage").remove([f]);console.log("data",h),i("Image deleted successfully!",{variant:"success"}),p?console.error("Error deleting file:",p):console.log("File deleted successfully from Supabase")}return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"Edit Journey":"Add Journey"}),N.jsx(Pb,{initialValues:s,validationSchema:HCe,onSubmit:o,children:({setFieldValue:c,values:f,touched:h,errors:p,handleBlur:g,handleChange:w})=>N.jsxs(K0,{className:"space-y-6",children:[N.jsx(er,{name:"title",type:"text",label:"Title",value:f.title,onChange:_=>c("title",_.target.value),onBlur:g,error:p.title,touched:h.title,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"office_name",type:"text",label:"Office Name",value:f.office_name,onChange:_=>c("office_name",_.target.value),onBlur:g,error:p.office_name,touched:h.office_name,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"designation",type:"text",label:"Designation",value:f.designation,onChange:_=>c("designation",_.target.value),onBlur:g,error:p.designation,touched:h.designation,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(oy,{name:"icons",value:f.icons,setFieldValue:c,error:p.icons,touched:h.icons,onFileRemove:a}),N.jsx(er,{name:"urlofCompany",type:"text",label:"URL of Company",value:f.urlofCompany,onChange:_=>c("urlofCompany",_.target.value),onBlur:g,error:p.urlofCompany,touched:h.urlofCompany,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"startDate",type:"date",label:"Start Date",value:f.startDate,onChange:_=>c("startDate",_.target.value),onBlur:g,error:p.startDate,touched:h.startDate,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(er,{name:"endDate",type:"date",label:"End Date",value:f.endDate,onChange:_=>c("endDate",_.target.value),onBlur:g,error:p.endDate,touched:h.endDate,focusedField:f.focusedField,setFocusedField:_=>c("focusedField",_)}),N.jsx(iy,{value:t,onChange:_=>{r(_),c("contents",_)},name:"contents",error:p.contents}),h.contents&&p.contents&&N.jsx("p",{className:"text-red-500 text-sm mt-2",children:p.contents}),N.jsx(on.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},GCe=()=>{const[n,e]=W.useState([]);_h();const{enqueueSnackbar:t}=hu(),[r,i]=W.useState(!1),[s,o]=W.useState(null),[a,l]=W.useState(!1);W.useEffect(()=>{(async()=>{try{const w=(await Gs(Kr(en,"journey"))).docs.map(_=>({id:_.id,..._.data()}));w.sort((_,v)=>{var b,C;const A=(b=_.createdAt)!=null&&b.toDate?_.createdAt.toDate():new Date,S=(C=v.createdAt)!=null&&C.toDate?v.createdAt.toDate():new Date;return A-S}),e(w),l(!1)}catch(g){console.error("Error fetching journeys: ",g)}})()},[a]);const u=p=>{const g=n.find(w=>w.id===p);console.log("Edit data on handle Edit",g),o(g),i(!0)},c=()=>{console.log("Edit success"),i(!1),l(!0)},f=async p=>{try{const g=Hr(en,"journey",p);console.log("Document reference:",g);const w=await Ea(g);if(!w.exists()){console.error("Document not found."),t("Journey data not found.",{variant:"error"});return}const _=w.data();console.log("Journey data:",_);const v=_.icons;console.log("File URL:",v);const A=await ly(v,"journey");console.log("Delete",A),await hh(Hr(en,"journey",p)),e(n.filter(S=>S.id!==p)),t("Journey data deleted successfully!",{variant:"success"})}catch{t("Failed to delete journey data. Please try again.",{variant:"error"})}},h=()=>{i(!1)};return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Journeys"}),N.jsxs("table",{className:"w-full table-auto",children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-4 py-2 text-left",children:"Title"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"Office"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"Designation"}),N.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),N.jsx("tbody",{children:n.map(p=>N.jsxs("tr",{children:[N.jsx("td",{className:"px-4 py-2",children:p.title}),N.jsx("td",{className:"px-4 py-2",children:p.office_name}),N.jsx("td",{className:"px-4 py-2",children:p.designation}),N.jsxs("td",{className:"px-4 py-2 text-center",children:[N.jsx("button",{onClick:()=>u(p.id),className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",children:"Edit"}),N.jsx("button",{onClick:()=>f(p.id),className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Delete"})]})]},p.id))})]}),r&&N.jsx(nh,{onClose:h,title:s?"Edit Journey":"Add Journey",children:N.jsx("div",{className:"w-full",children:N.jsx(NW,{editData:s,handleEditSuccess:c})})})]})},BW=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!1);return W.useEffect(()=>{(async()=>{try{const o=(await Gs(Kr(en,"journey"))).docs.map(a=>({id:a.id,...a.data()}));o.sort((a,l)=>new Date(a.startDate)-new Date(l.startDate)),e(o),r(!1)}catch(s){console.error("Error fetching journey: ",s)}})()},[]),N.jsxs("section",{className:"max-container",children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:`${Wr.sectionSubText} text-center`,children:"My Journey"}),N.jsx("h2",{className:`${Wr.sectionHeadText} text-center`,children:"Work Experience"}),N.jsx("p",{className:`${Wr.sectionHeadText} text-center`,children:"Here's a glimpse into my career journey, working with incredible teams and growing my skills."})]}),N.jsx("div",{className:"py-16",children:N.jsx("div",{className:"mt-12 flex",children:N.jsx(WE.VerticalTimeline,{lineColor:"#6c5ce7",animate:!0,layout:"2-columns",children:n.map(i=>{const s=isNaN(new Date(i.endDate).getTime())?"Present":new Date(i.endDate).toLocaleDateString("en-GB",{month:"long",year:"numeric"});return N.jsxs(WE.VerticalTimelineElement,{date:N.jsx("span",{style:{color:"black"},children:`${new Date(i.startDate).toLocaleDateString("en-GB",{month:"long",year:"numeric"})} - ${s}`}),icon:N.jsx("div",{className:"flex justify-center items-center w-full h-full rounded-full overflow-hidden",children:N.jsx("img",{src:i.icons[0].publicUrl,alt:i.office_name,className:"w-[100%]  object-contain rounded-lg"})}),contentStyle:{borderBottom:"8px",borderStyle:"solid",borderBottomColor:"#6c5ce7",boxShadow:"none",background:"#1d1836",color:"#fff"},children:[N.jsxs("div",{children:[N.jsx("h3",{className:"text-white text-xl font-poppins font-semibold",children:i.title}),N.jsx("p",{className:"text-white-500 font-medium text-base",style:{margin:0},children:i.office_name}),N.jsx("p",{className:"text-white-500/50 text-sm",children:i.designation})]}),N.jsx("div",{className:"my-5 text-white text-[16px] font-bold mt-3",dangerouslySetInnerHTML:{__html:i.contents}}),N.jsx("div",{className:"mt-2",children:N.jsxs("a",{href:i.urlofCompany,target:"_blank",className:"text-white text-[16px] font-bold mt-3",children:["Visit: ",i.office_name]})})]},i.office_name)})})})}),N.jsx("hr",{className:"border-slate-200"})]})},q9=({children:n,className:e})=>N.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md border border-black ${e}`,children:n}),FW=({editData:n})=>{var o;const[e,t]=W.useState((n==null?void 0:n.contents)||"");W.useState([]);const{enqueueSnackbar:r}=hu();console.log("Edit data",n);const i={name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",tags:(n==null?void 0:n.tags)||"",icons:n!=null&&n.icons?[{icon:(o=n==null?void 0:n.icons)==null?void 0:o.publicUrl}]:[],link:(n==null?void 0:n.link)||!1,contents:(n==null?void 0:n.contents)||"",source_code_link:(n==null?void 0:n.source_code_link)||"",info:(n==null?void 0:n.info)||[{project_id:"",icons:[],contents:""}]},s=async(a,{setSubmitting:l,resetForm:u,setFieldValue:c})=>{console.log("Form values",a);try{let f=[];a.icons&&(f=await ay(a.icons,"projects")),console.log("Uploaded Urls",f);const h={name:a.name,description:a.description,tags:a.tags.map(p=>p),icons:f[0]||"",link:a.link||!0,contents:a.contents,source_code_link:a.source_code_link};if(console.log("Project data",h),n){console.log("HIT EDIT");const p=Hr(en,"projects",n.id);await Ug(p,h),r("Project updated successfully!",{variant:"success"})}else{console.log("HIT");const p=await mp(Kr(en,"projects"),h);console.log("Project created",p);const g=p.id,w=[];for(let _ of a.info){let v=[];_.icons&&(v=await ay(_.icons,"projects")),w.push({project_id:g,icons:v,contents:_.contents})}await Promise.all(w.map(async _=>{await mp(Kr(en,"projectDetails"),_)})),r("Project added successfully!",{variant:"success"})}u(),l(!1)}catch(f){console.error("Error adding project:",f),r("Failed to submit project data. Please try again.",{variant:"error"}),l(!1)}};return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"Edit Project":"Add Project"}),N.jsx(Pb,{initialValues:i,onSubmit:s,children:({setFieldValue:a,values:l,touched:u,errors:c,handleBlur:f,handleChange:h})=>N.jsxs(K0,{className:"space-y-6",children:[N.jsx(er,{name:"name",type:"text",label:"Project Name",value:l.name,onChange:p=>a("name",p.target.value),onBlur:f,error:c.name,touched:u.name,setFocusedField:p=>a("focusedField",p)}),N.jsx(er,{name:"description",type:"text",label:"Description",value:l.description,onChange:p=>a("description",p.target.value),onBlur:f,error:c.description,touched:u.description,setFocusedField:p=>a("focusedField",p)}),N.jsx(q9,{children:N.jsx(LA,{name:"tags",render:p=>N.jsxs("div",{className:"space-y-4",children:[l.tags&&l.tags.length>0?l.tags.map((g,w)=>N.jsxs("div",{className:"flex items-center space-x-4",children:[N.jsx("input",{name:`tags[${w}]`,value:g,onChange:_=>a(`tags[${w}]`,_.target.value),onBlur:f,className:"border p-2 rounded"}),N.jsx("button",{type:"button",onClick:()=>p.remove(w),className:"text-red-500 hover:text-red-700",children:"Remove"})]},w)):N.jsx("p",{children:"No tags available"}),N.jsx("button",{type:"button",onClick:()=>p.push(""),className:"mt-2 text-blue-500 hover:text-blue-700",children:"Add Tag"})]})})}),N.jsx(oy,{name:"icons",value:l.icons,setFieldValue:a,error:c.icons,touched:u.icons}),N.jsx(er,{name:"source_code_link",type:"url",label:"Source Code Link",value:l.source_code_link,onChange:p=>a("source_code_link",p.target.value),onBlur:f,error:c.source_code_link,touched:u.source_code_link,setFocusedField:p=>a("focusedField",p)}),N.jsx(iy,{value:e,onChange:p=>{t(p),a("contents",p)},name:"contents",error:c.contents}),!n&&N.jsx(q9,{children:N.jsx(LA,{name:"info",render:p=>N.jsxs("div",{children:[l.info.map((g,w)=>{var _,v,A,S;return N.jsxs("div",{className:"space-y-4",children:[N.jsx(oy,{name:`info[${w}].icons`,value:g.icons,setFieldValue:a,error:(v=(_=c.info)==null?void 0:_[w])==null?void 0:v.icons,touched:(S=(A=u.info)==null?void 0:A[w])==null?void 0:S.icons}),N.jsx(iy,{value:g.contents,onChange:b=>{a(`info[${w}].contents`,b)},name:`info[${w}].contents`}),N.jsx("button",{type:"button",onClick:()=>p.remove(w),children:"Remove Info"})]},w)}),N.jsx("button",{type:"button",onClick:()=>p.push({project_id:"",icons:[],contents:""}),children:"Add Info"})]})})}),N.jsx(on.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},qCe=()=>{const[n,e]=W.useState([]),{enqueueSnackbar:t}=hu(),[r,i]=W.useState(!1),[s,o]=W.useState(null);W.useEffect(()=>{(async()=>{try{const h=(await Gs(Kr(en,"projects"))).docs.map(p=>({id:p.id,...p.data()}));e(h)}catch(f){console.error("Error fetching projects: ",f)}})()},[]);const a=c=>{const f=n.find(h=>h.id===c);o(f),i(!0)},l=async c=>{try{const f=Hr(en,"projects",c),p=(await Ea(f)).data();if(!p)throw new Error("Project not found");const{icons:g}=p,w=g==null?void 0:g.publicUrl;if(!w)throw new Error("No public URL found in icons object");const _=Kr(en,"projectDetails"),A=(await Gs(_)).docs.filter(S=>{const b=S.data();return b.project_id&&b.project_id==c});for(const S of A){const b=S.data();if(b&&b.icons){console.log("Detail Data",b);const C=b.icons.map(L=>L.publicUrl);C.length>0&&(console.log("Deleting images for projectDetails document:",S.id),await ly(C,"projects"))}await hh(Hr(en,"projectDetails",S.id))}await ly(w,"projects"),await hh(f),e(n.filter(S=>S.id!==c)),t("Project deleted successfully!",{variant:"success"})}catch(f){t("Failed to delete project. Please try again.",{variant:"error"}),console.error("Error deleting project:",f)}},u=()=>i(!1);return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Projects"}),N.jsxs("table",{className:"w-full table-auto",children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-4 py-2 text-left",children:"Project Name"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),N.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),N.jsx("tbody",{children:n.map(c=>N.jsxs("tr",{children:[N.jsx("td",{className:"px-4 py-2",children:c.name}),N.jsx("td",{className:"px-4 py-2",children:c.description}),N.jsxs("td",{className:"px-4 py-2 text-center",children:[N.jsx("button",{onClick:()=>a(c.id),className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",children:"Edit"}),N.jsx("button",{onClick:()=>l(c.id),className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Delete"})]})]},c.id))})]}),r&&N.jsx(nh,{onClose:u,title:"Edit Project",children:N.jsx(FW,{editData:s,handleEditSuccess:u})})]})};var WCe=Object.defineProperty,$Ce=Object.defineProperties,KCe=Object.getOwnPropertyDescriptors,W9=Object.getOwnPropertySymbols,JCe=Object.prototype.hasOwnProperty,XCe=Object.prototype.propertyIsEnumerable,$9=(n,e,t)=>e in n?WCe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Qv=(n,e)=>{for(var t in e||(e={}))JCe.call(e,t)&&$9(n,t,e[t]);if(W9)for(var t of W9(e))XCe.call(e,t)&&$9(n,t,e[t]);return n},Zv=(n,e)=>$Ce(n,KCe(e)),TS=class extends W.Component{constructor(n){super(n),this.ref=Jt.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Zv(Qv({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Zv(Qv({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Zv(Qv({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Zv(Qv({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,r=Math.min(Math.max(e,0),1),i=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-r*this.settings.max)).toFixed(2),o=(this.reverse*(i*this.settings.max-this.settings.max/2)).toFixed(2),a=r*100,l=i*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:Zv(Qv({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return N.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const UW=({index:n,name:e,description:t,tags:r,image:i,source_code_link:s,icons:o,route:a})=>N.jsx(on.div,{variants:pu("up","spring",n*.5,.75),children:N.jsx(TS,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full h-[400px]",children:N.jsxs(Ta,{to:`/${a}/${n}`,children:[N.jsxs("div",{className:"relative w-full h-[240px]",children:[N.jsx("img",{src:o.publicUrl,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),N.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:N.jsx("div",{onClick:l=>{l.stopPropagation(),window.open(s,"_blank")},className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:N.jsx("img",{src:o.publicURL,alt:"source code",className:"w-[15%] aspect-[3/2] object-contain mix-blend-color-burn rounded-lg"})})})]}),N.jsxs("div",{className:"mt-5",children:[N.jsx("h3",{className:"text-black font-bold text-[24px]",children:e}),N.jsx("p",{className:"mt-2 text-secondary text-[14px] line-clamp-2",children:t})]}),N.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r.map(l=>N.jsxs("p",{className:"text-[14px] text-[#6c5ce7]",children:["#",l]},`${e}-${l.name}`))})]})})}),jW=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0);return W.useEffect(()=>{(async()=>{const a=(await Gs(Kr(en,"projects"))).docs.map(l=>({id:l.id,...l.data()})).sort((l,u)=>new Date(l.startDate)-new Date(u.startDate));e(a),r(!1)})()},[]),t?N.jsx("p",{children:"Loading..."}):(console.log(n),N.jsxs("div",{className:"ml-10",children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:Wr.sectionSubText,children:"My work"}),N.jsx("h2",{className:Wr.sectionHeadText,children:"Projects."})]}),N.jsx(on.p,{variants:pu("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcase my skills and experience through real-world examples of my work. Each project is briefly described with links to code repositories and live demos in it. It reflects my ability to solve complex problems, work with different technologies, and manage projects effectively."}),N.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-7",children:n.map(i=>N.jsx(UW,{index:i==null?void 0:i.id,...i,route:"projects"},i.id))})]}))},K9=({children:n,className:e})=>N.jsx("div",{className:`bg-white p-6 rounded-lg shadow-md border border-black ${e}`,children:n}),VW=({editData:n})=>{var o;const[e,t]=W.useState((n==null?void 0:n.contents)||""),{enqueueSnackbar:r}=hu(),i={name:(n==null?void 0:n.name)||"",description:(n==null?void 0:n.description)||"",tags:(n==null?void 0:n.tags)||"",icons:n!=null&&n.icons?[{icon:(o=n==null?void 0:n.icons)==null?void 0:o.publicUrl}]:[],link:(n==null?void 0:n.link)||!1,source_code_link:(n==null?void 0:n.source_code_link)||"",contents:(n==null?void 0:n.contents)||"",info:(n==null?void 0:n.info)||[{achievement_id:"",icons:[],contents:""}]},s=async(a,{setSubmitting:l,resetForm:u})=>{try{let c=[];a.icons&&(c=await ay(a.icons,"achievements"));const f={name:a.name,description:a.description,tags:a.tags.map(h=>h),icons:c[0]||"",link:a.link||!0,contents:a.contents,source_code_link:a.source_code_link};if(n){const h=Hr(en,"achievements",n.id);await Ug(h,f),r("Achievement updated successfully!",{variant:"success"})}else{const p=(await mp(Kr(en,"achievements"),f)).id,g=[];for(let w of a.info){let _=[];w.icons&&(_=await ay(w.icons,"achievements")),g.push({achievement_id:p,icons:_,contents:w.contents})}await Promise.all(g.map(async w=>{await mp(Kr(en,"achievementDetails"),w)})),r("Achievement added successfully!",{variant:"success"})}u(),l(!1)}catch(c){console.error("Error adding achievement:",c),r("Failed to submit achievement data. Please try again.",{variant:"error"}),l(!1)}};return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h2",{className:"text-2xl font-semibold mb-6",children:n?"Edit Achievement":"Add Achievement"}),N.jsx(Pb,{initialValues:i,onSubmit:s,children:({setFieldValue:a,values:l,touched:u,errors:c,handleBlur:f})=>N.jsxs(K0,{className:"space-y-6",children:[N.jsx(er,{name:"name",type:"text",label:"Achievement Name",value:l.name,onChange:h=>a("name",h.target.value),onBlur:f,error:c.name,touched:u.name}),N.jsx(er,{name:"description",type:"text",label:"Description",value:l.description,onChange:h=>a("description",h.target.value),onBlur:f,error:c.description,touched:u.description}),N.jsx(K9,{children:N.jsx(LA,{name:"tags",render:h=>N.jsxs("div",{className:"space-y-4",children:[l.tags&&l.tags.length>0?l.tags.map((p,g)=>N.jsxs("div",{className:"flex items-center space-x-4",children:[N.jsx("input",{name:`tags[${g}]`,value:p,onChange:w=>a(`tags[${g}]`,w.target.value),onBlur:f,className:"border p-2 rounded"}),N.jsx("button",{type:"button",onClick:()=>h.remove(g),className:"text-red-500 hover:text-red-700",children:"Remove"})]},g)):N.jsx("p",{children:"No tags available"}),N.jsx("button",{type:"button",onClick:()=>h.push(""),className:"mt-2 text-blue-500 hover:text-blue-700",children:"Add Tag"})]})})}),N.jsx(oy,{name:"icons",value:l.icons,setFieldValue:a,error:c.icons,touched:u.icons}),N.jsx(er,{name:"source_code_link",type:"url",label:"Source Code Link",value:l.source_code_link,onChange:h=>a("source_code_link",h.target.value),onBlur:f,error:c.source_code_link,touched:u.source_code_link,setFocusedField:h=>a("focusedField",h)}),N.jsx(iy,{value:e,onChange:h=>{t(h),a("contents",h)},name:"contents",error:c.contents}),!n&&N.jsx(K9,{children:N.jsx(LA,{name:"info",render:h=>N.jsxs("div",{children:[l.info.map((p,g)=>{var w,_,v,A;return N.jsxs("div",{className:"space-y-4",children:[N.jsx(oy,{name:`info[${g}].icons`,value:p.icons,setFieldValue:a,error:(_=(w=c.info)==null?void 0:w[g])==null?void 0:_.icons,touched:(A=(v=u.info)==null?void 0:v[g])==null?void 0:A.icons}),N.jsx(iy,{value:p.contents,onChange:S=>{a(`info[${g}].contents`,S)},name:`info[${g}].contents`}),N.jsx("button",{type:"button",onClick:()=>h.remove(g),children:"Remove Info"})]},g)}),N.jsx("button",{type:"button",onClick:()=>h.push({achievement_id:"",icons:[],contents:""}),children:"Add Info"})]})})}),N.jsx(on.button,{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-all",children:"Submit"})]})})]})},YCe=()=>{const[n,e]=W.useState([]),{enqueueSnackbar:t}=hu(),[r,i]=W.useState(!1),[s,o]=W.useState(null);W.useEffect(()=>{(async()=>{try{const h=(await Gs(Kr(en,"achievements"))).docs.map(p=>({id:p.id,...p.data()}));e(h)}catch(f){console.error("Error fetching achievements: ",f)}})()},[]);const a=c=>{const f=n.find(h=>h.id===c);o(f),i(!0)},l=async c=>{try{const f=doc(en,"achievements",c),p=(await Ea(f)).data();if(!p)throw new Error("Achievement not found");const{icons:g}=p,w=g==null?void 0:g.publicUrl;if(!w)throw new Error("No public URL found in images object");await ly(w,"achievements");const _=Kr(en,"achievementDetails"),A=(await Gs(_)).docs.filter(S=>{const b=S.data();return b.achievement_id&&b.achievement_id===c});for(const S of A){const b=S.data();if(b&&b.icons){const C=b.icons.map(L=>L==null?void 0:L.publicUrl);C.length>0&&await ly(C,"achievements")}await hh(doc(en,"achievementDetails",S.id))}await hh(f),e(n.filter(S=>S.id!==c)),t("Achievement deleted successfully!",{variant:"success"})}catch(f){t("Failed to delete achievement. Please try again.",{variant:"error"}),console.error("Error deleting achievement:",f)}},u=()=>i(!1);return N.jsxs("div",{className:"container mx-auto p-4",children:[N.jsx("h1",{className:"text-2xl font-semibold mb-6",children:"Achievements"}),N.jsxs("table",{className:"w-full table-auto",children:[N.jsx("thead",{children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-4 py-2 text-left",children:"Achievement Name"}),N.jsx("th",{className:"px-4 py-2 text-left",children:"Description"}),N.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),N.jsx("tbody",{children:n.map(c=>N.jsxs("tr",{children:[N.jsx("td",{className:"px-4 py-2",children:c.name}),N.jsx("td",{className:"px-4 py-2",children:c.description}),N.jsxs("td",{className:"px-4 py-2 text-center",children:[N.jsx("button",{onClick:()=>a(c.id),className:"bg-blue-500 text-white px-4 py-2 rounded-md mr-2",children:"Edit"}),N.jsx("button",{onClick:()=>l(c.id),className:"bg-red-500 text-white px-4 py-2 rounded-md",children:"Delete"})]})]},c.id))})]}),r&&N.jsx(nh,{onClose:u,title:"Edit Achievement",children:N.jsx(VW,{editData:s,handleEditSuccess:u})})]})},zW=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0);return W.useEffect(()=>{(async()=>{const a=(await Gs(Kr(en,"achievements"))).docs.map(l=>({id:l.id,...l.data()})).sort((l,u)=>new Date(u.date)-new Date(l.date));e(a),r(!1)})()},[]),t?N.jsx("p",{children:"Loading..."}):N.jsxs("div",{className:"ml-10",children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:Wr.sectionSubText,children:"My Achievements"}),N.jsx("h2",{className:Wr.sectionHeadText,children:"Achievements."})]}),N.jsx(on.p,{variants:pu("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"These achievements showcase milestones and recognitions in my career. Each achievement is briefly described with links to relevant resources."}),N.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-7",children:n.map((i,s)=>N.jsx(UW,{index:i.id,...i,route:"achievements"},i.id))})]})},QCe=({index:n,name:e,image:t})=>N.jsx(on.div,{variants:pu("up","spring",n*.5,.75),children:N.jsxs(TS,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full h-[400px]",children:[N.jsx("div",{className:"relative w-full h-[240px]",children:N.jsx("img",{src:t,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"})}),N.jsx("div",{className:"mt-5",children:N.jsx("h3",{className:"text-black font-bold text-[24px] text-center",dangerouslySetInnerHTML:{__html:e}})})]})}),ZCe=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0),{id:i}=a5();return W.useEffect(()=>{(async()=>{const a=(await Gs(Kr(en,"projectDetails"))).docs.map(c=>({id:c.id,...c.data()})),u=(i?a.filter(c=>c.project_id===i):a).sort((c,f)=>new Date(c.startDate)-new Date(f.startDate));e(u),r(!1)})()},[i]),t?N.jsx("p",{children:"Loading..."}):N.jsxs("div",{className:"ml-10",children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:Wr.sectionSubText,children:"My work"}),N.jsx("h2",{className:Wr.sectionHeadText,children:"Projects."})]}),N.jsx(on.p,{variants:pu("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Some Images"}),N.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-7",children:n.map(s=>{var o;return N.jsx(QCe,{index:s.id,name:s.contents,image:s.icons&&((o=s.icons[0])==null?void 0:o.publicUrl)},s.id)})})]})},eMe=({index:n,title:e,image:t,description:r})=>N.jsx(on.div,{variants:pu("up","spring",n*.5,.75),children:N.jsxs(TS,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full h-[400px]",children:[N.jsx("div",{className:"relative w-full h-[240px]",children:N.jsx("img",{src:t,alt:"achievement_image",className:"w-full h-full object-cover rounded-2xl"})}),N.jsx("div",{className:"mt-5",children:N.jsx("h3",{className:"text-black font-bold text-[24px] text-center",dangerouslySetInnerHTML:{__html:e}})})]})}),tMe=()=>{const[n,e]=W.useState([]),[t,r]=W.useState(!0),{id:i}=a5();return W.useEffect(()=>{(async()=>{const a=(await Gs(Kr(en,"achievementDetails"))).docs.map(c=>({id:c.id,...c.data()})),u=(i?a.filter(c=>c.achievement_id===i):a).sort((c,f)=>new Date(c.dateAchieved)-new Date(f.dateAchieved));e(u),r(!1)})()},[i]),t?N.jsx("p",{children:"Loading..."}):N.jsxs("div",{className:"ml-10",children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:Wr.sectionSubText,children:"My Achievements"}),N.jsx("h2",{className:Wr.sectionHeadText,children:"Achievements."})]}),N.jsx(on.p,{variants:pu("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Some Images"}),N.jsx("div",{className:"mt-20 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-7",children:n.map(s=>{var o;return N.jsx(eMe,{index:s.id,title:s.contents,description:s.description,image:s.icons&&((o=s.icons[0])==null?void 0:o.publicUrl)},s.id)})})]})};var e_={},t_={},Z2,J9;function nMe(){if(J9)return Z2;J9=1;var n="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof $f=="object"&&$f&&$f.Object===Object&&$f,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),f=Object.prototype,h=f.toString,p=Math.max,g=Math.min,w=function(){return c.Date.now()};function _(L,R,k){var O,M,D,U,F,$,Z=0,se=!1,ce=!1,Q=!0;if(typeof L!="function")throw new TypeError(n);R=C(R)||0,A(k)&&(se=!!k.leading,ce="maxWait"in k,D=ce?p(C(k.maxWait)||0,R):D,Q="trailing"in k?!!k.trailing:Q);function ee(ye){var xe=O,Te=M;return O=M=void 0,Z=ye,U=L.apply(Te,xe),U}function Y(ye){return Z=ye,F=setTimeout(re,R),se?ee(ye):U}function V(ye){var xe=ye-$,Te=ye-Z,$e=R-xe;return ce?g($e,D-Te):$e}function X(ye){var xe=ye-$,Te=ye-Z;return $===void 0||xe>=R||xe<0||ce&&Te>=D}function re(){var ye=w();if(X(ye))return oe(ye);F=setTimeout(re,V(ye))}function oe(ye){return F=void 0,Q&&O?ee(ye):(O=M=void 0,U)}function fe(){F!==void 0&&clearTimeout(F),Z=0,O=$=M=F=void 0}function te(){return F===void 0?U:oe(w())}function ue(){var ye=w(),xe=X(ye);if(O=arguments,M=this,$=ye,xe){if(F===void 0)return Y($);if(ce)return F=setTimeout(re,R),ee($)}return F===void 0&&(F=setTimeout(re,R)),U}return ue.cancel=fe,ue.flush=te,ue}function v(L,R,k){var O=!0,M=!0;if(typeof L!="function")throw new TypeError(n);return A(k)&&(O="leading"in k?!!k.leading:O,M="trailing"in k?!!k.trailing:M),_(L,R,{leading:O,maxWait:R,trailing:M})}function A(L){var R=typeof L;return!!L&&(R=="object"||R=="function")}function S(L){return!!L&&typeof L=="object"}function b(L){return typeof L=="symbol"||S(L)&&h.call(L)==t}function C(L){if(typeof L=="number")return L;if(b(L))return e;if(A(L)){var R=typeof L.valueOf=="function"?L.valueOf():L;L=A(R)?R+"":R}if(typeof L!="string")return L===0?L:+L;L=L.replace(r,"");var k=s.test(L);return k||o.test(L)?a(L.slice(2),k?2:8):i.test(L)?e:+L}return Z2=v,Z2}var eR,X9;function rMe(){return X9||(X9=1,eR=function(e,t,r,i){var s=r?r.call(i,e,t):void 0;if(s!==void 0)return!!s;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var f=e[c],h=t[c];if(s=r?r.call(i,f,h,c):void 0,s===!1||s===void 0&&f!==h)return!1}return!0}),eR}var Y9;function iMe(){if(Y9)return t_;Y9=1,t_.__esModule=!0,t_.default=void 0;var n=s(vh()),e=i(vS()),t=i(nMe()),r=i(rMe());function i(u){return u&&u.__esModule?u:{default:u}}function s(u){if(u&&u.__esModule)return u;var c={};if(u!=null){for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var h=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(u,f):{};h.get||h.set?Object.defineProperty(c,f,h):c[f]=u[f]}}return c.default=u,c}function o(){return o=Object.assign||function(u){for(var c=1;c<arguments.length;c++){var f=arguments[c];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])}return u},o.apply(this,arguments)}function a(u,c){u.prototype=Object.create(c.prototype),u.prototype.constructor=u,u.__proto__=c}var l=function(u){a(c,u);function c(h){var p;return p=u.call(this,h)||this,p.isVisible=function(g,w,_){var v=g.top,A=g.left,S=g.bottom,b=g.right,C=g.width,L=g.height,R=p.props,k=R.offset,O=R.partialVisibility;if(v+b+S+A===0)return!1;var M=0-k,D=0-k,U=w+k,F=_+k;return O?v+L>=M&&A+C>=D&&S-L<=F&&b-C<=U:v>=M&&A>=D&&S<=F&&b<=U},p.isComponentVisible=function(){setTimeout(function(){if(!(!p.nodeRef||!p.nodeRef.getBoundingClientRect)){var g=document.documentElement,w=p.props.once,_=p.nodeRef.getBoundingClientRect(),v=window.innerWidth||g.clientWidth,A=window.innerHeight||g.clientHeight,S=p.isVisible(_,v,A);S&&w&&p.removeListener(),p.setState({isVisible:S})}},0)},p.setNodeRef=function(g){return p.nodeRef=g},p.ownProps=Object.keys(c.propTypes),p.state={isVisible:!1},p.throttleCb=(0,t.default)(p.isComponentVisible,p.props.throttleInterval),h.nodeRef&&p.setNodeRef(h.nodeRef),p}var f=c.prototype;return f.componentDidMount=function(){this.attachListener(),this.isComponentVisible()},f.componentDidUpdate=function(p){(0,r.default)(this.getChildProps(this.props),this.getChildProps(p))||this.isComponentVisible()},f.componentWillUnmount=function(){this.removeListener()},f.attachListener=function(){window.addEventListener("scroll",this.throttleCb),window.addEventListener("resize",this.throttleCb)},f.removeListener=function(){window.removeEventListener("scroll",this.throttleCb),window.removeEventListener("resize",this.throttleCb)},f.getChildProps=function(p){var g=this;p===void 0&&(p=this.props);var w={};return Object.keys(p).forEach(function(_){g.ownProps.indexOf(_)===-1&&(w[_]=p[_])}),w},f.getChildren=function(){var p=this;return typeof this.props.children=="function"?this.props.children(o({},this.getChildProps(),{isVisible:this.state.isVisible})):n.default.Children.map(this.props.children,function(g){return n.default.cloneElement(g,o({},p.getChildProps(),{isVisible:p.state.isVisible}))})},f.render=function(){var p=this.props,g=p.className,w=p.style,_=p.nodeRef,v=p.tag,A=o({},g&&{className:g},w&&{style:w});return n.default.createElement(v,o({ref:!_&&this.setNodeRef},A),this.getChildren())},c}(n.PureComponent);return t_.default=l,l.propTypes={once:e.default.bool,throttleInterval:function(c,f,h){var p=c[f];return!Number.isInteger(p)||p<0?new Error("The "+f+" prop you provided to "+h+" is not a valid integer >= 0."):null},children:e.default.oneOfType([e.default.func,e.default.element,e.default.arrayOf(e.default.element)]),style:e.default.object,className:e.default.string,offset:e.default.number,partialVisibility:e.default.bool,nodeRef:e.default.object,tag:e.default.string},l.defaultProps={once:!1,throttleInterval:150,offset:0,partialVisibility:!1,tag:"div"},t_}var Q9;function sMe(){if(Q9)return e_;Q9=1,e_.__esModule=!0,e_.default=void 0;var n=e(iMe());function e(r){return r&&r.__esModule?r:{default:r}}var t=n.default;return e_.default=t,e_}var oMe=sMe();const aMe=Ma(oMe),lMe="/assets/github-BUfx7uqA.png",uMe="/assets/tiktak-C7KmBz5i.jpg",cMe="/assets/jobit-Bku9SwYl.png",fMe="/assets/pcb-ROKGr3Bb.jpg",hMe="/assets/bio-B6HV6OOm.jpg",dMe="/assets/kecconf1-sGY50p6W.jpg",pMe="/assets/youtube-U8U-LzKU.png",mMe=[{name:"TikTak Project Using C",description:"My 1st semester project (Tiktactoe) C language, a simple application has been prepared. The Tic-tac-toe is a pencil game for two players, X and O, who takes turns marking the spaces in a 3X3 grid player. ",tags:[{name:"C",color:"blue-text-gradient"},{name:"Array",color:"green-text-gradient"}],image:uMe,source_code_link:"https://github.com/SahajShakya/Tiktaktoe_cProject"},{name:"Bank Management Using C++",description:"The topic for our project is 'Bank Management System'. File handling has been effectively used for each feature of this project. Our Bank Management System can add records, search, modify & delete records. General concepts of if while loops, functions, classes and file has been used to create this program.",tags:[{name:"C++",color:"blue-text-gradient"},{name:"OPP",color:"green-text-gradient"}],image:cMe,source_code_link:"https://github.com/SahajShakya/BankManagemet-C-Project-"},{name:"Density Based Traffic Light",description:"Density Based Automatic Traffic Light Controlled System that helps to control traffics and reduces accidents.",tags:[{name:"Arduino",color:"blue-text-gradient"},{name:"AVR",color:"green-text-gradient"},{name:"Python",color:"pink-text-gradient"},{name:"CNN",color:"pink-text-gradient"}],image:fMe,source_code_link:"https://github.com/SahajShakya/Desnsity-based-Traffic-Control-System-AVR-"},{name:"Bio Robotic Arm",description:"Bio-Robotic arm is project based on a biofeedback mechanical arm that uses a low dimensional input derived from EMG (electromyography) data. ",tags:[{name:"arduino",color:"blue-text-gradient"},{name:"raspberry pi",color:"green-text-gradient"},{name:"EMG< EEG",color:"pink-text-gradient"},{name:"python",color:"blue-text-gradient"},{name:"ANN",color:"green-text-gradient"}],image:hMe,source_code_link:"https://github.com/SahajShakya/Bio-Robotic-Arm",link:!0,icon:pMe},{name:"Thesis: SDN-Loadbalancing-and-DDOS-Detections",description:"This prject reduces the overhead in traffic, classify between traffic and DDoS Attack using SVM, find optimal path using DFS",tags:[{name:"python",color:"blue-text-gradient"},{name:"SVM",color:"green-text-gradient"},{name:"DFS",color:"pink-text-gradient"},{name:"GeneticAlgorithm",color:"blue-text-gradient"},{name:"SDN",color:"green-text-gradient"}],image:dMe,source_code_link:"https://github.com/SahajShakya/SDN-Loadbalancing-and-DDOS-Detections"}],gMe=({index:n,name:e,description:t,tags:r,image:i,source_code_link:s})=>N.jsx(on.div,{variants:pu("up","spring",n*.5,.75),children:N.jsxs(TS,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[N.jsxs("div",{className:"relative w-full h-[230px]",children:[N.jsx("img",{src:i,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),N.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:N.jsx("div",{onClick:()=>window.open(s,"_blank"),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:N.jsx("img",{src:lMe,alt:"source code",className:"w-1/2 h-1/2 object-contain"})})})]}),N.jsxs("div",{className:"mt-5",children:[N.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),N.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t})]}),N.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r.map(o=>N.jsxs("p",{className:`text-[14px] ${o.color}`,children:["#",o.name]},`${e}-${o.name}`))})]})}),yMe=()=>N.jsxs(N.Fragment,{children:[N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:`${Wr.sectionSubText} `,children:"My work"}),N.jsx("h2",{className:`${Wr.sectionHeadText}`,children:"Academic Works."})]}),N.jsx("div",{className:"w-full flex",children:N.jsx(on.p,{variants:pu("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcases my research and academic works"})}),N.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:mMe.map((n,e)=>N.jsx(gMe,{index:e,...n},`project-${e}`))})]}),vMe=uO(yMe,"academicworks"),_Me=({index:n,testimonial:e,name:t,designation:r,company:i,image:s})=>N.jsxs(on.div,{variants:pu("","spring",n*.5,.75),className:"flex-none w-full sm:w-[320px] md:w-[400px] lg:w-[500px] bg-black-200 p-10 rounded-3xl mx-2",children:[N.jsx("p",{className:"text-black font-black text-[48px]",children:'"'}),N.jsxs("div",{className:"mt-1",children:[N.jsx("p",{className:"text-black tracking-wider text-[18px]",children:e}),N.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[N.jsxs("div",{className:"flex-1 flex flex-col",children:[N.jsxs("p",{className:"text-black font-medium text-[16px]",children:[N.jsx("span",{className:"blue-text-gradient",children:"@"})," ",t]}),N.jsxs("p",{className:"mt-1 text-secondary text-[12px]",children:[r," of ",i]})]}),N.jsx("img",{src:s,alt:`feedback_by-${t}`,className:"w-10 h-10 rounded-full object-cover"})]})]})]}),xMe=()=>{const[n,e]=W.useState([]);return W.useEffect(()=>{(async()=>{try{const i=(await Gs(Kr(en,"testimonials"))).docs.map(s=>({id:s.id,...s.data()}));e(i)}catch(r){console.error("Error fetching achievements: ",r)}})()},[]),N.jsxs("div",{className:"mt-12 bg-black-100 rounded-[20px]",children:[N.jsx("div",{className:`bg-tertiary rounded-2xl ${Wr.padding} min-h-[300px]`,children:N.jsxs(on.div,{variants:Rh(),children:[N.jsx("p",{className:Wr.sectionSubText,children:"What others say"}),N.jsx("h2",{className:Wr.sectionHeadText,children:"Testimonials."})]})}),N.jsx("div",{className:`-mt-20 pb-14 ${Wr.paddingX} overflow-x-auto scroll-smooth flex gap-7`,children:N.jsx(on.div,{animate:{x:["0%","-33.33%","-66.66%","0%"]},transition:{duration:9,ease:"linear",repeat:1/0},className:"flex gap-7",children:n.map((t,r)=>N.jsx(_Me,{index:r,...t},t.name))})})]})},wMe=uO(xMe,"feedbacks"),AMe=()=>{const[n,e]=W.useState(0),[t,r]=W.useState(!1),[i,s]=W.useState(""),[o,a]=W.useState(100-Math.random()),[l,u]=W.useState(1),c=["Electronics Engineer","Computer Engineer","Web Developer","Teacher","Researcher","Photographer"],f=1e3;W.useEffect(()=>{let p=setInterval(()=>{h()},o);return()=>{clearInterval(p)}},[i]);const h=()=>{let p=n%c.length,g=c[p],w=t?g.substring(0,i.length-1):g.substring(0,i.length+1);s(w),t&&a(_=>_/2),!t&&w===g?(r(!0),u(_=>_-1),a(f)):t&&w===""?(r(!1),e(n+1),u(1),a(20)):u(_=>_+1)};return W.useEffect(()=>{const p=()=>{const g=document.getElementById("intro");if(g){const w=g.getBoundingClientRect();w.top<=window.innerHeight&&w.bottom>=0&&window.history.replaceState(null,"","#intro")}};return window.addEventListener("scroll",p),()=>{window.removeEventListener("scroll",p)}},[]),N.jsxs("div",{className:"about-me",children:[N.jsx("section",{id:"intro",className:"relative w-full h-screen mx-auto mb-0",children:N.jsxs("div",{className:`absolute inset-0 top-[120px] max-w-7xl mx-auto ${Wr.paddingX} flex flex-row items-start gap-5`,children:[N.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[N.jsx("div",{className:"w-5 h-5 rounded-full bg-[#915EFF]"}),N.jsx("div",{className:"w-1 sm:h-80 h-40 violet-gradient"})]}),N.jsxs("div",{children:[N.jsxs("h1",{className:`${Wr.heroHeadBlackText} text-black`,children:["Hi, I'm ",N.jsx("span",{className:"text-[#915EFF]",children:"Sahaj Shakya"})]}),N.jsx(aMe,{children:({isVisible:p})=>N.jsx("div",{className:p?"animate__animated animate__fadeIn":"",children:N.jsxs("h1",{className:"text-black",children:["I am a"," ",N.jsx("span",{className:"txt-rotate text-black",dataPeriod:"1000","data-rotate":'[ "Electronics Engineer", "Computer Engineer", "Web Developer", "Teacher", "Researcher", "Photographer" ]',children:N.jsx("span",{className:"wrap",children:i})})]})})}),N.jsxs("p",{className:`${Wr.heroSubBlackText} mt-2 text-white-100`,children:["Bachelors in Electronics and Communication Engineering"," ",N.jsx("br",{className:"sm:block hidden"}),"Masters in Computer Engineering"]})]})]})}),N.jsx("section",{id:"academics",children:N.jsx(LW,{id:"academics"})}),N.jsx(vMe,{id:"academic-works"}),N.jsx(zW,{id:"achievements"}),N.jsx(BW,{id:"journey"}),N.jsx(jW,{id:"projects"}),N.jsx(wMe,{id:"feedbacks"}),N.jsx(sW,{id:"contact"})]})},EMe=()=>{const[n,e]=W.useState(""),{enqueueSnackbar:t}=hu(),r=wy({initialValues:{testimonial:"",name:"",designation:"",company:"",image:""},onSubmit:async(i,{resetForm:s})=>{try{await mp(Kr(en,"testimonials"),{testimonial:i.testimonial,name:i.name,designation:i.designation,company:i.company,image:i.image}),t("Testimonial added successfully!",{variant:"success"}),s()}catch(o){console.error("Error adding testimonial: ",o),t("There was an error adding the testimonial",{variant:"error"})}}});return N.jsxs("div",{className:"p-6 max-w-lg mx-auto bg-white rounded-md shadow-md",children:[N.jsx(on.h2,{className:"text-2xl font-bold text-center mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:"Add Testimonial"}),N.jsxs("form",{onSubmit:r.handleSubmit,children:[N.jsx(er,{name:"testimonial",type:"text",label:"Testimonial",value:r.values.testimonial,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.testimonial,touched:r.touched.testimonial,focusedField:n,setFocusedField:e}),N.jsx(er,{name:"name",type:"text",label:"Name",value:r.values.name,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.name,touched:r.touched.name,focusedField:n,setFocusedField:e}),N.jsx(er,{name:"designation",type:"text",label:"Designation",value:r.values.designation,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.designation,touched:r.touched.designation,focusedField:n,setFocusedField:e}),N.jsx(er,{name:"company",type:"text",label:"Company",value:r.values.company,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.company,touched:r.touched.company,focusedField:n,setFocusedField:e}),N.jsx(er,{name:"image",type:"text",label:"Image URL",value:r.values.image,onChange:r.handleChange,onBlur:r.handleBlur,error:r.errors.image,touched:r.touched.image,focusedField:n,setFocusedField:e}),N.jsx("button",{type:"submit",className:"w-full p-3 bg-blue-500 text-white rounded-md mt-4 hover:bg-blue-600 transition-colors",children:"Submit"})]})]})},bMe=()=>{const[n,e]=W.useState({x:0,y:0}),t=()=>{const i=window.innerWidth-200,s=window.innerHeight*.8-60;e({x:Math.random()*i,y:Math.random()*s})},r=()=>{alert("Just kidding!")};return N.jsx(on.div,{style:{position:"absolute",top:n.y,left:n.x},onMouseEnter:t,onClick:r,className:"px-6 py-3 bg-green-500 text-white rounded-lg cursor-pointer",whileHover:{scale:1.1},whileTap:{scale:.9},children:"Earn Money"})},SMe=()=>N.jsxs("div",{className:"flex items-center justify-center h-[80vh] bg-gray-800 relative",children:[N.jsxs(on.div,{className:"text-center text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[N.jsx("h1",{className:"text-5xl font-bold mb-4",children:"404 Not Found"}),N.jsx("p",{className:"text-xl mb-6",children:"Oops, the page you are looking for does not exist."})]}),N.jsx(bMe,{}),N.jsx(Ta,{to:"/",className:"absolute bottom-10 px-6 py-3 bg-blue-500 text-white rounded-lg cursor-pointer hover:bg-blue-700 transition",children:"Go Back to Home"})]}),TMe=[{id:1,name:"admin"}],CMe=async()=>{try{for(const n of TMe){const e=Hr(en,"roles",n.name);(await Ea(e)).exists()||await qI(e,{id:n.id,name:n.name})}}catch(n){console.error("Error checking/creating roles:",n)}},MMe=()=>{const[n,e]=W.useState(!0),{user:t}=Ob();return W.useEffect(()=>{(async()=>{await CMe(),e(!1)})()},[]),n?N.jsx(BH,{}):N.jsx(NH,{children:N.jsx(LK,{children:N.jsxs(fK,{children:[N.jsxs(xr,{path:"/",element:N.jsx(ame,{}),children:[N.jsx(xr,{path:"/",element:t.role?N.jsx(al,{roleProps:t.role,element:N.jsx(O4,{})}):N.jsx(O4,{})}),N.jsx(xr,{path:"/contact",element:N.jsx(sW,{})}),N.jsx(xr,{path:"/academics",element:N.jsx(LW,{})}),N.jsx(xr,{path:"/journey",element:N.jsx(BW,{})}),N.jsx(xr,{path:"/projects",element:N.jsx(jW,{})}),N.jsx(xr,{path:"/me",element:N.jsx(AMe,{})}),N.jsx(xr,{path:"/projects/:id",element:N.jsx(ZCe,{})}),N.jsx(xr,{path:"/achievements",element:N.jsx(zW,{})}),N.jsx(xr,{path:"*",element:N.jsx(SMe,{})}),N.jsx(xr,{path:"/achievements/:id",element:N.jsx(tMe,{})}),N.jsx(xr,{path:"/calendar",element:N.jsx(TCe,{})})]}),N.jsx(xr,{path:"/vitrajanu",element:N.jsx(Bbe,{children:N.jsx(Rpe,{})})}),N.jsxs(xr,{path:"/",element:N.jsx(Ube,{}),children:[N.jsx(xr,{path:"/admin/dashboard",element:N.jsx(al,{roleProps:"admin",element:N.jsx(Fbe,{role:"admin"})})}),N.jsx(xr,{path:"/auth/academics/view",element:N.jsx(al,{roleProps:"admin",element:N.jsx(mCe,{})})}),N.jsx(xr,{path:"/auth/academics/create",element:N.jsx(al,{roleProps:"admin",element:N.jsx(CW,{})})}),N.jsx(xr,{path:"/auth/journey/view",element:N.jsx(al,{roleProps:"admin",element:N.jsx(GCe,{})})}),N.jsx(xr,{path:"/auth/journey/create",element:N.jsx(al,{roleProps:"admin",element:N.jsx(NW,{})})}),N.jsx(xr,{path:"/auth/projects/create",element:N.jsx(al,{roleProps:"admin",element:N.jsx(FW,{})})}),N.jsx(xr,{path:"/auth/projects/view",element:N.jsx(al,{roleProps:"admin",element:N.jsx(qCe,{})})}),N.jsx(xr,{path:"/auth/achievements/create",element:N.jsx(al,{roleProps:"admin",element:N.jsx(VW,{})})}),N.jsx(xr,{path:"/auth/achievements/view",element:N.jsx(al,{roleProps:"admin",element:N.jsx(YCe,{})})}),N.jsx(xr,{path:"/auth/testinomial/create",element:N.jsx(al,{roleProps:"admin",element:N.jsx(EMe,{})})})]}),N.jsx(xr,{path:"/unauthorized",element:N.jsx(Nbe,{})})]})})})},RMe=new Abe;_$.createRoot(document.getElementById("root")).render(N.jsx(W.StrictMode,{children:N.jsx(Cbe,{client:RMe,children:N.jsx(Cpe,{maxSnack:3,children:N.jsx(NH,{children:N.jsx(MMe,{})})})})}));export{Ma as g};
